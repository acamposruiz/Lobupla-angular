{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"if",
				"ife	if … else"
			],
			[
				"ng-cl",
				"ng-click	AngularJS"
			],
			[
				"ng-re",
				"ng-repeat	AngularJS"
			],
			[
				"messa",
				"message"
			]
		]
	},
	"buffers":
	[
		{
			"file": "karma.conf.js",
			"settings":
			{
				"buffer_size": 1825,
				"line_ending": "Unix"
			}
		},
		{
			"file": "SpecRunner.html",
			"settings":
			{
				"buffer_size": 1215,
				"line_ending": "Unix"
			}
		},
		{
			"file": "node_modules/jasmine-core/lib/jasmine-core/jasmine.css",
			"settings":
			{
				"buffer_size": 19608,
				"line_ending": "Unix"
			}
		},
		{
			"file": "package.json",
			"settings":
			{
				"buffer_size": 1231,
				"line_ending": "Unix"
			}
		},
		{
			"file": "test/spec/controllers/home.js",
			"settings":
			{
				"buffer_size": 2804,
				"line_ending": "Unix"
			}
		},
		{
			"file": "test/spec/controllers/home2.js",
			"settings":
			{
				"buffer_size": 663,
				"line_ending": "Unix"
			}
		},
		{
			"file": "test/spec/controllers/home3.js",
			"settings":
			{
				"buffer_size": 699,
				"line_ending": "Unix"
			}
		},
		{
			"contents": "Searching 11852 files for \"10000\" (case sensitive, whole word)\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-connect/node_modules/connect/node_modules/formidable/test/legacy/common.js:\n   21  // better way to deal with this.\n   22  if (process.setMaxListeners) {\n   23:   process.setMaxListeners(10000);\n   24  }\n   25  \n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/download/node_modules/decompress/node_modules/ext-name/node_modules/underscore.string/test/run-qunit.js:\n   42      })\n   43      phantom.exit(failures > 0 ? 1 : 0)\n   44:   }, 10000)\n   45  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/download/node_modules/decompress/node_modules/tar/test/pack-no-proprietary.js:\n  742  fs.linkSync(hard1, hard2)\n  743  \n  744: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  745    runTest(t, true)\n  746  })\n  747  \n  748: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  749    runTest(t, false)\n  750  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/download/node_modules/decompress/node_modules/tar/test/pack.js:\n  790  fs.linkSync(hard1, hard2)\n  791  \n  792: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  793    runTest(t, true)\n  794  })\n  795  \n  796: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  797    runTest(t, false)\n  798  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/hawk/node_modules/sntp/test/index.js:\n  107          it('times out on invalid host', function (done) {\n  108  \n  109:             Sntp.time({ host: 'error', timeout: 10000 }, function (err, time) {\n  110  \n  111                  expect(err).to.exist;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/hawk/test/browser.js:\n 1288  \n 1289                      var offset = Browser.utils.getNtpOffset();\n 1290:                     var tsm = Hawk.crypto.timestampMessage(credentials, 10000);\n 1291                      expect(Browser.client.authenticateTimestamp(tsm, credentials, false)).to.equal(true);\n 1292                      expect(offset).to.equal(Browser.utils.getNtpOffset());\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/node-uuid/test/test.js:\n   78  var thrown = false;\n   79  try {\n   80:   uuid.v1({msecs: TIME, nsecs: 10000});\n   81  } catch (e) {\n   82    thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/node-uuid/uuid.js:\n  132  \n  133      // Time since last uuid creation (in msecs)\n  134:     var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n  135  \n  136      // Per 4.2.1.2, Bump clockseq on clock regression\n  ...\n  146  \n  147      // Per 4.2.1.2 Throw error if too many uuids are requested\n  148:     if (nsecs >= 10000) {\n  149        throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  150      }\n  ...\n  158  \n  159      // `time_low`\n  160:     var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  161      b[i++] = tl >>> 24 & 0xff;\n  162      b[i++] = tl >>> 16 & 0xff;\n  ...\n  165  \n  166      // `time_mid`\n  167:     var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  168      b[i++] = tmh >>> 8 & 0xff;\n  169      b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/tough-cookie/test.js:\n  678          assert.instanceOf(c.creation, Date);\n  679          assert.strictEqual(c.lastAccessed, null);\n  680:         c.creation = new Date(Date.now()-10000);\n  681          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  682        },\n  ...\n  698          assert.instanceOf(c.creation, Date);\n  699          assert.strictEqual(c.lastAccessed, null);\n  700:         c.creation = new Date(Date.now()-10000);\n  701          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  702        },\n  ...\n  712          assert.instanceOf(c.creation, Date);\n  713          assert.strictEqual(c.lastAccessed, null);\n  714:         c.creation = new Date(Date.now()-10000);\n  715          c.hostOnly = true;\n  716          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  ...\n  771          assert.instanceOf(c.creation, Date);\n  772          assert.strictEqual(c.lastAccessed, null);\n  773:         c.creation = new Date(Date.now()-10000);\n  774          cj.setCookie(c, 'http://www.example.com/index.html', this.callback);\n  775        },\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/tempfile/node_modules/uuid/test/test.js:\n   48    var thrown = false;\n   49    try {\n   50:     uuid.v1({msecs: TIME, nsecs: 10000});\n   51    } catch (e) {\n   52      thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-build/node_modules/tempfile/node_modules/uuid/uuid.js:\n   94  \n   95    // Time since last uuid creation (in msecs)\n   96:   var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n   97  \n   98    // Per 4.2.1.2, Bump clockseq on clock regression\n   ..\n  108  \n  109    // Per 4.2.1.2 Throw error if too many uuids are requested\n  110:   if (nsecs >= 10000) {\n  111      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  112    }\n  ...\n  120  \n  121    // `time_low`\n  122:   var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  123    b[i++] = tl >>> 24 & 0xff;\n  124    b[i++] = tl >>> 16 & 0xff;\n  ...\n  127  \n  128    // `time_mid`\n  129:   var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  130    b[i++] = tmh >>> 8 & 0xff;\n  131    b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/ext-name/node_modules/underscore.string/test/run-qunit.js:\n   42      })\n   43      phantom.exit(failures > 0 ? 1 : 0)\n   44:   }, 10000)\n   45  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tar/test/pack-no-proprietary.js:\n  742  fs.linkSync(hard1, hard2)\n  743  \n  744: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  745    runTest(t, true)\n  746  })\n  747  \n  748: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  749    runTest(t, false)\n  750  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tar/test/pack.js:\n  790  fs.linkSync(hard1, hard2)\n  791  \n  792: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  793    runTest(t, true)\n  794  })\n  795  \n  796: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  797    runTest(t, false)\n  798  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tempfile/node_modules/uuid/test/test.js:\n   48    var thrown = false;\n   49    try {\n   50:     uuid.v1({msecs: TIME, nsecs: 10000});\n   51    } catch (e) {\n   52      thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tempfile/node_modules/uuid/uuid.js:\n   94  \n   95    // Time since last uuid creation (in msecs)\n   96:   var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n   97  \n   98    // Per 4.2.1.2, Bump clockseq on clock regression\n   ..\n  108  \n  109    // Per 4.2.1.2 Throw error if too many uuids are requested\n  110:   if (nsecs >= 10000) {\n  111      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  112    }\n  ...\n  120  \n  121    // `time_low`\n  122:   var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  123    b[i++] = tl >>> 24 & 0xff;\n  124    b[i++] = tl >>> 16 & 0xff;\n  ...\n  127  \n  128    // `time_mid`\n  129:   var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  130    b[i++] = tmh >>> 8 & 0xff;\n  131    b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/hawk/node_modules/sntp/test/index.js:\n  107          it('times out on invalid host', function (done) {\n  108  \n  109:             Sntp.time({ host: 'error', timeout: 10000 }, function (err, time) {\n  110  \n  111                  expect(err).to.exist;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/hawk/test/browser.js:\n 1288  \n 1289                      var offset = Browser.utils.getNtpOffset();\n 1290:                     var tsm = Hawk.crypto.timestampMessage(credentials, 10000);\n 1291                      expect(Browser.client.authenticateTimestamp(tsm, credentials, false)).to.equal(true);\n 1292                      expect(offset).to.equal(Browser.utils.getNtpOffset());\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/node-uuid/test/test.js:\n   78  var thrown = false;\n   79  try {\n   80:   uuid.v1({msecs: TIME, nsecs: 10000});\n   81  } catch (e) {\n   82    thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/node-uuid/uuid.js:\n  132  \n  133      // Time since last uuid creation (in msecs)\n  134:     var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n  135  \n  136      // Per 4.2.1.2, Bump clockseq on clock regression\n  ...\n  146  \n  147      // Per 4.2.1.2 Throw error if too many uuids are requested\n  148:     if (nsecs >= 10000) {\n  149        throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  150      }\n  ...\n  158  \n  159      // `time_low`\n  160:     var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  161      b[i++] = tl >>> 24 & 0xff;\n  162      b[i++] = tl >>> 16 & 0xff;\n  ...\n  165  \n  166      // `time_mid`\n  167:     var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  168      b[i++] = tmh >>> 8 & 0xff;\n  169      b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/gifsicle/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/tough-cookie/test.js:\n  678          assert.instanceOf(c.creation, Date);\n  679          assert.strictEqual(c.lastAccessed, null);\n  680:         c.creation = new Date(Date.now()-10000);\n  681          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  682        },\n  ...\n  698          assert.instanceOf(c.creation, Date);\n  699          assert.strictEqual(c.lastAccessed, null);\n  700:         c.creation = new Date(Date.now()-10000);\n  701          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  702        },\n  ...\n  712          assert.instanceOf(c.creation, Date);\n  713          assert.strictEqual(c.lastAccessed, null);\n  714:         c.creation = new Date(Date.now()-10000);\n  715          c.hostOnly = true;\n  716          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  ...\n  771          assert.instanceOf(c.creation, Date);\n  772          assert.strictEqual(c.lastAccessed, null);\n  773:         c.creation = new Date(Date.now()-10000);\n  774          cj.setCookie(c, 'http://www.example.com/index.html', this.callback);\n  775        },\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/download/node_modules/decompress/node_modules/ext-name/node_modules/underscore.string/test/run-qunit.js:\n   42      })\n   43      phantom.exit(failures > 0 ? 1 : 0)\n   44:   }, 10000)\n   45  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/download/node_modules/decompress/node_modules/tar/test/pack-no-proprietary.js:\n  742  fs.linkSync(hard1, hard2)\n  743  \n  744: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  745    runTest(t, true)\n  746  })\n  747  \n  748: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  749    runTest(t, false)\n  750  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/download/node_modules/decompress/node_modules/tar/test/pack.js:\n  790  fs.linkSync(hard1, hard2)\n  791  \n  792: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  793    runTest(t, true)\n  794  })\n  795  \n  796: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  797    runTest(t, false)\n  798  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/hawk/node_modules/sntp/test/index.js:\n  107          it('times out on invalid host', function (done) {\n  108  \n  109:             Sntp.time({ host: 'error', timeout: 10000 }, function (err, time) {\n  110  \n  111                  expect(err).to.exist;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/hawk/test/browser.js:\n 1288  \n 1289                      var offset = Browser.utils.getNtpOffset();\n 1290:                     var tsm = Hawk.crypto.timestampMessage(credentials, 10000);\n 1291                      expect(Browser.client.authenticateTimestamp(tsm, credentials, false)).to.equal(true);\n 1292                      expect(offset).to.equal(Browser.utils.getNtpOffset());\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/node-uuid/test/test.js:\n   78  var thrown = false;\n   79  try {\n   80:   uuid.v1({msecs: TIME, nsecs: 10000});\n   81  } catch (e) {\n   82    thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/node-uuid/uuid.js:\n  132  \n  133      // Time since last uuid creation (in msecs)\n  134:     var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n  135  \n  136      // Per 4.2.1.2, Bump clockseq on clock regression\n  ...\n  146  \n  147      // Per 4.2.1.2 Throw error if too many uuids are requested\n  148:     if (nsecs >= 10000) {\n  149        throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  150      }\n  ...\n  158  \n  159      // `time_low`\n  160:     var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  161      b[i++] = tl >>> 24 & 0xff;\n  162      b[i++] = tl >>> 16 & 0xff;\n  ...\n  165  \n  166      // `time_mid`\n  167:     var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  168      b[i++] = tmh >>> 8 & 0xff;\n  169      b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/tough-cookie/test.js:\n  678          assert.instanceOf(c.creation, Date);\n  679          assert.strictEqual(c.lastAccessed, null);\n  680:         c.creation = new Date(Date.now()-10000);\n  681          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  682        },\n  ...\n  698          assert.instanceOf(c.creation, Date);\n  699          assert.strictEqual(c.lastAccessed, null);\n  700:         c.creation = new Date(Date.now()-10000);\n  701          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  702        },\n  ...\n  712          assert.instanceOf(c.creation, Date);\n  713          assert.strictEqual(c.lastAccessed, null);\n  714:         c.creation = new Date(Date.now()-10000);\n  715          c.hostOnly = true;\n  716          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  ...\n  771          assert.instanceOf(c.creation, Date);\n  772          assert.strictEqual(c.lastAccessed, null);\n  773:         c.creation = new Date(Date.now()-10000);\n  774          cj.setCookie(c, 'http://www.example.com/index.html', this.callback);\n  775        },\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/tempfile/node_modules/uuid/test/test.js:\n   48    var thrown = false;\n   49    try {\n   50:     uuid.v1({msecs: TIME, nsecs: 10000});\n   51    } catch (e) {\n   52      thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-build/node_modules/tempfile/node_modules/uuid/uuid.js:\n   94  \n   95    // Time since last uuid creation (in msecs)\n   96:   var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n   97  \n   98    // Per 4.2.1.2, Bump clockseq on clock regression\n   ..\n  108  \n  109    // Per 4.2.1.2 Throw error if too many uuids are requested\n  110:   if (nsecs >= 10000) {\n  111      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  112    }\n  ...\n  120  \n  121    // `time_low`\n  122:   var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  123    b[i++] = tl >>> 24 & 0xff;\n  124    b[i++] = tl >>> 16 & 0xff;\n  ...\n  127  \n  128    // `time_mid`\n  129:   var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  130    b[i++] = tmh >>> 8 & 0xff;\n  131    b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/ext-name/node_modules/underscore.string/test/run-qunit.js:\n   42      })\n   43      phantom.exit(failures > 0 ? 1 : 0)\n   44:   }, 10000)\n   45  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tar/test/pack-no-proprietary.js:\n  742  fs.linkSync(hard1, hard2)\n  743  \n  744: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  745    runTest(t, true)\n  746  })\n  747  \n  748: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  749    runTest(t, false)\n  750  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tar/test/pack.js:\n  790  fs.linkSync(hard1, hard2)\n  791  \n  792: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  793    runTest(t, true)\n  794  })\n  795  \n  796: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  797    runTest(t, false)\n  798  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tempfile/node_modules/uuid/test/test.js:\n   48    var thrown = false;\n   49    try {\n   50:     uuid.v1({msecs: TIME, nsecs: 10000});\n   51    } catch (e) {\n   52      thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tempfile/node_modules/uuid/uuid.js:\n   94  \n   95    // Time since last uuid creation (in msecs)\n   96:   var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n   97  \n   98    // Per 4.2.1.2, Bump clockseq on clock regression\n   ..\n  108  \n  109    // Per 4.2.1.2 Throw error if too many uuids are requested\n  110:   if (nsecs >= 10000) {\n  111      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  112    }\n  ...\n  120  \n  121    // `time_low`\n  122:   var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  123    b[i++] = tl >>> 24 & 0xff;\n  124    b[i++] = tl >>> 16 & 0xff;\n  ...\n  127  \n  128    // `time_mid`\n  129:   var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  130    b[i++] = tmh >>> 8 & 0xff;\n  131    b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/hawk/node_modules/sntp/test/index.js:\n  107          it('times out on invalid host', function (done) {\n  108  \n  109:             Sntp.time({ host: 'error', timeout: 10000 }, function (err, time) {\n  110  \n  111                  expect(err).to.exist;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/hawk/test/browser.js:\n 1288  \n 1289                      var offset = Browser.utils.getNtpOffset();\n 1290:                     var tsm = Hawk.crypto.timestampMessage(credentials, 10000);\n 1291                      expect(Browser.client.authenticateTimestamp(tsm, credentials, false)).to.equal(true);\n 1292                      expect(offset).to.equal(Browser.utils.getNtpOffset());\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/node-uuid/test/test.js:\n   78  var thrown = false;\n   79  try {\n   80:   uuid.v1({msecs: TIME, nsecs: 10000});\n   81  } catch (e) {\n   82    thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/node-uuid/uuid.js:\n  132  \n  133      // Time since last uuid creation (in msecs)\n  134:     var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n  135  \n  136      // Per 4.2.1.2, Bump clockseq on clock regression\n  ...\n  146  \n  147      // Per 4.2.1.2 Throw error if too many uuids are requested\n  148:     if (nsecs >= 10000) {\n  149        throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  150      }\n  ...\n  158  \n  159      // `time_low`\n  160:     var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  161      b[i++] = tl >>> 24 & 0xff;\n  162      b[i++] = tl >>> 16 & 0xff;\n  ...\n  165  \n  166      // `time_mid`\n  167:     var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  168      b[i++] = tmh >>> 8 & 0xff;\n  169      b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/tough-cookie/test.js:\n  678          assert.instanceOf(c.creation, Date);\n  679          assert.strictEqual(c.lastAccessed, null);\n  680:         c.creation = new Date(Date.now()-10000);\n  681          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  682        },\n  ...\n  698          assert.instanceOf(c.creation, Date);\n  699          assert.strictEqual(c.lastAccessed, null);\n  700:         c.creation = new Date(Date.now()-10000);\n  701          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  702        },\n  ...\n  712          assert.instanceOf(c.creation, Date);\n  713          assert.strictEqual(c.lastAccessed, null);\n  714:         c.creation = new Date(Date.now()-10000);\n  715          c.hostOnly = true;\n  716          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  ...\n  771          assert.instanceOf(c.creation, Date);\n  772          assert.strictEqual(c.lastAccessed, null);\n  773:         c.creation = new Date(Date.now()-10000);\n  774          cj.setCookie(c, 'http://www.example.com/index.html', this.callback);\n  775        },\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/download/node_modules/decompress/node_modules/ext-name/node_modules/underscore.string/test/run-qunit.js:\n   42      })\n   43      phantom.exit(failures > 0 ? 1 : 0)\n   44:   }, 10000)\n   45  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/download/node_modules/decompress/node_modules/tar/test/pack-no-proprietary.js:\n  742  fs.linkSync(hard1, hard2)\n  743  \n  744: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  745    runTest(t, true)\n  746  })\n  747  \n  748: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  749    runTest(t, false)\n  750  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/download/node_modules/decompress/node_modules/tar/test/pack.js:\n  790  fs.linkSync(hard1, hard2)\n  791  \n  792: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  793    runTest(t, true)\n  794  })\n  795  \n  796: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  797    runTest(t, false)\n  798  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/hawk/node_modules/sntp/test/index.js:\n  107          it('times out on invalid host', function (done) {\n  108  \n  109:             Sntp.time({ host: 'error', timeout: 10000 }, function (err, time) {\n  110  \n  111                  expect(err).to.exist;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/hawk/test/browser.js:\n 1288  \n 1289                      var offset = Browser.utils.getNtpOffset();\n 1290:                     var tsm = Hawk.crypto.timestampMessage(credentials, 10000);\n 1291                      expect(Browser.client.authenticateTimestamp(tsm, credentials, false)).to.equal(true);\n 1292                      expect(offset).to.equal(Browser.utils.getNtpOffset());\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/node-uuid/test/test.js:\n   78  var thrown = false;\n   79  try {\n   80:   uuid.v1({msecs: TIME, nsecs: 10000});\n   81  } catch (e) {\n   82    thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/node-uuid/uuid.js:\n  132  \n  133      // Time since last uuid creation (in msecs)\n  134:     var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n  135  \n  136      // Per 4.2.1.2, Bump clockseq on clock regression\n  ...\n  146  \n  147      // Per 4.2.1.2 Throw error if too many uuids are requested\n  148:     if (nsecs >= 10000) {\n  149        throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  150      }\n  ...\n  158  \n  159      // `time_low`\n  160:     var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  161      b[i++] = tl >>> 24 & 0xff;\n  162      b[i++] = tl >>> 16 & 0xff;\n  ...\n  165  \n  166      // `time_mid`\n  167:     var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  168      b[i++] = tmh >>> 8 & 0xff;\n  169      b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/download/node_modules/request/node_modules/tough-cookie/test.js:\n  678          assert.instanceOf(c.creation, Date);\n  679          assert.strictEqual(c.lastAccessed, null);\n  680:         c.creation = new Date(Date.now()-10000);\n  681          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  682        },\n  ...\n  698          assert.instanceOf(c.creation, Date);\n  699          assert.strictEqual(c.lastAccessed, null);\n  700:         c.creation = new Date(Date.now()-10000);\n  701          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  702        },\n  ...\n  712          assert.instanceOf(c.creation, Date);\n  713          assert.strictEqual(c.lastAccessed, null);\n  714:         c.creation = new Date(Date.now()-10000);\n  715          c.hostOnly = true;\n  716          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  ...\n  771          assert.instanceOf(c.creation, Date);\n  772          assert.strictEqual(c.lastAccessed, null);\n  773:         c.creation = new Date(Date.now()-10000);\n  774          cj.setCookie(c, 'http://www.example.com/index.html', this.callback);\n  775        },\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/tempfile/node_modules/uuid/test/test.js:\n   48    var thrown = false;\n   49    try {\n   50:     uuid.v1({msecs: TIME, nsecs: 10000});\n   51    } catch (e) {\n   52      thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-build/node_modules/tempfile/node_modules/uuid/uuid.js:\n   94  \n   95    // Time since last uuid creation (in msecs)\n   96:   var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n   97  \n   98    // Per 4.2.1.2, Bump clockseq on clock regression\n   ..\n  108  \n  109    // Per 4.2.1.2 Throw error if too many uuids are requested\n  110:   if (nsecs >= 10000) {\n  111      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  112    }\n  ...\n  120  \n  121    // `time_low`\n  122:   var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  123    b[i++] = tl >>> 24 & 0xff;\n  124    b[i++] = tl >>> 16 & 0xff;\n  ...\n  127  \n  128    // `time_mid`\n  129:   var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  130    b[i++] = tmh >>> 8 & 0xff;\n  131    b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/ext-name/node_modules/underscore.string/test/run-qunit.js:\n   42      })\n   43      phantom.exit(failures > 0 ? 1 : 0)\n   44:   }, 10000)\n   45  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tar/test/pack-no-proprietary.js:\n  742  fs.linkSync(hard1, hard2)\n  743  \n  744: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  745    runTest(t, true)\n  746  })\n  747  \n  748: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  749    runTest(t, false)\n  750  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tar/test/pack.js:\n  790  fs.linkSync(hard1, hard2)\n  791  \n  792: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  793    runTest(t, true)\n  794  })\n  795  \n  796: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  797    runTest(t, false)\n  798  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tempfile/node_modules/uuid/test/test.js:\n   48    var thrown = false;\n   49    try {\n   50:     uuid.v1({msecs: TIME, nsecs: 10000});\n   51    } catch (e) {\n   52      thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tempfile/node_modules/uuid/uuid.js:\n   94  \n   95    // Time since last uuid creation (in msecs)\n   96:   var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n   97  \n   98    // Per 4.2.1.2, Bump clockseq on clock regression\n   ..\n  108  \n  109    // Per 4.2.1.2 Throw error if too many uuids are requested\n  110:   if (nsecs >= 10000) {\n  111      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  112    }\n  ...\n  120  \n  121    // `time_low`\n  122:   var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  123    b[i++] = tl >>> 24 & 0xff;\n  124    b[i++] = tl >>> 16 & 0xff;\n  ...\n  127  \n  128    // `time_mid`\n  129:   var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  130    b[i++] = tmh >>> 8 & 0xff;\n  131    b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/hawk/node_modules/sntp/test/index.js:\n  107          it('times out on invalid host', function (done) {\n  108  \n  109:             Sntp.time({ host: 'error', timeout: 10000 }, function (err, time) {\n  110  \n  111                  expect(err).to.exist;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/hawk/test/browser.js:\n 1288  \n 1289                      var offset = Browser.utils.getNtpOffset();\n 1290:                     var tsm = Hawk.crypto.timestampMessage(credentials, 10000);\n 1291                      expect(Browser.client.authenticateTimestamp(tsm, credentials, false)).to.equal(true);\n 1292                      expect(offset).to.equal(Browser.utils.getNtpOffset());\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/node-uuid/test/test.js:\n   78  var thrown = false;\n   79  try {\n   80:   uuid.v1({msecs: TIME, nsecs: 10000});\n   81  } catch (e) {\n   82    thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/node-uuid/uuid.js:\n  132  \n  133      // Time since last uuid creation (in msecs)\n  134:     var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n  135  \n  136      // Per 4.2.1.2, Bump clockseq on clock regression\n  ...\n  146  \n  147      // Per 4.2.1.2 Throw error if too many uuids are requested\n  148:     if (nsecs >= 10000) {\n  149        throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  150      }\n  ...\n  158  \n  159      // `time_low`\n  160:     var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  161      b[i++] = tl >>> 24 & 0xff;\n  162      b[i++] = tl >>> 16 & 0xff;\n  ...\n  165  \n  166      // `time_mid`\n  167:     var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  168      b[i++] = tmh >>> 8 & 0xff;\n  169      b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/optipng-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/tough-cookie/test.js:\n  678          assert.instanceOf(c.creation, Date);\n  679          assert.strictEqual(c.lastAccessed, null);\n  680:         c.creation = new Date(Date.now()-10000);\n  681          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  682        },\n  ...\n  698          assert.instanceOf(c.creation, Date);\n  699          assert.strictEqual(c.lastAccessed, null);\n  700:         c.creation = new Date(Date.now()-10000);\n  701          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  702        },\n  ...\n  712          assert.instanceOf(c.creation, Date);\n  713          assert.strictEqual(c.lastAccessed, null);\n  714:         c.creation = new Date(Date.now()-10000);\n  715          c.hostOnly = true;\n  716          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  ...\n  771          assert.instanceOf(c.creation, Date);\n  772          assert.strictEqual(c.lastAccessed, null);\n  773:         c.creation = new Date(Date.now()-10000);\n  774          cj.setCookie(c, 'http://www.example.com/index.html', this.callback);\n  775        },\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/ext-name/node_modules/underscore.string/test/run-qunit.js:\n   42      })\n   43      phantom.exit(failures > 0 ? 1 : 0)\n   44:   }, 10000)\n   45  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tar/test/pack-no-proprietary.js:\n  742  fs.linkSync(hard1, hard2)\n  743  \n  744: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  745    runTest(t, true)\n  746  })\n  747  \n  748: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  749    runTest(t, false)\n  750  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/download/node_modules/decompress/node_modules/tar/test/pack.js:\n  790  fs.linkSync(hard1, hard2)\n  791  \n  792: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  793    runTest(t, true)\n  794  })\n  795  \n  796: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  797    runTest(t, false)\n  798  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/hawk/node_modules/sntp/test/index.js:\n  107          it('times out on invalid host', function (done) {\n  108  \n  109:             Sntp.time({ host: 'error', timeout: 10000 }, function (err, time) {\n  110  \n  111                  expect(err).to.exist;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/hawk/test/browser.js:\n 1288  \n 1289                      var offset = Browser.utils.getNtpOffset();\n 1290:                     var tsm = Hawk.crypto.timestampMessage(credentials, 10000);\n 1291                      expect(Browser.client.authenticateTimestamp(tsm, credentials, false)).to.equal(true);\n 1292                      expect(offset).to.equal(Browser.utils.getNtpOffset());\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/node-uuid/test/test.js:\n   78  var thrown = false;\n   79  try {\n   80:   uuid.v1({msecs: TIME, nsecs: 10000});\n   81  } catch (e) {\n   82    thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/node-uuid/uuid.js:\n  132  \n  133      // Time since last uuid creation (in msecs)\n  134:     var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n  135  \n  136      // Per 4.2.1.2, Bump clockseq on clock regression\n  ...\n  146  \n  147      // Per 4.2.1.2 Throw error if too many uuids are requested\n  148:     if (nsecs >= 10000) {\n  149        throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  150      }\n  ...\n  158  \n  159      // `time_low`\n  160:     var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  161      b[i++] = tl >>> 24 & 0xff;\n  162      b[i++] = tl >>> 16 & 0xff;\n  ...\n  165  \n  166      // `time_mid`\n  167:     var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  168      b[i++] = tmh >>> 8 & 0xff;\n  169      b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/download/node_modules/request/node_modules/tough-cookie/test.js:\n  678          assert.instanceOf(c.creation, Date);\n  679          assert.strictEqual(c.lastAccessed, null);\n  680:         c.creation = new Date(Date.now()-10000);\n  681          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  682        },\n  ...\n  698          assert.instanceOf(c.creation, Date);\n  699          assert.strictEqual(c.lastAccessed, null);\n  700:         c.creation = new Date(Date.now()-10000);\n  701          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  702        },\n  ...\n  712          assert.instanceOf(c.creation, Date);\n  713          assert.strictEqual(c.lastAccessed, null);\n  714:         c.creation = new Date(Date.now()-10000);\n  715          c.hostOnly = true;\n  716          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  ...\n  771          assert.instanceOf(c.creation, Date);\n  772          assert.strictEqual(c.lastAccessed, null);\n  773:         c.creation = new Date(Date.now()-10000);\n  774          cj.setCookie(c, 'http://www.example.com/index.html', this.callback);\n  775        },\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/tempfile/node_modules/uuid/test/test.js:\n   48    var thrown = false;\n   49    try {\n   50:     uuid.v1({msecs: TIME, nsecs: 10000});\n   51    } catch (e) {\n   52      thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/pngquant-bin/node_modules/bin-wrapper/node_modules/tempfile/node_modules/uuid/uuid.js:\n   94  \n   95    // Time since last uuid creation (in msecs)\n   96:   var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n   97  \n   98    // Per 4.2.1.2, Bump clockseq on clock regression\n   ..\n  108  \n  109    // Per 4.2.1.2 Throw error if too many uuids are requested\n  110:   if (nsecs >= 10000) {\n  111      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  112    }\n  ...\n  120  \n  121    // `time_low`\n  122:   var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  123    b[i++] = tl >>> 24 & 0xff;\n  124    b[i++] = tl >>> 16 & 0xff;\n  ...\n  127  \n  128    // `time_mid`\n  129:   var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  130    b[i++] = tmh >>> 8 & 0xff;\n  131    b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-jshint/node_modules/jshint/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js:\n   32  \n   33    // do it again, but more\n   34:   for (var i = 0; i < 10000; i++) {\n   35      l.set(i, new X);\n   36      // throw some gets in there, too.\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-watch/node_modules/gaze/node_modules/globule/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js:\n   32  \n   33    // do it again, but more\n   34:   for (var i = 0; i < 10000; i++) {\n   35      l.set(i, new X);\n   36      // throw some gets in there, too.\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-watch/node_modules/tiny-lr/lib/public/livereload.js:\n  430      path2 = path2.replace(/^\\/+/, '').toLowerCase();\n  431      if (path1 === path2) {\n  432:       return 10000;\n  433      }\n  434      comps1 = path1.split('/').reverse();\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/Makefile:\n    1  test: node_modules\n    2: 	./node_modules/.bin/mocha -R spec -t 10000\n    3  \n    4  node_modules: package.json\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/glob/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js:\n   32  \n   33    // do it again, but more\n   34:   for (var i = 0; i < 10000; i++) {\n   35      l.set(i, new X);\n   36      // throw some gets in there, too.\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/read-package-json/node_modules/npmlog/example.js:\n   36                   'and maybe a stack.\\n'+\n   37                   new Error('a 404 error').stack)\n   38: log.addLevel('noise', 10000, {beep: true})\n   39  log.noise(false, 'LOUD NOISES')\n   40  \n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/read-package-json/node_modules/npmlog/log.js:\n   41  var id = 0\n   42  log.record = []\n   43: log.maxRecordSize = 10000\n   44  log.log = function (lvl, prefix, message) {\n   45    var l = this.levels[lvl]\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/read-package-json/node_modules/npmlog/test/basic.js:\n  216                     'message, with some details\\n'+\n  217                     'and maybe a stack.\\n')\n  218:   log.addLevel('noise', 10000, {beep: true})\n  219    log.noise(false, 'LOUD NOISES')\n  220  \n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/tar/test/pack-no-proprietary.js:\n  742  fs.linkSync(hard1, hard2)\n  743  \n  744: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  745    runTest(t, true)\n  746  })\n  747  \n  748: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  749    runTest(t, false)\n  750  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/tar/test/pack.js:\n  790  fs.linkSync(hard1, hard2)\n  791  \n  792: tap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  793    runTest(t, true)\n  794  })\n  795  \n  796: tap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  797    runTest(t, false)\n  798  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/unzip/node_modules/binary/perf/loop.js:\n   13      var i = 0;\n   14      var iv = setInterval(function () {\n   15:         var buf = new Buffer(10000);\n   16          buf[0] = 0xff;\n   17          \n   ..\n   48              .word32be('z')\n   49              .word32le('w')\n   50:             .buffer('buf', 10000 - 10)\n   51              .tap(function (vars) {\n   52                  if (vars.x === 0) {\n   ..\n   78              .getWord32be('z')\n   79              .getWord32le('w')\n   80:             .getBuffer('buf', 10000 - 10)\n   81              .tap(function (vars) {\n   82                  if (vars.x === 0) {\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/update-notifier/node_modules/configstore/node_modules/uuid/test/test.js:\n   48    var thrown = false;\n   49    try {\n   50:     uuid.v1({msecs: TIME, nsecs: 10000});\n   51    } catch (e) {\n   52      thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/update-notifier/node_modules/configstore/node_modules/uuid/uuid.js:\n   89  \n   90    // Time since last uuid creation (in msecs)\n   91:   var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n   92  \n   93    // Per 4.2.1.2, Bump clockseq on clock regression\n   ..\n  103  \n  104    // Per 4.2.1.2 Throw error if too many uuids are requested\n  105:   if (nsecs >= 10000) {\n  106      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  107    }\n  ...\n  115  \n  116    // `time_low`\n  117:   var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  118    b[i++] = tl >>> 24 & 0xff;\n  119    b[i++] = tl >>> 16 & 0xff;\n  ...\n  122  \n  123    // `time_mid`\n  124:   var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  125    b[i++] = tmh >>> 8 & 0xff;\n  126    b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/update-notifier/node_modules/request/node_modules/hawk/node_modules/sntp/test/index.js:\n  107          it('times out on invalid host', function (done) {\n  108  \n  109:             Sntp.time({ host: 'error', timeout: 10000 }, function (err, time) {\n  110  \n  111                  expect(err).to.exist;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/update-notifier/node_modules/request/node_modules/hawk/test/browser.js:\n 1288  \n 1289                      var offset = Browser.utils.getNtpOffset();\n 1290:                     var tsm = Hawk.crypto.timestampMessage(credentials, 10000);\n 1291                      expect(Browser.client.authenticateTimestamp(tsm, credentials, false)).to.equal(true);\n 1292                      expect(offset).to.equal(Browser.utils.getNtpOffset());\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/update-notifier/node_modules/request/node_modules/node-uuid/test/test.js:\n   78  var thrown = false;\n   79  try {\n   80:   uuid.v1({msecs: TIME, nsecs: 10000});\n   81  } catch (e) {\n   82    thrown = true;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/update-notifier/node_modules/request/node_modules/node-uuid/uuid.js:\n  132  \n  133      // Time since last uuid creation (in msecs)\n  134:     var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n  135  \n  136      // Per 4.2.1.2, Bump clockseq on clock regression\n  ...\n  146  \n  147      // Per 4.2.1.2 Throw error if too many uuids are requested\n  148:     if (nsecs >= 10000) {\n  149        throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  150      }\n  ...\n  158  \n  159      // `time_low`\n  160:     var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  161      b[i++] = tl >>> 24 & 0xff;\n  162      b[i++] = tl >>> 16 & 0xff;\n  ...\n  165  \n  166      // `time_mid`\n  167:     var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  168      b[i++] = tmh >>> 8 & 0xff;\n  169      b[i++] = tmh & 0xff;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/update-notifier/node_modules/request/node_modules/tough-cookie/test.js:\n  678          assert.instanceOf(c.creation, Date);\n  679          assert.strictEqual(c.lastAccessed, null);\n  680:         c.creation = new Date(Date.now()-10000);\n  681          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  682        },\n  ...\n  698          assert.instanceOf(c.creation, Date);\n  699          assert.strictEqual(c.lastAccessed, null);\n  700:         c.creation = new Date(Date.now()-10000);\n  701          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  702        },\n  ...\n  712          assert.instanceOf(c.creation, Date);\n  713          assert.strictEqual(c.lastAccessed, null);\n  714:         c.creation = new Date(Date.now()-10000);\n  715          c.hostOnly = true;\n  716          cj.setCookie(c, 'http://example.com/index.html', this.callback);\n  ...\n  771          assert.instanceOf(c.creation, Date);\n  772          assert.strictEqual(c.lastAccessed, null);\n  773:         c.creation = new Date(Date.now()-10000);\n  774          cj.setCookie(c, 'http://www.example.com/index.html', this.callback);\n  775        },\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-svgmin/node_modules/svgo/node_modules/sax/lib/sax.js:\n  275  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  276  // This implementation works on strings, a single character at a time\n  277: // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  278  // without a significant breaking change to either this  parser, or the\n  279  // JavaScript language.  Implementation of an emoji-capable xml parser\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt/node_modules/findup-sync/node_modules/glob/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js:\n   32  \n   33    // do it again, but more\n   34:   for (var i = 0; i < 10000; i++) {\n   35      l.set(i, new X);\n   36      // throw some gets in there, too.\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt/node_modules/grunt-legacy-log/node_modules/underscore.string/test/run-qunit.js:\n   42      })\n   43      phantom.exit(failures > 0 ? 1 : 0)\n   44:   }, 10000)\n   45  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt/node_modules/iconv-lite/encodings/singlebyte.js:\n   26    \"1257\": \"windows1257\",\n   27    \"1258\": \"windows1258\",\n   28:   \"10000\": \"macroman\",\n   29    \"10006\": \"macgreek\",\n   30    \"10007\": \"maccyrillic\",\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt/node_modules/iconv-lite/test/performance.js:\n    4  \n    5  var encoding = process.argv[2] || \"windows-1251\";\n    6: var convertTimes = 10000;\n    7  \n    8  var encodingStrings = {\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js:\n   32  \n   33    // do it again, but more\n   34:   for (var i = 0; i < 10000; i++) {\n   35      l.set(i, new X);\n   36      // throw some gets in there, too.\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt/node_modules/underscore.string/test/run-qunit.js:\n   41      })\n   42      phantom.exit(failures > 0 ? 1 : 0)\n   43:   }, 10000)\n   44  })\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt/node_modules/underscore.string/test/test_underscore/vendor/jquery.js:\n   17   *  More information: http://sizzlejs.com/\n   18   */\n   19: (function(){var R=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^[\\]]*\\]|['\"][^'\"]*['\"]|[^[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?/g,L=0,H=Object.prototype.toString;var F=function(Y,U,ab,ac){ab=ab||[];U=U||document;if(U.nodeType!==1&&U.nodeType!==9){return[]}if(!Y||typeof Y!==\"string\"){return ab}var Z=[],W,af,ai,T,ad,V,X=true;R.lastIndex=0;while((W=R.exec(Y))!==null){Z.push(W[1]);if(W[2]){V=RegExp.rightContext;break}}if(Z.length>1&&M.exec(Y)){if(Z.length===2&&I.relative[Z[0]]){af=J(Z[0]+Z[1],U)}else{af=I.relative[Z[0]]?[U]:F(Z.shift(),U);while(Z.length){Y=Z.shift();if(I.relative[Y]){Y+=Z.shift()}af=J(Y,af)}}}else{var ae=ac?{expr:Z.pop(),set:E(ac)}:F.find(Z.pop(),Z.length===1&&U.parentNode?U.parentNode:U,Q(U));af=F.filter(ae.expr,ae.set);if(Z.length>0){ai=E(af)}else{X=false}while(Z.length){var ah=Z.pop(),ag=ah;if(!I.relative[ah]){ah=\"\"}else{ag=Z.pop()}if(ag==null){ag=U}I.relative[ah](ai,ag,Q(U))}}if(!ai){ai=af}if(!ai){throw\"Syntax error, unrecognized expression: \"+(ah||Y)}if(H.call(ai)===\"[object Array]\"){if(!X){ab.push.apply(ab,ai)}else{if(U.nodeType===1){for(var aa=0;ai[aa]!=null;aa++){if(ai[aa]&&(ai[aa]===true||ai[aa].nodeType===1&&K(U,ai[aa]))){ab.push(af[aa])}}}else{for(var aa=0;ai[aa]!=null;aa++){if(ai[aa]&&ai[aa].nodeType===1){ab.push(af[aa])}}}}}else{E(ai,ab)}if(V){F(V,U,ab,ac);if(G){hasDuplicate=false;ab.sort(G);if(hasDuplicate){for(var aa=1;aa<ab.length;aa++){if(ab[aa]===ab[aa-1]){ab.splice(aa--,1)}}}}}return ab};F.matches=function(T,U){return F(T,null,null,U)};F.find=function(aa,T,ab){var Z,X;if(!aa){return[]}for(var W=0,V=I.order.length;W<V;W++){var Y=I.order[W],X;if((X=I.match[Y].exec(aa))){var U=RegExp.leftContext;if(U.substr(U.length-1)!==\"\\\\\"){X[1]=(X[1]||\"\").replace(/\\\\/g,\"\");Z=I.find[Y](X,T,ab);if(Z!=null){aa=aa.replace(I.match[Y],\"\");break}}}}if(!Z){Z=T.getElementsByTagName(\"*\")}return{set:Z,expr:aa}};F.filter=function(ad,ac,ag,W){var V=ad,ai=[],aa=ac,Y,T,Z=ac&&ac[0]&&Q(ac[0]);while(ad&&ac.length){for(var ab in I.filter){if((Y=I.match[ab].exec(ad))!=null){var U=I.filter[ab],ah,af;T=false;if(aa==ai){ai=[]}if(I.preFilter[ab]){Y=I.preFilter[ab](Y,aa,ag,ai,W,Z);if(!Y){T=ah=true}else{if(Y===true){continue}}}if(Y){for(var X=0;(af=aa[X])!=null;X++){if(af){ah=U(af,Y,X,aa);var ae=W^!!ah;if(ag&&ah!=null){if(ae){T=true}else{aa[X]=false}}else{if(ae){ai.push(af);T=true}}}}}if(ah!==g){if(!ag){aa=ai}ad=ad.replace(I.match[ab],\"\");if(!T){return[]}break}}}if(ad==V){if(T==null){throw\"Syntax error, unrecognized expression: \"+ad}else{break}}V=ad}return aa};var I=F.selectors={order:[\"ID\",\"NAME\",\"TAG\"],match:{ID:/#((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,CLASS:/\\.((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,NAME:/\\[name=['\"]*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)['\"]*\\]/,ATTR:/\\[\\s*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(['\"]*)(.*?)\\3|)\\s*\\]/,TAG:/^((?:[\\w\\u00c0-\\uFFFF\\*_-]|\\\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\\((even|odd|[\\dn+-]*)\\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^-]|$)/,PSEUDO:/:((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)(?:\\((['\"]*)((?:\\([^\\)]+\\)|[^\\2\\(\\)]*)+)\\2\\))?/},attrMap:{\"class\":\"className\",\"for\":\"htmlFor\"},attrHandle:{href:function(T){return T.getAttribute(\"href\")}},relative:{\"+\":function(aa,T,Z){var X=typeof T===\"string\",ab=X&&!/\\W/.test(T),Y=X&&!ab;if(ab&&!Z){T=T.toUpperCase()}for(var W=0,V=aa.length,U;W<V;W++){if((U=aa[W])){while((U=U.previousSibling)&&U.nodeType!==1){}aa[W]=Y||U&&U.nodeName===T?U||false:U===T}}if(Y){F.filter(T,aa,true)}},\">\":function(Z,U,aa){var X=typeof U===\"string\";if(X&&!/\\W/.test(U)){U=aa?U:U.toUpperCase();for(var V=0,T=Z.length;V<T;V++){var Y=Z[V];if(Y){var W=Y.parentNode;Z[V]=W.nodeName===U?W:false}}}else{for(var V=0,T=Z.length;V<T;V++){var Y=Z[V];if(Y){Z[V]=X?Y.parentNode:Y.parentNode===U}}if(X){F.filter(U,Z,true)}}},\"\":function(W,U,Y){var V=L++,T=S;if(!U.match(/\\W/)){var X=U=Y?U:U.toUpperCase();T=P}T(\"parentNode\",U,V,W,X,Y)},\"~\":function(W,U,Y){var V=L++,T=S;if(typeof U===\"string\"&&!U.match(/\\W/)){var X=U=Y?U:U.toUpperCase();T=P}T(\"previousSibling\",U,V,W,X,Y)}},find:{ID:function(U,V,W){if(typeof V.getElementById!==\"undefined\"&&!W){var T=V.getElementById(U[1]);return T?[T]:[]}},NAME:function(V,Y,Z){if(typeof Y.getElementsByName!==\"undefined\"){var U=[],X=Y.getElementsByName(V[1]);for(var W=0,T=X.length;W<T;W++){if(X[W].getAttribute(\"name\")===V[1]){U.push(X[W])}}return U.length===0?null:U}},TAG:function(T,U){return U.getElementsByTagName(T[1])}},preFilter:{CLASS:function(W,U,V,T,Z,aa){W=\" \"+W[1].replace(/\\\\/g,\"\")+\" \";if(aa){return W}for(var X=0,Y;(Y=U[X])!=null;X++){if(Y){if(Z^(Y.className&&(\" \"+Y.className+\" \").indexOf(W)>=0)){if(!V){T.push(Y)}}else{if(V){U[X]=false}}}}return false},ID:function(T){return T[1].replace(/\\\\/g,\"\")},TAG:function(U,T){for(var V=0;T[V]===false;V++){}return T[V]&&Q(T[V])?U[1]:U[1].toUpperCase()},CHILD:function(T){if(T[1]==\"nth\"){var U=/(-?)(\\d*)n((?:\\+|-)?\\d*)/.exec(T[2]==\"even\"&&\"2n\"||T[2]==\"odd\"&&\"2n+1\"||!/\\D/.test(T[2])&&\"0n+\"+T[2]||T[2]);T[2]=(U[1]+(U[2]||1))-0;T[3]=U[3]-0}T[0]=L++;return T},ATTR:function(X,U,V,T,Y,Z){var W=X[1].replace(/\\\\/g,\"\");if(!Z&&I.attrMap[W]){X[1]=I.attrMap[W]}if(X[2]===\"~=\"){X[4]=\" \"+X[4]+\" \"}return X},PSEUDO:function(X,U,V,T,Y){if(X[1]===\"not\"){if(X[3].match(R).length>1||/^\\w/.test(X[3])){X[3]=F(X[3],null,null,U)}else{var W=F.filter(X[3],U,V,true^Y);if(!V){T.push.apply(T,W)}return false}}else{if(I.match.POS.test(X[0])||I.match.CHILD.test(X[0])){return true}}return X},POS:function(T){T.unshift(true);return T}},filters:{enabled:function(T){return T.disabled===false&&T.type!==\"hidden\"},disabled:function(T){return T.disabled===true},checked:function(T){return T.checked===true},selected:function(T){T.parentNode.selectedIndex;return T.selected===true},parent:function(T){return !!T.firstChild},empty:function(T){return !T.firstChild},has:function(V,U,T){return !!F(T[3],V).length},header:function(T){return/h\\d/i.test(T.nodeName)},text:function(T){return\"text\"===T.type},radio:function(T){return\"radio\"===T.type},checkbox:function(T){return\"checkbox\"===T.type},file:function(T){return\"file\"===T.type},password:function(T){return\"password\"===T.type},submit:function(T){return\"submit\"===T.type},image:function(T){return\"image\"===T.type},reset:function(T){return\"reset\"===T.type},button:function(T){return\"button\"===T.type||T.nodeName.toUpperCase()===\"BUTTON\"},input:function(T){return/input|select|textarea|button/i.test(T.nodeName)}},setFilters:{first:function(U,T){return T===0},last:function(V,U,T,W){return U===W.length-1},even:function(U,T){return T%2===0},odd:function(U,T){return T%2===1},lt:function(V,U,T){return U<T[3]-0},gt:function(V,U,T){return U>T[3]-0},nth:function(V,U,T){return T[3]-0==U},eq:function(V,U,T){return T[3]-0==U}},filter:{PSEUDO:function(Z,V,W,aa){var U=V[1],X=I.filters[U];if(X){return X(Z,W,V,aa)}else{if(U===\"contains\"){return(Z.textContent||Z.innerText||\"\").indexOf(V[3])>=0}else{if(U===\"not\"){var Y=V[3];for(var W=0,T=Y.length;W<T;W++){if(Y[W]===Z){return false}}return true}}}},CHILD:function(T,W){var Z=W[1],U=T;switch(Z){case\"only\":case\"first\":while(U=U.previousSibling){if(U.nodeType===1){return false}}if(Z==\"first\"){return true}U=T;case\"last\":while(U=U.nextSibling){if(U.nodeType===1){return false}}return true;case\"nth\":var V=W[2],ac=W[3];if(V==1&&ac==0){return true}var Y=W[0],ab=T.parentNode;if(ab&&(ab.sizcache!==Y||!T.nodeIndex)){var X=0;for(U=ab.firstChild;U;U=U.nextSibling){if(U.nodeType===1){U.nodeIndex=++X}}ab.sizcache=Y}var aa=T.nodeIndex-ac;if(V==0){return aa==0}else{return(aa%V==0&&aa/V>=0)}}},ID:function(U,T){return U.nodeType===1&&U.getAttribute(\"id\")===T},TAG:function(U,T){return(T===\"*\"&&U.nodeType===1)||U.nodeName===T},CLASS:function(U,T){return(\" \"+(U.className||U.getAttribute(\"class\"))+\" \").indexOf(T)>-1},ATTR:function(Y,W){var V=W[1],T=I.attrHandle[V]?I.attrHandle[V](Y):Y[V]!=null?Y[V]:Y.getAttribute(V),Z=T+\"\",X=W[2],U=W[4];return T==null?X===\"!=\":X===\"=\"?Z===U:X===\"*=\"?Z.indexOf(U)>=0:X===\"~=\"?(\" \"+Z+\" \").indexOf(U)>=0:!U?Z&&T!==false:X===\"!=\"?Z!=U:X===\"^=\"?Z.indexOf(U)===0:X===\"$=\"?Z.substr(Z.length-U.length)===U:X===\"|=\"?Z===U||Z.substr(0,U.length+1)===U+\"-\":false},POS:function(X,U,V,Y){var T=U[2],W=I.setFilters[T];if(W){return W(X,V,U,Y)}}}};var M=I.match.POS;for(var O in I.match){I.match[O]=RegExp(I.match[O].source+/(?![^\\[]*\\])(?![^\\(]*\\))/.source)}var E=function(U,T){U=Array.prototype.slice.call(U);if(T){T.push.apply(T,U);return T}return U};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(N){E=function(X,W){var U=W||[];if(H.call(X)===\"[object Array]\"){Array.prototype.push.apply(U,X)}else{if(typeof X.length===\"number\"){for(var V=0,T=X.length;V<T;V++){U.push(X[V])}}else{for(var V=0;X[V];V++){U.push(X[V])}}}return U}}var G;if(document.documentElement.compareDocumentPosition){G=function(U,T){var V=U.compareDocumentPosition(T)&4?-1:U===T?0:1;if(V===0){hasDuplicate=true}return V}}else{if(\"sourceIndex\" in document.documentElement){G=function(U,T){var V=U.sourceIndex-T.sourceIndex;if(V===0){hasDuplicate=true}return V}}else{if(document.createRange){G=function(W,U){var V=W.ownerDocument.createRange(),T=U.ownerDocument.createRange();V.selectNode(W);V.collapse(true);T.selectNode(U);T.collapse(true);var X=V.compareBoundaryPoints(Range.START_TO_END,T);if(X===0){hasDuplicate=true}return X}}}}(function(){var U=document.createElement(\"form\"),V=\"script\"+(new Date).getTime();U.innerHTML=\"<input name='\"+V+\"'/>\";var T=document.documentElement;T.insertBefore(U,T.firstChild);if(!!document.getElementById(V)){I.find.ID=function(X,Y,Z){if(typeof Y.getElementById!==\"undefined\"&&!Z){var W=Y.getElementById(X[1]);return W?W.id===X[1]||typeof W.getAttributeNode!==\"undefined\"&&W.getAttributeNode(\"id\").nodeValue===X[1]?[W]:g:[]}};I.filter.ID=function(Y,W){var X=typeof Y.getAttributeNode!==\"undefined\"&&Y.getAttributeNode(\"id\");return Y.nodeType===1&&X&&X.nodeValue===W}}T.removeChild(U)})();(function(){var T=document.createElement(\"div\");T.appendChild(document.createComment(\"\"));if(T.getElementsByTagName(\"*\").length>0){I.find.TAG=function(U,Y){var X=Y.getElementsByTagName(U[1]);if(U[1]===\"*\"){var W=[];for(var V=0;X[V];V++){if(X[V].nodeType===1){W.push(X[V])}}X=W}return X}}T.innerHTML=\"<a href='#'></a>\";if(T.firstChild&&typeof T.firstChild.getAttribute!==\"undefined\"&&T.firstChild.getAttribute(\"href\")!==\"#\"){I.attrHandle.href=function(U){return U.getAttribute(\"href\",2)}}})();if(document.querySelectorAll){(function(){var T=F,U=document.createElement(\"div\");U.innerHTML=\"<p class='TEST'></p>\";if(U.querySelectorAll&&U.querySelectorAll(\".TEST\").length===0){return}F=function(Y,X,V,W){X=X||document;if(!W&&X.nodeType===9&&!Q(X)){try{return E(X.querySelectorAll(Y),V)}catch(Z){}}return T(Y,X,V,W)};F.find=T.find;F.filter=T.filter;F.selectors=T.selectors;F.matches=T.matches})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var T=document.createElement(\"div\");T.innerHTML=\"<div class='test e'></div><div class='test'></div>\";if(T.getElementsByClassName(\"e\").length===0){return}T.lastChild.className=\"e\";if(T.getElementsByClassName(\"e\").length===1){return}I.order.splice(1,0,\"CLASS\");I.find.CLASS=function(U,V,W){if(typeof V.getElementsByClassName!==\"undefined\"&&!W){return V.getElementsByClassName(U[1])}}})()}function P(U,Z,Y,ad,aa,ac){var ab=U==\"previousSibling\"&&!ac;for(var W=0,V=ad.length;W<V;W++){var T=ad[W];if(T){if(ab&&T.nodeType===1){T.sizcache=Y;T.sizset=W}T=T[U];var X=false;while(T){if(T.sizcache===Y){X=ad[T.sizset];break}if(T.nodeType===1&&!ac){T.sizcache=Y;T.sizset=W}if(T.nodeName===Z){X=T;break}T=T[U]}ad[W]=X}}}function S(U,Z,Y,ad,aa,ac){var ab=U==\"previousSibling\"&&!ac;for(var W=0,V=ad.length;W<V;W++){var T=ad[W];if(T){if(ab&&T.nodeType===1){T.sizcache=Y;T.sizset=W}T=T[U];var X=false;while(T){if(T.sizcache===Y){X=ad[T.sizset];break}if(T.nodeType===1){if(!ac){T.sizcache=Y;T.sizset=W}if(typeof Z!==\"string\"){if(T===Z){X=true;break}}else{if(F.filter(Z,[T]).length>0){X=T;break}}}T=T[U]}ad[W]=X}}}var K=document.compareDocumentPosition?function(U,T){return U.compareDocumentPosition(T)&16}:function(U,T){return U!==T&&(U.contains?U.contains(T):true)};var Q=function(T){return T.nodeType===9&&T.documentElement.nodeName!==\"HTML\"||!!T.ownerDocument&&Q(T.ownerDocument)};var J=function(T,aa){var W=[],X=\"\",Y,V=aa.nodeType?[aa]:aa;while((Y=I.match.PSEUDO.exec(T))){X+=Y[0];T=T.replace(I.match.PSEUDO,\"\")}T=I.relative[T]?T+\"*\":T;for(var Z=0,U=V.length;Z<U;Z++){F(T,V[Z],W)}return F.filter(X,W)};o.find=F;o.filter=F.filter;o.expr=F.selectors;o.expr[\":\"]=o.expr.filters;F.selectors.filters.hidden=function(T){return T.offsetWidth===0||T.offsetHeight===0};F.selectors.filters.visible=function(T){return T.offsetWidth>0||T.offsetHeight>0};F.selectors.filters.animated=function(T){return o.grep(o.timers,function(U){return T===U.elem}).length};o.multiFilter=function(V,T,U){if(U){V=\":not(\"+V+\")\"}return F.matches(V,T)};o.dir=function(V,U){var T=[],W=V[U];while(W&&W!=document){if(W.nodeType==1){T.push(W)}W=W[U]}return T};o.nth=function(X,T,V,W){T=T||1;var U=0;for(;X;X=X[V]){if(X.nodeType==1&&++U==T){break}}return X};o.sibling=function(V,U){var T=[];for(;V;V=V.nextSibling){if(V.nodeType==1&&V!=U){T.push(V)}}return T};return;l.Sizzle=F})();o.event={add:function(I,F,H,K){if(I.nodeType==3||I.nodeType==8){return}if(I.setInterval&&I!=l){I=l}if(!H.guid){H.guid=this.guid++}if(K!==g){var G=H;H=this.proxy(G);H.data=K}var E=o.data(I,\"events\")||o.data(I,\"events\",{}),J=o.data(I,\"handle\")||o.data(I,\"handle\",function(){return typeof o!==\"undefined\"&&!o.event.triggered?o.event.handle.apply(arguments.callee.elem,arguments):g});J.elem=I;o.each(F.split(/\\s+/),function(M,N){var O=N.split(\".\");N=O.shift();H.type=O.slice().sort().join(\".\");var L=E[N];if(o.event.specialAll[N]){o.event.specialAll[N].setup.call(I,K,O)}if(!L){L=E[N]={};if(!o.event.special[N]||o.event.special[N].setup.call(I,K,O)===false){if(I.addEventListener){I.addEventListener(N,J,false)}else{if(I.attachEvent){I.attachEvent(\"on\"+N,J)}}}}L[H.guid]=H;o.event.global[N]=true});I=null},guid:1,global:{},remove:function(K,H,J){if(K.nodeType==3||K.nodeType==8){return}var G=o.data(K,\"events\"),F,E;if(G){if(H===g||(typeof H===\"string\"&&H.charAt(0)==\".\")){for(var I in G){this.remove(K,I+(H||\"\"))}}else{if(H.type){J=H.handler;H=H.type}o.each(H.split(/\\s+/),function(M,O){var Q=O.split(\".\");O=Q.shift();var N=RegExp(\"(^|\\\\.)\"+Q.slice().sort().join(\".*\\\\.\")+\"(\\\\.|$)\");if(G[O]){if(J){delete G[O][J.guid]}else{for(var P in G[O]){if(N.test(G[O][P].type)){delete G[O][P]}}}if(o.event.specialAll[O]){o.event.specialAll[O].teardown.call(K,Q)}for(F in G[O]){break}if(!F){if(!o.event.special[O]||o.event.special[O].teardown.call(K,Q)===false){if(K.removeEventListener){K.removeEventListener(O,o.data(K,\"handle\"),false)}else{if(K.detachEvent){K.detachEvent(\"on\"+O,o.data(K,\"handle\"))}}}F=null;delete G[O]}}})}for(F in G){break}if(!F){var L=o.data(K,\"handle\");if(L){L.elem=null}o.removeData(K,\"events\");o.removeData(K,\"handle\")}}},trigger:function(I,K,H,E){var G=I.type||I;if(!E){I=typeof I===\"object\"?I[h]?I:o.extend(o.Event(G),I):o.Event(G);if(G.indexOf(\"!\")>=0){I.type=G=G.slice(0,-1);I.exclusive=true}if(!H){I.stopPropagation();if(this.global[G]){o.each(o.cache,function(){if(this.events&&this.events[G]){o.event.trigger(I,K,this.handle.elem)}})}}if(!H||H.nodeType==3||H.nodeType==8){return g}I.result=g;I.target=H;K=o.makeArray(K);K.unshift(I)}I.currentTarget=H;var J=o.data(H,\"handle\");if(J){J.apply(H,K)}if((!H[G]||(o.nodeName(H,\"a\")&&G==\"click\"))&&H[\"on\"+G]&&H[\"on\"+G].apply(H,K)===false){I.result=false}if(!E&&H[G]&&!I.isDefaultPrevented()&&!(o.nodeName(H,\"a\")&&G==\"click\")){this.triggered=true;try{H[G]()}catch(L){}}this.triggered=false;if(!I.isPropagationStopped()){var F=H.parentNode||H.ownerDocument;if(F){o.event.trigger(I,K,F,true)}}},handle:function(K){var J,E;K=arguments[0]=o.event.fix(K||l.event);K.currentTarget=this;var L=K.type.split(\".\");K.type=L.shift();J=!L.length&&!K.exclusive;var I=RegExp(\"(^|\\\\.)\"+L.slice().sort().join(\".*\\\\.\")+\"(\\\\.|$)\");E=(o.data(this,\"events\")||{})[K.type];for(var G in E){var H=E[G];if(J||I.test(H.type)){K.handler=H;K.data=H.data;var F=H.apply(this,arguments);if(F!==g){K.result=F;if(F===false){K.preventDefault();K.stopPropagation()}}if(K.isImmediatePropagationStopped()){break}}}},props:\"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which\".split(\" \"),fix:function(H){if(H[h]){return H}var F=H;H=o.Event(F);for(var G=this.props.length,J;G;){J=this.props[--G];H[J]=F[J]}if(!H.target){H.target=H.srcElement||document}if(H.target.nodeType==3){H.target=H.target.parentNode}if(!H.relatedTarget&&H.fromElement){H.relatedTarget=H.fromElement==H.target?H.toElement:H.fromElement}if(H.pageX==null&&H.clientX!=null){var I=document.documentElement,E=document.body;H.pageX=H.clientX+(I&&I.scrollLeft||E&&E.scrollLeft||0)-(I.clientLeft||0);H.pageY=H.clientY+(I&&I.scrollTop||E&&E.scrollTop||0)-(I.clientTop||0)}if(!H.which&&((H.charCode||H.charCode===0)?H.charCode:H.keyCode)){H.which=H.charCode||H.keyCode}if(!H.metaKey&&H.ctrlKey){H.metaKey=H.ctrlKey}if(!H.which&&H.button){H.which=(H.button&1?1:(H.button&2?3:(H.button&4?2:0)))}return H},proxy:function(F,E){E=E||function(){return F.apply(this,arguments)};E.guid=F.guid=F.guid||E.guid||this.guid++;return E},special:{ready:{setup:B,teardown:function(){}}},specialAll:{live:{setup:function(E,F){o.event.add(this,F[0],c)},teardown:function(G){if(G.length){var E=0,F=RegExp(\"(^|\\\\.)\"+G[0]+\"(\\\\.|$)\");o.each((o.data(this,\"events\").live||{}),function(){if(F.test(this.type)){E++}});if(E<1){o.event.remove(this,G[0],c)}}}}}};o.Event=function(E){if(!this.preventDefault){return new o.Event(E)}if(E&&E.type){this.originalEvent=E;this.type=E.type}else{this.type=E}this.timeStamp=e();this[h]=true};function k(){return false}function u(){return true}o.Event.prototype={preventDefault:function(){this.isDefaultPrevented=u;var E=this.originalEvent;if(!E){return}if(E.preventDefault){E.preventDefault()}E.returnValue=false},stopPropagation:function(){this.isPropagationStopped=u;var E=this.originalEvent;if(!E){return}if(E.stopPropagation){E.stopPropagation()}E.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u;this.stopPropagation()},isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k};var a=function(F){var E=F.relatedTarget;while(E&&E!=this){try{E=E.parentNode}catch(G){E=this}}if(E!=this){F.type=F.data;o.event.handle.apply(this,arguments)}};o.each({mouseover:\"mouseenter\",mouseout:\"mouseleave\"},function(F,E){o.event.special[E]={setup:function(){o.event.add(this,F,a,E)},teardown:function(){o.event.remove(this,F,a)}}});o.fn.extend({bind:function(F,G,E){return F==\"unload\"?this.one(F,G,E):this.each(function(){o.event.add(this,F,E||G,E&&G)})},one:function(G,H,F){var E=o.event.proxy(F||H,function(I){o(this).unbind(I,E);return(F||H).apply(this,arguments)});return this.each(function(){o.event.add(this,G,E,F&&H)})},unbind:function(F,E){return this.each(function(){o.event.remove(this,F,E)})},trigger:function(E,F){return this.each(function(){o.event.trigger(E,F,this)})},triggerHandler:function(E,G){if(this[0]){var F=o.Event(E);F.preventDefault();F.stopPropagation();o.event.trigger(F,G,this[0]);return F.result}},toggle:function(G){var E=arguments,F=1;while(F<E.length){o.event.proxy(G,E[F++])}return this.click(o.event.proxy(G,function(H){this.lastToggle=(this.lastToggle||0)%F;H.preventDefault();return E[this.lastToggle++].apply(this,arguments)||false}))},hover:function(E,F){return this.mouseenter(E).mouseleave(F)},ready:function(E){B();if(o.isReady){E.call(document,o)}else{o.readyList.push(E)}return this},live:function(G,F){var E=o.event.proxy(F);E.guid+=this.selector+G;o(document).bind(i(G,this.selector),this.selector,E);return this},die:function(F,E){o(document).unbind(i(F,this.selector),E?{guid:E.guid+this.selector+F}:null);return this}});function c(H){var E=RegExp(\"(^|\\\\.)\"+H.type+\"(\\\\.|$)\"),G=true,F=[];o.each(o.data(this,\"events\").live||[],function(I,J){if(E.test(J.type)){var K=o(H.target).closest(J.data)[0];if(K){F.push({elem:K,fn:J})}}});F.sort(function(J,I){return o.data(J.elem,\"closest\")-o.data(I.elem,\"closest\")});o.each(F,function(){if(this.fn.call(this.elem,H,this.fn.data)===false){return(G=false)}});return G}function i(F,E){return[\"live\",F,E.replace(/\\./g,\"`\").replace(/ /g,\"|\")].join(\".\")}o.extend({isReady:false,readyList:[],ready:function(){if(!o.isReady){o.isReady=true;if(o.readyList){o.each(o.readyList,function(){this.call(document,o)});o.readyList=null}o(document).triggerHandler(\"ready\")}}});var x=false;function B(){if(x){return}x=true;if(document.addEventListener){document.addEventListener(\"DOMContentLoaded\",function(){document.removeEventListener(\"DOMContentLoaded\",arguments.callee,false);o.ready()},false)}else{if(document.attachEvent){document.attachEvent(\"onreadystatechange\",function(){if(document.readyState===\"complete\"){document.detachEvent(\"onreadystatechange\",arguments.callee);o.ready()}});if(document.documentElement.doScroll&&l==l.top){(function(){if(o.isReady){return}try{document.documentElement.doScroll(\"left\")}catch(E){setTimeout(arguments.callee,0);return}o.ready()})()}}}o.event.add(l,\"load\",o.ready)}o.each((\"blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error\").split(\",\"),function(F,E){o.fn[E]=function(G){return G?this.bind(E,G):this.trigger(E)}});o(l).bind(\"unload\",function(){for(var E in o.cache){if(E!=1&&o.cache[E].handle){o.event.remove(o.cache[E].handle.elem)}}});(function(){o.support={};var F=document.documentElement,G=document.createElement(\"script\"),K=document.createElement(\"div\"),J=\"script\"+(new Date).getTime();K.style.display=\"none\";K.innerHTML='   <link/><table></table><a href=\"/a\" style=\"color:red;float:left;opacity:.5;\">a</a><select><option>text</option></select><object><param/></object>';var H=K.getElementsByTagName(\"*\"),E=K.getElementsByTagName(\"a\")[0];if(!H||!H.length||!E){return}o.support={leadingWhitespace:K.firstChild.nodeType==3,tbody:!K.getElementsByTagName(\"tbody\").length,objectAll:!!K.getElementsByTagName(\"object\")[0].getElementsByTagName(\"*\").length,htmlSerialize:!!K.getElementsByTagName(\"link\").length,style:/red/.test(E.getAttribute(\"style\")),hrefNormalized:E.getAttribute(\"href\")===\"/a\",opacity:E.style.opacity===\"0.5\",cssFloat:!!E.style.cssFloat,scriptEval:false,noCloneEvent:true,boxModel:null};G.type=\"text/javascript\";try{G.appendChild(document.createTextNode(\"window.\"+J+\"=1;\"))}catch(I){}F.insertBefore(G,F.firstChild);if(l[J]){o.support.scriptEval=true;delete l[J]}F.removeChild(G);if(K.attachEvent&&K.fireEvent){K.attachEvent(\"onclick\",function(){o.support.noCloneEvent=false;K.detachEvent(\"onclick\",arguments.callee)});K.cloneNode(true).fireEvent(\"onclick\")}o(function(){var L=document.createElement(\"div\");L.style.width=L.style.paddingLeft=\"1px\";document.body.appendChild(L);o.boxModel=o.support.boxModel=L.offsetWidth===2;document.body.removeChild(L).style.display=\"none\"})})();var w=o.support.cssFloat?\"cssFloat\":\"styleFloat\";o.props={\"for\":\"htmlFor\",\"class\":\"className\",\"float\":w,cssFloat:w,styleFloat:w,readonly:\"readOnly\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",rowspan:\"rowSpan\",tabindex:\"tabIndex\"};o.fn.extend({_load:o.fn.load,load:function(G,J,K){if(typeof G!==\"string\"){return this._load(G)}var I=G.indexOf(\" \");if(I>=0){var E=G.slice(I,G.length);G=G.slice(0,I)}var H=\"GET\";if(J){if(o.isFunction(J)){K=J;J=null}else{if(typeof J===\"object\"){J=o.param(J);H=\"POST\"}}}var F=this;o.ajax({url:G,type:H,dataType:\"html\",data:J,complete:function(M,L){if(L==\"success\"||L==\"notmodified\"){F.html(E?o(\"<div/>\").append(M.responseText.replace(/<script(.|\\s)*?\\/script>/g,\"\")).find(E):M.responseText)}if(K){F.each(K,[M.responseText,L,M])}}});return this},serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?o.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password|search/i.test(this.type))}).map(function(E,F){var G=o(this).val();return G==null?null:o.isArray(G)?o.map(G,function(I,H){return{name:F.name,value:I}}):{name:F.name,value:G}}).get()}});o.each(\"ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend\".split(\",\"),function(E,F){o.fn[F]=function(G){return this.bind(F,G)}});var r=e();o.extend({get:function(E,G,H,F){if(o.isFunction(G)){H=G;G=null}return o.ajax({type:\"GET\",url:E,data:G,success:H,dataType:F})},getScript:function(E,F){return o.get(E,null,F,\"script\")},getJSON:function(E,F,G){return o.get(E,F,G,\"json\")},post:function(E,G,H,F){if(o.isFunction(G)){H=G;G={}}return o.ajax({type:\"POST\",url:E,data:G,success:H,dataType:F})},ajaxSetup:function(E){o.extend(o.ajaxSettings,E)},ajaxSettings:{url:location.href,global:true,type:\"GET\",contentType:\"application/x-www-form-urlencoded\",processData:true,async:true,xhr:function(){return l.ActiveXObject?new ActiveXObject(\"Microsoft.XMLHTTP\"):new XMLHttpRequest()},accepts:{xml:\"application/xml, text/xml\",html:\"text/html\",script:\"text/javascript, application/javascript\",json:\"application/json, text/javascript\",text:\"text/plain\",_default:\"*/*\"}},lastModified:{},ajax:function(M){M=o.extend(true,M,o.extend(true,{},o.ajaxSettings,M));var W,F=/=\\?(&|$)/g,R,V,G=M.type.toUpperCase();if(M.data&&M.processData&&typeof M.data!==\"string\"){M.data=o.param(M.data)}if(M.dataType==\"jsonp\"){if(G==\"GET\"){if(!M.url.match(F)){M.url+=(M.url.match(/\\?/)?\"&\":\"?\")+(M.jsonp||\"callback\")+\"=?\"}}else{if(!M.data||!M.data.match(F)){M.data=(M.data?M.data+\"&\":\"\")+(M.jsonp||\"callback\")+\"=?\"}}M.dataType=\"json\"}if(M.dataType==\"json\"&&(M.data&&M.data.match(F)||M.url.match(F))){W=\"jsonp\"+r++;if(M.data){M.data=(M.data+\"\").replace(F,\"=\"+W+\"$1\")}M.url=M.url.replace(F,\"=\"+W+\"$1\");M.dataType=\"script\";l[W]=function(X){V=X;I();L();l[W]=g;try{delete l[W]}catch(Y){}if(H){H.removeChild(T)}}}if(M.dataType==\"script\"&&M.cache==null){M.cache=false}if(M.cache===false&&G==\"GET\"){var E=e();var U=M.url.replace(/(\\?|&)_=.*?(&|$)/,\"$1_=\"+E+\"$2\");M.url=U+((U==M.url)?(M.url.match(/\\?/)?\"&\":\"?\")+\"_=\"+E:\"\")}if(M.data&&G==\"GET\"){M.url+=(M.url.match(/\\?/)?\"&\":\"?\")+M.data;M.data=null}if(M.global&&!o.active++){o.event.trigger(\"ajaxStart\")}var Q=/^(\\w+:)?\\/\\/([^\\/?#]+)/.exec(M.url);if(M.dataType==\"script\"&&G==\"GET\"&&Q&&(Q[1]&&Q[1]!=location.protocol||Q[2]!=location.host)){var H=document.getElementsByTagName(\"head\")[0];var T=document.createElement(\"script\");T.src=M.url;if(M.scriptCharset){T.charset=M.scriptCharset}if(!W){var O=false;T.onload=T.onreadystatechange=function(){if(!O&&(!this.readyState||this.readyState==\"loaded\"||this.readyState==\"complete\")){O=true;I();L();T.onload=T.onreadystatechange=null;H.removeChild(T)}}}H.appendChild(T);return g}var K=false;var J=M.xhr();if(M.username){J.open(G,M.url,M.async,M.username,M.password)}else{J.open(G,M.url,M.async)}try{if(M.data){J.setRequestHeader(\"Content-Type\",M.contentType)}if(M.ifModified){J.setRequestHeader(\"If-Modified-Since\",o.lastModified[M.url]||\"Thu, 01 Jan 1970 00:00:00 GMT\")}J.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\");J.setRequestHeader(\"Accept\",M.dataType&&M.accepts[M.dataType]?M.accepts[M.dataType]+\", */*\":M.accepts._default)}catch(S){}if(M.beforeSend&&M.beforeSend(J,M)===false){if(M.global&&!--o.active){o.event.trigger(\"ajaxStop\")}J.abort();return false}if(M.global){o.event.trigger(\"ajaxSend\",[J,M])}var N=function(X){if(J.readyState==0){if(P){clearInterval(P);P=null;if(M.global&&!--o.active){o.event.trigger(\"ajaxStop\")}}}else{if(!K&&J&&(J.readyState==4||X==\"timeout\")){K=true;if(P){clearInterval(P);P=null}R=X==\"timeout\"?\"timeout\":!o.httpSuccess(J)?\"error\":M.ifModified&&o.httpNotModified(J,M.url)?\"notmodified\":\"success\";if(R==\"success\"){try{V=o.httpData(J,M.dataType,M)}catch(Z){R=\"parsererror\"}}if(R==\"success\"){var Y;try{Y=J.getResponseHeader(\"Last-Modified\")}catch(Z){}if(M.ifModified&&Y){o.lastModified[M.url]=Y}if(!W){I()}}else{o.handleError(M,J,R)}L();if(X){J.abort()}if(M.async){J=null}}}};if(M.async){var P=setInterval(N,13);if(M.timeout>0){setTimeout(function(){if(J&&!K){N(\"timeout\")}},M.timeout)}}try{J.send(M.data)}catch(S){o.handleError(M,J,null,S)}if(!M.async){N()}function I(){if(M.success){M.success(V,R)}if(M.global){o.event.trigger(\"ajaxSuccess\",[J,M])}}function L(){if(M.complete){M.complete(J,R)}if(M.global){o.event.trigger(\"ajaxComplete\",[J,M])}if(M.global&&!--o.active){o.event.trigger(\"ajaxStop\")}}return J},handleError:function(F,H,E,G){if(F.error){F.error(H,E,G)}if(F.global){o.event.trigger(\"ajaxError\",[H,F,G])}},active:0,httpSuccess:function(F){try{return !F.status&&location.protocol==\"file:\"||(F.status>=200&&F.status<300)||F.status==304||F.status==1223}catch(E){}return false},httpNotModified:function(G,E){try{var H=G.getResponseHeader(\"Last-Modified\");return G.status==304||H==o.lastModified[E]}catch(F){}return false},httpData:function(J,H,G){var F=J.getResponseHeader(\"content-type\"),E=H==\"xml\"||!H&&F&&F.indexOf(\"xml\")>=0,I=E?J.responseXML:J.responseText;if(E&&I.documentElement.tagName==\"parsererror\"){throw\"parsererror\"}if(G&&G.dataFilter){I=G.dataFilter(I,H)}if(typeof I===\"string\"){if(H==\"script\"){o.globalEval(I)}if(H==\"json\"){I=l[\"eval\"](\"(\"+I+\")\")}}return I},param:function(E){var G=[];function H(I,J){G[G.length]=encodeURIComponent(I)+\"=\"+encodeURIComponent(J)}if(o.isArray(E)||E.jquery){o.each(E,function(){H(this.name,this.value)})}else{for(var F in E){if(o.isArray(E[F])){o.each(E[F],function(){H(F,this)})}else{H(F,o.isFunction(E[F])?E[F]():E[F])}}}return G.join(\"&\").replace(/%20/g,\"+\")}});var m={},n,d=[[\"height\",\"marginTop\",\"marginBottom\",\"paddingTop\",\"paddingBottom\"],[\"width\",\"marginLeft\",\"marginRight\",\"paddingLeft\",\"paddingRight\"],[\"opacity\"]];function t(F,E){var G={};o.each(d.concat.apply([],d.slice(0,E)),function(){G[this]=F});return G}o.fn.extend({show:function(J,L){if(J){return this.animate(t(\"show\",3),J,L)}else{for(var H=0,F=this.length;H<F;H++){var E=o.data(this[H],\"olddisplay\");this[H].style.display=E||\"\";if(o.css(this[H],\"display\")===\"none\"){var G=this[H].tagName,K;if(m[G]){K=m[G]}else{var I=o(\"<\"+G+\" />\").appendTo(\"body\");K=I.css(\"display\");if(K===\"none\"){K=\"block\"}I.remove();m[G]=K}o.data(this[H],\"olddisplay\",K)}}for(var H=0,F=this.length;H<F;H++){this[H].style.display=o.data(this[H],\"olddisplay\")||\"\"}return this}},hide:function(H,I){if(H){return this.animate(t(\"hide\",3),H,I)}else{for(var G=0,F=this.length;G<F;G++){var E=o.data(this[G],\"olddisplay\");if(!E&&E!==\"none\"){o.data(this[G],\"olddisplay\",o.css(this[G],\"display\"))}}for(var G=0,F=this.length;G<F;G++){this[G].style.display=\"none\"}return this}},_toggle:o.fn.toggle,toggle:function(G,F){var E=typeof G===\"boolean\";return o.isFunction(G)&&o.isFunction(F)?this._toggle.apply(this,arguments):G==null||E?this.each(function(){var H=E?G:o(this).is(\":hidden\");o(this)[H?\"show\":\"hide\"]()}):this.animate(t(\"toggle\",3),G,F)},fadeTo:function(E,G,F){return this.animate({opacity:G},E,F)},animate:function(I,F,H,G){var E=o.speed(F,H,G);return this[E.queue===false?\"each\":\"queue\"](function(){var K=o.extend({},E),M,L=this.nodeType==1&&o(this).is(\":hidden\"),J=this;for(M in I){if(I[M]==\"hide\"&&L||I[M]==\"show\"&&!L){return K.complete.call(this)}if((M==\"height\"||M==\"width\")&&this.style){K.display=o.css(this,\"display\");K.overflow=this.style.overflow}}if(K.overflow!=null){this.style.overflow=\"hidden\"}K.curAnim=o.extend({},I);o.each(I,function(O,S){var R=new o.fx(J,K,O);if(/toggle|show|hide/.test(S)){R[S==\"toggle\"?L?\"show\":\"hide\":S](I)}else{var Q=S.toString().match(/^([+-]=)?([\\d+-.]+)(.*)$/),T=R.cur(true)||0;if(Q){var N=parseFloat(Q[2]),P=Q[3]||\"px\";if(P!=\"px\"){J.style[O]=(N||1)+P;T=((N||1)/R.cur(true))*T;J.style[O]=T+P}if(Q[1]){N=((Q[1]==\"-=\"?-1:1)*N)+T}R.custom(T,N,P)}else{R.custom(T,S,\"\")}}});return true})},stop:function(F,E){var G=o.timers;if(F){this.queue([])}this.each(function(){for(var H=G.length-1;H>=0;H--){if(G[H].elem==this){if(E){G[H](true)}G.splice(H,1)}}});if(!E){this.dequeue()}return this}});o.each({slideDown:t(\"show\",1),slideUp:t(\"hide\",1),slideToggle:t(\"toggle\",1),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"}},function(E,F){o.fn[E]=function(G,H){return this.animate(F,G,H)}});o.extend({speed:function(G,H,F){var E=typeof G===\"object\"?G:{complete:F||!F&&H||o.isFunction(G)&&G,duration:G,easing:F&&H||H&&!o.isFunction(H)&&H};E.duration=o.fx.off?0:typeof E.duration===\"number\"?E.duration:o.fx.speeds[E.duration]||o.fx.speeds._default;E.old=E.complete;E.complete=function(){if(E.queue!==false){o(this).dequeue()}if(o.isFunction(E.old)){E.old.call(this)}};return E},easing:{linear:function(G,H,E,F){return E+F*G},swing:function(G,H,E,F){return((-Math.cos(G*Math.PI)/2)+0.5)*F+E}},timers:[],fx:function(F,E,G){this.options=E;this.elem=F;this.prop=G;if(!E.orig){E.orig={}}}});o.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(o.fx.step[this.prop]||o.fx.step._default)(this);if((this.prop==\"height\"||this.prop==\"width\")&&this.elem.style){this.elem.style.display=\"block\"}},cur:function(F){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var E=parseFloat(o.css(this.elem,this.prop,F));return E&&E>-10000?E:parseFloat(o.curCSS(this.elem,this.prop))||0},custom:function(I,H,G){this.startTime=e();this.start=I;this.end=H;this.unit=G||this.unit||\"px\";this.now=this.start;this.pos=this.state=0;var E=this;function F(J){return E.step(J)}F.elem=this.elem;if(F()&&o.timers.push(F)&&!n){n=setInterval(function(){var K=o.timers;for(var J=0;J<K.length;J++){if(!K[J]()){K.splice(J--,1)}}if(!K.length){clearInterval(n);n=g}},13)}},show:function(){this.options.orig[this.prop]=o.attr(this.elem.style,this.prop);this.options.show=true;this.custom(this.prop==\"width\"||this.prop==\"height\"?1:0,this.cur());o(this.elem).show()},hide:function(){this.options.orig[this.prop]=o.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(H){var G=e();if(H||G>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var E=true;for(var F in this.options.curAnim){if(this.options.curAnim[F]!==true){E=false}}if(E){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(o.css(this.elem,\"display\")==\"none\"){this.elem.style.display=\"block\"}}if(this.options.hide){o(this.elem).hide()}if(this.options.hide||this.options.show){for(var I in this.options.curAnim){o.attr(this.elem.style,I,this.options.orig[I])}}this.options.complete.call(this.elem)}return false}else{var J=G-this.startTime;this.state=J/this.options.duration;this.pos=o.easing[this.options.easing||(o.easing.swing?\"swing\":\"linear\")](this.state,J,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};o.extend(o.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(E){o.attr(E.elem.style,\"opacity\",E.now)},_default:function(E){if(E.elem.style&&E.elem.style[E.prop]!=null){E.elem.style[E.prop]=E.now+E.unit}else{E.elem[E.prop]=E.now}}}});if(document.documentElement.getBoundingClientRect){o.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return o.offset.bodyOffset(this[0])}var G=this[0].getBoundingClientRect(),J=this[0].ownerDocument,F=J.body,E=J.documentElement,L=E.clientTop||F.clientTop||0,K=E.clientLeft||F.clientLeft||0,I=G.top+(self.pageYOffset||o.boxModel&&E.scrollTop||F.scrollTop)-L,H=G.left+(self.pageXOffset||o.boxModel&&E.scrollLeft||F.scrollLeft)-K;return{top:I,left:H}}}else{o.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return o.offset.bodyOffset(this[0])}o.offset.initialized||o.offset.initialize();var J=this[0],G=J.offsetParent,F=J,O=J.ownerDocument,M,H=O.documentElement,K=O.body,L=O.defaultView,E=L.getComputedStyle(J,null),N=J.offsetTop,I=J.offsetLeft;while((J=J.parentNode)&&J!==K&&J!==H){M=L.getComputedStyle(J,null);N-=J.scrollTop,I-=J.scrollLeft;if(J===G){N+=J.offsetTop,I+=J.offsetLeft;if(o.offset.doesNotAddBorder&&!(o.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(J.tagName))){N+=parseInt(M.borderTopWidth,10)||0,I+=parseInt(M.borderLeftWidth,10)||0}F=G,G=J.offsetParent}if(o.offset.subtractsBorderForOverflowNotVisible&&M.overflow!==\"visible\"){N+=parseInt(M.borderTopWidth,10)||0,I+=parseInt(M.borderLeftWidth,10)||0}E=M}if(E.position===\"relative\"||E.position===\"static\"){N+=K.offsetTop,I+=K.offsetLeft}if(E.position===\"fixed\"){N+=Math.max(H.scrollTop,K.scrollTop),I+=Math.max(H.scrollLeft,K.scrollLeft)}return{top:N,left:I}}}o.offset={initialize:function(){if(this.initialized){return}var L=document.body,F=document.createElement(\"div\"),H,G,N,I,M,E,J=L.style.marginTop,K='<div style=\"position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;\"><div></div></div><table style=\"position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;\" cellpadding=\"0\" cellspacing=\"0\"><tr><td></td></tr></table>';M={position:\"absolute\",top:0,left:0,margin:0,border:0,width:\"1px\",height:\"1px\",visibility:\"hidden\"};for(E in M){F.style[E]=M[E]}F.innerHTML=K;L.insertBefore(F,L.firstChild);H=F.firstChild,G=H.firstChild,I=H.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(G.offsetTop!==5);this.doesAddBorderForTableAndCells=(I.offsetTop===5);H.style.overflow=\"hidden\",H.style.position=\"relative\";this.subtractsBorderForOverflowNotVisible=(G.offsetTop===-5);L.style.marginTop=\"1px\";this.doesNotIncludeMarginInBodyOffset=(L.offsetTop===0);L.style.marginTop=J;L.removeChild(F);this.initialized=true},bodyOffset:function(E){o.offset.initialized||o.offset.initialize();var G=E.offsetTop,F=E.offsetLeft;if(o.offset.doesNotIncludeMarginInBodyOffset){G+=parseInt(o.curCSS(E,\"marginTop\",true),10)||0,F+=parseInt(o.curCSS(E,\"marginLeft\",true),10)||0}return{top:G,left:F}}};o.fn.extend({position:function(){var I=0,H=0,F;if(this[0]){var G=this.offsetParent(),J=this.offset(),E=/^body|html$/i.test(G[0].tagName)?{top:0,left:0}:G.offset();J.top-=j(this,\"marginTop\");J.left-=j(this,\"marginLeft\");E.top+=j(G,\"borderTopWidth\");E.left+=j(G,\"borderLeftWidth\");F={top:J.top-E.top,left:J.left-E.left}}return F},offsetParent:function(){var E=this[0].offsetParent||document.body;while(E&&(!/^body|html$/i.test(E.tagName)&&o.css(E,\"position\")==\"static\")){E=E.offsetParent}return o(E)}});o.each([\"Left\",\"Top\"],function(F,E){var G=\"scroll\"+E;o.fn[G]=function(H){if(!this[0]){return null}return H!==g?this.each(function(){this==l||this==document?l.scrollTo(!F?H:o(l).scrollLeft(),F?H:o(l).scrollTop()):this[G]=H}):this[0]==l||this[0]==document?self[F?\"pageYOffset\":\"pageXOffset\"]||o.boxModel&&document.documentElement[G]||document.body[G]:this[0][G]}});o.each([\"Height\",\"Width\"],function(I,G){var E=I?\"Left\":\"Top\",H=I?\"Right\":\"Bottom\",F=G.toLowerCase();o.fn[\"inner\"+G]=function(){return this[0]?o.css(this[0],F,false,\"padding\"):null};o.fn[\"outer\"+G]=function(K){return this[0]?o.css(this[0],F,false,K?\"margin\":\"border\"):null};var J=G.toLowerCase();o.fn[J]=function(K){return this[0]==l?document.compatMode==\"CSS1Compat\"&&document.documentElement[\"client\"+G]||document.body[\"client\"+G]:this[0]==document?Math.max(document.documentElement[\"client\"+G],document.body[\"scroll\"+G],document.documentElement[\"scroll\"+G],document.body[\"offset\"+G],document.documentElement[\"offset\"+G]):K===g?(this.length?o.css(this[0],J):null):this.css(J,typeof K===\"string\"?K:K+\"px\")}})})();\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/lib/config.js:\n  233    this.browserDisconnectTimeout = 2000;\n  234    this.browserDisconnectTolerance = 0;\n  235:   this.browserNoActivityTimeout = 10000;\n  236  };\n  237  \n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/encodings/sbcs-data.js:\n  114      \"tis620.25330\": \"tis620\",\n  115  \n  116:     \"10000\": \"macroman\",\n  117      \"10006\": \"macgreek\",\n  118      \"10007\": \"maccyrillic\",\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/glob/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js:\n   32  \n   33    // do it again, but more\n   34:   for (var i = 0; i < 10000; i++) {\n   35      l.set(i, new X);\n   36      // throw some gets in there, too.\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/http-proxy/test/core/simple/test-http-many-keep-alive-connections.js:\n   24  var http = require('http');\n   25  \n   26: var expected = 10000;\n   27  var responses = 0;\n   28  var requests = 0;\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/log4js/lib/levels.js:\n   59    ALL: new Level(Number.MIN_VALUE, \"ALL\"), \n   60    TRACE: new Level(5000, \"TRACE\"), \n   61:   DEBUG: new Level(10000, \"DEBUG\"), \n   62    INFO: new Level(20000, \"INFO\"), \n   63    WARN: new Level(30000, \"WARN\"), \n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/log4js/test/multiprocess-test.js:\n  193        topic: function(net) {\n  194          var logString = JSON.stringify(\n  195:           { level: { level: 10000, levelStr: 'DEBUG' }\n  196              , data: ['some debug']}\n  197          ) + '__LOG4JS__';\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js:\n   32  \n   33    // do it again, but more\n   34:   for (var i = 0; i < 10000; i++) {\n   35      l.set(i, new X);\n   36      // throw some gets in there, too.\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/socket.io/lib/manager.js:\n  129  \n  130    server.once('listening', function () {\n  131:     self.gc = setInterval(self.garbageCollection.bind(self), 10000);\n  132    });\n  133  \n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/socket.io/node_modules/redis/benches/stress/speed/speed.js:\n   52  function run(obj, codec) {\n   53  	var t1 = Date.now();\n   54: 	var n = 10000;\n   55  	for (var i = 0; i < n; ++i) {\n   56  		codec.decode(l = codec.encode(obj));\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.js:\n 1517        , resource: 'socket.io'\n 1518        , transports: io.transports\n 1519:       , 'connect timeout': 10000\n 1520        , 'try multiple transports': true\n 1521        , 'reconnect': true\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/lib/socket.js:\n   27        , resource: 'socket.io'\n   28        , transports: io.transports\n   29:       , 'connect timeout': 10000\n   30        , 'try multiple transports': true\n   31        , 'reconnect': true\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/node_modules/active-x-obfuscator/node_modules/zeparser/benchmark.html:\n   20   * http://www.sencha.com/license\n   21   */\n   22: (function(){var h=Ext.util,k=Ext.each,g=true,i=false;h.Observable=function(){var l=this,m=l.events;if(l.listeners){l.on(l.listeners);delete l.listeners}l.events=m||{}};h.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var l=Array.prototype.slice.call(arguments,0),n=l[0].toLowerCase(),o=this,m=g,r=o.events[n],t,p,s;if(o.eventsSuspended===g){if(p=o.eventQueue){p.push(l)}}else{if(typeof r==\"object\"){if(r.bubble){if(r.fire.apply(r,l.slice(1))===i){return i}s=o.getBubbleTarget&&o.getBubbleTarget();if(s&&s.enableBubble){t=s.events[n];if(!t||typeof t!=\"object\"||!t.bubble){s.enableBubble(n)}return s.fireEvent.apply(s,l)}}else{l.shift();m=r.fire.apply(r,l)}}}return m},addListener:function(l,n,m,s){var p=this,r,t,q;if(typeof l==\"object\"){s=l;for(r in s){t=s[r];if(!p.filterOptRe.test(r)){p.addListener(r,t.fn||t,t.scope||s.scope,t.fn?t:s)}}}else{l=l.toLowerCase();q=p.events[l]||g;if(typeof q==\"boolean\"){p.events[l]=q=new h.Event(p,l)}q.addListener(n,m,typeof s==\"object\"?s:{})}},removeListener:function(l,n,m){var o=this.events[l.toLowerCase()];if(typeof o==\"object\"){o.removeListener(n,m)}},purgeListeners:function(){var n=this.events,l,m;for(m in n){l=n[m];if(typeof l==\"object\"){l.clearListeners()}}},addEvents:function(p){var n=this;n.events=n.events||{};if(typeof p==\"string\"){var l=arguments,m=l.length;while(m--){n.events[l[m]]=n.events[l[m]]||g}}else{Ext.applyIf(n.events,p)}},hasListener:function(l){var m=this.events[l.toLowerCase()];return typeof m==\"object\"&&m.listeners.length>0},suspendEvents:function(l){this.eventsSuspended=g;if(l&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var l=this,m=l.eventQueue||[];l.eventsSuspended=i;delete l.eventQueue;k(m,function(n){l.fireEvent.apply(l,n)})}};var d=h.Observable.prototype;d.on=d.addListener;d.un=d.removeListener;h.Observable.releaseCapture=function(l){l.fireEvent=d.fireEvent};function e(m,n,l){return function(){if(n.target==arguments[0]){m.apply(l,Array.prototype.slice.call(arguments,0))}}}function b(p,q,m,n){m.task=new h.DelayedTask();return function(){m.task.delay(q.buffer,p,n,Array.prototype.slice.call(arguments,0))}}function c(n,o,m,l){return function(){o.removeListener(m,l);return n.apply(l,arguments)}}function a(p,q,m,n){return function(){var l=new h.DelayedTask(),o=Array.prototype.slice.call(arguments,0);if(!m.tasks){m.tasks=[]}m.tasks.push(l);l.delay(q.delay||10,function(){m.tasks.remove(l);p.apply(n,o)},n)}}h.Event=function(m,l){this.name=l;this.obj=m;this.listeners=[]};h.Event.prototype={addListener:function(p,o,n){var q=this,m;o=o||q.obj;if(!q.isListening(p,o)){m=q.createListener(p,o,n);if(q.firing){q.listeners=q.listeners.slice(0)}q.listeners.push(m)}},createListener:function(q,p,r){r=r||{};p=p||this.obj;var m={fn:q,scope:p,options:r},n=q;if(r.target){n=e(n,r,p)}if(r.delay){n=a(n,r,m,p)}if(r.single){n=c(n,this,q,p)}if(r.buffer){n=b(n,r,m,p)}m.fireFn=n;return m},findListener:function(p,o){var q=this.listeners,n=q.length,m;o=o||this.obj;while(n--){m=q[n];if(m){if(m.fn==p&&m.scope==o){return n}}}return -1},isListening:function(m,l){return this.findListener(m,l)!=-1},removeListener:function(r,q){var p,m,n,s=this,o=i;if((p=s.findListener(r,q))!=-1){if(s.firing){s.listeners=s.listeners.slice(0)}m=s.listeners[p];if(m.task){m.task.cancel();delete m.task}n=m.tasks&&m.tasks.length;if(n){while(n--){m.tasks[n].cancel()}delete m.tasks}s.listeners.splice(p,1);o=g}return o},clearListeners:function(){var o=this,m=o.listeners,n=m.length;while(n--){o.removeListener(m[n].fn,m[n].scope)}},fire:function(){var r=this,q=r.listeners,m=q.length,p=0,n;if(m>0){r.firing=g;var o=Array.prototype.slice.call(arguments,0);for(;p<m;p++){n=q[p];if(n&&n.fireFn.apply(n.scope||r.obj||window,o)===i){return(r.firing=i)}}}r.firing=i;return g}}})();Ext.DomHelper=function(){var x=null,l=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,n=/^table|tbody|tr|td$/i,d=/tag|children|cn|html$/i,t=/td|tr|tbody/i,p=/([a-z0-9-]+)\\s*:\\s*([^;\\s]+(?:\\s*[^;\\s]+)*);?/gi,v=/end/i,s,o=\"afterbegin\",q=\"afterend\",c=\"beforebegin\",r=\"beforeend\",a=\"<table>\",i=\"</table>\",b=a+\"<tbody>\",k=\"</tbody>\"+i,m=b+\"<tr>\",w=\"</tr>\"+k;function h(B,D,C,E,A,y){var z=s.insertHtml(E,Ext.getDom(B),u(D));return C?Ext.get(z,true):z}function u(D){var z=\"\",y,C,B,E;if(typeof D==\"string\"){z=D}else{if(Ext.isArray(D)){for(var A=0;A<D.length;A++){if(D[A]){z+=u(D[A])}}}else{z+=\"<\"+(D.tag=D.tag||\"div\");for(y in D){C=D[y];if(!d.test(y)){if(typeof C==\"object\"){z+=\" \"+y+'=\"';for(B in C){z+=B+\":\"+C[B]+\";\"}z+='\"'}else{z+=\" \"+({cls:\"class\",htmlFor:\"for\"}[y]||y)+'=\"'+C+'\"'}}}if(l.test(D.tag)){z+=\"/>\"}else{z+=\">\";if((E=D.children||D.cn)){z+=u(E)}else{if(D.html){z+=D.html}}z+=\"</\"+D.tag+\">\"}}}return z}function g(F,C,B,D){x.innerHTML=[C,B,D].join(\"\");var y=-1,A=x,z;while(++y<F){A=A.firstChild}if(z=A.nextSibling){var E=document.createDocumentFragment();while(A){z=A.nextSibling;E.appendChild(A);A=z}A=E}return A}function e(y,z,B,A){var C,D;x=x||document.createElement(\"div\");if(y==\"td\"&&(z==o||z==r)||!t.test(y)&&(z==c||z==q)){return}D=z==c?B:z==q?B.nextSibling:z==o?B.firstChild:null;if(z==c||z==q){B=B.parentNode}if(y==\"td\"||(y==\"tr\"&&(z==r||z==o))){C=g(4,m,A,w)}else{if((y==\"tbody\"&&(z==r||z==o))||(y==\"tr\"&&(z==c||z==q))){C=g(3,b,A,k)}else{C=g(2,a,A,i)}}B.insertBefore(C,D);return C}s={markup:function(y){return u(y)},applyStyles:function(y,z){if(z){var A;y=Ext.fly(y);if(typeof z==\"function\"){z=z.call()}if(typeof z==\"string\"){p.lastIndex=0;while((A=p.exec(z))){y.setStyle(A[1],A[2])}}else{if(typeof z==\"object\"){y.setStyle(z)}}}},insertHtml:function(D,y,E){var C={},A,G,F,H,B,z;D=D.toLowerCase();C[c]=[\"BeforeBegin\",\"previousSibling\"];C[q]=[\"AfterEnd\",\"nextSibling\"];if(y.insertAdjacentHTML){if(n.test(y.tagName)&&(z=e(y.tagName.toLowerCase(),D,y,E))){return z}C[o]=[\"AfterBegin\",\"firstChild\"];C[r]=[\"BeforeEnd\",\"lastChild\"];if((A=C[D])){y.insertAdjacentHTML(A[0],E);return y[A[1]]}}else{F=y.ownerDocument.createRange();G=\"setStart\"+(v.test(D)?\"After\":\"Before\");if(C[D]){F[G](y);H=F.createContextualFragment(E);y.parentNode.insertBefore(H,D==c?y:y.nextSibling);return y[(D==c?\"previous\":\"next\")+\"Sibling\"]}else{B=(D==o?\"first\":\"last\")+\"Child\";if(y.firstChild){F[G](y[B]);H=F.createContextualFragment(E);if(D==o){y.insertBefore(H,y.firstChild)}else{y.appendChild(H)}}else{y.innerHTML=E}return y[B]}}throw'Illegal insertion point -> \"'+D+'\"'},insertBefore:function(y,A,z){return h(y,A,z,c)},insertAfter:function(y,A,z){return h(y,A,z,q,\"nextSibling\")},insertFirst:function(y,A,z){return h(y,A,z,o,\"firstChild\")},append:function(y,A,z){return h(y,A,z,r,\"\",true)},overwrite:function(y,A,z){y=Ext.getDom(y);y.innerHTML=u(A);return z?Ext.get(y.firstChild):y.firstChild},createHtml:u};return s}();Ext.Template=function(h){var k=this,c=arguments,e=[],d;if(Ext.isArray(h)){h=h.join(\"\")}else{if(c.length>1){for(var g=0,b=c.length;g<b;g++){d=c[g];if(typeof d==\"object\"){Ext.apply(k,d)}else{e.push(d)}}h=e.join(\"\")}}k.html=h;if(k.compiled){k.compile()}};Ext.Template.prototype={re:/\\{([\\w-]+)\\}/g,applyTemplate:function(a){var b=this;return b.compiled?b.compiled(a):b.html.replace(b.re,function(c,d){return a[d]!==undefined?a[d]:\"\"})},set:function(a,c){var b=this;b.html=a;b.compiled=null;return c?b.compile():b},compile:function(){var me=this,sep=Ext.isGecko?\"+\":\",\";function fn(m,name){name=\"values['\"+name+\"']\";return\"'\"+sep+\"(\"+name+\" == undefined ? '' : \"+name+\")\"+sep+\"'\"}eval(\"this.compiled = function(values){ return \"+(Ext.isGecko?\"'\":\"['\")+me.html.replace(/\\\\/g,\"\\\\\\\\\").replace(/(\\r\\n|\\n)/g,\"\\\\n\").replace(/'/g,\"\\\\'\").replace(this.re,fn)+(Ext.isGecko?\"';};\":\"'].join('');};\"));return me},insertFirst:function(b,a,c){return this.doInsert(\"afterBegin\",b,a,c)},insertBefore:function(b,a,c){return this.doInsert(\"beforeBegin\",b,a,c)},insertAfter:function(b,a,c){return this.doInsert(\"afterEnd\",b,a,c)},append:function(b,a,c){return this.doInsert(\"beforeEnd\",b,a,c)},doInsert:function(c,e,b,a){e=Ext.getDom(e);var d=Ext.DomHelper.insertHtml(c,e,this.applyTemplate(b));return a?Ext.get(d,true):d},overwrite:function(b,a,c){b=Ext.getDom(b);b.innerHTML=this.applyTemplate(a);return c?Ext.get(b.firstChild,true):b.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.Template.from=function(b,a){b=Ext.getDom(b);return new Ext.Template(b.value||b.innerHTML,a||\"\")};Ext.DomQuery=function(){var cache={},simpleCache={},valueCache={},nonSpace=/\\S/,trimRe=/^\\s+|\\s+$/g,tplRe=/\\{(\\d+)\\}/g,modeRe=/^(\\s?[\\/>+~]\\s?|\\s|$)/,tagTokenRe=/^(#)?([\\w-\\*]+)/,nthRe=/(\\d*)n\\+?(\\d*)/,nthRe2=/\\D/,isIE=window.ActiveXObject?true:false,key=30803;eval(\"var batch = 30803;\");function child(parent,index){var i=0,n=parent.firstChild;while(n){if(n.nodeType==1){if(++i==index){return n}}n=n.nextSibling}return null}function next(n){while((n=n.nextSibling)&&n.nodeType!=1){}return n}function prev(n){while((n=n.previousSibling)&&n.nodeType!=1){}return n}function children(parent){var n=parent.firstChild,nodeIndex=-1,nextNode;while(n){nextNode=n.nextSibling;if(n.nodeType==3&&!nonSpace.test(n.nodeValue)){parent.removeChild(n)}else{n.nodeIndex=++nodeIndex}n=nextNode}return this}function byClassName(nodeSet,cls){if(!cls){return nodeSet}var result=[],ri=-1;for(var i=0,ci;ci=nodeSet[i];i++){if((\" \"+ci.className+\" \").indexOf(cls)!=-1){result[++ri]=ci}}return result}function attrValue(n,attr){if(!n.tagName&&typeof n.length!=\"undefined\"){n=n[0]}if(!n){return null}if(attr==\"for\"){return n.htmlFor}if(attr==\"class\"||attr==\"className\"){return n.className}return n.getAttribute(attr)||n[attr]}function getNodes(ns,mode,tagName){var result=[],ri=-1,cs;if(!ns){return result}tagName=tagName||\"*\";if(typeof ns.getElementsByTagName!=\"undefined\"){ns=[ns]}if(!mode){for(var i=0,ni;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(var j=0,ci;ci=cs[j];j++){result[++ri]=ci}}}else{if(mode==\"/\"||mode==\">\"){var utag=tagName.toUpperCase();for(var i=0,ni,cn;ni=ns[i];i++){cn=ni.childNodes;for(var j=0,cj;cj=cn[j];j++){if(cj.nodeName==utag||cj.nodeName==tagName||tagName==\"*\"){result[++ri]=cj}}}}else{if(mode==\"+\"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(n&&(n.nodeName==utag||n.nodeName==tagName||tagName==\"*\")){result[++ri]=n}}}else{if(mode==\"~\"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)){if(n.nodeName==utag||n.nodeName==tagName||tagName==\"*\"){result[++ri]=n}}}}}}}return result}function concat(a,b){if(b.slice){return a.concat(b)}for(var i=0,l=b.length;i<l;i++){a[a.length]=b[i]}return a}function byTag(cs,tagName){if(cs.tagName||cs==document){cs=[cs]}if(!tagName){return cs}var result=[],ri=-1;tagName=tagName.toLowerCase();for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType==1&&ci.tagName.toLowerCase()==tagName){result[++ri]=ci}}return result}function byId(cs,id){if(cs.tagName||cs==document){cs=[cs]}if(!id){return cs}var result=[],ri=-1;for(var i=0,ci;ci=cs[i];i++){if(ci&&ci.id==id){result[++ri]=ci;return result}}return result}function byAttribute(cs,attr,value,op,custom){var result=[],ri=-1,useGetStyle=custom==\"{\",fn=Ext.DomQuery.operators[op],a,xml,hasXml;for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType!=1){continue}if(!hasXml){xml=Ext.DomQuery.isXml(ci);hasXml=true}if(!xml){if(useGetStyle){a=Ext.DomQuery.getStyle(ci,attr)}else{if(attr==\"class\"||attr==\"className\"){a=ci.className}else{if(attr==\"for\"){a=ci.htmlFor}else{if(attr==\"href\"){a=ci.getAttribute(\"href\",2)}else{a=ci.getAttribute(attr)}}}}}else{a=ci.getAttribute(attr)}if((fn&&fn(a,value))||(!fn&&a)){result[++ri]=ci}}return result}function byPseudo(cs,name,value){return Ext.DomQuery.pseudos[name](cs,value)}function nodupIEXml(cs){var d=++key,r;cs[0].setAttribute(\"_nodup\",d);r=[cs[0]];for(var i=1,len=cs.length;i<len;i++){var c=cs[i];if(!c.getAttribute(\"_nodup\")!=d){c.setAttribute(\"_nodup\",d);r[r.length]=c}}for(var i=0,len=cs.length;i<len;i++){cs[i].removeAttribute(\"_nodup\")}return r}function nodup(cs){if(!cs){return[]}var len=cs.length,c,i,r=cs,cj,ri=-1;if(!len||typeof cs.nodeType!=\"undefined\"||len==1){return cs}if(isIE&&typeof cs[0].selectSingleNode!=\"undefined\"){return nodupIEXml(cs)}var d=++key;cs[0]._nodup=d;for(i=1;c=cs[i];i++){if(c._nodup!=d){c._nodup=d}else{r=[];for(var j=0;j<i;j++){r[++ri]=cs[j]}for(j=i+1;cj=cs[j];j++){if(cj._nodup!=d){cj._nodup=d;r[++ri]=cj}}return r}}return r}function quickDiffIEXml(c1,c2){var d=++key,r=[];for(var i=0,len=c1.length;i<len;i++){c1[i].setAttribute(\"_qdiff\",d)}for(var i=0,len=c2.length;i<len;i++){if(c2[i].getAttribute(\"_qdiff\")!=d){r[r.length]=c2[i]}}for(var i=0,len=c1.length;i<len;i++){c1[i].removeAttribute(\"_qdiff\")}return r}function quickDiff(c1,c2){var len1=c1.length,d=++key,r=[];if(!len1){return c2}if(isIE&&typeof c1[0].selectSingleNode!=\"undefined\"){return quickDiffIEXml(c1,c2)}for(var i=0;i<len1;i++){c1[i]._qdiff=d}for(var i=0,len=c2.length;i<len;i++){if(c2[i]._qdiff!=d){r[r.length]=c2[i]}}return r}function quickId(ns,mode,root,id){if(ns==root){var d=root.ownerDocument||root;return d.getElementById(id)}ns=getNodes(ns,mode,\"*\");return byId(ns,id)}return{getStyle:function(el,name){return Ext.fly(el).getStyle(name)},compile:function(path,type){type=type||\"select\";var fn=[\"var f = function(root){\\n var mode; ++batch; var n = root || document;\\n\"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode=\"'+lmode[1].replace(trimRe,\"\")+'\";';path=path.replace(lmode[1],\"\")}while(path.substr(0,1)==\"/\"){path=path.substr(1)}while(path&&lastPath!=path){lastPath=path;var tokenMatch=path.match(tagTokenRe);if(type==\"select\"){if(tokenMatch){if(tokenMatch[1]==\"#\"){fn[fn.length]='n = quickId(n, mode, root, \"'+tokenMatch[2]+'\");'}else{fn[fn.length]='n = getNodes(n, mode, \"'+tokenMatch[2]+'\");'}path=path.replace(tokenMatch[0],\"\")}else{if(path.substr(0,1)!=\"@\"){fn[fn.length]='n = getNodes(n, mode, \"*\");'}}}else{if(tokenMatch){if(tokenMatch[1]==\"#\"){fn[fn.length]='n = byId(n, \"'+tokenMatch[2]+'\");'}else{fn[fn.length]='n = byTag(n, \"'+tokenMatch[2]+'\");'}path=path.replace(tokenMatch[0],\"\")}}while(!(modeMatch=path.match(modeRe))){var matched=false;for(var j=0;j<matchersLn;j++){var t=matchers[j];var m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i]});path=path.replace(m[0],\"\");matched=true;break}}if(!matched){throw'Error parsing selector, parsing failed at \"'+path+'\"'}}if(modeMatch[1]){fn[fn.length]='mode=\"'+modeMatch[1].replace(trimRe,\"\")+'\";';path=path.replace(modeMatch[1],\"\")}}fn[fn.length]=\"return nodup(n);\\n}\";eval(fn.join(\"\"));return f},jsSelect:function(path,root,type){root=root||document;if(typeof root==\"string\"){root=document.getElementById(root)}var paths=path.split(\",\"),results=[];for(var i=0,len=paths.length;i<len;i++){var subPath=paths[i].replace(trimRe,\"\");if(!cache[subPath]){cache[subPath]=Ext.DomQuery.compile(subPath);if(!cache[subPath]){throw subPath+\" is not a valid selector\"}}var result=cache[subPath](root);if(result&&result!=document){results=results.concat(result)}}if(paths.length>1){return nodup(results)}return results},isXml:function(el){var docEl=(el?el.ownerDocument||el:0).documentElement;return docEl?docEl.nodeName!==\"HTML\":false},select:document.querySelectorAll?function(path,root,type){root=root||document;if(!Ext.DomQuery.isXml(root)){try{var cs=root.querySelectorAll(path);return Ext.toArray(cs)}catch(ex){}}return Ext.DomQuery.jsSelect.call(this,path,root,type)}:function(path,root,type){return Ext.DomQuery.jsSelect.call(this,path,root,type)},selectNode:function(path,root){return Ext.DomQuery.select(path,root)[0]},selectValue:function(path,root,defaultValue){path=path.replace(trimRe,\"\");if(!valueCache[path]){valueCache[path]=Ext.DomQuery.compile(path,\"select\")}var n=valueCache[path](root),v;n=n[0]?n[0]:n;if(typeof n.normalize==\"function\"){n.normalize()}v=(n&&n.firstChild?n.firstChild.nodeValue:null);return((v===null||v===undefined||v===\"\")?defaultValue:v)},selectNumber:function(path,root,defaultValue){var v=Ext.DomQuery.selectValue(path,root,defaultValue||0);return parseFloat(v)},is:function(el,ss){if(typeof el==\"string\"){el=document.getElementById(el)}var isArray=Ext.isArray(el),result=Ext.DomQuery.filter(isArray?el:[el],ss);return isArray?(result.length==el.length):(result.length>0)},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,\"\");if(!simpleCache[ss]){simpleCache[ss]=Ext.DomQuery.compile(ss,\"simple\")}var result=simpleCache[ss](els);return nonMatches?quickDiff(result,els):result},matchers:[{re:/^\\.([\\w-]+)/,select:'n = byClassName(n, \" {1} \");'},{re:/^\\:([\\w-]+)(?:\\(((?:[^\\s>\\/]*|.*?))\\))?/,select:'n = byPseudo(n, \"{1}\", \"{2}\");'},{re:/^(?:([\\[\\{])(?:@)?([\\w-]+)\\s?(?:(=|.=)\\s?['\"]?(.*?)[\"']?)?[\\]\\}])/,select:'n = byAttribute(n, \"{2}\", \"{4}\", \"{3}\", \"{1}\");'},{re:/^#([\\w-]+)/,select:'n = byId(n, \"{1}\");'},{re:/^@([\\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, \"{1}\")}};'}],operators:{\"=\":function(a,v){return a==v},\"!=\":function(a,v){return a!=v},\"^=\":function(a,v){return a&&a.substr(0,v.length)==v},\"$=\":function(a,v){return a&&a.substr(a.length-v.length)==v},\"*=\":function(a,v){return a&&a.indexOf(v)!==-1},\"%=\":function(a,v){return(a%v)==0},\"|=\":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+\"-\")},\"~=\":function(a,v){return a&&(\" \"+a+\" \").indexOf(\" \"+v+\" \")!=-1}},pseudos:{\"first-child\":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.previousSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},\"last-child\":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},\"nth-child\":function(c,a){var r=[],ri=-1,m=nthRe.exec(a==\"even\"&&\"2n\"||a==\"odd\"&&\"2n+1\"||!nthRe2.test(a)&&\"n+\"+a||a),f=(m[1]||1)-0,l=m[2]-0;for(var i=0,n;n=c[i];i++){var pn=n.parentNode;if(batch!=pn._batch){var j=0;for(var cn=pn.firstChild;cn;cn=cn.nextSibling){if(cn.nodeType==1){cn.nodeIndex=++j}}pn._batch=batch}if(f==1){if(l==0||n.nodeIndex==l){r[++ri]=n}}else{if((n.nodeIndex+l)%f==0){r[++ri]=n}}}return r},\"only-child\":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(!prev(ci)&&!next(ci)){r[++ri]=ci}}return r},empty:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var cns=ci.childNodes,j=0,cn,empty=true;while(cn=cns[j]){++j;if(cn.nodeType==1||cn.nodeType==3){empty=false;break}}if(empty){r[++ri]=ci}}return r},contains:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if((ci.textContent||ci.innerText||\"\").indexOf(v)!=-1){r[++ri]=ci}}return r},nodeValue:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.firstChild&&ci.firstChild.nodeValue==v){r[++ri]=ci}}return r},checked:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.checked==true){r[++ri]=ci}}return r},not:function(c,ss){return Ext.DomQuery.filter(c,ss,true)},any:function(c,selectors){var ss=selectors.split(\"|\"),r=[],ri=-1,s;for(var i=0,ci;ci=c[i];i++){for(var j=0;s=ss[j];j++){if(Ext.DomQuery.is(ci,s)){r[++ri]=ci;break}}}return r},odd:function(c){return this[\"nth-child\"](c,\"odd\")},even:function(c){return this[\"nth-child\"](c,\"even\")},nth:function(c,a){return c[a-1]||[]},first:function(c){return c[0]||[]},last:function(c){return c[c.length-1]||[]},has:function(c,ss){var s=Ext.DomQuery.select,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(s(ss,ci).length>0){r[++ri]=ci}}return r},next:function(c,ss){var is=Ext.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=next(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},prev:function(c,ss){var is=Ext.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=prev(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r}}}}();Ext.query=Ext.DomQuery.select;Ext.util.DelayedTask=function(d,c,a){var e=this,g,b=function(){clearInterval(g);g=null;d.apply(c,a||[])};e.delay=function(i,l,k,h){e.cancel();d=l||d;c=k||c;a=h||a;g=setInterval(b,i)};e.cancel=function(){if(g){clearInterval(g);g=null}}};(function(){var h=document;Ext.Element=function(m,n){var o=typeof m==\"string\"?h.getElementById(m):m,p;if(!o){return null}p=o.id;if(!n&&p&&Ext.elCache[p]){return Ext.elCache[p].el}this.dom=o;this.id=p||Ext.id(o)};var d=Ext.DomHelper,e=Ext.Element,a=Ext.elCache;e.prototype={set:function(r,n){var p=this.dom,m,q,n=(n!==false)&&!!p.setAttribute;for(m in r){if(r.hasOwnProperty(m)){q=r[m];if(m==\"style\"){d.applyStyles(p,q)}else{if(m==\"cls\"){p.className=q}else{if(n){p.setAttribute(m,q)}else{p[m]=q}}}}}return this},defaultUnit:\"px\",is:function(m){return Ext.DomQuery.is(this.dom,m)},focus:function(p,o){var m=this,o=o||m.dom;try{if(Number(p)){m.focus.defer(p,null,[null,o])}else{o.focus()}}catch(n){}return m},blur:function(){try{this.dom.blur()}catch(m){}return this},getValue:function(m){var n=this.dom.value;return m?parseInt(n,10):n},addListener:function(m,p,o,n){Ext.EventManager.on(this.dom,m,p,o||this,n);return this},removeListener:function(m,o,n){Ext.EventManager.removeListener(this.dom,m,o,n||this);return this},removeAllListeners:function(){Ext.EventManager.removeAll(this.dom);return this},purgeAllListeners:function(){Ext.EventManager.purgeElement(this,true);return this},addUnits:function(m){if(m===\"\"||m==\"auto\"||m===undefined){m=m||\"\"}else{if(!isNaN(m)||!i.test(m)){m=m+(this.defaultUnit||\"px\")}}return m},load:function(n,o,m){Ext.Ajax.request(Ext.apply({params:o,url:n.url||n,callback:m,el:this.dom,indicatorText:n.indicatorText||\"\"},Ext.isObject(n)?n:{}));return this},isBorderBox:function(){return Ext.isBorderBox||Ext.isForcedBorderBox||g[(this.dom.tagName||\"\").toLowerCase()]},remove:function(){var m=this,n=m.dom;if(n){delete m.dom;Ext.removeNode(n)}},hover:function(n,m,p,o){var q=this;q.on(\"mouseenter\",n,p||q.dom,o);q.on(\"mouseleave\",m,p||q.dom,o);return q},contains:function(m){return !m?false:Ext.lib.Dom.isAncestor(this.dom,m.dom?m.dom:m)},getAttributeNS:function(n,m){return this.getAttribute(m,n)},getAttribute:Ext.isIE?function(m,o){var p=this.dom,n=typeof p[o+\":\"+m];if([\"undefined\",\"unknown\"].indexOf(n)==-1){return p[o+\":\"+m]}return p[m]}:function(m,n){var o=this.dom;return o.getAttributeNS(n,m)||o.getAttribute(n+\":\"+m)||o.getAttribute(m)||o[m]},update:function(m){if(this.dom){this.dom.innerHTML=m}return this}};var l=e.prototype;e.addMethods=function(m){Ext.apply(l,m)};l.on=l.addListener;l.un=l.removeListener;l.autoBoxAdjust=true;var i=/\\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,c;e.get=function(n){var m,q,p;if(!n){return null}if(typeof n==\"string\"){if(!(q=h.getElementById(n))){return null}if(a[n]&&a[n].el){m=a[n].el;m.dom=q}else{m=e.addToCache(new e(q))}return m}else{if(n.tagName){if(!(p=n.id)){p=Ext.id(n)}if(a[p]&&a[p].el){m=a[p].el;m.dom=n}else{m=e.addToCache(new e(n))}return m}else{if(n instanceof e){if(n!=c){if(Ext.isIE&&(n.id==undefined||n.id==\"\")){n.dom=n.dom}else{n.dom=h.getElementById(n.id)||n.dom}}return n}else{if(n.isComposite){return n}else{if(Ext.isArray(n)){return e.select(n)}else{if(n==h){if(!c){var o=function(){};o.prototype=e.prototype;c=new o();c.dom=h}return c}}}}}}return null};e.addToCache=function(m,n){n=n||m.id;a[n]={el:m,data:{},events:{}};return m};e.data=function(n,m,o){n=e.get(n);if(!n){return null}var p=a[n.id].data;if(arguments.length==2){return p[m]}else{return(p[m]=o)}};function k(){if(!Ext.enableGarbageCollector){clearInterval(e.collectorThreadId)}else{var m,p,r,q;for(m in a){q=a[m];if(q.skipGC){continue}p=q.el;r=p.dom;if(!r||!r.parentNode||(!r.offsetParent&&!h.getElementById(m))){if(Ext.enableListenerCollection){Ext.EventManager.removeAll(r)}delete a[m]}}if(Ext.isIE){var n={};for(m in a){n[m]=a[m]}a=Ext.elCache=n}}}e.collectorThreadId=setInterval(k,30000);var b=function(){};b.prototype=e.prototype;e.Flyweight=function(m){this.dom=m};e.Flyweight.prototype=new b();e.Flyweight.prototype.isFlyweight=true;e._flyweights={};e.fly=function(o,m){var n=null;m=m||\"_global\";if(o=Ext.getDom(o)){(e._flyweights[m]=e._flyweights[m]||new e.Flyweight()).dom=o;n=e._flyweights[m]}return n};Ext.get=e.get;Ext.fly=e.fly;var g=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko){g.button=1}})();Ext.Element.addMethods(function(){var d=\"parentNode\",b=\"nextSibling\",c=\"previousSibling\",e=Ext.DomQuery,a=Ext.get;return{findParent:function(n,m,h){var k=this.dom,g=document.body,l=0,i;if(Ext.isGecko&&Object.prototype.toString.call(k)==\"[object XULElement]\"){return null}m=m||50;if(isNaN(m)){i=Ext.getDom(m);m=Number.MAX_VALUE}while(k&&k.nodeType==1&&l<m&&k!=g&&k!=i){if(e.is(k,n)){return h?a(k):k}l++;k=k.parentNode}return null},findParentNode:function(k,i,g){var h=Ext.fly(this.dom.parentNode,\"_internal\");return h?h.findParent(k,i,g):null},up:function(h,g){return this.findParentNode(h,g,true)},select:function(g){return Ext.Element.select(g,this.dom)},query:function(g){return e.select(g,this.dom)},child:function(g,h){var i=e.selectNode(g,this.dom);return h?i:a(i)},down:function(g,h){var i=e.selectNode(\" > \"+g,this.dom);return h?i:a(i)},parent:function(g,h){return this.matchNode(d,d,g,h)},next:function(g,h){return this.matchNode(b,b,g,h)},prev:function(g,h){return this.matchNode(c,c,g,h)},first:function(g,h){return this.matchNode(b,\"firstChild\",g,h)},last:function(g,h){return this.matchNode(c,\"lastChild\",g,h)},matchNode:function(h,l,g,i){var k=this.dom[l];while(k){if(k.nodeType==1&&(!g||e.is(k,g))){return !i?a(k):k}k=k[h]}return null}}}());Ext.Element.addMethods(function(){var c=Ext.getDom,a=Ext.get,b=Ext.DomHelper;return{appendChild:function(d){return a(d).appendTo(this)},appendTo:function(d){c(d).appendChild(this.dom);return this},insertBefore:function(d){(d=c(d)).parentNode.insertBefore(this.dom,d);return this},insertAfter:function(d){(d=c(d)).parentNode.insertBefore(this.dom,d.nextSibling);return this},insertFirst:function(e,d){e=e||{};if(e.nodeType||e.dom||typeof e==\"string\"){e=c(e);this.dom.insertBefore(e,this.dom.firstChild);return !d?a(e):e}else{return this.createChild(e,this.dom.firstChild,d)}},replace:function(d){d=a(d);this.insertBefore(d);d.remove();return this},replaceWith:function(d){var e=this;if(d.nodeType||d.dom||typeof d==\"string\"){d=c(d);e.dom.parentNode.insertBefore(d,e.dom)}else{d=b.insertBefore(e.dom,d)}delete Ext.elCache[e.id];Ext.removeNode(e.dom);e.id=Ext.id(e.dom=d);Ext.Element.addToCache(e.isFlyweight?new Ext.Element(e.dom):e);return e},createChild:function(e,d,g){e=e||{tag:\"div\"};return d?b.insertBefore(d,e,g!==true):b[!this.dom.firstChild?\"overwrite\":\"append\"](this.dom,e,g!==true)},wrap:function(d,e){var g=b.insertBefore(this.dom,d||{tag:\"div\"},!e);g.dom?g.dom.appendChild(this.dom):g.appendChild(this.dom);return g},insertHtml:function(e,g,d){var h=b.insertHtml(e,this.dom,g);return d?Ext.get(h):h}}}());Ext.Element.addMethods(function(){var B=Ext.supports,h={},y=/(-[a-z])/gi,t=document.defaultView,E=/alpha\\(opacity=(.*)\\)/i,m=/^\\s+|\\s+$/g,C=Ext.Element,v=/\\s+/,b=/\\w/g,d=\"padding\",c=\"margin\",z=\"border\",u=\"-left\",r=\"-right\",x=\"-top\",p=\"-bottom\",k=\"-width\",s=Math,A=\"hidden\",e=\"isClipped\",l=\"overflow\",o=\"overflow-x\",n=\"overflow-y\",D=\"originalClip\",i={l:z+u+k,r:z+r+k,t:z+x+k,b:z+p+k},g={l:d+u,r:d+r,t:d+x,b:d+p},a={l:c+u,r:c+r,t:c+x,b:c+p},F=Ext.Element.data;function q(G,H){return H.charAt(1).toUpperCase()}function w(G){return h[G]||(h[G]=G==\"float\"?(B.cssFloat?\"cssFloat\":\"styleFloat\"):G.replace(y,q))}return{adjustWidth:function(G){var H=this;var I=(typeof G==\"number\");if(I&&H.autoBoxAdjust&&!H.isBorderBox()){G-=(H.getBorderWidth(\"lr\")+H.getPadding(\"lr\"))}return(I&&G<0)?0:G},adjustHeight:function(G){var H=this;var I=(typeof G==\"number\");if(I&&H.autoBoxAdjust&&!H.isBorderBox()){G-=(H.getBorderWidth(\"tb\")+H.getPadding(\"tb\"))}return(I&&G<0)?0:G},addClass:function(K){var L=this,J,G,I,H=[];if(!Ext.isArray(K)){if(typeof K==\"string\"&&!this.hasClass(K)){L.dom.className+=\" \"+K}}else{for(J=0,G=K.length;J<G;J++){I=K[J];if(typeof I==\"string\"&&(\" \"+L.dom.className+\" \").indexOf(\" \"+I+\" \")==-1){H.push(I)}}if(H.length){L.dom.className+=\" \"+H.join(\" \")}}return L},removeClass:function(L){var M=this,K,H,G,J,I;if(!Ext.isArray(L)){L=[L]}if(M.dom&&M.dom.className){I=M.dom.className.replace(m,\"\").split(v);for(K=0,G=L.length;K<G;K++){J=L[K];if(typeof J==\"string\"){J=J.replace(m,\"\");H=I.indexOf(J);if(H!=-1){I.splice(H,1)}}}M.dom.className=I.join(\" \")}return M},radioClass:function(J){var K=this.dom.parentNode.childNodes,H,I,G;J=Ext.isArray(J)?J:[J];for(I=0,G=K.length;I<G;I++){H=K[I];if(H&&H.nodeType==1){Ext.fly(H,\"_internal\").removeClass(J)}}return this.addClass(J)},toggleClass:function(G){return this.hasClass(G)?this.removeClass(G):this.addClass(G)},hasClass:function(G){return G&&(\" \"+this.dom.className+\" \").indexOf(\" \"+G+\" \")!=-1},replaceClass:function(H,G){return this.removeClass(H).addClass(G)},isStyle:function(G,H){return this.getStyle(G)==H},getStyle:function(){return t&&t.getComputedStyle?function(L){var J=this.dom,G,I,H,K;if(J==document){return null}L=w(L);H=(G=J.style[L])?G:(I=t.getComputedStyle(J,\"\"))?I[L]:null;if(L==\"marginRight\"&&H!=\"0px\"&&!B.correctRightMargin){K=J.style.display;J.style.display=\"inline-block\";H=t.getComputedStyle(J,\"\").marginRight;J.style.display=K}if(L==\"backgroundColor\"&&H==\"rgba(0, 0, 0, 0)\"&&!B.correctTransparentColor){H=\"transparent\"}return H}:function(K){var I=this.dom,G,H;if(I==document){return null}if(K==\"opacity\"){if(I.style.filter.match){if(G=I.style.filter.match(E)){var J=parseFloat(G[1]);if(!isNaN(J)){return J?J/100:0}}}return 1}K=w(K);return I.style[K]||((H=I.currentStyle)?H[K]:null)}}(),getColor:function(G,H,L){var J=this.getStyle(G),I=(typeof L!=\"undefined\")?L:\"#\",K;if(!J||(/transparent|inherit/.test(J))){return H}if(/^r/.test(J)){Ext.each(J.slice(4,J.length-1).split(\",\"),function(M){K=parseInt(M,10);I+=(K<16?\"0\":\"\")+K.toString(16)})}else{J=J.replace(\"#\",\"\");I+=J.length==3?J.replace(/^(\\w)(\\w)(\\w)$/,\"$1$1$2$2$3$3\"):J}return(I.length>5?I.toLowerCase():H)},setStyle:function(J,I){var G,H;if(typeof J!=\"object\"){G={};G[J]=I;J=G}for(H in J){I=J[H];H==\"opacity\"?this.setOpacity(I):this.dom.style[w(H)]=I}return this},setOpacity:function(H,G){var K=this,I=K.dom.style;if(!G||!K.anim){if(Ext.isIE){var J=H<1?\"alpha(opacity=\"+H*100+\")\":\"\",L=I.filter.replace(E,\"\").replace(m,\"\");I.zoom=1;I.filter=L+(L.length>0?\" \":\"\")+J}else{I.opacity=H}}else{K.anim({opacity:{to:H}},K.preanim(arguments,1),null,0.35,\"easeIn\")}return K},clearOpacity:function(){var G=this.dom.style;if(Ext.isIE){if(!Ext.isEmpty(G.filter)){G.filter=G.filter.replace(E,\"\").replace(m,\"\")}}else{G.opacity=G[\"-moz-opacity\"]=G[\"-khtml-opacity\"]=\"\"}return this},getHeight:function(I){var H=this,K=H.dom,J=Ext.isIE&&H.isStyle(\"display\",\"none\"),G=s.max(K.offsetHeight,J?0:K.clientHeight)||0;G=!I?G:G-H.getBorderWidth(\"tb\")-H.getPadding(\"tb\");return G<0?0:G},getWidth:function(H){var I=this,K=I.dom,J=Ext.isIE&&I.isStyle(\"display\",\"none\"),G=s.max(K.offsetWidth,J?0:K.clientWidth)||0;G=!H?G:G-I.getBorderWidth(\"lr\")-I.getPadding(\"lr\");return G<0?0:G},setWidth:function(H,G){var I=this;H=I.adjustWidth(H);!G||!I.anim?I.dom.style.width=I.addUnits(H):I.anim({width:{to:H}},I.preanim(arguments,1));return I},setHeight:function(G,H){var I=this;G=I.adjustHeight(G);!H||!I.anim?I.dom.style.height=I.addUnits(G):I.anim({height:{to:G}},I.preanim(arguments,1));return I},getBorderWidth:function(G){return this.addStyles(G,i)},getPadding:function(G){return this.addStyles(G,g)},clip:function(){var G=this,H=G.dom;if(!F(H,e)){F(H,e,true);F(H,D,{o:G.getStyle(l),x:G.getStyle(o),y:G.getStyle(n)});G.setStyle(l,A);G.setStyle(o,A);G.setStyle(n,A)}return G},unclip:function(){var G=this,I=G.dom;if(F(I,e)){F(I,e,false);var H=F(I,D);if(H.o){G.setStyle(l,H.o)}if(H.x){G.setStyle(o,H.x)}if(H.y){G.setStyle(n,H.y)}}return G},addStyles:function(N,M){var K=0,L=N.match(b),J,I,H,G=L.length;for(H=0;H<G;H++){J=L[H];I=J&&parseInt(this.getStyle(M[J]),10);if(I){K+=s.abs(I)}}return K},margins:a}}());(function(){var a=Ext.lib.Dom,b=\"left\",g=\"right\",d=\"top\",i=\"bottom\",h=\"position\",c=\"static\",e=\"relative\",k=\"auto\",l=\"z-index\";Ext.Element.addMethods({getX:function(){return a.getX(this.dom)},getY:function(){return a.getY(this.dom)},getXY:function(){return a.getXY(this.dom)},getOffsetsTo:function(m){var p=this.getXY(),n=Ext.fly(m,\"_internal\").getXY();return[p[0]-n[0],p[1]-n[1]]},setX:function(m,n){return this.setXY([m,this.getY()],this.animTest(arguments,n,1))},setY:function(n,m){return this.setXY([this.getX(),n],this.animTest(arguments,m,1))},setLeft:function(m){this.setStyle(b,this.addUnits(m));return this},setTop:function(m){this.setStyle(d,this.addUnits(m));return this},setRight:function(m){this.setStyle(g,this.addUnits(m));return this},setBottom:function(m){this.setStyle(i,this.addUnits(m));return this},setXY:function(o,m){var n=this;if(!m||!n.anim){a.setXY(n.dom,o)}else{n.anim({points:{to:o}},n.preanim(arguments,1),\"motion\")}return n},setLocation:function(m,o,n){return this.setXY([m,o],this.animTest(arguments,n,2))},moveTo:function(m,o,n){return this.setXY([m,o],this.animTest(arguments,n,2))},getLeft:function(m){return !m?this.getX():parseInt(this.getStyle(b),10)||0},getRight:function(m){var n=this;return !m?n.getX()+n.getWidth():(n.getLeft(true)+n.getWidth())||0},getTop:function(m){return !m?this.getY():parseInt(this.getStyle(d),10)||0},getBottom:function(m){var n=this;return !m?n.getY()+n.getHeight():(n.getTop(true)+n.getHeight())||0},position:function(q,p,m,o){var n=this;if(!q&&n.isStyle(h,c)){n.setStyle(h,e)}else{if(q){n.setStyle(h,q)}}if(p){n.setStyle(l,p)}if(m||o){n.setXY([m||false,o||false])}},clearPositioning:function(m){m=m||\"\";this.setStyle({left:m,right:m,top:m,bottom:m,\"z-index\":\"\",position:c});return this},getPositioning:function(){var m=this.getStyle(b);var n=this.getStyle(d);return{position:this.getStyle(h),left:m,right:m?\"\":this.getStyle(g),top:n,bottom:n?\"\":this.getStyle(i),\"z-index\":this.getStyle(l)}},setPositioning:function(m){var o=this,n=o.dom.style;o.setStyle(m);if(m.right==k){n.right=\"\"}if(m.bottom==k){n.bottom=\"\"}return o},translatePoints:function(m,u){u=isNaN(m[1])?u:m[1];m=isNaN(m[0])?m:m[0];var q=this,r=q.isStyle(h,e),s=q.getXY(),n=parseInt(q.getStyle(b),10),p=parseInt(q.getStyle(d),10);n=!isNaN(n)?n:(r?0:q.dom.offsetLeft);p=!isNaN(p)?p:(r?0:q.dom.offsetTop);return{left:(m-s[0]+n),top:(u-s[1]+p)}},animTest:function(n,m,o){return !!m&&this.preanim?this.preanim(n,o):false}})})();Ext.Element.addMethods({isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},scrollTo:function(a,b){this.dom[\"scroll\"+(/top/i.test(a)?\"Top\":\"Left\")]=b;return this},getScroll:function(){var i=this.dom,h=document,a=h.body,c=h.documentElement,b,g,e;if(i==h||i==a){if(Ext.isIE&&Ext.isStrict){b=c.scrollLeft;g=c.scrollTop}else{b=window.pageXOffset;g=window.pageYOffset}e={left:b||(a?a.scrollLeft:0),top:g||(a?a.scrollTop:0)}}else{e={left:i.scrollLeft,top:i.scrollTop}}return e}});Ext.Element.VISIBILITY=1;Ext.Element.DISPLAY=2;Ext.Element.OFFSETS=3;Ext.Element.ASCLASS=4;Ext.Element.visibilityCls=\"x-hide-nosize\";Ext.Element.addMethods(function(){var e=Ext.Element,q=\"opacity\",k=\"visibility\",g=\"display\",d=\"hidden\",o=\"offsets\",l=\"asclass\",n=\"none\",a=\"nosize\",b=\"originalDisplay\",c=\"visibilityMode\",h=\"isVisible\",i=e.data,m=function(s){var r=i(s,b);if(r===undefined){i(s,b,r=\"\")}return r},p=function(s){var r=i(s,c);if(r===undefined){i(s,c,r=1)}return r};return{originalDisplay:\"\",visibilityMode:1,setVisibilityMode:function(r){i(this.dom,c,r);return this},animate:function(s,u,t,v,r){this.anim(s,{duration:u,callback:t,easing:v},r);return this},anim:function(u,v,s,x,t,r){s=s||\"run\";v=v||{};var w=this,y=Ext.lib.Anim[s](w.dom,u,(v.duration||x)||0.35,(v.easing||t)||\"easeOut\",function(){if(r){r.call(w)}if(v.callback){v.callback.call(v.scope||w,w,v)}},w);v.anim=y;return y},preanim:function(r,s){return !r[s]?false:(typeof r[s]==\"object\"?r[s]:{duration:r[s+1],callback:r[s+2],easing:r[s+3]})},isVisible:function(){var r=this,t=r.dom,s=i(t,h);if(typeof s==\"boolean\"){return s}s=!r.isStyle(k,d)&&!r.isStyle(g,n)&&!((p(t)==e.ASCLASS)&&r.hasClass(r.visibilityCls||e.visibilityCls));i(t,h,s);return s},setVisible:function(u,r){var x=this,s,z,y,w,v=x.dom,t=p(v);if(typeof r==\"string\"){switch(r){case g:t=e.DISPLAY;break;case k:t=e.VISIBILITY;break;case o:t=e.OFFSETS;break;case a:case l:t=e.ASCLASS;break}x.setVisibilityMode(t);r=false}if(!r||!x.anim){if(t==e.ASCLASS){x[u?\"removeClass\":\"addClass\"](x.visibilityCls||e.visibilityCls)}else{if(t==e.DISPLAY){return x.setDisplayed(u)}else{if(t==e.OFFSETS){if(!u){x.hideModeStyles={position:x.getStyle(\"position\"),top:x.getStyle(\"top\"),left:x.getStyle(\"left\")};x.applyStyles({position:\"absolute\",top:\"-10000px\",left:\"-10000px\"})}else{x.applyStyles(x.hideModeStyles||{position:\"\",top:\"\",left:\"\"});delete x.hideModeStyles}}else{x.fixDisplay();v.style.visibility=u?\"visible\":d}}}}else{if(u){x.setOpacity(0.01);x.setVisible(true)}x.anim({opacity:{to:(u?1:0)}},x.preanim(arguments,1),null,0.35,\"easeIn\",function(){u||x.setVisible(false).setOpacity(1)})}i(v,h,u);return x},hasMetrics:function(){var r=this.dom;return this.isVisible()||(p(r)==e.VISIBILITY)},toggle:function(r){var s=this;s.setVisible(!s.isVisible(),s.preanim(arguments,0));return s},setDisplayed:function(r){if(typeof r==\"boolean\"){r=r?m(this.dom):n}this.setStyle(g,r);return this},fixDisplay:function(){var r=this;if(r.isStyle(g,n)){r.setStyle(k,d);r.setStyle(g,m(this.dom));if(r.isStyle(g,n)){r.setStyle(g,\"block\")}}},hide:function(r){if(typeof r==\"string\"){this.setVisible(false,r);return this}this.setVisible(false,this.preanim(arguments,0));return this},show:function(r){if(typeof r==\"string\"){this.setVisible(true,r);return this}this.setVisible(true,this.preanim(arguments,0));return this}}}());(function(){var z=null,B=undefined,l=true,u=false,k=\"setX\",h=\"setY\",a=\"setXY\",o=\"left\",m=\"bottom\",t=\"top\",n=\"right\",r=\"height\",g=\"width\",i=\"points\",x=\"hidden\",A=\"absolute\",v=\"visible\",e=\"motion\",p=\"position\",s=\"easeOut\",d=new Ext.Element.Flyweight(),w={},y=function(C){return C||{}},q=function(C){d.dom=C;d.id=Ext.id(C);return d},c=function(C){if(!w[C]){w[C]=[]}return w[C]},b=function(D,C){w[D]=C};Ext.enableFx=l;Ext.Fx={switchStatements:function(D,E,C){return E.apply(this,C[D])},slideIn:function(I,F){F=y(F);var K=this,H=K.dom,N=H.style,P,C,M,E,D,N,J,O,L,G;I=I||\"t\";K.queueFx(F,function(){P=q(H).getXY();q(H).fixDisplay();C=q(H).getFxRestore();M={x:P[0],y:P[1],0:P[0],1:P[1],width:H.offsetWidth,height:H.offsetHeight};M.right=M.x+M.width;M.bottom=M.y+M.height;q(H).setWidth(M.width).setHeight(M.height);E=q(H).fxWrap(C.pos,F,x);N.visibility=v;N.position=A;function Q(){q(H).fxUnwrap(E,C.pos,F);N.width=C.width;N.height=C.height;q(H).afterFx(F)}O={to:[M.x,M.y]};L={to:M.width};G={to:M.height};function R(V,S,W,T,Y,aa,ad,ac,ab,X,U){var Z={};q(V).setWidth(W).setHeight(T);if(q(V)[Y]){q(V)[Y](aa)}S[ad]=S[ac]=\"0\";if(ab){Z.width=ab}if(X){Z.height=X}if(U){Z.points=U}return Z}J=q(H).switchStatements(I.toLowerCase(),R,{t:[E,N,M.width,0,z,z,o,m,z,G,z],l:[E,N,0,M.height,z,z,n,t,L,z,z],r:[E,N,M.width,M.height,k,M.right,o,t,z,z,O],b:[E,N,M.width,M.height,h,M.bottom,o,t,z,G,O],tl:[E,N,0,0,z,z,n,m,L,G,O],bl:[E,N,0,0,h,M.y+M.height,n,t,L,G,O],br:[E,N,0,0,a,[M.right,M.bottom],o,t,L,G,O],tr:[E,N,0,0,k,M.x+M.width,o,m,L,G,O]});N.visibility=v;q(E).show();arguments.callee.anim=q(E).fxanim(J,F,e,0.5,s,Q)});return K},slideOut:function(G,E){E=y(E);var I=this,F=I.dom,L=F.style,M=I.getXY(),D,C,J,K,H={to:0};G=G||\"t\";I.queueFx(E,function(){C=q(F).getFxRestore();J={x:M[0],y:M[1],0:M[0],1:M[1],width:F.offsetWidth,height:F.offsetHeight};J.right=J.x+J.width;J.bottom=J.y+J.height;q(F).setWidth(J.width).setHeight(J.height);D=q(F).fxWrap(C.pos,E,v);L.visibility=v;L.position=A;q(D).setWidth(J.width).setHeight(J.height);function N(){E.useDisplay?q(F).setDisplayed(u):q(F).hide();q(F).fxUnwrap(D,C.pos,E);L.width=C.width;L.height=C.height;q(F).afterFx(E)}function O(P,X,V,Y,T,W,S,U,R){var Q={};P[X]=P[V]=\"0\";Q[Y]=T;if(W){Q[W]=S}if(U){Q[U]=R}return Q}K=q(F).switchStatements(G.toLowerCase(),O,{t:[L,o,m,r,H],l:[L,n,t,g,H],r:[L,o,t,g,H,i,{to:[J.right,J.y]}],b:[L,o,t,r,H,i,{to:[J.x,J.bottom]}],tl:[L,n,m,g,H,r,H],bl:[L,n,t,g,H,r,H,i,{to:[J.x,J.bottom]}],br:[L,o,t,g,H,r,H,i,{to:[J.x+J.width,J.bottom]}],tr:[L,o,m,g,H,r,H,i,{to:[J.right,J.y]}]});arguments.callee.anim=q(D).fxanim(K,E,e,0.5,s,N)});return I},puff:function(I){I=y(I);var G=this,H=G.dom,D=H.style,E,C,F;G.queueFx(I,function(){E=q(H).getWidth();C=q(H).getHeight();q(H).clearOpacity();q(H).show();F=q(H).getFxRestore();function J(){I.useDisplay?q(H).setDisplayed(u):q(H).hide();q(H).clearOpacity();q(H).setPositioning(F.pos);D.width=F.width;D.height=F.height;D.fontSize=\"\";q(H).afterFx(I)}arguments.callee.anim=q(H).fxanim({width:{to:q(H).adjustWidth(E*2)},height:{to:q(H).adjustHeight(C*2)},points:{by:[-E*0.5,-C*0.5]},opacity:{to:0},fontSize:{to:200,unit:\"%\"}},I,e,0.5,s,J)});return G},switchOff:function(G){G=y(G);var E=this,F=E.dom,C=F.style,D;E.queueFx(G,function(){q(F).clearOpacity();q(F).clip();D=q(F).getFxRestore();function H(){G.useDisplay?q(F).setDisplayed(u):q(F).hide();q(F).clearOpacity();q(F).setPositioning(D.pos);C.width=D.width;C.height=D.height;q(F).afterFx(G)}q(F).fxanim({opacity:{to:0.3}},z,z,0.1,z,function(){q(F).clearOpacity();(function(){q(F).fxanim({height:{to:1},points:{by:[0,q(F).getHeight()*0.5]}},G,e,0.3,\"easeIn\",H)}).defer(100)})});return E},highlight:function(E,I){I=y(I);var G=this,H=G.dom,C=I.attr||\"backgroundColor\",D={},F;G.queueFx(I,function(){q(H).clearOpacity();q(H).show();function J(){H.style[C]=F;q(H).afterFx(I)}F=H.style[C];D[C]={from:E||\"ffff9c\",to:I.endColor||q(H).getColor(C)||\"ffffff\"};arguments.callee.anim=q(H).fxanim(D,I,\"color\",1,\"easeIn\",J)});return G},frame:function(C,F,I){I=y(I);var E=this,H=E.dom,D,G;E.queueFx(I,function(){C=C||\"#C3DAF9\";if(C.length==6){C=\"#\"+C}F=F||1;q(H).show();var M=q(H).getXY(),K={x:M[0],y:M[1],0:M[0],1:M[1],width:H.offsetWidth,height:H.offsetHeight},J=function(){D=q(document.body||document.documentElement).createChild({style:{position:A,\"z-index\":35000,border:\"0px solid \"+C}});return D.queueFx({},L)};arguments.callee.anim={isAnimated:true,stop:function(){F=0;D.stopFx()}};function L(){var N=Ext.isBorderBox?2:1;G=D.anim({top:{from:K.y,to:K.y-20},left:{from:K.x,to:K.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:K.height,to:K.height+20*N},width:{from:K.width,to:K.width+20*N}},{duration:I.duration||1,callback:function(){D.remove();--F>0?J():q(H).afterFx(I)}});arguments.callee.anim={isAnimated:true,stop:function(){G.stop()}}}J()});return E},pause:function(E){var D=this.dom,C;this.queueFx({},function(){C=setTimeout(function(){q(D).afterFx({})},E*1000);arguments.callee.anim={isAnimated:true,stop:function(){clearTimeout(C);q(D).afterFx({})}}});return this},fadeIn:function(E){E=y(E);var C=this,D=C.dom,F=E.endOpacity||1;C.queueFx(E,function(){q(D).setOpacity(0);q(D).fixDisplay();D.style.visibility=v;arguments.callee.anim=q(D).fxanim({opacity:{to:F}},E,z,0.5,s,function(){if(F==1){q(D).clearOpacity()}q(D).afterFx(E)})});return C},fadeOut:function(F){F=y(F);var D=this,E=D.dom,C=E.style,G=F.endOpacity||0;D.queueFx(F,function(){arguments.callee.anim=q(E).fxanim({opacity:{to:G}},F,z,0.5,s,function(){if(G==0){Ext.Element.data(E,\"visibilityMode\")==Ext.Element.DISPLAY||F.useDisplay?C.display=\"none\":C.visibility=x;q(E).clearOpacity()}q(E).afterFx(F)})});return D},scale:function(C,D,E){this.shift(Ext.apply({},E,{width:C,height:D}));return this},shift:function(E){E=y(E);var D=this.dom,C={};this.queueFx(E,function(){for(var F in E){if(E[F]!=B){C[F]={to:E[F]}}}C.width?C.width.to=q(D).adjustWidth(E.width):C;C.height?C.height.to=q(D).adjustWidth(E.height):C;if(C.x||C.y||C.xy){C.points=C.xy||{to:[C.x?C.x.to:q(D).getX(),C.y?C.y.to:q(D).getY()]}}arguments.callee.anim=q(D).fxanim(C,E,e,0.35,s,function(){q(D).afterFx(E)})});return this},ghost:function(F,D){D=y(D);var H=this,E=H.dom,K=E.style,I={opacity:{to:0},points:{}},L=I.points,C,J,G;F=F||\"b\";H.queueFx(D,function(){C=q(E).getFxRestore();J=q(E).getWidth();G=q(E).getHeight();function M(){D.useDisplay?q(E).setDisplayed(u):q(E).hide();q(E).clearOpacity();q(E).setPositioning(C.pos);K.width=C.width;K.height=C.height;q(E).afterFx(D)}L.by=q(E).switchStatements(F.toLowerCase(),function(O,N){return[O,N]},{t:[0,-G],l:[-J,0],r:[J,0],b:[0,G],tl:[-J,-G],bl:[-J,G],br:[J,G],tr:[J,-G]});arguments.callee.anim=q(E).fxanim(I,D,e,0.5,s,M)});return H},syncFx:function(){var C=this;C.fxDefaults=Ext.apply(C.fxDefaults||{},{block:u,concurrent:l,stopFx:u});return C},sequenceFx:function(){var C=this;C.fxDefaults=Ext.apply(C.fxDefaults||{},{block:u,concurrent:u,stopFx:u});return C},nextFx:function(){var C=c(this.dom.id)[0];if(C){C.call(this)}},hasActiveFx:function(){return c(this.dom.id)[0]},stopFx:function(C){var D=this,F=D.dom.id;if(D.hasActiveFx()){var E=c(F)[0];if(E&&E.anim){if(E.anim.isAnimated){b(F,[E]);E.anim.stop(C!==undefined?C:l)}else{b(F,[])}}}return D},beforeFx:function(C){if(this.hasActiveFx()&&!C.concurrent){if(C.stopFx){this.stopFx();return l}return u}return l},hasFxBlock:function(){var C=c(this.dom.id);return C&&C[0]&&C[0].block},queueFx:function(F,C){var D=q(this.dom);if(!D.hasFxBlock()){Ext.applyIf(F,D.fxDefaults);if(!F.concurrent){var E=D.beforeFx(F);C.block=F.block;c(D.dom.id).push(C);if(E){D.nextFx()}}else{C.call(D)}}return D},fxWrap:function(I,G,E){var F=this.dom,D,C;if(!G.wrap||!(D=Ext.getDom(G.wrap))){if(G.fixPosition){C=q(F).getXY()}var H=document.createElement(\"div\");H.style.visibility=E;D=F.parentNode.insertBefore(H,F);q(D).setPositioning(I);if(q(D).isStyle(p,\"static\")){q(D).position(\"relative\")}q(F).clearPositioning(\"auto\");q(D).clip();D.appendChild(F);if(C){q(D).setXY(C)}}return D},fxUnwrap:function(D,G,F){var E=this.dom;q(E).clearPositioning();q(E).setPositioning(G);if(!F.wrap){var C=q(D).dom.parentNode;C.insertBefore(E,D);q(D).remove()}},getFxRestore:function(){var C=this.dom.style;return{pos:this.getPositioning(),width:C.width,height:C.height}},afterFx:function(D){var C=this.dom,E=C.id;if(D.afterStyle){q(C).setStyle(D.afterStyle)}if(D.afterCls){q(C).addClass(D.afterCls)}if(D.remove==l){q(C).remove()}if(D.callback){D.callback.call(D.scope,q(C))}if(!D.concurrent){c(E).shift();q(C).nextFx()}},fxanim:function(F,G,D,H,E,C){D=D||\"run\";G=G||{};var I=Ext.lib.Anim[D](this.dom,F,(G.duration||H)||0.35,(G.easing||E)||s,C,this);G.anim=I;return I}};Ext.Fx.resize=Ext.Fx.scale;Ext.Element.addMethods(Ext.Fx)})();Ext.CompositeElementLite=function(b,a){this.elements=[];this.add(b,a);this.el=new Ext.Element.Flyweight()};Ext.CompositeElementLite.prototype={isComposite:true,getElement:function(a){var b=this.el;b.dom=a;b.id=a.id;return b},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(d,b){var e=this,g=e.elements;if(!d){return this}if(typeof d==\"string\"){d=Ext.Element.selectorFunction(d,b)}else{if(d.isComposite){d=d.elements}else{if(!Ext.isIterable(d)){d=[d]}}}for(var c=0,a=d.length;c<a;++c){g.push(e.transformElement(d[c]))}return e},invoke:function(g,b){var h=this,d=h.elements,a=d.length,k,c;for(c=0;c<a;c++){k=d[c];if(k){Ext.Element.prototype[g].apply(h.getElement(k),b)}}return h},item:function(b){var d=this,c=d.elements[b],a=null;if(c){a=d.getElement(c)}return a},addListener:function(b,k,h,g){var d=this.elements,a=d.length,c,l;for(c=0;c<a;c++){l=d[c];if(l){Ext.EventManager.on(l,b,k,h||l,g)}}return this},each:function(g,d){var h=this,c=h.elements,a=c.length,b,k;for(b=0;b<a;b++){k=c[b];if(k){k=this.getElement(k);if(g.call(d||k,k,h,b)===false){break}}}return h},fill:function(a){var b=this;b.elements=[];b.add(a);return b},filter:function(a){var b=[],d=this,c=Ext.isFunction(a)?a:function(e){return e.is(a)};d.each(function(h,e,g){if(c(h,g)!==false){b[b.length]=d.transformElement(h)}});d.elements=b;return d},indexOf:function(a){return this.elements.indexOf(this.transformElement(a))},replaceElement:function(e,c,a){var b=!isNaN(e)?e:this.indexOf(e),g;if(b>-1){c=Ext.getDom(c);if(a){g=this.elements[b];g.parentNode.insertBefore(c,g);Ext.removeNode(g)}this.elements.splice(b,1,c)}return this},clear:function(){this.elements=[]}};Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;Ext.CompositeElementLite.importElementMethods=function(){var c,b=Ext.Element.prototype,a=Ext.CompositeElementLite.prototype;for(c in b){if(typeof b[c]==\"function\"){(function(d){a[d]=a[d]||function(){return this.invoke(d,arguments)}}).call(a,c)}}};Ext.CompositeElementLite.importElementMethods();if(Ext.DomQuery){Ext.Element.selectorFunction=Ext.DomQuery.select}Ext.Element.select=function(a,b){var c;if(typeof a==\"string\"){c=Ext.Element.selectorFunction(a,b)}else{if(a.length!==undefined){c=a}else{throw\"Invalid selector\"}}return new Ext.CompositeElementLite(c)};Ext.select=Ext.Element.select;(function(){var b=\"beforerequest\",e=\"requestcomplete\",d=\"requestexception\",h=undefined,c=\"load\",i=\"POST\",a=\"GET\",g=window;Ext.data.Connection=function(k){Ext.apply(this,k);this.addEvents(b,e,d);Ext.data.Connection.superclass.constructor.call(this)};Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:30000,autoAbort:false,disableCaching:true,disableCachingParam:\"_dc\",request:function(q){var t=this;if(t.fireEvent(b,t,q)){if(q.el){if(!Ext.isEmpty(q.indicatorText)){t.indicatorText='<div class=\"loading-indicator\">'+q.indicatorText+\"</div>\"}if(t.indicatorText){Ext.getDom(q.el).innerHTML=t.indicatorText}q.success=(Ext.isFunction(q.success)?q.success:function(){}).createInterceptor(function(o){Ext.getDom(q.el).innerHTML=o.responseText})}var m=q.params,l=q.url||t.url,k,r={success:t.handleResponse,failure:t.handleFailure,scope:t,argument:{options:q},timeout:Ext.num(q.timeout,t.timeout)},n,u;if(Ext.isFunction(m)){m=m.call(q.scope||g,q)}m=Ext.urlEncode(t.extraParams,Ext.isObject(m)?Ext.urlEncode(m):m);if(Ext.isFunction(l)){l=l.call(q.scope||g,q)}if((n=Ext.getDom(q.form))){l=l||n.action;if(q.isUpload||(/multipart\\/form-data/i.test(n.getAttribute(\"enctype\")))){return t.doFormUpload.call(t,q,m,l)}u=Ext.lib.Ajax.serializeForm(n);m=m?(m+\"&\"+u):u}k=q.method||t.method||((m||q.xmlData||q.jsonData)?i:a);if(k===a&&(t.disableCaching&&q.disableCaching!==false)||q.disableCaching===true){var s=q.disableCachingParam||t.disableCachingParam;l=Ext.urlAppend(l,s+\"=\"+(new Date().getTime()))}q.headers=Ext.apply(q.headers||{},t.defaultHeaders||{});if(q.autoAbort===true||t.autoAbort){t.abort()}if((k==a||q.xmlData||q.jsonData)&&m){l=Ext.urlAppend(l,m);m=\"\"}return(t.transId=Ext.lib.Ajax.request(k,l,r,m,q))}else{return q.callback?q.callback.apply(q.scope,[q,h,h]):null}},isLoading:function(k){return k?Ext.lib.Ajax.isCallInProgress(k):!!this.transId},abort:function(k){if(k||this.isLoading()){Ext.lib.Ajax.abort(k||this.transId)}},handleResponse:function(k){this.transId=false;var l=k.argument.options;k.argument=l?l.argument:null;this.fireEvent(e,this,k,l);if(l.success){l.success.call(l.scope,k,l)}if(l.callback){l.callback.call(l.scope,l,true,k)}},handleFailure:function(k,m){this.transId=false;var l=k.argument.options;k.argument=l?l.argument:null;this.fireEvent(d,this,k,l,m);if(l.failure){l.failure.call(l.scope,k,l)}if(l.callback){l.callback.call(l.scope,l,false,k)}},doFormUpload:function(r,k,l){var m=Ext.id(),w=document,s=w.createElement(\"iframe\"),n=Ext.getDom(r.form),v=[],u,q=\"multipart/form-data\",p={target:n.target,method:n.method,encoding:n.encoding,enctype:n.enctype,action:n.action};Ext.fly(s).set({id:m,name:m,cls:\"x-hidden\",src:Ext.SSL_SECURE_URL});w.body.appendChild(s);if(Ext.isIE){document.frames[m].name=m}Ext.fly(n).set({target:m,method:i,enctype:q,encoding:q,action:l||p.action});Ext.iterate(Ext.urlDecode(k,false),function(x,o){u=w.createElement(\"input\");Ext.fly(u).set({type:\"hidden\",value:o,name:x});n.appendChild(u);v.push(u)});function t(){var y=this,x={responseText:\"\",responseXML:null,argument:r.argument},B,A;try{B=s.contentWindow.document||s.contentDocument||g.frames[m].document;if(B){if(B.body){if(/textarea/i.test((A=B.body.firstChild||{}).tagName)){x.responseText=A.value}else{x.responseText=B.body.innerHTML}}x.responseXML=B.XMLDocument||B}}catch(z){}Ext.EventManager.removeListener(s,c,t,y);y.fireEvent(e,y,x,r);function o(E,D,C){if(Ext.isFunction(E)){E.apply(D,C)}}o(r.success,r.scope,[x,r]);o(r.callback,r.scope,[r,true,x]);if(!y.debugUploads){setTimeout(function(){Ext.removeNode(s)},100)}}Ext.EventManager.on(s,c,t,this);n.submit();Ext.fly(n).set(p);Ext.each(v,function(o){Ext.removeNode(o)})}})})();Ext.Ajax=new Ext.data.Connection({autoAbort:false,serializeForm:function(a){return Ext.lib.Ajax.serializeForm(a)}});Ext.util.JSON=new (function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var useNative=null;return function(){if(useNative===null){useNative=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()==\"[object JSON]\"}return useNative}}(),pad=function(n){return n<10?\"0\"+n:n},doDecode=function(json){return eval(\"(\"+json+\")\")},doEncode=function(o){if(!Ext.isDefined(o)||o===null){return\"null\"}else{if(Ext.isArray(o)){return encodeArray(o)}else{if(Ext.isDate(o)){return Ext.util.JSON.encodeDate(o)}else{if(Ext.isString(o)){return encodeString(o)}else{if(typeof o==\"number\"){return isFinite(o)?String(o):\"null\"}else{if(Ext.isBoolean(o)){return String(o)}else{var a=[\"{\"],b,i,v;for(i in o){if(!o.getElementsByTagName){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];switch(typeof v){case\"undefined\":case\"function\":case\"unknown\":break;default:if(b){a.push(\",\")}a.push(doEncode(i),\":\",v===null?\"null\":doEncode(v));b=true}}}}a.push(\"}\");return a.join(\"\")}}}}}}},m={\"\\b\":\"\\\\b\",\"\\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},encodeString=function(s){if(/[\"\\\\\\x00-\\x1f]/.test(s)){return'\"'+s.replace(/([\\x00-\\x1f\\\\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return\"\\\\u00\"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'\"'}return'\"'+s+'\"'},encodeArray=function(o){var a=[\"[\"],b,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];switch(typeof v){case\"undefined\":case\"function\":case\"unknown\":break;default:if(b){a.push(\",\")}a.push(v===null?\"null\":Ext.util.JSON.encode(v));b=true}}a.push(\"]\");return a.join(\"\")};this.encodeDate=function(o){return'\"'+o.getFullYear()+\"-\"+pad(o.getMonth()+1)+\"-\"+pad(o.getDate())+\"T\"+pad(o.getHours())+\":\"+pad(o.getMinutes())+\":\"+pad(o.getSeconds())+'\"'};this.encode=function(){var ec;return function(o){if(!ec){ec=isNative()?JSON.stringify:doEncode}return ec(o)}}();this.decode=function(){var dc;return function(json){if(!dc){dc=isNative()?JSON.parse:doDecode}return dc(json)}}()})();Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;Ext.EventManager=function(){var A,q,k=false,m=Ext.isGecko||Ext.isWebKit||Ext.isSafari,p=Ext.lib.Event,r=Ext.lib.Dom,c=document,B=window,s=\"DOMContentLoaded\",u=\"complete\",g=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,v=[];function o(F){var I=false,E=0,D=v.length,G=false,H;if(F){if(F.getElementById||F.navigator){for(;E<D;++E){H=v[E];if(H.el===F){I=H.id;break}}if(!I){I=Ext.id(F);v.push({id:I,el:F});G=true}}else{I=Ext.id(F)}if(!Ext.elCache[I]){Ext.Element.addToCache(new Ext.Element(F),I);if(G){Ext.elCache[I].skipGC=true}}}return I}function n(F,H,K,G,E,M){F=Ext.getDom(F);var D=o(F),L=Ext.elCache[D].events,I;I=p.on(F,H,E);L[H]=L[H]||[];L[H].push([K,E,M,I,G]);if(F.addEventListener&&H==\"mousewheel\"){var J=[\"DOMMouseScroll\",E,false];F.addEventListener.apply(F,J);Ext.EventManager.addListener(B,\"unload\",function(){F.removeEventListener.apply(F,J)})}if(F==c&&H==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.addListener(E)}}function d(){if(window!=top){return false}try{c.documentElement.doScroll(\"left\")}catch(D){return false}b();return true}function C(D){if(Ext.isIE&&d()){return true}if(c.readyState==u){b();return true}k||(q=setTimeout(arguments.callee,2));return false}var l;function i(D){l||(l=Ext.query(\"style, link[rel=stylesheet]\"));if(l.length==c.styleSheets.length){b();return true}k||(q=setTimeout(arguments.callee,2));return false}function z(D){c.removeEventListener(s,arguments.callee,false);i()}function b(D){if(!k){k=true;if(q){clearTimeout(q)}if(m){c.removeEventListener(s,b,false)}if(Ext.isIE&&C.bindIE){c.detachEvent(\"onreadystatechange\",C)}p.un(B,\"load\",arguments.callee)}if(A&&!Ext.isReady){Ext.isReady=true;A.fire();A.listeners=[]}}function a(){A||(A=new Ext.util.Event());if(m){c.addEventListener(s,b,false)}if(Ext.isIE){if(!C()){C.bindIE=true;c.attachEvent(\"onreadystatechange\",C)}}else{if(Ext.isOpera){(c.readyState==u&&i())||c.addEventListener(s,z,false)}else{if(Ext.isWebKit){C()}}}p.on(B,\"load\",b)}function y(D,E){return function(){var F=Ext.toArray(arguments);if(E.target==Ext.EventObject.setEvent(F[0]).target){D.apply(this,F)}}}function x(E,F,D){return function(G){D.delay(F.buffer,E,null,[new Ext.EventObjectImpl(G)])}}function t(H,G,D,F,E){return function(I){Ext.EventManager.removeListener(G,D,F,E);H(I)}}function e(E,F,D){return function(H){var G=new Ext.util.DelayedTask(E);if(!D.tasks){D.tasks=[]}D.tasks.push(G);G.delay(F.delay||10,E,null,[new Ext.EventObjectImpl(H)])}}function h(I,H,D,K,L){var E=(!D||typeof D==\"boolean\")?{}:D,F=Ext.getDom(I),G;K=K||E.fn;L=L||E.scope;if(!F){throw'Error listening for \"'+H+'\". Element \"'+I+\"\\\" doesn't exist.\"}function J(N){if(!Ext){return}N=Ext.EventObject.setEvent(N);var M;if(E.delegate){if(!(M=N.getTarget(E.delegate,F))){return}}else{M=N.target}if(E.stopEvent){N.stopEvent()}if(E.preventDefault){N.preventDefault()}if(E.stopPropagation){N.stopPropagation()}if(E.normalized===false){N=N.browserEvent}K.call(L||F,N,M,E)}if(E.target){J=y(J,E)}if(E.delay){J=e(J,E,K)}if(E.single){J=t(J,F,H,K,L)}if(E.buffer){G=new Ext.util.DelayedTask(J);J=x(J,E,G)}n(F,H,K,G,J,L);return J}var w={addListener:function(F,D,H,G,E){if(typeof D==\"object\"){var K=D,I,J;for(I in K){J=K[I];if(!g.test(I)){if(Ext.isFunction(J)){h(F,I,K,J,K.scope)}else{h(F,I,J)}}}}else{h(F,D,E,H,G)}},removeListener:function(F,J,N,O){F=Ext.getDom(F);var D=o(F),L=F&&(Ext.elCache[D].events)[J]||[],E,I,G,H,K,M;for(I=0,K=L.length;I<K;I++){if(Ext.isArray(M=L[I])&&M[0]==N&&(!O||M[2]==O)){if(M[4]){M[4].cancel()}H=N.tasks&&N.tasks.length;if(H){while(H--){N.tasks[H].cancel()}delete N.tasks}E=M[1];p.un(F,J,p.extAdapter?M[3]:E);if(E&&F.addEventListener&&J==\"mousewheel\"){F.removeEventListener(\"DOMMouseScroll\",E,false)}if(E&&F==c&&J==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.removeListener(E)}L.splice(I,1);if(L.length===0){delete Ext.elCache[D].events[J]}for(H in Ext.elCache[D].events){return false}Ext.elCache[D].events={};return false}}},removeAll:function(F){F=Ext.getDom(F);var E=o(F),K=Ext.elCache[E]||{},N=K.events||{},J,I,L,G,M,H,D;for(G in N){if(N.hasOwnProperty(G)){J=N[G];for(I=0,L=J.length;I<L;I++){M=J[I];if(M[4]){M[4].cancel()}if(M[0].tasks&&(H=M[0].tasks.length)){while(H--){M[0].tasks[H].cancel()}delete M.tasks}D=M[1];p.un(F,G,p.extAdapter?M[3]:D);if(F.addEventListener&&D&&G==\"mousewheel\"){F.removeEventListener(\"DOMMouseScroll\",D,false)}if(D&&F==c&&G==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.removeListener(D)}}}}if(Ext.elCache[E]){Ext.elCache[E].events={}}},getListeners:function(G,D){G=Ext.getDom(G);var I=o(G),E=Ext.elCache[I]||{},H=E.events||{},F=[];if(H&&H[D]){return H[D]}else{return null}},purgeElement:function(F,D,H){F=Ext.getDom(F);var E=o(F),K=Ext.elCache[E]||{},L=K.events||{},G,J,I;if(H){if(L&&L.hasOwnProperty(H)){J=L[H];for(G=0,I=J.length;G<I;G++){Ext.EventManager.removeListener(F,H,J[G][0])}}}else{Ext.EventManager.removeAll(F)}if(D&&F&&F.childNodes){for(G=0,I=F.childNodes.length;G<I;G++){Ext.EventManager.purgeElement(F.childNodes[G],D,H)}}},_unload:function(){var D;for(D in Ext.elCache){Ext.EventManager.removeAll(D)}delete Ext.elCache;delete Ext.Element._flyweights;var H,E,G,F=Ext.lib.Ajax;(typeof F.conn==\"object\")?E=F.conn:E={};for(G in E){H=E[G];if(H){F.abort({conn:H,tId:G})}}},onDocumentReady:function(F,E,D){if(Ext.isReady){A||(A=new Ext.util.Event());A.addListener(F,E,D);A.fire();A.listeners=[]}else{if(!A){a()}D=D||{};D.delay=D.delay||1;A.addListener(F,E,D)}},fireDocReady:b};w.on=w.addListener;w.un=w.removeListener;w.stoppedMouseDownEvent=new Ext.util.Event();return w}();Ext.onReady=Ext.EventManager.onDocumentReady;(function(){var a=function(){var c=document.body||document.getElementsByTagName(\"body\")[0];if(!c){return false}var b=[\" \",Ext.isIE?\"ext-ie \"+(Ext.isIE6?\"ext-ie6\":(Ext.isIE7?\"ext-ie7\":\"ext-ie8\")):Ext.isGecko?\"ext-gecko \"+(Ext.isGecko2?\"ext-gecko2\":\"ext-gecko3\"):Ext.isOpera?\"ext-opera\":Ext.isWebKit?\"ext-webkit\":\"\"];if(Ext.isSafari){b.push(\"ext-safari \"+(Ext.isSafari2?\"ext-safari2\":(Ext.isSafari3?\"ext-safari3\":\"ext-safari4\")))}else{if(Ext.isChrome){b.push(\"ext-chrome\")}}if(Ext.isMac){b.push(\"ext-mac\")}if(Ext.isLinux){b.push(\"ext-linux\")}if(Ext.isStrict||Ext.isBorderBox){var d=c.parentNode;if(d){Ext.fly(d,\"_internal\").addClass(((Ext.isStrict&&Ext.isIE)||(!Ext.enableForcedBoxModel&&!Ext.isIE))?\" ext-strict\":\" ext-border-box\")}}if(Ext.enableForcedBoxModel&&!Ext.isIE){Ext.isForcedBorderBox=true;b.push(\"ext-forced-border-box\")}Ext.fly(c,\"_internal\").addClass(b);return true};if(!a()){Ext.onReady(a)}})();(function(){var b=Ext.apply(Ext.supports,{correctRightMargin:true,correctTransparentColor:true,cssFloat:true});var a=function(){var g=document.createElement(\"div\"),e=document,c,d;g.innerHTML='<div style=\"height:30px;width:50px;\"><div style=\"height:20px;width:20px;\"></div></div><div style=\"float:left;background-color:transparent;\">';e.body.appendChild(g);d=g.lastChild;if((c=e.defaultView)){if(c.getComputedStyle(g.firstChild.firstChild,null).marginRight!=\"0px\"){b.correctRightMargin=false}if(c.getComputedStyle(d,null).backgroundColor!=\"transparent\"){b.correctTransparentColor=false}}b.cssFloat=!!d.style.cssFloat;e.body.removeChild(g)};if(Ext.isReady){a()}else{Ext.onReady(a)}})();Ext.EventObject=function(){var b=Ext.lib.Event,c=/(dbl)?click/,a={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},d=Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2};Ext.EventObjectImpl=function(g){if(g){this.setEvent(g.browserEvent||g)}};Ext.EventObjectImpl.prototype={setEvent:function(h){var g=this;if(h==g||(h&&h.browserEvent)){return h}g.browserEvent=h;if(h){g.button=h.button?d[h.button]:(h.which?h.which-1:-1);if(c.test(h.type)&&g.button==-1){g.button=0}g.type=h.type;g.shiftKey=h.shiftKey;g.ctrlKey=h.ctrlKey||h.metaKey||false;g.altKey=h.altKey;g.keyCode=h.keyCode;g.charCode=h.charCode;g.target=b.getTarget(h);g.xy=b.getXY(h)}else{g.button=-1;g.shiftKey=false;g.ctrlKey=false;g.altKey=false;g.keyCode=0;g.charCode=0;g.target=null;g.xy=[0,0]}return g},stopEvent:function(){var e=this;if(e.browserEvent){if(e.browserEvent.type==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.fire(e)}b.stopEvent(e.browserEvent)}},preventDefault:function(){if(this.browserEvent){b.preventDefault(this.browserEvent)}},stopPropagation:function(){var e=this;if(e.browserEvent){if(e.browserEvent.type==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.fire(e)}b.stopPropagation(e.browserEvent)}},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(e){return Ext.isSafari?(a[e]||e):e},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(g,h,e){return g?Ext.fly(this.target).findParent(g,h,e):(e?Ext.get(this.target):this.target)},getRelatedTarget:function(){return this.browserEvent?b.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var g=this.browserEvent;var h=0;if(g.wheelDelta){h=g.wheelDelta/120}else{if(g.detail){h=-g.detail/3}}return h},within:function(h,i,e){if(h){var g=this[i?\"getRelatedTarget\":\"getTarget\"]();return g&&((e?(g==Ext.getDom(h)):false)||Ext.fly(h).contains(g))}return false}};return new Ext.EventObjectImpl()}();Ext.Loader=Ext.apply({},{load:function(k,i,l,c){var l=l||this,g=document.getElementsByTagName(\"head\")[0],b=document.createDocumentFragment(),a=k.length,h=0,e=this;var m=function(n){g.appendChild(e.buildScriptTag(k[n],d))};var d=function(){h++;if(a==h&&typeof i==\"function\"){i.call(l)}else{if(c===true){m(h)}}};if(c===true){m.call(this,0)}else{Ext.each(k,function(o,n){b.appendChild(this.buildScriptTag(o,d))},this);g.appendChild(b)}},buildScriptTag:function(b,c){var a=document.createElement(\"script\");a.type=\"text/javascript\";a.src=b;if(a.readyState){a.onreadystatechange=function(){if(a.readyState==\"loaded\"||a.readyState==\"complete\"){a.onreadystatechange=null;c()}}}else{a.onload=c}return a}});Ext.ns(\"Ext.grid\",\"Ext.list\",\"Ext.dd\",\"Ext.tree\",\"Ext.form\",\"Ext.menu\",\"Ext.state\",\"Ext.layout\",\"Ext.app\",\"Ext.ux\",\"Ext.chart\",\"Ext.direct\");Ext.apply(Ext,function(){var c=Ext,a=0,b=null;return{emptyFn:function(){},BLANK_IMAGE_URL:Ext.isIE6||Ext.isIE7||Ext.isAir?\"http://www.extjs.com/s.gif\":\"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\",extendX:function(d,e){return Ext.extend(d,e(d.prototype))},getDoc:function(){return Ext.get(document)},num:function(e,d){e=Number(Ext.isEmpty(e)||Ext.isArray(e)||typeof e==\"boolean\"||(typeof e==\"string\"&&e.trim().length==0)?NaN:e);return isNaN(e)?d:e},value:function(g,d,e){return Ext.isEmpty(g,e)?d:g},escapeRe:function(d){return d.replace(/([-.*+?^${}()|[\\]\\/\\\\])/g,\"\\\\$1\")},sequence:function(h,d,g,e){h[d]=h[d].createSequence(g,e)},addBehaviors:function(i){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(i)})}else{var e={},h,d,g;for(d in i){if((h=d.split(\"@\"))[1]){g=h[0];if(!e[g]){e[g]=Ext.select(g)}e[g].on(h[1],i[d])}}e=null}},getScrollBarWidth:function(g){if(!Ext.isReady){return 0}if(g===true||b===null){var i=Ext.getBody().createChild('<div class=\"x-hide-offsets\" style=\"width:100px;height:50px;overflow:hidden;\"><div style=\"height:200px;\"></div></div>'),h=i.child(\"div\",true);var e=h.offsetWidth;i.setStyle(\"overflow\",(Ext.isWebKit||Ext.isGecko)?\"auto\":\"scroll\");var d=h.offsetWidth;i.remove();b=e-d+2}return b},combine:function(){var g=arguments,e=g.length,k=[];for(var h=0;h<e;h++){var d=g[h];if(Ext.isArray(d)){k=k.concat(d)}else{if(d.length!==undefined&&!d.substr){k=k.concat(Array.prototype.slice.call(d,0))}else{k.push(d)}}}return k},copyTo:function(d,e,g){if(typeof g==\"string\"){g=g.split(/[,;\\s]/)}Ext.each(g,function(h){if(e.hasOwnProperty(h)){d[h]=e[h]}},this);return d},destroy:function(){Ext.each(arguments,function(d){if(d){if(Ext.isArray(d)){this.destroy.apply(this,d)}else{if(typeof d.destroy==\"function\"){d.destroy()}else{if(d.dom){d.remove()}}}}},this)},destroyMembers:function(m,k,g,h){for(var l=1,e=arguments,d=e.length;l<d;l++){Ext.destroy(m[e[l]]);delete m[e[l]]}},clean:function(d){var e=[];Ext.each(d,function(g){if(!!g){e.push(g)}});return e},unique:function(d){var e=[],g={};Ext.each(d,function(h){if(!g[h]){e.push(h)}g[h]=true});return e},flatten:function(d){var g=[];function e(h){Ext.each(h,function(i){if(Ext.isArray(i)){e(i)}else{g.push(i)}});return g}return e(d)},min:function(d,e){var g=d[0];e=e||function(i,h){return i<h?-1:1};Ext.each(d,function(h){g=e(g,h)==-1?g:h});return g},max:function(d,e){var g=d[0];e=e||function(i,h){return i>h?1:-1};Ext.each(d,function(h){g=e(g,h)==1?g:h});return g},mean:function(d){return d.length>0?Ext.sum(d)/d.length:undefined},sum:function(d){var e=0;Ext.each(d,function(g){e+=g});return e},partition:function(d,e){var g=[[],[]];Ext.each(d,function(k,l,h){g[(e&&e(k,l,h))||(!e&&k)?0:1].push(k)});return g},invoke:function(d,e){var h=[],g=Array.prototype.slice.call(arguments,2);Ext.each(d,function(k,l){if(k&&typeof k[e]==\"function\"){h.push(k[e].apply(k,g))}else{h.push(undefined)}});return h},pluck:function(d,g){var e=[];Ext.each(d,function(h){e.push(h[g])});return e},zip:function(){var n=Ext.partition(arguments,function(i){return typeof i!=\"function\"}),k=n[0],m=n[1][0],d=Ext.max(Ext.pluck(k,\"length\")),h=[];for(var l=0;l<d;l++){h[l]=[];if(m){h[l]=m.apply(m,Ext.pluck(k,l))}else{for(var g=0,e=k.length;g<e;g++){h[l].push(k[g][l])}}}return h},getCmp:function(d){return Ext.ComponentMgr.get(d)},useShims:c.isIE6||(c.isMac&&c.isGecko2),type:function(e){if(e===undefined||e===null){return false}if(e.htmlElement){return\"element\"}var d=typeof e;if(d==\"object\"&&e.nodeName){switch(e.nodeType){case 1:return\"element\";case 3:return(/\\S/).test(e.nodeValue)?\"textnode\":\"whitespace\"}}if(d==\"object\"||d==\"function\"){switch(e.constructor){case Array:return\"array\";case RegExp:return\"regexp\";case Date:return\"date\"}if(typeof e.length==\"number\"&&typeof e.item==\"function\"){return\"nodelist\"}}return d},intercept:function(h,d,g,e){h[d]=h[d].createInterceptor(g,e)},callback:function(d,h,g,e){if(typeof d==\"function\"){if(e){d.defer(e,h,g||[])}else{d.apply(h,g||[])}}}}}());Ext.apply(Function.prototype,{createSequence:function(b,a){var c=this;return(typeof b!=\"function\")?this:function(){var d=c.apply(this||window,arguments);b.apply(a||this||window,arguments);return d}}});Ext.applyIf(String,{escape:function(a){return a.replace(/('|\\\\)/g,\"\\\\$1\")},leftPad:function(d,b,c){var a=String(d);if(!c){c=\" \"}while(a.length<b){a=c+a}return a}});String.prototype.toggle=function(b,a){return this==b?a:b};String.prototype.trim=function(){var a=/^\\s+|\\s+$/g;return function(){return this.replace(a,\"\")}}();Date.prototype.getElapsed=function(a){return Math.abs((a||new Date()).getTime()-this.getTime())};Ext.applyIf(Number.prototype,{constrain:function(b,a){return Math.min(Math.max(this,b),a)}});Ext.lib.Dom.getRegion=function(a){return Ext.lib.Region.getRegion(a)};Ext.lib.Region=function(d,g,a,c){var e=this;e.top=d;e[1]=d;e.right=g;e.bottom=a;e.left=c;e[0]=c};Ext.lib.Region.prototype={contains:function(b){var a=this;return(b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom)},getArea:function(){var a=this;return((a.bottom-a.top)*(a.right-a.left))},intersect:function(h){var g=this,d=Math.max(g.top,h.top),e=Math.min(g.right,h.right),a=Math.min(g.bottom,h.bottom),c=Math.max(g.left,h.left);if(a>=d&&e>=c){return new Ext.lib.Region(d,e,a,c)}},union:function(h){var g=this,d=Math.min(g.top,h.top),e=Math.max(g.right,h.right),a=Math.max(g.bottom,h.bottom),c=Math.min(g.left,h.left);return new Ext.lib.Region(d,e,a,c)},constrainTo:function(b){var a=this;a.top=a.top.constrain(b.top,b.bottom);a.bottom=a.bottom.constrain(b.top,b.bottom);a.left=a.left.constrain(b.left,b.right);a.right=a.right.constrain(b.left,b.right);return a},adjust:function(d,c,a,g){var e=this;e.top+=d;e.left+=c;e.right+=g;e.bottom+=a;return e}};Ext.lib.Region.getRegion=function(e){var h=Ext.lib.Dom.getXY(e),d=h[1],g=h[0]+e.offsetWidth,a=h[1]+e.offsetHeight,c=h[0];return new Ext.lib.Region(d,g,a,c)};Ext.lib.Point=function(a,c){if(Ext.isArray(a)){c=a[1];a=a[0]}var b=this;b.x=b.right=b.left=b[0]=a;b.y=b.top=b.bottom=b[1]=c};Ext.lib.Point.prototype=new Ext.lib.Region();Ext.apply(Ext.DomHelper,function(){var e,a=\"afterbegin\",h=\"afterend\",i=\"beforebegin\",d=\"beforeend\",b=/tag|children|cn|html$/i;function g(n,q,p,r,m,k){n=Ext.getDom(n);var l;if(e.useDom){l=c(q,null);if(k){n.appendChild(l)}else{(m==\"firstChild\"?n:n.parentNode).insertBefore(l,n[m]||n)}}else{l=Ext.DomHelper.insertHtml(r,n,Ext.DomHelper.createHtml(q))}return p?Ext.get(l,true):l}function c(k,s){var m,v=document,q,t,n,u;if(Ext.isArray(k)){m=v.createDocumentFragment();for(var r=0,p=k.length;r<p;r++){c(k[r],m)}}else{if(typeof k==\"string\"){m=v.createTextNode(k)}else{m=v.createElement(k.tag||\"div\");q=!!m.setAttribute;for(var t in k){if(!b.test(t)){n=k[t];if(t==\"cls\"){m.className=n}else{if(q){m.setAttribute(t,n)}else{m[t]=n}}}}Ext.DomHelper.applyStyles(m,k.style);if((u=k.children||k.cn)){c(u,m)}else{if(k.html){m.innerHTML=k.html}}}}if(s){s.appendChild(m)}return m}e={createTemplate:function(l){var k=Ext.DomHelper.createHtml(l);return new Ext.Template(k)},useDom:false,insertBefore:function(k,m,l){return g(k,m,l,i)},insertAfter:function(k,m,l){return g(k,m,l,h,\"nextSibling\")},insertFirst:function(k,m,l){return g(k,m,l,a,\"firstChild\")},append:function(k,m,l){return g(k,m,l,d,\"\",true)},createDom:c};return e}());Ext.apply(Ext.Template.prototype,{disableFormats:false,re:/\\{([\\w-]+)(?:\\:([\\w\\.]*)(?:\\((.*?)?\\))?)?\\}/g,argsRe:/^\\s*['\"](.*)[\"']\\s*$/,compileARe:/\\\\/g,compileBRe:/(\\r\\n|\\n)/g,compileCRe:/'/g,applyTemplate:function(b){var g=this,a=g.disableFormats!==true,e=Ext.util.Format,c=g;if(g.compiled){return g.compiled(b)}function d(k,n,q,l){if(q&&a){if(q.substr(0,5)==\"this.\"){return c.call(q.substr(5),b[n],b)}else{if(l){var p=g.argsRe;l=l.split(\",\");for(var o=0,h=l.length;o<h;o++){l[o]=l[o].replace(p,\"$1\")}l=[b[n]].concat(l)}else{l=[b[n]]}return e[q].apply(e,l)}}else{return b[n]!==undefined?b[n]:\"\"}}return g.html.replace(g.re,d)},compile:function(){var me=this,fm=Ext.util.Format,useF=me.disableFormats!==true,sep=Ext.isGecko?\"+\":\",\",body;function fn(m,name,format,args){if(format&&useF){args=args?\",\"+args:\"\";if(format.substr(0,5)!=\"this.\"){format=\"fm.\"+format+\"(\"}else{format='this.call(\"'+format.substr(5)+'\", ';args=\", values\"}}else{args=\"\";format=\"(values['\"+name+\"'] == undefined ? '' : \"}return\"'\"+sep+format+\"values['\"+name+\"']\"+args+\")\"+sep+\"'\"}if(Ext.isGecko){body=\"this.compiled = function(values){ return '\"+me.html.replace(me.compileARe,\"\\\\\\\\\").replace(me.compileBRe,\"\\\\n\").replace(me.compileCRe,\"\\\\'\").replace(me.re,fn)+\"';};\"}else{body=[\"this.compiled = function(values){ return ['\"];body.push(me.html.replace(me.compileARe,\"\\\\\\\\\").replace(me.compileBRe,\"\\\\n\").replace(me.compileCRe,\"\\\\'\").replace(me.re,fn));body.push(\"'].join('');};\");body=body.join(\"\")}eval(body);return me},call:function(c,b,a){return this[c](b,a)}});Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.util.Functions={createInterceptor:function(c,b,a){var d=c;if(!Ext.isFunction(b)){return c}else{return function(){var g=this,e=arguments;b.target=g;b.method=c;return(b.apply(a||g||window,e)!==false)?c.apply(g||window,e):null}}},createDelegate:function(c,d,b,a){if(!Ext.isFunction(c)){return c}return function(){var g=b||arguments;if(a===true){g=Array.prototype.slice.call(arguments,0);g=g.concat(b)}else{if(Ext.isNumber(a)){g=Array.prototype.slice.call(arguments,0);var e=[a,0].concat(b);Array.prototype.splice.apply(g,e)}}return c.apply(d||window,g)}},defer:function(d,c,e,b,a){d=Ext.util.Functions.createDelegate(d,e,b,a);if(c>0){return setTimeout(d,c)}d();return 0},createSequence:function(c,b,a){if(!Ext.isFunction(b)){return c}else{return function(){var d=c.apply(this||window,arguments);b.apply(a||this||window,arguments);return d}}}};Ext.defer=Ext.util.Functions.defer;Ext.createInterceptor=Ext.util.Functions.createInterceptor;Ext.createSequence=Ext.util.Functions.createSequence;Ext.createDelegate=Ext.util.Functions.createDelegate;Ext.apply(Ext.util.Observable.prototype,function(){function a(k){var i=(this.methodEvents=this.methodEvents||{})[k],d,c,g,h=this;if(!i){this.methodEvents[k]=i={};i.originalFn=this[k];i.methodName=k;i.before=[];i.after=[];var b=function(m,l,e){if((c=m.apply(l||h,e))!==undefined){if(typeof c==\"object\"){if(c.returnValue!==undefined){d=c.returnValue}else{d=c}g=!!c.cancel}else{if(c===false){g=true}else{d=c}}}};this[k]=function(){var m=Array.prototype.slice.call(arguments,0),l;d=c=undefined;g=false;for(var n=0,e=i.before.length;n<e;n++){l=i.before[n];b(l.fn,l.scope,m);if(g){return d}}if((c=i.originalFn.apply(h,m))!==undefined){d=c}for(var n=0,e=i.after.length;n<e;n++){l=i.after[n];b(l.fn,l.scope,m);if(g){return d}}return d}}return i}return{beforeMethod:function(d,c,b){a.call(this,d).before.push({fn:c,scope:b})},afterMethod:function(d,c,b){a.call(this,d).after.push({fn:c,scope:b})},removeMethodListener:function(k,g,d){var h=this.getMethodEvent(k);for(var c=0,b=h.before.length;c<b;c++){if(h.before[c].fn==g&&h.before[c].scope==d){h.before.splice(c,1);return}}for(var c=0,b=h.after.length;c<b;c++){if(h.after[c].fn==g&&h.after[c].scope==d){h.after.splice(c,1);return}}},relayEvents:function(k,e){var h=this;function g(i){return function(){return h.fireEvent.apply(h,[i].concat(Array.prototype.slice.call(arguments,0)))}}for(var d=0,b=e.length;d<b;d++){var c=e[d];h.events[c]=h.events[c]||true;k.on(c,g(c),h)}},enableBubble:function(e){var g=this;if(!Ext.isEmpty(e)){e=Ext.isArray(e)?e:Array.prototype.slice.call(arguments,0);for(var d=0,b=e.length;d<b;d++){var c=e[d];c=c.toLowerCase();var h=g.events[c]||true;if(typeof h==\"boolean\"){h=new Ext.util.Event(g,c);g.events[c]=h}h.bubble=true}}}}}());Ext.util.Observable.capture=function(c,b,a){c.fireEvent=c.fireEvent.createInterceptor(b,a)};Ext.util.Observable.observeClass=function(b,a){if(b){if(!b.fireEvent){Ext.apply(b,new Ext.util.Observable());Ext.util.Observable.capture(b.prototype,b.fireEvent,b)}if(typeof a==\"object\"){b.on(a)}return b}};Ext.apply(Ext.EventManager,function(){var c,k,e,b,a=Ext.lib.Dom,i=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,h=0,g=0,d=Ext.isWebKit?Ext.num(navigator.userAgent.match(/AppleWebKit\\/(\\d+)/)[1])>=525:!((Ext.isGecko&&!Ext.isWindows)||Ext.isOpera);return{doResizeEvent:function(){var m=a.getViewHeight(),l=a.getViewWidth();if(g!=m||h!=l){c.fire(h=l,g=m)}},onWindowResize:function(n,m,l){if(!c){c=new Ext.util.Event();k=new Ext.util.DelayedTask(this.doResizeEvent);Ext.EventManager.on(window,\"resize\",this.fireWindowResize,this)}c.addListener(n,m,l)},fireWindowResize:function(){if(c){k.delay(100)}},onTextResize:function(o,n,l){if(!e){e=new Ext.util.Event();var m=new Ext.Element(document.createElement(\"div\"));m.dom.className=\"x-text-resize\";m.dom.innerHTML=\"X\";m.appendTo(document.body);b=m.dom.offsetHeight;setInterval(function(){if(m.dom.offsetHeight!=b){e.fire(b,b=m.dom.offsetHeight)}},this.textResizeInterval)}e.addListener(o,n,l)},removeResizeListener:function(m,l){if(c){c.removeListener(m,l)}},fireResize:function(){if(c){c.fire(a.getViewWidth(),a.getViewHeight())}},textResizeInterval:50,ieDeferSrc:false,getKeyEvent:function(){return d?\"keydown\":\"keypress\"},useKeydown:d}}());Ext.EventManager.on=Ext.EventManager.addListener;Ext.apply(Ext.EventObjectImpl.prototype,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,isNavKeyPress:function(){var b=this,a=this.normalizeKey(b.keyCode);return(a>=33&&a<=40)||a==b.RETURN||a==b.TAB||a==b.ESC},isSpecialKey:function(){var a=this.normalizeKey(this.keyCode);return(this.type==\"keypress\"&&this.ctrlKey)||this.isNavKeyPress()||(a==this.BACKSPACE)||(a>=16&&a<=20)||(a>=44&&a<=46)},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])},hasModifier:function(){return((this.ctrlKey||this.altKey)||this.shiftKey)}});Ext.Element.addMethods({swallowEvent:function(a,b){var d=this;function c(g){g.stopPropagation();if(b){g.preventDefault()}}if(Ext.isArray(a)){Ext.each(a,function(g){d.on(g,c)});return d}d.on(a,c);return d},relayEvent:function(a,b){this.on(a,function(c){b.fireEvent(a,c)})},clean:function(b){var d=this,e=d.dom,g=e.firstChild,c=-1;if(Ext.Element.data(e,\"isCleaned\")&&b!==true){return d}while(g){var a=g.nextSibling;if(g.nodeType==3&&!(/\\S/.test(g.nodeValue))){e.removeChild(g)}else{g.nodeIndex=++c}g=a}Ext.Element.data(e,\"isCleaned\",true);return d},load:function(){var a=this.getUpdater();a.update.apply(a,arguments);return this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this))},update:function(html,loadScripts,callback){if(!this.dom){return this}html=html||\"\";if(loadScripts!==true){this.dom.innerHTML=html;if(typeof callback==\"function\"){callback()}return this}var id=Ext.id(),dom=this.dom;html+='<span id=\"'+id+'\"></span>';Ext.lib.Event.onAvailable(id,function(){var DOC=document,hd=DOC.getElementsByTagName(\"head\")[0],re=/(?:<script([^>]*)?>)((\\n|\\r|.)*?)(?:<\\/script>)/ig,srcRe=/\\ssrc=([\\'\\\"])(.*?)\\1/i,typeRe=/\\stype=([\\'\\\"])(.*?)\\1/i,match,attrs,srcMatch,typeMatch,el,s;while((match=re.exec(html))){attrs=match[1];srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){s=DOC.createElement(\"script\");s.src=srcMatch[2];typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(window.execScript){window.execScript(match[2])}else{window.eval(match[2])}}}}el=DOC.getElementById(id);if(el){Ext.removeNode(el)}if(typeof callback==\"function\"){callback()}});dom.innerHTML=html.replace(/(?:<script.*?>)((\\n|\\r|.)*?)(?:<\\/script>)/ig,\"\");return this},removeAllListeners:function(){this.removeAnchor();Ext.EventManager.removeAll(this.dom);return this},createProxy:function(a,e,d){a=(typeof a==\"object\")?a:{tag:\"div\",cls:a};var c=this,b=e?Ext.DomHelper.append(e,a,true):Ext.DomHelper.insertBefore(c.dom,a,true);if(d&&c.setBox&&c.getBox){b.setBox(c.getBox())}return b}});Ext.Element.prototype.getUpdateManager=Ext.Element.prototype.getUpdater;Ext.Element.addMethods({getAnchorXY:function(e,m,t){e=(e||\"tl\").toLowerCase();t=t||{};var l=this,b=l.dom==document.body||l.dom==document,p=t.width||b?Ext.lib.Dom.getViewWidth():l.getWidth(),i=t.height||b?Ext.lib.Dom.getViewHeight():l.getHeight(),q,a=Math.round,c=l.getXY(),n=l.getScroll(),k=b?n.left:!m?c[0]:0,g=b?n.top:!m?c[1]:0,d={c:[a(p*0.5),a(i*0.5)],t:[a(p*0.5),0],l:[0,a(i*0.5)],r:[p,a(i*0.5)],b:[a(p*0.5),i],tl:[0,0],bl:[0,i],br:[p,i],tr:[p,0]};q=d[e];return[q[0]+k,q[1]+g]},anchorTo:function(b,h,c,a,l,m){var i=this,e=i.dom,k=!Ext.isEmpty(l),d=function(){Ext.fly(e).alignTo(b,h,c,a);Ext.callback(m,Ext.fly(e))},g=this.getAnchor();this.removeAnchor();Ext.apply(g,{fn:d,scroll:k});Ext.EventManager.onWindowResize(d,null);if(k){Ext.EventManager.on(window,\"scroll\",d,null,{buffer:!isNaN(l)?l:50})}d.call(i);return i},removeAnchor:function(){var b=this,a=this.getAnchor();if(a&&a.fn){Ext.EventManager.removeResizeListener(a.fn);if(a.scroll){Ext.EventManager.un(window,\"scroll\",a.fn)}delete a.fn}return b},getAnchor:function(){var b=Ext.Element.data,c=this.dom;if(!c){return}var a=b(c,\"_anchor\");if(!a){a=b(c,\"_anchor\",{})}return a},getAlignToXY:function(g,B,C){g=Ext.get(g);if(!g||!g.dom){throw\"Element.alignToXY with an element that doesn't exist\"}C=C||[0,0];B=(!B||B==\"?\"?\"tl-bl?\":(!(/-/).test(B)&&B!==\"\"?\"tl-\"+B:B||\"tl-bl\")).toLowerCase();var L=this,I=L.dom,N,M,q,n,t,G,z,u=Ext.lib.Dom.getViewWidth()-10,H=Ext.lib.Dom.getViewHeight()-10,b,i,k,l,v,A,O=document,K=O.documentElement,s=O.body,F=(K.scrollLeft||s.scrollLeft||0)+5,E=(K.scrollTop||s.scrollTop||0)+5,J=false,e=\"\",a=\"\",D=B.match(/^([a-z]+)-([a-z]+)(\\?)?$/);if(!D){throw\"Element.alignTo with an invalid alignment \"+B}e=D[1];a=D[2];J=!!D[3];N=L.getAnchorXY(e,true);M=g.getAnchorXY(a,false);q=M[0]-N[0]+C[0];n=M[1]-N[1]+C[1];if(J){t=L.getWidth();G=L.getHeight();z=g.getRegion();b=e.charAt(0);i=e.charAt(e.length-1);k=a.charAt(0);l=a.charAt(a.length-1);v=((b==\"t\"&&k==\"b\")||(b==\"b\"&&k==\"t\"));A=((i==\"r\"&&l==\"l\")||(i==\"l\"&&l==\"r\"));if(q+t>u+F){q=A?z.left-t:u+F-t}if(q<F){q=A?z.right:F}if(n+G>H+E){n=v?z.top-G:H+E-G}if(n<E){n=v?z.bottom:E}}return[q,n]},alignTo:function(c,a,e,b){var d=this;return d.setXY(d.getAlignToXY(c,a,e),d.preanim&&!!b?d.preanim(arguments,3):false)},adjustForConstraints:function(c,a,b){return this.getConstrainToXY(a||document,false,b,c)||c},getConstrainToXY:function(b,a,c,e){var d={top:0,left:0,bottom:0,right:0};return function(i,B,m,o){i=Ext.get(i);m=m?Ext.applyIf(m,d):d;var A,E,z=0,v=0;if(i.dom==document.body||i.dom==document){A=Ext.lib.Dom.getViewWidth();E=Ext.lib.Dom.getViewHeight()}else{A=i.dom.clientWidth;E=i.dom.clientHeight;if(!B){var u=i.getXY();z=u[0];v=u[1]}}var t=i.getScroll();z+=m.left+t.left;v+=m.top+t.top;A-=m.right;E-=m.bottom;var C=z+A,g=v+E,k=o||(!B?this.getXY():[this.getLeft(true),this.getTop(true)]),q=k[0],p=k[1],l=this.getConstrainOffset(),r=this.dom.offsetWidth+l,D=this.dom.offsetHeight+l;var n=false;if((q+r)>C){q=C-r;n=true}if((p+D)>g){p=g-D;n=true}if(q<z){q=z;n=true}if(p<v){p=v;n=true}return n?[q,p]:false}}(),getConstrainOffset:function(){return 0},getCenterXY:function(){return this.getAlignToXY(document,\"c-c\")},center:function(a){return this.alignTo(a||document,\"c-c\")}});Ext.Element.addMethods({select:function(a,b){return Ext.Element.select(a,b,this.dom)}});Ext.apply(Ext.Element.prototype,function(){var c=Ext.getDom,a=Ext.get,b=Ext.DomHelper;return{insertSibling:function(i,g,h){var k=this,e,d=(g||\"before\").toLowerCase()==\"after\",l;if(Ext.isArray(i)){l=k;Ext.each(i,function(m){e=Ext.fly(l,\"_internal\").insertSibling(m,g,h);if(d){l=e}});return e}i=i||{};if(i.nodeType||i.dom){e=k.dom.parentNode.insertBefore(c(i),d?k.dom.nextSibling:k.dom);if(!h){e=a(e)}}else{if(d&&!k.dom.nextSibling){e=b.append(k.dom.parentNode,i,!h)}else{e=b[d?\"insertAfter\":\"insertBefore\"](k.dom,i,!h)}}return e}}}());Ext.Element.boxMarkup='<div class=\"{0}-tl\"><div class=\"{0}-tr\"><div class=\"{0}-tc\"></div></div></div><div class=\"{0}-ml\"><div class=\"{0}-mr\"><div class=\"{0}-mc\"></div></div></div><div class=\"{0}-bl\"><div class=\"{0}-br\"><div class=\"{0}-bc\"></div></div></div>';Ext.Element.addMethods(function(){var a=\"_internal\",b=/(\\d+\\.?\\d+)px/;return{applyStyles:function(c){Ext.DomHelper.applyStyles(this.dom,c);return this},getStyles:function(){var c={};Ext.each(arguments,function(d){c[d]=this.getStyle(d)},this);return c},setOverflow:function(c){var d=this.dom;if(c==\"auto\"&&Ext.isMac&&Ext.isGecko2){d.style.overflow=\"hidden\";(function(){d.style.overflow=\"auto\"}).defer(1)}else{d.style.overflow=c}},boxWrap:function(c){c=c||\"x-box\";var d=Ext.get(this.insertHtml(\"beforeBegin\",\"<div class='\"+c+\"'>\"+String.format(Ext.Element.boxMarkup,c)+\"</div>\"));Ext.DomQuery.selectNode(\".\"+c+\"-mc\",d.dom).appendChild(this.dom);return d},setSize:function(e,c,d){var g=this;if(typeof e==\"object\"){c=e.height;e=e.width}e=g.adjustWidth(e);c=g.adjustHeight(c);if(!d||!g.anim){g.dom.style.width=g.addUnits(e);g.dom.style.height=g.addUnits(c)}else{g.anim({width:{to:e},height:{to:c}},g.preanim(arguments,2))}return g},getComputedHeight:function(){var d=this,c=Math.max(d.dom.offsetHeight,d.dom.clientHeight);if(!c){c=parseFloat(d.getStyle(\"height\"))||0;if(!d.isBorderBox()){c+=d.getFrameWidth(\"tb\")}}return c},getComputedWidth:function(){var c=Math.max(this.dom.offsetWidth,this.dom.clientWidth);if(!c){c=parseFloat(this.getStyle(\"width\"))||0;if(!this.isBorderBox()){c+=this.getFrameWidth(\"lr\")}}return c},getFrameWidth:function(d,c){return c&&this.isBorderBox()?0:(this.getPadding(d)+this.getBorderWidth(d))},addClassOnOver:function(c){this.hover(function(){Ext.fly(this,a).addClass(c)},function(){Ext.fly(this,a).removeClass(c)});return this},addClassOnFocus:function(c){this.on(\"focus\",function(){Ext.fly(this,a).addClass(c)},this.dom);this.on(\"blur\",function(){Ext.fly(this,a).removeClass(c)},this.dom);return this},addClassOnClick:function(c){var d=this.dom;this.on(\"mousedown\",function(){Ext.fly(d,a).addClass(c);var g=Ext.getDoc(),e=function(){Ext.fly(d,a).removeClass(c);g.removeListener(\"mouseup\",e)};g.on(\"mouseup\",e)});return this},getViewSize:function(){var g=document,h=this.dom,c=(h==g||h==g.body);if(c){var e=Ext.lib.Dom;return{width:e.getViewWidth(),height:e.getViewHeight()}}else{return{width:h.clientWidth,height:h.clientHeight}}},getStyleSize:function(){var k=this,c,i,m=document,n=this.dom,e=(n==m||n==m.body),g=n.style;if(e){var l=Ext.lib.Dom;return{width:l.getViewWidth(),height:l.getViewHeight()}}if(g.width&&g.width!=\"auto\"){c=parseFloat(g.width);if(k.isBorderBox()){c-=k.getFrameWidth(\"lr\")}}if(g.height&&g.height!=\"auto\"){i=parseFloat(g.height);if(k.isBorderBox()){i-=k.getFrameWidth(\"tb\")}}return{width:c||k.getWidth(true),height:i||k.getHeight(true)}},getSize:function(c){return{width:this.getWidth(c),height:this.getHeight(c)}},repaint:function(){var c=this.dom;this.addClass(\"x-repaint\");setTimeout(function(){Ext.fly(c).removeClass(\"x-repaint\")},1);return this},unselectable:function(){this.dom.unselectable=\"on\";return this.swallowEvent(\"selectstart\",true).applyStyles(\"-moz-user-select:none;-khtml-user-select:none;\").addClass(\"x-unselectable\")},getMargins:function(d){var e=this,c,g={t:\"top\",l:\"left\",r:\"right\",b:\"bottom\"},h={};if(!d){for(c in e.margins){h[g[c]]=parseFloat(e.getStyle(e.margins[c]))||0}return h}else{return e.addStyles.call(e,d,e.margins)}}}}());Ext.Element.addMethods({setBox:function(e,g,b){var d=this,a=e.width,c=e.height;if((g&&!d.autoBoxAdjust)&&!d.isBorderBox()){a-=(d.getBorderWidth(\"lr\")+d.getPadding(\"lr\"));c-=(d.getBorderWidth(\"tb\")+d.getPadding(\"tb\"))}d.setBounds(e.x,e.y,a,c,d.animTest.call(d,arguments,b,2));return d},getBox:function(k,q){var n=this,x,e,p,d=n.getBorderWidth,s=n.getPadding,g,a,v,o;if(!q){x=n.getXY()}else{e=parseInt(n.getStyle(\"left\"),10)||0;p=parseInt(n.getStyle(\"top\"),10)||0;x=[e,p]}var c=n.dom,u=c.offsetWidth,i=c.offsetHeight,m;if(!k){m={x:x[0],y:x[1],0:x[0],1:x[1],width:u,height:i}}else{g=d.call(n,\"l\")+s.call(n,\"l\");a=d.call(n,\"r\")+s.call(n,\"r\");v=d.call(n,\"t\")+s.call(n,\"t\");o=d.call(n,\"b\")+s.call(n,\"b\");m={x:x[0]+g,y:x[1]+v,0:x[0]+g,1:x[1]+v,width:u-(g+a),height:i-(v+o)}}m.right=m.x+m.width;m.bottom=m.y+m.height;return m},move:function(k,b,c){var g=this,n=g.getXY(),l=n[0],i=n[1],d=[l-b,i],m=[l+b,i],h=[l,i-b],a=[l,i+b],e={l:d,left:d,r:m,right:m,t:h,top:h,up:h,b:a,bottom:a,down:a};k=k.toLowerCase();g.moveTo(e[k][0],e[k][1],g.animTest.call(g,arguments,c,2))},setLeftTop:function(d,c){var b=this,a=b.dom.style;a.left=b.addUnits(d);a.top=b.addUnits(c);return b},getRegion:function(){return Ext.lib.Dom.getRegion(this.dom)},setBounds:function(b,g,d,a,c){var e=this;if(!c||!e.anim){e.setSize(d,a);e.setLocation(b,g)}else{e.anim({points:{to:[b,g]},width:{to:e.adjustWidth(d)},height:{to:e.adjustHeight(a)}},e.preanim(arguments,4),\"motion\")}return e},setRegion:function(b,a){return this.setBounds(b.left,b.top,b.right-b.left,b.bottom-b.top,this.animTest.call(this,arguments,a,1))}});Ext.Element.addMethods({scrollTo:function(b,d,a){var e=/top/i.test(b),c=this,g=c.dom,h;if(!a||!c.anim){h=\"scroll\"+(e?\"Top\":\"Left\");g[h]=d}else{h=\"scroll\"+(e?\"Left\":\"Top\");c.anim({scroll:{to:e?[g[h],d]:[d,g[h]]}},c.preanim(arguments,2),\"scroll\")}return c},scrollIntoView:function(e,i){var q=Ext.getDom(e)||Ext.getBody().dom,h=this.dom,g=this.getOffsetsTo(q),m=g[0]+q.scrollLeft,v=g[1]+q.scrollTop,s=v+h.offsetHeight,d=m+h.offsetWidth,a=q.clientHeight,n=parseInt(q.scrollTop,10),u=parseInt(q.scrollLeft,10),k=n+a,p=u+q.clientWidth;if(h.offsetHeight>a||v<n){q.scrollTop=v}else{if(s>k){q.scrollTop=s-a}}q.scrollTop=q.scrollTop;if(i!==false){if(h.offsetWidth>q.clientWidth||m<u){q.scrollLeft=m}else{if(d>p){q.scrollLeft=d-q.clientWidth}}q.scrollLeft=q.scrollLeft}return this},scrollChildIntoView:function(b,a){Ext.fly(b,\"_scrollChildIntoView\").scrollIntoView(this,a)},scroll:function(n,b,d){if(!this.isScrollable()){return false}var e=this.dom,g=e.scrollLeft,q=e.scrollTop,o=e.scrollWidth,m=e.scrollHeight,i=e.clientWidth,a=e.clientHeight,c=false,p,k={l:Math.min(g+b,o-i),r:p=Math.max(g-b,0),t:Math.max(q-b,0),b:Math.min(q+b,m-a)};k.d=k.b;k.u=k.t;n=n.substr(0,1);if((p=k[n])>-1){c=true;this.scrollTo(n==\"l\"||n==\"r\"?\"left\":\"top\",p,this.preanim(arguments,2))}return c}});Ext.Element.addMethods(function(){var d=\"visibility\",b=\"display\",a=\"hidden\",h=\"none\",c=\"x-masked\",g=\"x-masked-relative\",e=Ext.Element.data;return{isVisible:function(i){var k=!this.isStyle(d,a)&&!this.isStyle(b,h),l=this.dom.parentNode;if(i!==true||!k){return k}while(l&&!(/^body/i.test(l.tagName))){if(!Ext.fly(l,\"_isVisible\").isVisible()){return false}l=l.parentNode}return true},isDisplayed:function(){return !this.isStyle(b,h)},enableDisplayMode:function(i){this.setVisibilityMode(Ext.Element.DISPLAY);if(!Ext.isEmpty(i)){e(this.dom,\"originalDisplay\",i)}return this},mask:function(k,o){var q=this,m=q.dom,p=Ext.DomHelper,n=\"ext-el-mask-msg\",i,r;if(!(/^body/i.test(m.tagName)&&q.getStyle(\"position\")==\"static\")){q.addClass(g)}if(i=e(m,\"maskMsg\")){i.remove()}if(i=e(m,\"mask\")){i.remove()}r=p.append(m,{cls:\"ext-el-mask\"},true);e(m,\"mask\",r);q.addClass(c);r.setDisplayed(true);if(typeof k==\"string\"){var l=p.append(m,{cls:n,cn:{tag:\"div\"}},true);e(m,\"maskMsg\",l);l.dom.className=o?n+\" \"+o:n;l.dom.firstChild.innerHTML=k;l.setDisplayed(true);l.center(q)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&q.getStyle(\"height\")==\"auto\"){r.setSize(undefined,q.getHeight())}return r},unmask:function(){var l=this,m=l.dom,i=e(m,\"mask\"),k=e(m,\"maskMsg\");if(i){if(k){k.remove();e(m,\"maskMsg\",undefined)}i.remove();e(m,\"mask\",undefined);l.removeClass([c,g])}},isMasked:function(){var i=e(this.dom,\"mask\");return i&&i.isVisible()},createShim:function(){var i=document.createElement(\"iframe\"),k;i.frameBorder=\"0\";i.className=\"ext-shim\";i.src=Ext.SSL_SECURE_URL;k=Ext.get(this.dom.parentNode.insertBefore(i,this.dom));k.autoBoxAdjust=false;return k}}}());Ext.Element.addMethods({addKeyListener:function(b,d,c){var a;if(typeof b!=\"object\"||Ext.isArray(b)){a={key:b,fn:d,scope:c}}else{a={key:b.key,shift:b.shift,ctrl:b.ctrl,alt:b.alt,fn:d,scope:c}}return new Ext.KeyMap(this,a)},addKeyMap:function(a){return new Ext.KeyMap(this,a)}});Ext.CompositeElementLite.importElementMethods();Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(c,a){if(!c){return this}if(typeof c==\"string\"){c=Ext.Element.selectorFunction(c,a)}var b=this.elements;Ext.each(c,function(d){b.push(Ext.get(d))});return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(d,e){var c=this,a=this.elements,b;Ext.each(d,function(g){if((b=(a[g]||a[g=c.indexOf(g)]))){if(e){if(b.dom){b.remove()}else{Ext.removeNode(b)}}a.splice(g,1)}});return this}});Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(b,a){this.elements=[];this.add(b,a)},getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}});Ext.Element.select=function(a,d,b){var c;if(typeof a==\"string\"){c=Ext.Element.selectorFunction(a,b)}else{if(a.length!==undefined){c=a}else{throw\"Invalid selector\"}}return(d===true)?new Ext.CompositeElement(c):new Ext.CompositeElementLite(c)};Ext.select=Ext.Element.select;Ext.UpdateManager=Ext.Updater=Ext.extend(Ext.util.Observable,function(){var b=\"beforeupdate\",d=\"update\",c=\"failure\";function a(h){var i=this;i.transaction=null;if(h.argument.form&&h.argument.reset){try{h.argument.form.reset()}catch(k){}}if(i.loadScripts){i.renderer.render(i.el,h,i,g.createDelegate(i,[h]))}else{i.renderer.render(i.el,h,i);g.call(i,h)}}function g(h,i,k){this.fireEvent(i||d,this.el,h);if(Ext.isFunction(h.argument.callback)){h.argument.callback.call(h.argument.scope,this.el,Ext.isEmpty(k)?true:false,h,h.argument.options)}}function e(h){g.call(this,h,c,!!(this.transaction=null))}return{constructor:function(i,h){var k=this;i=Ext.get(i);if(!h&&i.updateManager){return i.updateManager}k.el=i;k.defaultUrl=null;k.addEvents(b,d,c);Ext.apply(k,Ext.Updater.defaults);k.transaction=null;k.refreshDelegate=k.refresh.createDelegate(k);k.updateDelegate=k.update.createDelegate(k);k.formUpdateDelegate=(k.formUpdate||function(){}).createDelegate(k);k.renderer=k.renderer||k.getDefaultRenderer();Ext.Updater.superclass.constructor.call(k)},setRenderer:function(h){this.renderer=h},getRenderer:function(){return this.renderer},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer()},setDefaultUrl:function(h){this.defaultUrl=h},getEl:function(){return this.el},update:function(i,p,q,m){var l=this,h,k;if(l.fireEvent(b,l.el,i,p)!==false){if(Ext.isObject(i)){h=i;i=h.url;p=p||h.params;q=q||h.callback;m=m||h.discardUrl;k=h.scope;if(!Ext.isEmpty(h.nocache)){l.disableCaching=h.nocache}if(!Ext.isEmpty(h.text)){l.indicatorText='<div class=\"loading-indicator\">'+h.text+\"</div>\"}if(!Ext.isEmpty(h.scripts)){l.loadScripts=h.scripts}if(!Ext.isEmpty(h.timeout)){l.timeout=h.timeout}}l.showLoading();if(!m){l.defaultUrl=i}if(Ext.isFunction(i)){i=i.call(l)}var n=Ext.apply({},{url:i,params:(Ext.isFunction(p)&&k)?p.createDelegate(k):p,success:a,failure:e,scope:l,callback:undefined,timeout:(l.timeout*1000),disableCaching:l.disableCaching,argument:{options:h,url:i,form:null,callback:q,scope:k||window,params:p}},h);l.transaction=Ext.Ajax.request(n)}},formUpdate:function(l,h,k,m){var i=this;if(i.fireEvent(b,i.el,l,h)!==false){if(Ext.isFunction(h)){h=h.call(i)}l=Ext.getDom(l);i.transaction=Ext.Ajax.request({form:l,url:h,success:a,failure:e,scope:i,timeout:(i.timeout*1000),argument:{url:h,form:l,callback:m,reset:k}});i.showLoading.defer(1,i)}},startAutoRefresh:function(i,k,m,n,h){var l=this;if(h){l.update(k||l.defaultUrl,m,n,true)}if(l.autoRefreshProcId){clearInterval(l.autoRefreshProcId)}l.autoRefreshProcId=setInterval(l.update.createDelegate(l,[k||l.defaultUrl,m,n,true]),i*1000)},stopAutoRefresh:function(){if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId);delete this.autoRefreshProcId}},isAutoRefreshing:function(){return !!this.autoRefreshProcId},showLoading:function(){if(this.showLoadIndicator){this.el.dom.innerHTML=this.indicatorText}},abort:function(){if(this.transaction){Ext.Ajax.abort(this.transaction)}},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):false},refresh:function(h){if(this.defaultUrl){this.update(this.defaultUrl,null,h,true)}}}}());Ext.Updater.defaults={timeout:30,disableCaching:false,showLoadIndicator:true,indicatorText:'<div class=\"loading-indicator\">Loading...</div>',loadScripts:false,sslBlankUrl:Ext.SSL_SECURE_URL};Ext.Updater.updateElement=function(d,c,e,b){var a=Ext.get(d).getUpdater();Ext.apply(a,b);a.update(c,e,b?b.callback:null)};Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(c,a,b,d){c.update(a.responseText,b.loadScripts,d)}};(function(){Date.useStrict=false;function b(d){var c=Array.prototype.slice.call(arguments,1);return d.replace(/\\{(\\d+)\\}/g,function(e,g){return c[g]})}Date.formatCodeToRegex=function(d,c){var e=Date.parseCodes[d];if(e){e=typeof e==\"function\"?e():e;Date.parseCodes[d]=e}return e?Ext.applyIf({c:e.c?b(e.c,c||\"{0}\"):e.c},e):{g:0,c:null,s:Ext.escapeRe(d)}};var a=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{\"M$\":function(d,c){var e=new RegExp(\"\\\\/Date\\\\(([-+])?(\\\\d+)(?:[+-]\\\\d{4})?\\\\)\\\\/\");var g=(d||\"\").match(e);return g?new Date(((g[1]||\"\")+g[2])*1):null}},parseRegexes:[],formatFunctions:{\"M$\":function(){return\"\\\\/Date(\"+this.getTime()+\")\\\\/\"}},y2kYear:50,MILLI:\"ms\",SECOND:\"s\",MINUTE:\"mi\",HOUR:\"h\",DAY:\"d\",MONTH:\"mo\",YEAR:\"y\",defaults:{},dayNames:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],monthNames:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(c){return Date.monthNames[c].substring(0,3)},getShortDayName:function(c){return Date.dayNames[c].substring(0,3)},getMonthNumber:function(c){return Date.monthNumbers[c.substring(0,1).toUpperCase()+c.substring(1,3).toLowerCase()]},formatCodes:{d:\"String.leftPad(this.getDate(), 2, '0')\",D:\"Date.getShortDayName(this.getDay())\",j:\"this.getDate()\",l:\"Date.dayNames[this.getDay()]\",N:\"(this.getDay() ? this.getDay() : 7)\",S:\"this.getSuffix()\",w:\"this.getDay()\",z:\"this.getDayOfYear()\",W:\"String.leftPad(this.getWeekOfYear(), 2, '0')\",F:\"Date.monthNames[this.getMonth()]\",m:\"String.leftPad(this.getMonth() + 1, 2, '0')\",M:\"Date.getShortMonthName(this.getMonth())\",n:\"(this.getMonth() + 1)\",t:\"this.getDaysInMonth()\",L:\"(this.isLeapYear() ? 1 : 0)\",o:\"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))\",Y:\"String.leftPad(this.getFullYear(), 4, '0')\",y:\"('' + this.getFullYear()).substring(2, 4)\",a:\"(this.getHours() < 12 ? 'am' : 'pm')\",A:\"(this.getHours() < 12 ? 'AM' : 'PM')\",g:\"((this.getHours() % 12) ? this.getHours() % 12 : 12)\",G:\"this.getHours()\",h:\"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')\",H:\"String.leftPad(this.getHours(), 2, '0')\",i:\"String.leftPad(this.getMinutes(), 2, '0')\",s:\"String.leftPad(this.getSeconds(), 2, '0')\",u:\"String.leftPad(this.getMilliseconds(), 3, '0')\",O:\"this.getGMTOffset()\",P:\"this.getGMTOffset(true)\",T:\"this.getTimezone()\",Z:\"(this.getTimezoneOffset() * -60)\",c:function(){for(var m=\"Y-m-dTH:i:sP\",h=[],g=0,d=m.length;g<d;++g){var k=m.charAt(g);h.push(k==\"T\"?\"'T'\":Date.getFormatCode(k))}return h.join(\" + \")},U:\"Math.round(this.getTime() / 1000)\"},isValid:function(p,c,o,l,g,k,e){l=l||0;g=g||0;k=k||0;e=e||0;var n=new Date(p<100?100:p,c-1,o,l,g,k,e).add(Date.YEAR,p<100?p-100:0);return p==n.getFullYear()&&c==n.getMonth()+1&&o==n.getDate()&&l==n.getHours()&&g==n.getMinutes()&&k==n.getSeconds()&&e==n.getMilliseconds()},parseDate:function(d,g,c){var e=Date.parseFunctions;if(e[g]==null){Date.createParser(g)}return e[g](d,Ext.isDefined(c)?c:Date.useStrict)},getFormatCode:function(d){var c=Date.formatCodes[d];if(c){c=typeof c==\"function\"?c():c;Date.formatCodes[d]=c}return c||(\"'\"+String.escape(d)+\"'\")},createFormat:function(h){var g=[],c=false,e=\"\";for(var d=0;d<h.length;++d){e=h.charAt(d);if(!c&&e==\"\\\\\"){c=true}else{if(c){c=false;g.push(\"'\"+String.escape(e)+\"'\")}else{g.push(Date.getFormatCode(e))}}}Date.formatFunctions[h]=new Function(\"return \"+g.join(\"+\"))},createParser:function(){var c=[\"var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,\",\"def = Date.defaults,\",\"results = String(input).match(Date.parseRegexes[{0}]);\",\"if(results){\",\"{1}\",\"if(u != null){\",\"v = new Date(u * 1000);\",\"}else{\",\"dt = (new Date()).clearTime();\",\"y = Ext.num(y, Ext.num(def.y, dt.getFullYear()));\",\"m = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));\",\"d = Ext.num(d, Ext.num(def.d, dt.getDate()));\",\"h  = Ext.num(h, Ext.num(def.h, dt.getHours()));\",\"i  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));\",\"s  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));\",\"ms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));\",\"if(z >= 0 && y >= 0){\",\"v = new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);\",\"v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);\",\"}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){\",\"v = null;\",\"}else{\",\"v = new Date(y < 100 ? 100 : y, m, d, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);\",\"}\",\"}\",\"}\",\"if(v){\",\"if(zz != null){\",\"v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);\",\"}else if(o){\",\"v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));\",\"}\",\"}\",\"return v;\"].join(\"\\n\");return function(n){var e=Date.parseRegexes.length,p=1,g=[],m=[],l=false,d=\"\",k=0,h,o;for(;k<n.length;++k){d=n.charAt(k);if(!l&&d==\"\\\\\"){l=true}else{if(l){l=false;m.push(String.escape(d))}else{h=a(d,p);p+=h.g;m.push(h.s);if(h.g&&h.c){if(h.calcLast){o=h.c}else{g.push(h.c)}}}}}if(o){g.push(o)}Date.parseRegexes[e]=new RegExp(\"^\"+m.join(\"\")+\"$\",\"i\");Date.parseFunctions[n]=new Function(\"input\",\"strict\",b(c,e,g.join(\"\")))}}(),parseCodes:{d:{g:1,c:\"d = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{2})\"},j:{g:1,c:\"d = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{1,2})\"},D:function(){for(var c=[],d=0;d<7;c.push(Date.getShortDayName(d)),++d){}return{g:0,c:null,s:\"(?:\"+c.join(\"|\")+\")\"}},l:function(){return{g:0,c:null,s:\"(?:\"+Date.dayNames.join(\"|\")+\")\"}},N:{g:0,c:null,s:\"[1-7]\"},S:{g:0,c:null,s:\"(?:st|nd|rd|th)\"},w:{g:0,c:null,s:\"[0-6]\"},z:{g:1,c:\"z = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{1,3})\"},W:{g:0,c:null,s:\"(?:\\\\d{2})\"},F:function(){return{g:1,c:\"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\\n\",s:\"(\"+Date.monthNames.join(\"|\")+\")\"}},M:function(){for(var c=[],d=0;d<12;c.push(Date.getShortMonthName(d)),++d){}return Ext.applyIf({s:\"(\"+c.join(\"|\")+\")\"},a(\"F\"))},m:{g:1,c:\"m = parseInt(results[{0}], 10) - 1;\\n\",s:\"(\\\\d{2})\"},n:{g:1,c:\"m = parseInt(results[{0}], 10) - 1;\\n\",s:\"(\\\\d{1,2})\"},t:{g:0,c:null,s:\"(?:\\\\d{2})\"},L:{g:0,c:null,s:\"(?:1|0)\"},o:function(){return a(\"Y\")},Y:{g:1,c:\"y = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{4})\"},y:{g:1,c:\"var ty = parseInt(results[{0}], 10);\\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\\n\",s:\"(\\\\d{1,2})\"},a:function(){return a(\"A\")},A:{calcLast:true,g:1,c:\"if (/(am)/i.test(results[{0}])) {\\nif (!h || h == 12) { h = 0; }\\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}\",s:\"(AM|PM|am|pm)\"},g:function(){return a(\"G\")},G:{g:1,c:\"h = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{1,2})\"},h:function(){return a(\"H\")},H:{g:1,c:\"h = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{2})\"},i:{g:1,c:\"i = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{2})\"},s:{g:1,c:\"s = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{2})\"},u:{g:1,c:\"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\\n\",s:\"(\\\\d+)\"},O:{g:1,c:[\"o = results[{0}];\",\"var sn = o.substring(0,1),\",\"hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),\",\"mn = o.substring(3,5) % 60;\",\"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\\n\"].join(\"\\n\"),s:\"([+-]\\\\d{4})\"},P:{g:1,c:[\"o = results[{0}];\",\"var sn = o.substring(0,1),\",\"hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),\",\"mn = o.substring(4,6) % 60;\",\"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\\n\"].join(\"\\n\"),s:\"([+-]\\\\d{2}:\\\\d{2})\"},T:{g:0,c:null,s:\"[A-Z]{1,4}\"},Z:{g:1,c:\"zz = results[{0}] * 1;\\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\\n\",s:\"([+-]?\\\\d{1,5})\"},c:function(){var e=[],c=[a(\"Y\",1),a(\"m\",2),a(\"d\",3),a(\"h\",4),a(\"i\",5),a(\"s\",6),{c:\"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\\n\"},{c:[\"if(results[8]) {\",\"if(results[8] == 'Z'){\",\"zz = 0;\",\"}else if (results[8].indexOf(':') > -1){\",a(\"P\",8).c,\"}else{\",a(\"O\",8).c,\"}\",\"}\"].join(\"\\n\")}];for(var g=0,d=c.length;g<d;++g){e.push(c[g].c)}return{g:1,c:e.join(\"\"),s:[c[0].s,\"(?:\",\"-\",c[1].s,\"(?:\",\"-\",c[2].s,\"(?:\",\"(?:T| )?\",c[3].s,\":\",c[4].s,\"(?::\",c[5].s,\")?\",\"(?:(?:\\\\.|,)(\\\\d+))?\",\"(Z|(?:[-+]\\\\d{2}(?::)?\\\\d{2}))?\",\")?\",\")?\",\")?\"].join(\"\")}},U:{g:1,c:\"u = parseInt(results[{0}], 10);\\n\",s:\"(-?\\\\d+)\"}}})}());Ext.apply(Date.prototype,{dateFormat:function(a){if(Date.formatFunctions[a]==null){Date.createFormat(a)}return Date.formatFunctions[a].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\\((.*)\\)|([A-Z]{1,4})(?:[\\-+][0-9]{4})?(?: -?\\d+)?)$/,\"$1$2\").replace(/[^A-Z]/g,\"\")},getGMTOffset:function(a){return(this.getTimezoneOffset()>0?\"-\":\"+\")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,\"0\")+(a?\":\":\"\")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,\"0\")},getDayOfYear:function(){var b=0,e=this.clone(),a=this.getMonth(),c;for(c=0,e.setDate(1),e.setMonth(0);c<a;e.setMonth(++c)){b+=e.getDaysInMonth()}return b+this.getDate()-1},getWeekOfYear:function(){var a=86400000,b=7*a;return function(){var d=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/a,c=Math.floor(d/7),e=new Date(c*b).getUTCFullYear();return c-Math.floor(Date.UTC(e,0,7)/b)+1}}(),isLeapYear:function(){var a=this.getFullYear();return !!((a&3)==0&&(a%100||(a%400==0&&a)))},getFirstDayOfMonth:function(){var a=(this.getDay()-(this.getDate()-1))%7;return(a<0)?(a+7):a},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var b=this.getMonth();return b==1&&this.isLeapYear()?29:a[b]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return\"st\";case 2:case 22:return\"nd\";case 3:case 23:return\"rd\";default:return\"th\"}},clone:function(){return new Date(this.getTime())},isDST:function(){return new Date(this.getFullYear(),0,1).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(g){if(g){return this.clone().clearTime()}var b=this.getDate();this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);if(this.getDate()!=b){for(var a=1,e=this.add(Date.HOUR,a);e.getDate()!=b;a++,e=this.add(Date.HOUR,a)){}this.setDate(b);this.setHours(e.getHours())}return this},add:function(b,c){var e=this.clone();if(!b||c===0){return e}switch(b.toLowerCase()){case Date.MILLI:e.setMilliseconds(this.getMilliseconds()+c);break;case Date.SECOND:e.setSeconds(this.getSeconds()+c);break;case Date.MINUTE:e.setMinutes(this.getMinutes()+c);break;case Date.HOUR:e.setHours(this.getHours()+c);break;case Date.DAY:e.setDate(this.getDate()+c);break;case Date.MONTH:var a=this.getDate();if(a>28){a=Math.min(a,this.getFirstDateOfMonth().add(\"mo\",c).getLastDateOfMonth().getDate())}e.setDate(a);e.setMonth(this.getMonth()+c);break;case Date.YEAR:e.setFullYear(this.getFullYear()+c);break}return e},between:function(c,a){var b=this.getTime();return c.getTime()<=b&&b<=a.getTime()}});Date.prototype.format=Date.prototype.dateFormat;if(Ext.isSafari&&(navigator.userAgent.match(/WebKit\\/(\\d+)/)[1]||NaN)<420){Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(a){if(a<=-1){var d=Math.ceil(-a),c=Math.ceil(d/12),b=(d%12)?12-d%12:0;this.setFullYear(this.getFullYear()-c);return this._xMonth(b)}else{return this._xMonth(a)}},setDate:function(a){return this.setTime(this.getTime()-(this.getDate()-a)*86400000)}})}Ext.util.MixedCollection=function(b,a){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents(\"clear\",\"add\",\"replace\",\"remove\",\"sort\");this.allowFunctions=b===true;if(a){this.getKey=a}Ext.util.MixedCollection.superclass.constructor.call(this)};Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:false,add:function(b,c){if(arguments.length==1){c=arguments[0];b=this.getKey(c)}if(typeof b!=\"undefined\"&&b!==null){var a=this.map[b];if(typeof a!=\"undefined\"){return this.replace(b,c)}this.map[b]=c}this.length++;this.items.push(c);this.keys.push(b);this.fireEvent(\"add\",this.length-1,c,b);return c},getKey:function(a){return a.id},replace:function(c,d){if(arguments.length==1){d=arguments[0];c=this.getKey(d)}var a=this.map[c];if(typeof c==\"undefined\"||c===null||typeof a==\"undefined\"){return this.add(c,d)}var b=this.indexOfKey(c);this.items[b]=d;this.map[c]=d;this.fireEvent(\"replace\",c,a,d);return d},addAll:function(e){if(arguments.length>1||Ext.isArray(e)){var b=arguments.length>1?arguments:e;for(var d=0,a=b.length;d<a;d++){this.add(b[d])}}else{for(var c in e){if(this.allowFunctions||typeof e[c]!=\"function\"){this.add(c,e[c])}}}},each:function(e,d){var b=[].concat(this.items);for(var c=0,a=b.length;c<a;c++){if(e.call(d||b[c],b[c],c,a)===false){break}}},eachKey:function(d,c){for(var b=0,a=this.keys.length;b<a;b++){d.call(c||window,this.keys[b],this.items[b],b,a)}},find:function(d,c){for(var b=0,a=this.items.length;b<a;b++){if(d.call(c||window,this.items[b],this.keys[b])){return this.items[b]}}return null},insert:function(a,b,c){if(arguments.length==2){c=arguments[1];b=this.getKey(c)}if(this.containsKey(b)){this.suspendEvents();this.removeKey(b);this.resumeEvents()}if(a>=this.length){return this.add(b,c)}this.length++;this.items.splice(a,0,c);if(typeof b!=\"undefined\"&&b!==null){this.map[b]=c}this.keys.splice(a,0,b);this.fireEvent(\"add\",a,c,b);return c},remove:function(a){return this.removeAt(this.indexOf(a))},removeAt:function(a){if(a<this.length&&a>=0){this.length--;var c=this.items[a];this.items.splice(a,1);var b=this.keys[a];if(typeof b!=\"undefined\"){delete this.map[b]}this.keys.splice(a,1);this.fireEvent(\"remove\",c,b);return c}return false},removeKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:function(a){return this.items.indexOf(a)},indexOfKey:function(a){return this.keys.indexOf(a)},item:function(b){var a=this.map[b],c=a!==undefined?a:(typeof b==\"number\")?this.items[b]:undefined;return typeof c!=\"function\"||this.allowFunctions?c:null},itemAt:function(a){return this.items[a]},key:function(a){return this.map[a]},contains:function(a){return this.indexOf(a)!=-1},containsKey:function(a){return typeof this.map[a]!=\"undefined\"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent(\"clear\")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(l,a,k){var d,e,b=String(a).toUpperCase()==\"DESC\"?-1:1,h=[],m=this.keys,g=this.items;k=k||function(i,c){return i-c};for(d=0,e=g.length;d<e;d++){h[h.length]={key:m[d],value:g[d],index:d}}h.sort(function(i,c){var n=k(i[l],c[l])*b;if(n===0){n=(i.index<c.index?-1:1)}return n});for(d=0,e=h.length;d<e;d++){g[d]=h[d].value;m[d]=h[d].key}this.fireEvent(\"sort\",this)},sort:function(a,b){this._sort(\"value\",a,b)},reorder:function(d){this.suspendEvents();var b=this.items,c=0,g=b.length,a=[],e=[],h;for(h in d){a[d[h]]=b[h]}for(c=0;c<g;c++){if(d[c]==undefined){e.push(b[c])}}for(c=0;c<g;c++){if(a[c]==undefined){a[c]=e.shift()}}this.clear();this.addAll(a);this.resumeEvents();this.fireEvent(\"sort\",this)},keySort:function(a,b){this._sort(\"key\",a,b||function(d,c){var g=String(d).toUpperCase(),e=String(c).toUpperCase();return g>e?1:(g<e?-1:0)})},getRange:function(e,a){var b=this.items;if(b.length<1){return[]}e=e||0;a=Math.min(typeof a==\"undefined\"?this.length-1:a,this.length-1);var c,d=[];if(e<=a){for(c=e;c<=a;c++){d[d.length]=b[c]}}else{for(c=e;c>=a;c--){d[d.length]=b[c]}}return d},filter:function(c,b,d,a){if(Ext.isEmpty(b,false)){return this.clone()}b=this.createValueMatcher(b,d,a);return this.filterBy(function(e){return e&&b.test(e[c])})},filterBy:function(g,e){var h=new Ext.util.MixedCollection();h.getKey=this.getKey;var b=this.keys,d=this.items;for(var c=0,a=d.length;c<a;c++){if(g.call(e||this,d[c],b[c])){h.add(b[c],d[c])}}return h},findIndex:function(c,b,e,d,a){if(Ext.isEmpty(b,false)){return -1}b=this.createValueMatcher(b,d,a);return this.findIndexBy(function(g){return g&&b.test(g[c])},null,e)},findIndexBy:function(g,e,h){var b=this.keys,d=this.items;for(var c=(h||0),a=d.length;c<a;c++){if(g.call(e||this,d[c],b[c])){return c}}return -1},createValueMatcher:function(c,e,a,b){if(!c.exec){var d=Ext.escapeRe;c=String(c);if(e===true){c=d(c)}else{c=\"^\"+d(c);if(b===true){c+=\"$\"}}c=new RegExp(c,a?\"\":\"i\")}return c},clone:function(){var e=new Ext.util.MixedCollection();var b=this.keys,d=this.items;for(var c=0,a=d.length;c<a;c++){e.add(b[c],d[c])}e.getKey=this.getKey;return e}});Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item;Ext.AbstractManager=Ext.extend(Object,{typeName:\"type\",constructor:function(a){Ext.apply(this,a||{});this.all=new Ext.util.MixedCollection();this.types={}},get:function(a){return this.all.get(a)},register:function(a){this.all.add(a)},unregister:function(a){this.all.remove(a)},registerType:function(b,a){this.types[b]=a;a[this.typeName]=b},isRegistered:function(a){return this.types[a]!==undefined},create:function(a,d){var b=a[this.typeName]||a.type||d,c=this.types[b];if(c==undefined){throw new Error(String.format(\"The '{0}' type has not been registered with this manager\",b))}return new c(a)},onAvailable:function(d,c,b){var a=this.all;a.on(\"add\",function(e,g){if(g.id==d){c.call(b||g,g);a.un(\"add\",c,b)}})}});Ext.util.Format=function(){var trimRe=/^\\s+|\\s+$/g,stripTagsRE=/<\\/?[^>]+>/gi,stripScriptsRe=/(?:<script.*?>)((\\n|\\r|.)*?)(?:<\\/script>)/ig,nl2brRe=/\\r?\\n/g;return{ellipsis:function(value,len,word){if(value&&value.length>len){if(word){var vs=value.substr(0,len-2),index=Math.max(vs.lastIndexOf(\" \"),vs.lastIndexOf(\".\"),vs.lastIndexOf(\"!\"),vs.lastIndexOf(\"?\"));if(index==-1||index<(len-15)){return value.substr(0,len-3)+\"...\"}else{return vs.substr(0,index)+\"...\"}}else{return value.substr(0,len-3)+\"...\"}}return value},undef:function(value){return value!==undefined?value:\"\"},defaultValue:function(value,defaultValue){return value!==undefined&&value!==\"\"?value:defaultValue},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,\"&amp;\").replace(/>/g,\"&gt;\").replace(/</g,\"&lt;\").replace(/\"/g,\"&quot;\")},htmlDecode:function(value){return !value?value:String(value).replace(/&gt;/g,\">\").replace(/&lt;/g,\"<\").replace(/&quot;/g,'\"').replace(/&amp;/g,\"&\")},trim:function(value){return String(value).replace(trimRe,\"\")},substr:function(value,start,length){return String(value).substr(start,length)},lowercase:function(value){return String(value).toLowerCase()},uppercase:function(value){return String(value).toUpperCase()},capitalize:function(value){return !value?value:value.charAt(0).toUpperCase()+value.substr(1).toLowerCase()},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);args.unshift(value);return eval(fn).apply(window,args)}else{return eval(fn).call(window,value)}},usMoney:function(v){v=(Math.round((v-0)*100))/100;v=(v==Math.floor(v))?v+\".00\":((v*10==Math.floor(v*10))?v+\"0\":v);v=String(v);var ps=v.split(\".\"),whole=ps[0],sub=ps[1]?\".\"+ps[1]:\".00\",r=/(\\d+)(\\d{3})/;while(r.test(whole)){whole=whole.replace(r,\"$1,$2\")}v=whole+sub;if(v.charAt(0)==\"-\"){return\"-$\"+v.substr(1)}return\"$\"+v},date:function(v,format){if(!v){return\"\"}if(!Ext.isDate(v)){v=new Date(Date.parse(v))}return v.dateFormat(format||\"m/d/Y\")},dateRenderer:function(format){return function(v){return Ext.util.Format.date(v,format)}},stripTags:function(v){return !v?v:String(v).replace(stripTagsRE,\"\")},stripScripts:function(v){return !v?v:String(v).replace(stripScriptsRe,\"\")},fileSize:function(size){if(size<1024){return size+\" bytes\"}else{if(size<1048576){return(Math.round(((size*10)/1024))/10)+\" KB\"}else{return(Math.round(((size*10)/1048576))/10)+\" MB\"}}},math:function(){var fns={};return function(v,a){if(!fns[a]){fns[a]=new Function(\"v\",\"return v \"+a+\";\")}return fns[a](v)}}(),round:function(value,precision){var result=Number(value);if(typeof precision==\"number\"){precision=Math.pow(10,precision);result=Math.round(value*precision)/precision}return result},number:function(v,format){if(!format){return v}v=Ext.num(v,NaN);if(isNaN(v)){return\"\"}var comma=\",\",dec=\".\",i18n=false,neg=v<0;v=Math.abs(v);if(format.substr(format.length-2)==\"/i\"){format=format.substr(0,format.length-2);i18n=true;comma=\".\";dec=\",\"}var hasComma=format.indexOf(comma)!=-1,psplit=(i18n?format.replace(/[^\\d\\,]/g,\"\"):format.replace(/[^\\d\\.]/g,\"\")).split(dec);if(1<psplit.length){v=v.toFixed(psplit[1].length)}else{if(2<psplit.length){throw (\"NumberFormatException: invalid format, formats should have no more than 1 period: \"+format)}else{v=v.toFixed(0)}}var fnum=v.toString();psplit=fnum.split(\".\");if(hasComma){var cnum=psplit[0],parr=[],j=cnum.length,m=Math.floor(j/3),n=cnum.length%3||3,i;for(i=0;i<j;i+=n){if(i!=0){n=3}parr[parr.length]=cnum.substr(i,n);m-=1}fnum=parr.join(comma);if(psplit[1]){fnum+=dec+psplit[1]}}else{if(psplit[1]){fnum=psplit[0]+dec+psplit[1]}}return(neg?\"-\":\"\")+format.replace(/[\\d,?\\.?]+/,fnum)},numberRenderer:function(format){return function(v){return Ext.util.Format.number(v,format)}},plural:function(v,s,p){return v+\" \"+(v==1?s:(p?p:s+\"s\"))},nl2br:function(v){return Ext.isEmpty(v)?\"\":v.replace(nl2brRe,\"<br/>\")}}}();Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var z=this,k=z.html,r=/<tpl\\b[^>]*>((?:(?=([^<]+))\\2|<(?!tpl\\b[^>]*>))*?)<\\/tpl>/,d=/^<tpl\\b[^>]*?for=\"(.*?)\"/,w=/^<tpl\\b[^>]*?if=\"(.*?)\"/,y=/^<tpl\\b[^>]*?exec=\"(.*?)\"/,t,q=0,l=[],p=\"values\",x=\"parent\",n=\"xindex\",o=\"xcount\",e=\"return \",c=\"with(values){ \";k=[\"<tpl>\",k,\"</tpl>\"].join(\"\");while((t=k.match(r))){var b=t[0].match(d),a=t[0].match(w),B=t[0].match(y),g=null,h=null,u=null,A=b&&b[1]?b[1]:\"\";if(a){g=a&&a[1]?a[1]:null;if(g){h=new Function(p,x,n,o,c+e+(Ext.util.Format.htmlDecode(g))+\"; }\")}}if(B){g=B&&B[1]?B[1]:null;if(g){u=new Function(p,x,n,o,c+(Ext.util.Format.htmlDecode(g))+\"; }\")}}if(A){switch(A){case\".\":A=new Function(p,x,c+e+p+\"; }\");break;case\"..\":A=new Function(p,x,c+e+x+\"; }\");break;default:A=new Function(p,x,c+e+A+\"; }\")}}l.push({id:q,target:A,exec:u,test:h,body:t[1]||\"\"});k=k.replace(t[0],\"{xtpl\"+q+\"}\");++q}for(var v=l.length-1;v>=0;--v){z.compileTpl(l[v])}z.master=l[l.length-1];z.tpls=l};Ext.extend(Ext.XTemplate,Ext.Template,{re:/\\{([\\w-\\.\\#]+)(?:\\:([\\w\\.]*)(?:\\((.*?)?\\))?)?(\\s?[\\+\\-\\*\\\\]\\s?[\\d\\.\\+\\-\\*\\\\\\(\\)]+)?\\}/g,codeRe:/\\{\\[((?:\\\\\\]|.|\\n)*?)\\]\\}/g,applySubTemplate:function(a,l,k,d,c){var h=this,g,n=h.tpls[a],m,b=[];if((n.test&&!n.test.call(h,l,k,d,c))||(n.exec&&n.exec.call(h,l,k,d,c))){return\"\"}m=n.target?n.target.call(h,l,k):l;g=m.length;k=n.target?l:k;if(n.target&&Ext.isArray(m)){for(var e=0,g=m.length;e<g;e++){b[b.length]=n.compiled.call(h,m[e],k,e+1,g)}return b.join(\"\")}return n.compiled.call(h,m,k,d,c)},compileTpl:function(tpl){var fm=Ext.util.Format,useF=this.disableFormats!==true,sep=Ext.isGecko?\"+\":\",\",body;function fn(m,name,format,args,math){if(name.substr(0,4)==\"xtpl\"){return\"'\"+sep+\"this.applySubTemplate(\"+name.substr(4)+\", values, parent, xindex, xcount)\"+sep+\"'\"}var v;if(name===\".\"){v=\"values\"}else{if(name===\"#\"){v=\"xindex\"}else{if(name.indexOf(\".\")!=-1){v=name}else{v=\"values['\"+name+\"']\"}}}if(math){v=\"(\"+v+math+\")\"}if(format&&useF){args=args?\",\"+args:\"\";if(format.substr(0,5)!=\"this.\"){format=\"fm.\"+format+\"(\"}else{format='this.call(\"'+format.substr(5)+'\", ';args=\", values\"}}else{args=\"\";format=\"(\"+v+\" === undefined ? '' : \"}return\"'\"+sep+format+v+args+\")\"+sep+\"'\"}function codeFn(m,code){return\"'\"+sep+\"(\"+code.replace(/\\\\'/g,\"'\")+\")\"+sep+\"'\"}if(Ext.isGecko){body=\"tpl.compiled = function(values, parent, xindex, xcount){ return '\"+tpl.body.replace(/(\\r\\n|\\n)/g,\"\\\\n\").replace(/'/g,\"\\\\'\").replace(this.re,fn).replace(this.codeRe,codeFn)+\"';};\"}else{body=[\"tpl.compiled = function(values, parent, xindex, xcount){ return ['\"];body.push(tpl.body.replace(/(\\r\\n|\\n)/g,\"\\\\n\").replace(/'/g,\"\\\\'\").replace(this.re,fn).replace(this.codeRe,codeFn));body.push(\"'].join('');};\");body=body.join(\"\")}eval(body);return this},applyTemplate:function(a){return this.master.compiled.call(this,a,{},1,1)},compile:function(){return this}});Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate;Ext.XTemplate.from=function(a){a=Ext.getDom(a);return new Ext.XTemplate(a.value||a.innerHTML)};Ext.util.CSS=function(){var d=null;var c=document;var b=/(-[a-z])/gi;var a=function(e,g){return g.charAt(1).toUpperCase()};return{createStyleSheet:function(i,m){var h;var g=c.getElementsByTagName(\"head\")[0];var l=c.createElement(\"style\");l.setAttribute(\"type\",\"text/css\");if(m){l.setAttribute(\"id\",m)}if(Ext.isIE){g.appendChild(l);h=l.styleSheet;h.cssText=i}else{try{l.appendChild(c.createTextNode(i))}catch(k){l.cssText=i}g.appendChild(l);h=l.styleSheet?l.styleSheet:(l.sheet||c.styleSheets[c.styleSheets.length-1])}this.cacheStyleSheet(h);return h},removeStyleSheet:function(g){var e=c.getElementById(g);if(e){e.parentNode.removeChild(e)}},swapStyleSheet:function(h,e){this.removeStyleSheet(h);var g=c.createElement(\"link\");g.setAttribute(\"rel\",\"stylesheet\");g.setAttribute(\"type\",\"text/css\");g.setAttribute(\"id\",h);g.setAttribute(\"href\",e);c.getElementsByTagName(\"head\")[0].appendChild(g)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(h){if(!d){d={}}try{var k=h.cssRules||h.rules;for(var g=k.length-1;g>=0;--g){d[k[g].selectorText.toLowerCase()]=k[g]}}catch(i){}},getRules:function(h){if(d===null||h){d={};var l=c.styleSheets;for(var k=0,g=l.length;k<g;k++){try{this.cacheStyleSheet(l[k])}catch(m){}}}return d},getRule:function(e,h){var g=this.getRules(h);if(!Ext.isArray(e)){return g[e.toLowerCase()]}for(var k=0;k<e.length;k++){if(g[e[k]]){return g[e[k].toLowerCase()]}}return null},updateRule:function(e,k,h){if(!Ext.isArray(e)){var l=this.getRule(e);if(l){l.style[k.replace(b,a)]=h;return true}}else{for(var g=0;g<e.length;g++){if(this.updateRule(e[g],k,h)){return true}}}return false}}}();Ext.util.ClickRepeater=Ext.extend(Ext.util.Observable,{constructor:function(b,a){this.el=Ext.get(b);this.el.unselectable();Ext.apply(this,a);this.addEvents(\"mousedown\",\"click\",\"mouseup\");if(!this.disabled){this.disabled=true;this.enable()}if(this.handler){this.on(\"click\",this.handler,this.scope||this)}Ext.util.ClickRepeater.superclass.constructor.call(this)},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on(\"mousedown\",this.handleMouseDown,this);if(Ext.isIE){this.el.on(\"dblclick\",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on(\"click\",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}Ext.getDoc().un(\"mouseup\",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(a){this[a?\"disable\":\"enable\"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.purgeListeners()},handleDblClick:function(a){clearTimeout(this.timer);this.el.blur();this.fireEvent(\"mousedown\",this,a);this.fireEvent(\"click\",this,a)},handleMouseDown:function(a){clearTimeout(this.timer);this.el.blur();if(this.pressClass){this.el.addClass(this.pressClass)}this.mousedownTime=new Date();Ext.getDoc().on(\"mouseup\",this.handleMouseUp,this);this.el.on(\"mouseout\",this.handleMouseOut,this);this.fireEvent(\"mousedown\",this,a);this.fireEvent(\"click\",this,a);if(this.accelerate){this.delay=400}this.timer=this.click.defer(this.delay||this.interval,this,[a])},click:function(a){this.fireEvent(\"click\",this,a);this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(e,a,h,g){return(e==g)?a+h:h*(-Math.pow(2,-10*e/g)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}this.el.on(\"mouseover\",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un(\"mouseover\",this.handleMouseReturn,this);if(this.pressClass){this.el.addClass(this.pressClass)}this.click()},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un(\"mouseover\",this.handleMouseReturn,this);this.el.un(\"mouseout\",this.handleMouseOut,this);Ext.getDoc().un(\"mouseup\",this.handleMouseUp,this);this.el.removeClass(this.pressClass);this.fireEvent(\"mouseup\",this,a)}});Ext.KeyNav=function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(!this.disabled){this.disabled=true;this.enable()}};Ext.KeyNav.prototype={disabled:false,defaultEventAction:\"stopEvent\",forceKeyDown:false,relay:function(c){var a=c.getKey(),b=this.keyToHandler[a];if(b&&this[b]){if(this.doRelay(c,this[b],b)!==true){c[this.defaultEventAction]()}}},doRelay:function(c,b,a){return b.call(this.scope||this,c,a)},enter:false,left:false,right:false,up:false,down:false,tab:false,esc:false,pageUp:false,pageDown:false,del:false,home:false,end:false,keyToHandler:{37:\"left\",39:\"right\",38:\"up\",40:\"down\",33:\"pageUp\",34:\"pageDown\",46:\"del\",36:\"home\",35:\"end\",13:\"enter\",27:\"esc\",9:\"tab\"},stopKeyUp:function(b){var a=b.getKey();if(a>=37&&a<=40){b.stopEvent()}},destroy:function(){this.disable()},enable:function(){if(this.disabled){if(Ext.isSafari2){this.el.on(\"keyup\",this.stopKeyUp,this)}this.el.on(this.isKeydown()?\"keydown\":\"keypress\",this.relay,this);this.disabled=false}},disable:function(){if(!this.disabled){if(Ext.isSafari2){this.el.un(\"keyup\",this.stopKeyUp,this)}this.el.un(this.isKeydown()?\"keydown\":\"keypress\",this.relay,this);this.disabled=true}},setDisabled:function(a){this[a?\"disable\":\"enable\"]()},isKeydown:function(){return this.forceKeyDown||Ext.EventManager.useKeydown}};Ext.KeyMap=function(c,b,a){this.el=Ext.get(c);this.eventName=a||\"keydown\";this.bindings=[];if(b){this.addBinding(b)}this.enable()};Ext.KeyMap.prototype={stopEvent:false,addBinding:function(b){if(Ext.isArray(b)){Ext.each(b,function(m){this.addBinding(m)},this);return}var k=b.key,g=b.fn||b.handler,l=b.scope;if(b.stopEvent){this.stopEvent=b.stopEvent}if(typeof k==\"string\"){var h=[];var e=k.toUpperCase();for(var c=0,d=e.length;c<d;c++){h.push(e.charCodeAt(c))}k=h}var a=Ext.isArray(k);var i=function(p){if(this.checkModifiers(b,p)){var n=p.getKey();if(a){for(var o=0,m=k.length;o<m;o++){if(k[o]==n){if(this.stopEvent){p.stopEvent()}g.call(l||window,n,p);return}}}else{if(n==k){if(this.stopEvent){p.stopEvent()}g.call(l||window,n,p)}}}};this.bindings.push(i)},checkModifiers:function(b,h){var k,d,g=[\"shift\",\"ctrl\",\"alt\"];for(var c=0,a=g.length;c<a;++c){d=g[c];k=b[d];if(!(k===undefined||(k===h[d+\"Key\"]))){return false}}return true},on:function(b,d,c){var h,a,e,g;if(typeof b==\"object\"&&!Ext.isArray(b)){h=b.key;a=b.shift;e=b.ctrl;g=b.alt}else{h=b}this.addBinding({key:h,shift:a,ctrl:e,alt:g,fn:d,scope:c})},handleKeyDown:function(g){if(this.enabled){var c=this.bindings;for(var d=0,a=c.length;d<a;d++){c[d].call(this,g)}}},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.handleKeyDown,this);this.enabled=true}},disable:function(){if(this.enabled){this.el.removeListener(this.eventName,this.handleKeyDown,this);this.enabled=false}},setDisabled:function(a){this[a?\"disable\":\"enable\"]()}};Ext.util.TextMetrics=function(){var a;return{measure:function(b,c,d){if(!a){a=Ext.util.TextMetrics.Instance(b,d)}a.bind(b);a.setFixedWidth(d||\"auto\");return a.getSize(c)},createInstance:function(b,c){return Ext.util.TextMetrics.Instance(b,c)}}}();Ext.util.TextMetrics.Instance=function(b,d){var c=new Ext.Element(document.createElement(\"div\"));document.body.appendChild(c.dom);c.position(\"absolute\");c.setLeftTop(-1000,-1000);c.hide();if(d){c.setWidth(d)}var a={getSize:function(g){c.update(g);var e=c.getSize();c.update(\"\");return e},bind:function(e){c.setStyle(Ext.fly(e).getStyles(\"font-size\",\"font-style\",\"font-weight\",\"font-family\",\"line-height\",\"text-transform\",\"letter-spacing\"))},setFixedWidth:function(e){c.setWidth(e)},getWidth:function(e){c.dom.style.width=\"auto\";return this.getSize(e).width},getHeight:function(e){return this.getSize(e).height}};a.bind(b);return a};Ext.Element.addMethods({getTextWidth:function(c,b,a){return(Ext.util.TextMetrics.measure(this.dom,Ext.value(c,this.dom.innerHTML,true)).width).constrain(b||0,a||1000000)}});Ext.util.Cookies={set:function(c,e){var a=arguments;var i=arguments.length;var b=(i>2)?a[2]:null;var h=(i>3)?a[3]:\"/\";var d=(i>4)?a[4]:null;var g=(i>5)?a[5]:false;document.cookie=c+\"=\"+escape(e)+((b===null)?\"\":(\"; expires=\"+b.toGMTString()))+((h===null)?\"\":(\"; path=\"+h))+((d===null)?\"\":(\"; domain=\"+d))+((g===true)?\"; secure\":\"\")},get:function(d){var b=d+\"=\";var g=b.length;var a=document.cookie.length;var e=0;var c=0;while(e<a){c=e+g;if(document.cookie.substring(e,c)==b){return Ext.util.Cookies.getCookieVal(c)}e=document.cookie.indexOf(\" \",e)+1;if(e===0){break}}return null},clear:function(a){if(Ext.util.Cookies.get(a)){document.cookie=a+\"=; expires=Thu, 01-Jan-70 00:00:01 GMT\"}},getCookieVal:function(b){var a=document.cookie.indexOf(\";\",b);if(a==-1){a=document.cookie.length}return unescape(document.cookie.substring(b,a))}};Ext.handleError=function(a){throw a};Ext.Error=function(a){this.message=(this.lang[a])?this.lang[a]:a};Ext.Error.prototype=new Error();Ext.apply(Ext.Error.prototype,{lang:{},name:\"Ext.Error\",getName:function(){return this.name},getMessage:function(){return this.message},toJson:function(){return Ext.encode(this)}});Ext.ComponentMgr=function(){var c=new Ext.util.MixedCollection();var b={};var a={};return{register:function(d){c.add(d)},unregister:function(d){c.remove(d)},get:function(d){return c.get(d)},onAvailable:function(g,e,d){c.on(\"add\",function(h,i){if(i.id==g){e.call(d||i,i);c.un(\"add\",e,d)}})},all:c,types:b,ptypes:a,isRegistered:function(d){return b[d]!==undefined},isPluginRegistered:function(d){return a[d]!==undefined},registerType:function(e,d){b[e]=d;d.xtype=e},create:function(d,e){return d.render?d:new b[d.xtype||e](d)},registerPlugin:function(e,d){a[e]=d;d.ptype=e},createPlugin:function(e,g){var d=a[e.ptype||g];if(d.init){return d}else{return new d(e)}}}}();Ext.reg=Ext.ComponentMgr.registerType;Ext.preg=Ext.ComponentMgr.registerPlugin;Ext.create=Ext.ComponentMgr.create;Ext.Component=function(b){b=b||{};if(b.initialConfig){if(b.isAction){this.baseAction=b}b=b.initialConfig}else{if(b.tagName||b.dom||Ext.isString(b)){b={applyTo:b,id:b.id||b}}}this.initialConfig=b;Ext.apply(this,b);this.addEvents(\"added\",\"disable\",\"enable\",\"beforeshow\",\"show\",\"beforehide\",\"hide\",\"removed\",\"beforerender\",\"render\",\"afterrender\",\"beforedestroy\",\"destroy\",\"beforestaterestore\",\"staterestore\",\"beforestatesave\",\"statesave\");this.getId();Ext.ComponentMgr.register(this);Ext.Component.superclass.constructor.call(this);if(this.baseAction){this.baseAction.addComponent(this)}this.initComponent();if(this.plugins){if(Ext.isArray(this.plugins)){for(var c=0,a=this.plugins.length;c<a;c++){this.plugins[c]=this.initPlugin(this.plugins[c])}}else{this.plugins=this.initPlugin(this.plugins)}}if(this.stateful!==false){this.initState()}if(this.applyTo){this.applyToMarkup(this.applyTo);delete this.applyTo}else{if(this.renderTo){this.render(this.renderTo);delete this.renderTo}}};Ext.Component.AUTO_ID=1000;Ext.extend(Ext.Component,Ext.util.Observable,{disabled:false,hidden:false,autoEl:\"div\",disabledClass:\"x-item-disabled\",allowDomMove:true,autoShow:false,hideMode:\"display\",hideParent:false,rendered:false,tplWriteMode:\"overwrite\",bubbleEvents:[],ctype:\"Ext.Component\",actionMode:\"el\",getActionEl:function(){return this[this.actionMode]},initPlugin:function(a){if(a.ptype&&!Ext.isFunction(a.init)){a=Ext.ComponentMgr.createPlugin(a)}else{if(Ext.isString(a)){a=Ext.ComponentMgr.createPlugin({ptype:a})}}a.init(this);return a},initComponent:function(){if(this.listeners){this.on(this.listeners);delete this.listeners}this.enableBubble(this.bubbleEvents)},render:function(b,a){if(!this.rendered&&this.fireEvent(\"beforerender\",this)!==false){if(!b&&this.el){this.el=Ext.get(this.el);b=this.el.dom.parentNode;this.allowDomMove=false}this.container=Ext.get(b);if(this.ctCls){this.container.addClass(this.ctCls)}this.rendered=true;if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}this.onRender(this.container,a||null);if(this.autoShow){this.el.removeClass([\"x-hidden\",\"x-hide-\"+this.hideMode])}if(this.cls){this.el.addClass(this.cls);delete this.cls}if(this.style){this.el.applyStyles(this.style);delete this.style}if(this.overCls){this.el.addClassOnOver(this.overCls)}this.fireEvent(\"render\",this);var c=this.getContentTarget();if(this.html){c.update(Ext.DomHelper.markup(this.html));delete this.html}if(this.contentEl){var d=Ext.getDom(this.contentEl);Ext.fly(d).removeClass([\"x-hidden\",\"x-hide-display\"]);c.appendChild(d)}if(this.tpl){if(!this.tpl.compile){this.tpl=new Ext.XTemplate(this.tpl)}if(this.data){this.tpl[this.tplWriteMode](c,this.data);delete this.data}}this.afterRender(this.container);if(this.hidden){this.doHide()}if(this.disabled){this.disable(true)}if(this.stateful!==false){this.initStateEvents()}this.fireEvent(\"afterrender\",this)}return this},update:function(b,d,a){var c=this.getContentTarget();if(this.tpl&&typeof b!==\"string\"){this.tpl[this.tplWriteMode](c,b||{})}else{var e=Ext.isObject(b)?Ext.DomHelper.markup(b):b;c.update(e,d,a)}},onAdded:function(a,b){this.ownerCt=a;this.initRef();this.fireEvent(\"added\",this,a,b)},onRemoved:function(){this.removeRef();this.fireEvent(\"removed\",this,this.ownerCt);delete this.ownerCt},initRef:function(){if(this.ref&&!this.refOwner){var d=this.ref.split(\"/\"),c=d.length,b=0,a=this;while(a&&b<c){a=a.ownerCt;++b}if(a){a[this.refName=d[--b]]=this;this.refOwner=a}}},removeRef:function(){if(this.refOwner&&this.refName){delete this.refOwner[this.refName];delete this.refOwner}},initState:function(){if(Ext.state.Manager){var b=this.getStateId();if(b){var a=Ext.state.Manager.get(b);if(a){if(this.fireEvent(\"beforestaterestore\",this,a)!==false){this.applyState(Ext.apply({},a));this.fireEvent(\"staterestore\",this,a)}}}}},getStateId:function(){return this.stateId||((/^(ext-comp-|ext-gen)/).test(String(this.id))?null:this.id)},initStateEvents:function(){if(this.stateEvents){for(var a=0,b;b=this.stateEvents[a];a++){this.on(b,this.saveState,this,{delay:100})}}},applyState:function(a){if(a){Ext.apply(this,a)}},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==false){var b=this.getStateId();if(b){var a=this.getState();if(this.fireEvent(\"beforestatesave\",this,a)!==false){Ext.state.Manager.set(b,a);this.fireEvent(\"statesave\",this,a)}}}},applyToMarkup:function(a){this.allowDomMove=false;this.el=Ext.get(a);this.render(this.el.dom.parentNode)},addClass:function(a){if(this.el){this.el.addClass(a)}else{this.cls=this.cls?this.cls+\" \"+a:a}return this},removeClass:function(a){if(this.el){this.el.removeClass(a)}else{if(this.cls){this.cls=this.cls.split(\" \").remove(a).join(\" \")}}return this},onRender:function(b,a){if(!this.el&&this.autoEl){if(Ext.isString(this.autoEl)){this.el=document.createElement(this.autoEl)}else{var c=document.createElement(\"div\");Ext.DomHelper.overwrite(c,this.autoEl);this.el=c.firstChild}if(!this.el.id){this.el.id=this.getId()}}if(this.el){this.el=Ext.get(this.el);if(this.allowDomMove!==false){b.dom.insertBefore(this.el.dom,a);if(c){Ext.removeNode(c);c=null}}}},getAutoCreate:function(){var a=Ext.isObject(this.autoCreate)?this.autoCreate:Ext.apply({},this.defaultAutoCreate);if(this.id&&!a.id){a.id=this.id}return a},afterRender:Ext.emptyFn,destroy:function(){if(!this.isDestroyed){if(this.fireEvent(\"beforedestroy\",this)!==false){this.destroying=true;this.beforeDestroy();if(this.ownerCt&&this.ownerCt.remove){this.ownerCt.remove(this,false)}if(this.rendered){this.el.remove();if(this.actionMode==\"container\"||this.removeMode==\"container\"){this.container.remove()}}if(this.focusTask&&this.focusTask.cancel){this.focusTask.cancel()}this.onDestroy();Ext.ComponentMgr.unregister(this);this.fireEvent(\"destroy\",this);this.purgeListeners();this.destroying=false;this.isDestroyed=true}}},deleteMembers:function(){var b=arguments;for(var c=0,a=b.length;c<a;++c){delete this[b[c]]}},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getContentTarget:function(){return this.el},getId:function(){return this.id||(this.id=\"ext-comp-\"+(++Ext.Component.AUTO_ID))},getItemId:function(){return this.itemId||this.getId()},focus:function(b,a){if(a){this.focusTask=new Ext.util.DelayedTask(this.focus,this,[b,false]);this.focusTask.delay(Ext.isNumber(a)?a:10);return this}if(this.rendered&&!this.isDestroyed){this.el.focus();if(b===true){this.el.dom.select()}}return this},blur:function(){if(this.rendered){this.el.blur()}return this},disable:function(a){if(this.rendered){this.onDisable()}this.disabled=true;if(a!==true){this.fireEvent(\"disable\",this)}return this},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.el.dom.disabled=true},enable:function(){if(this.rendered){this.onEnable()}this.disabled=false;this.fireEvent(\"enable\",this);return this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.el.dom.disabled=false},setDisabled:function(a){return this[a?\"disable\":\"enable\"]()},show:function(){if(this.fireEvent(\"beforeshow\",this)!==false){this.hidden=false;if(this.autoRender){this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender)}if(this.rendered){this.onShow()}this.fireEvent(\"show\",this)}return this},onShow:function(){this.getVisibilityEl().removeClass(\"x-hide-\"+this.hideMode)},hide:function(){if(this.fireEvent(\"beforehide\",this)!==false){this.doHide();this.fireEvent(\"hide\",this)}return this},doHide:function(){this.hidden=true;if(this.rendered){this.onHide()}},onHide:function(){this.getVisibilityEl().addClass(\"x-hide-\"+this.hideMode)},getVisibilityEl:function(){return this.hideParent?this.container:this.getActionEl()},setVisible:function(a){return this[a?\"show\":\"hide\"]()},isVisible:function(){return this.rendered&&this.getVisibilityEl().isVisible()},cloneConfig:function(b){b=b||{};var c=b.id||Ext.id();var a=Ext.applyIf(b,this.initialConfig);a.id=c;return new this.constructor(a)},getXType:function(){return this.constructor.xtype},isXType:function(b,a){if(Ext.isFunction(b)){b=b.xtype}else{if(Ext.isObject(b)){b=b.constructor.xtype}}return !a?(\"/\"+this.getXTypes()+\"/\").indexOf(\"/\"+b+\"/\")!=-1:this.constructor.xtype==b},getXTypes:function(){var a=this.constructor;if(!a.xtypes){var d=[],b=this;while(b&&b.constructor.xtype){d.unshift(b.constructor.xtype);b=b.constructor.superclass}a.xtypeChain=d;a.xtypes=d.join(\"/\")}return a.xtypes},findParentBy:function(a){for(var b=this.ownerCt;(b!=null)&&!a(b,this);b=b.ownerCt){}return b||null},findParentByType:function(b,a){return this.findParentBy(function(d){return d.isXType(b,a)})},bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.ownerCt}return this},getPositionEl:function(){return this.positionEl||this.el},purgeListeners:function(){Ext.Component.superclass.purgeListeners.call(this);if(this.mons){this.on(\"beforedestroy\",this.clearMons,this,{single:true})}},clearMons:function(){Ext.each(this.mons,function(a){a.item.un(a.ename,a.fn,a.scope)},this);this.mons=[]},createMons:function(){if(!this.mons){this.mons=[];this.on(\"beforedestroy\",this.clearMons,this,{single:true})}},mon:function(g,b,d,c,a){this.createMons();if(Ext.isObject(b)){var k=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/;var i=b;for(var h in i){if(k.test(h)){continue}if(Ext.isFunction(i[h])){this.mons.push({item:g,ename:h,fn:i[h],scope:i.scope});g.on(h,i[h],i.scope,i)}else{this.mons.push({item:g,ename:h,fn:i[h],scope:i.scope});g.on(h,i[h])}}return}this.mons.push({item:g,ename:b,fn:d,scope:c});g.on(b,d,c,a)},mun:function(h,c,g,e){var k,d;this.createMons();for(var b=0,a=this.mons.length;b<a;++b){d=this.mons[b];if(h===d.item&&c==d.ename&&g===d.fn&&e===d.scope){this.mons.splice(b,1);h.un(c,g,e);k=true;break}}return k},nextSibling:function(){if(this.ownerCt){var a=this.ownerCt.items.indexOf(this);if(a!=-1&&a+1<this.ownerCt.items.getCount()){return this.ownerCt.items.itemAt(a+1)}}return null},previousSibling:function(){if(this.ownerCt){var a=this.ownerCt.items.indexOf(this);if(a>0){return this.ownerCt.items.itemAt(a-1)}}return null},getBubbleTarget:function(){return this.ownerCt}});Ext.reg(\"component\",Ext.Component);Ext.Action=Ext.extend(Object,{constructor:function(a){this.initialConfig=a;this.itemId=a.itemId=(a.itemId||a.id||Ext.id());this.items=[]},isAction:true,setText:function(a){this.initialConfig.text=a;this.callEach(\"setText\",[a])},getText:function(){return this.initialConfig.text},setIconClass:function(a){this.initialConfig.iconCls=a;this.callEach(\"setIconClass\",[a])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(a){this.initialConfig.disabled=a;this.callEach(\"setDisabled\",[a])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(a){this.initialConfig.hidden=a;this.callEach(\"setVisible\",[!a])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(b,a){this.initialConfig.handler=b;this.initialConfig.scope=a;this.callEach(\"setHandler\",[b,a])},each:function(b,a){Ext.each(this.items,b,a)},callEach:function(e,b){var d=this.items;for(var c=0,a=d.length;c<a;c++){d[c][e].apply(d[c],b)}},addComponent:function(a){this.items.push(a);a.on(\"destroy\",this.removeComponent,this)},removeComponent:function(a){this.items.remove(a)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}});(function(){Ext.Layer=function(d,c){d=d||{};var e=Ext.DomHelper,h=d.parentEl,g=h?Ext.getDom(h):document.body;if(c){this.dom=Ext.getDom(c)}if(!this.dom){var i=d.dh||{tag:\"div\",cls:\"x-layer\"};this.dom=e.append(g,i)}if(d.cls){this.addClass(d.cls)}this.constrain=d.constrain!==false;this.setVisibilityMode(Ext.Element.VISIBILITY);if(d.id){this.id=this.dom.id=d.id}else{this.id=Ext.id(this.dom)}this.zindex=d.zindex||this.getZIndex();this.position(\"absolute\",this.zindex);if(d.shadow){this.shadowOffset=d.shadowOffset||4;this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:d.shadow})}else{this.shadowOffset=0}this.useShim=d.shim!==false&&Ext.useShims;this.useDisplay=d.useDisplay;this.hide()};var a=Ext.Element.prototype;var b=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle(\"z-index\"),10)||11000},getShim:function(){if(!this.useShim){return null}if(this.shim){return this.shim}var d=b.shift();if(!d){d=this.createShim();d.enableDisplayMode(\"block\");d.dom.style.display=\"none\";d.dom.style.visibility=\"visible\"}var c=this.dom.parentNode;if(d.dom.parentNode!=c){c.insertBefore(d.dom,this.dom)}d.setStyle(\"z-index\",this.getZIndex()-2);this.shim=d;return d},hideShim:function(){if(this.shim){this.shim.setDisplayed(false);b.push(this.shim);delete this.shim}},disableShadow:function(){if(this.shadow){this.shadowDisabled=true;this.shadow.hide();this.lastShadowOffset=this.shadowOffset;this.shadowOffset=0}},enableShadow:function(c){if(this.shadow){this.shadowDisabled=false;this.shadowOffset=this.lastShadowOffset;delete this.lastShadowOffset;if(c){this.sync(true)}}},sync:function(d){var o=this.shadow;if(!this.updating&&this.isVisible()&&(o||this.useShim)){var i=this.getShim(),n=this.getWidth(),k=this.getHeight(),e=this.getLeft(true),p=this.getTop(true);if(o&&!this.shadowDisabled){if(d&&!o.isVisible()){o.show(this)}else{o.realign(e,p,n,k)}if(i){if(d){i.show()}var m=o.el.getXY(),g=i.dom.style,c=o.el.getSize();g.left=(m[0])+\"px\";g.top=(m[1])+\"px\";g.width=(c.width)+\"px\";g.height=(c.height)+\"px\"}}else{if(i){if(d){i.show()}i.setSize(n,k);i.setLeftTop(e,p)}}}},destroy:function(){this.hideShim();if(this.shadow){this.shadow.hide()}this.removeAllListeners();Ext.removeNode(this.dom);delete this.dom},remove:function(){this.destroy()},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(c){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var k=Ext.lib.Dom.getViewWidth(),d=Ext.lib.Dom.getViewHeight();var p=Ext.getDoc().getScroll();var o=this.getXY();var l=o[0],i=o[1];var c=this.shadowOffset;var m=this.dom.offsetWidth+c,e=this.dom.offsetHeight+c;var g=false;if((l+m)>k+p.left){l=k-m-c;g=true}if((i+e)>d+p.top){i=d-e-c;g=true}if(l<p.left){l=p.left;g=true}if(i<p.top){i=p.top;g=true}if(g){if(this.avoidY){var n=this.avoidY;if(i<=n&&(i+e)>=n){i=n-e-5}}o=[l,i];this.storeXY(o);a.setXY.call(this,o);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},isVisible:function(){return this.visible},showAction:function(){this.visible=true;if(this.useDisplay===true){this.setDisplayed(\"\")}else{if(this.lastXY){a.setXY.call(this,this.lastXY)}else{if(this.lastLT){a.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])}}}},hideAction:function(){this.visible=false;if(this.useDisplay===true){this.setDisplayed(false)}else{this.setLeftTop(-10000,-10000)}},setVisible:function(i,h,l,m,k){if(i){this.showAction()}if(h&&i){var g=function(){this.sync(true);if(m){m()}}.createDelegate(this);a.setVisible.call(this,true,true,l,g,k)}else{if(!i){this.hideUnders(true)}var g=m;if(h){g=function(){this.hideAction();if(m){m()}}.createDelegate(this)}a.setVisible.call(this,i,h,l,g,k);if(i){this.sync(true)}else{if(!h){this.hideAction()}}}return this},storeXY:function(c){delete this.lastLT;this.lastXY=c},storeLeftTop:function(d,c){delete this.lastXY;this.lastLT=[d,c]},beforeFx:function(){this.beforeAction();return Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(c){this.storeLeftTop(c,this.getTop(true));a.setLeft.apply(this,arguments);this.sync();return this},setTop:function(c){this.storeLeftTop(this.getLeft(true),c);a.setTop.apply(this,arguments);this.sync();return this},setLeftTop:function(d,c){this.storeLeftTop(d,c);a.setLeftTop.apply(this,arguments);this.sync();return this},setXY:function(k,h,l,m,i){this.fixDisplay();this.beforeAction();this.storeXY(k);var g=this.createCB(m);a.setXY.call(this,k,h,l,g,i);if(!h){g()}return this},createCB:function(e){var d=this;return function(){d.constrainXY();d.sync(true);if(e){e()}}},setX:function(g,h,k,l,i){this.setXY([g,this.getY()],h,k,l,i);return this},setY:function(l,g,i,k,h){this.setXY([this.getX(),l],g,i,k,h);return this},setSize:function(k,l,i,n,o,m){this.beforeAction();var g=this.createCB(o);a.setSize.call(this,k,l,i,n,g,m);if(!i){g()}return this},setWidth:function(i,h,l,m,k){this.beforeAction();var g=this.createCB(m);a.setWidth.call(this,i,h,l,g,k);if(!h){g()}return this},setHeight:function(k,i,m,n,l){this.beforeAction();var g=this.createCB(n);a.setHeight.call(this,k,i,m,g,l);if(!i){g()}return this},setBounds:function(p,n,q,i,o,l,m,k){this.beforeAction();var g=this.createCB(m);if(!o){this.storeXY([p,n]);a.setXY.call(this,[p,n]);a.setSize.call(this,q,i,o,l,g,k);g()}else{a.setBounds.call(this,p,n,q,i,o,l,g,k)}return this},setZIndex:function(c){this.zindex=c;this.setStyle(\"z-index\",c+2);if(this.shadow){this.shadow.setZIndex(c+1)}if(this.shim){this.shim.setStyle(\"z-index\",c)}return this}})})();Ext.Shadow=function(d){Ext.apply(this,d);if(typeof this.mode!=\"string\"){this.mode=this.defaultMode}var e=this.offset,c={h:0},b=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case\"drop\":c.w=0;c.l=c.t=e;c.t-=1;if(Ext.isIE){c.l-=this.offset+b;c.t-=this.offset+b;c.w-=b;c.h-=b;c.t+=1}break;case\"sides\":c.w=(e*2);c.l=-e;c.t=e-1;if(Ext.isIE){c.l-=(this.offset-b);c.t-=this.offset+b;c.l+=1;c.w-=(this.offset-b)*2;c.w-=b+1;c.h-=1}break;case\"frame\":c.w=c.h=(e*2);c.l=c.t=-e;c.t+=1;c.h-=2;if(Ext.isIE){c.l-=(this.offset-b);c.t-=(this.offset-b);c.l+=1;c.w-=(this.offset+b+1);c.h-=(this.offset+b);c.h+=1}break}this.adjusts=c};Ext.Shadow.prototype={offset:4,defaultMode:\"drop\",show:function(a){a=Ext.get(a);if(!this.el){this.el=Ext.Shadow.Pool.pull();if(this.el.dom.nextSibling!=a.dom){this.el.insertBefore(a)}}this.el.setStyle(\"z-index\",this.zIndex||parseInt(a.getStyle(\"z-index\"),10)-1);if(Ext.isIE){this.el.dom.style.filter=\"progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius=\"+(this.offset)+\")\"}this.realign(a.getLeft(true),a.getTop(true),a.getWidth(),a.getHeight());this.el.dom.style.display=\"block\"},isVisible:function(){return this.el?true:false},realign:function(b,u,r,g){if(!this.el){return}var o=this.adjusts,m=this.el.dom,v=m.style,i=0,q=(r+o.w),e=(g+o.h),k=q+\"px\",p=e+\"px\",n,c;v.left=(b+o.l)+\"px\";v.top=(u+o.t)+\"px\";if(v.width!=k||v.height!=p){v.width=k;v.height=p;if(!Ext.isIE){n=m.childNodes;c=Math.max(0,(q-12))+\"px\";n[0].childNodes[1].style.width=c;n[1].childNodes[1].style.width=c;n[2].childNodes[1].style.width=c;n[1].style.height=Math.max(0,(e-12))+\"px\"}}},hide:function(){if(this.el){this.el.dom.style.display=\"none\";Ext.Shadow.Pool.push(this.el);delete this.el}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle(\"z-index\",a)}}};Ext.Shadow.Pool=function(){var b=[],a=Ext.isIE?'<div class=\"x-ie-shadow\"></div>':'<div class=\"x-shadow\"><div class=\"xst\"><div class=\"xstl\"></div><div class=\"xstc\"></div><div class=\"xstr\"></div></div><div class=\"xsc\"><div class=\"xsml\"></div><div class=\"xsmc\"></div><div class=\"xsmr\"></div></div><div class=\"xsb\"><div class=\"xsbl\"></div><div class=\"xsbc\"></div><div class=\"xsbr\"></div></div></div>';return{pull:function(){var c=b.shift();if(!c){c=Ext.get(Ext.DomHelper.insertHtml(\"beforeBegin\",document.body.firstChild,a));c.autoBoxAdjust=false}return c},push:function(c){b.push(c)}}}();Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this);this.addEvents(\"resize\",\"move\")},boxReady:false,deferHeight:false,setSize:function(b,d){if(typeof b==\"object\"){d=b.height;b=b.width}if(Ext.isDefined(b)&&Ext.isDefined(this.boxMinWidth)&&(b<this.boxMinWidth)){b=this.boxMinWidth}if(Ext.isDefined(d)&&Ext.isDefined(this.boxMinHeight)&&(d<this.boxMinHeight)){d=this.boxMinHeight}if(Ext.isDefined(b)&&Ext.isDefined(this.boxMaxWidth)&&(b>this.boxMaxWidth)){b=this.boxMaxWidth}if(Ext.isDefined(d)&&Ext.isDefined(this.boxMaxHeight)&&(d>this.boxMaxHeight)){d=this.boxMaxHeight}if(!this.boxReady){this.width=b;this.height=d;return this}if(this.cacheSizes!==false&&this.lastSize&&this.lastSize.width==b&&this.lastSize.height==d){return this}this.lastSize={width:b,height:d};var c=this.adjustSize(b,d),g=c.width,a=c.height,e;if(g!==undefined||a!==undefined){e=this.getResizeEl();if(!this.deferHeight&&g!==undefined&&a!==undefined){e.setSize(g,a)}else{if(!this.deferHeight&&a!==undefined){e.setHeight(a)}else{if(g!==undefined){e.setWidth(g)}}}this.onResize(g,a,b,d);this.fireEvent(\"resize\",this,g,a,b,d)}return this},setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return this.getResizeEl().getSize()},getWidth:function(){return this.getResizeEl().getWidth()},getHeight:function(){return this.getResizeEl().getHeight()},getOuterSize:function(){var a=this.getResizeEl();return{width:a.getWidth()+a.getMargins(\"lr\"),height:a.getHeight()+a.getMargins(\"tb\")}},getPosition:function(a){var b=this.getPositionEl();if(a===true){return[b.getLeft(true),b.getTop(true)]}return this.xy||b.getXY()},getBox:function(a){var c=this.getPosition(a);var b=this.getSize();b.x=c[0];b.y=c[1];return b},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},getResizeEl:function(){return this.resizeEl||this.el},setAutoScroll:function(a){if(this.rendered){this.getContentTarget().setOverflow(a?\"auto\":\"\")}this.autoScroll=a;return this},setPosition:function(a,g){if(a&&typeof a[1]==\"number\"){g=a[1];a=a[0]}this.x=a;this.y=g;if(!this.boxReady){return this}var b=this.adjustPosition(a,g);var e=b.x,d=b.y;var c=this.getPositionEl();if(e!==undefined||d!==undefined){if(e!==undefined&&d!==undefined){c.setLeftTop(e,d)}else{if(e!==undefined){c.setLeft(e)}else{if(d!==undefined){c.setTop(d)}}}this.onPosition(e,d);this.fireEvent(\"move\",this,e,d)}return this},setPagePosition:function(a,c){if(a&&typeof a[1]==\"number\"){c=a[1];a=a[0]}this.pageX=a;this.pageY=c;if(!this.boxReady){return}if(a===undefined||c===undefined){return}var b=this.getPositionEl().translatePoints(a,c);this.setPosition(b.left,b.top);return this},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this);if(this.resizeEl){this.resizeEl=Ext.get(this.resizeEl)}if(this.positionEl){this.positionEl=Ext.get(this.positionEl)}this.boxReady=true;Ext.isDefined(this.autoScroll)&&this.setAutoScroll(this.autoScroll);this.setSize(this.width,this.height);if(this.x||this.y){this.setPosition(this.x,this.y)}else{if(this.pageX||this.pageY){this.setPagePosition(this.pageX,this.pageY)}}},syncSize:function(){delete this.lastSize;this.setSize(this.autoWidth?undefined:this.getResizeEl().getWidth(),this.autoHeight?undefined:this.getResizeEl().getHeight());return this},onResize:function(d,b,a,c){},onPosition:function(a,b){},adjustSize:function(a,b){if(this.autoWidth){a=\"auto\"}if(this.autoHeight){b=\"auto\"}return{width:a,height:b}},adjustPosition:function(a,b){return{x:a,y:b}}});Ext.reg(\"box\",Ext.BoxComponent);Ext.Spacer=Ext.extend(Ext.BoxComponent,{autoEl:\"div\"});Ext.reg(\"spacer\",Ext.Spacer);Ext.SplitBar=function(c,e,b,d,a){this.el=Ext.get(c,true);this.el.dom.unselectable=\"on\";this.resizingEl=Ext.get(e,true);this.orientation=b||Ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2000;this.animate=false;this.useShim=false;this.shim=null;if(!a){this.proxy=Ext.SplitBar.createProxy(this.orientation)}else{this.proxy=Ext.get(a).dom}this.dd=new Ext.dd.DDProxy(this.el.dom.id,\"XSplitBars\",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new Ext.SplitBar.BasicLayoutAdapter();this.adapter.init(this);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.placement=d||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT);this.el.addClass(\"x-splitbar-h\")}else{this.placement=d||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM);this.el.addClass(\"x-splitbar-v\")}this.addEvents(\"resize\",\"moved\",\"beforeresize\",\"beforeapply\");Ext.SplitBar.superclass.constructor.call(this)};Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(a,e){this.fireEvent(\"beforeresize\",this);this.overlay=Ext.DomHelper.append(document.body,{cls:\"x-drag-overlay\",html:\"&#160;\"},true);this.overlay.unselectable();this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();Ext.get(this.proxy).setDisplayed(\"block\");var c=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();var d=c-this.activeMinSize;var b=Math.max(this.activeMaxSize-c,0);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.dd.resetConstraints();this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?d:b,this.placement==Ext.SplitBar.LEFT?b:d,this.tickSize);this.dd.setYConstraint(0,0)}else{this.dd.resetConstraints();this.dd.setXConstraint(0,0);this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?d:b,this.placement==Ext.SplitBar.TOP?b:d,this.tickSize)}this.dragSpecs.startSize=c;this.dragSpecs.startPoint=[a,e];Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,a,e)},onEndProxyDrag:function(c){Ext.get(this.proxy).setDisplayed(false);var b=Ext.lib.Event.getXY(c);if(this.overlay){Ext.destroy(this.overlay);delete this.overlay}var a;if(this.orientation==Ext.SplitBar.HORIZONTAL){a=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?b[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-b[0])}else{a=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?b[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-b[1])}a=Math.min(Math.max(a,this.activeMinSize),this.activeMaxSize);if(a!=this.dragSpecs.startSize){if(this.fireEvent(\"beforeapply\",this,a)!==false){this.adapter.setElementSize(this,a);this.fireEvent(\"moved\",this,a);this.fireEvent(\"resize\",this,a)}}},getAdapter:function(){return this.adapter},setAdapter:function(a){this.adapter=a;this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(a){this.minSize=a},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(a){this.maxSize=a},setCurrentSize:function(b){var a=this.animate;this.animate=false;this.adapter.setElementSize(this,b);this.animate=a},destroy:function(a){Ext.destroy(this.shim,Ext.get(this.proxy));this.dd.unreg();if(a){this.el.remove()}this.purgeListeners()}});Ext.SplitBar.createProxy=function(b){var c=new Ext.Element(document.createElement(\"div\"));document.body.appendChild(c.dom);c.unselectable();var a=\"x-splitbar-proxy\";c.addClass(a+\" \"+(b==Ext.SplitBar.HORIZONTAL?a+\"-h\":a+\"-v\"));return c.dom};Ext.SplitBar.BasicLayoutAdapter=function(){};Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(a){},getElementSize:function(a){if(a.orientation==Ext.SplitBar.HORIZONTAL){return a.resizingEl.getWidth()}else{return a.resizingEl.getHeight()}},setElementSize:function(b,a,c){if(b.orientation==Ext.SplitBar.HORIZONTAL){if(!b.animate){b.resizingEl.setWidth(a);if(c){c(b,a)}}else{b.resizingEl.setWidth(a,true,0.1,c,\"easeOut\")}}else{if(!b.animate){b.resizingEl.setHeight(a);if(c){c(b,a)}}else{b.resizingEl.setHeight(a,true,0.1,c,\"easeOut\")}}}};Ext.SplitBar.AbsoluteLayoutAdapter=function(a){this.basic=new Ext.SplitBar.BasicLayoutAdapter();this.container=Ext.get(a)};Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(a){this.basic.init(a)},getElementSize:function(a){return this.basic.getElementSize(a)},setElementSize:function(b,a,c){this.basic.setElementSize(b,a,this.moveSplitter.createDelegate(this,[b]))},moveSplitter:function(a){var b=Ext.SplitBar;switch(a.placement){case b.LEFT:a.el.setX(a.resizingEl.getRight());break;case b.RIGHT:a.el.setStyle(\"right\",(this.container.getWidth()-a.resizingEl.getLeft())+\"px\");break;case b.TOP:a.el.setY(a.resizingEl.getBottom());break;case b.BOTTOM:a.el.setY(a.resizingEl.getTop()-a.el.getHeight());break}}};Ext.SplitBar.VERTICAL=1;Ext.SplitBar.HORIZONTAL=2;Ext.SplitBar.LEFT=1;Ext.SplitBar.RIGHT=2;Ext.SplitBar.TOP=3;Ext.SplitBar.BOTTOM=4;Ext.Container=Ext.extend(Ext.BoxComponent,{bufferResize:50,autoDestroy:true,forceLayout:false,defaultType:\"panel\",resizeEvent:\"resize\",bubbleEvents:[\"add\",\"remove\"],initComponent:function(){Ext.Container.superclass.initComponent.call(this);this.addEvents(\"afterlayout\",\"beforeadd\",\"beforeremove\",\"add\",\"remove\");var a=this.items;if(a){delete this.items;this.add(a)}},initItems:function(){if(!this.items){this.items=new Ext.util.MixedCollection(false,this.getComponentId);this.getLayout()}},setLayout:function(a){if(this.layout&&this.layout!=a){this.layout.setContainer(null)}this.layout=a;this.initItems();a.setContainer(this)},afterRender:function(){Ext.Container.superclass.afterRender.call(this);if(!this.layout){this.layout=\"auto\"}if(Ext.isObject(this.layout)&&!this.layout.layout){this.layoutConfig=this.layout;this.layout=this.layoutConfig.type}if(Ext.isString(this.layout)){this.layout=new Ext.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)}this.setLayout(this.layout);if(this.activeItem!==undefined&&this.layout.setActiveItem){var a=this.activeItem;delete this.activeItem;this.layout.setActiveItem(a)}if(!this.ownerCt){this.doLayout(false,true)}if(this.monitorResize===true){Ext.EventManager.onWindowResize(this.doLayout,this,[false])}},getLayoutTarget:function(){return this.el},getComponentId:function(a){return a.getItemId()},add:function(b){this.initItems();var e=arguments.length>1;if(e||Ext.isArray(b)){var a=[];Ext.each(e?arguments:b,function(h){a.push(this.add(h))},this);return a}var g=this.lookupComponent(this.applyDefaults(b));var d=this.items.length;if(this.fireEvent(\"beforeadd\",this,g,d)!==false&&this.onBeforeAdd(g)!==false){this.items.add(g);g.onAdded(this,d);this.onAdd(g);this.fireEvent(\"add\",this,g,d)}return g},onAdd:function(a){},onAdded:function(a,b){this.ownerCt=a;this.initRef();this.cascade(function(d){d.initRef()});this.fireEvent(\"added\",this,a,b)},insert:function(e,b){var d=arguments,h=d.length,a=[],g,k;this.initItems();if(h>2){for(g=h-1;g>=1;--g){a.push(this.insert(e,d[g]))}return a}k=this.lookupComponent(this.applyDefaults(b));e=Math.min(e,this.items.length);if(this.fireEvent(\"beforeadd\",this,k,e)!==false&&this.onBeforeAdd(k)!==false){if(k.ownerCt==this){this.items.remove(k)}this.items.insert(e,k);k.onAdded(this,e);this.onAdd(k);this.fireEvent(\"add\",this,k,e)}return k},applyDefaults:function(b){var a=this.defaults;if(a){if(Ext.isFunction(a)){a=a.call(this,b)}if(Ext.isString(b)){b=Ext.ComponentMgr.get(b);Ext.apply(b,a)}else{if(!b.events){Ext.applyIf(b.isAction?b.initialConfig:b,a)}else{Ext.apply(b,a)}}}return b},onBeforeAdd:function(a){if(a.ownerCt){a.ownerCt.remove(a,false)}if(this.hideBorders===true){a.border=(a.border===true)}},remove:function(a,b){this.initItems();var d=this.getComponent(a);if(d&&this.fireEvent(\"beforeremove\",this,d)!==false){this.doRemove(d,b);this.fireEvent(\"remove\",this,d)}return d},onRemove:function(a){},doRemove:function(e,d){var b=this.layout,a=b&&this.rendered;if(a){b.onRemove(e)}this.items.remove(e);e.onRemoved();this.onRemove(e);if(d===true||(d!==false&&this.autoDestroy)){e.destroy()}if(a){b.afterRemove(e)}},removeAll:function(c){this.initItems();var e,g=[],b=[];this.items.each(function(h){g.push(h)});for(var d=0,a=g.length;d<a;++d){e=g[d];this.remove(e,c);if(e.ownerCt!==this){b.push(e)}}return b},getComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.items.get(a)},lookupComponent:function(a){if(Ext.isString(a)){return Ext.ComponentMgr.get(a)}else{if(!a.events){return this.createComponent(a)}}return a},createComponent:function(a,d){if(a.render){return a}var b=Ext.create(Ext.apply({ownerCt:this},a),d||this.defaultType);delete b.initialConfig.ownerCt;delete b.ownerCt;return b},canLayout:function(){var a=this.getVisibilityEl();return a&&a.dom&&!a.isStyle(\"display\",\"none\")},doLayout:function(g,e){var l=this.rendered,k=e||this.forceLayout;if(this.collapsed||!this.canLayout()){this.deferLayout=this.deferLayout||!g;if(!k){return}g=g&&!this.deferLayout}else{delete this.deferLayout}if(l&&this.layout){this.layout.layout()}if(g!==true&&this.items){var d=this.items.items;for(var b=0,a=d.length;b<a;b++){var h=d[b];if(h.doLayout){h.doLayout(false,k)}}}if(l){this.onLayout(g,k)}this.hasLayout=true;delete this.forceLayout},onLayout:Ext.emptyFn,shouldBufferLayout:function(){var a=this.hasLayout;if(this.ownerCt){return a?!this.hasLayoutPending():false}return a},hasLayoutPending:function(){var a=false;this.ownerCt.bubble(function(b){if(b.layoutPending){a=true;return false}});return a},onShow:function(){Ext.Container.superclass.onShow.call(this);if(Ext.isDefined(this.deferLayout)){delete this.deferLayout;this.doLayout(true)}},getLayout:function(){if(!this.layout){var a=new Ext.layout.AutoLayout(this.layoutConfig);this.setLayout(a)}return this.layout},beforeDestroy:function(){var a;if(this.items){while(a=this.items.first()){this.doRemove(a,true)}}if(this.monitorResize){Ext.EventManager.removeResizeListener(this.doLayout,this)}Ext.destroy(this.layout);Ext.Container.superclass.beforeDestroy.call(this)},cascade:function(g,e,b){if(g.apply(e||this,b||[this])!==false){if(this.items){var d=this.items.items;for(var c=0,a=d.length;c<a;c++){if(d[c].cascade){d[c].cascade(g,e,b)}else{g.apply(e||d[c],b||[d[c]])}}}}return this},findById:function(c){var a=null,b=this;this.cascade(function(d){if(b!=d&&d.id===c){a=d;return false}});return a},findByType:function(b,a){return this.findBy(function(d){return d.isXType(b,a)})},find:function(b,a){return this.findBy(function(d){return d[b]===a})},findBy:function(d,c){var a=[],b=this;this.cascade(function(e){if(b!=e&&d.call(c||e,e,b)===true){a.push(e)}});return a},get:function(a){return this.getComponent(a)}});Ext.Container.LAYOUTS={};Ext.reg(\"container\",Ext.Container);Ext.layout.ContainerLayout=Ext.extend(Object,{monitorResize:false,activeItem:null,constructor:function(a){this.id=Ext.id(null,\"ext-layout-\");Ext.apply(this,a)},type:\"container\",IEMeasureHack:function(l,g){var a=l.dom.childNodes,b=a.length,o,n=[],m,h,k;for(h=0;h<b;h++){o=a[h];m=Ext.get(o);if(m){n[h]=m.getStyle(\"display\");m.setStyle({display:\"none\"})}}k=l?l.getViewSize(g):{};for(h=0;h<b;h++){o=a[h];m=Ext.get(o);if(m){m.setStyle({display:n[h]})}}return k},getLayoutTargetSize:Ext.EmptyFn,layout:function(){var a=this.container,b=a.getLayoutTarget();if(!(this.hasLayout||Ext.isEmpty(this.targetCls))){b.addClass(this.targetCls)}this.onLayout(a,b);a.fireEvent(\"afterlayout\",a,this)},onLayout:function(a,b){this.renderAll(a,b)},isValidParent:function(b,a){return a&&b.getPositionEl().dom.parentNode==(a.dom||a)},renderAll:function(e,g){var b=e.items.items,d,h,a=b.length;for(d=0;d<a;d++){h=b[d];if(h&&(!h.rendered||!this.isValidParent(h,g))){this.renderItem(h,d,g)}}},renderItem:function(d,a,b){if(d){if(!d.rendered){d.render(b,a);this.configureItem(d)}else{if(!this.isValidParent(d,b)){if(Ext.isNumber(a)){a=b.dom.childNodes[a]}b.dom.insertBefore(d.getPositionEl().dom,a||null);d.container=b;this.configureItem(d)}}}},getRenderedItems:function(g){var e=g.getLayoutTarget(),h=g.items.items,a=h.length,d,k,b=[];for(d=0;d<a;d++){if((k=h[d]).rendered&&this.isValidParent(k,e)&&k.shouldLayout!==false){b.push(k)}}return b},configureItem:function(b){if(this.extraCls){var a=b.getPositionEl?b.getPositionEl():b;a.addClass(this.extraCls)}if(b.doLayout&&this.forceLayout){b.doLayout()}if(this.renderHidden&&b!=this.activeItem){b.hide()}},onRemove:function(b){if(this.activeItem==b){delete this.activeItem}if(b.rendered&&this.extraCls){var a=b.getPositionEl?b.getPositionEl():b;a.removeClass(this.extraCls)}},afterRemove:function(a){if(a.removeRestore){a.removeMode=\"container\";delete a.removeRestore}},onResize:function(){var c=this.container,a;if(c.collapsed){return}if(a=c.bufferResize&&c.shouldBufferLayout()){if(!this.resizeTask){this.resizeTask=new Ext.util.DelayedTask(this.runLayout,this);this.resizeBuffer=Ext.isNumber(a)?a:50}c.layoutPending=true;this.resizeTask.delay(this.resizeBuffer)}else{this.runLayout()}},runLayout:function(){var a=this.container;this.layout();a.onLayout();delete a.layoutPending},setContainer:function(b){if(this.monitorResize&&b!=this.container){var a=this.container;if(a){a.un(a.resizeEvent,this.onResize,this)}if(b){b.on(b.resizeEvent,this.onResize,this)}}this.container=b},parseMargins:function(b){if(Ext.isNumber(b)){b=b.toString()}var c=b.split(\" \"),a=c.length;if(a==1){c[1]=c[2]=c[3]=c[0]}else{if(a==2){c[2]=c[0];c[3]=c[1]}else{if(a==3){c[3]=c[1]}}}return{top:parseInt(c[0],10)||0,right:parseInt(c[1],10)||0,bottom:parseInt(c[2],10)||0,left:parseInt(c[3],10)||0}},fieldTpl:(function(){var a=new Ext.Template('<div class=\"x-form-item {itemCls}\" tabIndex=\"-1\">','<label for=\"{id}\" style=\"{labelStyle}\" class=\"x-form-item-label\">{label}{labelSeparator}</label>','<div class=\"x-form-element\" id=\"x-form-el-{id}\" style=\"{elementStyle}\">','</div><div class=\"{clearCls}\"></div>',\"</div>\");a.disableFormats=true;return a.compile()})(),destroy:function(){if(this.resizeTask&&this.resizeTask.cancel){this.resizeTask.cancel()}if(this.container){this.container.un(this.container.resizeEvent,this.onResize,this)}if(!Ext.isEmpty(this.targetCls)){var a=this.container.getLayoutTarget();if(a){a.removeClass(this.targetCls)}}}});Ext.layout.AutoLayout=Ext.extend(Ext.layout.ContainerLayout,{type:\"auto\",monitorResize:true,onLayout:function(d,g){Ext.layout.AutoLayout.superclass.onLayout.call(this,d,g);var e=this.getRenderedItems(d),a=e.length,b,h;for(b=0;b<a;b++){h=e[b];if(h.doLayout){h.doLayout(true)}}}});Ext.Container.LAYOUTS.auto=Ext.layout.AutoLayout;Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"fit\",getLayoutTargetSize:function(){var a=this.container.getLayoutTarget();if(!a){return{}}return a.getStyleSize()},onLayout:function(a,b){Ext.layout.FitLayout.superclass.onLayout.call(this,a,b);if(!a.collapsed){this.setItemSize(this.activeItem||a.items.itemAt(0),this.getLayoutTargetSize())}},setItemSize:function(b,a){if(b&&a.height>0){b.setSize(a)}}});Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout;Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:false,layoutOnCardChange:false,renderHidden:true,type:\"card\",setActiveItem:function(d){var a=this.activeItem,b=this.container;d=b.getComponent(d);if(d&&a!=d){if(a){a.hide();if(a.hidden!==true){return false}a.fireEvent(\"deactivate\",a)}var c=d.doLayout&&(this.layoutOnCardChange||!d.rendered);this.activeItem=d;delete d.deferLayout;d.show();this.layout();if(c){d.doLayout()}d.fireEvent(\"activate\",d)}},renderAll:function(a,b){if(this.deferredRender){this.renderItem(this.activeItem,undefined,b)}else{Ext.layout.CardLayout.superclass.renderAll.call(this,a,b)}}});Ext.Container.LAYOUTS.card=Ext.layout.CardLayout;Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"anchor\",defaultAnchor:\"100%\",parseAnchorRE:/^(r|right|b|bottom)$/i,getLayoutTargetSize:function(){var b=this.container.getLayoutTarget(),a={};if(b){a=b.getViewSize();if(Ext.isIE&&Ext.isStrict&&a.width==0){a=b.getStyleSize()}a.width-=b.getPadding(\"lr\");a.height-=b.getPadding(\"tb\")}return a},onLayout:function(n,x){Ext.layout.AnchorLayout.superclass.onLayout.call(this,n,x);var q=this.getLayoutTargetSize(),l=q.width,p=q.height,r=x.getStyle(\"overflow\"),o=this.getRenderedItems(n),u=o.length,g=[],k,a,w,m,h,c,e,d,v=0,t,b;if(l<20&&p<20){return}if(n.anchorSize){if(typeof n.anchorSize==\"number\"){a=n.anchorSize}else{a=n.anchorSize.width;w=n.anchorSize.height}}else{a=n.initialConfig.width;w=n.initialConfig.height}for(t=0;t<u;t++){m=o[t];b=m.getPositionEl();if(!m.anchor&&m.items&&!Ext.isNumber(m.width)&&!(Ext.isIE6&&Ext.isStrict)){m.anchor=this.defaultAnchor}if(m.anchor){h=m.anchorSpec;if(!h){d=m.anchor.split(\" \");m.anchorSpec=h={right:this.parseAnchor(d[0],m.initialConfig.width,a),bottom:this.parseAnchor(d[1],m.initialConfig.height,w)}}c=h.right?this.adjustWidthAnchor(h.right(l)-b.getMargins(\"lr\"),m):undefined;e=h.bottom?this.adjustHeightAnchor(h.bottom(p)-b.getMargins(\"tb\"),m):undefined;if(c||e){g.push({component:m,width:c||undefined,height:e||undefined})}}}for(t=0,u=g.length;t<u;t++){k=g[t];k.component.setSize(k.width,k.height)}if(r&&r!=\"hidden\"&&!this.adjustmentPass){var s=this.getLayoutTargetSize();if(s.width!=q.width||s.height!=q.height){this.adjustmentPass=true;this.onLayout(n,x)}}delete this.adjustmentPass},parseAnchor:function(c,h,b){if(c&&c!=\"none\"){var e;if(this.parseAnchorRE.test(c)){var g=b-h;return function(a){if(a!==e){e=a;return a-g}}}else{if(c.indexOf(\"%\")!=-1){var d=parseFloat(c.replace(\"%\",\"\"))*0.01;return function(a){if(a!==e){e=a;return Math.floor(a*d)}}}else{c=parseInt(c,10);if(!isNaN(c)){return function(a){if(a!==e){e=a;return a+c}}}}}}return false},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b}});Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout;Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"column\",extraCls:\"x-column\",scrollOffset:0,targetCls:\"x-column-layout-ct\",isValidParent:function(b,a){return this.innerCt&&b.getPositionEl().dom.parentNode==this.innerCt.dom},getLayoutTargetSize:function(){var b=this.container.getLayoutTarget(),a;if(b){a=b.getViewSize();if(Ext.isIE&&Ext.isStrict&&a.width==0){a=b.getStyleSize()}a.width-=b.getPadding(\"lr\");a.height-=b.getPadding(\"tb\")}return a},renderAll:function(a,b){if(!this.innerCt){this.innerCt=b.createChild({cls:\"x-column-inner\"});this.innerCt.createChild({cls:\"x-clear\"})}Ext.layout.ColumnLayout.superclass.renderAll.call(this,a,this.innerCt)},onLayout:function(e,l){var g=e.items.items,k=g.length,o,b,a,p=[];this.renderAll(e,l);var s=this.getLayoutTargetSize();if(s.width<1&&s.height<1){return}var q=s.width-this.scrollOffset,d=s.height,r=q;this.innerCt.setWidth(q);for(b=0;b<k;b++){o=g[b];a=o.getPositionEl().getMargins(\"lr\");p[b]=a;if(!o.columnWidth){r-=(o.getWidth()+a)}}r=r<0?0:r;for(b=0;b<k;b++){o=g[b];a=p[b];if(o.columnWidth){o.setSize(Math.floor(o.columnWidth*r)-a)}}if(Ext.isIE){if(b=l.getStyle(\"overflow\")&&b!=\"hidden\"&&!this.adjustmentPass){var n=this.getLayoutTargetSize();if(n.width!=s.width){this.adjustmentPass=true;this.onLayout(e,l)}}}delete this.adjustmentPass}});Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout;Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,rendered:false,type:\"border\",targetCls:\"x-border-layout-ct\",getLayoutTargetSize:function(){var a=this.container.getLayoutTarget();return a?a.getViewSize():{}},onLayout:function(g,J){var k,C,G,p,y=g.items.items,D=y.length;if(!this.rendered){k=[];for(C=0;C<D;C++){G=y[C];p=G.region;if(G.collapsed){k.push(G)}G.collapsed=false;if(!G.rendered){G.render(J,C);G.getPositionEl().addClass(\"x-border-panel\")}this[p]=p!=\"center\"&&G.split?new Ext.layout.BorderLayout.SplitRegion(this,G.initialConfig,p):new Ext.layout.BorderLayout.Region(this,G.initialConfig,p);this[p].render(J,G)}this.rendered=true}var x=this.getLayoutTargetSize();if(x.width<20||x.height<20){if(k){this.restoreCollapsed=k}return}else{if(this.restoreCollapsed){k=this.restoreCollapsed;delete this.restoreCollapsed}}var u=x.width,E=x.height,t=u,B=E,q=0,r=0,z=this.north,v=this.south,o=this.west,F=this.east,G=this.center,I,A,d,H;if(!G&&Ext.layout.BorderLayout.WARN!==false){throw\"No center region defined in BorderLayout \"+g.id}if(z&&z.isVisible()){I=z.getSize();A=z.getMargins();I.width=u-(A.left+A.right);I.x=A.left;I.y=A.top;q=I.height+I.y+A.bottom;B-=q;z.applyLayout(I)}if(v&&v.isVisible()){I=v.getSize();A=v.getMargins();I.width=u-(A.left+A.right);I.x=A.left;H=(I.height+A.top+A.bottom);I.y=E-H+A.top;B-=H;v.applyLayout(I)}if(o&&o.isVisible()){I=o.getSize();A=o.getMargins();I.height=B-(A.top+A.bottom);I.x=A.left;I.y=q+A.top;d=(I.width+A.left+A.right);r+=d;t-=d;o.applyLayout(I)}if(F&&F.isVisible()){I=F.getSize();A=F.getMargins();I.height=B-(A.top+A.bottom);d=(I.width+A.left+A.right);I.x=u-d+A.left;I.y=q+A.top;t-=d;F.applyLayout(I)}if(G){A=G.getMargins();var l={x:r+A.left,y:q+A.top,width:t-(A.left+A.right),height:B-(A.top+A.bottom)};G.applyLayout(l)}if(k){for(C=0,D=k.length;C<D;C++){k[C].collapse(false)}}if(Ext.isIE&&Ext.isStrict){J.repaint()}if(C=J.getStyle(\"overflow\")&&C!=\"hidden\"&&!this.adjustmentPass){var a=this.getLayoutTargetSize();if(a.width!=x.width||a.height!=x.height){this.adjustmentPass=true;this.onLayout(g,J)}}delete this.adjustmentPass},destroy:function(){var b=[\"north\",\"south\",\"east\",\"west\"],a,c;for(a=0;a<b.length;a++){c=this[b[a]];if(c){if(c.destroy){c.destroy()}else{if(c.split){c.split.destroy(true)}}}}Ext.layout.BorderLayout.superclass.destroy.call(this)}});Ext.layout.BorderLayout.Region=function(b,a,c){Ext.apply(this,a);this.layout=b;this.position=c;this.state={};if(typeof this.margins==\"string\"){this.margins=this.layout.parseMargins(this.margins)}this.margins=Ext.applyIf(this.margins||{},this.defaultMargins);if(this.collapsible){if(typeof this.cmargins==\"string\"){this.cmargins=this.layout.parseMargins(this.cmargins)}if(this.collapseMode==\"mini\"&&!this.cmargins){this.cmargins={left:0,top:0,right:0,bottom:0}}else{this.cmargins=Ext.applyIf(this.cmargins||{},c==\"north\"||c==\"south\"?this.defaultNSCMargins:this.defaultEWCMargins)}}};Ext.layout.BorderLayout.Region.prototype={collapsible:false,split:false,floatable:true,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},floatingZIndex:100,isCollapsed:false,render:function(b,c){this.panel=c;c.el.enableDisplayMode();this.targetEl=b;this.el=c.el;var a=c.getState,d=this.position;c.getState=function(){return Ext.apply(a.call(c)||{},this.state)}.createDelegate(this);if(d!=\"center\"){c.allowQueuedExpand=false;c.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this});if(this.collapsible||this.floatable){c.collapseEl=\"el\";c.slideAnchor=this.getSlideAnchor()}if(c.tools&&c.tools.toggle){c.tools.toggle.addClass(\"x-tool-collapse-\"+d);c.tools.toggle.addClassOnOver(\"x-tool-collapse-\"+d+\"-over\")}}},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var b=new Ext.Template('<div class=\"x-tool x-tool-{id}\">&#160;</div>');b.disableFormats=true;b.compile();Ext.layout.BorderLayout.Region.prototype.toolTemplate=b}this.collapsedEl=this.targetEl.createChild({cls:\"x-layout-collapsed x-layout-collapsed-\"+this.position,id:this.panel.id+\"-xcollapsed\"});this.collapsedEl.enableDisplayMode(\"block\");if(this.collapseMode==\"mini\"){this.collapsedEl.addClass(\"x-layout-cmini-\"+this.position);this.miniCollapsedEl=this.collapsedEl.createChild({cls:\"x-layout-mini x-layout-mini-\"+this.position,html:\"&#160;\"});this.miniCollapsedEl.addClassOnOver(\"x-layout-mini-over\");this.collapsedEl.addClassOnOver(\"x-layout-collapsed-over\");this.collapsedEl.on(\"click\",this.onExpandClick,this,{stopEvent:true})}else{if(this.collapsible!==false&&!this.hideCollapseTool){var a=this.expandToolEl=this.toolTemplate.append(this.collapsedEl.dom,{id:\"expand-\"+this.position},true);a.addClassOnOver(\"x-tool-expand-\"+this.position+\"-over\");a.on(\"click\",this.onExpandClick,this,{stopEvent:true})}if(this.floatable!==false||this.titleCollapse){this.collapsedEl.addClassOnOver(\"x-layout-collapsed-over\");this.collapsedEl.on(\"click\",this[this.floatable?\"collapseClick\":\"onExpandClick\"],this)}}}return this.collapsedEl},onExpandClick:function(a){if(this.isSlid){this.panel.expand(false)}else{this.panel.expand()}},onCollapseClick:function(a){this.panel.collapse()},beforeCollapse:function(c,a){this.lastAnim=a;if(this.splitEl){this.splitEl.hide()}this.getCollapsedEl().show();var b=this.panel.getEl();this.originalZIndex=b.getStyle(\"z-index\");b.setStyle(\"z-index\",100);this.isCollapsed=true;this.layout.layout()},onCollapse:function(a){this.panel.el.setStyle(\"z-index\",1);if(this.lastAnim===false||this.panel.animCollapse===false){this.getCollapsedEl().dom.style.visibility=\"visible\"}else{this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:0.2})}this.state.collapsed=true;this.panel.saveState()},beforeExpand:function(a){if(this.isSlid){this.afterSlideIn()}var b=this.getCollapsedEl();this.el.show();if(this.position==\"east\"||this.position==\"west\"){this.panel.setSize(undefined,b.getHeight())}else{this.panel.setSize(b.getWidth(),undefined)}b.hide();b.dom.style.visibility=\"hidden\";this.panel.el.setStyle(\"z-index\",this.floatingZIndex)},onExpand:function(){this.isCollapsed=false;if(this.splitEl){this.splitEl.show()}this.layout.layout();this.panel.el.setStyle(\"z-index\",this.originalZIndex);this.state.collapsed=false;this.panel.saveState()},collapseClick:function(a){if(this.isSlid){a.stopPropagation();this.slideIn()}else{a.stopPropagation();this.slideOut()}},onHide:function(){if(this.isCollapsed){this.getCollapsedEl().hide()}else{if(this.splitEl){this.splitEl.hide()}}},onShow:function(){if(this.isCollapsed){this.getCollapsedEl().show()}else{if(this.splitEl){this.splitEl.show()}}},isVisible:function(){return !this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(a){this.panel=a},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(a){var b=this.getCollapsedEl();b.setLeftTop(a.x,a.y);b.setSize(a.width,a.height)},applyLayout:function(a){if(this.isCollapsed){this.applyLayoutCollapsed(a)}else{this.panel.setPosition(a.x,a.y);this.panel.setSize(a.width,a.height)}},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){if(this.autoHide!==false){if(!this.autoHideHd){this.autoHideSlideTask=new Ext.util.DelayedTask(this.slideIn,this);this.autoHideHd={mouseout:function(a){if(!a.within(this.el,true)){this.autoHideSlideTask.delay(500)}},mouseover:function(a){this.autoHideSlideTask.cancel()},scope:this}}this.el.on(this.autoHideHd);this.collapsedEl.on(this.autoHideHd)}},clearAutoHide:function(){if(this.autoHide!==false){this.el.un(\"mouseout\",this.autoHideHd.mouseout);this.el.un(\"mouseover\",this.autoHideHd.mouseover);this.collapsedEl.un(\"mouseout\",this.autoHideHd.mouseout);this.collapsedEl.un(\"mouseover\",this.autoHideHd.mouseover)}},clearMonitor:function(){Ext.getDoc().un(\"click\",this.slideInIf,this)},slideOut:function(){if(this.isSlid||this.el.hasActiveFx()){return}this.isSlid=true;var b=this.panel.tools,c,a;if(b&&b.toggle){b.toggle.hide()}this.el.show();a=this.panel.collapsed;this.panel.collapsed=false;if(this.position==\"east\"||this.position==\"west\"){c=this.panel.deferHeight;this.panel.deferHeight=false;this.panel.setSize(undefined,this.collapsedEl.getHeight());this.panel.deferHeight=c}else{this.panel.setSize(this.collapsedEl.getWidth(),undefined)}this.panel.collapsed=a;this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top];this.el.alignTo(this.collapsedEl,this.getCollapseAnchor());this.el.setStyle(\"z-index\",this.floatingZIndex+2);this.panel.el.replaceClass(\"x-panel-collapsed\",\"x-panel-floating\");if(this.animFloat!==false){this.beforeSlide();this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide();this.initAutoHide();Ext.getDoc().on(\"click\",this.slideInIf,this)},scope:this,block:true})}else{this.initAutoHide();Ext.getDoc().on(\"click\",this.slideInIf,this)}},afterSlideIn:function(){this.clearAutoHide();this.isSlid=false;this.clearMonitor();this.el.setStyle(\"z-index\",\"\");this.panel.el.replaceClass(\"x-panel-floating\",\"x-panel-collapsed\");this.el.dom.style.left=this.restoreLT[0];this.el.dom.style.top=this.restoreLT[1];var a=this.panel.tools;if(a&&a.toggle){a.toggle.show()}},slideIn:function(a){if(!this.isSlid||this.el.hasActiveFx()){Ext.callback(a);return}this.isSlid=false;if(this.animFloat!==false){this.beforeSlide();this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide();this.afterSlide();this.afterSlideIn();Ext.callback(a)},scope:this,block:true})}else{this.el.hide();this.afterSlideIn()}},slideInIf:function(a){if(!a.within(this.el)){this.slideIn()}},anchors:{west:\"left\",east:\"right\",north:\"top\",south:\"bottom\"},sanchors:{west:\"l\",east:\"r\",north:\"t\",south:\"b\"},canchors:{west:\"tl-tr\",east:\"tr-tl\",north:\"tl-bl\",south:\"bl-tl\"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){var a=this.cmargins;switch(this.position){case\"west\":return[0,0];break;case\"east\":return[0,0];break;case\"north\":return[0,0];break;case\"south\":return[0,0];break}},getExpandAdj:function(){var b=this.collapsedEl,a=this.cmargins;switch(this.position){case\"west\":return[-(a.right+b.getWidth()+a.left),0];break;case\"east\":return[a.right+b.getWidth()+a.left,0];break;case\"north\":return[0,-(a.top+a.bottom+b.getHeight())];break;case\"south\":return[0,a.top+a.bottom+b.getHeight()];break}},destroy:function(){if(this.autoHideSlideTask&&this.autoHideSlideTask.cancel){this.autoHideSlideTask.cancel()}Ext.destroyMembers(this,\"miniCollapsedEl\",\"collapsedEl\",\"expandToolEl\")}};Ext.layout.BorderLayout.SplitRegion=function(b,a,c){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,b,a,c);this.applyLayout=this.applyFns[c]};Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:\"Drag to resize.\",collapsibleSplitTip:\"Drag to resize. Double click to hide.\",useSplitTips:false,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:\"getVMaxSize\",minProp:\"minHeight\",maxProp:\"maxHeight\"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:\"getVMaxSize\",minProp:\"minHeight\",maxProp:\"maxHeight\"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:\"getHMaxSize\",minProp:\"minWidth\",maxProp:\"maxWidth\"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:\"getHMaxSize\",minProp:\"minWidth\",maxProp:\"maxWidth\"}},applyFns:{west:function(c){if(this.isCollapsed){return this.applyLayoutCollapsed(c)}var d=this.splitEl.dom,b=d.style;this.panel.setPosition(c.x,c.y);var a=d.offsetWidth;b.left=(c.x+c.width-a)+\"px\";b.top=(c.y)+\"px\";b.height=Math.max(0,c.height)+\"px\";this.panel.setSize(c.width-a,c.height)},east:function(c){if(this.isCollapsed){return this.applyLayoutCollapsed(c)}var d=this.splitEl.dom,b=d.style;var a=d.offsetWidth;this.panel.setPosition(c.x+a,c.y);b.left=(c.x)+\"px\";b.top=(c.y)+\"px\";b.height=Math.max(0,c.height)+\"px\";this.panel.setSize(c.width-a,c.height)},north:function(c){if(this.isCollapsed){return this.applyLayoutCollapsed(c)}var d=this.splitEl.dom,b=d.style;var a=d.offsetHeight;this.panel.setPosition(c.x,c.y);b.left=(c.x)+\"px\";b.top=(c.y+c.height-a)+\"px\";b.width=Math.max(0,c.width)+\"px\";this.panel.setSize(c.width,c.height-a)},south:function(c){if(this.isCollapsed){return this.applyLayoutCollapsed(c)}var d=this.splitEl.dom,b=d.style;var a=d.offsetHeight;this.panel.setPosition(c.x,c.y+a);b.left=(c.x)+\"px\";b.top=(c.y)+\"px\";b.width=Math.max(0,c.width)+\"px\";this.panel.setSize(c.width,c.height-a)}},render:function(a,c){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,a,c);var d=this.position;this.splitEl=a.createChild({cls:\"x-layout-split x-layout-split-\"+d,html:\"&#160;\",id:this.panel.id+\"-xsplit\"});if(this.collapseMode==\"mini\"){this.miniSplitEl=this.splitEl.createChild({cls:\"x-layout-mini x-layout-mini-\"+d,html:\"&#160;\"});this.miniSplitEl.addClassOnOver(\"x-layout-mini-over\");this.miniSplitEl.on(\"click\",this.onCollapseClick,this,{stopEvent:true})}var b=this.splitSettings[d];this.split=new Ext.SplitBar(this.splitEl.dom,c.el,b.orientation);this.split.tickSize=this.tickSize;this.split.placement=b.placement;this.split.getMaximumSize=this[b.maxFn].createDelegate(this);this.split.minSize=this.minSize||this[b.minProp];this.split.on(\"beforeapply\",this.onSplitMove,this);this.split.useShim=this.useShim===true;this.maxSize=this.maxSize||this[b.maxProp];if(c.hidden){this.splitEl.hide()}if(this.useSplitTips){this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip}if(this.collapsible){this.splitEl.on(\"dblclick\",this.onCollapseClick,this)}},getSize:function(){if(this.isCollapsed){return this.collapsedEl.getSize()}var a=this.panel.getSize();if(this.position==\"north\"||this.position==\"south\"){a.height+=this.splitEl.dom.offsetHeight}else{a.width+=this.splitEl.dom.offsetWidth}return a},getHMaxSize:function(){var b=this.maxSize||10000;var a=this.layout.center;return Math.min(b,(this.el.getWidth()+a.el.getWidth())-a.getMinWidth())},getVMaxSize:function(){var b=this.maxSize||10000;var a=this.layout.center;return Math.min(b,(this.el.getHeight()+a.el.getHeight())-a.getMinHeight())},onSplitMove:function(b,a){var c=this.panel.getSize();this.lastSplitSize=a;if(this.position==\"north\"||this.position==\"south\"){this.panel.setSize(c.width,a);this.state.height=a}else{this.panel.setSize(a,c.height);this.state.width=a}this.layout.layout();this.panel.saveState();return false},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl);Ext.layout.BorderLayout.SplitRegion.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout;Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:\":\",trackLabels:true,type:\"form\",onRemove:function(d){Ext.layout.FormLayout.superclass.onRemove.call(this,d);if(this.trackLabels){d.un(\"show\",this.onFieldShow,this);d.un(\"hide\",this.onFieldHide,this)}var b=d.getPositionEl(),a=d.getItemCt&&d.getItemCt();if(d.rendered&&a){if(b&&b.dom){b.insertAfter(a)}Ext.destroy(a);Ext.destroyMembers(d,\"label\",\"itemCt\");if(d.customItemCt){Ext.destroyMembers(d,\"getItemCt\",\"customItemCt\")}}},setContainer:function(a){Ext.layout.FormLayout.superclass.setContainer.call(this,a);if(a.labelAlign){a.addClass(\"x-form-label-\"+a.labelAlign)}if(a.hideLabels){Ext.apply(this,{labelStyle:\"display:none\",elementStyle:\"padding-left:0;\",labelAdjust:0})}else{this.labelSeparator=Ext.isDefined(a.labelSeparator)?a.labelSeparator:this.labelSeparator;a.labelWidth=a.labelWidth||100;if(Ext.isNumber(a.labelWidth)){var b=Ext.isNumber(a.labelPad)?a.labelPad:5;Ext.apply(this,{labelAdjust:a.labelWidth+b,labelStyle:\"width:\"+a.labelWidth+\"px;\",elementStyle:\"padding-left:\"+(a.labelWidth+b)+\"px\"})}if(a.labelAlign==\"top\"){Ext.apply(this,{labelStyle:\"width:auto;\",labelAdjust:0,elementStyle:\"padding-left:0;\"})}}},isHide:function(a){return a.hideLabel||this.container.hideLabels},onFieldShow:function(a){a.getItemCt().removeClass(\"x-hide-\"+a.hideMode);if(a.isComposite){a.doLayout()}},onFieldHide:function(a){a.getItemCt().addClass(\"x-hide-\"+a.hideMode)},getLabelStyle:function(e){var b=\"\",c=[this.labelStyle,e];for(var d=0,a=c.length;d<a;++d){if(c[d]){b+=c[d];if(b.substr(-1,1)!=\";\"){b+=\";\"}}}return b},renderItem:function(e,a,d){if(e&&(e.isFormField||e.fieldLabel)&&e.inputType!=\"hidden\"){var b=this.getTemplateArgs(e);if(Ext.isNumber(a)){a=d.dom.childNodes[a]||null}if(a){e.itemCt=this.fieldTpl.insertBefore(a,b,true)}else{e.itemCt=this.fieldTpl.append(d,b,true)}if(!e.getItemCt){Ext.apply(e,{getItemCt:function(){return e.itemCt},customItemCt:true})}e.label=e.getItemCt().child(\"label.x-form-item-label\");if(!e.rendered){e.render(\"x-form-el-\"+e.id)}else{if(!this.isValidParent(e,d)){Ext.fly(\"x-form-el-\"+e.id).appendChild(e.getPositionEl())}}if(this.trackLabels){if(e.hidden){this.onFieldHide(e)}e.on({scope:this,show:this.onFieldShow,hide:this.onFieldHide})}this.configureItem(e)}else{Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)}},getTemplateArgs:function(b){var a=!b.fieldLabel||b.hideLabel;return{id:b.id,label:b.fieldLabel,itemCls:(b.itemCls||this.container.itemCls||\"\")+(b.hideLabel?\" x-hide-label\":\"\"),clearCls:b.clearCls||\"x-form-clear-left\",labelStyle:this.getLabelStyle(b.labelStyle),elementStyle:this.elementStyle||\"\",labelSeparator:a?\"\":(Ext.isDefined(b.labelSeparator)?b.labelSeparator:this.labelSeparator)}},adjustWidthAnchor:function(a,d){if(d.label&&!this.isHide(d)&&(this.container.labelAlign!=\"top\")){var b=Ext.isIE6||(Ext.isIE&&!Ext.isStrict);return a-this.labelAdjust+(b?-3:0)}return a},adjustHeightAnchor:function(a,b){if(b.label&&!this.isHide(b)&&(this.container.labelAlign==\"top\")){return a-b.label.getHeight()}return a},isValidParent:function(b,a){return a&&this.container.getEl().contains(b.getPositionEl())}});Ext.Container.LAYOUTS.form=Ext.layout.FormLayout;Ext.layout.AccordionLayout=Ext.extend(Ext.layout.FitLayout,{fill:true,autoWidth:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:false,animate:false,sequence:false,activeOnTop:false,type:\"accordion\",renderItem:function(a){if(this.animate===false){a.animCollapse=false}a.collapsible=true;if(this.autoWidth){a.autoWidth=true}if(this.titleCollapse){a.titleCollapse=true}if(this.hideCollapseTool){a.hideCollapseTool=true}if(this.collapseFirst!==undefined){a.collapseFirst=this.collapseFirst}if(!this.activeItem&&!a.collapsed){this.setActiveItem(a,true)}else{if(this.activeItem&&this.activeItem!=a){a.collapsed=true}}Ext.layout.AccordionLayout.superclass.renderItem.apply(this,arguments);a.header.addClass(\"x-accordion-hd\");a.on(\"beforeexpand\",this.beforeExpand,this)},onRemove:function(a){Ext.layout.AccordionLayout.superclass.onRemove.call(this,a);if(a.rendered){a.header.removeClass(\"x-accordion-hd\")}a.un(\"beforeexpand\",this.beforeExpand,this)},beforeExpand:function(c,b){var a=this.activeItem;if(a){if(this.sequence){delete this.activeItem;if(!a.collapsed){a.collapse({callback:function(){c.expand(b||true)},scope:this});return false}}else{a.collapse(this.animate)}}this.setActive(c);if(this.activeOnTop){c.el.dom.parentNode.insertBefore(c.el.dom,c.el.dom.parentNode.firstChild)}this.layout()},setItemSize:function(g,e){if(this.fill&&g){var d=0,c,b=this.getRenderedItems(this.container),a=b.length,h;for(c=0;c<a;c++){if((h=b[c])!=g&&!h.hidden){d+=h.header.getHeight()}}e.height-=d;g.setSize(e)}},setActiveItem:function(a){this.setActive(a,true)},setActive:function(c,b){var a=this.activeItem;c=this.container.getComponent(c);if(a!=c){if(c.rendered&&c.collapsed&&b){c.expand()}else{if(a){a.fireEvent(\"deactivate\",a)}this.activeItem=c;c.fireEvent(\"activate\",c)}}}});Ext.Container.LAYOUTS.accordion=Ext.layout.AccordionLayout;Ext.layout.Accordion=Ext.layout.AccordionLayout;Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:false,type:\"table\",targetCls:\"x-table-layout-ct\",tableAttrs:null,setContainer:function(a){Ext.layout.TableLayout.superclass.setContainer.call(this,a);this.currentRow=0;this.currentColumn=0;this.cells=[]},onLayout:function(d,g){var e=d.items.items,a=e.length,h,b;if(!this.table){g.addClass(\"x-table-layout-ct\");this.table=g.createChild(Ext.apply({tag:\"table\",cls:\"x-table-layout\",cellspacing:0,cn:{tag:\"tbody\"}},this.tableAttrs),null,true)}this.renderAll(d,g)},getRow:function(a){var b=this.table.tBodies[0].childNodes[a];if(!b){b=document.createElement(\"tr\");this.table.tBodies[0].appendChild(b)}return b},getNextCell:function(k){var a=this.getNextNonSpan(this.currentColumn,this.currentRow);var g=this.currentColumn=a[0],e=this.currentRow=a[1];for(var i=e;i<e+(k.rowspan||1);i++){if(!this.cells[i]){this.cells[i]=[]}for(var d=g;d<g+(k.colspan||1);d++){this.cells[i][d]=true}}var h=document.createElement(\"td\");if(k.cellId){h.id=k.cellId}var b=\"x-table-layout-cell\";if(k.cellCls){b+=\" \"+k.cellCls}h.className=b;if(k.colspan){h.colSpan=k.colspan}if(k.rowspan){h.rowSpan=k.rowspan}this.getRow(e).appendChild(h);return h},getNextNonSpan:function(a,c){var b=this.columns;while((b&&a>=b)||(this.cells[c]&&this.cells[c][a])){if(b&&a>=b){c++;a=0}else{a++}}return[a,c]},renderItem:function(e,a,d){if(!this.table){this.table=d.createChild(Ext.apply({tag:\"table\",cls:\"x-table-layout\",cellspacing:0,cn:{tag:\"tbody\"}},this.tableAttrs),null,true)}if(e&&!e.rendered){e.render(this.getNextCell(e));this.configureItem(e)}else{if(e&&!this.isValidParent(e,d)){var b=this.getNextCell(e);b.insertBefore(e.getPositionEl().dom,null);e.container=Ext.get(b);this.configureItem(e)}}},isValidParent:function(b,a){return b.getPositionEl().up(\"table\",5).dom.parentNode===(a.dom||a)},destroy:function(){delete this.table;Ext.layout.TableLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.table=Ext.layout.TableLayout;Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:\"x-abs-layout-item\",type:\"absolute\",onLayout:function(a,b){b.position();this.paddingLeft=b.getPadding(\"l\");this.paddingTop=b.getPadding(\"t\");Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,a,b)},adjustWidthAnchor:function(b,a){return b?b-a.getPosition(true)[0]+this.paddingLeft:b},adjustHeightAnchor:function(b,a){return b?b-a.getPosition(true)[1]+this.paddingTop:b}});Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout;Ext.layout.BoxLayout=Ext.extend(Ext.layout.ContainerLayout,{defaultMargins:{left:0,top:0,right:0,bottom:0},padding:\"0\",pack:\"start\",monitorResize:true,type:\"box\",scrollOffset:0,extraCls:\"x-box-item\",targetCls:\"x-box-layout-ct\",innerCls:\"x-box-inner\",constructor:function(a){Ext.layout.BoxLayout.superclass.constructor.call(this,a);if(Ext.isString(this.defaultMargins)){this.defaultMargins=this.parseMargins(this.defaultMargins)}var d=this.overflowHandler;if(typeof d==\"string\"){d={type:d}}var c=\"none\";if(d&&d.type!=undefined){c=d.type}var b=Ext.layout.boxOverflow[c];if(b[this.type]){b=b[this.type]}this.overflowHandler=new b(this,d)},onLayout:function(b,h){Ext.layout.BoxLayout.superclass.onLayout.call(this,b,h);var d=this.getLayoutTargetSize(),i=this.getVisibleItems(b),c=this.calculateChildBoxes(i,d),g=c.boxes,k=c.meta;if(d.width>0){var l=this.overflowHandler,a=k.tooNarrow?\"handleOverflow\":\"clearOverflow\";var e=l[a](c,d);if(e){if(e.targetSize){d=e.targetSize}if(e.recalculate){i=this.getVisibleItems(b);c=this.calculateChildBoxes(i,d);g=c.boxes}}}this.layoutTargetLastSize=d;this.childBoxCache=c;this.updateInnerCtSize(d,c);this.updateChildBoxes(g);this.handleTargetOverflow(d,b,h)},updateChildBoxes:function(c){for(var b=0,e=c.length;b<e;b++){var d=c[b],a=d.component;if(d.dirtySize){a.setSize(d.width,d.height)}if(isNaN(d.left)||isNaN(d.top)){continue}a.setPosition(d.left,d.top)}},updateInnerCtSize:function(c,h){var i=this.align,g=this.padding,e=c.width,a=c.height;if(this.type==\"hbox\"){var b=e,d=h.meta.maxHeight+g.top+g.bottom;if(i==\"stretch\"){d=a}else{if(i==\"middle\"){d=Math.max(a,d)}}}else{var d=a,b=h.meta.maxWidth+g.left+g.right;if(i==\"stretch\"){b=e}else{if(i==\"center\"){b=Math.max(e,b)}}}this.innerCt.setSize(b||undefined,d||undefined)},handleTargetOverflow:function(d,a,c){var e=c.getStyle(\"overflow\");if(e&&e!=\"hidden\"&&!this.adjustmentPass){var b=this.getLayoutTargetSize();if(b.width!=d.width||b.height!=d.height){this.adjustmentPass=true;this.onLayout(a,c)}}delete this.adjustmentPass},isValidParent:function(b,a){return this.innerCt&&b.getPositionEl().dom.parentNode==this.innerCt.dom},getVisibleItems:function(g){var g=g||this.container,e=g.getLayoutTarget(),h=g.items.items,a=h.length,d,k,b=[];for(d=0;d<a;d++){if((k=h[d]).rendered&&this.isValidParent(k,e)&&k.hidden!==true&&k.collapsed!==true&&k.shouldLayout!==false){b.push(k)}}return b},renderAll:function(a,b){if(!this.innerCt){this.innerCt=b.createChild({cls:this.innerCls});this.padding=this.parseMargins(this.padding)}Ext.layout.BoxLayout.superclass.renderAll.call(this,a,this.innerCt)},getLayoutTargetSize:function(){var b=this.container.getLayoutTarget(),a;if(b){a=b.getViewSize();if(Ext.isIE&&Ext.isStrict&&a.width==0){a=b.getStyleSize()}a.width-=b.getPadding(\"lr\");a.height-=b.getPadding(\"tb\")}return a},renderItem:function(a){if(Ext.isString(a.margins)){a.margins=this.parseMargins(a.margins)}else{if(!a.margins){a.margins=this.defaultMargins}}Ext.layout.BoxLayout.superclass.renderItem.apply(this,arguments)},destroy:function(){Ext.destroy(this.overflowHandler);Ext.layout.BoxLayout.superclass.destroy.apply(this,arguments)}});Ext.ns(\"Ext.layout.boxOverflow\");Ext.layout.boxOverflow.None=Ext.extend(Object,{constructor:function(b,a){this.layout=b;Ext.apply(this,a||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn});Ext.layout.boxOverflow.none=Ext.layout.boxOverflow.None;Ext.layout.boxOverflow.Menu=Ext.extend(Ext.layout.boxOverflow.None,{afterCls:\"x-strip-right\",noItemsMenuText:'<div class=\"x-toolbar-no-items\">(None)</div>',constructor:function(a){Ext.layout.boxOverflow.Menu.superclass.constructor.apply(this,arguments);this.menuItems=[]},createInnerElements:function(){if(!this.afterCt){this.afterCt=this.layout.innerCt.insertSibling({cls:this.afterCls},\"before\")}},clearOverflow:function(a,g){var e=g.width+(this.afterCt?this.afterCt.getWidth():0),b=this.menuItems;this.hideTrigger();for(var c=0,d=b.length;c<d;c++){b.pop().component.show()}return{targetSize:{height:g.height,width:e}}},showTrigger:function(){this.createMenu();this.menuTrigger.show()},hideTrigger:function(){if(this.menuTrigger!=undefined){this.menuTrigger.hide()}},beforeMenuShow:function(h){var b=this.menuItems,a=b.length,g,e;var c=function(k,i){return k.isXType(\"buttongroup\")&&!(i instanceof Ext.Toolbar.Separator)};this.clearMenu();h.removeAll();for(var d=0;d<a;d++){g=b[d].component;if(e&&(c(g,e)||c(e,g))){h.add(\"-\")}this.addComponentToMenu(h,g);e=g}if(h.items.length<1){h.add(this.noItemsMenuText)}},createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),d=c.toggleGroup;Ext.copyTo(b,c,[\"iconCls\",\"icon\",\"itemId\",\"disabled\",\"handler\",\"scope\",\"menu\"]);Ext.apply(b,{text:c.overflowText||c.text,hideOnClick:a});if(d||c.enableToggle){Ext.apply(b,{group:d,checked:c.pressed,listeners:{checkchange:function(g,e){c.toggle(e)}}})}delete b.ownerCt;delete b.xtype;delete b.id;return b},addComponentToMenu:function(b,a){if(a instanceof Ext.Toolbar.Separator){b.add(\"-\")}else{if(Ext.isFunction(a.isXType)){if(a.isXType(\"splitbutton\")){b.add(this.createMenuConfig(a,true))}else{if(a.isXType(\"button\")){b.add(this.createMenuConfig(a,!a.menu))}else{if(a.isXType(\"buttongroup\")){a.items.each(function(c){this.addComponentToMenu(b,c)},this)}}}}}},clearMenu:function(){var a=this.moreMenu;if(a&&a.items){a.items.each(function(b){delete b.menu})}},createMenu:function(){if(!this.menuTrigger){this.createInnerElements();this.menu=new Ext.menu.Menu({ownerCt:this.layout.container,listeners:{scope:this,beforeshow:this.beforeMenuShow}});this.menuTrigger=new Ext.Button({iconCls:\"x-toolbar-more-icon\",cls:\"x-toolbar-more\",menu:this.menu,renderTo:this.afterCt})}},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}});Ext.layout.boxOverflow.menu=Ext.layout.boxOverflow.Menu;Ext.layout.boxOverflow.HorizontalMenu=Ext.extend(Ext.layout.boxOverflow.Menu,{constructor:function(){Ext.layout.boxOverflow.HorizontalMenu.superclass.constructor.apply(this,arguments);var c=this,b=c.layout,a=b.calculateChildBoxes;b.calculateChildBoxes=function(d,i){var m=a.apply(b,arguments),l=m.meta,e=c.menuItems;var k=0;for(var g=0,h=e.length;g<h;g++){k+=e[g].width}l.minimumWidth+=k;l.tooNarrow=l.minimumWidth>i.width;return m}},handleOverflow:function(d,h){this.showTrigger();var l=h.width-this.afterCt.getWidth(),m=d.boxes,e=0,s=false;for(var p=0,c=m.length;p<c;p++){e+=m[p].width}var a=l-e,g=0;for(var p=0,c=this.menuItems.length;p<c;p++){var o=this.menuItems[p],n=o.component,b=o.width;if(b<a){n.show();a-=b;g++;s=true}else{break}}if(s){this.menuItems=this.menuItems.slice(g)}else{for(var k=m.length-1;k>=0;k--){var r=m[k].component,q=m[k].left+m[k].width;if(q>=l){this.menuItems.unshift({component:r,width:m[k].width});r.hide()}else{break}}}if(this.menuItems.length==0){this.hideTrigger()}return{targetSize:{height:h.height,width:l},recalculate:s}}});Ext.layout.boxOverflow.menu.hbox=Ext.layout.boxOverflow.HorizontalMenu;Ext.layout.boxOverflow.Scroller=Ext.extend(Ext.layout.boxOverflow.None,{animateScroll:true,scrollIncrement:100,wheelIncrement:3,scrollRepeatInterval:400,scrollDuration:0.4,beforeCls:\"x-strip-left\",afterCls:\"x-strip-right\",scrollerCls:\"x-strip-scroller\",beforeScrollerCls:\"x-strip-scroller-left\",afterScrollerCls:\"x-strip-scroller-right\",createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(a){a.stopEvent();this.scrollBy(a.getWheelDelta()*this.wheelIncrement*-1,false)}})},handleOverflow:function(a,b){this.createInnerElements();this.showScrollers()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers();this.beforeScroller.show();this.afterScroller.show();this.updateScrollButtons()},hideScrollers:function(){if(this.beforeScroller!=undefined){this.beforeScroller.hide();this.afterScroller.hide()}},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var a=this.beforeCt.createChild({cls:String.format(\"{0} {1} \",this.scrollerCls,this.beforeScrollerCls)});var b=this.afterCt.createChild({cls:String.format(\"{0} {1}\",this.scrollerCls,this.afterScrollerCls)});a.addClassOnOver(this.beforeScrollerCls+\"-hover\");b.addClassOnOver(this.afterScrollerCls+\"-hover\");a.setVisibilityMode(Ext.Element.DISPLAY);b.setVisibilityMode(Ext.Element.DISPLAY);this.beforeRepeater=new Ext.util.ClickRepeater(a,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this});this.afterRepeater=new Ext.util.ClickRepeater(b,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this});this.beforeScroller=a;this.afterScroller=b}},destroy:function(){Ext.destroy(this.beforeScroller,this.afterScroller,this.beforeRepeater,this.afterRepeater,this.beforeCt,this.afterCt)},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getItem:function(a){if(Ext.isString(a)){a=Ext.getCmp(a)}else{if(Ext.isNumber(a)){a=this.items[a]}}return a},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller==undefined||this.afterScroller==undefined){return}var d=this.atExtremeBefore()?\"addClass\":\"removeClass\",c=this.atExtremeAfter()?\"addClass\":\"removeClass\",a=this.beforeScrollerCls+\"-disabled\",b=this.afterScrollerCls+\"-disabled\";this.beforeScroller[d](a);this.afterScroller[c](b);this.scrolling=false},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(a){this.scrollBy(-this.scrollIncrement,a)},scrollRight:function(a){this.scrollBy(this.scrollIncrement,a)},scrollToItem:function(d,b){d=this.getItem(d);if(d!=undefined){var a=this.getItemVisibility(d);if(!a.fullyVisible){var c=d.getBox(true,true),e=c.x;if(a.hiddenRight){e-=(this.layout.innerCt.getWidth()-c.width)}this.scrollTo(e,b)}}},getItemVisibility:function(e){var d=this.getItem(e).getBox(true,true),a=d.x,c=d.x+d.width,g=this.getScrollPosition(),b=this.layout.innerCt.getWidth()+g;return{hiddenLeft:a<g,hiddenRight:c>b,fullyVisible:a>g&&c<b}}});Ext.layout.boxOverflow.scroller=Ext.layout.boxOverflow.Scroller;Ext.layout.boxOverflow.VerticalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{scrollIncrement:75,wheelIncrement:2,handleOverflow:function(a,b){Ext.layout.boxOverflow.VerticalScroller.superclass.handleOverflow.apply(this,arguments);return{targetSize:{height:b.height-(this.beforeCt.getHeight()+this.afterCt.getHeight()),width:b.width}}},createInnerElements:function(){var a=this.layout.innerCt;if(!this.beforeCt){this.beforeCt=a.insertSibling({cls:this.beforeCls},\"before\");this.afterCt=a.insertSibling({cls:this.afterCls},\"after\");this.createWheelListener()}},scrollTo:function(a,b){var d=this.getScrollPosition(),c=a.constrain(0,this.getMaxScrollBottom());if(c!=d&&!this.scrolling){if(b==undefined){b=this.animateScroll}this.layout.innerCt.scrollTo(\"top\",c,b?this.getScrollAnim():false);if(b){this.scrolling=true}else{this.scrolling=false;this.updateScrollButtons()}}},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollTop,10)||0},getMaxScrollBottom:function(){return this.layout.innerCt.dom.scrollHeight-this.layout.innerCt.getHeight()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollBottom()}});Ext.layout.boxOverflow.scroller.vbox=Ext.layout.boxOverflow.VerticalScroller;Ext.layout.boxOverflow.HorizontalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{handleOverflow:function(a,b){Ext.layout.boxOverflow.HorizontalScroller.superclass.handleOverflow.apply(this,arguments);return{targetSize:{height:b.height,width:b.width-(this.beforeCt.getWidth()+this.afterCt.getWidth())}}},createInnerElements:function(){var a=this.layout.innerCt;if(!this.beforeCt){this.afterCt=a.insertSibling({cls:this.afterCls},\"before\");this.beforeCt=a.insertSibling({cls:this.beforeCls},\"before\");this.createWheelListener()}},scrollTo:function(a,b){var d=this.getScrollPosition(),c=a.constrain(0,this.getMaxScrollRight());if(c!=d&&!this.scrolling){if(b==undefined){b=this.animateScroll}this.layout.innerCt.scrollTo(\"left\",c,b?this.getScrollAnim():false);if(b){this.scrolling=true}else{this.scrolling=false;this.updateScrollButtons()}}},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollLeft,10)||0},getMaxScrollRight:function(){return this.layout.innerCt.dom.scrollWidth-this.layout.innerCt.getWidth()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollRight()}});Ext.layout.boxOverflow.scroller.hbox=Ext.layout.boxOverflow.HorizontalScroller;Ext.layout.HBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:\"top\",type:\"hbox\",calculateChildBoxes:function(s,b){var G=s.length,S=this.padding,E=S.top,V=S.left,z=E+S.bottom,P=V+S.right,a=b.width-this.scrollOffset,e=b.height,p=Math.max(0,e-z),Q=this.pack==\"start\",X=this.pack==\"center\",B=this.pack==\"end\",M=0,R=0,U=0,m=0,Y=0,I=[],l,K,N,W,x,k,T,J,c,y,r,O;for(T=0;T<G;T++){l=s[T];N=l.height;K=l.width;k=!l.hasLayout&&typeof l.doLayout==\"function\";if(typeof K!=\"number\"){if(l.flex&&!K){U+=l.flex}else{if(!K&&k){l.doLayout()}W=l.getSize();K=W.width;N=W.height}}x=l.margins;y=x.left+x.right;M+=y+(K||0);m+=y+(l.flex?l.minWidth||0:K);Y+=y+(l.minWidth||K||0);if(typeof N!=\"number\"){if(k){l.doLayout()}N=l.getHeight()}R=Math.max(R,N+x.top+x.bottom);I.push({component:l,height:N||undefined,width:K||undefined})}var L=m-a,q=Y>a;var o=Math.max(0,a-M-P);if(q){for(T=0;T<G;T++){I[T].width=s[T].minWidth||s[T].width||I[T].width}}else{if(L>0){var D=[];for(var F=0,w=G;F<w;F++){var C=s[F],u=C.minWidth||0;if(C.flex){I[F].width=u}else{D.push({minWidth:u,available:I[F].width-u,index:F})}}D.sort(function(Z,i){return Z.available>i.available?1:-1});for(var T=0,w=D.length;T<w;T++){var H=D[T].index;if(H==undefined){continue}var C=s[H],n=I[H],v=n.width,u=C.minWidth,d=Math.max(u,v-Math.ceil(L/(w-T))),g=v-d;I[H].width=d;L-=g}}else{var h=o,t=U;for(T=0;T<G;T++){l=s[T];J=I[T];x=l.margins;r=x.top+x.bottom;if(Q&&l.flex&&!l.width){c=Math.ceil((l.flex/t)*h);h-=c;t-=l.flex;J.width=c;J.dirtySize=true}}}}if(X){V+=o/2}else{if(B){V+=o}}for(T=0;T<G;T++){l=s[T];J=I[T];x=l.margins;V+=x.left;r=x.top+x.bottom;J.left=V;J.top=E+x.top;switch(this.align){case\"stretch\":O=p-r;J.height=O.constrain(l.minHeight||0,l.maxHeight||1000000);J.dirtySize=true;break;case\"stretchmax\":O=R-r;J.height=O.constrain(l.minHeight||0,l.maxHeight||1000000);J.dirtySize=true;break;case\"middle\":var A=p-J.height-r;if(A>0){J.top=E+r+(A/2)}}V+=J.width+x.right}return{boxes:I,meta:{maxHeight:R,nonFlexWidth:M,desiredWidth:m,minimumWidth:Y,shortfall:m-a,tooNarrow:q}}}});Ext.Container.LAYOUTS.hbox=Ext.layout.HBoxLayout;Ext.layout.VBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:\"left\",type:\"vbox\",calculateChildBoxes:function(q,b){var G=q.length,T=this.padding,E=T.top,W=T.left,z=E+T.bottom,Q=W+T.right,a=b.width-this.scrollOffset,d=b.height,M=Math.max(0,a-Q),R=this.pack==\"start\",Y=this.pack==\"center\",B=this.pack==\"end\",m=0,w=0,V=0,N=0,o=0,I=[],k,K,P,X,v,h,U,J,c,y,p,e;for(U=0;U<G;U++){k=q[U];P=k.height;K=k.width;h=!k.hasLayout&&typeof k.doLayout==\"function\";if(typeof P!=\"number\"){if(k.flex&&!P){V+=k.flex}else{if(!P&&h){k.doLayout()}X=k.getSize();K=X.width;P=X.height}}v=k.margins;p=v.top+v.bottom;m+=p+(P||0);N+=p+(k.flex?k.minHeight||0:P);o+=p+(k.minHeight||P||0);if(typeof K!=\"number\"){if(h){k.doLayout()}K=k.getWidth()}w=Math.max(w,K+v.left+v.right);I.push({component:k,height:P||undefined,width:K||undefined})}var O=N-d,n=o>d;var s=Math.max(0,(d-m-z));if(n){for(U=0,t=G;U<t;U++){I[U].height=q[U].minHeight||q[U].height||I[U].height}}else{if(O>0){var L=[];for(var F=0,t=G;F<t;F++){var C=q[F],u=C.minHeight||0;if(C.flex){I[F].height=u}else{L.push({minHeight:u,available:I[F].height-u,index:F})}}L.sort(function(Z,i){return Z.available>i.available?1:-1});for(var U=0,t=L.length;U<t;U++){var H=L[U].index;if(H==undefined){continue}var C=q[H],l=I[H],x=l.height,u=C.minHeight,D=Math.max(u,x-Math.ceil(O/(t-U))),g=x-D;I[H].height=D;O-=g}}else{var S=s,r=V;for(U=0;U<G;U++){k=q[U];J=I[U];v=k.margins;y=v.left+v.right;if(R&&k.flex&&!k.height){flexedHeight=Math.ceil((k.flex/r)*S);S-=flexedHeight;r-=k.flex;J.height=flexedHeight;J.dirtySize=true}}}}if(Y){E+=s/2}else{if(B){E+=s}}for(U=0;U<G;U++){k=q[U];J=I[U];v=k.margins;E+=v.top;y=v.left+v.right;J.left=W+v.left;J.top=E;switch(this.align){case\"stretch\":e=M-y;J.width=e.constrain(k.minWidth||0,k.maxWidth||1000000);J.dirtySize=true;break;case\"stretchmax\":e=w-y;J.width=e.constrain(k.minWidth||0,k.maxWidth||1000000);J.dirtySize=true;break;case\"center\":var A=M-J.width-y;if(A>0){J.left=W+y+(A/2)}}E+=J.height+v.bottom}return{boxes:I,meta:{maxWidth:w,nonFlexHeight:m,desiredHeight:N,minimumHeight:o,shortfall:N-d,tooNarrow:n}}}});Ext.Container.LAYOUTS.vbox=Ext.layout.VBoxLayout;Ext.layout.ToolbarLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"toolbar\",triggerWidth:18,noItemsMenuText:'<div class=\"x-toolbar-no-items\">(None)</div>',lastOverflow:false,tableHTML:['<table cellspacing=\"0\" class=\"x-toolbar-ct\">',\"<tbody>\",\"<tr>\",'<td class=\"x-toolbar-left\" align=\"{0}\">','<table cellspacing=\"0\">',\"<tbody>\",'<tr class=\"x-toolbar-left-row\"></tr>',\"</tbody>\",\"</table>\",\"</td>\",'<td class=\"x-toolbar-right\" align=\"right\">','<table cellspacing=\"0\" class=\"x-toolbar-right-ct\">',\"<tbody>\",\"<tr>\",\"<td>\",'<table cellspacing=\"0\">',\"<tbody>\",'<tr class=\"x-toolbar-right-row\"></tr>',\"</tbody>\",\"</table>\",\"</td>\",\"<td>\",'<table cellspacing=\"0\">',\"<tbody>\",'<tr class=\"x-toolbar-extras-row\"></tr>',\"</tbody>\",\"</table>\",\"</td>\",\"</tr>\",\"</tbody>\",\"</table>\",\"</td>\",\"</tr>\",\"</tbody>\",\"</table>\"].join(\"\"),onLayout:function(e,k){if(!this.leftTr){var h=e.buttonAlign==\"center\"?\"center\":\"left\";k.addClass(\"x-toolbar-layout-ct\");k.insertHtml(\"beforeEnd\",String.format(this.tableHTML,h));this.leftTr=k.child(\"tr.x-toolbar-left-row\",true);this.rightTr=k.child(\"tr.x-toolbar-right-row\",true);this.extrasTr=k.child(\"tr.x-toolbar-extras-row\",true);if(this.hiddenItem==undefined){this.hiddenItems=[]}}var l=e.buttonAlign==\"right\"?this.rightTr:this.leftTr,m=e.items.items,d=0;for(var b=0,g=m.length,n;b<g;b++,d++){n=m[b];if(n.isFill){l=this.rightTr;d=-1}else{if(!n.rendered){n.render(this.insertCell(n,l,d));this.configureItem(n)}else{if(!n.xtbHidden&&!this.isValidParent(n,l.childNodes[d])){var a=this.insertCell(n,l,d);a.appendChild(n.getPositionEl().dom);n.container=Ext.get(a)}}}}this.cleanup(this.leftTr);this.cleanup(this.rightTr);this.cleanup(this.extrasTr);this.fitToSize(k)},cleanup:function(b){var e=b.childNodes,a,d;for(a=e.length-1;a>=0&&(d=e[a]);a--){if(!d.firstChild){b.removeChild(d)}}},insertCell:function(e,b,a){var d=document.createElement(\"td\");d.className=\"x-toolbar-cell\";b.insertBefore(d,b.childNodes[a]||null);return d},hideItem:function(a){this.hiddenItems.push(a);a.xtbHidden=true;a.xtbWidth=a.getPositionEl().dom.parentNode.offsetWidth;a.hide()},unhideItem:function(a){a.show();a.xtbHidden=false;this.hiddenItems.remove(a)},getItemWidth:function(a){return a.hidden?(a.xtbWidth||0):a.getPositionEl().dom.parentNode.offsetWidth},fitToSize:function(l){if(this.container.enableOverflow===false){return}var b=l.dom.clientWidth,k=l.dom.firstChild.offsetWidth,n=b-this.triggerWidth,a=this.lastWidth||0,c=this.hiddenItems,e=c.length!=0,o=b>=a;this.lastWidth=b;if(k>b||(e&&o)){var m=this.container.items.items,h=m.length,d=0,p;for(var g=0;g<h;g++){p=m[g];if(!p.isFill){d+=this.getItemWidth(p);if(d>n){if(!(p.hidden||p.xtbHidden)){this.hideItem(p)}}else{if(p.xtbHidden){this.unhideItem(p)}}}}}e=c.length!=0;if(e){this.initMore();if(!this.lastOverflow){this.container.fireEvent(\"overflowchange\",this.container,true);this.lastOverflow=true}}else{if(this.more){this.clearMenu();this.more.destroy();delete this.more;if(this.lastOverflow){this.container.fireEvent(\"overflowchange\",this.container,false);this.lastOverflow=false}}}},createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),d=c.toggleGroup;Ext.copyTo(b,c,[\"iconCls\",\"icon\",\"itemId\",\"disabled\",\"handler\",\"scope\",\"menu\"]);Ext.apply(b,{text:c.overflowText||c.text,hideOnClick:a});if(d||c.enableToggle){Ext.apply(b,{group:d,checked:c.pressed,listeners:{checkchange:function(g,e){c.toggle(e)}}})}delete b.ownerCt;delete b.xtype;delete b.id;return b},addComponentToMenu:function(b,a){if(a instanceof Ext.Toolbar.Separator){b.add(\"-\")}else{if(Ext.isFunction(a.isXType)){if(a.isXType(\"splitbutton\")){b.add(this.createMenuConfig(a,true))}else{if(a.isXType(\"button\")){b.add(this.createMenuConfig(a,!a.menu))}else{if(a.isXType(\"buttongroup\")){a.items.each(function(c){this.addComponentToMenu(b,c)},this)}}}}}},clearMenu:function(){var a=this.moreMenu;if(a&&a.items){a.items.each(function(b){delete b.menu})}},beforeMoreShow:function(h){var b=this.container.items.items,a=b.length,g,e;var c=function(k,i){return k.isXType(\"buttongroup\")&&!(i instanceof Ext.Toolbar.Separator)};this.clearMenu();h.removeAll();for(var d=0;d<a;d++){g=b[d];if(g.xtbHidden){if(e&&(c(g,e)||c(e,g))){h.add(\"-\")}this.addComponentToMenu(h,g);e=g}}if(h.items.length<1){h.add(this.noItemsMenuText)}},initMore:function(){if(!this.more){this.moreMenu=new Ext.menu.Menu({ownerCt:this.container,listeners:{beforeshow:this.beforeMoreShow,scope:this}});this.more=new Ext.Button({iconCls:\"x-toolbar-more-icon\",cls:\"x-toolbar-more\",menu:this.moreMenu,ownerCt:this.container});var a=this.insertCell(this.more,this.extrasTr,100);this.more.render(a)}},destroy:function(){Ext.destroy(this.more,this.moreMenu);delete this.leftTr;delete this.rightTr;delete this.extrasTr;Ext.layout.ToolbarLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.toolbar=Ext.layout.ToolbarLayout;Ext.layout.MenuLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"menu\",setContainer:function(a){this.monitorResize=!a.floating;a.on(\"autosize\",this.doAutoSize,this);Ext.layout.MenuLayout.superclass.setContainer.call(this,a)},renderItem:function(g,b,e){if(!this.itemTpl){this.itemTpl=Ext.layout.MenuLayout.prototype.itemTpl=new Ext.XTemplate('<li id=\"{itemId}\" class=\"{itemCls}\">','<tpl if=\"needsIcon\">','<img alt=\"{altText}\" src=\"{icon}\" class=\"{iconCls}\"/>',\"</tpl>\",\"</li>\")}if(g&&!g.rendered){if(Ext.isNumber(b)){b=e.dom.childNodes[b]}var d=this.getItemArgs(g);g.render(g.positionEl=b?this.itemTpl.insertBefore(b,d,true):this.itemTpl.append(e,d,true));g.positionEl.menuItemId=g.getItemId();if(!d.isMenuItem&&d.needsIcon){g.positionEl.addClass(\"x-menu-list-item-indent\")}this.configureItem(g)}else{if(g&&!this.isValidParent(g,e)){if(Ext.isNumber(b)){b=e.dom.childNodes[b]}e.dom.insertBefore(g.getActionEl().dom,b||null)}}},getItemArgs:function(d){var a=d instanceof Ext.menu.Item,b=!(a||d instanceof Ext.menu.Separator);return{isMenuItem:a,needsIcon:b&&(d.icon||d.iconCls),icon:d.icon||Ext.BLANK_IMAGE_URL,iconCls:\"x-menu-item-icon \"+(d.iconCls||\"\"),itemId:\"x-menu-el-\"+d.id,itemCls:\"x-menu-list-item \",altText:d.altText||\"\"}},isValidParent:function(b,a){return b.el.up(\"li.x-menu-list-item\",5).dom.parentNode===(a.dom||a)},onLayout:function(a,b){Ext.layout.MenuLayout.superclass.onLayout.call(this,a,b);this.doAutoSize()},doAutoSize:function(){var c=this.container,a=c.width;if(c.floating){if(a){c.setWidth(a)}else{if(Ext.isIE){c.setWidth(Ext.isStrict&&(Ext.isIE7||Ext.isIE8)?\"auto\":c.minWidth);var d=c.getEl(),b=d.dom.offsetWidth;c.setWidth(c.getLayoutTarget().getWidth()+d.getFrameWidth(\"lr\"))}}}}});Ext.Container.LAYOUTS.menu=Ext.layout.MenuLayout;Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this);document.getElementsByTagName(\"html\")[0].className+=\" x-viewport\";this.el=Ext.getBody();this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll=\"no\";this.allowDomMove=false;this.autoWidth=true;this.autoHeight=true;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(a,b){this.fireEvent(\"resize\",this,a,b,a,b)}});Ext.reg(\"viewport\",Ext.Viewport);Ext.Panel=Ext.extend(Ext.Container,{baseCls:\"x-panel\",collapsedCls:\"x-panel-collapsed\",maskDisabled:true,animCollapse:Ext.enableFx,headerAsText:true,buttonAlign:\"right\",collapsed:false,collapseFirst:true,minButtonWidth:75,elements:\"body\",preventBodyReset:false,padding:undefined,resizeEvent:\"bodyresize\",toolTarget:\"header\",collapseEl:\"bwrap\",slideAnchor:\"t\",disabledClass:\"\",deferHeight:true,expandDefaults:{duration:0.25},collapseDefaults:{duration:0.25},initComponent:function(){Ext.Panel.superclass.initComponent.call(this);this.addEvents(\"bodyresize\",\"titlechange\",\"iconchange\",\"collapse\",\"expand\",\"beforecollapse\",\"beforeexpand\",\"beforeclose\",\"close\",\"activate\",\"deactivate\");if(this.unstyled){this.baseCls=\"x-plain\"}this.toolbars=[];if(this.tbar){this.elements+=\",tbar\";this.topToolbar=this.createToolbar(this.tbar);this.tbar=null}if(this.bbar){this.elements+=\",bbar\";this.bottomToolbar=this.createToolbar(this.bbar);this.bbar=null}if(this.header===true){this.elements+=\",header\";this.header=null}else{if(this.headerCfg||(this.title&&this.header!==false)){this.elements+=\",header\"}}if(this.footerCfg||this.footer===true){this.elements+=\",footer\";this.footer=null}if(this.buttons){this.fbar=this.buttons;this.buttons=null}if(this.fbar){this.createFbar(this.fbar)}if(this.autoLoad){this.on(\"render\",this.doAutoLoad,this,{delay:10})}},createFbar:function(b){var a=this.minButtonWidth;this.elements+=\",footer\";this.fbar=this.createToolbar(b,{buttonAlign:this.buttonAlign,toolbarCls:\"x-panel-fbar\",enableOverflow:false,defaults:function(d){return{minWidth:d.minWidth||a}}});this.fbar.items.each(function(d){d.minWidth=d.minWidth||this.minButtonWidth},this);this.buttons=this.fbar.items.items},createToolbar:function(b,c){var a;if(Ext.isArray(b)){b={items:b}}a=b.events?Ext.apply(b,c):this.createComponent(Ext.apply({},b,c),\"toolbar\");this.toolbars.push(a);return a},createElement:function(a,c){if(this[a]){c.appendChild(this[a].dom);return}if(a===\"bwrap\"||this.elements.indexOf(a)!=-1){if(this[a+\"Cfg\"]){this[a]=Ext.fly(c).createChild(this[a+\"Cfg\"])}else{var b=document.createElement(\"div\");b.className=this[a+\"Cls\"];this[a]=Ext.get(c.appendChild(b))}if(this[a+\"CssClass\"]){this[a].addClass(this[a+\"CssClass\"])}if(this[a+\"Style\"]){this[a].applyStyles(this[a+\"Style\"])}}},onRender:function(g,e){Ext.Panel.superclass.onRender.call(this,g,e);this.createClasses();var a=this.el,h=a.dom,l,i;if(this.collapsible&&!this.hideCollapseTool){this.tools=this.tools?this.tools.slice(0):[];this.tools[this.collapseFirst?\"unshift\":\"push\"]({id:\"toggle\",handler:this.toggleCollapse,scope:this})}if(this.tools){i=this.tools;this.elements+=(this.header!==false)?\",header\":\"\"}this.tools={};a.addClass(this.baseCls);if(h.firstChild){this.header=a.down(\".\"+this.headerCls);this.bwrap=a.down(\".\"+this.bwrapCls);var k=this.bwrap?this.bwrap:a;this.tbar=k.down(\".\"+this.tbarCls);this.body=k.down(\".\"+this.bodyCls);this.bbar=k.down(\".\"+this.bbarCls);this.footer=k.down(\".\"+this.footerCls);this.fromMarkup=true}if(this.preventBodyReset===true){a.addClass(\"x-panel-reset\")}if(this.cls){a.addClass(this.cls)}if(this.buttons){this.elements+=\",footer\"}if(this.frame){a.insertHtml(\"afterBegin\",String.format(Ext.Element.boxMarkup,this.baseCls));this.createElement(\"header\",h.firstChild.firstChild.firstChild);this.createElement(\"bwrap\",h);l=this.bwrap.dom;var c=h.childNodes[1],b=h.childNodes[2];l.appendChild(c);l.appendChild(b);var m=l.firstChild.firstChild.firstChild;this.createElement(\"tbar\",m);this.createElement(\"body\",m);this.createElement(\"bbar\",m);this.createElement(\"footer\",l.lastChild.firstChild.firstChild);if(!this.footer){this.bwrap.dom.lastChild.className+=\" x-panel-nofooter\"}this.ft=Ext.get(this.bwrap.dom.lastChild);this.mc=Ext.get(m)}else{this.createElement(\"header\",h);this.createElement(\"bwrap\",h);l=this.bwrap.dom;this.createElement(\"tbar\",l);this.createElement(\"body\",l);this.createElement(\"bbar\",l);this.createElement(\"footer\",l);if(!this.header){this.body.addClass(this.bodyCls+\"-noheader\");if(this.tbar){this.tbar.addClass(this.tbarCls+\"-noheader\")}}}if(Ext.isDefined(this.padding)){this.body.setStyle(\"padding\",this.body.addUnits(this.padding))}if(this.border===false){this.el.addClass(this.baseCls+\"-noborder\");this.body.addClass(this.bodyCls+\"-noborder\");if(this.header){this.header.addClass(this.headerCls+\"-noborder\")}if(this.footer){this.footer.addClass(this.footerCls+\"-noborder\")}if(this.tbar){this.tbar.addClass(this.tbarCls+\"-noborder\")}if(this.bbar){this.bbar.addClass(this.bbarCls+\"-noborder\")}}if(this.bodyBorder===false){this.body.addClass(this.bodyCls+\"-noborder\")}this.bwrap.enableDisplayMode(\"block\");if(this.header){this.header.unselectable();if(this.headerAsText){this.header.dom.innerHTML='<span class=\"'+this.headerTextCls+'\">'+this.header.dom.innerHTML+\"</span>\";if(this.iconCls){this.setIconClass(this.iconCls)}}}if(this.floating){this.makeFloating(this.floating)}if(this.collapsible&&this.titleCollapse&&this.header){this.mon(this.header,\"click\",this.toggleCollapse,this);this.header.setStyle(\"cursor\",\"pointer\")}if(i){this.addTool.apply(this,i)}if(this.fbar){this.footer.addClass(\"x-panel-btns\");this.fbar.ownerCt=this;this.fbar.render(this.footer);this.footer.createChild({cls:\"x-clear\"})}if(this.tbar&&this.topToolbar){this.topToolbar.ownerCt=this;this.topToolbar.render(this.tbar)}if(this.bbar&&this.bottomToolbar){this.bottomToolbar.ownerCt=this;this.bottomToolbar.render(this.bbar)}},setIconClass:function(b){var a=this.iconCls;this.iconCls=b;if(this.rendered&&this.header){if(this.frame){this.header.addClass(\"x-panel-icon\");this.header.replaceClass(a,this.iconCls)}else{var e=this.header,c=e.child(\"img.x-panel-inline-icon\");if(c){Ext.fly(c).replaceClass(a,this.iconCls)}else{var d=e.child(\"span.\"+this.headerTextCls);if(d){Ext.DomHelper.insertBefore(d.dom,{tag:\"img\",alt:\"\",src:Ext.BLANK_IMAGE_URL,cls:\"x-panel-inline-icon \"+this.iconCls})}}}}this.fireEvent(\"iconchange\",this,b,a)},makeFloating:function(a){this.floating=true;this.el=new Ext.Layer(Ext.apply({},a,{shadow:Ext.isDefined(this.shadow)?this.shadow:\"sides\",shadowOffset:this.shadowOffset,constrain:false,shim:this.shim===false?false:undefined}),this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},getFooterToolbar:function(){return this.fbar},addButton:function(a,c,b){if(!this.fbar){this.createFbar([])}if(c){if(Ext.isString(a)){a={text:a}}a=Ext.apply({handler:c,scope:b},a)}return this.fbar.add(a)},addTool:function(){if(!this.rendered){if(!this.tools){this.tools=[]}Ext.each(arguments,function(a){this.tools.push(a)},this);return}if(!this[this.toolTarget]){return}if(!this.toolTemplate){var h=new Ext.Template('<div class=\"x-tool x-tool-{id}\">&#160;</div>');h.disableFormats=true;h.compile();Ext.Panel.prototype.toolTemplate=h}for(var g=0,d=arguments,c=d.length;g<c;g++){var b=d[g];if(!this.tools[b.id]){var k=\"x-tool-\"+b.id+\"-over\";var e=this.toolTemplate.insertFirst(this[this.toolTarget],b,true);this.tools[b.id]=e;e.enableDisplayMode(\"block\");this.mon(e,\"click\",this.createToolHandler(e,b,k,this));if(b.on){this.mon(e,b.on)}if(b.hidden){e.hide()}if(b.qtip){if(Ext.isObject(b.qtip)){Ext.QuickTips.register(Ext.apply({target:e.id},b.qtip))}else{e.dom.qtip=b.qtip}}e.addClassOnOver(k)}}},onLayout:function(b,a){Ext.Panel.superclass.onLayout.apply(this,arguments);if(this.hasLayout&&this.toolbars.length>0){Ext.each(this.toolbars,function(c){c.doLayout(undefined,a)});this.syncHeight()}},syncHeight:function(){var b=this.toolbarHeight,c=this.body,a=this.lastSize.height,d;if(this.autoHeight||!Ext.isDefined(a)||a==\"auto\"){return}if(b!=this.getToolbarHeight()){b=Math.max(0,a-this.getFrameHeight());c.setHeight(b);d=c.getSize();this.toolbarHeight=this.getToolbarHeight();this.onBodyResize(d.width,d.height)}},onShow:function(){if(this.floating){return this.el.show()}Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating){return this.el.hide()}Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(c,a,d,b){return function(g){c.removeClass(d);if(a.stopEvent!==false){g.stopEvent()}if(a.handler){a.handler.call(a.scope||c,g,c,b,a)}}},afterRender:function(){if(this.floating&&!this.hidden){this.el.show()}if(this.title){this.setTitle(this.title)}Ext.Panel.superclass.afterRender.call(this);if(this.collapsed){this.collapsed=false;this.collapse(false)}this.initEvents()},getKeyMap:function(){if(!this.keyMap){this.keyMap=new Ext.KeyMap(this.el,this.keys)}return this.keyMap},initEvents:function(){if(this.keys){this.getKeyMap()}if(this.draggable){this.initDraggable()}if(this.toolbars.length>0){Ext.each(this.toolbars,function(a){a.doLayout();a.on({scope:this,afterlayout:this.syncHeight,remove:this.syncHeight})},this);this.syncHeight()}},initDraggable:function(){this.dd=new Ext.Panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},beforeEffect:function(a){if(this.floating){this.el.beforeAction()}if(a!==false){this.el.addClass(\"x-panel-animated\")}},afterEffect:function(a){this.syncShadow();this.el.removeClass(\"x-panel-animated\")},createEffect:function(c,b,d){var e={scope:d,block:true};if(c===true){e.callback=b;return e}else{if(!c.callback){e.callback=b}else{e.callback=function(){b.call(d);Ext.callback(c.callback,c.scope)}}}return Ext.applyIf(e,c)},collapse:function(b){if(this.collapsed||this.el.hasFxBlock()||this.fireEvent(\"beforecollapse\",this,b)===false){return}var a=b===true||(b!==false&&this.animCollapse);this.beforeEffect(a);this.onCollapse(a,b);return this},onCollapse:function(a,b){if(a){this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(b||true,this.afterCollapse,this),this.collapseDefaults))}else{this[this.collapseEl].hide(this.hideMode);this.afterCollapse(false)}},afterCollapse:function(a){this.collapsed=true;this.el.addClass(this.collapsedCls);if(a!==false){this[this.collapseEl].hide(this.hideMode)}this.afterEffect(a);this.cascade(function(b){if(b.lastSize){b.lastSize={width:undefined,height:undefined}}});this.fireEvent(\"collapse\",this)},expand:function(b){if(!this.collapsed||this.el.hasFxBlock()||this.fireEvent(\"beforeexpand\",this,b)===false){return}var a=b===true||(b!==false&&this.animCollapse);this.el.removeClass(this.collapsedCls);this.beforeEffect(a);this.onExpand(a,b);return this},onExpand:function(a,b){if(a){this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(b||true,this.afterExpand,this),this.expandDefaults))}else{this[this.collapseEl].show(this.hideMode);this.afterExpand(false)}},afterExpand:function(a){this.collapsed=false;if(a!==false){this[this.collapseEl].show(this.hideMode)}this.afterEffect(a);if(this.deferLayout){delete this.deferLayout;this.doLayout(true)}this.fireEvent(\"expand\",this)},toggleCollapse:function(a){this[this.collapsed?\"expand\":\"collapse\"](a);return this},onDisable:function(){if(this.rendered&&this.maskDisabled){this.el.mask()}Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){if(this.rendered&&this.maskDisabled){this.el.unmask()}Ext.Panel.superclass.onEnable.call(this)},onResize:function(g,d,c,e){var a=g,b=d;if(Ext.isDefined(a)||Ext.isDefined(b)){if(!this.collapsed){if(Ext.isNumber(a)){this.body.setWidth(a=this.adjustBodyWidth(a-this.getFrameWidth()))}else{if(a==\"auto\"){a=this.body.setWidth(\"auto\").dom.offsetWidth}else{a=this.body.dom.offsetWidth}}if(this.tbar){this.tbar.setWidth(a);if(this.topToolbar){this.topToolbar.setSize(a)}}if(this.bbar){this.bbar.setWidth(a);if(this.bottomToolbar){this.bottomToolbar.setSize(a);if(Ext.isIE){this.bbar.setStyle(\"position\",\"static\");this.bbar.setStyle(\"position\",\"\")}}}if(this.footer){this.footer.setWidth(a);if(this.fbar){this.fbar.setSize(Ext.isIE?(a-this.footer.getFrameWidth(\"lr\")):\"auto\")}}if(Ext.isNumber(b)){b=Math.max(0,b-this.getFrameHeight());this.body.setHeight(b)}else{if(b==\"auto\"){this.body.setHeight(b)}}if(this.disabled&&this.el._mask){this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())}}else{this.queuedBodySize={width:a,height:b};if(!this.queuedExpand&&this.allowQueuedExpand!==false){this.queuedExpand=true;this.on(\"expand\",function(){delete this.queuedExpand;this.onResize(this.queuedBodySize.width,this.queuedBodySize.height)},this,{single:true})}}this.onBodyResize(a,b)}this.syncShadow();Ext.Panel.superclass.onResize.call(this,g,d,c,e)},onBodyResize:function(a,b){this.fireEvent(\"bodyresize\",this,a,b)},getToolbarHeight:function(){var a=0;if(this.rendered){Ext.each(this.toolbars,function(b){a+=b.getHeight()},this)}return a},adjustBodyHeight:function(a){return a},adjustBodyWidth:function(a){return a},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var b=this.el.getFrameWidth(\"lr\")+this.bwrap.getFrameWidth(\"lr\");if(this.frame){var a=this.bwrap.dom.firstChild;b+=(Ext.fly(a).getFrameWidth(\"l\")+Ext.fly(a.firstChild).getFrameWidth(\"r\"));b+=this.mc.getFrameWidth(\"lr\")}return b},getFrameHeight:function(){var a=this.el.getFrameWidth(\"tb\")+this.bwrap.getFrameWidth(\"tb\");a+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0);if(this.frame){a+=this.el.dom.firstChild.offsetHeight+this.ft.dom.offsetHeight+this.mc.getFrameWidth(\"tb\")}else{a+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0)}return a},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.body.getHeight()},syncShadow:function(){if(this.floating){this.el.sync(true)}},getLayoutTarget:function(){return this.body},getContentTarget:function(){return this.body},setTitle:function(b,a){this.title=b;if(this.header&&this.headerAsText){this.header.child(\"span\").update(b)}if(a){this.setIconClass(a)}this.fireEvent(\"titlechange\",this,b);return this},getUpdater:function(){return this.body.getUpdater()},load:function(){var a=this.body.getUpdater();a.update.apply(a,arguments);return this},beforeDestroy:function(){Ext.Panel.superclass.beforeDestroy.call(this);if(this.header){this.header.removeAllListeners()}if(this.tools){for(var a in this.tools){Ext.destroy(this.tools[a])}}if(this.toolbars.length>0){Ext.each(this.toolbars,function(b){b.un(\"afterlayout\",this.syncHeight,this);b.un(\"remove\",this.syncHeight,this)},this)}if(Ext.isArray(this.buttons)){while(this.buttons.length){Ext.destroy(this.buttons[0])}}if(this.rendered){Ext.destroy(this.ft,this.header,this.footer,this.tbar,this.bbar,this.body,this.mc,this.bwrap,this.dd);if(this.fbar){Ext.destroy(this.fbar,this.fbar.el)}}Ext.destroy(this.toolbars)},createClasses:function(){this.headerCls=this.baseCls+\"-header\";this.headerTextCls=this.baseCls+\"-header-text\";this.bwrapCls=this.baseCls+\"-bwrap\";this.tbarCls=this.baseCls+\"-tbar\";this.bodyCls=this.baseCls+\"-body\";this.bbarCls=this.baseCls+\"-bbar\";this.footerCls=this.baseCls+\"-footer\"},createGhost:function(a,e,b){var d=document.createElement(\"div\");d.className=\"x-panel-ghost \"+(a?a:\"\");if(this.header){d.appendChild(this.el.dom.firstChild.cloneNode(true))}Ext.fly(d.appendChild(document.createElement(\"ul\"))).setHeight(this.bwrap.getHeight());d.style.width=this.el.dom.offsetWidth+\"px\";if(!b){this.container.dom.appendChild(d)}else{Ext.getDom(b).appendChild(d)}if(e!==false&&this.el.useShim!==false){var c=new Ext.Layer({shadow:false,useDisplay:true,constrain:false},d);c.show();return c}else{return new Ext.Element(d)}},doAutoLoad:function(){var a=this.body.getUpdater();if(this.renderer){a.setRenderer(this.renderer)}a.update(Ext.isObject(this.autoLoad)?this.autoLoad:{url:this.autoLoad})},getTool:function(a){return this.tools[a]}});Ext.reg(\"panel\",Ext.Panel);Ext.Editor=function(b,a){if(b.field){this.field=Ext.create(b.field,\"textfield\");a=Ext.apply({},b);delete a.field}else{this.field=b}Ext.Editor.superclass.constructor.call(this,a)};Ext.extend(Ext.Editor,Ext.Component,{allowBlur:true,value:\"\",alignment:\"c-c?\",offsets:[0,0],shadow:\"frame\",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,initComponent:function(){Ext.Editor.superclass.initComponent.call(this);this.addEvents(\"beforestartedit\",\"startedit\",\"beforecomplete\",\"complete\",\"canceledit\",\"specialkey\")},onRender:function(b,a){this.el=new Ext.Layer({shadow:this.shadow,cls:\"x-editor\",parentEl:b,shim:this.shim,shadowOffset:this.shadowOffset||4,id:this.id,constrain:this.constrain});if(this.zIndex){this.el.setZIndex(this.zIndex)}this.el.setStyle(\"overflow\",Ext.isGecko?\"auto\":\"hidden\");if(this.field.msgTarget!=\"title\"){this.field.msgTarget=\"qtip\"}this.field.inEditor=true;this.mon(this.field,{scope:this,blur:this.onBlur,specialkey:this.onSpecialKey});if(this.field.grow){this.mon(this.field,\"autosize\",this.el.sync,this.el,{delay:1})}this.field.render(this.el).show();this.field.getEl().dom.name=\"\";if(this.swallowKeys){this.field.el.swallowEvent([\"keypress\",\"keydown\"])}},onSpecialKey:function(g,d){var b=d.getKey(),a=this.completeOnEnter&&b==d.ENTER,c=this.cancelOnEsc&&b==d.ESC;if(a||c){d.stopEvent();if(a){this.completeEdit()}else{this.cancelEdit()}if(g.triggerBlur){g.triggerBlur()}}this.fireEvent(\"specialkey\",g,d)},startEdit:function(b,c){if(this.editing){this.completeEdit()}this.boundEl=Ext.get(b);var a=c!==undefined?c:this.boundEl.dom.innerHTML;if(!this.rendered){this.render(this.parentEl||document.body)}if(this.fireEvent(\"beforestartedit\",this,this.boundEl,a)!==false){this.startValue=a;this.field.reset();this.field.setValue(a);this.realign(true);this.editing=true;this.show()}},doAutoSize:function(){if(this.autoSize){var b=this.boundEl.getSize(),a=this.field.getSize();switch(this.autoSize){case\"width\":this.setSize(b.width,a.height);break;case\"height\":this.setSize(a.width,b.height);break;case\"none\":this.setSize(a.width,a.height);break;default:this.setSize(b.width,b.height)}}},setSize:function(a,b){delete this.field.lastSize;this.field.setSize(a,b);if(this.el){if(Ext.isGecko2||Ext.isOpera||(Ext.isIE7&&Ext.isStrict)){this.el.setSize(a,b)}this.el.sync()}},realign:function(a){if(a===true){this.doAutoSize()}this.el.alignTo(this.boundEl,this.alignment,this.offsets)},completeEdit:function(a){if(!this.editing){return}if(this.field.assertValue){this.field.assertValue()}var b=this.getValue();if(!this.field.isValid()){if(this.revertInvalid!==false){this.cancelEdit(a)}return}if(String(b)===String(this.startValue)&&this.ignoreNoChange){this.hideEdit(a);return}if(this.fireEvent(\"beforecomplete\",this,b,this.startValue)!==false){b=this.getValue();if(this.updateEl&&this.boundEl){this.boundEl.update(b)}this.hideEdit(a);this.fireEvent(\"complete\",this,b,this.startValue)}},onShow:function(){this.el.show();if(this.hideEl!==false){this.boundEl.hide()}this.field.show().focus(false,true);this.fireEvent(\"startedit\",this.boundEl,this.startValue)},cancelEdit:function(a){if(this.editing){var b=this.getValue();this.setValue(this.startValue);this.hideEdit(a);this.fireEvent(\"canceledit\",this,b,this.startValue)}},hideEdit:function(a){if(a!==true){this.editing=false;this.hide()}},onBlur:function(){if(this.allowBlur===true&&this.editing&&this.selectSameEditor!==true){this.completeEdit()}},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();if(this.field.collapse){this.field.collapse()}this.el.hide();if(this.hideEl!==false){this.boundEl.show()}},setValue:function(a){this.field.setValue(a)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroyMembers(this,\"field\");delete this.parentEl;delete this.boundEl}});Ext.reg(\"editor\",Ext.Editor);Ext.ColorPalette=Ext.extend(Ext.Component,{itemCls:\"x-color-palette\",value:null,clickEvent:\"click\",ctype:\"Ext.ColorPalette\",allowReselect:false,colors:[\"000000\",\"993300\",\"333300\",\"003300\",\"003366\",\"000080\",\"333399\",\"333333\",\"800000\",\"FF6600\",\"808000\",\"008000\",\"008080\",\"0000FF\",\"666699\",\"808080\",\"FF0000\",\"FF9900\",\"99CC00\",\"339966\",\"33CCCC\",\"3366FF\",\"800080\",\"969696\",\"FF00FF\",\"FFCC00\",\"FFFF00\",\"00FF00\",\"00FFFF\",\"00CCFF\",\"993366\",\"C0C0C0\",\"FF99CC\",\"FFCC99\",\"FFFF99\",\"CCFFCC\",\"CCFFFF\",\"99CCFF\",\"CC99FF\",\"FFFFFF\"],initComponent:function(){Ext.ColorPalette.superclass.initComponent.call(this);this.addEvents(\"select\");if(this.handler){this.on(\"select\",this.handler,this.scope,true)}},onRender:function(b,a){this.autoEl={tag:\"div\",cls:this.itemCls};Ext.ColorPalette.superclass.onRender.call(this,b,a);var c=this.tpl||new Ext.XTemplate('<tpl for=\".\"><a href=\"#\" class=\"color-{.}\" hidefocus=\"on\"><em><span style=\"background:#{.}\" unselectable=\"on\">&#160;</span></em></a></tpl>');c.overwrite(this.el,this.colors);this.mon(this.el,this.clickEvent,this.handleClick,this,{delegate:\"a\"});if(this.clickEvent!=\"click\"){this.mon(this.el,\"click\",Ext.emptyFn,this,{delegate:\"a\",preventDefault:true})}},afterRender:function(){Ext.ColorPalette.superclass.afterRender.call(this);if(this.value){var a=this.value;this.value=null;this.select(a,true)}},handleClick:function(b,a){b.preventDefault();if(!this.disabled){var d=a.className.match(/(?:^|\\s)color-(.{6})(?:\\s|$)/)[1];this.select(d.toUpperCase())}},select:function(b,a){b=b.replace(\"#\",\"\");if(b!=this.value||this.allowReselect){var c=this.el;if(this.value){c.child(\"a.color-\"+this.value).removeClass(\"x-color-palette-sel\")}c.child(\"a.color-\"+b).addClass(\"x-color-palette-sel\");this.value=b;if(a!==true){this.fireEvent(\"select\",this,b)}}}});Ext.reg(\"colorpalette\",Ext.ColorPalette);Ext.DatePicker=Ext.extend(Ext.BoxComponent,{todayText:\"Today\",okText:\"&#160;OK&#160;\",cancelText:\"Cancel\",todayTip:\"{0} (Spacebar)\",minText:\"This date is before the minimum date\",maxText:\"This date is after the maximum date\",format:\"m/d/y\",disabledDaysText:\"Disabled\",disabledDatesText:\"Disabled\",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:\"Next Month (Control+Right)\",prevText:\"Previous Month (Control+Left)\",monthYearText:\"Choose a month (Control+Up/Down to move years)\",startDay:0,showToday:true,focusOnSelect:true,initHour:12,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this);this.value=this.value?this.value.clearTime(true):new Date().clearTime();this.addEvents(\"select\");if(this.handler){this.on(\"select\",this.handler,this.scope||this)}this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var b=this.disabledDates,a=b.length-1,c=\"(?:\";Ext.each(b,function(g,e){c+=Ext.isDate(g)?\"^\"+Ext.escapeRe(g.dateFormat(this.format))+\"$\":b[e];if(e!=a){c+=\"|\"}},this);this.disabledDatesRE=new RegExp(c+\")\")}},setDisabledDates:function(a){if(Ext.isArray(a)){this.disabledDates=a;this.disabledDatesRE=null}else{this.disabledDatesRE=a}this.initDisabledDays();this.update(this.value,true)},setDisabledDays:function(a){this.disabledDays=a;this.update(this.value,true)},setMinDate:function(a){this.minDate=a;this.update(this.value,true)},setMaxDate:function(a){this.maxDate=a;this.update(this.value,true)},setValue:function(a){this.value=a.clearTime(true);this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(a){Ext.DatePicker.superclass.onEnable.call(this);this.doDisabled(false);this.update(a?this.value:this.activeDate);if(Ext.isIE){this.el.repaint()}},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this);this.doDisabled(true);if(Ext.isIE&&!Ext.isIE8){Ext.each([].concat(this.textNodes,this.el.query(\"th span\")),function(a){Ext.fly(a).repaint()})}},doDisabled:function(a){this.keyNav.setDisabled(a);this.prevRepeater.setDisabled(a);this.nextRepeater.setDisabled(a);if(this.showToday){this.todayKeyListener.setDisabled(a);this.todayBtn.setDisabled(a)}},onRender:function(e,b){var a=['<table cellspacing=\"0\">','<tr><td class=\"x-date-left\"><a href=\"#\" title=\"',this.prevText,'\">&#160;</a></td><td class=\"x-date-middle\" align=\"center\"></td><td class=\"x-date-right\"><a href=\"#\" title=\"',this.nextText,'\">&#160;</a></td></tr>','<tr><td colspan=\"3\"><table class=\"x-date-inner\" cellspacing=\"0\"><thead><tr>'],c=this.dayNames,h;for(h=0;h<7;h++){var l=this.startDay+h;if(l>6){l=l-7}a.push(\"<th><span>\",c[l].substr(0,1),\"</span></th>\")}a[a.length]=\"</tr></thead><tbody><tr>\";for(h=0;h<42;h++){if(h%7===0&&h!==0){a[a.length]=\"</tr><tr>\"}a[a.length]='<td><a href=\"#\" hidefocus=\"on\" class=\"x-date-date\" tabIndex=\"1\"><em><span></span></em></a></td>'}a.push(\"</tr></tbody></table></td></tr>\",this.showToday?'<tr><td colspan=\"3\" class=\"x-date-bottom\" align=\"center\"></td></tr>':\"\",'</table><div class=\"x-date-mp\"></div>');var k=document.createElement(\"div\");k.className=\"x-date-picker\";k.innerHTML=a.join(\"\");e.dom.insertBefore(k,b);this.el=Ext.get(k);this.eventEl=Ext.get(k.firstChild);this.prevRepeater=new Ext.util.ClickRepeater(this.el.child(\"td.x-date-left a\"),{handler:this.showPrevMonth,scope:this,preventDefault:true,stopDefault:true});this.nextRepeater=new Ext.util.ClickRepeater(this.el.child(\"td.x-date-right a\"),{handler:this.showNextMonth,scope:this,preventDefault:true,stopDefault:true});this.monthPicker=this.el.down(\"div.x-date-mp\");this.monthPicker.enableDisplayMode(\"block\");this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(d){if(d.ctrlKey){this.showPrevMonth()}else{this.update(this.activeDate.add(\"d\",-1))}},right:function(d){if(d.ctrlKey){this.showNextMonth()}else{this.update(this.activeDate.add(\"d\",1))}},up:function(d){if(d.ctrlKey){this.showNextYear()}else{this.update(this.activeDate.add(\"d\",-7))}},down:function(d){if(d.ctrlKey){this.showPrevYear()}else{this.update(this.activeDate.add(\"d\",7))}},pageUp:function(d){this.showNextMonth()},pageDown:function(d){this.showPrevMonth()},enter:function(d){d.stopPropagation();return true},scope:this});this.el.unselectable();this.cells=this.el.select(\"table.x-date-inner tbody td\");this.textNodes=this.el.query(\"table.x-date-inner tbody span\");this.mbtn=new Ext.Button({text:\"&#160;\",tooltip:this.monthYearText,renderTo:this.el.child(\"td.x-date-middle\",true)});this.mbtn.el.child(\"em\").addClass(\"x-btn-arrow\");if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);var g=(new Date()).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child(\"td.x-date-bottom\",true),text:String.format(this.todayText,g),tooltip:String.format(this.todayTip,g),handler:this.selectToday,scope:this})}this.mon(this.eventEl,\"mousewheel\",this.handleMouseWheel,this);this.mon(this.eventEl,\"click\",this.handleDateClick,this,{delegate:\"a.x-date-date\"});this.mon(this.mbtn,\"click\",this.showMonthPicker,this);this.onEnable(true)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){var a=['<table border=\"0\" cellspacing=\"0\">'];for(var b=0;b<6;b++){a.push('<tr><td class=\"x-date-mp-month\"><a href=\"#\">',Date.getShortMonthName(b),\"</a></td>\",'<td class=\"x-date-mp-month x-date-mp-sep\"><a href=\"#\">',Date.getShortMonthName(b+6),\"</a></td>\",b===0?'<td class=\"x-date-mp-ybtn\" align=\"center\"><a class=\"x-date-mp-prev\"></a></td><td class=\"x-date-mp-ybtn\" align=\"center\"><a class=\"x-date-mp-next\"></a></td></tr>':'<td class=\"x-date-mp-year\"><a href=\"#\"></a></td><td class=\"x-date-mp-year\"><a href=\"#\"></a></td></tr>')}a.push('<tr class=\"x-date-mp-btns\"><td colspan=\"4\"><button type=\"button\" class=\"x-date-mp-ok\">',this.okText,'</button><button type=\"button\" class=\"x-date-mp-cancel\">',this.cancelText,\"</button></td></tr>\",\"</table>\");this.monthPicker.update(a.join(\"\"));this.mon(this.monthPicker,\"click\",this.onMonthClick,this);this.mon(this.monthPicker,\"dblclick\",this.onMonthDblClick,this);this.mpMonths=this.monthPicker.select(\"td.x-date-mp-month\");this.mpYears=this.monthPicker.select(\"td.x-date-mp-year\");this.mpMonths.each(function(c,d,e){e+=1;if((e%2)===0){c.dom.xmonth=5+Math.round(e*0.5)}else{c.dom.xmonth=Math.round((e-1)*0.5)}})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var a=this.el.getSize();this.monthPicker.setSize(a);this.monthPicker.child(\"table\").setSize(a);this.mpSelMonth=(this.activeDate||this.value).getMonth();this.updateMPMonth(this.mpSelMonth);this.mpSelYear=(this.activeDate||this.value).getFullYear();this.updateMPYear(this.mpSelYear);this.monthPicker.slideIn(\"t\",{duration:0.2})}},updateMPYear:function(e){this.mpyear=e;var c=this.mpYears.elements;for(var b=1;b<=10;b++){var d=c[b-1],a;if((b%2)===0){a=e+Math.round(b*0.5);d.firstChild.innerHTML=a;d.xyear=a}else{a=e-(5-Math.round(b*0.5));d.firstChild.innerHTML=a;d.xyear=a}this.mpYears.item(b-1)[a==this.mpSelYear?\"addClass\":\"removeClass\"](\"x-date-mp-sel\")}},updateMPMonth:function(a){this.mpMonths.each(function(b,c,d){b[b.dom.xmonth==a?\"addClass\":\"removeClass\"](\"x-date-mp-sel\")})},selectMPMonth:function(a){},onMonthClick:function(g,b){g.stopEvent();var c=new Ext.Element(b),a;if(c.is(\"button.x-date-mp-cancel\")){this.hideMonthPicker()}else{if(c.is(\"button.x-date-mp-ok\")){var h=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());if(h.getMonth()!=this.mpSelMonth){h=new Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth()}this.update(h);this.hideMonthPicker()}else{if((a=c.up(\"td.x-date-mp-month\",2))){this.mpMonths.removeClass(\"x-date-mp-sel\");a.addClass(\"x-date-mp-sel\");this.mpSelMonth=a.dom.xmonth}else{if((a=c.up(\"td.x-date-mp-year\",2))){this.mpYears.removeClass(\"x-date-mp-sel\");a.addClass(\"x-date-mp-sel\");this.mpSelYear=a.dom.xyear}else{if(c.is(\"a.x-date-mp-prev\")){this.updateMPYear(this.mpyear-10)}else{if(c.is(\"a.x-date-mp-next\")){this.updateMPYear(this.mpyear+10)}}}}}}},onMonthDblClick:function(d,b){d.stopEvent();var c=new Ext.Element(b),a;if((a=c.up(\"td.x-date-mp-month\",2))){this.update(new Date(this.mpSelYear,a.dom.xmonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}else{if((a=c.up(\"td.x-date-mp-year\",2))){this.update(new Date(a.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}}},hideMonthPicker:function(a){if(this.monthPicker){if(a===true){this.monthPicker.hide()}else{this.monthPicker.slideOut(\"t\",{duration:0.2})}}},showPrevMonth:function(a){this.update(this.activeDate.add(\"mo\",-1))},showNextMonth:function(a){this.update(this.activeDate.add(\"mo\",1))},showPrevYear:function(){this.update(this.activeDate.add(\"y\",-1))},showNextYear:function(){this.update(this.activeDate.add(\"y\",1))},handleMouseWheel:function(a){a.stopEvent();if(!this.disabled){var b=a.getWheelDelta();if(b>0){this.showPrevMonth()}else{if(b<0){this.showNextMonth()}}}},handleDateClick:function(b,a){b.stopEvent();if(!this.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasClass(\"x-date-disabled\")){this.cancelFocus=this.focusOnSelect===false;this.setValue(new Date(a.dateValue));delete this.cancelFocus;this.fireEvent(\"select\",this,this.value)}},selectToday:function(){if(this.todayBtn&&!this.todayBtn.disabled){this.setValue(new Date().clearTime());this.fireEvent(\"select\",this,this.value)}},update:function(H,B){if(this.rendered){var a=this.activeDate,q=this.isVisible();this.activeDate=H;if(!B&&a&&this.el){var p=H.getTime();if(a.getMonth()==H.getMonth()&&a.getFullYear()==H.getFullYear()){this.cells.removeClass(\"x-date-selected\");this.cells.each(function(d){if(d.dom.firstChild.dateValue==p){d.addClass(\"x-date-selected\");if(q&&!this.cancelFocus){Ext.fly(d.dom.firstChild).focus(50)}return false}},this);return}}var l=H.getDaysInMonth(),r=H.getFirstDateOfMonth(),g=r.getDay()-this.startDay;if(g<0){g+=7}l+=g;var C=H.add(\"mo\",-1),h=C.getDaysInMonth()-g,e=this.cells.elements,s=this.textNodes,E=(new Date(C.getFullYear(),C.getMonth(),h,this.initHour)),D=new Date().clearTime().getTime(),x=H.clearTime(true).getTime(),v=this.minDate?this.minDate.clearTime(true):Number.NEGATIVE_INFINITY,z=this.maxDate?this.maxDate.clearTime(true):Number.POSITIVE_INFINITY,G=this.disabledDatesRE,u=this.disabledDatesText,J=this.disabledDays?this.disabledDays.join(\"\"):false,F=this.disabledDaysText,A=this.format;if(this.showToday){var n=new Date().clearTime(),c=(n<v||n>z||(G&&A&&G.test(n.dateFormat(A)))||(J&&J.indexOf(n.getDay())!=-1));if(!this.disabled){this.todayBtn.setDisabled(c);this.todayKeyListener[c?\"disable\":\"enable\"]()}}var m=function(K,d){d.title=\"\";var i=E.clearTime(true).getTime();d.firstChild.dateValue=i;if(i==D){d.className+=\" x-date-today\";d.title=K.todayText}if(i==x){d.className+=\" x-date-selected\";if(q){Ext.fly(d.firstChild).focus(50)}}if(i<v){d.className=\" x-date-disabled\";d.title=K.minText;return}if(i>z){d.className=\" x-date-disabled\";d.title=K.maxText;return}if(J){if(J.indexOf(E.getDay())!=-1){d.title=F;d.className=\" x-date-disabled\"}}if(G&&A){var w=E.dateFormat(A);if(G.test(w)){d.title=u.replace(\"%0\",w);d.className=\" x-date-disabled\"}}};var y=0;for(;y<g;y++){s[y].innerHTML=(++h);E.setDate(E.getDate()+1);e[y].className=\"x-date-prevday\";m(this,e[y])}for(;y<l;y++){var b=y-g+1;s[y].innerHTML=(b);E.setDate(E.getDate()+1);e[y].className=\"x-date-active\";m(this,e[y])}var I=0;for(;y<42;y++){s[y].innerHTML=(++I);E.setDate(E.getDate()+1);e[y].className=\"x-date-nextday\";m(this,e[y])}this.mbtn.setText(this.monthNames[H.getMonth()]+\" \"+H.getFullYear());if(!this.internalRender){var k=this.el.dom.firstChild,o=k.offsetWidth;this.el.setWidth(o+this.el.getBorderWidth(\"lr\"));Ext.fly(k).setWidth(o);this.internalRender=true;if(Ext.isOpera&&!this.secondPass){k.rows[0].cells[1].style.width=(o-(k.rows[0].cells[0].offsetWidth+k.rows[0].cells[2].offsetWidth))+\"px\";this.secondPass=true;this.update.defer(10,this,[H])}}}},beforeDestroy:function(){if(this.rendered){Ext.destroy(this.keyNav,this.monthPicker,this.eventEl,this.mbtn,this.nextRepeater,this.prevRepeater,this.cells.el,this.todayBtn);delete this.textNodes;delete this.cells.elements}}});Ext.reg(\"datepicker\",Ext.DatePicker);Ext.LoadMask=function(c,b){this.el=Ext.get(c);Ext.apply(this,b);if(this.store){this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad});this.removeMask=Ext.value(this.removeMask,false)}else{var a=this.el.getUpdater();a.showLoadIndicator=false;a.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad});this.removeMask=Ext.value(this.removeMask,true)}};Ext.LoadMask.prototype={msg:\"Loading...\",msgCls:\"x-mask-loading\",disabled:false,disable:function(){this.disabled=true},enable:function(){this.disabled=false},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){if(!this.disabled){this.el.mask(this.msg,this.msgCls)}},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store){this.store.un(\"beforeload\",this.onBeforeLoad,this);this.store.un(\"load\",this.onLoad,this);this.store.un(\"exception\",this.onLoad,this)}else{var a=this.el.getUpdater();a.un(\"beforeupdate\",this.onBeforeLoad,this);a.un(\"update\",this.onLoad,this);a.un(\"failure\",this.onLoad,this)}}};Ext.ns(\"Ext.slider\");Ext.slider.Thumb=Ext.extend(Object,{dragging:false,constructor:function(a){Ext.apply(this,a||{},{cls:\"x-slider-thumb\",constrain:false});Ext.slider.Thumb.superclass.constructor.call(this,a);if(this.slider.vertical){Ext.apply(this,Ext.slider.Thumb.Vertical)}},render:function(){this.el=this.slider.innerEl.insertFirst({cls:this.cls});this.initEvents()},enable:function(){this.disabled=false;this.el.removeClass(this.slider.disabledClass)},disable:function(){this.disabled=true;this.el.addClass(this.slider.disabledClass)},initEvents:function(){var a=this.el;a.addClassOnOver(\"x-slider-thumb-over\");this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(a)},onBeforeDragStart:function(a){if(this.disabled){return false}else{this.slider.promoteThumb(this);return true}},onDragStart:function(a){this.el.addClass(\"x-slider-thumb-drag\");this.dragging=true;this.dragStartValue=this.value;this.slider.fireEvent(\"dragstart\",this.slider,a,this)},onDrag:function(g){var c=this.slider,b=this.index,d=this.getNewValue();if(this.constrain){var a=c.thumbs[b+1],h=c.thumbs[b-1];if(h!=undefined&&d<=h.value){d=h.value}if(a!=undefined&&d>=a.value){d=a.value}}c.setValue(b,d,false);c.fireEvent(\"drag\",c,g,this)},getNewValue:function(){var a=this.slider,b=a.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(a.reverseValue(b.left),a.decimalPrecision)},onDragEnd:function(c){var a=this.slider,b=this.value;this.el.removeClass(\"x-slider-thumb-drag\");this.dragging=false;a.fireEvent(\"dragend\",a,c);if(this.dragStartValue!=b){a.fireEvent(\"changecomplete\",a,b,this)}},destroy:function(){Ext.destroyMembers(this,\"tracker\",\"el\")}});Ext.slider.MultiSlider=Ext.extend(Ext.BoxComponent,{vertical:false,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,constrainThumbs:true,topThumbZIndex:10000,initComponent:function(){if(!Ext.isDefined(this.value)){this.value=this.minValue}this.thumbs=[];Ext.slider.MultiSlider.superclass.initComponent.call(this);this.keyIncrement=Math.max(this.increment,this.keyIncrement);this.addEvents(\"beforechange\",\"change\",\"changecomplete\",\"dragstart\",\"drag\",\"dragend\");if(this.values==undefined||Ext.isEmpty(this.values)){this.values=[0]}var a=this.values;for(var b=0;b<a.length;b++){this.addThumb(a[b])}if(this.vertical){Ext.apply(this,Ext.slider.Vertical)}},addThumb:function(b){var a=new Ext.slider.Thumb({value:b,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs});this.thumbs.push(a);if(this.rendered){a.render()}},promoteThumb:function(d){var a=this.thumbs,g,b;for(var e=0,c=a.length;e<c;e++){b=a[e];if(b==d){g=this.topThumbZIndex}else{g=\"\"}b.el.setStyle(\"zIndex\",g)}},onRender:function(){this.autoEl={cls:\"x-slider \"+(this.vertical?\"x-slider-vert\":\"x-slider-horz\"),cn:{cls:\"x-slider-end\",cn:{cls:\"x-slider-inner\",cn:[{tag:\"a\",cls:\"x-slider-focus\",href:\"#\",tabIndex:\"-1\",hidefocus:\"on\"}]}}};Ext.slider.MultiSlider.superclass.onRender.apply(this,arguments);this.endEl=this.el.first();this.innerEl=this.endEl.first();this.focusEl=this.innerEl.child(\".x-slider-focus\");for(var b=0;b<this.thumbs.length;b++){this.thumbs[b].render()}var a=this.innerEl.child(\".x-slider-thumb\");this.halfThumb=(this.vertical?a.getHeight():a.getWidth())/2;this.initEvents()},initEvents:function(){this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown});this.focusEl.swallowEvent(\"click\",true)},onMouseDown:function(d){if(this.disabled){return}var c=false;for(var b=0;b<this.thumbs.length;b++){c=c||d.target==this.thumbs[b].el.dom}if(this.clickToChange&&!c){var a=this.innerEl.translatePoints(d.getXY());this.onClickChange(a)}this.focus()},onClickChange:function(c){if(c.top>this.clickRange[0]&&c.top<this.clickRange[1]){var a=this.getNearest(c,\"left\"),b=a.index;this.setValue(b,Ext.util.Format.round(this.reverseValue(c.left),this.decimalPrecision),undefined,true)}},getNearest:function(l,b){var n=b==\"top\"?this.innerEl.getHeight()-l[b]:l[b],g=this.reverseValue(n),k=(this.maxValue-this.minValue)+5,e=0,c=null;for(var d=0;d<this.thumbs.length;d++){var a=this.thumbs[d],m=a.value,h=Math.abs(m-g);if(Math.abs(h<=k)){c=a;e=d;k=h}}return c},onKeyDown:function(b){if(this.disabled||this.thumbs.length!==1){b.preventDefault();return}var a=b.getKey(),c;switch(a){case b.UP:case b.RIGHT:b.stopEvent();c=b.ctrlKey?this.maxValue:this.getValue(0)+this.keyIncrement;this.setValue(0,c,undefined,true);break;case b.DOWN:case b.LEFT:b.stopEvent();c=b.ctrlKey?this.minValue:this.getValue(0)-this.keyIncrement;this.setValue(0,c,undefined,true);break;default:b.preventDefault()}},doSnap:function(b){if(!(this.increment&&b)){return b}var d=b,c=this.increment,a=b%c;if(a!=0){d-=a;if(a*2>=c){d+=c}else{if(a*2<-c){d-=c}}}return d.constrain(this.minValue,this.maxValue)},afterRender:function(){Ext.slider.MultiSlider.superclass.afterRender.apply(this,arguments);for(var c=0;c<this.thumbs.length;c++){var b=this.thumbs[c];if(b.value!==undefined){var a=this.normalizeValue(b.value);if(a!==b.value){this.setValue(c,a,false)}else{this.moveThumb(c,this.translateValue(a),false)}}}},getRatio:function(){var a=this.innerEl.getWidth(),b=this.maxValue-this.minValue;return b==0?a:(a/b)},normalizeValue:function(a){a=this.doSnap(a);a=Ext.util.Format.round(a,this.decimalPrecision);a=a.constrain(this.minValue,this.maxValue);return a},setMinValue:function(e){this.minValue=e;var d=0,b=this.thumbs,a=b.length,c;for(;d<a;++d){c=b[d];c.value=c.value<e?e:c.value}this.syncThumb()},setMaxValue:function(e){this.maxValue=e;var d=0,b=this.thumbs,a=b.length,c;for(;d<a;++d){c=b[d];c.value=c.value>e?e:c.value}this.syncThumb()},setValue:function(d,c,b,g){var a=this.thumbs[d],e=a.el;c=this.normalizeValue(c);if(c!==a.value&&this.fireEvent(\"beforechange\",this,c,a.value,a)!==false){a.value=c;if(this.rendered){this.moveThumb(d,this.translateValue(c),b!==false);this.fireEvent(\"change\",this,c,a);if(g){this.fireEvent(\"changecomplete\",this,c,a)}}}},translateValue:function(a){var b=this.getRatio();return(a*b)-(this.minValue*b)-this.halfThumb},reverseValue:function(b){var a=this.getRatio();return(b+(this.minValue*a))/a},moveThumb:function(d,c,b){var a=this.thumbs[d].el;if(!b||this.animate===false){a.setLeft(c)}else{a.shift({left:c,stopFx:true,duration:0.35})}},focus:function(){this.focusEl.focus(10)},onResize:function(c,e){var b=this.thumbs,a=b.length,d=0;for(;d<a;++d){b[d].el.stopFx()}if(Ext.isNumber(c)){this.innerEl.setWidth(c-(this.el.getPadding(\"l\")+this.endEl.getPadding(\"r\")))}this.syncThumb();Ext.slider.MultiSlider.superclass.onResize.apply(this,arguments)},onDisable:function(){Ext.slider.MultiSlider.superclass.onDisable.call(this);for(var b=0;b<this.thumbs.length;b++){var a=this.thumbs[b],c=a.el;a.disable();if(Ext.isIE){var d=c.getXY();c.hide();this.innerEl.addClass(this.disabledClass).dom.disabled=true;if(!this.thumbHolder){this.thumbHolder=this.endEl.createChild({cls:\"x-slider-thumb \"+this.disabledClass})}this.thumbHolder.show().setXY(d)}}},onEnable:function(){Ext.slider.MultiSlider.superclass.onEnable.call(this);for(var b=0;b<this.thumbs.length;b++){var a=this.thumbs[b],c=a.el;a.enable();if(Ext.isIE){this.innerEl.removeClass(this.disabledClass).dom.disabled=false;if(this.thumbHolder){this.thumbHolder.hide()}c.show();this.syncThumb()}}},syncThumb:function(){if(this.rendered){for(var a=0;a<this.thumbs.length;a++){this.moveThumb(a,this.translateValue(this.thumbs[a].value))}}},getValue:function(a){return this.thumbs[a].value},getValues:function(){var a=[];for(var b=0;b<this.thumbs.length;b++){a.push(this.thumbs[b].value)}return a},beforeDestroy:function(){var b=this.thumbs;for(var c=0,a=b.length;c<a;++c){b[c].destroy();b[c]=null}Ext.destroyMembers(this,\"endEl\",\"innerEl\",\"focusEl\",\"thumbHolder\");Ext.slider.MultiSlider.superclass.beforeDestroy.call(this)}});Ext.reg(\"multislider\",Ext.slider.MultiSlider);Ext.slider.SingleSlider=Ext.extend(Ext.slider.MultiSlider,{constructor:function(a){a=a||{};Ext.applyIf(a,{values:[a.value||0]});Ext.slider.SingleSlider.superclass.constructor.call(this,a)},getValue:function(){return Ext.slider.SingleSlider.superclass.getValue.call(this,0)},setValue:function(d,b){var c=Ext.toArray(arguments),a=c.length;if(a==1||(a<=3&&typeof arguments[1]!=\"number\")){c.unshift(0)}return Ext.slider.SingleSlider.superclass.setValue.apply(this,c)},syncThumb:function(){return Ext.slider.SingleSlider.superclass.syncThumb.apply(this,[0].concat(arguments))},getNearest:function(){return this.thumbs[0]}});Ext.Slider=Ext.slider.SingleSlider;Ext.reg(\"slider\",Ext.slider.SingleSlider);Ext.slider.Vertical={onResize:function(a,b){this.innerEl.setHeight(b-(this.el.getPadding(\"t\")+this.endEl.getPadding(\"b\")));this.syncThumb()},getRatio:function(){var b=this.innerEl.getHeight(),a=this.maxValue-this.minValue;return b/a},moveThumb:function(d,c,b){var a=this.thumbs[d],e=a.el;if(!b||this.animate===false){e.setBottom(c)}else{e.shift({bottom:c,stopFx:true,duration:0.35})}},onClickChange:function(c){if(c.left>this.clickRange[0]&&c.left<this.clickRange[1]){var a=this.getNearest(c,\"top\"),b=a.index,d=this.minValue+this.reverseValue(this.innerEl.getHeight()-c.top);this.setValue(b,Ext.util.Format.round(d,this.decimalPrecision),undefined,true)}}};Ext.slider.Thumb.Vertical={getNewValue:function(){var b=this.slider,c=b.innerEl,d=c.translatePoints(this.tracker.getXY()),a=c.getHeight()-d.top;return b.minValue+Ext.util.Format.round(a/b.getRatio(),b.decimalPrecision)}};Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:\"x-progress\",animate:false,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this);this.addEvents(\"update\")},onRender:function(d,a){var c=new Ext.Template('<div class=\"{cls}-wrap\">','<div class=\"{cls}-inner\">','<div class=\"{cls}-bar\">','<div class=\"{cls}-text\">',\"<div>&#160;</div>\",\"</div>\",\"</div>\",'<div class=\"{cls}-text {cls}-text-back\">',\"<div>&#160;</div>\",\"</div>\",\"</div>\",\"</div>\");this.el=a?c.insertBefore(a,{cls:this.baseCls},true):c.append(d,{cls:this.baseCls},true);if(this.id){this.el.dom.id=this.id}var b=this.el.dom.firstChild;this.progressBar=Ext.get(b.firstChild);if(this.textEl){this.textEl=Ext.get(this.textEl);delete this.textTopEl}else{this.textTopEl=Ext.get(this.progressBar.dom.firstChild);var e=Ext.get(b.childNodes[1]);this.textTopEl.setStyle(\"z-index\",99).addClass(\"x-hidden\");this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,e.dom.firstChild]);this.textEl.setWidth(b.offsetWidth)}this.progressBar.setHeight(b.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this);if(this.value){this.updateProgress(this.value,this.text)}else{this.updateText(this.text)}},updateProgress:function(c,d,b){this.value=c||0;if(d){this.updateText(d)}if(this.rendered&&!this.isDestroyed){var a=Math.floor(c*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(a,b===true||(b!==false&&this.animate));if(this.textTopEl){this.textTopEl.removeClass(\"x-hidden\").setWidth(a)}}this.fireEvent(\"update\",this,c,d);return this},wait:function(b){if(!this.waitTimer){var a=this;b=b||{};this.updateText(b.text);this.waitTimer=Ext.TaskMgr.start({run:function(c){var d=b.increment||10;c-=1;this.updateProgress(((((c+d)%d)+1)*(100/d))*0.01,null,b.animate)},interval:b.interval||1000,duration:b.duration,onStop:function(){if(b.fn){b.fn.apply(b.scope||this)}this.reset()},scope:a})}return this},isWaiting:function(){return this.waitTimer!==null},updateText:function(a){this.text=a||\"&#160;\";if(this.rendered){this.textEl.update(this.text)}return this},syncProgressBar:function(){if(this.value){this.updateProgress(this.value,this.text)}return this},setSize:function(a,c){Ext.ProgressBar.superclass.setSize.call(this,a,c);if(this.textTopEl){var b=this.el.dom.firstChild;this.textEl.setSize(b.offsetWidth,b.offsetHeight)}this.syncProgressBar();return this},reset:function(a){this.updateProgress(0);if(this.textTopEl){this.textTopEl.addClass(\"x-hidden\")}this.clearTimer();if(a===true){this.hide()}return this},clearTimer:function(){if(this.waitTimer){this.waitTimer.onStop=null;Ext.TaskMgr.stop(this.waitTimer);this.waitTimer=null}},onDestroy:function(){this.clearTimer();if(this.rendered){if(this.textEl.isComposite){this.textEl.clear()}Ext.destroyMembers(this,\"textEl\",\"progressBar\",\"textTopEl\")}Ext.ProgressBar.superclass.onDestroy.call(this)}});Ext.reg(\"progress\",Ext.ProgressBar);(function(){var a=Ext.EventManager;var b=Ext.lib.Dom;Ext.dd.DragDrop=function(e,c,d){if(e){this.init(e,c,d)}};Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(c,d){},startDrag:function(c,d){},b4Drag:function(c){},onDrag:function(c){},onDragEnter:function(c,d){},b4DragOver:function(c){},onDragOver:function(c,d){},b4DragOut:function(c){},onDragOut:function(c,d){},b4DragDrop:function(c){},onDragDrop:function(c,d){},onInvalidDrop:function(c){},b4EndDrag:function(c){},endDrag:function(c){},b4MouseDown:function(c){},onMouseDown:function(c){},onMouseUp:function(c){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(k,h,p){if(Ext.isNumber(h)){h={left:h,right:h,top:h,bottom:h}}h=h||this.defaultPadding;var m=Ext.get(this.getEl()).getBox(),d=Ext.get(k),o=d.getScroll(),l,e=d.dom;if(e==document.body){l={x:o.left,y:o.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}}else{var n=d.getXY();l={x:n[0],y:n[1],width:e.clientWidth,height:e.clientHeight}}var i=m.y-l.y,g=m.x-l.x;this.resetConstraints();this.setXConstraint(g-(h.left||0),l.width-g-m.width-(h.right||0),this.xTickSize);this.setYConstraint(i-(h.top||0),l.height-i-m.height-(h.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(e,c,d){this.initTarget(e,c,d);a.on(this.id,\"mousedown\",this.handleMouseDown,this)},initTarget:function(e,c,d){this.config=d||{};this.DDM=Ext.dd.DDM;this.groups={};if(typeof e!==\"string\"){e=Ext.id(e)}this.id=e;this.addToGroup((c)?c:\"default\");this.handleElId=e;this.setDragElId(e);this.invalidHandleTypes={A:\"A\"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(e,c,g,d){if(!c&&0!==c){this.padding=[e,e,e,e]}else{if(!g&&0!==g){this.padding=[e,c,e,c]}else{this.padding=[e,c,g,d]}}},setInitPosition:function(g,e){var h=this.getEl();if(!this.DDM.verifyEl(h)){return}var d=g||0;var c=e||0;var i=b.getXY(h);this.initPageX=i[0]-d;this.initPageY=i[1]-c;this.lastPageX=i[0];this.lastPageY=i[1];this.setStartPosition(i)},setStartPosition:function(d){var c=d||b.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=c[0];this.startPageY=c[1]},addToGroup:function(c){this.groups[c]=true;this.DDM.regDragDrop(this,c)},removeFromGroup:function(c){if(this.groups[c]){delete this.groups[c]}this.DDM.removeDDFromGroup(this,c)},setDragElId:function(c){this.dragElId=c},setHandleElId:function(c){if(typeof c!==\"string\"){c=Ext.id(c)}this.handleElId=c;this.DDM.regHandle(this.id,c)},setOuterHandleElId:function(c){if(typeof c!==\"string\"){c=Ext.id(c)}a.on(c,\"mousedown\",this.handleMouseDown,this);this.setHandleElId(c);this.hasOuterHandles=true},unreg:function(){a.un(this.id,\"mousedown\",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return(this.DDM.isLocked()||this.locked)},handleMouseDown:function(g,d){if(this.primaryButtonOnly&&g.button!=0){return}if(this.isLocked()){return}this.DDM.refreshCache(this.groups);var c=new Ext.lib.Point(Ext.lib.Event.getPageX(g),Ext.lib.Event.getPageY(g));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(c,this)){}else{if(this.clickValidator(g)){this.setStartPosition();this.b4MouseDown(g);this.onMouseDown(g);this.DDM.handleMouseDown(g,this);this.DDM.stopEvent(g)}else{}}},clickValidator:function(d){var c=d.getTarget();return(this.isValidHandleChild(c)&&(this.id==this.handleElId||this.DDM.handleWasClicked(c,this.id)))},addInvalidHandleType:function(c){var d=c.toUpperCase();this.invalidHandleTypes[d]=d},addInvalidHandleId:function(c){if(typeof c!==\"string\"){c=Ext.id(c)}this.invalidHandleIds[c]=c},addInvalidHandleClass:function(c){this.invalidHandleClasses.push(c)},removeInvalidHandleType:function(c){var d=c.toUpperCase();delete this.invalidHandleTypes[d]},removeInvalidHandleId:function(c){if(typeof c!==\"string\"){c=Ext.id(c)}delete this.invalidHandleIds[c]},removeInvalidHandleClass:function(d){for(var e=0,c=this.invalidHandleClasses.length;e<c;++e){if(this.invalidHandleClasses[e]==d){delete this.invalidHandleClasses[e]}}},isValidHandleChild:function(h){var g=true;var l;try{l=h.nodeName.toUpperCase()}catch(k){l=h.nodeName}g=g&&!this.invalidHandleTypes[l];g=g&&!this.invalidHandleIds[h.id];for(var d=0,c=this.invalidHandleClasses.length;g&&d<c;++d){g=!Ext.fly(h).hasClass(this.invalidHandleClasses[d])}return g},setXTicks:function(g,c){this.xTicks=[];this.xTickSize=c;var e={};for(var d=this.initPageX;d>=this.minX;d=d-c){if(!e[d]){this.xTicks[this.xTicks.length]=d;e[d]=true}}for(d=this.initPageX;d<=this.maxX;d=d+c){if(!e[d]){this.xTicks[this.xTicks.length]=d;e[d]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(g,c){this.yTicks=[];this.yTickSize=c;var e={};for(var d=this.initPageY;d>=this.minY;d=d-c){if(!e[d]){this.yTicks[this.yTicks.length]=d;e[d]=true}}for(d=this.initPageY;d<=this.maxY;d=d+c){if(!e[d]){this.yTicks[this.yTicks.length]=d;e[d]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(e,d,c){this.leftConstraint=e;this.rightConstraint=d;this.minX=this.initPageX-e;this.maxX=this.initPageX+d;if(c){this.setXTicks(this.initPageX,c)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(c,e,d){this.topConstraint=c;this.bottomConstraint=e;this.minY=this.initPageY-c;this.maxY=this.initPageY+e;if(d){this.setYTicks(this.initPageY,d)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var d=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var c=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(d,c)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(l,g){if(!g){return l}else{if(g[0]>=l){return g[0]}else{for(var d=0,c=g.length;d<c;++d){var e=d+1;if(g[e]&&g[e]>=l){var k=l-g[d];var h=g[e]-l;return(h>k)?g[d]:g[e]}}return g[g.length-1]}}},toString:function(){return(\"DragDrop \"+this.id)}}})();if(!Ext.dd.DragDropMgr){Ext.dd.DragDropMgr=function(){var a=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(d,c){for(var e in this.ids){for(var b in this.ids[e]){var g=this.ids[e][b];if(!this.isTypeOfDD(g)){continue}g[d].apply(g,c)}}},_onLoad:function(){this.init();a.on(document,\"mouseup\",this.handleMouseUp,this,true);a.on(document,\"mousemove\",this.handleMouseMove,this,true);a.on(window,\"unload\",this._onUnload,this,true);a.on(window,\"resize\",this._onResize,this,true)},_onResize:function(b){this._execOnAll(\"resetConstraints\",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(c,b){if(!this.initialized){this.init()}if(!this.ids[b]){this.ids[b]={}}this.ids[b][c.id]=c},removeDDFromGroup:function(d,b){if(!this.ids[b]){this.ids[b]={}}var c=this.ids[b];if(c&&c[d.id]){delete c[d.id]}},_remove:function(c){for(var b in c.groups){if(b&&this.ids[b]&&this.ids[b][c.id]){delete this.ids[b][c.id]}}delete this.handleIds[c.id]},regHandle:function(c,b){if(!this.handleIds[c]){this.handleIds[c]={}}this.handleIds[c][b]=b},isDragDrop:function(b){return(this.getDDById(b))?true:false},getRelated:function(h,c){var g=[];for(var e in h.groups){for(var d in this.ids[e]){var b=this.ids[e][d];if(!this.isTypeOfDD(b)){continue}if(!c||b.isTarget){g[g.length]=b}}}return g},isLegalTarget:function(g,e){var c=this.getRelated(g,true);for(var d=0,b=c.length;d<b;++d){if(c[d].id==e.id){return true}}return false},isTypeOfDD:function(b){return(b&&b.__ygDragDrop)},isHandle:function(c,b){return(this.handleIds[c]&&this.handleIds[c][b])},getDDById:function(c){for(var b in this.ids){if(this.ids[b][c]){return this.ids[b][c]}}return null},handleMouseDown:function(d,c){if(Ext.QuickTips){Ext.QuickTips.ddDisable()}if(this.dragCurrent){this.handleMouseUp(d)}this.currentTarget=d.getTarget();this.dragCurrent=c;var b=c.getEl();this.startX=d.getPageX();this.startY=d.getPageY();this.deltaX=this.startX-b.offsetLeft;this.deltaY=this.startY-b.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var e=Ext.dd.DDM;e.startDrag(e.startX,e.startY)},this.clickTimeThresh)},startDrag:function(b,c){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(b,c);this.dragCurrent.startDrag(b,c)}this.dragThreshMet=true},handleMouseUp:function(b){if(Ext.QuickTips){Ext.QuickTips.ddEnable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(b,true)}else{}this.stopDrag(b);this.stopEvent(b)},stopEvent:function(b){if(this.stopPropagation){b.stopPropagation()}if(this.preventDefault){b.preventDefault()}},stopDrag:function(b){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(b);this.dragCurrent.endDrag(b)}this.dragCurrent.onMouseUp(b)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(d){if(!this.dragCurrent){return true}if(Ext.isIE&&(d.button!==0&&d.button!==1&&d.button!==2)){this.stopEvent(d);return this.handleMouseUp(d)}if(!this.dragThreshMet){var c=Math.abs(this.startX-d.getPageX());var b=Math.abs(this.startY-d.getPageY());if(c>this.clickPixelThresh||b>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(d);this.dragCurrent.onDrag(d);if(!this.dragCurrent.moveOnly){this.fireEvents(d,false)}}this.stopEvent(d);return true},fireEvents:function(o,p){var r=this.dragCurrent;if(!r||r.isLocked()){return}var s=o.getPoint();var b=[];var g=[];var m=[];var k=[];var d=[];for(var h in this.dragOvers){var c=this.dragOvers[h];if(!this.isTypeOfDD(c)){continue}if(!this.isOverTarget(s,c,this.mode)){g.push(c)}b[h]=true;delete this.dragOvers[h]}for(var q in r.groups){if(\"string\"!=typeof q){continue}for(h in this.ids[q]){var l=this.ids[q][h];if(!this.isTypeOfDD(l)){continue}if(l.isTarget&&!l.isLocked()&&((l!=r)||(r.ignoreSelf===false))){if(this.isOverTarget(s,l,this.mode)){if(p){k.push(l)}else{if(!b[l.id]){d.push(l)}else{m.push(l)}this.dragOvers[l.id]=l}}}}}if(this.mode){if(g.length){r.b4DragOut(o,g);r.onDragOut(o,g)}if(d.length){r.onDragEnter(o,d)}if(m.length){r.b4DragOver(o,m);r.onDragOver(o,m)}if(k.length){r.b4DragDrop(o,k);r.onDragDrop(o,k)}}else{var n=0;for(h=0,n=g.length;h<n;++h){r.b4DragOut(o,g[h].id);r.onDragOut(o,g[h].id)}for(h=0,n=d.length;h<n;++h){r.onDragEnter(o,d[h].id)}for(h=0,n=m.length;h<n;++h){r.b4DragOver(o,m[h].id);r.onDragOver(o,m[h].id)}for(h=0,n=k.length;h<n;++h){r.b4DragDrop(o,k[h].id);r.onDragDrop(o,k[h].id)}}if(p&&!k.length){r.onInvalidDrop(o)}},getBestMatch:function(d){var g=null;var c=d.length;if(c==1){g=d[0]}else{for(var e=0;e<c;++e){var b=d[e];if(b.cursorIsOver){g=b;break}else{if(!g||g.overlap.getArea()<b.overlap.getArea()){g=b}}}}return g},refreshCache:function(c){for(var b in c){if(\"string\"!=typeof b){continue}for(var d in this.ids[b]){var e=this.ids[b][d];if(this.isTypeOfDD(e)){var g=this.getLocation(e);if(g){this.locationCache[e.id]=g}else{delete this.locationCache[e.id]}}}}},verifyEl:function(c){if(c){var b;if(Ext.isIE){try{b=c.offsetParent}catch(d){}}else{b=c.offsetParent}if(b){return true}}return false},getLocation:function(k){if(!this.isTypeOfDD(k)){return null}var h=k.getEl(),o,g,d,q,p,s,c,n,i;try{o=Ext.lib.Dom.getXY(h)}catch(m){}if(!o){return null}g=o[0];d=g+h.offsetWidth;q=o[1];p=q+h.offsetHeight;s=q-k.padding[0];c=d+k.padding[1];n=p+k.padding[2];i=g-k.padding[3];return new Ext.lib.Region(s,c,n,i)},isOverTarget:function(l,b,d){var g=this.locationCache[b.id];if(!g||!this.useCache){g=this.getLocation(b);this.locationCache[b.id]=g}if(!g){return false}b.cursorIsOver=g.contains(l);var k=this.dragCurrent;if(!k||!k.getTargetCoord||(!d&&!k.constrainX&&!k.constrainY)){return b.cursorIsOver}b.overlap=null;var h=k.getTargetCoord(l.x,l.y);var c=k.getDragEl();var e=new Ext.lib.Region(h.y,h.x+c.offsetWidth,h.y+c.offsetHeight,h.x);var i=e.intersect(g);if(i){b.overlap=i;return(d)?true:b.cursorIsOver}else{return false}},_onUnload:function(c,b){Ext.dd.DragDropMgr.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll(\"unreg\",[]);for(var b in this.elementCache){delete this.elementCache[b]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(c){var b=this.elementCache[c];if(!b||!b.el){b=this.elementCache[c]=new this.ElementWrapper(Ext.getDom(c))}return b},getElement:function(b){return Ext.getDom(b)},getCss:function(c){var b=Ext.getDom(c);return(b)?b.style:null},ElementWrapper:function(b){this.el=b||null;this.id=this.el&&b.id;this.css=this.el&&b.style},getPosX:function(b){return Ext.lib.Dom.getX(b)},getPosY:function(b){return Ext.lib.Dom.getY(b)},swapNode:function(d,b){if(d.swapNode){d.swapNode(b)}else{var e=b.parentNode;var c=b.nextSibling;if(c==d){e.insertBefore(d,b)}else{if(b==d.nextSibling){e.insertBefore(b,d)}else{d.parentNode.replaceChild(b,d);e.insertBefore(d,c)}}}},getScroll:function(){var d,b,e=document.documentElement,c=document.body;if(e&&(e.scrollTop||e.scrollLeft)){d=e.scrollTop;b=e.scrollLeft}else{if(c){d=c.scrollTop;b=c.scrollLeft}else{}}return{top:d,left:b}},getStyle:function(c,b){return Ext.fly(c).getStyle(b)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(b,d){var c=Ext.lib.Dom.getXY(d);Ext.lib.Dom.setXY(b,c)},numericSort:function(d,c){return(d-c)},_timeoutCount:0,_addListeners:function(){var b=Ext.dd.DDM;if(Ext.lib.Event&&document){b._onLoad()}else{if(b._timeoutCount>2000){}else{setTimeout(b._addListeners,10);if(document&&document.body){b._timeoutCount+=1}}}},handleWasClicked:function(b,d){if(this.isHandle(d,b.id)){return true}else{var c=b.parentNode;while(c){if(this.isHandle(d,c.id)){return true}else{c=c.parentNode}}}return false}}}();Ext.dd.DDM=Ext.dd.DragDropMgr;Ext.dd.DDM._addListeners()}Ext.dd.DD=function(c,a,b){if(c){this.init(c,a,b)}};Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:true,autoOffset:function(c,b){var a=c-this.startPageX;var d=b-this.startPageY;this.setDelta(a,d)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(c,b){var a=this.getDragEl();this.alignElWithMouse(a,c,b)},alignElWithMouse:function(c,h,g){var e=this.getTargetCoord(h,g);var b=c.dom?c:Ext.fly(c,\"_dd\");if(!this.deltaSetXY){var i=[e.x,e.y];b.setXY(i);var d=b.getLeft(true);var a=b.getTop(true);this.deltaSetXY=[d-e.x,a-e.y]}else{b.setLeftTop(e.x+this.deltaSetXY[0],e.y+this.deltaSetXY[1])}this.cachePosition(e.x,e.y);this.autoScroll(e.x,e.y,c.offsetHeight,c.offsetWidth);return e},cachePosition:function(b,a){if(b){this.lastPageX=b;this.lastPageY=a}else{var c=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=c[0];this.lastPageY=c[1]}},autoScroll:function(m,l,e,n){if(this.scroll){var o=Ext.lib.Dom.getViewHeight();var b=Ext.lib.Dom.getViewWidth();var q=this.DDM.getScrollTop();var d=this.DDM.getScrollLeft();var k=e+l;var p=n+m;var i=(o+q-l-this.deltaY);var g=(b+d-m-this.deltaX);var c=40;var a=(document.all)?80:30;if(k>o&&i<c){window.scrollTo(d,q+a)}if(l<q&&q>0&&l-q<c){window.scrollTo(d,q-a)}if(p>b&&g<c){window.scrollTo(d+a,q)}if(m<d&&d>0&&m-d<c){window.scrollTo(d-a,q)}}},getTargetCoord:function(c,b){var a=c-this.deltaX;var d=b-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(d<this.minY){d=this.minY}if(d>this.maxY){d=this.maxY}}a=this.getTick(a,this.xTicks);d=this.getTick(d,this.yTicks);return{x:a,y:d}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(a){this.autoOffset(a.getPageX(),a.getPageY())},b4Drag:function(a){this.setDragElPos(a.getPageX(),a.getPageY())},toString:function(){return(\"DD \"+this.id)}});Ext.dd.DDProxy=function(c,a,b){if(c){this.init(c,a,b);this.initFrame()}};Ext.dd.DDProxy.dragElId=\"ygddfdiv\";Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var b=this;var a=document.body;if(!a||!a.firstChild){setTimeout(function(){b.createFrame()},50);return}var d=this.getDragEl();if(!d){d=document.createElement(\"div\");d.id=this.dragElId;var c=d.style;c.position=\"absolute\";c.visibility=\"hidden\";c.cursor=\"move\";c.border=\"2px solid #aaa\";c.zIndex=999;a.insertBefore(d,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(e,d){var c=this.getEl();var a=this.getDragEl();var b=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(b.width,10)/2),Math.round(parseInt(b.height,10)/2))}this.setDragElPos(e,d);Ext.fly(a).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(b){var a=b.getPageX();var c=b.getPageY();this.autoOffset(a,c);this.setDragElPos(a,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl();var a=this.getDragEl();a.style.visibility=\"\";this.beforeMove();b.style.visibility=\"hidden\";Ext.dd.DDM.moveToEl(b,a);a.style.visibility=\"hidden\";b.style.visibility=\"\";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return(\"DDProxy \"+this.id)}});Ext.dd.DDTarget=function(c,a,b){if(c){this.initTarget(c,a,b)}};Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return(\"DDTarget \"+this.id)}});Ext.dd.DragTracker=Ext.extend(Ext.util.Observable,{active:false,tolerance:5,autoStart:false,constructor:function(a){Ext.apply(this,a);this.addEvents(\"mousedown\",\"mouseup\",\"mousemove\",\"dragstart\",\"dragend\",\"drag\");this.dragRegion=new Ext.lib.Region(0,0,0,0);if(this.el){this.initEl(this.el)}Ext.dd.DragTracker.superclass.constructor.call(this,a)},initEl:function(a){this.el=Ext.get(a);a.on(\"mousedown\",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un(\"mousedown\",this.onMouseDown,this);delete this.el},onMouseDown:function(b,a){if(this.fireEvent(\"mousedown\",this,b)!==false&&this.onBeforeStart(b)!==false){this.startXY=this.lastXY=b.getXY();this.dragTarget=this.delegate?a:this.el.dom;if(this.preventDefault!==false){b.preventDefault()}Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect});if(this.autoStart){this.timer=this.triggerStart.defer(this.autoStart===true?1000:this.autoStart,this,[b])}}},onMouseMove:function(d,c){if(this.active&&Ext.isIE&&!d.browserEvent.button){d.preventDefault();this.onMouseUp(d);return}d.preventDefault();var b=d.getXY(),a=this.startXY;this.lastXY=b;if(!this.active){if(Math.abs(a[0]-b[0])>this.tolerance||Math.abs(a[1]-b[1])>this.tolerance){this.triggerStart(d)}else{return}}this.fireEvent(\"mousemove\",this,d);this.onDrag(d);this.fireEvent(\"drag\",this,d)},onMouseUp:function(c){var b=Ext.getDoc(),a=this.active;b.un(\"mousemove\",this.onMouseMove,this);b.un(\"mouseup\",this.onMouseUp,this);b.un(\"selectstart\",this.stopSelect,this);c.preventDefault();this.clearStart();this.active=false;delete this.elRegion;this.fireEvent(\"mouseup\",this,c);if(a){this.onEnd(c);this.fireEvent(\"dragend\",this,c)}},triggerStart:function(a){this.clearStart();this.active=true;this.onStart(a);this.fireEvent(\"dragstart\",this,a)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(a){return a?this.constrainModes[a].call(this,this.lastXY):this.lastXY},getOffset:function(c){var b=this.getXY(c),a=this.startXY;return[a[0]-b[0],a[1]-b[1]]},constrainModes:{point:function(b){if(!this.elRegion){this.elRegion=this.getDragCt().getRegion()}var a=this.dragRegion;a.left=b[0];a.top=b[1];a.right=b[0];a.bottom=b[1];a.constrainTo(this.elRegion);return[a.left,a.top]}}});Ext.dd.ScrollManager=function(){var c=Ext.dd.DragDropMgr;var e={};var b=null;var i={};var h=function(m){b=null;a()};var k=function(){if(c.dragCurrent){c.refreshCache(c.dragCurrent.groups)}};var d=function(){if(c.dragCurrent){var m=Ext.dd.ScrollManager;var n=i.el.ddScrollConfig?i.el.ddScrollConfig.increment:m.increment;if(!m.animate){if(i.el.scroll(i.dir,n)){k()}}else{i.el.scroll(i.dir,n,true,m.animDuration,k)}}};var a=function(){if(i.id){clearInterval(i.id)}i.id=0;i.el=null;i.dir=\"\"};var g=function(n,m){a();i.el=n;i.dir=m;var p=n.ddScrollConfig?n.ddScrollConfig.ddGroup:undefined,o=(n.ddScrollConfig&&n.ddScrollConfig.frequency)?n.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;if(p===undefined||c.dragCurrent.ddGroup==p){i.id=setInterval(d,o)}};var l=function(p,s){if(s||!c.dragCurrent){return}var t=Ext.dd.ScrollManager;if(!b||b!=c.dragCurrent){b=c.dragCurrent;t.refreshCache()}var u=Ext.lib.Event.getXY(p);var v=new Ext.lib.Point(u[0],u[1]);for(var n in e){var o=e[n],m=o._region;var q=o.ddScrollConfig?o.ddScrollConfig:t;if(m&&m.contains(v)&&o.isScrollable()){if(m.bottom-v.y<=q.vthresh){if(i.el!=o){g(o,\"down\")}return}else{if(m.right-v.x<=q.hthresh){if(i.el!=o){g(o,\"left\")}return}else{if(v.y-m.top<=q.vthresh){if(i.el!=o){g(o,\"up\")}return}else{if(v.x-m.left<=q.hthresh){if(i.el!=o){g(o,\"right\")}return}}}}}}a()};c.fireEvents=c.fireEvents.createSequence(l,c);c.stopDrag=c.stopDrag.createSequence(h,c);return{register:function(o){if(Ext.isArray(o)){for(var n=0,m=o.length;n<m;n++){this.register(o[n])}}else{o=Ext.get(o);e[o.id]=o}},unregister:function(o){if(Ext.isArray(o)){for(var n=0,m=o.length;n<m;n++){this.unregister(o[n])}}else{o=Ext.get(o);delete e[o.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){for(var m in e){if(typeof e[m]==\"object\"){e[m]._region=e[m].getRegion()}}}}}();Ext.dd.Registry=function(){var d={};var b={};var a=0;var c=function(g,e){if(typeof g==\"string\"){return g}var h=g.id;if(!h&&e!==false){h=\"extdd-\"+(++a);g.id=h}return h};return{register:function(k,l){l=l||{};if(typeof k==\"string\"){k=document.getElementById(k)}l.ddel=k;d[c(k)]=l;if(l.isHandle!==false){b[l.ddel.id]=l}if(l.handles){var h=l.handles;for(var g=0,e=h.length;g<e;g++){b[c(h[g])]=l}}},unregister:function(k){var m=c(k,false);var l=d[m];if(l){delete d[m];if(l.handles){var h=l.handles;for(var g=0,e=h.length;g<e;g++){delete b[c(h[g],false)]}}}},getHandle:function(e){if(typeof e!=\"string\"){e=e.id}return b[e]},getHandleFromEvent:function(h){var g=Ext.lib.Event.getTarget(h);return g?b[g.id]:null},getTarget:function(e){if(typeof e!=\"string\"){e=e.id}return d[e]},getTargetFromEvent:function(h){var g=Ext.lib.Event.getTarget(h);return g?d[g.id]||b[g.id]:null}}}();Ext.dd.StatusProxy=function(a){Ext.apply(this,a);this.id=this.id||Ext.id();this.el=new Ext.Layer({dh:{id:this.id,tag:\"div\",cls:\"x-dd-drag-proxy \"+this.dropNotAllowed,children:[{tag:\"div\",cls:\"x-dd-drop-icon\"},{tag:\"div\",cls:\"x-dd-drag-ghost\"}]},shadow:!a||a.shadow!==false});this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed};Ext.dd.StatusProxy.prototype={dropAllowed:\"x-dd-drop-ok\",dropNotAllowed:\"x-dd-drop-nodrop\",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!=a){this.el.replaceClass(this.dropStatus,a);this.dropStatus=a}},reset:function(a){this.el.dom.className=\"x-dd-drag-proxy \"+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(a){this.ghost.update(\"\")}},update:function(a){if(typeof a==\"string\"){this.ghost.update(a)}else{this.ghost.update(\"\");a.style.margin=\"0\";this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle(\"float\",\"none\")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(a){this.el.hide();if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(b,c,a){this.callback=c;this.scope=a;if(b&&this.animRepair!==false){this.el.addClass(\"x-dd-drag-repair\");this.el.hideUnders(true);this.anim=this.el.shift({duration:this.repairDuration||0.5,easing:\"easeOut\",xy:b,stopFx:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback==\"function\"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}};Ext.dd.DragSource=function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy()}Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false};Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:\"x-dd-drop-ok\",dropNotAllowed:\"x-dd-drop-nodrop\",getDragData:function(a){return this.dragData},onDragEnter:function(c,d){var b=Ext.dd.DragDropMgr.getDDById(d);this.cachedTarget=b;if(this.beforeDragEnter(b,c,d)!==false){if(b.isNotifyTarget){var a=b.notifyEnter(this,c,this.dragData);this.proxy.setStatus(a)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(b,c,d)}}},beforeDragEnter:function(b,a,c){return true},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(c,d){var b=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(d);if(this.beforeDragOver(b,c,d)!==false){if(b.isNotifyTarget){var a=b.notifyOver(this,c,this.dragData);this.proxy.setStatus(a)}if(this.afterDragOver){this.afterDragOver(b,c,d)}}},beforeDragOver:function(b,a,c){return true},onDragOut:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(c);if(this.beforeDragOut(a,b,c)!==false){if(a.isNotifyTarget){a.notifyOut(this,b,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,b,c)}}this.cachedTarget=null},beforeDragOut:function(b,a,c){return true},onDragDrop:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(c);if(this.beforeDragDrop(a,b,c)!==false){if(a.isNotifyTarget){if(a.notifyDrop(this,b,this.dragData)){this.onValidDrop(a,b,c)}else{this.onInvalidDrop(a,b,c)}}else{this.onValidDrop(a,b,c)}if(this.afterDragDrop){this.afterDragDrop(a,b,c)}}delete this.cachedTarget},beforeDragDrop:function(b,a,c){return true},onValidDrop:function(b,a,c){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(b,a,c)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(b,a,c){this.beforeInvalidDrop(b,a,c);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,a,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(a,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(a,c)}},afterRepair:function(){if(Ext.enableFx){this.el.highlight(this.hlColor||\"c3daf9\")}this.dragging=false},beforeInvalidDrop:function(b,a,c){return true},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==false){this.dragData=a;this.proxy.stop();Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(a,b){return true},onStartDrag:Ext.emptyFn,startDrag:function(a,b){this.proxy.reset();this.dragging=true;this.proxy.update(\"\");this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(a,c){var b=this.el.dom.cloneNode(true);b.id=Ext.id();this.proxy.update(b);this.onStartDrag(a,c);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this);Ext.destroy(this.proxy)}});Ext.dd.DropTarget=Ext.extend(Ext.dd.DDTarget,{constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},dropAllowed:\"x-dd-drop-ok\",dropNotAllowed:\"x-dd-drop-nodrop\",isTarget:true,isNotifyTarget:true,notifyEnter:function(a,c,b){if(this.overClass){this.el.addClass(this.overClass)}return this.dropAllowed},notifyOver:function(a,c,b){return this.dropAllowed},notifyOut:function(a,c,b){if(this.overClass){this.el.removeClass(this.overClass)}},notifyDrop:function(a,c,b){return false},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DragZone=Ext.extend(Ext.dd.DragSource,{constructor:function(b,a){Ext.dd.DragZone.superclass.constructor.call(this,b,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(a,b);return true},afterRepair:function(){if(Ext.enableFx){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||\"c3daf9\")}this.dragging=false},getRepairXY:function(a){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DropZone=function(b,a){Ext.dd.DropZone.superclass.constructor.call(this,b,a)};Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(d,a,c,b){},onNodeOver:function(d,a,c,b){return this.dropAllowed},onNodeOut:function(d,a,c,b){},onNodeDrop:function(d,a,c,b){return false},onContainerOver:function(a,c,b){return this.dropNotAllowed},onContainerDrop:function(a,c,b){return false},notifyEnter:function(a,c,b){return this.dropNotAllowed},notifyOver:function(a,c,b){var d=this.getTargetFromEvent(c);if(!d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}return this.onContainerOver(a,c,b)}if(this.lastOverNode!=d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b)}this.onNodeEnter(d,a,c,b);this.lastOverNode=d}return this.onNodeOver(d,a,c,b)},notifyOut:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}},notifyDrop:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}var d=this.getTargetFromEvent(c);return d?this.onNodeDrop(d,a,c,b):this.onContainerDrop(a,c,b)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.Element.addMethods({initDD:function(c,b,d){var a=new Ext.dd.DD(Ext.id(this.dom),c,b);return Ext.apply(a,d)},initDDProxy:function(c,b,d){var a=new Ext.dd.DDProxy(Ext.id(this.dom),c,b);return Ext.apply(a,d)},initDDTarget:function(c,b,d){var a=new Ext.dd.DDTarget(Ext.id(this.dom),c,b);return Ext.apply(a,d)}});Ext.data.Api=(function(){var a={};return{actions:{create:\"create\",read:\"read\",update:\"update\",destroy:\"destroy\"},restActions:{create:\"POST\",read:\"GET\",update:\"PUT\",destroy:\"DELETE\"},isAction:function(b){return(Ext.data.Api.actions[b])?true:false},getVerb:function(b){if(a[b]){return a[b]}for(var c in this.actions){if(this.actions[c]===b){a[b]=c;break}}return(a[b]!==undefined)?a[b]:null},isValid:function(b){var e=[];var d=this.actions;for(var c in b){if(!(c in d)){e.push(c)}}return(!e.length)?true:e},hasUniqueUrl:function(c,g){var b=(c.api[g])?c.api[g].url:null;var e=true;for(var d in c.api){if((e=(d===g)?true:(c.api[d].url!=b)?true:false)===false){break}}return e},prepare:function(b){if(!b.api){b.api={}}for(var d in this.actions){var c=this.actions[d];b.api[c]=b.api[c]||b.url||b.directFn;if(typeof(b.api[c])==\"string\"){b.api[c]={url:b.api[c],method:(b.restful===true)?Ext.data.Api.restActions[c]:undefined}}}},restify:function(b){b.restful=true;for(var c in this.restActions){b.api[this.actions[c]].method||(b.api[this.actions[c]].method=this.restActions[c])}b.onWrite=b.onWrite.createInterceptor(function(i,k,g,e){var d=k.reader;var h=new Ext.data.Response({action:i,raw:g});switch(g.status){case 200:return true;break;case 201:if(Ext.isEmpty(h.raw.responseText)){h.success=true}else{return true}break;case 204:h.success=true;h.data=null;break;default:return true;break}if(h.success===true){this.fireEvent(\"write\",this,i,h.data,h,e,k.request.arg)}else{this.fireEvent(\"exception\",this,\"remote\",i,k,h,e)}k.request.callback.call(k.request.scope,h.data,h,h.success);return false},b)}}})();Ext.data.Response=function(b,a){Ext.apply(this,b,{raw:a})};Ext.data.Response.prototype={message:null,success:false,status:null,root:null,raw:null,getMessage:function(){return this.message},getSuccess:function(){return this.success},getStatus:function(){return this.status},getRoot:function(){return this.root},getRawResponse:function(){return this.raw}};Ext.data.Api.Error=Ext.extend(Ext.Error,{constructor:function(b,a){this.arg=a;Ext.Error.call(this,b)},name:\"Ext.data.Api\"});Ext.apply(Ext.data.Api.Error.prototype,{lang:{\"action-url-undefined\":\"No fallback url defined for this action.  When defining a DataProxy api, please be sure to define an url for each CRUD action in Ext.data.Api.actions or define a default url in addition to your api-configuration.\",invalid:\"received an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions defined in Ext.data.Api.actions\",\"invalid-url\":\"Invalid url.  Please review your proxy configuration.\",execute:'Attempted to execute an unknown action.  Valid API actions are defined in Ext.data.Api.actions\"'}});Ext.data.SortTypes={none:function(a){return a},stripTagsRE:/<\\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,\"\")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,\"\")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,\"\"));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,\"\"),10);return isNaN(b)?0:b}};Ext.data.Record=function(a,b){this.id=(b||b===0)?b:Ext.data.Record.id(this);this.data=a||{}};Ext.data.Record.create=function(e){var c=Ext.extend(Ext.data.Record,{});var d=c.prototype;d.fields=new Ext.util.MixedCollection(false,function(g){return g.name});for(var b=0,a=e.length;b<a;b++){d.fields.add(new Ext.data.Field(e[b]))}c.getField=function(g){return d.fields.get(g)};return c};Ext.data.Record.PREFIX=\"ext-record\";Ext.data.Record.AUTO_ID=1;Ext.data.Record.EDIT=\"edit\";Ext.data.Record.REJECT=\"reject\";Ext.data.Record.COMMIT=\"commit\";Ext.data.Record.id=function(a){a.phantom=true;return[Ext.data.Record.PREFIX,\"-\",Ext.data.Record.AUTO_ID++].join(\"\")};Ext.data.Record.prototype={dirty:false,editing:false,error:null,modified:null,phantom:false,join:function(a){this.store=a},set:function(a,c){var b=Ext.isPrimitive(c)?String:Ext.encode;if(b(this.data[a])==b(c)){return}this.dirty=true;if(!this.modified){this.modified={}}if(this.modified[a]===undefined){this.modified[a]=this.data[a]}this.data[a]=c;if(!this.editing){this.afterEdit()}},afterEdit:function(){if(this.store!=undefined&&typeof this.store.afterEdit==\"function\"){this.store.afterEdit(this)}},afterReject:function(){if(this.store){this.store.afterReject(this)}},afterCommit:function(){if(this.store){this.store.afterCommit(this)}},get:function(a){return this.data[a]},beginEdit:function(){this.editing=true;this.modified=this.modified||{}},cancelEdit:function(){this.editing=false;delete this.modified},endEdit:function(){this.editing=false;if(this.dirty){this.afterEdit()}},reject:function(b){var a=this.modified;for(var c in a){if(typeof a[c]!=\"function\"){this.data[c]=a[c]}}this.dirty=false;delete this.modified;this.editing=false;if(b!==true){this.afterReject()}},commit:function(a){this.dirty=false;delete this.modified;this.editing=false;if(a!==true){this.afterCommit()}},getChanges:function(){var a=this.modified,b={};for(var c in a){if(a.hasOwnProperty(c)){b[c]=this.data[c]}}return b},hasError:function(){return this.error!==null},clearError:function(){this.error=null},copy:function(a){return new this.constructor(Ext.apply({},this.data),a||this.id)},isModified:function(a){return !!(this.modified&&this.modified.hasOwnProperty(a))},isValid:function(){return this.fields.find(function(a){return(a.allowBlank===false&&Ext.isEmpty(this.data[a.name]))?true:false},this)?false:true},markDirty:function(){this.dirty=true;if(!this.modified){this.modified={}}this.fields.each(function(a){this.modified[a.name]=this.data[a.name]},this)}};Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection(),{register:function(){for(var a=0,b;(b=arguments[a]);a++){this.add(b)}},unregister:function(){for(var a=0,b;(b=arguments[a]);a++){this.remove(this.lookup(b))}},lookup:function(e){if(Ext.isArray(e)){var b=[\"field1\"],d=!Ext.isArray(e[0]);if(!d){for(var c=2,a=e[0].length;c<=a;++c){b.push(\"field\"+c)}}return new Ext.data.ArrayStore({fields:b,data:e,expandData:d,autoDestroy:true,autoCreated:true})}return Ext.isObject(e)?(e.events?e:Ext.create(e,\"store\")):this.get(e)},getKey:function(a){return a.storeId}});Ext.data.Store=Ext.extend(Ext.util.Observable,{writer:undefined,remoteSort:false,autoDestroy:false,pruneModifiedRecords:false,lastOptions:null,autoSave:true,batch:true,restful:false,paramNames:undefined,defaultParamNames:{start:\"start\",limit:\"limit\",sort:\"sort\",dir:\"dir\"},isDestroyed:false,hasMultiSort:false,batchKey:\"_ext_batch_\",constructor:function(a){this.data=new Ext.util.MixedCollection(false);this.data.getKey=function(b){return b.id};this.removed=[];if(a&&a.data){this.inlineData=a.data;delete a.data}Ext.apply(this,a);this.baseParams=Ext.isObject(this.baseParams)?this.baseParams:{};this.paramNames=Ext.applyIf(this.paramNames||{},this.defaultParamNames);if((this.url||this.api)&&!this.proxy){this.proxy=new Ext.data.HttpProxy({url:this.url,api:this.api})}if(this.restful===true&&this.proxy){this.batch=false;Ext.data.Api.restify(this.proxy)}if(this.reader){if(!this.recordType){this.recordType=this.reader.recordType}if(this.reader.onMetaChange){this.reader.onMetaChange=this.reader.onMetaChange.createSequence(this.onMetaChange,this)}if(this.writer){if(this.writer instanceof (Ext.data.DataWriter)===false){this.writer=this.buildWriter(this.writer)}this.writer.meta=this.reader.meta;this.pruneModifiedRecords=true}}if(this.recordType){this.fields=this.recordType.prototype.fields}this.modified=[];this.addEvents(\"datachanged\",\"metachange\",\"add\",\"remove\",\"update\",\"clear\",\"exception\",\"beforeload\",\"load\",\"loadexception\",\"beforewrite\",\"write\",\"beforesave\",\"save\");if(this.proxy){this.relayEvents(this.proxy,[\"loadexception\",\"exception\"])}if(this.writer){this.on({scope:this,add:this.createRecords,remove:this.destroyRecord,update:this.updateRecord,clear:this.onClear})}this.sortToggle={};if(this.sortField){this.setDefaultSort(this.sortField,this.sortDir)}else{if(this.sortInfo){this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction)}}Ext.data.Store.superclass.constructor.call(this);if(this.id){this.storeId=this.id;delete this.id}if(this.storeId){Ext.StoreMgr.register(this)}if(this.inlineData){this.loadData(this.inlineData);delete this.inlineData}else{if(this.autoLoad){this.load.defer(10,this,[typeof this.autoLoad==\"object\"?this.autoLoad:undefined])}}this.batchCounter=0;this.batches={}},buildWriter:function(b){var a=undefined,c=(b.format||\"json\").toLowerCase();switch(c){case\"json\":a=Ext.data.JsonWriter;break;case\"xml\":a=Ext.data.XmlWriter;break;default:a=Ext.data.JsonWriter}return new a(b)},destroy:function(){if(!this.isDestroyed){if(this.storeId){Ext.StoreMgr.unregister(this)}this.clearData();this.data=null;Ext.destroy(this.proxy);this.reader=this.writer=null;this.purgeListeners();this.isDestroyed=true}},add:function(c){var e,a,b,d;c=[].concat(c);if(c.length<1){return}for(e=0,a=c.length;e<a;e++){b=c[e];b.join(this);if(b.dirty||b.phantom){this.modified.push(b)}}d=this.data.length;this.data.addAll(c);if(this.snapshot){this.snapshot.addAll(c)}this.fireEvent(\"add\",this,c,d)},addSorted:function(a){var b=this.findInsertIndex(a);this.insert(b,a)},doUpdate:function(a){this.data.replace(a.id,a);if(this.snapshot){this.snapshot.replace(a.id,a)}this.fireEvent(\"update\",this,a,Ext.data.Record.COMMIT)},remove:function(a){if(Ext.isArray(a)){Ext.each(a,function(c){this.remove(c)},this);return}var b=this.data.indexOf(a);if(b>-1){a.join(null);this.data.removeAt(b)}if(this.pruneModifiedRecords){this.modified.remove(a)}if(this.snapshot){this.snapshot.remove(a)}if(b>-1){this.fireEvent(\"remove\",this,a,b)}},removeAt:function(a){this.remove(this.getAt(a))},removeAll:function(b){var a=[];this.each(function(c){a.push(c)});this.clearData();if(this.snapshot){this.snapshot.clear()}if(this.pruneModifiedRecords){this.modified=[]}if(b!==true){this.fireEvent(\"clear\",this,a)}},onClear:function(b,a){Ext.each(a,function(d,c){this.destroyRecord(this,d,c)},this)},insert:function(d,c){var e,a,b;c=[].concat(c);for(e=0,a=c.length;e<a;e++){b=c[e];this.data.insert(d+e,b);b.join(this);if(b.dirty||b.phantom){this.modified.push(b)}}if(this.snapshot){this.snapshot.addAll(c)}this.fireEvent(\"add\",this,c,d)},indexOf:function(a){return this.data.indexOf(a)},indexOfId:function(a){return this.data.indexOfKey(a)},getById:function(a){return(this.snapshot||this.data).key(a)},getAt:function(a){return this.data.itemAt(a)},getRange:function(b,a){return this.data.getRange(b,a)},storeOptions:function(a){a=Ext.apply({},a);delete a.callback;delete a.scope;this.lastOptions=a},clearData:function(){this.data.each(function(a){a.join(null)});this.data.clear()},load:function(b){b=Ext.apply({},b);this.storeOptions(b);if(this.sortInfo&&this.remoteSort){var a=this.paramNames;b.params=Ext.apply({},b.params);b.params[a.sort]=this.sortInfo.field;b.params[a.dir]=this.sortInfo.direction}try{return this.execute(\"read\",null,b)}catch(c){this.handleException(c);return false}},updateRecord:function(b,a,c){if(c==Ext.data.Record.EDIT&&this.autoSave===true&&(!a.phantom||(a.phantom&&a.isValid()))){this.save()}},createRecords:function(c,b,e){var d=this.modified,h=b.length,a,g;for(g=0;g<h;g++){a=b[g];if(a.phantom&&a.isValid()){a.markDirty();if(d.indexOf(a)==-1){d.push(a)}}}if(this.autoSave===true){this.save()}},destroyRecord:function(b,a,c){if(this.modified.indexOf(a)!=-1){this.modified.remove(a)}if(!a.phantom){this.removed.push(a);a.lastIndex=c;if(this.autoSave===true){this.save()}}},execute:function(e,a,c,b){if(!Ext.data.Api.isAction(e)){throw new Ext.data.Api.Error(\"execute\",e)}c=Ext.applyIf(c||{},{params:{}});if(b!==undefined){this.addToBatch(b)}var d=true;if(e===\"read\"){d=this.fireEvent(\"beforeload\",this,c);Ext.applyIf(c.params,this.baseParams)}else{if(this.writer.listful===true&&this.restful!==true){a=(Ext.isArray(a))?a:[a]}else{if(Ext.isArray(a)&&a.length==1){a=a.shift()}}if((d=this.fireEvent(\"beforewrite\",this,e,a,c))!==false){this.writer.apply(c.params,this.baseParams,e,a)}}if(d!==false){if(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,e)){c.params.xaction=e}this.proxy.request(Ext.data.Api.actions[e],a,c.params,this.reader,this.createCallback(e,a,b),this,c)}return d},save:function(){if(!this.writer){throw new Ext.data.Store.Error(\"writer-undefined\")}var h=[],k,l,e,c={},d;if(this.removed.length){h.push([\"destroy\",this.removed])}var b=[].concat(this.getModifiedRecords());if(b.length){var g=[];for(d=b.length-1;d>=0;d--){if(b[d].phantom===true){var a=b.splice(d,1).shift();if(a.isValid()){g.push(a)}}else{if(!b[d].isValid()){b.splice(d,1)}}}if(g.length){h.push([\"create\",g])}if(b.length){h.push([\"update\",b])}}k=h.length;if(k){e=++this.batchCounter;for(d=0;d<k;++d){l=h[d];c[l[0]]=l[1]}if(this.fireEvent(\"beforesave\",this,c)!==false){for(d=0;d<k;++d){l=h[d];this.doTransaction(l[0],l[1],e)}return e}}return -1},doTransaction:function(e,b,c){function g(h){try{this.execute(e,h,undefined,c)}catch(i){this.handleException(i)}}if(this.batch===false){for(var d=0,a=b.length;d<a;d++){g.call(this,b[d])}}else{g.call(this,b)}},addToBatch:function(c){var a=this.batches,d=this.batchKey+c,e=a[d];if(!e){a[d]=e={id:c,count:0,data:{}}}++e.count},removeFromBatch:function(d,h,g){var c=this.batches,e=this.batchKey+d,i=c[e],a;if(i){a=i.data[h]||[];i.data[h]=a.concat(g);if(i.count===1){g=i.data;delete c[e];this.fireEvent(\"save\",this,d,g)}else{--i.count}}},createCallback:function(c,a,b){var d=Ext.data.Api.actions;return(c==\"read\")?this.loadRecords:function(g,e,h){this[\"on\"+Ext.util.Format.capitalize(c)+\"Records\"](h,a,[].concat(g));if(h===true){this.fireEvent(\"write\",this,c,g,e,a)}this.removeFromBatch(b,c,g)}},clearModified:function(a){if(Ext.isArray(a)){for(var b=a.length-1;b>=0;b--){this.modified.splice(this.modified.indexOf(a[b]),1)}}else{this.modified.splice(this.modified.indexOf(a),1)}},reMap:function(b){if(Ext.isArray(b)){for(var d=0,a=b.length;d<a;d++){this.reMap(b[d])}}else{delete this.data.map[b._phid];this.data.map[b.id]=b;var c=this.data.keys.indexOf(b._phid);this.data.keys.splice(c,1,b.id);delete b._phid}},onCreateRecords:function(d,a,b){if(d===true){try{this.reader.realize(a,b);this.reMap(a)}catch(c){this.handleException(c);if(Ext.isArray(a)){this.onCreateRecords(d,a,b)}}}},onUpdateRecords:function(d,a,b){if(d===true){try{this.reader.update(a,b)}catch(c){this.handleException(c);if(Ext.isArray(a)){this.onUpdateRecords(d,a,b)}}}},onDestroyRecords:function(e,b,d){b=(b instanceof Ext.data.Record)?[b]:[].concat(b);for(var c=0,a=b.length;c<a;c++){this.removed.splice(this.removed.indexOf(b[c]),1)}if(e===false){for(c=b.length-1;c>=0;c--){this.insert(b[c].lastIndex,b[c])}}},handleException:function(a){Ext.handleError(a)},reload:function(a){this.load(Ext.applyIf(a||{},this.lastOptions))},loadRecords:function(b,m,h){var e,g;if(this.isDestroyed===true){return}if(!b||h===false){if(h!==false){this.fireEvent(\"load\",this,[],m)}if(m.callback){m.callback.call(m.scope||this,[],m,false,b)}return}var a=b.records,k=b.totalRecords||a.length;if(!m||m.add!==true){if(this.pruneModifiedRecords){this.modified=[]}for(e=0,g=a.length;e<g;e++){a[e].join(this)}if(this.snapshot){this.data=this.snapshot;delete this.snapshot}this.clearData();this.data.addAll(a);this.totalLength=k;this.applySort();this.fireEvent(\"datachanged\",this)}else{var l=[],d,c=0;for(e=0,g=a.length;e<g;++e){d=a[e];if(this.indexOfId(d.id)>-1){this.doUpdate(d)}else{l.push(d);++c}}this.totalLength=Math.max(k,this.data.length+c);this.add(l)}this.fireEvent(\"load\",this,a,m);if(m.callback){m.callback.call(m.scope||this,a,m,true)}},loadData:function(c,a){var b=this.reader.readRecords(c);this.loadRecords(b,{add:a},true)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if((this.sortInfo||this.multiSortInfo)&&!this.remoteSort){this.sortData()}},sortData:function(){var a=this.hasMultiSort?this.multiSortInfo:this.sortInfo,k=a.direction||\"ASC\",h=a.sorters,c=[];if(!this.hasMultiSort){h=[{direction:k,field:a.field}]}for(var d=0,b=h.length;d<b;d++){c.push(this.createSortFunction(h[d].field,h[d].direction))}if(c.length==0){return}var g=k.toUpperCase()==\"DESC\"?-1:1;var e=function(n,m){var l=c[0].call(this,n,m);if(c.length>1){for(var p=1,o=c.length;p<o;p++){l=l||c[p].call(this,n,m)}}return g*l};this.data.sort(k,e);if(this.snapshot&&this.snapshot!=this.data){this.snapshot.sort(k,e)}},createSortFunction:function(c,b){b=b||\"ASC\";var a=b.toUpperCase()==\"DESC\"?-1:1;var d=this.fields.get(c).sortType;return function(g,e){var i=d(g.data[c]),h=d(e.data[c]);return a*(i>h?1:(i<h?-1:0))}},setDefaultSort:function(b,a){a=a?a.toUpperCase():\"ASC\";this.sortInfo={field:b,direction:a};this.sortToggle[b]=a},sort:function(b,a){if(Ext.isArray(arguments[0])){return this.multiSort.call(this,b,a)}else{return this.singleSort(b,a)}},singleSort:function(g,c){var e=this.fields.get(g);if(!e){return false}var b=e.name,a=this.sortInfo||null,d=this.sortToggle?this.sortToggle[b]:null;if(!c){if(a&&a.field==b){c=(this.sortToggle[b]||\"ASC\").toggle(\"ASC\",\"DESC\")}else{c=e.sortDir}}this.sortToggle[b]=c;this.sortInfo={field:b,direction:c};this.hasMultiSort=false;if(this.remoteSort){if(!this.load(this.lastOptions)){if(d){this.sortToggle[b]=d}if(a){this.sortInfo=a}}}else{this.applySort();this.fireEvent(\"datachanged\",this)}return true},multiSort:function(b,a){this.hasMultiSort=true;a=a||\"ASC\";if(this.multiSortInfo&&a==this.multiSortInfo.direction){a=a.toggle(\"ASC\",\"DESC\")}this.multiSortInfo={sorters:b,direction:a};if(this.remoteSort){this.singleSort(b[0].field,b[0].direction)}else{this.applySort();this.fireEvent(\"datachanged\",this)}},each:function(b,a){this.data.each(b,a)},getModifiedRecords:function(){return this.modified},sum:function(e,g,a){var c=this.data.items,b=0;g=g||0;a=(a||a===0)?a:c.length-1;for(var d=g;d<=a;d++){b+=(c[d].data[e]||0)}return b},createFilterFn:function(d,c,e,a,b){if(Ext.isEmpty(c,false)){return false}c=this.data.createValueMatcher(c,e,a,b);return function(g){return c.test(g.data[d])}},createMultipleFilterFn:function(a){return function(b){var k=true;for(var d=0,c=a.length;d<c;d++){var h=a[d],g=h.fn,e=h.scope;k=k&&g.call(e,b)}return k}},filter:function(n,m,h,k,e){var l;if(Ext.isObject(n)){n=[n]}if(Ext.isArray(n)){var b=[];for(var g=0,d=n.length;g<d;g++){var a=n[g],c=a.fn,o=a.scope||this;if(!Ext.isFunction(c)){c=this.createFilterFn(a.property,a.value,a.anyMatch,a.caseSensitive,a.exactMatch)}b.push({fn:c,scope:o})}l=this.createMultipleFilterFn(b)}else{l=this.createFilterFn(n,m,h,k,e)}return l?this.filterBy(l):this.clearFilter()},filterBy:function(b,a){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(b,a||this);this.fireEvent(\"datachanged\",this)},clearFilter:function(a){if(this.isFiltered()){this.data=this.snapshot;delete this.snapshot;if(a!==true){this.fireEvent(\"datachanged\",this)}}},isFiltered:function(){return !!this.snapshot&&this.snapshot!=this.data},query:function(d,c,e,a){var b=this.createFilterFn(d,c,e,a);return b?this.queryBy(b):this.data.clone()},queryBy:function(b,a){var c=this.snapshot||this.data;return c.filterBy(b,a||this)},find:function(d,c,g,e,a){var b=this.createFilterFn(d,c,e,a);return b?this.data.findIndexBy(b,null,g):-1},findExact:function(b,a,c){return this.data.findIndexBy(function(d){return d.get(b)===a},this,c)},findBy:function(b,a,c){return this.data.findIndexBy(b,a,c)},collect:function(k,m,b){var h=(b===true&&this.snapshot)?this.snapshot.items:this.data.items;var n,o,a=[],c={};for(var e=0,g=h.length;e<g;e++){n=h[e].data[k];o=String(n);if((m||!Ext.isEmpty(n))&&!c[o]){c[o]=true;a[a.length]=n}}return a},afterEdit:function(a){if(this.modified.indexOf(a)==-1){this.modified.push(a)}this.fireEvent(\"update\",this,a,Ext.data.Record.EDIT)},afterReject:function(a){this.modified.remove(a);this.fireEvent(\"update\",this,a,Ext.data.Record.REJECT)},afterCommit:function(a){this.modified.remove(a);this.fireEvent(\"update\",this,a,Ext.data.Record.COMMIT)},commitChanges:function(){var a=this.modified.slice(0),c=a.length,b;for(b=0;b<c;b++){a[b].commit()}this.modified=[];this.removed=[]},rejectChanges:function(){var a=this.modified.slice(0),e=this.removed.slice(0).reverse(),c=a.length,d=e.length,b;for(b=0;b<c;b++){a[b].reject()}for(b=0;b<d;b++){this.insert(e[b].lastIndex||0,e[b]);e[b].reject()}this.modified=[];this.removed=[]},onMetaChange:function(a){this.recordType=this.reader.recordType;this.fields=this.recordType.prototype.fields;delete this.snapshot;if(this.reader.meta.sortInfo){this.sortInfo=this.reader.meta.sortInfo}else{if(this.sortInfo&&!this.fields.get(this.sortInfo.field)){delete this.sortInfo}}if(this.writer){this.writer.meta=this.reader.meta}this.modified=[];this.fireEvent(\"metachange\",this,this.reader.meta)},findInsertIndex:function(a){this.suspendEvents();var c=this.data.clone();this.data.add(a);this.applySort();var b=this.data.indexOf(a);this.data=c;this.resumeEvents();return b},setBaseParam:function(a,b){this.baseParams=this.baseParams||{};this.baseParams[a]=b}});Ext.reg(\"store\",Ext.data.Store);Ext.data.Store.Error=Ext.extend(Ext.Error,{name:\"Ext.data.Store\"});Ext.apply(Ext.data.Store.Error.prototype,{lang:{\"writer-undefined\":\"Attempted to execute a write-action without a DataWriter installed.\"}});Ext.data.Field=Ext.extend(Object,{constructor:function(b){if(Ext.isString(b)){b={name:b}}Ext.apply(this,b);var d=Ext.data.Types,a=this.sortType,c;if(this.type){if(Ext.isString(this.type)){this.type=Ext.data.Types[this.type.toUpperCase()]||d.AUTO}}else{this.type=d.AUTO}if(Ext.isString(a)){this.sortType=Ext.data.SortTypes[a]}else{if(Ext.isEmpty(a)){this.sortType=this.type.sortType}}if(!this.convert){this.convert=this.type.convert}},dateFormat:null,useNull:false,defaultValue:\"\",mapping:null,sortType:null,sortDir:\"ASC\",allowBlank:true});Ext.data.DataReader=function(a,b){this.meta=a;this.recordType=Ext.isArray(b)?Ext.data.Record.create(b):b;if(this.recordType){this.buildExtractors()}};Ext.data.DataReader.prototype={getTotal:Ext.emptyFn,getRoot:Ext.emptyFn,getMessage:Ext.emptyFn,getSuccess:Ext.emptyFn,getId:Ext.emptyFn,buildExtractors:Ext.emptyFn,extractValues:Ext.emptyFn,realize:function(a,c){if(Ext.isArray(a)){for(var b=a.length-1;b>=0;b--){if(Ext.isArray(c)){this.realize(a.splice(b,1).shift(),c.splice(b,1).shift())}else{this.realize(a.splice(b,1).shift(),c)}}}else{if(Ext.isArray(c)&&c.length==1){c=c.shift()}if(!this.isData(c)){throw new Ext.data.DataReader.Error(\"realize\",a)}a.phantom=false;a._phid=a.id;a.id=this.getId(c);a.data=c;a.commit()}},update:function(a,c){if(Ext.isArray(a)){for(var b=a.length-1;b>=0;b--){if(Ext.isArray(c)){this.update(a.splice(b,1).shift(),c.splice(b,1).shift())}else{this.update(a.splice(b,1).shift(),c)}}}else{if(Ext.isArray(c)&&c.length==1){c=c.shift()}if(this.isData(c)){a.data=Ext.apply(a.data,c)}a.commit()}},extractData:function(l,a){var k=(this instanceof Ext.data.JsonReader)?\"json\":\"node\";var c=[];if(this.isData(l)&&!(this instanceof Ext.data.XmlReader)){l=[l]}var h=this.recordType.prototype.fields,p=h.items,o=h.length,c=[];if(a===true){var m=this.recordType;for(var e=0;e<l.length;e++){var b=l[e];var g=new m(this.extractValues(b,p,o),this.getId(b));g[k]=b;c.push(g)}}else{for(var e=0;e<l.length;e++){var d=this.extractValues(l[e],p,o);d[this.meta.idProperty]=this.getId(l[e]);c.push(d)}}return c},isData:function(a){return(a&&Ext.isObject(a)&&!Ext.isEmpty(this.getId(a)))?true:false},onMetaChange:function(a){delete this.ef;this.meta=a;this.recordType=Ext.data.Record.create(a.fields);this.buildExtractors()}};Ext.data.DataReader.Error=Ext.extend(Ext.Error,{constructor:function(b,a){this.arg=a;Ext.Error.call(this,b)},name:\"Ext.data.DataReader\"});Ext.apply(Ext.data.DataReader.Error.prototype,{lang:{update:\"#update received invalid data from server.  Please see docs for DataReader#update and review your DataReader configuration.\",realize:\"#realize was called with invalid remote-data.  Please see the docs for DataReader#realize and review your DataReader configuration.\",\"invalid-response\":\"#readResponse received an invalid response from the server.\"}});Ext.data.DataWriter=function(a){Ext.apply(this,a)};Ext.data.DataWriter.prototype={writeAllFields:false,listful:false,apply:function(e,g,d,a){var c=[],b=d+\"Record\";if(Ext.isArray(a)){Ext.each(a,function(h){c.push(this[b](h))},this)}else{if(a instanceof Ext.data.Record){c=this[b](a)}}this.render(e,g,c)},render:Ext.emptyFn,updateRecord:Ext.emptyFn,createRecord:Ext.emptyFn,destroyRecord:Ext.emptyFn,toHash:function(g,c){var e=g.fields.map,d={},b=(this.writeAllFields===false&&g.phantom===false)?g.getChanges():g.data,a;Ext.iterate(b,function(i,h){if((a=e[i])){d[a.mapping?a.mapping:a.name]=h}});if(g.phantom){if(g.fields.containsKey(this.meta.idProperty)&&Ext.isEmpty(g.data[this.meta.idProperty])){delete d[this.meta.idProperty]}}else{d[this.meta.idProperty]=g.id}return d},toArray:function(b){var a=[];Ext.iterate(b,function(d,c){a.push({name:d,value:c})},this);return a}};Ext.data.DataProxy=function(a){a=a||{};this.api=a.api;this.url=a.url;this.restful=a.restful;this.listeners=a.listeners;this.prettyUrls=a.prettyUrls;this.addEvents(\"exception\",\"beforeload\",\"load\",\"loadexception\",\"beforewrite\",\"write\");Ext.data.DataProxy.superclass.constructor.call(this);try{Ext.data.Api.prepare(this)}catch(b){if(b instanceof Ext.data.Api.Error){b.toConsole()}}Ext.data.DataProxy.relayEvents(this,[\"beforewrite\",\"write\",\"exception\"])};Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{restful:false,setApi:function(){if(arguments.length==1){var a=Ext.data.Api.isValid(arguments[0]);if(a===true){this.api=arguments[0]}else{throw new Ext.data.Api.Error(\"invalid\",a)}}else{if(arguments.length==2){if(!Ext.data.Api.isAction(arguments[0])){throw new Ext.data.Api.Error(\"invalid\",arguments[0])}this.api[arguments[0]]=arguments[1]}}Ext.data.Api.prepare(this)},isApiAction:function(a){return(this.api[a])?true:false},request:function(e,b,g,a,h,d,c){if(!this.api[e]&&!this.load){throw new Ext.data.DataProxy.Error(\"action-undefined\",e)}g=g||{};if((e===Ext.data.Api.actions.read)?this.fireEvent(\"beforeload\",this,g):this.fireEvent(\"beforewrite\",this,e,b,g)!==false){this.doRequest.apply(this,arguments)}else{h.call(d||this,null,c,false)}},load:null,doRequest:function(e,b,g,a,h,d,c){this.load(g,a,h,d,c)},onRead:Ext.emptyFn,onWrite:Ext.emptyFn,buildUrl:function(d,b){b=b||null;var c=(this.conn&&this.conn.url)?this.conn.url:(this.api[d])?this.api[d].url:this.url;if(!c){throw new Ext.data.Api.Error(\"invalid-url\",d)}var e=null;var a=c.match(/(.*)(\\.json|\\.xml|\\.html)$/);if(a){e=a[2];c=a[1]}if((this.restful===true||this.prettyUrls===true)&&b instanceof Ext.data.Record&&!b.phantom){c+=\"/\"+b.id}return(e===null)?c:c+e},destroy:function(){this.purgeListeners()}});Ext.apply(Ext.data.DataProxy,Ext.util.Observable.prototype);Ext.util.Observable.call(Ext.data.DataProxy);Ext.data.DataProxy.Error=Ext.extend(Ext.Error,{constructor:function(b,a){this.arg=a;Ext.Error.call(this,b)},name:\"Ext.data.DataProxy\"});Ext.apply(Ext.data.DataProxy.Error.prototype,{lang:{\"action-undefined\":\"DataProxy attempted to execute an API-action but found an undefined url / function.  Please review your Proxy url/api-configuration.\",\"api-invalid\":\"Recieved an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions from Ext.data.Api.actions.\"}});Ext.data.Request=function(a){Ext.apply(this,a)};Ext.data.Request.prototype={action:undefined,rs:undefined,params:undefined,callback:Ext.emptyFn,scope:undefined,reader:undefined};Ext.data.Response=function(a){Ext.apply(this,a)};Ext.data.Response.prototype={action:undefined,success:undefined,message:undefined,data:undefined,raw:undefined,records:undefined};Ext.data.ScriptTagProxy=function(a){Ext.apply(this,a);Ext.data.ScriptTagProxy.superclass.constructor.call(this,a);this.head=document.getElementsByTagName(\"head\")[0]};Ext.data.ScriptTagProxy.TRANS_ID=1000;Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:30000,callbackParam:\"callback\",nocache:true,doRequest:function(e,g,d,h,k,l,m){var c=Ext.urlEncode(Ext.apply(d,this.extraParams));var b=this.buildUrl(e,g);if(!b){throw new Ext.data.Api.Error(\"invalid-url\",b)}b=Ext.urlAppend(b,c);if(this.nocache){b=Ext.urlAppend(b,\"_dc=\"+(new Date().getTime()))}var a=++Ext.data.ScriptTagProxy.TRANS_ID;var n={id:a,action:e,cb:\"stcCallback\"+a,scriptId:\"stcScript\"+a,params:d,arg:m,url:b,callback:k,scope:l,reader:h};window[n.cb]=this.createCallback(e,g,n);b+=String.format(\"&{0}={1}\",this.callbackParam,n.cb);if(this.autoAbort!==false){this.abort()}n.timeoutId=this.handleFailure.defer(this.timeout,this,[n]);var i=document.createElement(\"script\");i.setAttribute(\"src\",b);i.setAttribute(\"type\",\"text/javascript\");i.setAttribute(\"id\",n.scriptId);this.head.appendChild(i);this.trans=n},createCallback:function(d,b,c){var a=this;return function(e){a.trans=false;a.destroyTrans(c,true);if(d===Ext.data.Api.actions.read){a.onRead.call(a,d,c,e)}else{a.onWrite.call(a,d,c,e,b)}}},onRead:function(d,c,b){var a;try{a=c.reader.readRecords(b)}catch(g){this.fireEvent(\"loadexception\",this,c,b,g);this.fireEvent(\"exception\",this,\"response\",d,c,b,g);c.callback.call(c.scope||window,null,c.arg,false);return}if(a.success===false){this.fireEvent(\"loadexception\",this,c,b);this.fireEvent(\"exception\",this,\"remote\",d,c,b,null)}else{this.fireEvent(\"load\",this,b,c.arg)}c.callback.call(c.scope||window,a,c.arg,a.success)},onWrite:function(h,g,c,b){var a=g.reader;try{var d=a.readResponse(h,c)}catch(i){this.fireEvent(\"exception\",this,\"response\",h,g,d,i);g.callback.call(g.scope||window,null,d,false);return}if(!d.success===true){this.fireEvent(\"exception\",this,\"remote\",h,g,d,b);g.callback.call(g.scope||window,null,d,false);return}this.fireEvent(\"write\",this,h,d.data,d,b,g.arg);g.callback.call(g.scope||window,d.data,d,true)},isLoading:function(){return this.trans?true:false},abort:function(){if(this.isLoading()){this.destroyTrans(this.trans)}},destroyTrans:function(b,a){this.head.removeChild(document.getElementById(b.scriptId));clearTimeout(b.timeoutId);if(a){window[b.cb]=undefined;try{delete window[b.cb]}catch(c){}}else{window[b.cb]=function(){window[b.cb]=undefined;try{delete window[b.cb]}catch(d){}}}},handleFailure:function(a){this.trans=false;this.destroyTrans(a,false);if(a.action===Ext.data.Api.actions.read){this.fireEvent(\"loadexception\",this,null,a.arg)}this.fireEvent(\"exception\",this,\"response\",a.action,{response:null,options:a.arg});a.callback.call(a.scope||window,null,a.arg,false)},destroy:function(){this.abort();Ext.data.ScriptTagProxy.superclass.destroy.call(this)}});Ext.data.HttpProxy=function(a){Ext.data.HttpProxy.superclass.constructor.call(this,a);this.conn=a;this.conn.url=null;this.useAjax=!a||!a.events;var c=Ext.data.Api.actions;this.activeRequest={};for(var b in c){this.activeRequest[c[b]]=undefined}};Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},setUrl:function(a,b){this.conn.url=a;if(b===true){this.url=a;this.api=null;Ext.data.Api.prepare(this)}},doRequest:function(g,d,i,c,b,e,a){var h={method:(this.api[g])?this.api[g][\"method\"]:undefined,request:{callback:b,scope:e,arg:a},reader:c,callback:this.createCallback(g,d),scope:this};if(i.jsonData){h.jsonData=i.jsonData}else{if(i.xmlData){h.xmlData=i.xmlData}else{h.params=i||{}}}this.conn.url=this.buildUrl(g,d);if(this.useAjax){Ext.applyIf(h,this.conn);if(this.activeRequest[g]){}this.activeRequest[g]=Ext.Ajax.request(h)}else{this.conn.request(h)}this.conn.url=null},createCallback:function(b,a){return function(e,d,c){this.activeRequest[b]=undefined;if(!d){if(b===Ext.data.Api.actions.read){this.fireEvent(\"loadexception\",this,e,c)}this.fireEvent(\"exception\",this,\"response\",b,e,c);e.request.callback.call(e.request.scope,null,e.request.arg,false);return}if(b===Ext.data.Api.actions.read){this.onRead(b,e,c)}else{this.onWrite(b,e,c,a)}}},onRead:function(d,h,b){var a;try{a=h.reader.read(b)}catch(g){this.fireEvent(\"loadexception\",this,h,b,g);this.fireEvent(\"exception\",this,\"response\",d,h,b,g);h.request.callback.call(h.request.scope,null,h.request.arg,false);return}if(a.success===false){this.fireEvent(\"loadexception\",this,h,b);var c=h.reader.readResponse(d,b);this.fireEvent(\"exception\",this,\"remote\",d,h,c,null)}else{this.fireEvent(\"load\",this,h,h.request.arg)}h.request.callback.call(h.request.scope,a,h.request.arg,a.success)},onWrite:function(g,i,c,b){var a=i.reader;var d;try{d=a.readResponse(g,c)}catch(h){this.fireEvent(\"exception\",this,\"response\",g,i,c,h);i.request.callback.call(i.request.scope,null,i.request.arg,false);return}if(d.success===true){this.fireEvent(\"write\",this,g,d.data,d,b,i.request.arg)}else{this.fireEvent(\"exception\",this,\"remote\",g,i,d,b)}i.request.callback.call(i.request.scope,d.data,d,d.success)},destroy:function(){if(!this.useAjax){this.conn.abort()}else{if(this.activeRequest){var b=Ext.data.Api.actions;for(var a in b){if(this.activeRequest[b[a]]){Ext.Ajax.abort(this.activeRequest[b[a]])}}}}Ext.data.HttpProxy.superclass.destroy.call(this)}});Ext.data.MemoryProxy=function(b){var a={};a[Ext.data.Api.actions.read]=true;Ext.data.MemoryProxy.superclass.constructor.call(this,{api:a});this.data=b};Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{doRequest:function(b,c,a,d,h,i,k){a=a||{};var l;try{l=d.readRecords(this.data)}catch(g){this.fireEvent(\"loadexception\",this,null,k,g);this.fireEvent(\"exception\",this,\"response\",b,k,null,g);h.call(i,null,k,false);return}h.call(i,l,k,true)}});Ext.data.Types=new function(){var a=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\\$,%]/g,AUTO:{convert:function(b){return b},sortType:a.none,type:\"auto\"},STRING:{convert:function(b){return(b===undefined||b===null)?\"\":String(b)},sortType:a.asUCString,type:\"string\"},INT:{convert:function(b){return b!==undefined&&b!==null&&b!==\"\"?parseInt(String(b).replace(Ext.data.Types.stripRe,\"\"),10):(this.useNull?null:0)},sortType:a.none,type:\"int\"},FLOAT:{convert:function(b){return b!==undefined&&b!==null&&b!==\"\"?parseFloat(String(b).replace(Ext.data.Types.stripRe,\"\"),10):(this.useNull?null:0)},sortType:a.none,type:\"float\"},BOOL:{convert:function(b){return b===true||b===\"true\"||b==1},sortType:a.none,type:\"bool\"},DATE:{convert:function(c){var d=this.dateFormat;if(!c){return null}if(Ext.isDate(c)){return c}if(d){if(d==\"timestamp\"){return new Date(c*1000)}if(d==\"time\"){return new Date(parseInt(c,10))}return Date.parseDate(c,d)}var b=Date.parse(c);return b?new Date(b):null},sortType:a.asDate,type:\"date\"}});Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})};Ext.data.JsonWriter=Ext.extend(Ext.data.DataWriter,{encode:true,encodeDelete:false,constructor:function(a){Ext.data.JsonWriter.superclass.constructor.call(this,a)},render:function(c,d,b){if(this.encode===true){Ext.apply(c,d);c[this.meta.root]=Ext.encode(b)}else{var a=Ext.apply({},d);a[this.meta.root]=b;c.jsonData=a}},createRecord:function(a){return this.toHash(a)},updateRecord:function(a){return this.toHash(a)},destroyRecord:function(b){if(this.encodeDelete){var a={};a[this.meta.idProperty]=b.id;return a}else{return b.id}}});Ext.data.JsonReader=function(a,b){a=a||{};Ext.applyIf(a,{idProperty:\"id\",successProperty:\"success\",totalProperty:\"total\"});Ext.data.JsonReader.superclass.constructor.call(this,a,b||a.fields)};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(a){var b=a.responseText;var c=Ext.decode(b);if(!c){throw {message:\"JsonReader.read: Json object not found\"}}return this.readRecords(c)},readResponse:function(e,b){var g=(b.responseText!==undefined)?Ext.decode(b.responseText):b;if(!g){throw new Ext.data.JsonReader.Error(\"response\")}var a=this.getRoot(g);if(e===Ext.data.Api.actions.create){var d=Ext.isDefined(a);if(d&&Ext.isEmpty(a)){throw new Ext.data.JsonReader.Error(\"root-empty\",this.meta.root)}else{if(!d){throw new Ext.data.JsonReader.Error(\"root-undefined-response\",this.meta.root)}}}var c=new Ext.data.Response({action:e,success:this.getSuccess(g),data:(a)?this.extractData(a,false):[],message:this.getMessage(g),raw:g});if(Ext.isEmpty(c.success)){throw new Ext.data.JsonReader.Error(\"successProperty-response\",this.meta.successProperty)}return c},readRecords:function(a){this.jsonData=a;if(a.metaData){this.onMetaChange(a.metaData)}var n=this.meta,h=this.recordType,b=h.prototype.fields,m=b.items,i=b.length,k;var g=this.getRoot(a),e=g.length,d=e,l=true;if(n.totalProperty){k=parseInt(this.getTotal(a),10);if(!isNaN(k)){d=k}}if(n.successProperty){k=this.getSuccess(a);if(k===false||k===\"false\"){l=false}}return{success:l,records:this.extractData(g,true),totalRecords:d}},buildExtractors:function(){if(this.ef){return}var m=this.meta,h=this.recordType,e=h.prototype.fields,l=e.items,k=e.length;if(m.totalProperty){this.getTotal=this.createAccessor(m.totalProperty)}if(m.successProperty){this.getSuccess=this.createAccessor(m.successProperty)}if(m.messageProperty){this.getMessage=this.createAccessor(m.messageProperty)}this.getRoot=m.root?this.createAccessor(m.root):function(g){return g};if(m.id||m.idProperty){var d=this.createAccessor(m.id||m.idProperty);this.getId=function(i){var g=d(i);return(g===undefined||g===\"\")?null:g}}else{this.getId=function(){return null}}var c=[];for(var b=0;b<k;b++){e=l[b];var a=(e.mapping!==undefined&&e.mapping!==null)?e.mapping:e.name;c.push(this.createAccessor(a))}this.ef=c},simpleAccess:function(b,a){return b[a]},createAccessor:function(){var a=/[\\[\\.]/;return function(c){if(Ext.isEmpty(c)){return Ext.emptyFn}if(Ext.isFunction(c)){return c}var b=String(c).search(a);if(b>=0){return new Function(\"obj\",\"return obj\"+(b>0?\".\":\"\")+c)}return function(d){return d[c]}}}(),extractValues:function(h,d,a){var g,c={};for(var e=0;e<a;e++){g=d[e];var b=this.ef[e](h);c[g.name]=g.convert((b!==undefined)?b:g.defaultValue,h)}return c}});Ext.data.JsonReader.Error=Ext.extend(Ext.Error,{constructor:function(b,a){this.arg=a;Ext.Error.call(this,b)},name:\"Ext.data.JsonReader\"});Ext.apply(Ext.data.JsonReader.Error.prototype,{lang:{response:\"An error occurred while json-decoding your server response\",\"successProperty-response\":'Could not locate your \"successProperty\" in your server response.  Please review your JsonReader config to ensure the config-property \"successProperty\" matches the property in your server-response.  See the JsonReader docs.',\"root-undefined-config\":'Your JsonReader was configured without a \"root\" property.  Please review your JsonReader config and make sure to define the root property.  See the JsonReader docs.',\"idProperty-undefined\":'Your JsonReader was configured without an \"idProperty\"  Please review your JsonReader configuration and ensure the \"idProperty\" is set (e.g.: \"id\").  See the JsonReader docs.',\"root-empty\":'Data was expected to be returned by the server in the \"root\" property of the response.  Please review your JsonReader configuration to ensure the \"root\" property matches that returned in the server-response.  See JsonReader docs.'}});Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(r){this.arrayData=r;var l=this.meta,d=l?Ext.num(l.idIndex,l.id):null,b=this.recordType,q=b.prototype.fields,z=[],e=true,g;var u=this.getRoot(r);for(var y=0,A=u.length;y<A;y++){var t=u[y],a={},p=((d||d===0)&&t[d]!==undefined&&t[d]!==\"\"?t[d]:null);for(var x=0,m=q.length;x<m;x++){var B=q.items[x],w=B.mapping!==undefined&&B.mapping!==null?B.mapping:x;g=t[w]!==undefined?t[w]:B.defaultValue;g=B.convert(g,t);a[B.name]=g}var c=new b(a,p);c.json=t;z[z.length]=c}var h=z.length;if(l.totalProperty){g=parseInt(this.getTotal(r),10);if(!isNaN(g)){h=g}}if(l.successProperty){g=this.getSuccess(r);if(g===false||g===\"false\"){e=false}}return{success:e,records:z,totalRecords:h}}});Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.ArrayStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.ArrayReader(a)}))},loadData:function(e,b){if(this.expandData===true){var d=[];for(var c=0,a=e.length;c<a;c++){d[d.length]=[e[c]]}e=d}Ext.data.ArrayStore.superclass.loadData.call(this,e,b)}});Ext.reg(\"arraystore\",Ext.data.ArrayStore);Ext.data.SimpleStore=Ext.data.ArrayStore;Ext.reg(\"simplestore\",Ext.data.SimpleStore);Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.JsonReader(a)}))}});Ext.reg(\"jsonstore\",Ext.data.JsonStore);Ext.data.XmlWriter=function(a){Ext.data.XmlWriter.superclass.constructor.apply(this,arguments);this.tpl=(typeof(this.tpl)===\"string\")?new Ext.XTemplate(this.tpl).compile():this.tpl.compile()};Ext.extend(Ext.data.XmlWriter,Ext.data.DataWriter,{documentRoot:\"xrequest\",forceDocumentRoot:false,root:\"records\",xmlVersion:\"1.0\",xmlEncoding:\"ISO-8859-15\",tpl:'<tpl for=\".\"><\\u003fxml version=\"{version}\" encoding=\"{encoding}\"\\u003f><tpl if=\"documentRoot\"><{documentRoot}><tpl for=\"baseParams\"><tpl for=\".\"><{name}>{value}</{name}></tpl></tpl></tpl><tpl if=\"records.length&gt;1\"><{root}></tpl><tpl for=\"records\"><{parent.record}><tpl for=\".\"><{name}>{value}</{name}></tpl></{parent.record}></tpl><tpl if=\"records.length&gt;1\"></{root}></tpl><tpl if=\"documentRoot\"></{documentRoot}></tpl></tpl>',render:function(b,c,a){c=this.toArray(c);b.xmlData=this.tpl.applyTemplate({version:this.xmlVersion,encoding:this.xmlEncoding,documentRoot:(c.length>0||this.forceDocumentRoot===true)?this.documentRoot:false,record:this.meta.record,root:this.root,baseParams:c,records:(Ext.isArray(a[0]))?a:[a]})},createRecord:function(a){return this.toArray(this.toHash(a))},updateRecord:function(a){return this.toArray(this.toHash(a))},destroyRecord:function(b){var a={};a[this.meta.idProperty]=b.id;return this.toArray(a)}});Ext.data.XmlReader=function(a,b){a=a||{};Ext.applyIf(a,{idProperty:a.idProperty||a.idPath||a.id,successProperty:a.successProperty||a.success});Ext.data.XmlReader.superclass.constructor.call(this,a,b||a.fields)};Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(a){var b=a.responseXML;if(!b){throw {message:\"XmlReader.read: XML Document not available\"}}return this.readRecords(b)},readRecords:function(d){this.xmlData=d;var a=d.documentElement||d,c=Ext.DomQuery,g=0,e=true;if(this.meta.totalProperty){g=this.getTotal(a,0)}if(this.meta.successProperty){e=this.getSuccess(a)}var b=this.extractData(c.select(this.meta.record,a),true);return{success:e,records:b,totalRecords:g||b.length}},readResponse:function(g,b){var e=Ext.DomQuery,h=b.responseXML,a=h.documentElement||h;var c=new Ext.data.Response({action:g,success:this.getSuccess(a),message:this.getMessage(a),data:this.extractData(e.select(this.meta.record,a)||e.select(this.meta.root,a),false),raw:h});if(Ext.isEmpty(c.success)){throw new Ext.data.DataReader.Error(\"successProperty-response\",this.meta.successProperty)}if(g===Ext.data.Api.actions.create){var d=Ext.isDefined(c.data);if(d&&Ext.isEmpty(c.data)){throw new Ext.data.JsonReader.Error(\"root-empty\",this.meta.root)}else{if(!d){throw new Ext.data.JsonReader.Error(\"root-undefined-response\",this.meta.root)}}}return c},getSuccess:function(){return true},buildExtractors:function(){if(this.ef){return}var m=this.meta,h=this.recordType,e=h.prototype.fields,l=e.items,k=e.length;if(m.totalProperty){this.getTotal=this.createAccessor(m.totalProperty)}if(m.successProperty){this.getSuccess=this.createAccessor(m.successProperty)}if(m.messageProperty){this.getMessage=this.createAccessor(m.messageProperty)}this.getRoot=function(g){return(!Ext.isEmpty(g[this.meta.record]))?g[this.meta.record]:g[this.meta.root]};if(m.idPath||m.idProperty){var d=this.createAccessor(m.idPath||m.idProperty);this.getId=function(g){var i=d(g)||g.id;return(i===undefined||i===\"\")?null:i}}else{this.getId=function(){return null}}var c=[];for(var b=0;b<k;b++){e=l[b];var a=(e.mapping!==undefined&&e.mapping!==null)?e.mapping:e.name;c.push(this.createAccessor(a))}this.ef=c},createAccessor:function(){var a=Ext.DomQuery;return function(b){if(Ext.isFunction(b)){return b}switch(b){case this.meta.totalProperty:return function(c,d){return a.selectNumber(b,c,d)};break;case this.meta.successProperty:return function(d,e){var c=a.selectValue(b,d,true);var g=c!==false&&c!==\"false\";return g};break;default:return function(c,d){return a.selectValue(b,c,d)};break}}}(),extractValues:function(h,d,a){var g,c={};for(var e=0;e<a;e++){g=d[e];var b=this.ef[e](h);c[g.name]=g.convert((b!==undefined)?b:g.defaultValue,h)}return c}});Ext.data.XmlStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.XmlStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.XmlReader(a)}))}});Ext.reg(\"xmlstore\",Ext.data.XmlStore);Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(d){d=d||{};this.hasMultiSort=true;this.multiSortInfo=this.multiSortInfo||{sorters:[]};var e=this.multiSortInfo.sorters,c=d.groupField||this.groupField,b=d.sortInfo||this.sortInfo,a=d.groupDir||this.groupDir;if(c){e.push({field:c,direction:a})}if(b){e.push(b)}Ext.data.GroupingStore.superclass.constructor.call(this,d);this.addEvents(\"groupchange\");this.applyGroupField()},remoteGroup:false,groupOnSort:false,groupDir:\"ASC\",clearGrouping:function(){this.groupField=false;if(this.remoteGroup){if(this.baseParams){delete this.baseParams.groupBy;delete this.baseParams.groupDir}var a=this.lastOptions;if(a&&a.params){delete a.params.groupBy;delete a.params.groupDir}this.reload()}else{this.sort();this.fireEvent(\"datachanged\",this)}},groupBy:function(e,a,d){d=d?(String(d).toUpperCase()==\"DESC\"?\"DESC\":\"ASC\"):this.groupDir;if(this.groupField==e&&this.groupDir==d&&!a){return}var c=this.multiSortInfo.sorters;if(c.length>0&&c[0].field==this.groupField){c.shift()}this.groupField=e;this.groupDir=d;this.applyGroupField();var b=function(){this.fireEvent(\"groupchange\",this,this.getGroupState())};if(this.groupOnSort){this.sort(e,d);b.call(this);return}if(this.remoteGroup){this.on(\"load\",b,this,{single:true});this.reload()}else{this.sort(c);b.call(this)}},sort:function(h,c){if(this.remoteSort){return Ext.data.GroupingStore.superclass.sort.call(this,h,c)}var g=[];if(Ext.isArray(arguments[0])){g=arguments[0]}else{if(h==undefined){g=this.sortInfo?[this.sortInfo]:[]}else{var e=this.fields.get(h);if(!e){return false}var b=e.name,a=this.sortInfo||null,d=this.sortToggle?this.sortToggle[b]:null;if(!c){if(a&&a.field==b){c=(this.sortToggle[b]||\"ASC\").toggle(\"ASC\",\"DESC\")}else{c=e.sortDir}}this.sortToggle[b]=c;this.sortInfo={field:b,direction:c};g=[this.sortInfo]}}if(this.groupField){g.unshift({direction:this.groupDir,field:this.groupField})}return this.multiSort.call(this,g,c)},applyGroupField:function(){if(this.remoteGroup){if(!this.baseParams){this.baseParams={}}Ext.apply(this.baseParams,{groupBy:this.groupField,groupDir:this.groupDir});var a=this.lastOptions;if(a&&a.params){a.params.groupDir=this.groupDir;delete a.params.groupBy}}},applyGrouping:function(a){if(this.groupField!==false){this.groupBy(this.groupField,true,this.groupDir);return true}else{if(a===true){this.fireEvent(\"datachanged\",this)}return false}},getGroupState:function(){return this.groupOnSort&&this.groupField!==false?(this.sortInfo?this.sortInfo.field:undefined):this.groupField}});Ext.reg(\"groupingstore\",Ext.data.GroupingStore);Ext.data.DirectProxy=function(a){Ext.apply(this,a);if(typeof this.paramOrder==\"string\"){this.paramOrder=this.paramOrder.split(/[\\s,|]/)}Ext.data.DirectProxy.superclass.constructor.call(this,a)};Ext.extend(Ext.data.DirectProxy,Ext.data.DataProxy,{paramOrder:undefined,paramsAsHash:true,directFn:undefined,doRequest:function(b,c,a,e,l,m,o){var k=[],h=this.api[b]||this.directFn;switch(b){case Ext.data.Api.actions.create:k.push(a.jsonData);break;case Ext.data.Api.actions.read:if(h.directCfg.method.len>0){if(this.paramOrder){for(var d=0,g=this.paramOrder.length;d<g;d++){k.push(a[this.paramOrder[d]])}}else{if(this.paramsAsHash){k.push(a)}}}break;case Ext.data.Api.actions.update:k.push(a.jsonData);break;case Ext.data.Api.actions.destroy:k.push(a.jsonData);break}var n={params:a||{},request:{callback:l,scope:m,arg:o},reader:e};k.push(this.createCallback(b,c,n),this);h.apply(window,k)},createCallback:function(d,a,b){var c=this;return function(e,g){if(!g.status){if(d===Ext.data.Api.actions.read){c.fireEvent(\"loadexception\",c,b,g,null)}c.fireEvent(\"exception\",c,\"remote\",d,b,g,null);b.request.callback.call(b.request.scope,null,b.request.arg,false);return}if(d===Ext.data.Api.actions.read){c.onRead(d,b,e,g)}else{c.onWrite(d,b,e,g,a)}}},onRead:function(g,e,a,d){var b;try{b=e.reader.readRecords(a)}catch(c){this.fireEvent(\"loadexception\",this,e,d,c);this.fireEvent(\"exception\",this,\"response\",g,e,d,c);e.request.callback.call(e.request.scope,null,e.request.arg,false);return}this.fireEvent(\"load\",this,d,e.request.arg);e.request.callback.call(e.request.scope,b,e.request.arg,true)},onWrite:function(g,d,a,c,b){var e=d.reader.extractData(d.reader.getRoot(a),false);var h=d.reader.getSuccess(a);h=(h!==false);if(h){this.fireEvent(\"write\",this,g,e,c,b,d.request.arg)}else{this.fireEvent(\"exception\",this,\"remote\",g,d,a,b)}d.request.callback.call(d.request.scope,e,c,h)}});Ext.data.DirectStore=Ext.extend(Ext.data.Store,{constructor:function(a){var b=Ext.apply({},{batchTransactions:false},a);Ext.data.DirectStore.superclass.constructor.call(this,Ext.apply(b,{proxy:Ext.isDefined(b.proxy)?b.proxy:new Ext.data.DirectProxy(Ext.copyTo({},b,\"paramOrder,paramsAsHash,directFn,api\")),reader:(!Ext.isDefined(b.reader)&&b.fields)?new Ext.data.JsonReader(Ext.copyTo({},b,\"totalProperty,root,idProperty\"),b.fields):b.reader}))}});Ext.reg(\"directstore\",Ext.data.DirectStore);Ext.Direct=Ext.extend(Ext.util.Observable,{exceptions:{TRANSPORT:\"xhr\",PARSE:\"parse\",LOGIN:\"login\",SERVER:\"exception\"},constructor:function(){this.addEvents(\"event\",\"exception\");this.transactions={};this.providers={}},addProvider:function(e){var c=arguments;if(c.length>1){for(var d=0,b=c.length;d<b;d++){this.addProvider(c[d])}return}if(!e.events){e=new Ext.Direct.PROVIDERS[e.type](e)}e.id=e.id||Ext.id();this.providers[e.id]=e;e.on(\"data\",this.onProviderData,this);e.on(\"exception\",this.onProviderException,this);if(!e.isConnected()){e.connect()}return e},getProvider:function(a){return this.providers[a]},removeProvider:function(b){var a=b.id?b:this.providers[b];a.un(\"data\",this.onProviderData,this);a.un(\"exception\",this.onProviderException,this);delete this.providers[a.id];return a},addTransaction:function(a){this.transactions[a.tid]=a;return a},removeTransaction:function(a){delete this.transactions[a.tid||a];return a},getTransaction:function(a){return this.transactions[a.tid||a]},onProviderData:function(d,c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.onProviderData(d,c[b])}return}if(c.name&&c.name!=\"event\"&&c.name!=\"exception\"){this.fireEvent(c.name,c)}else{if(c.type==\"exception\"){this.fireEvent(\"exception\",c)}}this.fireEvent(\"event\",c,d)},createEvent:function(a,b){return new Ext.Direct.eventTypes[a.type](Ext.apply(a,b))}});Ext.Direct=new Ext.Direct();Ext.Direct.TID=1;Ext.Direct.PROVIDERS={};Ext.Direct.Transaction=function(a){Ext.apply(this,a);this.tid=++Ext.Direct.TID;this.retryCount=0};Ext.Direct.Transaction.prototype={send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++;this.send()},getProvider:function(){return this.provider}};Ext.Direct.Event=function(a){Ext.apply(this,a)};Ext.Direct.Event.prototype={status:true,getData:function(){return this.data}};Ext.Direct.RemotingEvent=Ext.extend(Ext.Direct.Event,{type:\"rpc\",getTransaction:function(){return this.transaction||Ext.Direct.getTransaction(this.tid)}});Ext.Direct.ExceptionEvent=Ext.extend(Ext.Direct.RemotingEvent,{status:false,type:\"exception\"});Ext.Direct.eventTypes={rpc:Ext.Direct.RemotingEvent,event:Ext.Direct.Event,exception:Ext.Direct.ExceptionEvent};Ext.direct.Provider=Ext.extend(Ext.util.Observable,{priority:1,constructor:function(a){Ext.apply(this,a);this.addEvents(\"connect\",\"disconnect\",\"data\",\"exception\");Ext.direct.Provider.superclass.constructor.call(this,a)},isConnected:function(){return false},connect:Ext.emptyFn,disconnect:Ext.emptyFn});Ext.direct.JsonProvider=Ext.extend(Ext.direct.Provider,{parseResponse:function(a){if(!Ext.isEmpty(a.responseText)){if(typeof a.responseText==\"object\"){return a.responseText}return Ext.decode(a.responseText)}return null},getEvents:function(k){var g=null;try{g=this.parseResponse(k)}catch(h){var d=new Ext.Direct.ExceptionEvent({data:h,xhr:k,code:Ext.Direct.exceptions.PARSE,message:\"Error parsing json response: \\n\\n \"+g});return[d]}var c=[];if(Ext.isArray(g)){for(var b=0,a=g.length;b<a;b++){c.push(Ext.Direct.createEvent(g[b]))}}else{c.push(Ext.Direct.createEvent(g))}return c}});Ext.direct.PollingProvider=Ext.extend(Ext.direct.JsonProvider,{priority:3,interval:3000,constructor:function(a){Ext.direct.PollingProvider.superclass.constructor.call(this,a);this.addEvents(\"beforepoll\",\"poll\")},isConnected:function(){return !!this.pollTask},connect:function(){if(this.url&&!this.pollTask){this.pollTask=Ext.TaskMgr.start({run:function(){if(this.fireEvent(\"beforepoll\",this)!==false){if(typeof this.url==\"function\"){this.url(this.baseParams)}else{Ext.Ajax.request({url:this.url,callback:this.onData,scope:this,params:this.baseParams})}}},interval:this.interval,scope:this});this.fireEvent(\"connect\",this)}else{if(!this.url){throw\"Error initializing PollingProvider, no url configured.\"}}},disconnect:function(){if(this.pollTask){Ext.TaskMgr.stop(this.pollTask);delete this.pollTask;this.fireEvent(\"disconnect\",this)}},onData:function(d,k,h){if(k){var c=this.getEvents(h);for(var b=0,a=c.length;b<a;b++){var g=c[b];this.fireEvent(\"data\",this,g)}}else{var g=new Ext.Direct.ExceptionEvent({data:g,code:Ext.Direct.exceptions.TRANSPORT,message:\"Unable to connect to the server.\",xhr:h});this.fireEvent(\"data\",this,g)}}});Ext.Direct.PROVIDERS.polling=Ext.direct.PollingProvider;Ext.direct.RemotingProvider=Ext.extend(Ext.direct.JsonProvider,{enableBuffer:10,maxRetries:1,timeout:undefined,constructor:function(a){Ext.direct.RemotingProvider.superclass.constructor.call(this,a);this.addEvents(\"beforecall\",\"call\");this.namespace=(Ext.isString(this.namespace))?Ext.ns(this.namespace):this.namespace||window;this.transactions={};this.callBuffer=[]},initAPI:function(){var h=this.actions;for(var k in h){var d=this.namespace[k]||(this.namespace[k]={}),e=h[k];for(var g=0,b=e.length;g<b;g++){var a=e[g];d[a.name]=this.createMethod(k,a)}}},isConnected:function(){return !!this.connected},connect:function(){if(this.url){this.initAPI();this.connected=true;this.fireEvent(\"connect\",this)}else{if(!this.url){throw\"Error initializing RemotingProvider, no url configured.\"}}},disconnect:function(){if(this.connected){this.connected=false;this.fireEvent(\"disconnect\",this)}},onData:function(a,h,k){if(h){var l=this.getEvents(k);for(var b=0,c=l.length;b<c;b++){var d=l[b],m=this.getTransaction(d);this.fireEvent(\"data\",this,d);if(m){this.doCallback(m,d,true);Ext.Direct.removeTransaction(m)}}}else{var g=[].concat(a.ts);for(var b=0,c=g.length;b<c;b++){var m=this.getTransaction(g[b]);if(m&&m.retryCount<this.maxRetries){m.retry()}else{var d=new Ext.Direct.ExceptionEvent({data:d,transaction:m,code:Ext.Direct.exceptions.TRANSPORT,message:\"Unable to connect to the server.\",xhr:k});this.fireEvent(\"data\",this,d);if(m){this.doCallback(m,d,false);Ext.Direct.removeTransaction(m)}}}}},getCallData:function(a){return{action:a.action,method:a.method,data:a.data,type:\"rpc\",tid:a.tid}},doSend:function(d){var g={url:this.url,callback:this.onData,scope:this,ts:d,timeout:this.timeout},b;if(Ext.isArray(d)){b=[];for(var c=0,a=d.length;c<a;c++){b.push(this.getCallData(d[c]))}}else{b=this.getCallData(d)}if(this.enableUrlEncode){var e={};e[Ext.isString(this.enableUrlEncode)?this.enableUrlEncode:\"data\"]=Ext.encode(b);g.params=e}else{g.jsonData=b}Ext.Ajax.request(g)},combineAndSend:function(){var a=this.callBuffer.length;if(a>0){this.doSend(a==1?this.callBuffer[0]:this.callBuffer);this.callBuffer=[]}},queueTransaction:function(a){if(a.form){this.processForm(a);return}this.callBuffer.push(a);if(this.enableBuffer){if(!this.callTask){this.callTask=new Ext.util.DelayedTask(this.combineAndSend,this)}this.callTask.delay(Ext.isNumber(this.enableBuffer)?this.enableBuffer:10)}else{this.combineAndSend()}},doCall:function(i,a,b){var h=null,e=b[a.len],g=b[a.len+1];if(a.len!==0){h=b.slice(0,a.len)}var d=new Ext.Direct.Transaction({provider:this,args:b,action:i,method:a.name,data:h,cb:g&&Ext.isFunction(e)?e.createDelegate(g):e});if(this.fireEvent(\"beforecall\",this,d,a)!==false){Ext.Direct.addTransaction(d);this.queueTransaction(d);this.fireEvent(\"call\",this,d,a)}},doForm:function(k,b,g,i,e){var d=new Ext.Direct.Transaction({provider:this,action:k,method:b.name,args:[g,i,e],cb:e&&Ext.isFunction(i)?i.createDelegate(e):i,isForm:true});if(this.fireEvent(\"beforecall\",this,d,b)!==false){Ext.Direct.addTransaction(d);var a=String(g.getAttribute(\"enctype\")).toLowerCase()==\"multipart/form-data\",h={extTID:d.tid,extAction:k,extMethod:b.name,extType:\"rpc\",extUpload:String(a)};Ext.apply(d,{form:Ext.getDom(g),isUpload:a,params:i&&Ext.isObject(i.params)?Ext.apply(h,i.params):h});this.fireEvent(\"call\",this,d,b);this.processForm(d)}},processForm:function(a){Ext.Ajax.request({url:this.url,params:a.params,callback:this.onData,scope:this,form:a.form,isUpload:a.isUpload,ts:a})},createMethod:function(d,a){var b;if(!a.formHandler){b=function(){this.doCall(d,a,Array.prototype.slice.call(arguments,0))}.createDelegate(this)}else{b=function(e,g,c){this.doForm(d,a,e,g,c)}.createDelegate(this)}b.directCfg={action:d,method:a};return b},getTransaction:function(a){return a&&a.tid?Ext.Direct.getTransaction(a.tid):null},doCallback:function(c,g){var d=g.status?\"success\":\"failure\";if(c&&c.cb){var b=c.cb,a=Ext.isDefined(g.result)?g.result:g.data;if(Ext.isFunction(b)){b(a,g)}else{Ext.callback(b[d],b.scope,[a,g]);Ext.callback(b.callback,b.scope,[a,g])}}}});Ext.Direct.PROVIDERS.remoting=Ext.direct.RemotingProvider;Ext.Resizable=Ext.extend(Ext.util.Observable,{constructor:function(d,e){this.el=Ext.get(d);if(e&&e.wrap){e.resizeChild=this.el;this.el=this.el.wrap(typeof e.wrap==\"object\"?e.wrap:{cls:\"xresizable-wrap\"});this.el.id=this.el.dom.id=e.resizeChild.id+\"-rzwrap\";this.el.setStyle(\"overflow\",\"hidden\");this.el.setPositioning(e.resizeChild.getPositioning());e.resizeChild.clearPositioning();if(!e.width||!e.height){var g=e.resizeChild.getSize();this.el.setSize(g.width,g.height)}if(e.pinned&&!e.adjustments){e.adjustments=\"auto\"}}this.proxy=this.el.createProxy({tag:\"div\",cls:\"x-resizable-proxy\",id:this.el.id+\"-rzproxy\"},Ext.getBody());this.proxy.unselectable();this.proxy.enableDisplayMode(\"block\");Ext.apply(this,e);if(this.pinned){this.disableTrackOver=true;this.el.addClass(\"x-resizable-pinned\")}var l=this.el.getStyle(\"position\");if(l!=\"absolute\"&&l!=\"fixed\"){this.el.setStyle(\"position\",\"relative\")}if(!this.handles){this.handles=\"s,e,se\";if(this.multiDirectional){this.handles+=\",n,w\"}}if(this.handles==\"all\"){this.handles=\"n s e w ne nw se sw\"}var p=this.handles.split(/\\s*?[,;]\\s*?| /);var c=Ext.Resizable.positions;for(var k=0,m=p.length;k<m;k++){if(p[k]&&c[p[k]]){var o=c[p[k]];this[o]=new Ext.Resizable.Handle(this,o,this.disableTrackOver,this.transparent,this.handleCls)}}this.corner=this.southeast;if(this.handles.indexOf(\"n\")!=-1||this.handles.indexOf(\"w\")!=-1){this.updateBox=true}this.activeHandle=null;if(this.resizeChild){if(typeof this.resizeChild==\"boolean\"){this.resizeChild=Ext.get(this.el.dom.firstChild,true)}else{this.resizeChild=Ext.get(this.resizeChild,true)}}if(this.adjustments==\"auto\"){var b=this.resizeChild;var n=this.west,h=this.east,a=this.north,p=this.south;if(b&&(n||a)){b.position(\"relative\");b.setLeft(n?n.el.getWidth():0);b.setTop(a?a.el.getHeight():0)}this.adjustments=[(h?-h.el.getWidth():0)+(n?-n.el.getWidth():0),(a?-a.el.getHeight():0)+(p?-p.el.getHeight():0)-1]}if(this.draggable){this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id});this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id);if(this.constrainTo){this.dd.constrainTo(this.constrainTo)}}this.addEvents(\"beforeresize\",\"resize\");if(this.width!==null&&this.height!==null){this.resizeTo(this.width,this.height)}else{this.updateChildSize()}if(Ext.isIE){this.el.dom.style.zoom=1}Ext.Resizable.superclass.constructor.call(this)},adjustments:[0,0],animate:false,disableTrackOver:false,draggable:false,duration:0.35,dynamic:false,easing:\"easeOutStrong\",enabled:true,handles:false,multiDirectional:false,height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:10000,maxWidth:10000,minX:0,minY:0,pinned:false,preserveRatio:false,resizeChild:false,transparent:false,resizeTo:function(b,a){this.el.setSize(b,a);this.updateChildSize();this.fireEvent(\"resize\",this,b,a,null)},startSizing:function(c,b){this.fireEvent(\"beforeresize\",this,c);if(this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:\"div\",cls:\"x-resizable-overlay\",html:\"&#160;\"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode(\"block\");this.overlay.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})}this.overlay.setStyle(\"cursor\",b.el.getStyle(\"cursor\"));this.resizing=true;this.startBox=this.el.getBox();this.startPoint=c.getXY();this.offsets=[(this.startBox.x+this.startBox.width)-this.startPoint[0],(this.startBox.y+this.startBox.height)-this.startPoint[1]];this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();if(this.constrainTo){var a=Ext.get(this.constrainTo);this.resizeRegion=a.getRegion().adjust(a.getFrameWidth(\"t\"),a.getFrameWidth(\"l\"),-a.getFrameWidth(\"b\"),-a.getFrameWidth(\"r\"))}this.proxy.setStyle(\"visibility\",\"hidden\");this.proxy.show();this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.setStyle(\"visibility\",\"visible\")}}},onMouseDown:function(a,b){if(this.enabled){b.stopEvent();this.activeHandle=a;this.startSizing(b,a)}},onMouseUp:function(b){this.activeHandle=null;var a=this.resizeElement();this.resizing=false;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent(\"resize\",this,a.width,a.height,b)},updateChildSize:function(){if(this.resizeChild){var d=this.el;var e=this.resizeChild;var c=this.adjustments;if(d.dom.offsetWidth){var a=d.getSize(true);e.setSize(a.width+c[0],a.height+c[1])}if(Ext.isIE){setTimeout(function(){if(d.dom.offsetWidth){var g=d.getSize(true);e.setSize(g.width+c[0],g.height+c[1])}},10)}}},snap:function(c,e,b){if(!e||!c){return c}var d=c;var a=c%e;if(a>0){if(a>(e/2)){d=c+(e-a)}else{d=c-a}}return Math.max(b,d)},resizeElement:function(){var a=this.proxy.getBox();if(this.updateBox){this.el.setBox(a,false,this.animate,this.duration,null,this.easing)}else{this.el.setSize(a.width,a.height,this.animate,this.duration,null,this.easing)}this.updateChildSize();if(!this.dynamic){this.proxy.hide()}if(this.draggable&&this.constrainTo){this.dd.resetConstraints();this.dd.constrainTo(this.constrainTo)}return a},constrain:function(b,c,a,d){if(b-c<a){c=b-a}else{if(b-c>d){c=b-d}}return c},onMouseMove:function(A){if(this.enabled&&this.activeHandle){try{if(this.resizeRegion&&!this.resizeRegion.contains(A.getPoint())){return}var u=this.curSize||this.startBox,m=this.startBox.x,l=this.startBox.y,c=m,b=l,n=u.width,v=u.height,d=n,p=v,o=this.minWidth,B=this.minHeight,t=this.maxWidth,E=this.maxHeight,i=this.widthIncrement,a=this.heightIncrement,C=A.getXY(),s=-(this.startPoint[0]-Math.max(this.minX,C[0])),q=-(this.startPoint[1]-Math.max(this.minY,C[1])),k=this.activeHandle.position,F,g;switch(k){case\"east\":n+=s;n=Math.min(Math.max(o,n),t);break;case\"south\":v+=q;v=Math.min(Math.max(B,v),E);break;case\"southeast\":n+=s;v+=q;n=Math.min(Math.max(o,n),t);v=Math.min(Math.max(B,v),E);break;case\"north\":q=this.constrain(v,q,B,E);l+=q;v-=q;break;case\"west\":s=this.constrain(n,s,o,t);m+=s;n-=s;break;case\"northeast\":n+=s;n=Math.min(Math.max(o,n),t);q=this.constrain(v,q,B,E);l+=q;v-=q;break;case\"northwest\":s=this.constrain(n,s,o,t);q=this.constrain(v,q,B,E);l+=q;v-=q;m+=s;n-=s;break;case\"southwest\":s=this.constrain(n,s,o,t);v+=q;v=Math.min(Math.max(B,v),E);m+=s;n-=s;break}var r=this.snap(n,i,o);var D=this.snap(v,a,B);if(r!=n||D!=v){switch(k){case\"northeast\":l-=D-v;break;case\"north\":l-=D-v;break;case\"southwest\":m-=r-n;break;case\"west\":m-=r-n;break;case\"northwest\":m-=r-n;l-=D-v;break}n=r;v=D}if(this.preserveRatio){switch(k){case\"southeast\":case\"east\":v=p*(n/d);v=Math.min(Math.max(B,v),E);n=d*(v/p);break;case\"south\":n=d*(v/p);n=Math.min(Math.max(o,n),t);v=p*(n/d);break;case\"northeast\":n=d*(v/p);n=Math.min(Math.max(o,n),t);v=p*(n/d);break;case\"north\":F=n;n=d*(v/p);n=Math.min(Math.max(o,n),t);v=p*(n/d);m+=(F-n)/2;break;case\"southwest\":v=p*(n/d);v=Math.min(Math.max(B,v),E);F=n;n=d*(v/p);m+=F-n;break;case\"west\":g=v;v=p*(n/d);v=Math.min(Math.max(B,v),E);l+=(g-v)/2;F=n;n=d*(v/p);m+=F-n;break;case\"northwest\":F=n;g=v;v=p*(n/d);v=Math.min(Math.max(B,v),E);n=d*(v/p);l+=g-v;m+=F-n;break}}this.proxy.setBounds(m,l,n,v);if(this.dynamic){this.resizeElement()}}catch(z){}}},handleOver:function(){if(this.enabled){this.el.addClass(\"x-resizable-over\")}},handleOut:function(){if(!this.resizing){this.el.removeClass(\"x-resizable-over\")}},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(b){Ext.destroy(this.dd,this.overlay,this.proxy);this.overlay=null;this.proxy=null;var c=Ext.Resizable.positions;for(var a in c){if(typeof c[a]!=\"function\"&&this[c[a]]){this[c[a]].destroy()}}if(b){this.el.update(\"\");Ext.destroy(this.el);this.el=null}this.purgeListeners()},syncHandleHeight:function(){var a=this.el.getHeight(true);if(this.west){this.west.el.setHeight(a)}if(this.east){this.east.el.setHeight(a)}}});Ext.Resizable.positions={n:\"north\",s:\"south\",e:\"east\",w:\"west\",se:\"southeast\",sw:\"southwest\",nw:\"northwest\",ne:\"northeast\"};Ext.Resizable.Handle=Ext.extend(Object,{constructor:function(d,g,c,e,a){if(!this.tpl){var b=Ext.DomHelper.createTemplate({tag:\"div\",cls:\"x-resizable-handle x-resizable-handle-{0}\"});b.compile();Ext.Resizable.Handle.prototype.tpl=b}this.position=g;this.rz=d;this.el=this.tpl.append(d.el.dom,[this.position],true);this.el.unselectable();if(e){this.el.setOpacity(0)}if(!Ext.isEmpty(a)){this.el.addClass(a)}this.el.on(\"mousedown\",this.onMouseDown,this);if(!c){this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})}},afterResize:function(a){},onMouseDown:function(a){this.rz.onMouseDown(this,a)},onMouseOver:function(a){this.rz.handleOver(this,a)},onMouseOut:function(a){this.rz.handleOut(this,a)},destroy:function(){Ext.destroy(this.el);this.el=null}});Ext.Window=Ext.extend(Ext.Panel,{baseCls:\"x-window\",resizable:true,draggable:true,closable:true,closeAction:\"close\",constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,showAnimDuration:0.25,hideAnimDuration:0.25,collapsible:false,initHidden:undefined,hidden:true,elements:\"header,body\",frame:true,floating:true,initComponent:function(){this.initTools();Ext.Window.superclass.initComponent.call(this);this.addEvents(\"resize\",\"maximize\",\"minimize\",\"restore\");if(Ext.isDefined(this.initHidden)){this.hidden=this.initHidden}if(this.hidden===false){this.hidden=true;this.show()}},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(true))},onRender:function(b,a){Ext.Window.superclass.onRender.call(this,b,a);if(this.plain){this.el.addClass(\"x-window-plain\")}this.focusEl=this.el.createChild({tag:\"a\",href:\"#\",cls:\"x-dlg-focus\",tabIndex:\"-1\",html:\"&#160;\"});this.focusEl.swallowEvent(\"click\",true);this.proxy=this.el.createProxy(\"x-window-proxy\");this.proxy.enableDisplayMode(\"block\");if(this.modal){this.mask=this.container.createChild({cls:\"ext-el-mask\"},this.el.dom);this.mask.enableDisplayMode(\"block\");this.mask.hide();this.mon(this.mask,\"click\",this.focus,this)}if(this.maximizable){this.mon(this.header,\"dblclick\",this.toggleMaximize,this)}},initEvents:function(){Ext.Window.superclass.initEvents.call(this);if(this.animateTarget){this.setAnimateTarget(this.animateTarget)}if(this.resizable){this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||\"all\",pinned:true,resizeElement:this.resizerAction,handleCls:\"x-window-handle\"});this.resizer.window=this;this.mon(this.resizer,\"beforeresize\",this.beforeResize,this)}if(this.draggable){this.header.addClass(\"x-window-draggable\")}this.mon(this.el,\"mousedown\",this.toFront,this);this.manager=this.manager||Ext.WindowMgr;this.manager.register(this);if(this.maximized){this.maximized=false;this.maximize()}if(this.closable){var a=this.getKeyMap();a.on(27,this.onEsc,this);a.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(a,b){b.stopEvent();this[this.closeAction]()},beforeDestroy:function(){if(this.rendered){this.hide();this.clearAnchor();Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)}Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){if(this.manager){this.manager.unregister(this)}Ext.Window.superclass.onDestroy.call(this)},initTools:function(){if(this.minimizable){this.addTool({id:\"minimize\",handler:this.minimize.createDelegate(this,[])})}if(this.maximizable){this.addTool({id:\"maximize\",handler:this.maximize.createDelegate(this,[])});this.addTool({id:\"restore\",handler:this.restore.createDelegate(this,[]),hidden:true})}if(this.closable){this.addTool({id:\"close\",handler:this[this.closeAction].createDelegate(this,[])})}},resizerAction:function(){var a=this.proxy.getBox();this.proxy.hide();this.window.handleResize(a);return a},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this.el.getBox()},updateHandles:function(){if(Ext.isIE&&this.resizer){this.resizer.syncHandleHeight();this.el.repaint()}},handleResize:function(b){var a=this.resizeBox;if(a.x!=b.x||a.y!=b.y){this.updateBox(b)}else{this.setSize(b);if(Ext.isIE6&&Ext.isStrict){this.doLayout()}}this.focus();this.updateHandles();this.saveState()},focus:function(){var e=this.focusEl,a=this.defaultButton,c=typeof a,d,b;if(Ext.isDefined(a)){if(Ext.isNumber(a)&&this.fbar){e=this.fbar.items.get(a)}else{if(Ext.isString(a)){e=Ext.getCmp(a)}else{e=a}}d=e.getEl();b=Ext.getDom(this.container);if(d&&b){if(b!=document.body&&!Ext.lib.Region.getRegion(b).contains(Ext.lib.Region.getRegion(d.dom))){return}}}e=e||this.focusEl;e.focus.defer(10,e)},setAnimateTarget:function(a){a=Ext.get(a);this.animateTarget=a},beforeShow:function(){delete this.el.lastXY;delete this.el.lastLT;if(this.x===undefined||this.y===undefined){var a=this.el.getAlignToXY(this.container,\"c-c\");var b=this.el.translatePoints(a[0],a[1]);this.x=this.x===undefined?b.left:this.x;this.y=this.y===undefined?b.top:this.y}this.el.setLeftTop(this.x,this.y);if(this.expandOnShow){this.expand(false)}if(this.modal){Ext.getBody().addClass(\"x-body-masked\");this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.mask.show()}},show:function(c,a,b){if(!this.rendered){this.render(Ext.getBody())}if(this.hidden===false){this.toFront();return this}if(this.fireEvent(\"beforeshow\",this)===false){return this}if(a){this.on(\"show\",a,b,{single:true})}this.hidden=false;if(Ext.isDefined(c)){this.setAnimateTarget(c)}this.beforeShow();if(this.animateTarget){this.animShow()}else{this.afterShow()}return this},afterShow:function(b){if(this.isDestroyed){return false}this.proxy.hide();this.el.setStyle(\"display\",\"block\");this.el.show();if(this.maximized){this.fitContainer()}if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.onWindowResize(this.onWindowResize,this)}this.doConstrain();this.doLayout();if(this.keyMap){this.keyMap.enable()}this.toFront();this.updateHandles();if(b&&(Ext.isIE||Ext.isWebKit)){var a=this.getSize();this.onResize(a.width,a.height)}this.onShow();this.fireEvent(\"show\",this)},animShow:function(){this.proxy.show();this.proxy.setBox(this.animateTarget.getBox());this.proxy.setOpacity(0);var a=this.getBox();this.el.setStyle(\"display\",\"none\");this.proxy.shift(Ext.apply(a,{callback:this.afterShow.createDelegate(this,[true],false),scope:this,easing:\"easeNone\",duration:this.showAnimDuration,opacity:0.5}))},hide:function(c,a,b){if(this.hidden||this.fireEvent(\"beforehide\",this)===false){return this}if(a){this.on(\"hide\",a,b,{single:true})}this.hidden=true;if(c!==undefined){this.setAnimateTarget(c)}if(this.modal){this.mask.hide();Ext.getBody().removeClass(\"x-body-masked\")}if(this.animateTarget){this.animHide()}else{this.el.hide();this.afterHide()}return this},afterHide:function(){this.proxy.hide();if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.removeResizeListener(this.onWindowResize,this)}if(this.keyMap){this.keyMap.disable()}this.onHide();this.fireEvent(\"hide\",this)},animHide:function(){this.proxy.setOpacity(0.5);this.proxy.show();var a=this.getBox(false);this.proxy.setBox(a);this.el.hide();this.proxy.shift(Ext.apply(this.animateTarget.getBox(),{callback:this.afterHide,scope:this,duration:this.hideAnimDuration,easing:\"easeNone\",opacity:0}))},onShow:Ext.emptyFn,onHide:Ext.emptyFn,onWindowResize:function(){if(this.maximized){this.fitContainer()}if(this.modal){this.mask.setSize(\"100%\",\"100%\");var a=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var b;if(this.constrain){b={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}}else{var a=this.getSize();b={right:-(a.width-100),bottom:-(a.height-25)}}var c=this.el.getConstrainToXY(this.container,true,b);if(c){this.setPosition(c[0],c[1])}}},ghost:function(a){var c=this.createGhost(a);var b=this.getBox(true);c.setLeftTop(b.x,b.y);c.setWidth(b.width);this.el.hide();this.activeGhost=c;return c},unghost:function(b,a){if(!this.activeGhost){return}if(b!==false){this.el.show();this.focus.defer(10,this);if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}}if(a!==false){this.setPosition(this.activeGhost.getLeft(true),this.activeGhost.getTop(true))}this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost},minimize:function(){this.fireEvent(\"minimize\",this);return this},close:function(){if(this.fireEvent(\"beforeclose\",this)!==false){if(this.hidden){this.doClose()}else{this.hide(null,this.doClose,this)}}},doClose:function(){this.fireEvent(\"close\",this);this.destroy()},maximize:function(){if(!this.maximized){this.expand(false);this.restoreSize=this.getSize();this.restorePos=this.getPosition(true);if(this.maximizable){this.tools.maximize.hide();this.tools.restore.show()}this.maximized=true;this.el.disableShadow();if(this.dd){this.dd.lock()}if(this.collapsible){this.tools.toggle.hide()}this.el.addClass(\"x-window-maximized\");this.container.addClass(\"x-window-maximized-ct\");this.setPosition(0,0);this.fitContainer();this.fireEvent(\"maximize\",this)}return this},restore:function(){if(this.maximized){var a=this.tools;this.el.removeClass(\"x-window-maximized\");if(a.restore){a.restore.hide()}if(a.maximize){a.maximize.show()}this.setPosition(this.restorePos[0],this.restorePos[1]);this.setSize(this.restoreSize.width,this.restoreSize.height);delete this.restorePos;delete this.restoreSize;this.maximized=false;this.el.enableShadow(true);if(this.dd){this.dd.unlock()}if(this.collapsible&&a.toggle){a.toggle.show()}this.container.removeClass(\"x-window-maximized-ct\");this.doConstrain();this.fireEvent(\"restore\",this)}return this},toggleMaximize:function(){return this[this.maximized?\"restore\":\"maximize\"]()},fitContainer:function(){var a=this.container.getViewSize(false);this.setSize(a.width,a.height)},setZIndex:function(a){if(this.modal){this.mask.setStyle(\"z-index\",a)}this.el.setZIndex(++a);a+=5;if(this.resizer){this.resizer.proxy.setStyle(\"z-index\",++a)}this.lastZIndex=a},alignTo:function(b,a,c){var d=this.el.getAlignToXY(b,a,c);this.setPagePosition(d[0],d[1]);return this},anchorTo:function(c,e,d,b){this.clearAnchor();this.anchorTarget={el:c,alignment:e,offsets:d};Ext.EventManager.onWindowResize(this.doAnchor,this);var a=typeof b;if(a!=\"undefined\"){Ext.EventManager.on(window,\"scroll\",this.doAnchor,this,{buffer:a==\"number\"?b:50})}return this.doAnchor()},doAnchor:function(){var a=this.anchorTarget;this.alignTo(a.el,a.alignment,a.offsets);return this},clearAnchor:function(){if(this.anchorTarget){Ext.EventManager.removeResizeListener(this.doAnchor,this);Ext.EventManager.un(window,\"scroll\",this.doAnchor,this);delete this.anchorTarget}return this},toFront:function(a){if(this.manager.bringToFront(this)){if(!a||!a.getTarget().focus){this.focus()}}return this},setActive:function(a){if(a){if(!this.maximized){this.el.enableShadow(true)}this.fireEvent(\"activate\",this)}else{this.el.disableShadow();this.fireEvent(\"deactivate\",this)}},toBack:function(){this.manager.sendToBack(this);return this},center:function(){var a=this.el.getAlignToXY(this.container,\"c-c\");this.setPagePosition(a[0],a[1]);return this}});Ext.reg(\"window\",Ext.Window);Ext.Window.DD=Ext.extend(Ext.dd.DD,{constructor:function(a){this.win=a;Ext.Window.DD.superclass.constructor.call(this,a.el.id,\"WindowDD-\"+a.id);this.setHandleElId(a.header.id);this.scroll=false},moveOnly:true,headerOffsets:[100,25],startDrag:function(){var a=this.win;this.proxy=a.ghost(a.initialConfig.cls);if(a.constrain!==false){var c=a.el.shadowOffset;this.constrainTo(a.container,{right:c,left:c,bottom:c})}else{if(a.constrainHeader!==false){var b=this.proxy.getSize();this.constrainTo(a.container,{right:-(b.width-this.headerOffsets[0]),bottom:-(b.height-this.headerOffsets[1])})}}},b4Drag:Ext.emptyFn,onDrag:function(a){this.alignElWithMouse(this.proxy,a.getPageX(),a.getPageY())},endDrag:function(a){this.win.unghost();this.win.saveState()}});Ext.WindowGroup=function(){var g={};var d=[];var e=null;var c=function(k,i){return(!k._lastAccess||k._lastAccess<i._lastAccess)?-1:1};var h=function(){var m=d,k=m.length;if(k>0){m.sort(c);var l=m[0].manager.zseed;for(var n=0;n<k;n++){var o=m[n];if(o&&!o.hidden){o.setZIndex(l+(n*10))}}}a()};var b=function(i){if(i!=e){if(e){e.setActive(false)}e=i;if(i){i.setActive(true)}}};var a=function(){for(var k=d.length-1;k>=0;--k){if(!d[k].hidden){b(d[k]);return}}b(null)};return{zseed:9000,register:function(i){if(i.manager){i.manager.unregister(i)}i.manager=this;g[i.id]=i;d.push(i);i.on(\"hide\",a)},unregister:function(i){delete i.manager;delete g[i.id];i.un(\"hide\",a);d.remove(i)},get:function(i){return typeof i==\"object\"?i:g[i]},bringToFront:function(i){i=this.get(i);if(i!=e){i._lastAccess=new Date().getTime();h();return true}return false},sendToBack:function(i){i=this.get(i);i._lastAccess=-(new Date().getTime());h();return i},hideAll:function(){for(var i in g){if(g[i]&&typeof g[i]!=\"function\"&&g[i].isVisible()){g[i].hide()}}},getActive:function(){return e},getBy:function(m,l){var n=[];for(var k=d.length-1;k>=0;--k){var o=d[k];if(m.call(l||o,o)!==false){n.push(o)}}return n},each:function(k,i){for(var l in g){if(g[l]&&typeof g[l]!=\"function\"){if(k.call(i||g[l],g[l])===false){return}}}}}};Ext.WindowMgr=new Ext.WindowGroup();Ext.MessageBox=function(){var v,b,r,u,h,m,t,a,o,q,k,g,s,w,p,i=\"\",d=\"\",n=[\"ok\",\"yes\",\"no\",\"cancel\"];var c=function(y){s[y].blur();if(v.isVisible()){v.hide();x();Ext.callback(b.fn,b.scope||window,[y,w.dom.value,b],1)}};var x=function(){if(b&&b.cls){v.el.removeClass(b.cls)}o.reset()};var e=function(A,y,z){if(b&&b.closable!==false){v.hide();x()}if(z){z.stopEvent()}};var l=function(y){var A=0,z;if(!y){Ext.each(n,function(B){s[B].hide()});return A}v.footer.dom.style.display=\"\";Ext.iterate(s,function(B,C){z=y[B];if(z){C.show();C.setText(Ext.isString(z)?z:Ext.MessageBox.buttonText[B]);A+=C.getEl().getWidth()+15}else{C.hide()}});return A};return{getDialog:function(y){if(!v){var A=[];s={};Ext.each(n,function(B){A.push(s[B]=new Ext.Button({text:this.buttonText[B],handler:c.createCallback(B),hideMode:\"offsets\"}))},this);v=new Ext.Window({autoCreate:true,title:y,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:\"center\",width:400,height:100,minHeight:80,plain:true,footer:true,closable:true,close:function(){if(b&&b.buttons&&b.buttons.no&&!b.buttons.cancel){c(\"no\")}else{c(\"cancel\")}},fbar:new Ext.Toolbar({items:A,enableOverflow:false})});v.render(document.body);v.getEl().addClass(\"x-window-dlg\");r=v.mask;h=v.body.createChild({html:'<div class=\"ext-mb-icon\"></div><div class=\"ext-mb-content\"><span class=\"ext-mb-text\"></span><br /><div class=\"ext-mb-fix-cursor\"><input type=\"text\" class=\"ext-mb-input\" /><textarea class=\"ext-mb-textarea\"></textarea></div></div>'});k=Ext.get(h.dom.firstChild);var z=h.dom.childNodes[1];m=Ext.get(z.firstChild);t=Ext.get(z.childNodes[2].firstChild);t.enableDisplayMode();t.addKeyListener([10,13],function(){if(v.isVisible()&&b&&b.buttons){if(b.buttons.ok){c(\"ok\")}else{if(b.buttons.yes){c(\"yes\")}}}});a=Ext.get(z.childNodes[2].childNodes[1]);a.enableDisplayMode();o=new Ext.ProgressBar({renderTo:h});h.createChild({cls:\"x-clear\"})}return v},updateText:function(B){if(!v.isVisible()&&!b.width){v.setSize(this.maxWidth,100)}m.update(B?B+\" \":\"&#160;\");var z=d!=\"\"?(k.getWidth()+k.getMargins(\"lr\")):0,D=m.getWidth()+m.getMargins(\"lr\"),A=v.getFrameWidth(\"lr\"),C=v.body.getFrameWidth(\"lr\"),y;y=Math.max(Math.min(b.width||z+D+A+C,b.maxWidth||this.maxWidth),Math.max(b.minWidth||this.minWidth,p||0));if(b.prompt===true){w.setWidth(y-z-A-C)}if(b.progress===true||b.wait===true){o.setSize(y-z-A-C)}if(Ext.isIE&&y==p){y+=4}m.update(B||\"&#160;\");v.setSize(y,\"auto\").center();return this},updateProgress:function(z,y,A){o.updateProgress(z,y);if(A){this.updateText(A)}return this},isVisible:function(){return v&&v.isVisible()},hide:function(){var y=v?v.activeGhost:null;if(this.isVisible()||y){v.hide();x();if(y){v.unghost(false,false)}}return this},show:function(B){if(this.isVisible()){this.hide()}b=B;var C=this.getDialog(b.title||\"&#160;\");C.setTitle(b.title||\"&#160;\");var y=(b.closable!==false&&b.progress!==true&&b.wait!==true);C.tools.close.setDisplayed(y);w=t;b.prompt=b.prompt||(b.multiline?true:false);if(b.prompt){if(b.multiline){t.hide();a.show();a.setHeight(Ext.isNumber(b.multiline)?b.multiline:this.defaultTextHeight);w=a}else{t.show();a.hide()}}else{t.hide();a.hide()}w.dom.value=b.value||\"\";if(b.prompt){C.focusEl=w}else{var A=b.buttons;var z=null;if(A&&A.ok){z=s.ok}else{if(A&&A.yes){z=s.yes}}if(z){C.focusEl=z}}if(Ext.isDefined(b.iconCls)){C.setIconClass(b.iconCls)}this.setIcon(Ext.isDefined(b.icon)?b.icon:i);p=l(b.buttons);o.setVisible(b.progress===true||b.wait===true);this.updateProgress(0,b.progressText);this.updateText(b.msg);if(b.cls){C.el.addClass(b.cls)}C.proxyDrag=b.proxyDrag===true;C.modal=b.modal!==false;C.mask=b.modal!==false?r:false;if(!C.isVisible()){document.body.appendChild(v.el.dom);C.setAnimateTarget(b.animEl);C.on(\"show\",function(){if(y===true){C.keyMap.enable()}else{C.keyMap.disable()}},this,{single:true});C.show(b.animEl)}if(b.wait===true){o.wait(b.waitConfig)}return this},setIcon:function(y){if(!v){i=y;return}i=undefined;if(y&&y!=\"\"){k.removeClass(\"x-hidden\");k.replaceClass(d,y);h.addClass(\"x-dlg-icon\");d=y}else{k.replaceClass(d,\"x-hidden\");h.removeClass(\"x-dlg-icon\");d=\"\"}return this},progress:function(A,z,y){this.show({title:A,msg:z,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,progressText:y});return this},wait:function(A,z,y){this.show({title:z,msg:A,buttons:false,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:y});return this},alert:function(B,A,z,y){this.show({title:B,msg:A,buttons:this.OK,fn:z,scope:y,minWidth:this.minWidth});return this},confirm:function(B,A,z,y){this.show({title:B,msg:A,buttons:this.YESNO,fn:z,scope:y,icon:this.QUESTION,minWidth:this.minWidth});return this},prompt:function(D,C,A,z,y,B){this.show({title:D,msg:C,buttons:this.OKCANCEL,fn:A,minWidth:this.minPromptWidth,scope:z,prompt:true,multiline:y,value:B});return this},OK:{ok:true},CANCEL:{cancel:true},OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:\"ext-mb-info\",WARNING:\"ext-mb-warning\",QUESTION:\"ext-mb-question\",ERROR:\"ext-mb-error\",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:\"OK\",cancel:\"Cancel\",yes:\"Yes\",no:\"No\"}}}();Ext.Msg=Ext.MessageBox;Ext.dd.PanelProxy=Ext.extend(Object,{constructor:function(a,b){this.panel=a;this.id=this.panel.id+\"-ddproxy\";Ext.apply(this,b)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.el.dom.style.display=\"\";this.ghost.remove();delete this.ghost}},show:function(){if(!this.ghost){this.ghost=this.panel.createGhost(this.panel.initialConfig.cls,undefined,Ext.getBody());this.ghost.setXY(this.panel.el.getXY());if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:\"x-panel-dd-spacer\"});this.proxy.setSize(this.panel.getSize())}this.panel.el.dom.style.display=\"none\"}},repair:function(b,c,a){this.hide();if(typeof c==\"function\"){c.call(a||this)}},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}});Ext.Panel.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(b,a){this.panel=b;this.dragData={panel:b};this.proxy=new Ext.dd.PanelProxy(b,a);Ext.Panel.DD.superclass.constructor.call(this,b.el,a);var d=b.header,c=b.body;if(d){this.setHandleElId(d.id);c=b.header}c.setStyle(\"cursor\",\"move\");this.scroll=false},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.proxy.show()},b4MouseDown:function(b){var a=b.getPageX(),c=b.getPageY();this.autoOffset(a,c)},onInitDrag:function(a,b){this.onStartDrag(a,b);return true},createFrame:Ext.emptyFn,getDragEl:function(a){return this.proxy.ghost.dom},endDrag:function(a){this.proxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)}});Ext.state.Provider=Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents(\"statechange\");this.state={};Ext.state.Provider.superclass.constructor.call(this)},get:function(b,a){return typeof this.state[b]==\"undefined\"?a:this.state[b]},clear:function(a){delete this.state[a];this.fireEvent(\"statechange\",this,a,null)},set:function(a,b){this.state[a]=b;this.fireEvent(\"statechange\",this,a,b)},decodeValue:function(b){var e=/^(a|n|d|b|s|o|e)\\:(.*)$/,h=e.exec(unescape(b)),d,c,a,g;if(!h||!h[1]){return}c=h[1];a=h[2];switch(c){case\"e\":return null;case\"n\":return parseFloat(a);case\"d\":return new Date(Date.parse(a));case\"b\":return(a==\"1\");case\"a\":d=[];if(a!=\"\"){Ext.each(a.split(\"^\"),function(i){d.push(this.decodeValue(i))},this)}return d;case\"o\":d={};if(a!=\"\"){Ext.each(a.split(\"^\"),function(i){g=i.split(\"=\");d[g[0]]=this.decodeValue(g[1])},this)}return d;default:return a}},encodeValue:function(c){var b,g=\"\",e=0,a,d;if(c==null){return\"e:1\"}else{if(typeof c==\"number\"){b=\"n:\"+c}else{if(typeof c==\"boolean\"){b=\"b:\"+(c?\"1\":\"0\")}else{if(Ext.isDate(c)){b=\"d:\"+c.toGMTString()}else{if(Ext.isArray(c)){for(a=c.length;e<a;e++){g+=this.encodeValue(c[e]);if(e!=a-1){g+=\"^\"}}b=\"a:\"+g}else{if(typeof c==\"object\"){for(d in c){if(typeof c[d]!=\"function\"&&c[d]!==undefined){g+=d+\"=\"+this.encodeValue(c[d])+\"^\"}}b=\"o:\"+g.substring(0,g.length-1)}else{b=\"s:\"+c}}}}}}return escape(b)}});Ext.state.Manager=function(){var a=new Ext.state.Provider();return{setProvider:function(b){a=b},get:function(c,b){return a.get(c,b)},set:function(b,c){a.set(b,c)},clear:function(b){a.clear(b)},getProvider:function(){return a}}}();Ext.state.CookieProvider=Ext.extend(Ext.state.Provider,{constructor:function(a){Ext.state.CookieProvider.superclass.constructor.call(this);this.path=\"/\";this.expires=new Date(new Date().getTime()+(1000*60*60*24*7));this.domain=null;this.secure=false;Ext.apply(this,a);this.state=this.readCookies()},set:function(a,b){if(typeof b==\"undefined\"||b===null){this.clear(a);return}this.setCookie(a,b);Ext.state.CookieProvider.superclass.set.call(this,a,b)},clear:function(a){this.clearCookie(a);Ext.state.CookieProvider.superclass.clear.call(this,a)},readCookies:function(){var d={},h=document.cookie+\";\",b=/\\s?(.*?)=(.*?);/g,g,a,e;while((g=b.exec(h))!=null){a=g[1];e=g[2];if(a&&a.substring(0,3)==\"ys-\"){d[a.substr(3)]=this.decodeValue(e)}}return d},setCookie:function(a,b){document.cookie=\"ys-\"+a+\"=\"+this.encodeValue(b)+((this.expires==null)?\"\":(\"; expires=\"+this.expires.toGMTString()))+((this.path==null)?\"\":(\"; path=\"+this.path))+((this.domain==null)?\"\":(\"; domain=\"+this.domain))+((this.secure==true)?\"; secure\":\"\")},clearCookie:function(a){document.cookie=\"ys-\"+a+\"=null; expires=Thu, 01-Jan-70 00:00:01 GMT\"+((this.path==null)?\"\":(\"; path=\"+this.path))+((this.domain==null)?\"\":(\"; domain=\"+this.domain))+((this.secure==true)?\"; secure\":\"\")}});Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:\"x-view-selected\",emptyText:\"\",deferEmptyText:true,trackOver:false,blockRefresh:false,last:false,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);if(Ext.isString(this.tpl)||Ext.isArray(this.tpl)){this.tpl=new Ext.XTemplate(this.tpl)}this.addEvents(\"beforeclick\",\"click\",\"mouseenter\",\"mouseleave\",\"containerclick\",\"dblclick\",\"contextmenu\",\"containercontextmenu\",\"selectionchange\",\"beforeselect\");this.store=Ext.StoreMgr.lookup(this.store);this.all=new Ext.CompositeElementLite();this.selected=new Ext.CompositeElementLite()},afterRender:function(){Ext.DataView.superclass.afterRender.call(this);this.mon(this.getTemplateTarget(),{click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this});if(this.overClass||this.trackOver){this.mon(this.getTemplateTarget(),{mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this})}if(this.store){this.bindStore(this.store,true)}},refresh:function(){this.clearSelections(false,true);var b=this.getTemplateTarget(),a=this.store.getRange();b.update(\"\");if(a.length<1){if(!this.deferEmptyText||this.hasSkippedEmptyText){b.update(this.emptyText)}this.all.clear()}else{this.tpl.overwrite(b,this.collectData(a,0));this.all.fill(Ext.query(this.itemSelector,b.dom));this.updateIndexes(0)}this.hasSkippedEmptyText=true},getTemplateTarget:function(){return this.el},prepareData:function(a){return a},collectData:function(b,e){var d=[],c=0,a=b.length;for(;c<a;c++){d[d.length]=this.prepareData(b[c].data,e+c,b[c])}return d},bufferRender:function(a,b){var c=document.createElement(\"div\");this.tpl.overwrite(c,this.collectData(a,b));return Ext.query(this.itemSelector,c)},onUpdate:function(g,a){var b=this.store.indexOf(a);if(b>-1){var e=this.isSelected(b),c=this.all.elements[b],d=this.bufferRender([a],b)[0];this.all.replaceElement(b,d,true);if(e){this.selected.replaceElement(c,d);this.all.item(b).addClass(this.selectedClass)}this.updateIndexes(b,b)}},onAdd:function(g,d,e){if(this.all.getCount()===0){this.refresh();return}var c=this.bufferRender(d,e),h,b=this.all.elements;if(e<this.all.getCount()){h=this.all.item(e).insertSibling(c,\"before\",true);b.splice.apply(b,[e,0].concat(c))}else{h=this.all.last().insertSibling(c,\"after\",true);b.push.apply(b,c)}this.updateIndexes(e)},onRemove:function(c,a,b){this.deselect(b);this.all.removeElement(b,true);this.updateIndexes(b);if(this.store.getCount()===0){this.refresh()}},refreshNode:function(a){this.onUpdate(this.store,this.store.getAt(a))},updateIndexes:function(d,c){var b=this.all.elements;d=d||0;c=c||((c===0)?0:(b.length-1));for(var a=d;a<=c;a++){b[a].viewIndex=a}},getStore:function(){return this.store},bindStore:function(a,b){if(!b&&this.store){if(a!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un(\"beforeload\",this.onBeforeLoad,this);this.store.un(\"datachanged\",this.onDataChanged,this);this.store.un(\"add\",this.onAdd,this);this.store.un(\"remove\",this.onRemove,this);this.store.un(\"update\",this.onUpdate,this);this.store.un(\"clear\",this.refresh,this)}if(!a){this.store=null}}if(a){a=Ext.StoreMgr.lookup(a);a.on({scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh})}this.store=a;if(a){this.refresh()}},onDataChanged:function(){if(this.blockRefresh!==true){this.refresh.apply(this,arguments)}},findItemFromChild:function(a){return Ext.fly(a).findParent(this.itemSelector,this.getTemplateTarget())},onClick:function(c){var b=c.getTarget(this.itemSelector,this.getTemplateTarget()),a;if(b){a=this.indexOf(b);if(this.onItemClick(b,a,c)!==false){this.fireEvent(\"click\",this,a,b,c)}}else{if(this.fireEvent(\"containerclick\",this,c)!==false){this.onContainerClick(c)}}},onContainerClick:function(a){this.clearSelections()},onContextMenu:function(b){var a=b.getTarget(this.itemSelector,this.getTemplateTarget());if(a){this.fireEvent(\"contextmenu\",this,this.indexOf(a),a,b)}else{this.fireEvent(\"containercontextmenu\",this,b)}},onDblClick:function(b){var a=b.getTarget(this.itemSelector,this.getTemplateTarget());if(a){this.fireEvent(\"dblclick\",this,this.indexOf(a),a,b)}},onMouseOver:function(b){var a=b.getTarget(this.itemSelector,this.getTemplateTarget());if(a&&a!==this.lastItem){this.lastItem=a;Ext.fly(a).addClass(this.overClass);this.fireEvent(\"mouseenter\",this,this.indexOf(a),a,b)}},onMouseOut:function(a){if(this.lastItem){if(!a.within(this.lastItem,true,true)){Ext.fly(this.lastItem).removeClass(this.overClass);this.fireEvent(\"mouseleave\",this,this.indexOf(this.lastItem),this.lastItem,a);delete this.lastItem}}},onItemClick:function(b,a,c){if(this.fireEvent(\"beforeclick\",this,a,b,c)===false){return false}if(this.multiSelect){this.doMultiSelection(b,a,c);c.preventDefault()}else{if(this.singleSelect){this.doSingleSelection(b,a,c);c.preventDefault()}}return true},doSingleSelection:function(b,a,c){if(c.ctrlKey&&this.isSelected(a)){this.deselect(a)}else{this.select(a,false)}},doMultiSelection:function(c,a,d){if(d.shiftKey&&this.last!==false){var b=this.last;this.selectRange(b,a,d.ctrlKey);this.last=b}else{if((d.ctrlKey||this.simpleSelect)&&this.isSelected(a)){this.deselect(a)}else{this.select(a,d.ctrlKey||d.shiftKey||this.simpleSelect)}}},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){var b=[],d=this.selected.elements,c=0,a=d.length;for(;c<a;c++){b.push(d[c].viewIndex)}return b},getSelectedRecords:function(){return this.getRecords(this.selected.elements)},getRecords:function(c){var b=[],d=0,a=c.length;for(;d<a;d++){b[b.length]=this.store.getAt(c[d].viewIndex)}return b},getRecord:function(a){return this.store.getAt(a.viewIndex)},clearSelections:function(a,b){if((this.multiSelect||this.singleSelect)&&this.selected.getCount()>0){if(!b){this.selected.removeClass(this.selectedClass)}this.selected.clear();this.last=false;if(!a){this.fireEvent(\"selectionchange\",this,this.selected.elements)}}},isSelected:function(a){return this.selected.contains(this.getNode(a))},deselect:function(a){if(this.isSelected(a)){a=this.getNode(a);this.selected.removeElement(a);if(this.last==a.viewIndex){this.last=false}Ext.fly(a).removeClass(this.selectedClass);this.fireEvent(\"selectionchange\",this,this.selected.elements)}},select:function(d,g,b){if(Ext.isArray(d)){if(!g){this.clearSelections(true)}for(var c=0,a=d.length;c<a;c++){this.select(d[c],true,true)}if(!b){this.fireEvent(\"selectionchange\",this,this.selected.elements)}}else{var e=this.getNode(d);if(!g){this.clearSelections(true)}if(e&&!this.isSelected(e)){if(this.fireEvent(\"beforeselect\",this,e,this.selected.elements)!==false){Ext.fly(e).addClass(this.selectedClass);this.selected.add(e);this.last=e.viewIndex;if(!b){this.fireEvent(\"selectionchange\",this,this.selected.elements)}}}}},selectRange:function(c,a,b){if(!b){this.clearSelections(true)}this.select(this.getNodes(c,a),true)},getNode:function(b){if(Ext.isString(b)){return document.getElementById(b)}else{if(Ext.isNumber(b)){return this.all.elements[b]}else{if(b instanceof Ext.data.Record){var a=this.store.indexOf(b);return this.all.elements[a]}}}return b},getNodes:function(e,a){var d=this.all.elements,b=[],c;e=e||0;a=!Ext.isDefined(a)?Math.max(d.length-1,0):a;if(e<=a){for(c=e;c<=a&&d[c];c++){b.push(d[c])}}else{for(c=e;c>=a&&d[c];c--){b.push(d[c])}}return b},indexOf:function(a){a=this.getNode(a);if(Ext.isNumber(a.viewIndex)){return a.viewIndex}return this.all.indexOf(a)},onBeforeLoad:function(){if(this.loadingText){this.clearSelections(false,true);this.getTemplateTarget().update('<div class=\"loading-indicator\">'+this.loadingText+\"</div>\");this.all.clear()}},onDestroy:function(){this.all.clear();this.selected.clear();Ext.DataView.superclass.onDestroy.call(this);this.bindStore(null)}});Ext.DataView.prototype.setStore=Ext.DataView.prototype.bindStore;Ext.reg(\"dataview\",Ext.DataView);Ext.list.ListView=Ext.extend(Ext.DataView,{itemSelector:\"dl\",selectedClass:\"x-list-selected\",overClass:\"x-list-over\",scrollOffset:undefined,columnResize:true,columnSort:true,maxColumnWidth:Ext.isIE?99:100,initComponent:function(){if(this.columnResize){this.colResizer=new Ext.list.ColumnResizer(this.colResizer);this.colResizer.init(this)}if(this.columnSort){this.colSorter=new Ext.list.Sorter(this.columnSort);this.colSorter.init(this)}if(!this.internalTpl){this.internalTpl=new Ext.XTemplate('<div class=\"x-list-header\"><div class=\"x-list-header-inner\">','<tpl for=\"columns\">','<div style=\"width:{[values.width*100]}%;text-align:{align};\"><em unselectable=\"on\" id=\"',this.id,'-xlhd-{#}\">',\"{header}\",\"</em></div>\",\"</tpl>\",'<div class=\"x-clear\"></div>',\"</div></div>\",'<div class=\"x-list-body\"><div class=\"x-list-body-inner\">',\"</div></div>\")}if(!this.tpl){this.tpl=new Ext.XTemplate('<tpl for=\"rows\">',\"<dl>\",'<tpl for=\"parent.columns\">','<dt style=\"width:{[values.width*100]}%;text-align:{align};\">','<em unselectable=\"on\"<tpl if=\"cls\"> class=\"{cls}</tpl>\">',\"{[values.tpl.apply(parent)]}\",\"</em></dt>\",\"</tpl>\",'<div class=\"x-clear\"></div>',\"</dl>\",\"</tpl>\")}var l=this.columns,h=0,k=0,m=l.length,b=[];for(var g=0;g<m;g++){var n=l[g];if(!n.isColumn){n.xtype=n.xtype?(/^lv/.test(n.xtype)?n.xtype:\"lv\"+n.xtype):\"lvcolumn\";n=Ext.create(n)}if(n.width){h+=n.width*100;if(h>this.maxColumnWidth){n.width-=(h-this.maxColumnWidth)/100}k++}b.push(n)}l=this.columns=b;if(k<m){var d=m-k;if(h<this.maxColumnWidth){var a=((this.maxColumnWidth-h)/d)/100;for(var e=0;e<m;e++){var n=l[e];if(!n.width){n.width=a}}}}Ext.list.ListView.superclass.initComponent.call(this)},onRender:function(){this.autoEl={cls:\"x-list-wrap\"};Ext.list.ListView.superclass.onRender.apply(this,arguments);this.internalTpl.overwrite(this.el,{columns:this.columns});this.innerBody=Ext.get(this.el.dom.childNodes[1].firstChild);this.innerHd=Ext.get(this.el.dom.firstChild.firstChild);if(this.hideHeaders){this.el.dom.firstChild.style.display=\"none\"}},getTemplateTarget:function(){return this.innerBody},collectData:function(){var a=Ext.list.ListView.superclass.collectData.apply(this,arguments);return{columns:this.columns,rows:a}},verifyInternalSize:function(){if(this.lastSize){this.onResize(this.lastSize.width,this.lastSize.height)}},onResize:function(c,e){var b=this.innerBody.dom,g=this.innerHd.dom,d=c-Ext.num(this.scrollOffset,Ext.getScrollBarWidth())+\"px\",a;if(!b){return}a=b.parentNode;if(Ext.isNumber(c)){if(this.reserveScrollOffset||((a.offsetWidth-a.clientWidth)>10)){b.style.width=d;g.style.width=d}else{b.style.width=c+\"px\";g.style.width=c+\"px\";setTimeout(function(){if((a.offsetWidth-a.clientWidth)>10){b.style.width=d;g.style.width=d}},10)}}if(Ext.isNumber(e)){a.style.height=Math.max(0,e-g.parentNode.offsetHeight)+\"px\"}},updateIndexes:function(){Ext.list.ListView.superclass.updateIndexes.apply(this,arguments);this.verifyInternalSize()},findHeaderIndex:function(g){g=g.dom||g;var a=g.parentNode,d=a.parentNode.childNodes,b=0,e;for(;e=d[b];b++){if(e==a){return b}}return -1},setHdWidths:function(){var d=this.innerHd.dom.getElementsByTagName(\"div\"),c=0,b=this.columns,a=b.length;for(;c<a;c++){d[c].style.width=(b[c].width*100)+\"%\"}}});Ext.reg(\"listview\",Ext.list.ListView);Ext.ListView=Ext.list.ListView;Ext.list.Column=Ext.extend(Object,{isColumn:true,align:\"left\",header:\"\",width:null,cls:\"\",constructor:function(a){if(!a.tpl){a.tpl=new Ext.XTemplate(\"{\"+a.dataIndex+\"}\")}else{if(Ext.isString(a.tpl)){a.tpl=new Ext.XTemplate(a.tpl)}}Ext.apply(this,a)}});Ext.reg(\"lvcolumn\",Ext.list.Column);Ext.list.NumberColumn=Ext.extend(Ext.list.Column,{format:\"0,000.00\",constructor:function(a){a.tpl=a.tpl||new Ext.XTemplate(\"{\"+a.dataIndex+':number(\"'+(a.format||this.format)+'\")}');Ext.list.NumberColumn.superclass.constructor.call(this,a)}});Ext.reg(\"lvnumbercolumn\",Ext.list.NumberColumn);Ext.list.DateColumn=Ext.extend(Ext.list.Column,{format:\"m/d/Y\",constructor:function(a){a.tpl=a.tpl||new Ext.XTemplate(\"{\"+a.dataIndex+':date(\"'+(a.format||this.format)+'\")}');Ext.list.DateColumn.superclass.constructor.call(this,a)}});Ext.reg(\"lvdatecolumn\",Ext.list.DateColumn);Ext.list.BooleanColumn=Ext.extend(Ext.list.Column,{trueText:\"true\",falseText:\"false\",undefinedText:\"&#160;\",constructor:function(e){e.tpl=e.tpl||new Ext.XTemplate(\"{\"+e.dataIndex+\":this.format}\");var b=this.trueText,d=this.falseText,a=this.undefinedText;e.tpl.format=function(c){if(c===undefined){return a}if(!c||c===\"false\"){return d}return b};Ext.list.DateColumn.superclass.constructor.call(this,e)}});Ext.reg(\"lvbooleancolumn\",Ext.list.BooleanColumn);Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:0.05,constructor:function(a){Ext.apply(this,a);Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(a){this.view=a;a.on(\"render\",this.initEvents,this)},initEvents:function(a){a.mon(a.innerHd,\"mousemove\",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(a.innerHd);a.on(\"beforedestroy\",this.tracker.destroy,this.tracker)},handleHdMove:function(i,d){var c=5,b=i.getPageX(),k=i.getTarget(\"em\",3,true);if(k){var h=k.getRegion(),g=k.dom.style,a=k.dom.parentNode;if(b-h.left<=c&&a!=a.parentNode.firstChild){this.activeHd=Ext.get(a.previousSibling.firstChild);g.cursor=Ext.isWebKit?\"e-resize\":\"col-resize\"}else{if(h.right-b<=c&&a!=a.parentNode.lastChild.previousSibling){this.activeHd=k;g.cursor=Ext.isWebKit?\"w-resize\":\"col-resize\"}else{delete this.activeHd;g.cursor=\"\"}}}},onBeforeStart:function(a){this.dragHd=this.activeHd;return !!this.dragHd},onStart:function(g){var d=this,b=d.view,c=d.dragHd,a=d.tracker.getXY()[0];d.proxy=b.el.createChild({cls:\"x-list-resizer\"});d.dragX=c.getX();d.headerIndex=b.findHeaderIndex(c);d.headersDisabled=b.disableHeaders;b.disableHeaders=true;d.proxy.setHeight(b.el.getHeight());d.proxy.setX(d.dragX);d.proxy.setWidth(a-d.dragX);this.setBoundaries()},setBoundaries:function(k){var l=this.view,h=this.headerIndex,c=l.innerHd.getWidth(),k=l.innerHd.getX(),b=Math.ceil(c*this.minPct),m=c-b,e=l.columns.length,d=l.innerHd.select(\"em\",true),g=b+k,a=m+k,i;if(e==2){this.minX=g;this.maxX=a}else{i=d.item(h+2);this.minX=d.item(h).getX()+b;this.maxX=i?i.getX()-b:a;if(h==0){this.minX=g}else{if(h==e-2){this.maxX=a}}}},onDrag:function(c){var b=this,a=b.tracker.getXY()[0].constrain(b.minX,b.maxX);b.proxy.setWidth(a-this.dragX)},onEnd:function(i){var g=this.proxy.getWidth(),h=this.headerIndex,m=this.view,c=m.columns,b=m.innerHd.getWidth(),l=Math.ceil(g*m.maxColumnWidth/b)/100,d=this.headersDisabled,n=c[h],k=c[h+1],a=n.width+k.width;this.proxy.remove();n.width=l;k.width=a-l;delete this.dragHd;m.setHdWidths();m.refresh();setTimeout(function(){m.disableHeaders=d},100)}});Ext.ListView.ColumnResizer=Ext.list.ColumnResizer;Ext.list.Sorter=Ext.extend(Ext.util.Observable,{sortClasses:[\"sort-asc\",\"sort-desc\"],constructor:function(a){Ext.apply(this,a);Ext.list.Sorter.superclass.constructor.call(this)},init:function(a){this.view=a;a.on(\"render\",this.initEvents,this)},initEvents:function(a){a.mon(a.innerHd,\"click\",this.onHdClick,this);a.innerHd.setStyle(\"cursor\",\"pointer\");a.mon(a.store,\"datachanged\",this.updateSortState,this);this.updateSortState.defer(10,this,[a.store])},updateSortState:function(c){var g=c.getSortState();if(!g){return}this.sortState=g;var e=this.view.columns,h=-1;for(var d=0,a=e.length;d<a;d++){if(e[d].dataIndex==g.field){h=d;break}}if(h!=-1){var b=g.direction;this.updateSortIcon(h,b)}},updateSortIcon:function(b,a){var d=this.sortClasses;var c=this.view.innerHd.select(\"em\").removeClass(d);c.item(b).addClass(d[a==\"DESC\"?1:0])},onHdClick:function(c){var b=c.getTarget(\"em\",3);if(b&&!this.view.disableHeaders){var a=this.view.findHeaderIndex(b);this.view.store.sort(this.view.columns[a].dataIndex)}}});Ext.ListView.Sorter=Ext.list.Sorter;Ext.TabPanel=Ext.extend(Ext.Panel,{deferredRender:true,tabWidth:120,minTabWidth:30,resizeTabs:false,enableTabScroll:false,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:0.35,animScroll:true,tabPosition:\"top\",baseCls:\"x-tab-panel\",autoTabs:false,autoTabSelector:\"div.x-tab\",activeTab:undefined,tabMargin:2,plain:false,wheelIncrement:20,idDelimiter:\"__\",itemCls:\"x-tab-item\",elements:\"body\",headerAsText:false,frame:false,hideBorders:true,initComponent:function(){this.frame=false;Ext.TabPanel.superclass.initComponent.call(this);this.addEvents(\"beforetabchange\",\"tabchange\",\"contextmenu\");this.setLayout(new Ext.layout.CardLayout(Ext.apply({layoutOnCardChange:this.layoutOnTabChange,deferredRender:this.deferredRender},this.layoutConfig)));if(this.tabPosition==\"top\"){this.elements+=\",header\";this.stripTarget=\"header\"}else{this.elements+=\",footer\";this.stripTarget=\"footer\"}if(!this.stack){this.stack=Ext.TabPanel.AccessStack()}this.initItems()},onRender:function(c,a){Ext.TabPanel.superclass.onRender.call(this,c,a);if(this.plain){var g=this.tabPosition==\"top\"?\"header\":\"footer\";this[g].addClass(\"x-tab-panel-\"+g+\"-plain\")}var b=this[this.stripTarget];this.stripWrap=b.createChild({cls:\"x-tab-strip-wrap\",cn:{tag:\"ul\",cls:\"x-tab-strip x-tab-strip-\"+this.tabPosition}});var e=(this.tabPosition==\"bottom\"?this.stripWrap:null);b.createChild({cls:\"x-tab-strip-spacer\"},e);this.strip=new Ext.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:\"li\",cls:\"x-tab-edge\",cn:[{tag:\"span\",cls:\"x-tab-strip-text\",cn:\"&#160;\"}]});this.strip.createChild({cls:\"x-clear\"});this.body.addClass(\"x-tab-panel-body-\"+this.tabPosition);if(!this.itemTpl){var d=new Ext.Template('<li class=\"{cls}\" id=\"{id}\"><a class=\"x-tab-strip-close\"></a>','<a class=\"x-tab-right\" href=\"#\"><em class=\"x-tab-left\">','<span class=\"x-tab-strip-inner\"><span class=\"x-tab-strip-text {iconCls}\">{text}</span></span>',\"</em></a></li>\");d.disableFormats=true;d.compile();Ext.TabPanel.prototype.itemTpl=d}this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this);if(this.autoTabs){this.readTabs(false)}if(this.activeTab!==undefined){var a=Ext.isObject(this.activeTab)?this.activeTab:this.items.get(this.activeTab);delete this.activeTab;this.setActiveTab(a)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this);this.mon(this.strip,{scope:this,mousedown:this.onStripMouseDown,contextmenu:this.onStripContextMenu});if(this.enableTabScroll){this.mon(this.strip,\"mousewheel\",this.onWheel,this)}},findTargets:function(c){var b=null,a=c.getTarget(\"li:not(.x-tab-edge)\",this.strip);if(a){b=this.getComponent(a.id.split(this.idDelimiter)[1]);if(b.disabled){return{close:null,item:null,el:null}}}return{close:c.getTarget(\".x-tab-strip-close\",this.strip),item:b,el:a}},onStripMouseDown:function(b){if(b.button!==0){return}b.preventDefault();var a=this.findTargets(b);if(a.close){if(a.item.fireEvent(\"beforeclose\",a.item)!==false){a.item.fireEvent(\"close\",a.item);this.remove(a.item)}return}if(a.item&&a.item!=this.activeTab){this.setActiveTab(a.item)}},onStripContextMenu:function(b){b.preventDefault();var a=this.findTargets(b);if(a.item){this.fireEvent(\"contextmenu\",this,a.item,b)}},readTabs:function(d){if(d===true){this.items.each(function(h){this.remove(h)},this)}var c=this.el.query(this.autoTabSelector);for(var b=0,a=c.length;b<a;b++){var e=c[b],g=e.getAttribute(\"title\");e.removeAttribute(\"title\");this.add({title:g,contentEl:e})}},initTab:function(d,b){var e=this.strip.dom.childNodes[b],g=this.getTemplateArgs(d),c=e?this.itemTpl.insertBefore(e,g):this.itemTpl.append(this.strip,g),a=\"x-tab-strip-over\",h=Ext.get(c);h.hover(function(){if(!d.disabled){h.addClass(a)}},function(){h.removeClass(a)});if(d.tabTip){h.child(\"span.x-tab-strip-text\",true).qtip=d.tabTip}d.tabEl=c;h.select(\"a\").on(\"click\",function(i){if(!i.getPageX()){this.onStripMouseDown(i)}},this,{preventDefault:true});d.on({scope:this,disable:this.onItemDisabled,enable:this.onItemEnabled,titlechange:this.onItemTitleChanged,iconchange:this.onItemIconChanged,beforeshow:this.onBeforeShowItem})},getTemplateArgs:function(b){var a=b.closable?\"x-tab-strip-closable\":\"\";if(b.disabled){a+=\" x-item-disabled\"}if(b.iconCls){a+=\" x-tab-with-icon\"}if(b.tabCls){a+=\" \"+b.tabCls}return{id:this.id+this.idDelimiter+b.getItemId(),text:b.title,cls:a,iconCls:b.iconCls||\"\"}},onAdd:function(b){Ext.TabPanel.superclass.onAdd.call(this,b);if(this.rendered){var a=this.items;this.initTab(b,a.indexOf(b));this.delegateUpdates()}},onBeforeAdd:function(b){var a=b.events?(this.items.containsKey(b.getItemId())?b:null):this.items.get(b);if(a){this.setActiveTab(b);return false}Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var c=b.elements;b.elements=c?c.replace(\",header\",\"\"):c;b.border=(b.border===true)},onRemove:function(d){var b=Ext.get(d.tabEl);if(b){b.select(\"a\").removeAllListeners();Ext.destroy(b)}Ext.TabPanel.superclass.onRemove.call(this,d);this.stack.remove(d);delete d.tabEl;d.un(\"disable\",this.onItemDisabled,this);d.un(\"enable\",this.onItemEnabled,this);d.un(\"titlechange\",this.onItemTitleChanged,this);d.un(\"iconchange\",this.onItemIconChanged,this);d.un(\"beforeshow\",this.onBeforeShowItem,this);if(d==this.activeTab){var a=this.stack.next();if(a){this.setActiveTab(a)}else{if(this.items.getCount()>0){this.setActiveTab(0)}else{this.setActiveTab(null)}}}if(!this.destroying){this.delegateUpdates()}},onBeforeShowItem:function(a){if(a!=this.activeTab){this.setActiveTab(a);return false}},onItemDisabled:function(b){var a=this.getTabEl(b);if(a){Ext.fly(a).addClass(\"x-item-disabled\")}this.stack.remove(b)},onItemEnabled:function(b){var a=this.getTabEl(b);if(a){Ext.fly(a).removeClass(\"x-item-disabled\")}},onItemTitleChanged:function(b){var a=this.getTabEl(b);if(a){Ext.fly(a).child(\"span.x-tab-strip-text\",true).innerHTML=b.title}},onItemIconChanged:function(d,a,c){var b=this.getTabEl(d);if(b){b=Ext.get(b);b.child(\"span.x-tab-strip-text\").replaceClass(c,a);b[Ext.isEmpty(a)?\"removeClass\":\"addClass\"](\"x-tab-with-icon\")}},getTabEl:function(a){var b=this.getComponent(a);return b?b.tabEl:null},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments);this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=true},endUpdate:function(){this.suspendUpdates=false;this.delegateUpdates()},hideTabStripItem:function(b){b=this.getComponent(b);var a=this.getTabEl(b);if(a){a.style.display=\"none\";this.delegateUpdates()}this.stack.remove(b)},unhideTabStripItem:function(b){b=this.getComponent(b);var a=this.getTabEl(b);if(a){a.style.display=\"\";this.delegateUpdates()}},delegateUpdates:function(){var a=this.rendered;if(this.suspendUpdates){return}if(this.resizeTabs&&a){this.autoSizeTabs()}if(this.enableTabScroll&&a){this.autoScrollTabs()}},autoSizeTabs:function(){var h=this.items.length,b=this.tabPosition!=\"bottom\"?\"header\":\"footer\",c=this[b].dom.offsetWidth,a=this[b].dom.clientWidth;if(!this.resizeTabs||h<1||!a){return}var l=Math.max(Math.min(Math.floor((a-4)/h)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=l;var n=this.strip.query(\"li:not(.x-tab-edge)\");for(var e=0,k=n.length;e<k;e++){var m=n[e],o=Ext.fly(m).child(\".x-tab-strip-inner\",true),g=m.offsetWidth,d=o.offsetWidth;o.style.width=(l-(g-d))+\"px\"}},adjustBodyWidth:function(a){if(this.header){this.header.setWidth(a)}if(this.footer){this.footer.setWidth(a)}return a},setActiveTab:function(c){c=this.getComponent(c);if(this.fireEvent(\"beforetabchange\",this,c,this.activeTab)===false){return}if(!this.rendered){this.activeTab=c;return}if(this.activeTab!=c){if(this.activeTab){var a=this.getTabEl(this.activeTab);if(a){Ext.fly(a).removeClass(\"x-tab-strip-active\")}}this.activeTab=c;if(c){var b=this.getTabEl(c);Ext.fly(b).addClass(\"x-tab-strip-active\");this.stack.add(c);this.layout.setActiveItem(c);this.delegateUpdates();if(this.scrolling){this.scrollToTab(c,this.animScroll)}}this.fireEvent(\"tabchange\",this,c)}},getActiveTab:function(){return this.activeTab||null},getItem:function(a){return this.getComponent(a)},autoScrollTabs:function(){this.pos=this.tabPosition==\"bottom\"?this.footer:this.header;var h=this.items.length,d=this.pos.dom.offsetWidth,c=this.pos.dom.clientWidth,g=this.stripWrap,e=g.dom,b=e.offsetWidth,i=this.getScrollPos(),a=this.edge.getOffsetsTo(this.stripWrap)[0]+i;if(!this.enableTabScroll||b<20){return}if(h==0||a<=c){e.scrollLeft=0;g.setWidth(c);if(this.scrolling){this.scrolling=false;this.pos.removeClass(\"x-tab-scrolling\");this.scrollLeft.hide();this.scrollRight.hide();if(Ext.isAir||Ext.isWebKit){e.style.marginLeft=\"\";e.style.marginRight=\"\"}}}else{if(!this.scrolling){this.pos.addClass(\"x-tab-scrolling\");if(Ext.isAir||Ext.isWebKit){e.style.marginLeft=\"18px\";e.style.marginRight=\"18px\"}}c-=g.getMargins(\"lr\");g.setWidth(c>20?c:20);if(!this.scrolling){if(!this.scrollLeft){this.createScrollers()}else{this.scrollLeft.show();this.scrollRight.show()}}this.scrolling=true;if(i>(a-c)){e.scrollLeft=a-c}else{this.scrollToTab(this.activeTab,false)}this.updateScrollButtons()}},createScrollers:function(){this.pos.addClass(\"x-tab-scrolling-\"+this.tabPosition);var c=this.stripWrap.dom.offsetHeight;var a=this.pos.insertFirst({cls:\"x-tab-scroller-left\"});a.setHeight(c);a.addClassOnOver(\"x-tab-scroller-left-over\");this.leftRepeater=new Ext.util.ClickRepeater(a,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this});this.scrollLeft=a;var b=this.pos.insertFirst({cls:\"x-tab-scroller-right\"});b.setHeight(c);b.addClassOnOver(\"x-tab-scroller-right-over\");this.rightRepeater=new Ext.util.ClickRepeater(b,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this});this.scrollRight=b},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(e,a){if(!e){return}var c=this.getTabEl(e),h=this.getScrollPos(),d=this.getScrollArea(),g=Ext.fly(c).getOffsetsTo(this.stripWrap)[0]+h,b=g+c.offsetWidth;if(g<h){this.scrollTo(g,a)}else{if(b>(h+d)){this.scrollTo(b-d,a)}}},scrollTo:function(b,a){this.stripWrap.scrollTo(\"left\",b,a?this.getScrollAnim():false);if(!a){this.updateScrollButtons()}},onWheel:function(g){var h=g.getWheelDelta()*this.wheelIncrement*-1;g.stopEvent();var i=this.getScrollPos(),c=i+h,a=this.getScrollWidth()-this.getScrollArea();var b=Math.max(0,Math.min(a,c));if(b!=i){this.scrollTo(b,false)}},onScrollRight:function(){var a=this.getScrollWidth()-this.getScrollArea(),c=this.getScrollPos(),b=Math.min(a,c+this.getScrollIncrement());if(b!=c){this.scrollTo(b,this.animScroll)}},onScrollLeft:function(){var b=this.getScrollPos(),a=Math.max(0,b-this.getScrollIncrement());if(a!=b){this.scrollTo(a,this.animScroll)}},updateScrollButtons:function(){var a=this.getScrollPos();this.scrollLeft[a===0?\"addClass\":\"removeClass\"](\"x-tab-scroller-left-disabled\");this.scrollRight[a>=(this.getScrollWidth()-this.getScrollArea())?\"addClass\":\"removeClass\"](\"x-tab-scroller-right-disabled\")},beforeDestroy:function(){Ext.destroy(this.leftRepeater,this.rightRepeater);this.deleteMembers(\"strip\",\"edge\",\"scrollLeft\",\"scrollRight\",\"stripWrap\");this.activeTab=null;Ext.TabPanel.superclass.beforeDestroy.apply(this)}});Ext.reg(\"tabpanel\",Ext.TabPanel);Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab;Ext.TabPanel.AccessStack=function(){var a=[];return{add:function(b){a.push(b);if(a.length>10){a.shift()}},remove:function(e){var d=[];for(var c=0,b=a.length;c<b;c++){if(a[c]!=e){d.push(a[c])}}a=d},next:function(){return a.pop()}}};Ext.Button=Ext.extend(Ext.BoxComponent,{hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:\"tl-bl?\",type:\"button\",menuClassTarget:\"tr:nth(2)\",clickEvent:\"click\",handleMouseEvents:true,tooltipType:\"qtip\",buttonSelector:\"button:first-child\",scale:\"small\",iconAlign:\"left\",arrowAlign:\"right\",initComponent:function(){if(this.menu){this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=this}Ext.Button.superclass.initComponent.call(this);this.addEvents(\"click\",\"toggle\",\"mouseover\",\"mouseout\",\"menushow\",\"menuhide\",\"menutriggerover\",\"menutriggerout\");if(this.menu){this.menu.ownerCt=undefined}if(Ext.isString(this.toggleGroup)){this.enableToggle=true}},getTemplateArgs:function(){return[this.type,\"x-btn-\"+this.scale+\" x-btn-icon-\"+this.scale+\"-\"+this.iconAlign,this.getMenuClass(),this.cls,this.id]},setButtonClass:function(){if(this.useSetClass){if(!Ext.isEmpty(this.oldCls)){this.el.removeClass([this.oldCls,\"x-btn-pressed\"])}this.oldCls=(this.iconCls||this.icon)?(this.text?\"x-btn-text-icon\":\"x-btn-icon\"):\"x-btn-noicon\";this.el.addClass([this.oldCls,this.pressed?\"x-btn-pressed\":null])}},getMenuClass:function(){return this.menu?(this.arrowAlign!=\"bottom\"?\"x-btn-arrow\":\"x-btn-arrow-bottom\"):\"\"},onRender:function(c,a){if(!this.template){if(!Ext.Button.buttonTemplate){Ext.Button.buttonTemplate=new Ext.Template('<table id=\"{4}\" cellspacing=\"0\" class=\"x-btn {3}\"><tbody class=\"{1}\">','<tr><td class=\"x-btn-tl\"><i>&#160;</i></td><td class=\"x-btn-tc\"></td><td class=\"x-btn-tr\"><i>&#160;</i></td></tr>','<tr><td class=\"x-btn-ml\"><i>&#160;</i></td><td class=\"x-btn-mc\"><em class=\"{2}\" unselectable=\"on\"><button type=\"{0}\"></button></em></td><td class=\"x-btn-mr\"><i>&#160;</i></td></tr>','<tr><td class=\"x-btn-bl\"><i>&#160;</i></td><td class=\"x-btn-bc\"></td><td class=\"x-btn-br\"><i>&#160;</i></td></tr>',\"</tbody></table>\");Ext.Button.buttonTemplate.compile()}this.template=Ext.Button.buttonTemplate}var b,d=this.getTemplateArgs();if(a){b=this.template.insertBefore(a,d,true)}else{b=this.template.append(c,d,true)}this.btnEl=b.child(this.buttonSelector);this.mon(this.btnEl,{scope:this,focus:this.onFocus,blur:this.onBlur});this.initButtonEl(b,this.btnEl);Ext.ButtonToggleMgr.register(this)},initButtonEl:function(b,c){this.el=b;this.setIcon(this.icon);this.setText(this.text);this.setIconClass(this.iconCls);if(Ext.isDefined(this.tabIndex)){c.dom.tabIndex=this.tabIndex}if(this.tooltip){this.setTooltip(this.tooltip,true)}if(this.handleMouseEvents){this.mon(b,{scope:this,mouseover:this.onMouseOver,mousedown:this.onMouseDown})}if(this.menu){this.mon(this.menu,{scope:this,show:this.onMenuShow,hide:this.onMenuHide})}if(this.repeat){var a=new Ext.util.ClickRepeater(b,Ext.isObject(this.repeat)?this.repeat:{});this.mon(a,\"click\",this.onRepeatClick,this)}else{this.mon(b,this.clickEvent,this.onClick,this)}},afterRender:function(){Ext.Button.superclass.afterRender.call(this);this.useSetClass=true;this.setButtonClass();this.doc=Ext.getDoc();this.doAutoWidth()},setIconClass:function(a){this.iconCls=a;if(this.el){this.btnEl.dom.className=\"\";this.btnEl.addClass([\"x-btn-text\",a||\"\"]);this.setButtonClass()}return this},setTooltip:function(b,a){if(this.rendered){if(!a){this.clearTip()}if(Ext.isObject(b)){Ext.QuickTips.register(Ext.apply({target:this.btnEl.id},b));this.tooltip=b}else{this.btnEl.dom[this.tooltipType]=b}}else{this.tooltip=b}return this},clearTip:function(){if(Ext.isObject(this.tooltip)){Ext.QuickTips.unregister(this.btnEl)}},beforeDestroy:function(){if(this.rendered){this.clearTip()}if(this.menu&&this.destroyMenu!==false){Ext.destroy(this.btnEl,this.menu)}Ext.destroy(this.repeater)},onDestroy:function(){if(this.rendered){this.doc.un(\"mouseover\",this.monitorMouseOver,this);this.doc.un(\"mouseup\",this.onMouseUp,this);delete this.doc;delete this.btnEl;Ext.ButtonToggleMgr.unregister(this)}Ext.Button.superclass.onDestroy.call(this)},doAutoWidth:function(){if(this.autoWidth!==false&&this.el&&this.text&&this.width===undefined){this.el.setWidth(\"auto\");if(Ext.isIE7&&Ext.isStrict){var a=this.btnEl;if(a&&a.getWidth()>20){a.clip();a.setWidth(Ext.util.TextMetrics.measure(a,this.text).width+a.getFrameWidth(\"lr\"))}}if(this.minWidth){if(this.el.getWidth()<this.minWidth){this.el.setWidth(this.minWidth)}}}},setHandler:function(b,a){this.handler=b;this.scope=a;return this},setText:function(a){this.text=a;if(this.el){this.btnEl.update(a||\"&#160;\");this.setButtonClass()}this.doAutoWidth();return this},setIcon:function(a){this.icon=a;if(this.el){this.btnEl.setStyle(\"background-image\",a?\"url(\"+a+\")\":\"\");this.setButtonClass()}return this},getText:function(){return this.text},toggle:function(b,a){b=b===undefined?!this.pressed:!!b;if(b!=this.pressed){if(this.rendered){this.el[b?\"addClass\":\"removeClass\"](\"x-btn-pressed\")}this.pressed=b;if(!a){this.fireEvent(\"toggle\",this,b);if(this.toggleHandler){this.toggleHandler.call(this.scope||this,this,b)}}}return this},onDisable:function(){this.onDisableChange(true)},onEnable:function(){this.onDisableChange(false)},onDisableChange:function(a){if(this.el){if(!Ext.isIE6||!this.text){this.el[a?\"addClass\":\"removeClass\"](this.disabledClass)}this.el.dom.disabled=a}this.disabled=a},showMenu:function(){if(this.rendered&&this.menu){if(this.tooltip){Ext.QuickTips.getQuickTip().cancelShow(this.btnEl)}if(this.menu.isVisible()){this.menu.hide()}this.menu.ownerCt=this;this.menu.show(this.el,this.menuAlign)}return this},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){return this.menu&&this.menu.ownerCt==this&&this.menu.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onClick:function(a){if(a){a.preventDefault()}if(a.button!==0){return}if(!this.disabled){this.doToggle();if(this.menu&&!this.hasVisibleMenu()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent(\"click\",this,a);if(this.handler){this.handler.call(this.scope||this,this,a)}}},doToggle:function(){if(this.enableToggle&&(this.allowDepress!==false||!this.pressed)){this.toggle()}},isMenuTriggerOver:function(b,a){return this.menu&&!a},isMenuTriggerOut:function(b,a){return this.menu&&!a},onMouseOver:function(b){if(!this.disabled){var a=b.within(this.el,true);if(!a){this.el.addClass(\"x-btn-over\");if(!this.monitoringMouseOver){this.doc.on(\"mouseover\",this.monitorMouseOver,this);this.monitoringMouseOver=true}this.fireEvent(\"mouseover\",this,b)}if(this.isMenuTriggerOver(b,a)){this.fireEvent(\"menutriggerover\",this,this.menu,b)}}},monitorMouseOver:function(a){if(a.target!=this.el.dom&&!a.within(this.el)){if(this.monitoringMouseOver){this.doc.un(\"mouseover\",this.monitorMouseOver,this);this.monitoringMouseOver=false}this.onMouseOut(a)}},onMouseOut:function(b){var a=b.within(this.el)&&b.target!=this.el.dom;this.el.removeClass(\"x-btn-over\");this.fireEvent(\"mouseout\",this,b);if(this.isMenuTriggerOut(b,a)){this.fireEvent(\"menutriggerout\",this,this.menu,b)}},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(a){if(!this.disabled){this.el.addClass(\"x-btn-focus\")}},onBlur:function(a){this.el.removeClass(\"x-btn-focus\")},getClickEl:function(b,a){return this.el},onMouseDown:function(a){if(!this.disabled&&a.button===0){this.getClickEl(a).addClass(\"x-btn-click\");this.doc.on(\"mouseup\",this.onMouseUp,this)}},onMouseUp:function(a){if(a.button===0){this.getClickEl(a,true).removeClass(\"x-btn-click\");this.doc.un(\"mouseup\",this.onMouseUp,this)}},onMenuShow:function(a){if(this.menu.ownerCt==this){this.menu.ownerCt=this;this.ignoreNextClick=0;this.el.addClass(\"x-btn-menu-active\");this.fireEvent(\"menushow\",this,this.menu)}},onMenuHide:function(a){if(this.menu.ownerCt==this){this.el.removeClass(\"x-btn-menu-active\");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent(\"menuhide\",this,this.menu);delete this.menu.ownerCt}},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg(\"button\",Ext.Button);Ext.ButtonToggleMgr=function(){var a={};function b(e,k){if(k){var h=a[e.toggleGroup];for(var d=0,c=h.length;d<c;d++){if(h[d]!=e){h[d].toggle(false)}}}}return{register:function(c){if(!c.toggleGroup){return}var d=a[c.toggleGroup];if(!d){d=a[c.toggleGroup]=[]}d.push(c);c.on(\"toggle\",b)},unregister:function(c){if(!c.toggleGroup){return}var d=a[c.toggleGroup];if(d){d.remove(c);c.un(\"toggle\",b)}},getPressed:function(h){var e=a[h];if(e){for(var d=0,c=e.length;d<c;d++){if(e[d].pressed===true){return e[d]}}}return null}}}();Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:\"em\",split:true,initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this);this.addEvents(\"arrowclick\")},onRender:function(){Ext.SplitButton.superclass.onRender.apply(this,arguments);if(this.arrowTooltip){this.el.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip}},setArrowHandler:function(b,a){this.arrowHandler=b;this.scope=a},getMenuClass:function(){return\"x-btn-split\"+(this.arrowAlign==\"bottom\"?\"-bottom\":\"\")},isClickOnArrow:function(c){if(this.arrowAlign!=\"bottom\"){var b=this.el.child(\"em.x-btn-split\");var a=b.getRegion().right-b.getPadding(\"r\");return c.getPageX()>a}else{return c.getPageY()>this.btnEl.getRegion().bottom}},onClick:function(b,a){b.preventDefault();if(!this.disabled){if(this.isClickOnArrow(b)){if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent(\"arrowclick\",this,b);if(this.arrowHandler){this.arrowHandler.call(this.scope||this,this,b)}}else{this.doToggle();this.fireEvent(\"click\",this,b);if(this.handler){this.handler.call(this.scope||this,this,b)}}}},isMenuTriggerOver:function(a){return this.menu&&a.target.tagName==this.arrowSelector},isMenuTriggerOut:function(b,a){return this.menu&&b.target.tagName!=this.arrowSelector}});Ext.reg(\"splitbutton\",Ext.SplitButton);Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(a){if(a&&this.showText===true){var b=\"\";if(this.prependText){b+=this.prependText}b+=a.text;return b}return undefined},setActiveItem:function(c,a){if(!Ext.isObject(c)){c=this.menu.getComponent(c)}if(c){if(!this.rendered){this.text=this.getItemText(c);this.iconCls=c.iconCls}else{var b=this.getItemText(c);if(b){this.setText(b)}this.setIconClass(c.iconCls)}this.activeItem=c;if(!c.checked){c.setChecked(true,false)}if(this.forceIcon){this.setIconClass(this.forceIcon)}if(!a){this.fireEvent(\"change\",this,c)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents(\"change\");if(this.changeHandler){this.on(\"change\",this.changeHandler,this.scope||this);delete this.changeHandler}this.itemCount=this.items.length;this.menu={cls:\"x-cycle-menu\",items:[]};var a=0;Ext.each(this.items,function(c,b){Ext.apply(c,{group:c.group||this.id,itemIndex:b,checkHandler:this.checkHandler,scope:this,checked:c.checked||false});this.menu.items.push(c);if(c.checked){a=b}},this);Ext.CycleButton.superclass.initComponent.call(this);this.on(\"click\",this.toggleSelected,this);this.setActiveItem(a,true)},checkHandler:function(a,b){if(b){this.setActiveItem(a)}},toggleSelected:function(){var a=this.menu;a.render();if(!a.hasLayout){a.doLayout()}var d,b;for(var c=1;c<this.itemCount;c++){d=(this.activeItem.itemIndex+c)%this.itemCount;b=a.items.itemAt(d);if(!b.disabled){b.setChecked(true);break}}}});Ext.reg(\"cycle\",Ext.CycleButton);Ext.Toolbar=function(a){if(Ext.isArray(a)){a={items:a,layout:\"toolbar\"}}else{a=Ext.apply({layout:\"toolbar\"},a);if(a.buttons){a.items=a.buttons}}Ext.Toolbar.superclass.constructor.call(this,a)};(function(){var a=Ext.Toolbar;Ext.extend(a,Ext.Container,{defaultType:\"button\",enableOverflow:false,trackMenus:true,internalDefaults:{removeMode:\"container\",hideParent:true},toolbarCls:\"x-toolbar\",initComponent:function(){a.superclass.initComponent.call(this);this.addEvents(\"overflowchange\")},onRender:function(c,b){if(!this.el){if(!this.autoCreate){this.autoCreate={cls:this.toolbarCls+\" x-small-editor\"}}this.el=c.createChild(Ext.apply({id:this.id},this.autoCreate),b);Ext.Toolbar.superclass.onRender.apply(this,arguments)}},lookupComponent:function(b){if(Ext.isString(b)){if(b==\"-\"){b=new a.Separator()}else{if(b==\" \"){b=new a.Spacer()}else{if(b==\"->\"){b=new a.Fill()}else{b=new a.TextItem(b)}}}this.applyDefaults(b)}else{if(b.isFormField||b.render){b=this.createComponent(b)}else{if(b.tag){b=new a.Item({autoEl:b})}else{if(b.tagName){b=new a.Item({el:b})}else{if(Ext.isObject(b)){b=b.xtype?this.createComponent(b):this.constructButton(b)}}}}}return b},applyDefaults:function(e){if(!Ext.isString(e)){e=Ext.Toolbar.superclass.applyDefaults.call(this,e);var b=this.internalDefaults;if(e.events){Ext.applyIf(e.initialConfig,b);Ext.apply(e,b)}else{Ext.applyIf(e,b)}}return e},addSeparator:function(){return this.add(new a.Separator())},addSpacer:function(){return this.add(new a.Spacer())},addFill:function(){this.add(new a.Fill())},addElement:function(b){return this.addItem(new a.Item({el:b}))},addItem:function(b){return this.add.apply(this,arguments)},addButton:function(c){if(Ext.isArray(c)){var e=[];for(var d=0,b=c.length;d<b;d++){e.push(this.addButton(c[d]))}return e}return this.add(this.constructButton(c))},addText:function(b){return this.addItem(new a.TextItem(b))},addDom:function(b){return this.add(new a.Item({autoEl:b}))},addField:function(b){return this.add(b)},insertButton:function(c,g){if(Ext.isArray(g)){var e=[];for(var d=0,b=g.length;d<b;d++){e.push(this.insertButton(c+d,g[d]))}return e}return Ext.Toolbar.superclass.insert.call(this,c,g)},trackMenu:function(c,b){if(this.trackMenus&&c.menu){var d=b?\"mun\":\"mon\";this[d](c,\"menutriggerover\",this.onButtonTriggerOver,this);this[d](c,\"menushow\",this.onButtonMenuShow,this);this[d](c,\"menuhide\",this.onButtonMenuHide,this)}},constructButton:function(d){var c=d.events?d:this.createComponent(d,d.split?\"splitbutton\":this.defaultType);return c},onAdd:function(b){Ext.Toolbar.superclass.onAdd.call(this);this.trackMenu(b);if(this.disabled){b.disable()}},onRemove:function(b){Ext.Toolbar.superclass.onRemove.call(this);if(b==this.activeMenuBtn){delete this.activeMenuBtn}this.trackMenu(b,true)},onDisable:function(){this.items.each(function(b){if(b.disable){b.disable()}})},onEnable:function(){this.items.each(function(b){if(b.enable){b.enable()}})},onButtonTriggerOver:function(b){if(this.activeMenuBtn&&this.activeMenuBtn!=b){this.activeMenuBtn.hideMenu();b.showMenu();this.activeMenuBtn=b}},onButtonMenuShow:function(b){this.activeMenuBtn=b},onButtonMenuHide:function(b){delete this.activeMenuBtn}});Ext.reg(\"toolbar\",Ext.Toolbar);a.Item=Ext.extend(Ext.BoxComponent,{hideParent:true,enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg(\"tbitem\",a.Item);a.Separator=Ext.extend(a.Item,{onRender:function(c,b){this.el=c.createChild({tag:\"span\",cls:\"xtb-sep\"},b)}});Ext.reg(\"tbseparator\",a.Separator);a.Spacer=Ext.extend(a.Item,{onRender:function(c,b){this.el=c.createChild({tag:\"div\",cls:\"xtb-spacer\",style:this.width?\"width:\"+this.width+\"px\":\"\"},b)}});Ext.reg(\"tbspacer\",a.Spacer);a.Fill=Ext.extend(a.Item,{render:Ext.emptyFn,isFill:true});Ext.reg(\"tbfill\",a.Fill);a.TextItem=Ext.extend(a.Item,{constructor:function(b){a.TextItem.superclass.constructor.call(this,Ext.isString(b)?{text:b}:b)},onRender:function(c,b){this.autoEl={cls:\"xtb-text\",html:this.text||\"\"};a.TextItem.superclass.onRender.call(this,c,b)},setText:function(b){if(this.rendered){this.el.update(b)}else{this.text=b}}});Ext.reg(\"tbtext\",a.TextItem);a.Button=Ext.extend(Ext.Button,{});a.SplitButton=Ext.extend(Ext.SplitButton,{});Ext.reg(\"tbbutton\",a.Button);Ext.reg(\"tbsplit\",a.SplitButton)})();Ext.ButtonGroup=Ext.extend(Ext.Panel,{baseCls:\"x-btn-group\",layout:\"table\",defaultType:\"button\",frame:true,internalDefaults:{removeMode:\"container\",hideParent:true},initComponent:function(){this.layoutConfig=this.layoutConfig||{};Ext.applyIf(this.layoutConfig,{columns:this.columns});if(!this.title){this.addClass(\"x-btn-group-notitle\")}this.on(\"afterlayout\",this.onAfterLayout,this);Ext.ButtonGroup.superclass.initComponent.call(this)},applyDefaults:function(b){b=Ext.ButtonGroup.superclass.applyDefaults.call(this,b);var a=this.internalDefaults;if(b.events){Ext.applyIf(b.initialConfig,a);Ext.apply(b,a)}else{Ext.applyIf(b,a)}return b},onAfterLayout:function(){var a=this.body.getFrameWidth(\"lr\")+this.body.dom.firstChild.offsetWidth;this.body.setWidth(a);this.el.setWidth(a+this.getFrameWidth())}});Ext.reg(\"buttongroup\",Ext.ButtonGroup);(function(){var a=Ext.Toolbar;Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:\"Displaying {0} - {1} of {2}\",emptyMsg:\"No data to display\",beforePageText:\"Page\",afterPageText:\"of {0}\",firstText:\"First Page\",prevText:\"Previous Page\",nextText:\"Next Page\",lastText:\"Last Page\",refreshText:\"Refresh\",initComponent:function(){var c=[this.first=new a.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:\"x-tbar-page-first\",disabled:true,handler:this.moveFirst,scope:this}),this.prev=new a.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:\"x-tbar-page-prev\",disabled:true,handler:this.movePrevious,scope:this}),\"-\",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:\"x-tbar-page-number\",allowDecimals:false,allowNegative:false,enableKeyEvents:true,selectOnFocus:true,submitValue:false,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new a.TextItem({text:String.format(this.afterPageText,1)}),\"-\",this.next=new a.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:\"x-tbar-page-next\",disabled:true,handler:this.moveNext,scope:this}),this.last=new a.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:\"x-tbar-page-last\",disabled:true,handler:this.moveLast,scope:this}),\"-\",this.refresh=new a.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:\"x-tbar-loading\",handler:this.doRefresh,scope:this})];var b=this.items||this.buttons||[];if(this.prependButtons){this.items=b.concat(c)}else{this.items=c.concat(b)}delete this.buttons;if(this.displayInfo){this.items.push(\"->\");this.items.push(this.displayItem=new a.TextItem({}))}Ext.PagingToolbar.superclass.initComponent.call(this);this.addEvents(\"change\",\"beforechange\");this.on(\"afterlayout\",this.onFirstLayout,this,{single:true});this.cursor=0;this.bindStore(this.store,true)},onFirstLayout:function(){if(this.dsLoaded){this.onLoad.apply(this,this.dsLoaded)}},updateInfo:function(){if(this.displayItem){var b=this.store.getCount();var c=b==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+b,this.store.getTotalCount());this.displayItem.setText(c)}},onLoad:function(b,e,k){if(!this.rendered){this.dsLoaded=[b,e,k];return}var g=this.getParams();this.cursor=(k.params&&k.params[g.start])?k.params[g.start]:0;var i=this.getPageData(),c=i.activePage,h=i.pages;this.afterTextItem.setText(String.format(this.afterPageText,i.pages));this.inputItem.setValue(c);this.first.setDisabled(c==1);this.prev.setDisabled(c==1);this.next.setDisabled(c==h);this.last.setDisabled(c==h);this.refresh.enable();this.updateInfo();this.fireEvent(\"change\",this,i)},getPageData:function(){var b=this.store.getTotalCount();return{total:b,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:b<this.pageSize?1:Math.ceil(b/this.pageSize)}},changePage:function(b){this.doLoad(((b-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onLoadError:function(){if(!this.rendered){return}this.refresh.enable()},readPage:function(e){var b=this.inputItem.getValue(),c;if(!b||isNaN(c=parseInt(b,10))){this.inputItem.setValue(e.activePage);return false}return c},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(b){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(i,h){var c=h.getKey(),l=this.getPageData(),g;if(c==h.RETURN){h.stopEvent();g=this.readPage(l);if(g!==false){g=Math.min(Math.max(1,g),l.pages)-1;this.doLoad(g*this.pageSize)}}else{if(c==h.HOME||c==h.END){h.stopEvent();g=c==h.HOME?1:l.pages;i.setValue(g)}else{if(c==h.UP||c==h.PAGEUP||c==h.DOWN||c==h.PAGEDOWN){h.stopEvent();if((g=this.readPage(l))){var b=h.shiftKey?10:1;if(c==h.DOWN||c==h.PAGEDOWN){b*=-1}g+=b;if(g>=1&g<=l.pages){i.setValue(g)}}}}}},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){if(this.rendered&&this.refresh){this.refresh.disable()}},doLoad:function(d){var c={},b=this.getParams();c[b.start]=d;c[b.limit]=this.pageSize;if(this.fireEvent(\"beforechange\",this,c)!==false){this.store.load({params:c})}},moveFirst:function(){this.doLoad(0)},movePrevious:function(){this.doLoad(Math.max(0,this.cursor-this.pageSize))},moveNext:function(){this.doLoad(this.cursor+this.pageSize)},moveLast:function(){var c=this.store.getTotalCount(),b=c%this.pageSize;this.doLoad(b?(c-b):c-this.pageSize)},doRefresh:function(){this.doLoad(this.cursor)},bindStore:function(c,d){var b;if(!d&&this.store){if(c!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un(\"beforeload\",this.beforeLoad,this);this.store.un(\"load\",this.onLoad,this);this.store.un(\"exception\",this.onLoadError,this)}if(!c){this.store=null}}if(c){c=Ext.StoreMgr.lookup(c);c.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError});b=true}this.store=c;if(b){this.onLoad(c,null,{})}},unbind:function(b){this.bindStore(null)},bind:function(b){this.bindStore(b)},onDestroy:function(){this.bindStore(null);Ext.PagingToolbar.superclass.onDestroy.call(this)}})})();Ext.reg(\"paging\",Ext.PagingToolbar);Ext.History=(function(){var e,c;var l=false;var d;function g(){var m=location.href,n=m.indexOf(\"#\");return n>=0?m.substr(n+1):null}function a(){c.value=d}function h(m){d=m;Ext.History.fireEvent(\"change\",m)}function i(n){var m=['<html><body><div id=\"state\">',Ext.util.Format.htmlEncode(n),\"</div></body></html>\"].join(\"\");try{var p=e.contentWindow.document;p.open();p.write(m);p.close();return true}catch(o){return false}}function b(){if(!e.contentWindow||!e.contentWindow.document){setTimeout(b,10);return}var p=e.contentWindow.document;var n=p.getElementById(\"state\");var m=n?n.innerText:null;var o=g();setInterval(function(){p=e.contentWindow.document;n=p.getElementById(\"state\");var r=n?n.innerText:null;var q=g();if(r!==m){m=r;h(m);top.location.hash=m;o=m;a()}else{if(q!==o){o=q;i(q)}}},50);l=true;Ext.History.fireEvent(\"ready\",Ext.History)}function k(){d=c.value?c.value:g();if(Ext.isIE){b()}else{var m=g();setInterval(function(){var n=g();if(n!==m){m=n;h(m);a()}},50);l=true;Ext.History.fireEvent(\"ready\",Ext.History)}}return{fieldId:\"x-history-field\",iframeId:\"x-history-frame\",events:{},init:function(n,m){if(l){Ext.callback(n,m,[this]);return}if(!Ext.isReady){Ext.onReady(function(){Ext.History.init(n,m)});return}c=Ext.getDom(Ext.History.fieldId);if(Ext.isIE){e=Ext.getDom(Ext.History.iframeId)}this.addEvents(\"ready\",\"change\");if(n){this.on(\"ready\",n,m,{single:true})}k()},add:function(m,n){if(n!==false){if(this.getToken()==m){return true}}if(Ext.isIE){return i(m)}else{top.location.hash=m;return true}},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return l?d:g()}}})();Ext.apply(Ext.History,new Ext.util.Observable());Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:\"sides\",defaultAlign:\"tl-bl?\",autoRender:true,quickShowInterval:250,frame:true,hidden:true,baseCls:\"x-tip\",floating:{shadow:true,shim:true,useDisplay:true,constrain:false},autoHeight:true,closeAction:\"hide\",initComponent:function(){Ext.Tip.superclass.initComponent.call(this);if(this.closable&&!this.title){this.elements+=\",header\"}},afterRender:function(){Ext.Tip.superclass.afterRender.call(this);if(this.closable){this.addTool({id:\"close\",handler:this[this.closeAction],scope:this})}},showAt:function(a){Ext.Tip.superclass.show.call(this);if(this.measureWidth!==false&&(!this.initialConfig||typeof this.initialConfig.width!=\"number\")){this.doAutoWidth()}if(this.constrainPosition){a=this.el.adjustForConstraints(a)}this.setPagePosition(a[0],a[1])},doAutoWidth:function(a){a=a||0;var b=this.body.getTextWidth();if(this.title){b=Math.max(b,this.header.child(\"span\").getTextWidth(this.title))}b+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding(\"lr\")+a;this.setWidth(b.constrain(this.minWidth,this.maxWidth));if(Ext.isIE7&&!this.repainted){this.el.repaint();this.repainted=true}},showBy:function(a,b){if(!this.rendered){this.render(Ext.getBody())}this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable==\"boolean\"?null:this.draggable);this.header.addClass(\"x-tip-draggable\")}});Ext.reg(\"tip\",Ext.Tip);Ext.Tip.DD=function(b,a){Ext.apply(this,a);this.tip=b;Ext.Tip.DD.superclass.constructor.call(this,b.el.id,\"WindowDD-\"+b.id);this.setHandleElId(b.header.id);this.scroll=false};Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:true,scroll:false,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(a){this.tip.el.enableShadow(true)}});Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,constrainPosition:false,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this);this.lastActive=new Date();this.initTarget(this.target);this.origAnchor=this.anchor},onRender:function(b,a){Ext.ToolTip.superclass.onRender.call(this,b,a);this.anchorCls=\"x-tip-anchor-\"+this.getAnchorPosition();this.anchorEl=this.el.createChild({cls:\"x-tip-anchor \"+this.anchorCls})},afterRender:function(){Ext.ToolTip.superclass.afterRender.call(this);this.anchorEl.setStyle(\"z-index\",this.el.getZIndex()+1).setVisibilityMode(Ext.Element.DISPLAY)},initTarget:function(c){var a;if((a=Ext.get(c))){if(this.target){var b=Ext.get(this.target);this.mun(b,\"mouseover\",this.onTargetOver,this);this.mun(b,\"mouseout\",this.onTargetOut,this);this.mun(b,\"mousemove\",this.onMouseMove,this)}this.mon(a,{mouseover:this.onTargetOver,mouseout:this.onTargetOut,mousemove:this.onMouseMove,scope:this});this.target=a}if(this.anchor){this.anchorTarget=this.target}},onMouseMove:function(b){var a=this.delegate?b.getTarget(this.delegate):this.triggerElement=true;if(a){this.targetXY=b.getXY();if(a===this.triggerElement){if(!this.hidden&&this.trackMouse){this.setPagePosition(this.getTargetXY())}}else{this.hide();this.lastActive=new Date(0);this.onTargetOver(b)}}else{if(!this.closable&&this.isVisible()){this.hide()}}},getTargetXY:function(){if(this.delegate){this.anchorTarget=this.triggerElement}if(this.anchor){this.targetCounter++;var c=this.getOffsets(),m=(this.anchorToTarget&&!this.trackMouse)?this.el.getAlignToXY(this.anchorTarget,this.getAnchorAlign()):this.targetXY,a=Ext.lib.Dom.getViewWidth()-5,h=Ext.lib.Dom.getViewHeight()-5,i=document.documentElement,e=document.body,l=(i.scrollLeft||e.scrollLeft||0)+5,k=(i.scrollTop||e.scrollTop||0)+5,b=[m[0]+c[0],m[1]+c[1]],g=this.getSize();this.anchorEl.removeClass(this.anchorCls);if(this.targetCounter<2){if(b[0]<l){if(this.anchorToTarget){this.defaultAlign=\"l-r\";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor=\"left\";return this.getTargetXY()}if(b[0]+g.width>a){if(this.anchorToTarget){this.defaultAlign=\"r-l\";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor=\"right\";return this.getTargetXY()}if(b[1]<k){if(this.anchorToTarget){this.defaultAlign=\"t-b\";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor=\"top\";return this.getTargetXY()}if(b[1]+g.height>h){if(this.anchorToTarget){this.defaultAlign=\"b-t\";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor=\"bottom\";return this.getTargetXY()}}this.anchorCls=\"x-tip-anchor-\"+this.getAnchorPosition();this.anchorEl.addClass(this.anchorCls);this.targetCounter=0;return b}else{var d=this.getMouseOffset();return[this.targetXY[0]+d[0],this.targetXY[1]+d[1]]}},getMouseOffset:function(){var a=this.anchor?[0,0]:[15,18];if(this.mouseOffset){a[0]+=this.mouseOffset[0];a[1]+=this.mouseOffset[1]}return a},getAnchorPosition:function(){if(this.anchor){this.tipAnchor=this.anchor.charAt(0)}else{var a=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\\?)?$/);if(!a){throw\"AnchorTip.defaultAlign is invalid\"}this.tipAnchor=a[1].charAt(0)}switch(this.tipAnchor){case\"t\":return\"top\";case\"b\":return\"bottom\";case\"r\":return\"right\"}return\"left\"},getAnchorAlign:function(){switch(this.anchor){case\"top\":return\"tl-bl\";case\"left\":return\"tl-tr\";case\"right\":return\"tr-tl\";default:return\"bl-tl\"}},getOffsets:function(){var b,a=this.getAnchorPosition().charAt(0);if(this.anchorToTarget&&!this.trackMouse){switch(a){case\"t\":b=[0,9];break;case\"b\":b=[0,-13];break;case\"r\":b=[-13,0];break;default:b=[9,0];break}}else{switch(a){case\"t\":b=[-15-this.anchorOffset,30];break;case\"b\":b=[-19-this.anchorOffset,-13-this.el.dom.offsetHeight];break;case\"r\":b=[-15-this.el.dom.offsetWidth,-13-this.anchorOffset];break;default:b=[25,-13-this.anchorOffset];break}}var c=this.getMouseOffset();b[0]+=c[0];b[1]+=c[1];return b},onTargetOver:function(b){if(this.disabled||b.within(this.target.dom,true)){return}var a=b.getTarget(this.delegate);if(a){this.triggerElement=a;this.clearTimer(\"hide\");this.targetXY=b.getXY();this.delayShow()}},delayShow:function(){if(this.hidden&&!this.showTimer){if(this.lastActive.getElapsed()<this.quickShowInterval){this.show()}else{this.showTimer=this.show.defer(this.showDelay,this)}}else{if(!this.hidden&&this.autoHide!==false){this.show()}}},onTargetOut:function(a){if(this.disabled||a.within(this.target.dom,true)){return}this.clearTimer(\"show\");if(this.autoHide!==false){this.delayHide()}},delayHide:function(){if(!this.hidden&&!this.hideTimer){this.hideTimer=this.hide.defer(this.hideDelay,this)}},hide:function(){this.clearTimer(\"dismiss\");this.lastActive=new Date();if(this.anchorEl){this.anchorEl.hide()}Ext.ToolTip.superclass.hide.call(this);delete this.triggerElement},show:function(){if(this.anchor){this.showAt([-1000,-1000]);this.origConstrainPosition=this.constrainPosition;this.constrainPosition=false;this.anchor=this.origAnchor}this.showAt(this.getTargetXY());if(this.anchor){this.anchorEl.show();this.syncAnchor();this.constrainPosition=this.origConstrainPosition}else{this.anchorEl.hide()}},showAt:function(a){this.lastActive=new Date();this.clearTimers();Ext.ToolTip.superclass.showAt.call(this,a);if(this.dismissDelay&&this.autoHide!==false){this.dismissTimer=this.hide.defer(this.dismissDelay,this)}if(this.anchor&&!this.anchorEl.isVisible()){this.syncAnchor();this.anchorEl.show()}else{this.anchorEl.hide()}},syncAnchor:function(){var a,b,c;switch(this.tipAnchor.charAt(0)){case\"t\":a=\"b\";b=\"tl\";c=[20+this.anchorOffset,2];break;case\"r\":a=\"l\";b=\"tr\";c=[-2,11+this.anchorOffset];break;case\"b\":a=\"t\";b=\"bl\";c=[20+this.anchorOffset,-2];break;default:a=\"r\";b=\"tl\";c=[2,11+this.anchorOffset];break}this.anchorEl.alignTo(this.el,a+\"-\"+b,c)},setPagePosition:function(a,b){Ext.ToolTip.superclass.setPagePosition.call(this,a,b);if(this.anchor){this.syncAnchor()}},clearTimer:function(a){a=a+\"Timer\";clearTimeout(this[a]);delete this[a]},clearTimers:function(){this.clearTimer(\"show\");this.clearTimer(\"dismiss\");this.clearTimer(\"hide\")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this);Ext.getDoc().on(\"mousedown\",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this);Ext.getDoc().un(\"mousedown\",this.onDocMouseDown,this)},onDocMouseDown:function(a){if(this.autoHide!==true&&!this.closable&&!a.within(this.el.dom)){this.disable();this.doEnable.defer(100,this)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.clearTimers();this.hide()},adjustPosition:function(a,d){if(this.contstrainPosition){var c=this.targetXY[1],b=this.getSize().height;if(d<=c&&(d+b)>=c){d=c-b-5}}return{x:a,y:d}},beforeDestroy:function(){this.clearTimers();Ext.destroy(this.anchorEl);delete this.anchorEl;delete this.target;delete this.anchorTarget;delete this.triggerElement;Ext.ToolTip.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un(\"mousedown\",this.onDocMouseDown,this);Ext.ToolTip.superclass.onDestroy.call(this)}});Ext.reg(\"tooltip\",Ext.ToolTip);Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:false,tagConfig:{namespace:\"ext\",attribute:\"qtip\",width:\"qwidth\",target:\"target\",title:\"qtitle\",hide:\"hide\",cls:\"qclass\",align:\"qalign\",anchor:\"anchor\"},initComponent:function(){this.target=this.target||Ext.getDoc();this.targets=this.targets||{};Ext.QuickTip.superclass.initComponent.call(this)},register:function(e){var h=Ext.isArray(e)?e:arguments;for(var g=0,a=h.length;g<a;g++){var l=h[g];var k=l.target;if(k){if(Ext.isArray(k)){for(var d=0,b=k.length;d<b;d++){this.targets[Ext.id(k[d])]=l}}else{this.targets[Ext.id(k)]=l}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(b){var a=this.activeTarget;b=Ext.get(b).dom;if(this.isVisible()){if(a&&a.el==b){this.hide()}}else{if(a&&a.el==b){this.clearTimer(\"show\")}}},getTipCfg:function(d){var b=d.getTarget(),c,a;if(this.interceptTitles&&b.title&&Ext.isString(b.title)){c=b.title;b.qtip=c;b.removeAttribute(\"title\");d.preventDefault()}else{a=this.tagConfig;c=b.qtip||Ext.fly(b).getAttribute(a.attribute,a.namespace)}return c},onTargetOver:function(i){if(this.disabled){return}this.targetXY=i.getXY();var c=i.getTarget();if(!c||c.nodeType!==1||c==document||c==document.body){return}if(this.activeTarget&&((c==this.activeTarget.el)||Ext.fly(this.activeTarget.el).contains(c))){this.clearTimer(\"hide\");this.show();return}if(c&&this.targets[c.id]){this.activeTarget=this.targets[c.id];this.activeTarget.el=c;this.anchor=this.activeTarget.anchor;if(this.anchor){this.anchorTarget=c}this.delayShow();return}var g,h=Ext.fly(c),b=this.tagConfig,d=b.namespace;if(g=this.getTipCfg(i)){var a=h.getAttribute(b.hide,d);this.activeTarget={el:c,text:g,width:h.getAttribute(b.width,d),autoHide:a!=\"user\"&&a!==\"false\",title:h.getAttribute(b.title,d),cls:h.getAttribute(b.cls,d),align:h.getAttribute(b.align,d)};this.anchor=h.getAttribute(b.anchor,d);if(this.anchor){this.anchorTarget=c}this.delayShow()}},onTargetOut:function(a){if(this.activeTarget&&a.within(this.activeTarget.el)&&!this.getTipCfg(a)){return}this.clearTimer(\"show\");if(this.autoHide!==false){this.delayHide()}},showAt:function(b){var a=this.activeTarget;if(a){if(!this.rendered){this.render(Ext.getBody());this.activeTarget=a}if(a.width){this.setWidth(a.width);this.body.setWidth(this.adjustBodyWidth(a.width-this.getFrameWidth()));this.measureWidth=false}else{this.measureWidth=true}this.setTitle(a.title||\"\");this.body.update(a.text);this.autoHide=a.autoHide;this.dismissDelay=a.dismissDelay||this.dismissDelay;if(this.lastCls){this.el.removeClass(this.lastCls);delete this.lastCls}if(a.cls){this.el.addClass(a.cls);this.lastCls=a.cls}if(this.anchor){this.constrainPosition=false}else{if(a.align){b=this.el.getAlignToXY(a.el,a.align);this.constrainPosition=false}else{this.constrainPosition=true}}}Ext.QuickTip.superclass.showAt.call(this,b)},hide:function(){delete this.activeTarget;Ext.QuickTip.superclass.hide.call(this)}});Ext.reg(\"quicktip\",Ext.QuickTip);Ext.QuickTips=function(){var b,a=false;return{init:function(c){if(!b){if(!Ext.isReady){Ext.onReady(function(){Ext.QuickTips.init(c)});return}b=new Ext.QuickTip({elements:\"header,body\",disabled:a});if(c!==false){b.render(Ext.getBody())}}},ddDisable:function(){if(b&&!a){b.disable()}},ddEnable:function(){if(b&&!a){b.enable()}},enable:function(){if(b){b.enable()}a=false},disable:function(){if(b){b.disable()}a=true},isEnabled:function(){return b!==undefined&&!b.disabled},getQuickTip:function(){return b},register:function(){b.register.apply(b,arguments)},unregister:function(){b.unregister.apply(b,arguments)},tips:function(){b.register.apply(b,arguments)}}}();Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(a){a.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(b,c,a){this.show();this.body.update(this.getText(a));this.doAutoWidth();this.el.alignTo(a.el,\"b-t?\",this.offsets)},getText:function(a){return String(a.value)}});Ext.ux.SliderTip=Ext.slider.Tip;Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:true,animate:Ext.enableFx,lines:true,enableDD:false,hlDrop:Ext.enableFx,pathSeparator:\"/\",bubbleEvents:[],initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this);if(!this.eventModel){this.eventModel=new Ext.tree.TreeEventModel(this)}var a=this.loader;if(!a){a=new Ext.tree.TreeLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod})}else{if(Ext.isObject(a)&&!a.load){a=new Ext.tree.TreeLoader(a)}}this.loader=a;this.nodeHash={};if(this.root){var b=this.root;delete this.root;this.setRootNode(b)}this.addEvents(\"append\",\"remove\",\"movenode\",\"insert\",\"beforeappend\",\"beforeremove\",\"beforemovenode\",\"beforeinsert\",\"beforeload\",\"load\",\"textchange\",\"beforeexpandnode\",\"beforecollapsenode\",\"expandnode\",\"disabledchange\",\"collapsenode\",\"beforeclick\",\"click\",\"containerclick\",\"checkchange\",\"beforedblclick\",\"dblclick\",\"containerdblclick\",\"contextmenu\",\"containercontextmenu\",\"beforechildrenrendered\",\"startdrag\",\"enddrag\",\"dragdrop\",\"beforenodedrop\",\"nodedrop\",\"nodedragover\");if(this.singleExpand){this.on(\"beforeexpandnode\",this.restrictExpand,this)}},proxyNodeEvent:function(c,b,a,h,g,e,d){if(c==\"collapse\"||c==\"expand\"||c==\"beforecollapse\"||c==\"beforeexpand\"||c==\"move\"||c==\"beforemove\"){c=c+\"node\"}return this.fireEvent(c,b,a,h,g,e,d)},getRootNode:function(){return this.root},setRootNode:function(b){this.destroyRoot();if(!b.render){b=this.loader.createNode(b)}this.root=b;b.ownerTree=this;b.isRoot=true;this.registerNode(b);if(!this.rootVisible){var a=b.attributes.uiProvider;b.ui=a?new a(b):new Ext.tree.RootTreeNodeUI(b)}if(this.innerCt){this.clearInnerCt();this.renderRoot()}return b},clearInnerCt:function(){this.innerCt.update(\"\")},renderRoot:function(){this.root.render();if(!this.rootVisible){this.root.renderChildren()}},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return\"[Tree\"+(this.id?\" \"+this.id:\"\")+\"]\"},restrictExpand:function(a){var b=a.parentNode;if(b){if(b.expandedChild&&b.expandedChild.parentNode==b){b.expandedChild.collapse()}b.expandedChild=a}},getChecked:function(b,c){c=c||this.root;var d=[];var e=function(){if(this.attributes.checked){d.push(!b?this:(b==\"id\"?this.id:this.attributes[b]))}};c.cascade(e);return d},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(true)},collapseAll:function(){this.root.collapse(true)},getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.tree.DefaultSelectionModel()}return this.selModel},expandPath:function(g,a,h){if(Ext.isEmpty(g)){if(h){h(false,undefined)}return}a=a||\"id\";var d=g.split(this.pathSeparator);var c=this.root;if(c.attributes[a]!=d[1]){if(h){h(false,null)}return}var b=1;var e=function(){if(++b==d.length){if(h){h(true,c)}return}var i=c.findChild(a,d[b]);if(!i){if(h){h(false,c)}return}c=i;i.expand(false,false,e)};c.expand(false,false,e)},selectPath:function(e,a,g){if(Ext.isEmpty(e)){if(g){g(false,undefined)}return}a=a||\"id\";var c=e.split(this.pathSeparator),b=c.pop();if(c.length>1){var d=function(i,h){if(i&&h){var k=h.findChild(a,b);if(k){k.select();if(g){g(true,k)}}else{if(g){g(false,k)}}}else{if(g){g(false,k)}}};this.expandPath(c.join(this.pathSeparator),a,d)}else{this.root.select();if(g){g(true,this.root)}}},getTreeEl:function(){return this.body},onRender:function(b,a){Ext.tree.TreePanel.superclass.onRender.call(this,b,a);this.el.addClass(\"x-tree\");this.innerCt=this.body.createChild({tag:\"ul\",cls:\"x-tree-root-ct \"+(this.useArrows?\"x-tree-arrows\":this.lines?\"x-tree-lines\":\"x-tree-no-lines\")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);if(this.containerScroll){Ext.dd.ScrollManager.register(this.body)}if((this.enableDD||this.enableDrop)&&!this.dropZone){this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||\"TreeDD\",appendOnly:this.ddAppendOnly===true})}if((this.enableDD||this.enableDrag)&&!this.dragZone){this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||\"TreeDD\",scroll:this.ddScroll})}this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.renderRoot()},beforeDestroy:function(){if(this.rendered){Ext.dd.ScrollManager.unregister(this.body);Ext.destroy(this.dropZone,this.dragZone)}this.destroyRoot();Ext.destroy(this.loader);this.nodeHash=this.root=this.loader=null;Ext.tree.TreePanel.superclass.beforeDestroy.call(this)},destroyRoot:function(){if(this.root&&this.root.destroy){this.root.destroy(true)}}});Ext.tree.TreePanel.nodeTypes={};Ext.reg(\"treepanel\",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(a){this.tree=a;this.tree.on(\"render\",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var a=this.tree;if(a.trackMouseOver!==false){a.mon(a.innerCt,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut})}a.mon(a.getTreeEl(),{scope:this,click:this.delegateClick,dblclick:this.delegateDblClick,contextmenu:this.delegateContextMenu})},getNode:function(b){var a;if(a=b.getTarget(\".x-tree-node-el\",10)){var c=Ext.fly(a,\"_treeEvents\").getAttribute(\"tree-node-id\",\"ext\");if(c){return this.tree.getNodeById(c)}}return null},getNodeTarget:function(b){var a=b.getTarget(\".x-tree-node-icon\",1);if(!a){a=b.getTarget(\".x-tree-node-el\",6)}return a},delegateOut:function(b,a){if(!this.beforeEvent(b)){return}if(b.getTarget(\".x-tree-ec-icon\",1)){var c=this.getNode(b);this.onIconOut(b,c);if(c==this.lastEcOver){delete this.lastEcOver}}if((a=this.getNodeTarget(b))&&!b.within(a,true)){this.onNodeOut(b,this.getNode(b))}},delegateOver:function(b,a){if(!this.beforeEvent(b)){return}if(Ext.isGecko&&!this.trackingDoc){Ext.getBody().on(\"mouseover\",this.trackExit,this);this.trackingDoc=true}if(this.lastEcOver){this.onIconOut(b,this.lastEcOver);delete this.lastEcOver}if(b.getTarget(\".x-tree-ec-icon\",1)){this.lastEcOver=this.getNode(b);this.onIconOver(b,this.lastEcOver)}if(a=this.getNodeTarget(b)){this.onNodeOver(b,this.getNode(b))}},trackExit:function(a){if(this.lastOverNode){if(this.lastOverNode.ui&&!a.within(this.lastOverNode.ui.getEl())){this.onNodeOut(a,this.lastOverNode)}delete this.lastOverNode;Ext.getBody().un(\"mouseover\",this.trackExit,this);this.trackingDoc=false}},delegateClick:function(b,a){if(this.beforeEvent(b)){if(b.getTarget(\"input[type=checkbox]\",1)){this.onCheckboxClick(b,this.getNode(b))}else{if(b.getTarget(\".x-tree-ec-icon\",1)){this.onIconClick(b,this.getNode(b))}else{if(this.getNodeTarget(b)){this.onNodeClick(b,this.getNode(b))}}}}else{this.checkContainerEvent(b,\"click\")}},delegateDblClick:function(b,a){if(this.beforeEvent(b)){if(this.getNodeTarget(b)){this.onNodeDblClick(b,this.getNode(b))}}else{this.checkContainerEvent(b,\"dblclick\")}},delegateContextMenu:function(b,a){if(this.beforeEvent(b)){if(this.getNodeTarget(b)){this.onNodeContextMenu(b,this.getNode(b))}}else{this.checkContainerEvent(b,\"contextmenu\")}},checkContainerEvent:function(b,a){if(this.disabled){b.stopEvent();return false}this.onContainerEvent(b,a)},onContainerEvent:function(b,a){this.tree.fireEvent(\"container\"+a,this.tree,b)},onNodeClick:function(b,a){a.ui.onClick(b)},onNodeOver:function(b,a){this.lastOverNode=a;a.ui.onOver(b)},onNodeOut:function(b,a){a.ui.onOut(b)},onIconOver:function(b,a){a.ui.addClass(\"x-tree-ec-over\")},onIconOut:function(b,a){a.ui.removeClass(\"x-tree-ec-over\")},onIconClick:function(b,a){a.ui.ecClick(b)},onCheckboxClick:function(b,a){a.ui.onCheckChange(b)},onNodeDblClick:function(b,a){a.ui.onDblClick(b)},onNodeContextMenu:function(b,a){a.ui.onContextMenu(b)},beforeEvent:function(b){var a=this.getNode(b);if(this.disabled||!a||!a.ui){b.stopEvent();return false}return true},disable:function(){this.disabled=true},enable:function(){this.disabled=false}};Ext.tree.DefaultSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(a){this.selNode=null;this.addEvents(\"selectionchange\",\"beforeselect\");Ext.apply(this,a);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},init:function(a){this.tree=a;a.mon(a.getTreeEl(),\"keydown\",this.onKeyDown,this);a.on(\"click\",this.onNodeClick,this)},onNodeClick:function(a,b){this.select(a)},select:function(c,a){if(!Ext.fly(c.ui.wrap).isVisible()&&a){return a.call(this,c)}var b=this.selNode;if(c==b){c.ui.onSelectedChange(true)}else{if(this.fireEvent(\"beforeselect\",this,c,b)!==false){if(b&&b.ui){b.ui.onSelectedChange(false)}this.selNode=c;c.ui.onSelectedChange(true);this.fireEvent(\"selectionchange\",this,c,b)}}return c},unselect:function(b,a){if(this.selNode==b){this.clearSelections(a)}},clearSelections:function(a){var b=this.selNode;if(b){b.ui.onSelectedChange(false);this.selNode=null;if(a!==true){this.fireEvent(\"selectionchange\",this,null)}}return b},getSelectedNode:function(){return this.selNode},isSelected:function(a){return this.selNode==a},selectPrevious:function(a){if(!(a=a||this.selNode||this.lastSelNode)){return null}var c=a.previousSibling;if(c){if(!c.isExpanded()||c.childNodes.length<1){return this.select(c,this.selectPrevious)}else{var b=c.lastChild;while(b&&b.isExpanded()&&Ext.fly(b.ui.wrap).isVisible()&&b.childNodes.length>0){b=b.lastChild}return this.select(b,this.selectPrevious)}}else{if(a.parentNode&&(this.tree.rootVisible||!a.parentNode.isRoot)){return this.select(a.parentNode,this.selectPrevious)}}return null},selectNext:function(b){if(!(b=b||this.selNode||this.lastSelNode)){return null}if(b.firstChild&&b.isExpanded()&&Ext.fly(b.ui.wrap).isVisible()){return this.select(b.firstChild,this.selectNext)}else{if(b.nextSibling){return this.select(b.nextSibling,this.selectNext)}else{if(b.parentNode){var a=null;b.parentNode.bubble(function(){if(this.nextSibling){a=this.getOwnerTree().selModel.select(this.nextSibling,this.selectNext);return false}});return a}}}return null},onKeyDown:function(c){var b=this.selNode||this.lastSelNode;var d=this;if(!b){return}var a=c.getKey();switch(a){case c.DOWN:c.stopEvent();this.selectNext();break;case c.UP:c.stopEvent();this.selectPrevious();break;case c.RIGHT:c.preventDefault();if(b.hasChildNodes()){if(!b.isExpanded()){b.expand()}else{if(b.firstChild){this.select(b.firstChild,c)}}}break;case c.LEFT:c.preventDefault();if(b.hasChildNodes()&&b.isExpanded()){b.collapse()}else{if(b.parentNode&&(this.tree.rootVisible||b.parentNode!=this.tree.getRootNode())){this.select(b.parentNode,c)}}break}}});Ext.tree.MultiSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(a){this.selNodes=[];this.selMap={};this.addEvents(\"selectionchange\");Ext.apply(this,a);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},init:function(a){this.tree=a;a.mon(a.getTreeEl(),\"keydown\",this.onKeyDown,this);a.on(\"click\",this.onNodeClick,this)},onNodeClick:function(a,b){if(b.ctrlKey&&this.isSelected(a)){this.unselect(a)}else{this.select(a,b,b.ctrlKey)}},select:function(a,c,b){if(b!==true){this.clearSelections(true)}if(this.isSelected(a)){this.lastSelNode=a;return a}this.selNodes.push(a);this.selMap[a.id]=a;this.lastSelNode=a;a.ui.onSelectedChange(true);this.fireEvent(\"selectionchange\",this,this.selNodes);return a},unselect:function(b){if(this.selMap[b.id]){b.ui.onSelectedChange(false);var c=this.selNodes;var a=c.indexOf(b);if(a!=-1){this.selNodes.splice(a,1)}delete this.selMap[b.id];this.fireEvent(\"selectionchange\",this,this.selNodes)}},clearSelections:function(b){var d=this.selNodes;if(d.length>0){for(var c=0,a=d.length;c<a;c++){d[c].ui.onSelectedChange(false)}this.selNodes=[];this.selMap={};if(b!==true){this.fireEvent(\"selectionchange\",this,this.selNodes)}}},isSelected:function(a){return this.selMap[a.id]?true:false},getSelectedNodes:function(){return this.selNodes.concat([])},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(a){this.nodeHash={};this.root=null;if(a){this.setRootNode(a)}this.addEvents(\"append\",\"remove\",\"move\",\"insert\",\"beforeappend\",\"beforeremove\",\"beforemove\",\"beforeinsert\");Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:\"/\",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(a){this.root=a;a.ownerTree=this;a.isRoot=true;this.registerNode(a);return a},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return\"[Tree\"+(this.id?\" \"+this.id:\"\")+\"]\"}});Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(a){this.attributes=a||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;if(!this.id){this.id=Ext.id(null,\"xnode-\");this.attributes.id=this.id}this.childNodes=[];this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(b){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===false){return false}var a=this.getOwnerTree();if(a){if(a.proxyNodeEvent.apply(a,arguments)===false){return false}}return true},isLeaf:function(){return this.leaf===true},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},isLast:function(){return(!this.parentNode?true:this.parentNode.lastChild==this)},isFirst:function(){return(!this.parentNode?true:this.parentNode.firstChild==this)},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(e){var g=false;if(Ext.isArray(e)){g=e}else{if(arguments.length>1){g=arguments}}if(g){for(var d=0,a=g.length;d<a;d++){this.appendChild(g[d])}}else{if(this.fireEvent(\"beforeappend\",this.ownerTree,this,e)===false){return false}var b=this.childNodes.length;var c=e.parentNode;if(c){if(e.fireEvent(\"beforemove\",e.getOwnerTree(),e,c,this,b)===false){return false}c.removeChild(e)}b=this.childNodes.length;if(b===0){this.setFirstChild(e)}this.childNodes.push(e);e.parentNode=this;var h=this.childNodes[b-1];if(h){e.previousSibling=h;h.nextSibling=e}else{e.previousSibling=null}e.nextSibling=null;this.setLastChild(e);e.setOwnerTree(this.getOwnerTree());this.fireEvent(\"append\",this.ownerTree,this,e,b);if(c){e.fireEvent(\"move\",this.ownerTree,e,c,this,b)}return e}},removeChild:function(c,b){var a=this.childNodes.indexOf(c);if(a==-1){return false}if(this.fireEvent(\"beforeremove\",this.ownerTree,this,c)===false){return false}this.childNodes.splice(a,1);if(c.previousSibling){c.previousSibling.nextSibling=c.nextSibling}if(c.nextSibling){c.nextSibling.previousSibling=c.previousSibling}if(this.firstChild==c){this.setFirstChild(c.nextSibling)}if(this.lastChild==c){this.setLastChild(c.previousSibling)}this.fireEvent(\"remove\",this.ownerTree,this,c);if(b){c.destroy(true)}else{c.clear()}return c},clear:function(a){this.setOwnerTree(null,a);this.parentNode=this.previousSibling=this.nextSibling=null;if(a){this.firstChild=this.lastChild=null}},destroy:function(a){if(a===true){this.purgeListeners();this.clear(true);Ext.each(this.childNodes,function(b){b.destroy(true)});this.childNodes=null}else{this.remove(true)}},insertBefore:function(d,a){if(!a){return this.appendChild(d)}if(d==a){return false}if(this.fireEvent(\"beforeinsert\",this.ownerTree,this,d,a)===false){return false}var b=this.childNodes.indexOf(a);var c=d.parentNode;var e=b;if(c==this&&this.childNodes.indexOf(d)<b){e--}if(c){if(d.fireEvent(\"beforemove\",d.getOwnerTree(),d,c,this,b,a)===false){return false}c.removeChild(d)}if(e===0){this.setFirstChild(d)}this.childNodes.splice(e,0,d);d.parentNode=this;var g=this.childNodes[e-1];if(g){d.previousSibling=g;g.nextSibling=d}else{d.previousSibling=null}d.nextSibling=a;a.previousSibling=d;d.setOwnerTree(this.getOwnerTree());this.fireEvent(\"insert\",this.ownerTree,this,d,a);if(c){d.fireEvent(\"move\",this.ownerTree,d,c,this,e,a)}return d},remove:function(a){if(this.parentNode){this.parentNode.removeChild(this,a)}return this},removeAll:function(a){var c=this.childNodes,b;while((b=c[0])){this.removeChild(b,a)}return this},item:function(a){return this.childNodes[a]},replaceChild:function(a,c){var b=c?c.nextSibling:null;this.removeChild(c);this.insertBefore(a,b);return c},indexOf:function(a){return this.childNodes.indexOf(a)},getOwnerTree:function(){if(!this.ownerTree){var a=this;while(a){if(a.ownerTree){this.ownerTree=a.ownerTree;break}a=a.parentNode}}return this.ownerTree},getDepth:function(){var b=0;var a=this;while(a.parentNode){++b;a=a.parentNode}return b},setOwnerTree:function(a,b){if(a!=this.ownerTree){if(this.ownerTree){this.ownerTree.unregisterNode(this)}this.ownerTree=a;if(b!==true){Ext.each(this.childNodes,function(c){c.setOwnerTree(a)})}if(a){a.registerNode(this)}}},setId:function(b){if(b!==this.id){var a=this.ownerTree;if(a){a.unregisterNode(this)}this.id=this.attributes.id=b;if(a){a.registerNode(this)}this.onIdChange(b)}},onIdChange:Ext.emptyFn,getPath:function(c){c=c||\"id\";var e=this.parentNode;var a=[this.attributes[c]];while(e){a.unshift(e.attributes[c]);e=e.parentNode}var d=this.getOwnerTree().pathSeparator;return d+a.join(d)},bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.parentNode}},cascade:function(g,e,b){if(g.apply(e||this,b||[this])!==false){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].cascade(g,e,b)}}},eachChild:function(g,e,b){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){if(g.apply(e||d[c],b||[d[c]])===false){break}}},findChild:function(b,c,a){return this.findChildBy(function(){return this.attributes[b]==c},null,a)},findChildBy:function(h,g,b){var e=this.childNodes,a=e.length,d=0,k,c;for(;d<a;d++){k=e[d];if(h.call(g||k,k)===true){return k}else{if(b){c=k.findChildBy(h,g,b);if(c!=null){return c}}}}return null},sort:function(e,d){var c=this.childNodes;var a=c.length;if(a>0){var g=d?function(){e.apply(d,arguments)}:e;c.sort(g);for(var b=0;b<a;b++){var h=c[b];h.previousSibling=c[b-1];h.nextSibling=c[b+1];if(b===0){this.setFirstChild(h)}if(b==a-1){this.setLastChild(h)}}}},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var b=this.parentNode;while(b){if(b==a){return true}b=b.parentNode}return false},toString:function(){return\"[Node\"+(this.id?\" \"+this.id:\"\")+\"]\"}});Ext.tree.TreeNode=Ext.extend(Ext.data.Node,{constructor:function(a){a=a||{};if(Ext.isString(a)){a={text:a}}this.childrenRendered=false;this.rendered=false;Ext.tree.TreeNode.superclass.constructor.call(this,a);this.expanded=a.expanded===true;this.isTarget=a.isTarget!==false;this.draggable=a.draggable!==false&&a.allowDrag!==false;this.allowChildren=a.allowChildren!==false&&a.allowDrop!==false;this.text=a.text;this.disabled=a.disabled===true;this.hidden=a.hidden===true;this.addEvents(\"textchange\",\"beforeexpand\",\"beforecollapse\",\"expand\",\"disabledchange\",\"collapse\",\"beforeclick\",\"click\",\"checkchange\",\"beforedblclick\",\"dblclick\",\"contextmenu\",\"beforechildrenrendered\");var b=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new b(this)},preventHScroll:true,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var a;return this.loader||((a=this.getOwnerTree())&&a.loader?a.loader:(this.loader=new Ext.tree.TreeLoader()))},setFirstChild:function(a){var b=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,a);if(this.childrenRendered&&b&&a!=b){b.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},setLastChild:function(b){var a=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,b);if(this.childrenRendered&&a&&b!=a){a.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},appendChild:function(b){if(!b.render&&!Ext.isArray(b)){b=this.getLoader().createNode(b)}var a=Ext.tree.TreeNode.superclass.appendChild.call(this,b);if(a&&this.childrenRendered){a.render()}this.ui.updateExpandIcon();return a},removeChild:function(b,a){this.ownerTree.getSelectionModel().unselect(b);Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(!a){var c=b.ui.rendered;if(c){b.ui.remove()}if(c&&this.childNodes.length<1){this.collapse(false,false)}else{this.ui.updateExpandIcon()}if(!this.firstChild&&!this.isHiddenRoot()){this.childrenRendered=false}}return b},insertBefore:function(c,a){if(!c.render){c=this.getLoader().createNode(c)}var b=Ext.tree.TreeNode.superclass.insertBefore.call(this,c,a);if(b&&a&&this.childrenRendered){c.render()}this.ui.updateExpandIcon();return b},setText:function(b){var a=this.text;this.text=this.attributes.text=b;if(this.rendered){this.ui.onTextChange(this,b,a)}this.fireEvent(\"textchange\",this,b,a)},setIconCls:function(b){var a=this.attributes.iconCls;this.attributes.iconCls=b;if(this.rendered){this.ui.onIconClsChange(this,b,a)}},setTooltip:function(a,b){this.attributes.qtip=a;this.attributes.qtipTitle=b;if(this.rendered){this.ui.onTipChange(this,a,b)}},setIcon:function(a){this.attributes.icon=a;if(this.rendered){this.ui.onIconChange(this,a)}},setHref:function(a,b){this.attributes.href=a;this.attributes.hrefTarget=b;if(this.rendered){this.ui.onHrefChange(this,a,b)}},setCls:function(b){var a=this.attributes.cls;this.attributes.cls=b;if(this.rendered){this.ui.onClsChange(this,b,a)}},select:function(){var a=this.getOwnerTree();if(a){a.getSelectionModel().select(this)}},unselect:function(a){var b=this.getOwnerTree();if(b){b.getSelectionModel().unselect(this,a)}},isSelected:function(){var a=this.getOwnerTree();return a?a.getSelectionModel().isSelected(this):false},expand:function(a,c,d,b){if(!this.expanded){if(this.fireEvent(\"beforeexpand\",this,a,c)===false){return}if(!this.childrenRendered){this.renderChildren()}this.expanded=true;if(!this.isHiddenRoot()&&(this.getOwnerTree().animate&&c!==false)||c){this.ui.animExpand(function(){this.fireEvent(\"expand\",this);this.runCallback(d,b||this,[this]);if(a===true){this.expandChildNodes(true,true)}}.createDelegate(this));return}else{this.ui.expand();this.fireEvent(\"expand\",this);this.runCallback(d,b||this,[this])}}else{this.runCallback(d,b||this,[this])}if(a===true){this.expandChildNodes(true)}},runCallback:function(a,c,b){if(Ext.isFunction(a)){a.apply(c,b)}},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(b,g,h,e){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent(\"beforecollapse\",this,b,g)===false){return}this.expanded=false;if((this.getOwnerTree().animate&&g!==false)||g){this.ui.animCollapse(function(){this.fireEvent(\"collapse\",this);this.runCallback(h,e||this,[this]);if(b===true){this.collapseChildNodes(true)}}.createDelegate(this));return}else{this.ui.collapse();this.fireEvent(\"collapse\",this);this.runCallback(h,e||this,[this])}}else{if(!this.expanded){this.runCallback(h,e||this,[this])}}if(b===true){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].collapse(true,false)}}},delayedExpand:function(a){if(!this.expandProcId){this.expandProcId=this.expand.defer(a,this)}},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId)}this.expandProcId=false},toggle:function(){if(this.expanded){this.collapse()}else{this.expand()}},ensureVisible:function(c,b){var a=this.getOwnerTree();a.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),false,function(){var d=a.getNodeById(this.id);a.getTreeEl().scrollChildIntoView(d.ui.anchor);this.runCallback(c,b||this,[this])}.createDelegate(this))},expandChildNodes:function(b,e){var d=this.childNodes,c,a=d.length;for(c=0;c<a;c++){d[c].expand(b,e)}},collapseChildNodes:function(b){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].collapse(b)}},disable:function(){this.disabled=true;this.unselect();if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,true)}this.fireEvent(\"disabledchange\",this,true)},enable:function(){this.disabled=false;if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,false)}this.fireEvent(\"disabledchange\",this,false)},renderChildren:function(b){if(b!==false){this.fireEvent(\"beforechildrenrendered\",this)}var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].render(true)}this.childrenRendered=true},sort:function(e,d){Ext.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var c=this.childNodes;for(var b=0,a=c.length;b<a;b++){c[b].render(true)}}},render:function(a){this.ui.render(a);if(!this.rendered){this.getOwnerTree().registerNode(this);this.rendered=true;if(this.expanded){this.expanded=false;this.expand(false,false)}}},renderIndent:function(b,e){if(e){this.ui.childIndent=null}this.ui.renderIndent();if(b===true&&this.childrenRendered){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].renderIndent(true,e)}}},beginUpdate:function(){this.childrenRendered=false},endUpdate:function(){if(this.expanded&&this.rendered){this.renderChildren()}},destroy:function(a){if(a===true){this.unselect(true)}Ext.tree.TreeNode.superclass.destroy.call(this,a);Ext.destroy(this.ui,this.loader);this.ui=this.loader=null},onIdChange:function(a){this.ui.onIdChange(a)}});Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode;Ext.tree.AsyncTreeNode=function(a){this.loaded=a&&a.loaded===true;this.loading=false;Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments);this.addEvents(\"beforeload\",\"load\")};Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(b,e,h,c){if(this.loading){var g;var d=function(){if(!this.loading){clearInterval(g);this.expand(b,e,h,c)}}.createDelegate(this);g=setInterval(d,200);return}if(!this.loaded){if(this.fireEvent(\"beforeload\",this)===false){return}this.loading=true;this.ui.beforeLoad(this);var a=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(a){a.load(this,this.loadComplete.createDelegate(this,[b,e,h,c]),this);return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,b,e,h,c)},isLoading:function(){return this.loading},loadComplete:function(a,c,d,b){this.loading=false;this.loaded=true;this.ui.afterLoad(this);this.fireEvent(\"load\",this);this.expand(a,c,d,b)},isLoaded:function(){return this.loaded},hasChildNodes:function(){if(!this.isLeaf()&&!this.loaded){return true}else{return Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this)}},reload:function(b,a){this.collapse(false,false);while(this.firstChild){this.removeChild(this.firstChild).destroy()}this.childrenRendered=false;this.loaded=false;if(this.isHiddenRoot()){this.expanded=false}this.expand(false,false,b,a)}});Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode;Ext.tree.TreeNodeUI=Ext.extend(Object,{constructor:function(a){Ext.apply(this,{node:a,rendered:false,animating:false,wasLeaf:true,ecc:\"x-tree-ec-icon x-tree-elbow\",emptyIcon:Ext.BLANK_IMAGE_URL})},removeChild:function(a){if(this.rendered){this.ctNode.removeChild(a.ui.getEl())}},beforeLoad:function(){this.addClass(\"x-tree-node-loading\")},afterLoad:function(){this.removeClass(\"x-tree-node-loading\")},onTextChange:function(b,c,a){if(this.rendered){this.textNode.innerHTML=c}},onIconClsChange:function(c,a,b){if(this.rendered){Ext.fly(this.iconNode).replaceClass(b,a)}},onIconChange:function(b,a){if(this.rendered){var c=Ext.isEmpty(a);this.iconNode.src=c?this.emptyIcon:a;Ext.fly(this.iconNode)[c?\"removeClass\":\"addClass\"](\"x-tree-node-inline-icon\")}},onTipChange:function(b,c,d){if(this.rendered){var a=Ext.isDefined(d);if(this.textNode.setAttributeNS){this.textNode.setAttributeNS(\"ext\",\"qtip\",c);if(a){this.textNode.setAttributeNS(\"ext\",\"qtitle\",d)}}else{this.textNode.setAttribute(\"ext:qtip\",c);if(a){this.textNode.setAttribute(\"ext:qtitle\",d)}}}},onHrefChange:function(b,a,c){if(this.rendered){this.anchor.href=this.getHref(a);if(Ext.isDefined(c)){this.anchor.target=c}}},onClsChange:function(c,a,b){if(this.rendered){Ext.fly(this.elNode).replaceClass(b,a)}},onDisableChange:function(a,b){this.disabled=b;if(this.checkbox){this.checkbox.disabled=b}this[b?\"addClass\":\"removeClass\"](\"x-tree-node-disabled\")},onSelectedChange:function(a){if(a){this.focus();this.addClass(\"x-tree-selected\")}else{this.removeClass(\"x-tree-selected\")}},onMove:function(a,h,e,g,d,b){this.childIndent=null;if(this.rendered){var i=g.ui.getContainer();if(!i){this.holder=document.createElement(\"div\");this.holder.appendChild(this.wrap);return}var c=b?b.ui.getEl():null;if(c){i.insertBefore(this.wrap,c)}else{i.appendChild(this.wrap)}this.node.renderIndent(true,e!=g)}},addClass:function(a){if(this.elNode){Ext.fly(this.elNode).addClass(a)}},removeClass:function(a){if(this.elNode){Ext.fly(this.elNode).removeClass(a)}},remove:function(){if(this.rendered){this.holder=document.createElement(\"div\");this.holder.appendChild(this.wrap)}},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on(\"move\",this.onMove,this);if(this.node.disabled){this.onDisableChange(this.node,true)}if(this.node.hidden){this.hide()}var b=this.node.getOwnerTree();var a=b.enableDD||b.enableDrag||b.enableDrop;if(a&&(!this.node.isRoot||b.rootVisible)){Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:false})}},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=true;if(this.wrap){this.wrap.style.display=\"none\"}},show:function(){this.node.hidden=false;if(this.wrap){this.wrap.style.display=\"\"}},onContextMenu:function(a){if(this.node.hasListener(\"contextmenu\")||this.node.getOwnerTree().hasListener(\"contextmenu\")){a.preventDefault();this.focus();this.fireEvent(\"contextmenu\",this.node,a)}},onClick:function(c){if(this.dropping){c.stopEvent();return}if(this.fireEvent(\"beforeclick\",this.node,c)!==false){var b=c.getTarget(\"a\");if(!this.disabled&&this.node.attributes.href&&b){this.fireEvent(\"click\",this.node,c);return}else{if(b&&c.ctrlKey){c.stopEvent()}}c.preventDefault();if(this.disabled){return}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent(\"click\",this.node,c)}else{c.stopEvent()}},onDblClick:function(a){a.preventDefault();if(this.disabled){return}if(this.fireEvent(\"beforedblclick\",this.node,a)!==false){if(this.checkbox){this.toggleCheck()}if(!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent(\"dblclick\",this.node,a)}},onOver:function(a){this.addClass(\"x-tree-node-over\")},onOut:function(a){this.removeClass(\"x-tree-node-over\")},onCheckChange:function(){var a=this.checkbox.checked;this.checkbox.defaultChecked=a;this.node.attributes.checked=a;this.fireEvent(\"checkchange\",this.node,a)},ecClick:function(a){if(!this.animating&&this.node.isExpandable()){this.node.toggle()}},startDrop:function(){this.dropping=true},endDrop:function(){setTimeout(function(){this.dropping=false}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=\"\"},focus:function(){if(!this.node.preventHScroll){try{this.anchor.focus()}catch(c){}}else{try{var b=this.node.getOwnerTree().getTreeEl().dom;var a=b.scrollLeft;this.anchor.focus();b.scrollLeft=a}catch(c){}}},toggleCheck:function(b){var a=this.checkbox;if(a){a.checked=(b===undefined?!a.checked:b);this.onCheckChange()}},blur:function(){try{this.anchor.blur()}catch(a){}},animExpand:function(b){var a=Ext.get(this.ctNode);a.stopFx();if(!this.node.isExpandable()){this.updateExpandIcon();this.ctNode.style.display=\"\";Ext.callback(b);return}this.animating=true;this.updateExpandIcon();a.slideIn(\"t\",{callback:function(){this.animating=false;Ext.callback(b)},scope:this,duration:this.node.ownerTree.duration||0.25})},highlight:function(){var a=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(a.hlColor||\"C3DAF9\",{endColor:a.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display=\"none\"},animCollapse:function(b){var a=Ext.get(this.ctNode);a.enableDisplayMode(\"block\");a.stopFx();this.animating=true;this.updateExpandIcon();a.slideOut(\"t\",{callback:function(){this.animating=false;Ext.callback(b)},scope:this,duration:this.node.ownerTree.duration||0.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(a){a.appendChild(this.elNode.cloneNode(true))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(c){var e=this.node,b=e.attributes;var d=e.parentNode?e.parentNode.ui.getContainer():e.ownerTree.innerCt.dom;if(!this.rendered){this.rendered=true;this.renderElements(e,b,d,c);if(b.qtip){this.onTipChange(e,b.qtip,b.qtipTitle)}else{if(b.qtipCfg){b.qtipCfg.target=Ext.id(this.textNode);Ext.QuickTips.register(b.qtipCfg)}}this.initEvents();if(!this.node.expanded){this.updateExpandIcon(true)}}else{if(c===true){d.appendChild(this.wrap)}}},renderElements:function(e,l,k,m){this.indentMarkup=e.parentNode?e.parentNode.ui.getChildIndent():\"\";var g=Ext.isBoolean(l.checked),b,c=this.getHref(l.href),d=['<li class=\"x-tree-node\"><div ext:tree-node-id=\"',e.id,'\" class=\"x-tree-node-el x-tree-node-leaf x-unselectable ',l.cls,'\" unselectable=\"on\">','<span class=\"x-tree-node-indent\">',this.indentMarkup,\"</span>\",'<img alt=\"\" src=\"',this.emptyIcon,'\" class=\"x-tree-ec-icon x-tree-elbow\" />','<img alt=\"\" src=\"',l.icon||this.emptyIcon,'\" class=\"x-tree-node-icon',(l.icon?\" x-tree-node-inline-icon\":\"\"),(l.iconCls?\" \"+l.iconCls:\"\"),'\" unselectable=\"on\" />',g?('<input class=\"x-tree-node-cb\" type=\"checkbox\" '+(l.checked?'checked=\"checked\" />':\"/>\")):\"\",'<a hidefocus=\"on\" class=\"x-tree-node-anchor\" href=\"',c,'\" tabIndex=\"1\" ',l.hrefTarget?' target=\"'+l.hrefTarget+'\"':\"\",'><span unselectable=\"on\">',e.text,\"</span></a></div>\",'<ul class=\"x-tree-node-ct\" style=\"display:none;\"></ul>',\"</li>\"].join(\"\");if(m!==true&&e.nextSibling&&(b=e.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml(\"beforeBegin\",b,d)}else{this.wrap=Ext.DomHelper.insertHtml(\"beforeEnd\",k,d)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var i=this.elNode.childNodes;this.indentNode=i[0];this.ecNode=i[1];this.iconNode=i[2];var h=3;if(g){this.checkbox=i[3];this.checkbox.defaultChecked=this.checkbox.checked;h++}this.anchor=i[h];this.textNode=i[h].firstChild},getHref:function(a){return Ext.isEmpty(a)?(Ext.isGecko?\"\":\"#\"):a},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:false},updateExpandIcon:function(){if(this.rendered){var g=this.node,d,c,a=g.isLast()?\"x-tree-elbow-end\":\"x-tree-elbow\",e=g.hasChildNodes();if(e||g.attributes.expandable){if(g.expanded){a+=\"-minus\";d=\"x-tree-node-collapsed\";c=\"x-tree-node-expanded\"}else{a+=\"-plus\";d=\"x-tree-node-expanded\";c=\"x-tree-node-collapsed\"}if(this.wasLeaf){this.removeClass(\"x-tree-node-leaf\");this.wasLeaf=false}if(this.c1!=d||this.c2!=c){Ext.fly(this.elNode).replaceClass(d,c);this.c1=d;this.c2=c}}else{if(!this.wasLeaf){Ext.fly(this.elNode).replaceClass(\"x-tree-node-expanded\",\"x-tree-node-collapsed\");delete this.c1;delete this.c2;this.wasLeaf=true}}var b=\"x-tree-ec-icon \"+a;if(this.ecc!=b){this.ecNode.className=b;this.ecc=b}}},onIdChange:function(a){if(this.rendered){this.elNode.setAttribute(\"ext:tree-node-id\",a)}},getChildIndent:function(){if(!this.childIndent){var a=[],b=this.node;while(b){if(!b.isRoot||(b.isRoot&&b.ownerTree.rootVisible)){if(!b.isLast()){a.unshift('<img alt=\"\" src=\"'+this.emptyIcon+'\" class=\"x-tree-elbow-line\" />')}else{a.unshift('<img alt=\"\" src=\"'+this.emptyIcon+'\" class=\"x-tree-icon\" />')}}b=b.parentNode}this.childIndent=a.join(\"\")}return this.childIndent},renderIndent:function(){if(this.rendered){var a=\"\",b=this.node.parentNode;if(b){a=b.ui.getChildIndent()}if(this.indentMarkup!=a){this.indentNode.innerHTML=a;this.indentMarkup=a}this.updateExpandIcon()}},destroy:function(){if(this.elNode){Ext.dd.Registry.unregister(this.elNode.id)}Ext.each([\"textnode\",\"anchor\",\"checkbox\",\"indentNode\",\"ecNode\",\"iconNode\",\"elNode\",\"ctNode\",\"wrap\",\"holder\"],function(a){if(this[a]){Ext.fly(this[a]).remove();delete this[a]}},this);delete this.node}});Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var a=this.node.ownerTree.innerCt.dom;this.node.expanded=true;a.innerHTML='<div class=\"x-tree-root-node\"></div>';this.wrap=this.ctNode=a.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeLoader=function(a){this.baseParams={};Ext.apply(this,a);this.addEvents(\"beforeload\",\"load\",\"loadexception\");Ext.tree.TreeLoader.superclass.constructor.call(this);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\\s,|]/)}};Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:true,paramOrder:undefined,paramsAsHash:false,nodeParameter:\"node\",directFn:undefined,load:function(b,c,a){if(this.clearOnLoad){while(b.firstChild){b.removeChild(b.firstChild)}}if(this.doPreload(b)){this.runCallback(c,a||b,[b])}else{if(this.directFn||this.dataUrl||this.url){this.requestData(b,c,a||b)}}},doPreload:function(d){if(d.attributes.children){if(d.childNodes.length<1){var c=d.attributes.children;d.beginUpdate();for(var b=0,a=c.length;b<a;b++){var e=d.appendChild(this.createNode(c[b]));if(this.preloadChildren){this.doPreload(e)}}d.endUpdate()}return true}return false},getParams:function(g){var e=Ext.apply({},this.baseParams),h=this.nodeParameter,b=this.paramOrder;h&&(e[h]=g.id);if(this.directFn){var c=[g.id];if(b){if(h&&b.indexOf(h)>-1){c=[]}for(var d=0,a=b.length;d<a;d++){c.push(e[b[d]])}}else{if(this.paramsAsHash){c=[e]}}return c}else{return e}},requestData:function(c,d,b){if(this.fireEvent(\"beforeload\",this,c,d)!==false){if(this.directFn){var a=this.getParams(c);a.push(this.processDirectResponse.createDelegate(this,[{callback:d,node:c,scope:b}],true));this.directFn.apply(window,a)}else{this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:d,node:c,scope:b},params:this.getParams(c)})}}else{this.runCallback(d,b||c,[])}},processDirectResponse:function(a,b,c){if(b.status){this.handleResponse({responseData:Ext.isArray(a)?a:null,responseText:a,argument:c})}else{this.handleFailure({argument:c})}},runCallback:function(a,c,b){if(Ext.isFunction(a)){a.apply(c,b)}},isLoading:function(){return !!this.transId},abort:function(){if(this.isLoading()){Ext.Ajax.abort(this.transId)}},createNode:function(attr){if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false&&!attr.loader){attr.loader=this}if(Ext.isString(attr.uiProvider)){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}if(attr.nodeType){return new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr)}else{return attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)}},processResponse:function(d,c,l,m){var p=d.responseText;try{var a=d.responseData||Ext.decode(p);c.beginUpdate();for(var g=0,h=a.length;g<h;g++){var b=this.createNode(a[g]);if(b){c.appendChild(b)}}c.endUpdate();this.runCallback(l,m||c,[c])}catch(k){this.handleFailure(d)}},handleResponse:function(c){this.transId=false;var b=c.argument;this.processResponse(c,b.node,b.callback,b.scope);this.fireEvent(\"load\",this,b.node,c)},handleFailure:function(c){this.transId=false;var b=c.argument;this.fireEvent(\"loadexception\",this,b.node,c);this.runCallback(b.callback,b.scope||b.node,[b.node])},destroy:function(){this.abort();this.purgeListeners()}});Ext.tree.TreeFilter=function(a,b){this.tree=a;this.filtered={};Ext.apply(this,b)};Ext.tree.TreeFilter.prototype={clearBlank:false,reverse:false,autoClear:false,remove:false,filter:function(d,a,b){a=a||\"text\";var c;if(typeof d==\"string\"){var e=d.length;if(e==0&&this.clearBlank){this.clear();return}d=d.toLowerCase();c=function(g){return g.attributes[a].substr(0,e).toLowerCase()==d}}else{if(d.exec){c=function(g){return d.test(g.attributes[a])}}else{throw\"Illegal filter type, must be string or regex\"}}this.filterBy(c,null,b)},filterBy:function(d,c,b){b=b||this.tree.root;if(this.autoClear){this.clear()}var a=this.filtered,i=this.reverse;var e=function(l){if(l==b){return true}if(a[l.id]){return false}var k=d.call(c||l,l);if(!k||i){a[l.id]=l;l.ui.hide();return false}return true};b.cascade(e);if(this.remove){for(var h in a){if(typeof h!=\"function\"){var g=a[h];if(g&&g.parentNode){g.parentNode.removeChild(g)}}}}},clear:function(){var b=this.tree;var a=this.filtered;for(var d in a){if(typeof d!=\"function\"){var c=a[d];if(c){c.ui.show()}}}this.filtered={}}};Ext.tree.TreeSorter=Ext.extend(Object,{constructor:function(a,b){Ext.apply(this,b);a.on({scope:this,beforechildrenrendered:this.doSort,append:this.updateSort,insert:this.updateSort,textchange:this.updateSortParent});var c=this.dir&&this.dir.toLowerCase()==\"desc\",d=this.property||\"text\";sortType=this.sortType;folderSort=this.folderSort;caseSensitive=this.caseSensitive===true;leafAttr=this.leafAttr||\"leaf\";if(Ext.isString(sortType)){sortType=Ext.data.SortTypes[sortType]}this.sortFn=function(l,i){var g=l.attributes,e=i.attributes;if(folderSort){if(g[leafAttr]&&!e[leafAttr]){return 1}if(!g[leafAttr]&&e[leafAttr]){return -1}}var k=g[d],h=e[d],m=sortType?sortType(k):(caseSensitive?k:k.toUpperCase());v2=sortType?sortType(h):(caseSensitive?h:h.toUpperCase());if(m<v2){return c?1:-1}else{if(m>v2){return c?-1:1}}return 0}},doSort:function(a){a.sort(this.sortFn)},updateSort:function(a,b){if(b.childrenRendered){this.doSort.defer(1,this,[b])}},updateSortParent:function(a){var b=a.parentNode;if(b&&b.childrenRendered){this.doSort.defer(1,this,[b])}}});if(Ext.dd.DropZone){Ext.tree.TreeDropZone=function(a,b){this.allowParentInsert=b.allowParentInsert||false;this.allowContainerDrop=b.allowContainerDrop||false;this.appendOnly=b.appendOnly||false;Ext.tree.TreeDropZone.superclass.constructor.call(this,a.getTreeEl(),b);this.tree=a;this.dragOverData={};this.lastInsertClass=\"x-tree-no-status\"};Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:\"TreeDD\",expandDelay:1000,expandNode:function(a){if(a.hasChildNodes()&&!a.isExpanded()){a.expand(false,null,this.triggerCacheRefresh.createDelegate(this))}},queueExpand:function(a){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[a])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},isValidDropPoint:function(a,l,i,d,c){if(!a||!c){return false}var g=a.node;var h=c.node;if(!(g&&g.isTarget&&l)){return false}if(l==\"append\"&&g.allowChildren===false){return false}if((l==\"above\"||l==\"below\")&&(g.parentNode&&g.parentNode.allowChildren===false)){return false}if(h&&(g==h||h.contains(g))){return false}var b=this.dragOverData;b.tree=this.tree;b.target=g;b.data=c;b.point=l;b.source=i;b.rawEvent=d;b.dropNode=h;b.cancel=false;var k=this.tree.fireEvent(\"nodedragover\",b);return b.cancel===false&&k!==false},getDropPoint:function(h,g,m){var o=g.node;if(o.isRoot){return o.allowChildren!==false?\"append\":false}var c=g.ddel;var p=Ext.lib.Dom.getY(c),k=p+c.offsetHeight;var i=Ext.lib.Event.getPageY(h);var l=o.allowChildren===false||o.isLeaf();if(this.appendOnly||o.parentNode.allowChildren===false){return l?false:\"append\"}var d=false;if(!this.allowParentInsert){d=o.hasChildNodes()&&o.isExpanded()}var a=(k-p)/(l?2:3);if(i>=p&&i<(p+a)){return\"above\"}else{if(!d&&(l||i>=k-a&&i<=k)){return\"below\"}else{return\"append\"}}},onNodeEnter:function(d,a,c,b){this.cancelExpand()},onContainerOver:function(a,c,b){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},\"append\",a,c,b)){return this.dropAllowed}return this.dropNotAllowed},onNodeOver:function(b,i,h,g){var l=this.getDropPoint(h,b,i);var c=b.node;if(!this.expandProcId&&l==\"append\"&&c.hasChildNodes()&&!b.node.isExpanded()){this.queueExpand(c)}else{if(l!=\"append\"){this.cancelExpand()}}var d=this.dropNotAllowed;if(this.isValidDropPoint(b,l,i,h,g)){if(l){var a=b.ddel;var k;if(l==\"above\"){d=b.node.isFirst()?\"x-tree-drop-ok-above\":\"x-tree-drop-ok-between\";k=\"x-tree-drag-insert-above\"}else{if(l==\"below\"){d=b.node.isLast()?\"x-tree-drop-ok-below\":\"x-tree-drop-ok-between\";k=\"x-tree-drag-insert-below\"}else{d=\"x-tree-drop-ok-append\";k=\"x-tree-drag-append\"}}if(this.lastInsertClass!=k){Ext.fly(a).replaceClass(this.lastInsertClass,k);this.lastInsertClass=k}}}return d},onNodeOut:function(d,a,c,b){this.cancelExpand();this.removeDropIndicators(d)},onNodeDrop:function(i,b,h,d){var a=this.getDropPoint(h,i,b);var g=i.node;g.ui.startDrop();if(!this.isValidDropPoint(i,a,b,h,d)){g.ui.endDrop();return false}var c=d.node||(b.getTreeNode?b.getTreeNode(d,g,a,h):null);return this.processDrop(g,d,a,b,h,c)},onContainerDrop:function(a,g,c){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},\"append\",a,g,c)){var d=this.tree.getRootNode();d.ui.startDrop();var b=c.node||(a.getTreeNode?a.getTreeNode(c,d,\"append\",g):null);return this.processDrop(d,c,\"append\",a,g,b)}return false},processDrop:function(k,h,b,a,i,d){var g={tree:this.tree,target:k,data:h,point:b,source:a,rawEvent:i,dropNode:d,cancel:!d,dropStatus:false};var c=this.tree.fireEvent(\"beforenodedrop\",g);if(c===false||g.cancel===true||!g.dropNode){k.ui.endDrop();return g.dropStatus}k=g.target;if(b==\"append\"&&!k.isExpanded()){k.expand(false,null,function(){this.completeDrop(g)}.createDelegate(this))}else{this.completeDrop(g)}return true},completeDrop:function(h){var d=h.dropNode,e=h.point,c=h.target;if(!Ext.isArray(d)){d=[d]}var g;for(var b=0,a=d.length;b<a;b++){g=d[b];if(e==\"above\"){c.parentNode.insertBefore(g,c)}else{if(e==\"below\"){c.parentNode.insertBefore(g,c.nextSibling)}else{c.appendChild(g)}}}g.ui.focus();if(Ext.enableFx&&this.tree.hlDrop){g.ui.highlight()}c.ui.endDrop();this.tree.fireEvent(\"nodedrop\",h)},afterNodeMoved:function(a,c,g,d,b){if(Ext.enableFx&&this.tree.hlDrop){b.ui.focus();b.ui.highlight()}this.tree.fireEvent(\"nodedrop\",this.tree,d,c,a,g)},getTree:function(){return this.tree},removeDropIndicators:function(b){if(b&&b.ddel){var a=b.ddel;Ext.fly(a).removeClass([\"x-tree-drag-insert-above\",\"x-tree-drag-insert-below\",\"x-tree-drag-append\"]);this.lastInsertClass=\"_noclass\"}},beforeDragDrop:function(b,a,c){this.cancelExpand();return true},afterRepair:function(a){if(a&&Ext.enableFx){a.node.ui.highlight()}this.hideProxy()}})}if(Ext.dd.DragZone){Ext.tree.TreeDragZone=function(a,b){Ext.tree.TreeDragZone.superclass.constructor.call(this,a.innerCt,b);this.tree=a};Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:\"TreeDD\",onBeforeDrag:function(a,b){var c=a.node;return c&&c.draggable&&!c.disabled},onInitDrag:function(b){var a=this.dragData;this.tree.getSelectionModel().select(a.node);this.tree.eventModel.disable();this.proxy.update(\"\");a.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent(\"startdrag\",this.tree,a.node,b)},getRepairXY:function(b,a){return a.node.ui.getDDRepairXY()},onEndDrag:function(a,b){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent(\"enddrag\",this.tree,a.node,b)},onValidDrop:function(a,b,c){this.tree.fireEvent(\"dragdrop\",this.tree,this.dragData.node,a,b);this.hideProxy()},beforeInvalidDrop:function(a,c){var b=this.tree.getSelectionModel();b.clearSelections();b.select(this.dragData.node)},afterRepair:function(){if(Ext.enableFx&&this.tree.hlDrop){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||\"c3daf9\")}this.dragging=false}})}Ext.tree.TreeEditor=function(a,c,b){c=c||{};var d=c.events?c:new Ext.form.TextField(c);Ext.tree.TreeEditor.superclass.constructor.call(this,d,b);this.tree=a;if(!a.rendered){a.on(\"render\",this.initEditor,this)}else{this.initEditor(a)}};Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:\"l-l\",autoSize:false,hideEl:false,cls:\"x-small-editor x-tree-editor\",shim:false,shadow:\"frame\",maxWidth:250,editDelay:350,initEditor:function(a){a.on({scope:this,beforeclick:this.beforeNodeClick,dblclick:this.onNodeDblClick});this.on({scope:this,complete:this.updateNode,beforestartedit:this.fitToTree,specialkey:this.onSpecialKey});this.on(\"startedit\",this.bindScroll,this,{delay:10})},fitToTree:function(b,c){var e=this.tree.getTreeEl().dom,d=c.dom;if(e.scrollLeft>d.offsetLeft){e.scrollLeft=d.offsetLeft}var a=Math.min(this.maxWidth,(e.clientWidth>20?e.clientWidth:e.offsetWidth)-Math.max(0,d.offsetLeft-e.scrollLeft)-5);this.setSize(a,\"\")},triggerEdit:function(a,c){this.completeEdit();if(a.attributes.editable!==false){this.editNode=a;if(this.tree.autoScroll){Ext.fly(a.ui.getEl()).scrollIntoView(this.tree.body)}var b=a.text||\"\";if(!Ext.isGecko&&Ext.isEmpty(a.text)){a.setText(\"&#160;\")}this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[a.ui.textNode,b]);return false}},bindScroll:function(){this.tree.getTreeEl().on(\"scroll\",this.cancelEdit,this)},beforeNodeClick:function(a,b){clearTimeout(this.autoEditTimer);if(this.tree.getSelectionModel().isSelected(a)){b.stopEvent();return this.triggerEdit(a)}},onNodeDblClick:function(a,b){clearTimeout(this.autoEditTimer)},updateNode:function(a,b){this.tree.getTreeEl().un(\"scroll\",this.cancelEdit,this);this.editNode.setText(b)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this);if(this.editNode){this.editNode.ui.focus.defer(50,this.editNode.ui)}},onSpecialKey:function(c,b){var a=b.getKey();if(a==b.ESC){b.stopEvent();this.cancelEdit()}else{if(a==b.ENTER&&!b.hasModifier()){b.stopEvent();this.completeEdit()}}},onDestroy:function(){clearTimeout(this.autoEditTimer);Ext.tree.TreeEditor.superclass.onDestroy.call(this);var a=this.tree;a.un(\"beforeclick\",this.beforeNodeClick,this);a.un(\"dblclick\",this.onNodeDblClick,this)}});\n   23  /* SWFObject v2.2 <http://code.google.com/p/swfobject/> \n   24      is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> \n   25  */\n   26: var swfobject=function(){var F=\"undefined\",t=\"object\",U=\"Shockwave Flash\",Y=\"ShockwaveFlash.ShockwaveFlash\",s=\"application/x-shockwave-flash\",T=\"SWFObjectExprInst\",z=\"onreadystatechange\",Q=window,l=document,v=navigator,V=false,W=[i],q=[],P=[],K=[],n,S,G,D,L=false,a=false,p,I,o=true,O=function(){var ac=typeof l.getElementById!=F&&typeof l.getElementsByTagName!=F&&typeof l.createElement!=F,aj=v.userAgent.toLowerCase(),aa=v.platform.toLowerCase(),ag=aa?(/win/).test(aa):/win/.test(aj),ae=aa?(/mac/).test(aa):/mac/.test(aj),ah=/webkit/.test(aj)?parseFloat(aj.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/,\"$1\")):false,Z=!+\"\\v1\",ai=[0,0,0],ad=null;if(typeof v.plugins!=F&&typeof v.plugins[U]==t){ad=v.plugins[U].description;if(ad&&!(typeof v.mimeTypes!=F&&v.mimeTypes[s]&&!v.mimeTypes[s].enabledPlugin)){V=true;Z=false;ad=ad.replace(/^.*\\s+(\\S+\\s+\\S+$)/,\"$1\");ai[0]=parseInt(ad.replace(/^(.*)\\..*$/,\"$1\"),10);ai[1]=parseInt(ad.replace(/^.*\\.(.*)\\s.*$/,\"$1\"),10);ai[2]=/[a-zA-Z]/.test(ad)?parseInt(ad.replace(/^.*[a-zA-Z]+(.*)$/,\"$1\"),10):0}}else{if(typeof Q.ActiveXObject!=F){try{var af=new ActiveXObject(Y);if(af){ad=af.GetVariable(\"$version\");if(ad){Z=true;ad=ad.split(\" \")[1].split(\",\");ai=[parseInt(ad[0],10),parseInt(ad[1],10),parseInt(ad[2],10)]}}}catch(ab){}}}return{w3:ac,pv:ai,wk:ah,ie:Z,win:ag,mac:ae}}(),m=function(){if(!O.w3){return}if((typeof l.readyState!=F&&l.readyState==\"complete\")||(typeof l.readyState==F&&(l.getElementsByTagName(\"body\")[0]||l.body))){g()}if(!L){if(typeof l.addEventListener!=F){l.addEventListener(\"DOMContentLoaded\",g,false)}if(O.ie&&O.win){l.attachEvent(z,function(){if(l.readyState==\"complete\"){l.detachEvent(z,arguments.callee);g()}});if(Q==top){(function(){if(L){return}try{l.documentElement.doScroll(\"left\")}catch(Z){setTimeout(arguments.callee,0);return}g()})()}}if(O.wk){(function(){if(L){return}if(!(/loaded|complete/).test(l.readyState)){setTimeout(arguments.callee,0);return}g()})()}u(g)}}();function g(){if(L){return}try{var ab=l.getElementsByTagName(\"body\")[0].appendChild(E(\"span\"));ab.parentNode.removeChild(ab)}catch(ac){return}L=true;var Z=W.length;for(var aa=0;aa<Z;aa++){W[aa]()}}function M(Z){if(L){Z()}else{W[W.length]=Z}}function u(aa){if(typeof Q.addEventListener!=F){Q.addEventListener(\"load\",aa,false)}else{if(typeof l.addEventListener!=F){l.addEventListener(\"load\",aa,false)}else{if(typeof Q.attachEvent!=F){k(Q,\"onload\",aa)}else{if(typeof Q.onload==\"function\"){var Z=Q.onload;Q.onload=function(){Z();aa()}}else{Q.onload=aa}}}}}function i(){if(V){X()}else{J()}}function X(){var Z=l.getElementsByTagName(\"body\")[0];var ac=E(t);ac.setAttribute(\"type\",s);var ab=Z.appendChild(ac);if(ab){var aa=0;(function(){if(typeof ab.GetVariable!=F){var ad=ab.GetVariable(\"$version\");if(ad){ad=ad.split(\" \")[1].split(\",\");O.pv=[parseInt(ad[0],10),parseInt(ad[1],10),parseInt(ad[2],10)]}}else{if(aa<10){aa++;setTimeout(arguments.callee,10);return}}Z.removeChild(ac);ab=null;J()})()}else{J()}}function J(){var ai=q.length;if(ai>0){for(var ah=0;ah<ai;ah++){var aa=q[ah].id;var ad=q[ah].callbackFn;var ac={success:false,id:aa};if(O.pv[0]>0){var ag=c(aa);if(ag){if(H(q[ah].swfVersion)&&!(O.wk&&O.wk<312)){y(aa,true);if(ad){ac.success=true;ac.ref=B(aa);ad(ac)}}else{if(q[ah].expressInstall&&C()){var ak={};ak.data=q[ah].expressInstall;ak.width=ag.getAttribute(\"width\")||\"0\";ak.height=ag.getAttribute(\"height\")||\"0\";if(ag.getAttribute(\"class\")){ak.styleclass=ag.getAttribute(\"class\")}if(ag.getAttribute(\"align\")){ak.align=ag.getAttribute(\"align\")}var aj={};var Z=ag.getElementsByTagName(\"param\");var ae=Z.length;for(var af=0;af<ae;af++){if(Z[af].getAttribute(\"name\").toLowerCase()!=\"movie\"){aj[Z[af].getAttribute(\"name\")]=Z[af].getAttribute(\"value\")}}R(ak,aj,aa,ad)}else{r(ag);if(ad){ad(ac)}}}}}else{y(aa,true);if(ad){var ab=B(aa);if(ab&&typeof ab.SetVariable!=F){ac.success=true;ac.ref=ab}ad(ac)}}}}}function B(ac){var Z=null;var aa=c(ac);if(aa&&aa.nodeName==\"OBJECT\"){if(typeof aa.SetVariable!=F){Z=aa}else{var ab=aa.getElementsByTagName(t)[0];if(ab){Z=ab}}}return Z}function C(){return !a&&H(\"6.0.65\")&&(O.win||O.mac)&&!(O.wk&&O.wk<312)}function R(ac,ad,Z,ab){a=true;G=ab||null;D={success:false,id:Z};var ag=c(Z);if(ag){if(ag.nodeName==\"OBJECT\"){n=h(ag);S=null}else{n=ag;S=Z}ac.id=T;if(typeof ac.width==F||(!(/%$/).test(ac.width)&&parseInt(ac.width,10)<310)){ac.width=\"310\"}if(typeof ac.height==F||(!(/%$/).test(ac.height)&&parseInt(ac.height,10)<137)){ac.height=\"137\"}l.title=l.title.slice(0,47)+\" - Flash Player Installation\";var af=O.ie&&O.win?\"ActiveX\":\"PlugIn\",ae=\"MMredirectURL=\"+Q.location.toString().replace(/&/g,\"%26\")+\"&MMplayerType=\"+af+\"&MMdoctitle=\"+l.title;if(typeof ad.flashvars!=F){ad.flashvars+=\"&\"+ae}else{ad.flashvars=ae}if(O.ie&&O.win&&ag.readyState!=4){var aa=E(\"div\");Z+=\"SWFObjectNew\";aa.setAttribute(\"id\",Z);ag.parentNode.insertBefore(aa,ag);ag.style.display=\"none\";(function(){if(ag.readyState==4){ag.parentNode.removeChild(ag)}else{setTimeout(arguments.callee,10)}})()}w(ac,ad,Z)}}function r(aa){if(O.ie&&O.win&&aa.readyState!=4){var Z=E(\"div\");aa.parentNode.insertBefore(Z,aa);Z.parentNode.replaceChild(h(aa),Z);aa.style.display=\"none\";(function(){if(aa.readyState==4){aa.parentNode.removeChild(aa)}else{setTimeout(arguments.callee,10)}})()}else{aa.parentNode.replaceChild(h(aa),aa)}}function h(ae){var ad=E(\"div\");if(O.win&&O.ie){ad.innerHTML=ae.innerHTML}else{var aa=ae.getElementsByTagName(t)[0];if(aa){var af=aa.childNodes;if(af){var Z=af.length;for(var ab=0;ab<Z;ab++){if(!(af[ab].nodeType==1&&af[ab].nodeName==\"PARAM\")&&!(af[ab].nodeType==8)){ad.appendChild(af[ab].cloneNode(true))}}}}}return ad}function w(ak,ai,aa){var Z,ac=c(aa);if(O.wk&&O.wk<312){return Z}if(ac){if(typeof ak.id==F){ak.id=aa}if(O.ie&&O.win){var aj=\"\";for(var ag in ak){if(ak[ag]!=Object.prototype[ag]){if(ag.toLowerCase()==\"data\"){ai.movie=ak[ag]}else{if(ag.toLowerCase()==\"styleclass\"){aj+=' class=\"'+ak[ag]+'\"'}else{if(ag.toLowerCase()!=\"classid\"){aj+=\" \"+ag+'=\"'+ak[ag]+'\"'}}}}}var ah=\"\";for(var af in ai){if(ai[af]!=Object.prototype[af]){ah+='<param name=\"'+af+'\" value=\"'+ai[af]+'\" />'}}ac.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"'+aj+\">\"+ah+\"</object>\";P[P.length]=ak.id;Z=c(ak.id)}else{var ab=E(t);ab.setAttribute(\"type\",s);for(var ae in ak){if(ak[ae]!=Object.prototype[ae]){if(ae.toLowerCase()==\"styleclass\"){ab.setAttribute(\"class\",ak[ae])}else{if(ae.toLowerCase()!=\"classid\"){ab.setAttribute(ae,ak[ae])}}}}for(var ad in ai){if(ai[ad]!=Object.prototype[ad]&&ad.toLowerCase()!=\"movie\"){e(ab,ad,ai[ad])}}ac.parentNode.replaceChild(ab,ac);Z=ab}}return Z}function e(ab,Z,aa){var ac=E(\"param\");ac.setAttribute(\"name\",Z);ac.setAttribute(\"value\",aa);ab.appendChild(ac)}function A(aa){var Z=c(aa);if(Z&&Z.nodeName==\"OBJECT\"){if(O.ie&&O.win){Z.style.display=\"none\";(function(){if(Z.readyState==4){b(aa)}else{setTimeout(arguments.callee,10)}})()}else{Z.parentNode.removeChild(Z)}}}function b(ab){var aa=c(ab);if(aa){for(var Z in aa){if(typeof aa[Z]==\"function\"){aa[Z]=null}}aa.parentNode.removeChild(aa)}}function c(ab){var Z=null;try{Z=l.getElementById(ab)}catch(aa){}return Z}function E(Z){return l.createElement(Z)}function k(ab,Z,aa){ab.attachEvent(Z,aa);K[K.length]=[ab,Z,aa]}function H(ab){var aa=O.pv,Z=ab.split(\".\");Z[0]=parseInt(Z[0],10);Z[1]=parseInt(Z[1],10)||0;Z[2]=parseInt(Z[2],10)||0;return(aa[0]>Z[0]||(aa[0]==Z[0]&&aa[1]>Z[1])||(aa[0]==Z[0]&&aa[1]==Z[1]&&aa[2]>=Z[2]))?true:false}function x(ae,aa,af,ad){if(O.ie&&O.mac){return}var ac=l.getElementsByTagName(\"head\")[0];if(!ac){return}var Z=(af&&typeof af==\"string\")?af:\"screen\";if(ad){p=null;I=null}if(!p||I!=Z){var ab=E(\"style\");ab.setAttribute(\"type\",\"text/css\");ab.setAttribute(\"media\",Z);p=ac.appendChild(ab);if(O.ie&&O.win&&typeof l.styleSheets!=F&&l.styleSheets.length>0){p=l.styleSheets[l.styleSheets.length-1]}I=Z}if(O.ie&&O.win){if(p&&typeof p.addRule==t){p.addRule(ae,aa)}}else{if(p&&typeof l.createTextNode!=F){p.appendChild(l.createTextNode(ae+\" {\"+aa+\"}\"))}}}function y(ab,Z){if(!o){return}var aa=Z?\"visible\":\"hidden\";if(L&&c(ab)){c(ab).style.visibility=aa}else{x(\"#\"+ab,\"visibility:\"+aa)}}function N(aa){var ab=/[\\\\\\\"<>\\.;]/;var Z=ab.exec(aa)!=null;return Z&&typeof encodeURIComponent!=F?encodeURIComponent(aa):aa}var d=function(){if(O.ie&&O.win){window.attachEvent(\"onunload\",function(){var ae=K.length;for(var ad=0;ad<ae;ad++){K[ad][0].detachEvent(K[ad][1],K[ad][2])}var ab=P.length;for(var ac=0;ac<ab;ac++){A(P[ac])}for(var aa in O){O[aa]=null}O=null;for(var Z in swfobject){swfobject[Z]=null}swfobject=null})}}();return{registerObject:function(ad,Z,ac,ab){if(O.w3&&ad&&Z){var aa={};aa.id=ad;aa.swfVersion=Z;aa.expressInstall=ac;aa.callbackFn=ab;q[q.length]=aa;y(ad,false)}else{if(ab){ab({success:false,id:ad})}}},getObjectById:function(Z){if(O.w3){return B(Z)}},embedSWF:function(ad,aj,ag,ai,aa,ac,ab,af,ah,ae){var Z={success:false,id:aj};if(O.w3&&!(O.wk&&O.wk<312)&&ad&&aj&&ag&&ai&&aa){y(aj,false);M(function(){ag+=\"\";ai+=\"\";var al={};if(ah&&typeof ah===t){for(var an in ah){al[an]=ah[an]}}al.data=ad;al.width=ag;al.height=ai;var ao={};if(af&&typeof af===t){for(var am in af){ao[am]=af[am]}}if(ab&&typeof ab===t){for(var ak in ab){if(typeof ao.flashvars!=F){ao.flashvars+=\"&\"+ak+\"=\"+ab[ak]}else{ao.flashvars=ak+\"=\"+ab[ak]}}}if(H(aa)){var ap=w(al,ao,aj);if(al.id==aj){y(aj,true)}Z.success=true;Z.ref=ap}else{if(ac&&C()){al.data=ac;R(al,ao,aj,ae);return}else{y(aj,true)}}if(ae){ae(Z)}})}else{if(ae){ae(Z)}}},switchOffAutoHideShow:function(){o=false},ua:O,getFlashPlayerVersion:function(){return{major:O.pv[0],minor:O.pv[1],release:O.pv[2]}},hasFlashPlayerVersion:H,createSWF:function(ab,aa,Z){if(O.w3){return w(ab,aa,Z)}else{return undefined}},showExpressInstall:function(ab,ac,Z,aa){if(O.w3&&C()){R(ab,ac,Z,aa)}},removeSWF:function(Z){if(O.w3){A(Z)}},createCSS:function(ac,ab,aa,Z){if(O.w3){x(ac,ab,aa,Z)}},addDomLoadEvent:M,addLoadEvent:u,getQueryParamValue:function(ac){var ab=l.location.search||l.location.hash;if(ab){if(/\\?/.test(ab)){ab=ab.split(\"?\")[1]}if(ac==null){return N(ab)}var aa=ab.split(\"&\");for(var Z=0;Z<aa.length;Z++){if(aa[Z].substring(0,aa[Z].indexOf(\"=\"))==ac){return N(aa[Z].substring((aa[Z].indexOf(\"=\")+1)))}}}return\"\"},expressInstallCallback:function(){if(a){var Z=c(T);if(Z&&n){Z.parentNode.replaceChild(n,Z);if(S){y(S,true);if(O.ie&&O.win){n.style.display=\"block\"}}if(G){G(D)}}a=false}}}}();Ext.FlashComponent=Ext.extend(Ext.BoxComponent,{flashVersion:\"9.0.115\",backgroundColor:\"#ffffff\",wmode:\"opaque\",flashVars:undefined,flashParams:undefined,url:undefined,swfId:undefined,swfWidth:\"100%\",swfHeight:\"100%\",expressInstall:false,initComponent:function(){Ext.FlashComponent.superclass.initComponent.call(this);this.addEvents(\"initialize\")},onRender:function(){Ext.FlashComponent.superclass.onRender.apply(this,arguments);var b=Ext.apply({allowScriptAccess:\"always\",bgcolor:this.backgroundColor,wmode:this.wmode},this.flashParams),a=Ext.apply({allowedDomain:document.location.hostname,YUISwfId:this.getId(),YUIBridgeCallback:\"Ext.FlashEventProxy.onEvent\"},this.flashVars);new swfobject.embedSWF(this.url,this.id,this.swfWidth,this.swfHeight,this.flashVersion,this.expressInstall?Ext.FlashComponent.EXPRESS_INSTALL_URL:undefined,a,b);this.swf=Ext.getDom(this.id);this.el=Ext.get(this.swf)},getSwfId:function(){return this.swfId||(this.swfId=\"extswf\"+(++Ext.Component.AUTO_ID))},getId:function(){return this.id||(this.id=\"extflashcmp\"+(++Ext.Component.AUTO_ID))},onFlashEvent:function(a){switch(a.type){case\"swfReady\":this.initSwf();return;case\"log\":return}a.component=this;this.fireEvent(a.type.toLowerCase().replace(/event$/,\"\"),a)},initSwf:function(){this.onSwfReady(!!this.isInitialized);this.isInitialized=true;this.fireEvent(\"initialize\",this)},beforeDestroy:function(){if(this.rendered){swfobject.removeSWF(this.swf.id)}Ext.FlashComponent.superclass.beforeDestroy.call(this)},onSwfReady:Ext.emptyFn});Ext.FlashComponent.EXPRESS_INSTALL_URL=\"http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf\";Ext.reg(\"flash\",Ext.FlashComponent);Ext.FlashEventProxy={onEvent:function(c,b){var a=Ext.getCmp(c);if(a){a.onFlashEvent(b)}else{arguments.callee.defer(10,this,[c,b])}}};Ext.chart.Chart=Ext.extend(Ext.FlashComponent,{refreshBuffer:100,chartStyle:{padding:10,animationEnabled:true,font:{name:\"Tahoma\",color:4473924,size:11},dataTip:{padding:5,border:{color:10075112,size:1},background:{color:14346230,alpha:0.9},font:{name:\"Tahoma\",color:1393291,size:10,bold:true}}},extraStyle:null,seriesStyles:null,disableCaching:Ext.isIE||Ext.isOpera,disableCacheParam:\"_dc\",initComponent:function(){Ext.chart.Chart.superclass.initComponent.call(this);if(!this.url){this.url=Ext.chart.Chart.CHART_URL}if(this.disableCaching){this.url=Ext.urlAppend(this.url,String.format(\"{0}={1}\",this.disableCacheParam,new Date().getTime()))}this.addEvents(\"itemmouseover\",\"itemmouseout\",\"itemclick\",\"itemdoubleclick\",\"itemdragstart\",\"itemdrag\",\"itemdragend\",\"beforerefresh\",\"refresh\");this.store=Ext.StoreMgr.lookup(this.store)},setStyle:function(a,b){this.swf.setStyle(a,Ext.encode(b))},setStyles:function(a){this.swf.setStyles(Ext.encode(a))},setSeriesStyles:function(b){this.seriesStyles=b;var a=[];Ext.each(b,function(c){a.push(Ext.encode(c))});this.swf.setSeriesStyles(a)},setCategoryNames:function(a){this.swf.setCategoryNames(a)},setLegendRenderer:function(c,b){var a=this;b=b||a;a.removeFnProxy(a.legendFnName);a.legendFnName=a.createFnProxy(function(d){return c.call(b,d)});a.swf.setLegendLabelFunction(a.legendFnName)},setTipRenderer:function(c,b){var a=this;b=b||a;a.removeFnProxy(a.tipFnName);a.tipFnName=a.createFnProxy(function(h,e,g){var d=a.store.getAt(e);return c.call(b,a,d,e,g)});a.swf.setDataTipFunction(a.tipFnName)},setSeries:function(a){this.series=a;this.refresh()},bindStore:function(a,b){if(!b&&this.store){if(a!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un(\"datachanged\",this.refresh,this);this.store.un(\"add\",this.delayRefresh,this);this.store.un(\"remove\",this.delayRefresh,this);this.store.un(\"update\",this.delayRefresh,this);this.store.un(\"clear\",this.refresh,this)}}if(a){a=Ext.StoreMgr.lookup(a);a.on({scope:this,datachanged:this.refresh,add:this.delayRefresh,remove:this.delayRefresh,update:this.delayRefresh,clear:this.refresh})}this.store=a;if(a&&!b){this.refresh()}},onSwfReady:function(b){Ext.chart.Chart.superclass.onSwfReady.call(this,b);var a;this.swf.setType(this.type);if(this.chartStyle){this.setStyles(Ext.apply({},this.extraStyle,this.chartStyle))}if(this.categoryNames){this.setCategoryNames(this.categoryNames)}if(this.tipRenderer){a=this.getFunctionRef(this.tipRenderer);this.setTipRenderer(a.fn,a.scope)}if(this.legendRenderer){a=this.getFunctionRef(this.legendRenderer);this.setLegendRenderer(a.fn,a.scope)}if(!b){this.bindStore(this.store,true)}this.refresh.defer(10,this)},delayRefresh:function(){if(!this.refreshTask){this.refreshTask=new Ext.util.DelayedTask(this.refresh,this)}this.refreshTask.delay(this.refreshBuffer)},refresh:function(){if(this.fireEvent(\"beforerefresh\",this)!==false){var m=false;var k=[],c=this.store.data.items;for(var g=0,l=c.length;g<l;g++){k[g]=c[g].data}var e=[];var d=0;var n=null;var h=0;if(this.series){d=this.series.length;for(h=0;h<d;h++){n=this.series[h];var b={};for(var a in n){if(a==\"style\"&&n.style!==null){b.style=Ext.encode(n.style);m=true}else{b[a]=n[a]}}e.push(b)}}if(d>0){for(h=0;h<d;h++){n=e[h];if(!n.type){n.type=this.type}n.dataProvider=k}}else{e.push({type:this.type,dataProvider:k})}this.swf.setDataProvider(e);if(this.seriesStyles){this.setSeriesStyles(this.seriesStyles)}this.fireEvent(\"refresh\",this)}},createFnProxy:function(a){var b=\"extFnProxy\"+(++Ext.chart.Chart.PROXY_FN_ID);Ext.chart.Chart.proxyFunction[b]=a;return\"Ext.chart.Chart.proxyFunction.\"+b},removeFnProxy:function(a){if(!Ext.isEmpty(a)){a=a.replace(\"Ext.chart.Chart.proxyFunction.\",\"\");delete Ext.chart.Chart.proxyFunction[a]}},getFunctionRef:function(a){if(Ext.isFunction(a)){return{fn:a,scope:this}}else{return{fn:a.fn,scope:a.scope||this}}},onDestroy:function(){if(this.refreshTask&&this.refreshTask.cancel){this.refreshTask.cancel()}Ext.chart.Chart.superclass.onDestroy.call(this);this.bindStore(null);this.removeFnProxy(this.tipFnName);this.removeFnProxy(this.legendFnName)}});Ext.reg(\"chart\",Ext.chart.Chart);Ext.chart.Chart.PROXY_FN_ID=0;Ext.chart.Chart.proxyFunction={};Ext.chart.Chart.CHART_URL=\"http://yui.yahooapis.com/2.8.2/build/charts/assets/charts.swf\";Ext.chart.PieChart=Ext.extend(Ext.chart.Chart,{type:\"pie\",onSwfReady:function(a){Ext.chart.PieChart.superclass.onSwfReady.call(this,a);this.setDataField(this.dataField);this.setCategoryField(this.categoryField)},setDataField:function(a){this.dataField=a;this.swf.setDataField(a)},setCategoryField:function(a){this.categoryField=a;this.swf.setCategoryField(a)}});Ext.reg(\"piechart\",Ext.chart.PieChart);Ext.chart.CartesianChart=Ext.extend(Ext.chart.Chart,{onSwfReady:function(a){Ext.chart.CartesianChart.superclass.onSwfReady.call(this,a);this.labelFn=[];if(this.xField){this.setXField(this.xField)}if(this.yField){this.setYField(this.yField)}if(this.xAxis){this.setXAxis(this.xAxis)}if(this.xAxes){this.setXAxes(this.xAxes)}if(this.yAxis){this.setYAxis(this.yAxis)}if(this.yAxes){this.setYAxes(this.yAxes)}if(Ext.isDefined(this.constrainViewport)){this.swf.setConstrainViewport(this.constrainViewport)}},setXField:function(a){this.xField=a;this.swf.setHorizontalField(a)},setYField:function(a){this.yField=a;this.swf.setVerticalField(a)},setXAxis:function(a){this.xAxis=this.createAxis(\"xAxis\",a);this.swf.setHorizontalAxis(this.xAxis)},setXAxes:function(c){var b;for(var a=0;a<c.length;a++){b=this.createAxis(\"xAxis\"+a,c[a]);this.swf.setHorizontalAxis(b)}},setYAxis:function(a){this.yAxis=this.createAxis(\"yAxis\",a);this.swf.setVerticalAxis(this.yAxis)},setYAxes:function(c){var b;for(var a=0;a<c.length;a++){b=this.createAxis(\"yAxis\"+a,c[a]);this.swf.setVerticalAxis(b)}},createAxis:function(b,d){var e=Ext.apply({},d),c,a;if(this[b]){a=this[b].labelFunction;this.removeFnProxy(a);this.labelFn.remove(a)}if(e.labelRenderer){c=this.getFunctionRef(e.labelRenderer);e.labelFunction=this.createFnProxy(function(g){return c.fn.call(c.scope,g)});delete e.labelRenderer;this.labelFn.push(e.labelFunction)}if(b.indexOf(\"xAxis\")>-1&&e.position==\"left\"){e.position=\"bottom\"}return e},onDestroy:function(){Ext.chart.CartesianChart.superclass.onDestroy.call(this);Ext.each(this.labelFn,function(a){this.removeFnProxy(a)},this)}});Ext.reg(\"cartesianchart\",Ext.chart.CartesianChart);Ext.chart.LineChart=Ext.extend(Ext.chart.CartesianChart,{type:\"line\"});Ext.reg(\"linechart\",Ext.chart.LineChart);Ext.chart.ColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:\"column\"});Ext.reg(\"columnchart\",Ext.chart.ColumnChart);Ext.chart.StackedColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:\"stackcolumn\"});Ext.reg(\"stackedcolumnchart\",Ext.chart.StackedColumnChart);Ext.chart.BarChart=Ext.extend(Ext.chart.CartesianChart,{type:\"bar\"});Ext.reg(\"barchart\",Ext.chart.BarChart);Ext.chart.StackedBarChart=Ext.extend(Ext.chart.CartesianChart,{type:\"stackbar\"});Ext.reg(\"stackedbarchart\",Ext.chart.StackedBarChart);Ext.chart.Axis=function(a){Ext.apply(this,a)};Ext.chart.Axis.prototype={type:null,orientation:\"horizontal\",reverse:false,labelFunction:null,hideOverlappingLabels:true,labelSpacing:2};Ext.chart.NumericAxis=Ext.extend(Ext.chart.Axis,{type:\"numeric\",minimum:NaN,maximum:NaN,majorUnit:NaN,minorUnit:NaN,snapToUnits:true,alwaysShowZero:true,scale:\"linear\",roundMajorUnit:true,calculateByLabelSize:true,position:\"left\",adjustMaximumByMajorUnit:true,adjustMinimumByMajorUnit:true});Ext.chart.TimeAxis=Ext.extend(Ext.chart.Axis,{type:\"time\",minimum:null,maximum:null,majorUnit:NaN,majorTimeUnit:null,minorUnit:NaN,minorTimeUnit:null,snapToUnits:true,stackingEnabled:false,calculateByLabelSize:true});Ext.chart.CategoryAxis=Ext.extend(Ext.chart.Axis,{type:\"category\",categoryNames:null,calculateCategoryCount:false});Ext.chart.Series=function(a){Ext.apply(this,a)};Ext.chart.Series.prototype={type:null,displayName:null};Ext.chart.CartesianSeries=Ext.extend(Ext.chart.Series,{xField:null,yField:null,showInLegend:true,axis:\"primary\"});Ext.chart.ColumnSeries=Ext.extend(Ext.chart.CartesianSeries,{type:\"column\"});Ext.chart.LineSeries=Ext.extend(Ext.chart.CartesianSeries,{type:\"line\"});Ext.chart.BarSeries=Ext.extend(Ext.chart.CartesianSeries,{type:\"bar\"});Ext.chart.PieSeries=Ext.extend(Ext.chart.Series,{type:\"pie\",dataField:null,categoryField:null});Ext.menu.Menu=Ext.extend(Ext.Container,{minWidth:120,shadow:\"sides\",subMenuAlign:\"tl-tr?\",defaultAlign:\"tl-bl?\",allowOtherMenus:false,ignoreParentClicks:false,enableScrolling:true,maxHeight:null,scrollIncrement:24,showSeparator:true,defaultOffsets:[0,0],plain:false,floating:true,zIndex:15000,hidden:true,layout:\"menu\",hideMode:\"offsets\",scrollerHeight:8,autoLayout:true,defaultType:\"menuitem\",bufferResize:false,initComponent:function(){if(Ext.isArray(this.initialConfig)){Ext.apply(this,{items:this.initialConfig})}this.addEvents(\"click\",\"mouseover\",\"mouseout\",\"itemclick\");Ext.menu.MenuMgr.register(this);if(this.floating){Ext.EventManager.onWindowResize(this.hide,this)}else{if(this.initialConfig.hidden!==false){this.hidden=false}this.internalDefaults={hideOnClick:false}}Ext.menu.Menu.superclass.initComponent.call(this);if(this.autoLayout){var a=this.doLayout.createDelegate(this,[]);this.on({add:a,remove:a})}},getLayoutTarget:function(){return this.ul},onRender:function(b,a){if(!b){b=Ext.getBody()}var c={id:this.getId(),cls:\"x-menu \"+((this.floating)?\"x-menu-floating x-layer \":\"\")+(this.cls||\"\")+(this.plain?\" x-menu-plain\":\"\")+(this.showSeparator?\"\":\" x-menu-nosep\"),style:this.style,cn:[{tag:\"a\",cls:\"x-menu-focus\",href:\"#\",onclick:\"return false;\",tabIndex:\"-1\"},{tag:\"ul\",cls:\"x-menu-list\"}]};if(this.floating){this.el=new Ext.Layer({shadow:this.shadow,dh:c,constrain:false,parentEl:b,zindex:this.zIndex})}else{this.el=b.createChild(c)}Ext.menu.Menu.superclass.onRender.call(this,b,a);if(!this.keyNav){this.keyNav=new Ext.menu.MenuNav(this)}this.focusEl=this.el.child(\"a.x-menu-focus\");this.ul=this.el.child(\"ul.x-menu-list\");this.mon(this.ul,{scope:this,click:this.onClick,mouseover:this.onMouseOver,mouseout:this.onMouseOut});if(this.enableScrolling){this.mon(this.el,{scope:this,delegate:\".x-menu-scroller\",click:this.onScroll,mouseover:this.deactivateActive})}},findTargetItem:function(b){var a=b.getTarget(\".x-menu-list-item\",this.ul,true);if(a&&a.menuItemId){return this.items.get(a.menuItemId)}},onClick:function(b){var a=this.findTargetItem(b);if(a){if(a.isFormField){this.setActiveItem(a)}else{if(a instanceof Ext.menu.BaseItem){if(a.menu&&this.ignoreParentClicks){a.expandMenu();b.preventDefault()}else{if(a.onClick){a.onClick(b);this.fireEvent(\"click\",this,a,b)}}}}}},setActiveItem:function(a,b){if(a!=this.activeItem){this.deactivateActive();if((this.activeItem=a).isFormField){a.focus()}else{a.activate(b)}}else{if(b){a.expandMenu()}}},deactivateActive:function(){var b=this.activeItem;if(b){if(b.isFormField){if(b.collapse){b.collapse()}}else{b.deactivate()}delete this.activeItem}},tryActivate:function(g,e){var b=this.items;for(var c=g,a=b.length;c>=0&&c<a;c+=e){var d=b.get(c);if(d.isVisible()&&!d.disabled&&(d.canActivate||d.isFormField)){this.setActiveItem(d,false);return d}}return false},onMouseOver:function(b){var a=this.findTargetItem(b);if(a){if(a.canActivate&&!a.disabled){this.setActiveItem(a,true)}}this.over=true;this.fireEvent(\"mouseover\",this,b,a)},onMouseOut:function(b){var a=this.findTargetItem(b);if(a){if(a==this.activeItem&&a.shouldDeactivate&&a.shouldDeactivate(b)){this.activeItem.deactivate();delete this.activeItem}}this.over=false;this.fireEvent(\"mouseout\",this,b,a)},onScroll:function(d,b){if(d){d.stopEvent()}var a=this.ul.dom,c=Ext.fly(b).is(\".x-menu-scroller-top\");a.scrollTop+=this.scrollIncrement*(c?-1:1);if(c?a.scrollTop<=0:a.scrollTop+this.activeMax>=a.scrollHeight){this.onScrollerOut(null,b)}},onScrollerIn:function(d,b){var a=this.ul.dom,c=Ext.fly(b).is(\".x-menu-scroller-top\");if(c?a.scrollTop>0:a.scrollTop+this.activeMax<a.scrollHeight){Ext.fly(b).addClass([\"x-menu-item-active\",\"x-menu-scroller-active\"])}},onScrollerOut:function(b,a){Ext.fly(a).removeClass([\"x-menu-item-active\",\"x-menu-scroller-active\"])},show:function(b,c,a){if(this.floating){this.parentMenu=a;if(!this.el){this.render();this.doLayout(false,true)}this.showAt(this.el.getAlignToXY(b,c||this.defaultAlign,this.defaultOffsets),a)}else{Ext.menu.Menu.superclass.show.call(this)}},showAt:function(b,a){if(this.fireEvent(\"beforeshow\",this)!==false){this.parentMenu=a;if(!this.el){this.render()}if(this.enableScrolling){this.el.setXY(b);b[1]=this.constrainScroll(b[1]);b=[this.el.adjustForConstraints(b)[0],b[1]]}else{b=this.el.adjustForConstraints(b)}this.el.setXY(b);this.el.show();Ext.menu.Menu.superclass.onShow.call(this);if(Ext.isIE){this.fireEvent(\"autosize\",this);if(!Ext.isIE8){this.el.repaint()}}this.hidden=false;this.focus();this.fireEvent(\"show\",this)}},constrainScroll:function(i){var b,d=this.ul.setHeight(\"auto\").getHeight(),a=i,h,e,g,c;if(this.floating){e=Ext.fly(this.el.dom.parentNode);g=e.getScroll().top;c=e.getViewSize().height;h=i-g;b=this.maxHeight?this.maxHeight:c-h;if(d>c){b=c;a=i-h}else{if(b<d){a=i-(d-b);b=d}}}else{b=this.getHeight()}if(this.maxHeight){b=Math.min(this.maxHeight,b)}if(d>b&&b>0){this.activeMax=b-this.scrollerHeight*2-this.el.getFrameWidth(\"tb\")-Ext.num(this.el.shadowOffset,0);this.ul.setHeight(this.activeMax);this.createScrollers();this.el.select(\".x-menu-scroller\").setDisplayed(\"\")}else{this.ul.setHeight(d);this.el.select(\".x-menu-scroller\").setDisplayed(\"none\")}this.ul.dom.scrollTop=0;return a},createScrollers:function(){if(!this.scroller){this.scroller={pos:0,top:this.el.insertFirst({tag:\"div\",cls:\"x-menu-scroller x-menu-scroller-top\",html:\"&#160;\"}),bottom:this.el.createChild({tag:\"div\",cls:\"x-menu-scroller x-menu-scroller-bottom\",html:\"&#160;\"})};this.scroller.top.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.topRepeater=new Ext.util.ClickRepeater(this.scroller.top,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.top],false)}});this.scroller.bottom.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.bottomRepeater=new Ext.util.ClickRepeater(this.scroller.bottom,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.bottom],false)}})}},onLayout:function(){if(this.isVisible()){if(this.enableScrolling){this.constrainScroll(this.el.getTop())}if(this.floating){this.el.sync()}}},focus:function(){if(!this.hidden){this.doFocus.defer(50,this)}},doFocus:function(){if(!this.hidden){this.focusEl.focus()}},hide:function(a){if(!this.isDestroyed){this.deepHide=a;Ext.menu.Menu.superclass.hide.call(this);delete this.deepHide}},onHide:function(){Ext.menu.Menu.superclass.onHide.call(this);this.deactivateActive();if(this.el&&this.floating){this.el.hide()}var a=this.parentMenu;if(this.deepHide===true&&a){if(a.floating){a.hide(true)}else{a.deactivateActive()}}},lookupComponent:function(a){if(Ext.isString(a)){a=(a==\"separator\"||a==\"-\")?new Ext.menu.Separator():new Ext.menu.TextItem(a);this.applyDefaults(a)}else{if(Ext.isObject(a)){a=this.getMenuItem(a)}else{if(a.tagName||a.el){a=new Ext.BoxComponent({el:a})}}}return a},applyDefaults:function(b){if(!Ext.isString(b)){b=Ext.menu.Menu.superclass.applyDefaults.call(this,b);var a=this.internalDefaults;if(a){if(b.events){Ext.applyIf(b.initialConfig,a);Ext.apply(b,a)}else{Ext.applyIf(b,a)}}}return b},getMenuItem:function(a){if(!a.isXType){if(!a.xtype&&Ext.isBoolean(a.checked)){return new Ext.menu.CheckItem(a)}return Ext.create(a,this.defaultType)}return a},addSeparator:function(){return this.add(new Ext.menu.Separator())},addElement:function(a){return this.add(new Ext.menu.BaseItem({el:a}))},addItem:function(a){return this.add(a)},addMenuItem:function(a){return this.add(this.getMenuItem(a))},addText:function(a){return this.add(new Ext.menu.TextItem(a))},onDestroy:function(){Ext.EventManager.removeResizeListener(this.hide,this);var a=this.parentMenu;if(a&&a.activeChild==this){delete a.activeChild}delete this.parentMenu;Ext.menu.Menu.superclass.onDestroy.call(this);Ext.menu.MenuMgr.unregister(this);if(this.keyNav){this.keyNav.disable()}var b=this.scroller;if(b){Ext.destroy(b.topRepeater,b.bottomRepeater,b.top,b.bottom)}Ext.destroy(this.el,this.focusEl,this.ul)}});Ext.reg(\"menu\",Ext.menu.Menu);Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function a(d,c){if(!c.tryActivate(c.items.indexOf(c.activeItem)-1,-1)){c.tryActivate(c.items.length-1,-1)}}function b(d,c){if(!c.tryActivate(c.items.indexOf(c.activeItem)+1,1)){c.tryActivate(0,1)}}return{constructor:function(c){Ext.menu.MenuNav.superclass.constructor.call(this,c.el);this.scope=this.menu=c},doRelay:function(g,d){var c=g.getKey();if(this.menu.activeItem&&this.menu.activeItem.isFormField&&c!=g.TAB){return false}if(!this.menu.activeItem&&g.isNavKeyPress()&&c!=g.SPACE&&c!=g.RETURN){this.menu.tryActivate(0,1);return false}return d.call(this.scope||this,g,this.menu)},tab:function(d,c){d.stopEvent();if(d.shiftKey){a(d,c)}else{b(d,c)}},up:a,down:b,right:function(d,c){if(c.activeItem){c.activeItem.expandMenu(true)}},left:function(d,c){c.hide();if(c.parentMenu&&c.parentMenu.activeItem){c.parentMenu.activeItem.activate()}},enter:function(d,c){if(c.activeItem){d.stopPropagation();c.activeItem.onClick(d);c.fireEvent(\"click\",this,c.activeItem);return true}}}}());Ext.menu.MenuMgr=function(){var g,d,c={},a=false,l=new Date();function n(){g={};d=new Ext.util.MixedCollection();Ext.getDoc().addKeyListener(27,function(){if(d.length>0){i()}})}function i(){if(d&&d.length>0){var o=d.clone();o.each(function(p){p.hide()});return true}return false}function e(o){d.remove(o);if(d.length<1){Ext.getDoc().un(\"mousedown\",m);a=false}}function k(o){var p=d.last();l=new Date();d.add(o);if(!a){Ext.getDoc().on(\"mousedown\",m);a=true}if(o.parentMenu){o.getEl().setZIndex(parseInt(o.parentMenu.getEl().getStyle(\"z-index\"),10)+3);o.parentMenu.activeChild=o}else{if(p&&!p.isDestroyed&&p.isVisible()){o.getEl().setZIndex(parseInt(p.getEl().getStyle(\"z-index\"),10)+3)}}}function b(o){if(o.activeChild){o.activeChild.hide()}if(o.autoHideTimer){clearTimeout(o.autoHideTimer);delete o.autoHideTimer}}function h(o){var p=o.parentMenu;if(!p&&!o.allowOtherMenus){i()}else{if(p&&p.activeChild){p.activeChild.hide()}}}function m(o){if(l.getElapsed()>50&&d.length>0&&!o.getTarget(\".x-menu\")){i()}}return{hideAll:function(){return i()},register:function(o){if(!g){n()}g[o.id]=o;o.on({beforehide:b,hide:e,beforeshow:h,show:k})},get:function(o){if(typeof o==\"string\"){if(!g){return null}return g[o]}else{if(o.events){return o}else{if(typeof o.length==\"number\"){return new Ext.menu.Menu({items:o})}else{return Ext.create(o,\"menu\")}}}},unregister:function(o){delete g[o.id];o.un(\"beforehide\",b);o.un(\"hide\",e);o.un(\"beforeshow\",h);o.un(\"show\",k)},registerCheckable:function(o){var p=o.group;if(p){if(!c[p]){c[p]=[]}c[p].push(o)}},unregisterCheckable:function(o){var p=o.group;if(p){c[p].remove(o)}},onCheckChange:function(q,r){if(q.group&&r){var t=c[q.group],p=0,o=t.length,s;for(;p<o;p++){s=t[p];if(s!=q){s.setChecked(false)}}}},getCheckedItem:function(q){var r=c[q];if(r){for(var p=0,o=r.length;p<o;p++){if(r[p].checked){return r[p]}}}return null},setCheckedItem:function(q,s){var r=c[q];if(r){for(var p=0,o=r.length;p<o;p++){if(r[p].id==s){r[p].setChecked(true)}}}return null}}}();Ext.menu.BaseItem=Ext.extend(Ext.Component,{canActivate:false,activeClass:\"x-menu-item-active\",hideOnClick:true,clickHideDelay:1,ctype:\"Ext.menu.BaseItem\",actionMode:\"container\",initComponent:function(){Ext.menu.BaseItem.superclass.initComponent.call(this);this.addEvents(\"click\",\"activate\",\"deactivate\");if(this.handler){this.on(\"click\",this.handler,this.scope)}},onRender:function(b,a){Ext.menu.BaseItem.superclass.onRender.apply(this,arguments);if(this.ownerCt&&this.ownerCt instanceof Ext.menu.Menu){this.parentMenu=this.ownerCt}else{this.container.addClass(\"x-menu-list-item\");this.mon(this.el,{scope:this,click:this.onClick,mouseenter:this.activate,mouseleave:this.deactivate})}},setHandler:function(b,a){if(this.handler){this.un(\"click\",this.handler,this.scope)}this.on(\"click\",this.handler=b,this.scope=a)},onClick:function(a){if(!this.disabled&&this.fireEvent(\"click\",this,a)!==false&&(this.parentMenu&&this.parentMenu.fireEvent(\"itemclick\",this,a)!==false)){this.handleClick(a)}else{a.stopEvent()}},activate:function(){if(this.disabled){return false}var a=this.container;a.addClass(this.activeClass);this.region=a.getRegion().adjust(2,2,-2,-2);this.fireEvent(\"activate\",this);return true},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent(\"deactivate\",this)},shouldDeactivate:function(a){return !this.region||!this.region.contains(a.getPoint())},handleClick:function(b){var a=this.parentMenu;if(this.hideOnClick){if(a.floating){a.hide.defer(this.clickHideDelay,a,[true])}else{a.deactivateActive()}}},expandMenu:Ext.emptyFn,hideMenu:Ext.emptyFn});Ext.reg(\"menubaseitem\",Ext.menu.BaseItem);Ext.menu.TextItem=Ext.extend(Ext.menu.BaseItem,{hideOnClick:false,itemCls:\"x-menu-text\",constructor:function(a){if(typeof a==\"string\"){a={text:a}}Ext.menu.TextItem.superclass.constructor.call(this,a)},onRender:function(){var a=document.createElement(\"span\");a.className=this.itemCls;a.innerHTML=this.text;this.el=a;Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}});Ext.reg(\"menutextitem\",Ext.menu.TextItem);Ext.menu.Separator=Ext.extend(Ext.menu.BaseItem,{itemCls:\"x-menu-sep\",hideOnClick:false,activeClass:\"\",onRender:function(a){var b=document.createElement(\"span\");b.className=this.itemCls;b.innerHTML=\"&#160;\";this.el=b;a.addClass(\"x-menu-sep-li\");Ext.menu.Separator.superclass.onRender.apply(this,arguments)}});Ext.reg(\"menuseparator\",Ext.menu.Separator);Ext.menu.Item=Ext.extend(Ext.menu.BaseItem,{itemCls:\"x-menu-item\",canActivate:true,showDelay:200,altText:\"\",hideDelay:200,ctype:\"Ext.menu.Item\",initComponent:function(){Ext.menu.Item.superclass.initComponent.call(this);if(this.menu){this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=this}},onRender:function(d,b){if(!this.itemTpl){this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id=\"{id}\" class=\"{cls}\" hidefocus=\"true\" unselectable=\"on\" href=\"{href}\"','<tpl if=\"hrefTarget\">',' target=\"{hrefTarget}\"',\"</tpl>\",\">\",'<img alt=\"{altText}\" src=\"{icon}\" class=\"x-menu-item-icon {iconCls}\"/>','<span class=\"x-menu-item-text\">{text}</span>',\"</a>\")}var c=this.getTemplateArgs();this.el=b?this.itemTpl.insertBefore(b,c,true):this.itemTpl.append(d,c,true);this.iconEl=this.el.child(\"img.x-menu-item-icon\");this.textEl=this.el.child(\".x-menu-item-text\");if(!this.href){this.mon(this.el,\"click\",Ext.emptyFn,null,{preventDefault:true})}Ext.menu.Item.superclass.onRender.call(this,d,b)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?\" x-menu-item-arrow\":\"\")+(this.cls?\" \"+this.cls:\"\"),href:this.href||\"#\",hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||\"\",text:this.itemText||this.text||\"&#160;\",altText:this.altText||\"\"}},setText:function(a){this.text=a||\"&#160;\";if(this.rendered){this.textEl.update(this.text);this.parentMenu.layout.doAutoSize()}},setIconClass:function(a){var b=this.iconCls;this.iconCls=a;if(this.rendered){this.iconEl.replaceClass(b,this.iconCls)}},beforeDestroy:function(){if(this.menu){delete this.menu.ownerCt;this.menu.destroy()}Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(a){if(!this.href){a.stopEvent()}Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(a){if(Ext.menu.Item.superclass.activate.apply(this,arguments)){this.focus();if(a){this.expandMenu()}}return true},shouldDeactivate:function(a){if(Ext.menu.Item.superclass.shouldDeactivate.call(this,a)){if(this.menu&&this.menu.isVisible()){return !this.menu.getEl().getRegion().contains(a.getPoint())}return true}return false},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu()},expandMenu:function(a){if(!this.disabled&&this.menu){clearTimeout(this.hideTimer);delete this.hideTimer;if(!this.menu.isVisible()&&!this.showTimer){this.showTimer=this.deferExpand.defer(this.showDelay,this,[a])}else{if(this.menu.isVisible()&&a){this.menu.tryActivate(0,1)}}}},deferExpand:function(a){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||\"tl-tr?\",this.parentMenu);if(a){this.menu.tryActivate(0,1)}},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;if(!this.hideTimer&&this.menu&&this.menu.isVisible()){this.hideTimer=this.deferHide.defer(this.hideDelay,this)}},deferHide:function(){delete this.hideTimer;if(this.menu.over){this.parentMenu.setActiveItem(this,false)}else{this.menu.hide()}}});Ext.reg(\"menuitem\",Ext.menu.Item);Ext.menu.CheckItem=Ext.extend(Ext.menu.Item,{itemCls:\"x-menu-item x-menu-check-item\",groupClass:\"x-menu-group-item\",checked:false,ctype:\"Ext.menu.CheckItem\",initComponent:function(){Ext.menu.CheckItem.superclass.initComponent.call(this);this.addEvents(\"beforecheckchange\",\"checkchange\");if(this.checkHandler){this.on(\"checkchange\",this.checkHandler,this.scope)}Ext.menu.MenuMgr.registerCheckable(this)},onRender:function(a){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments);if(this.group){this.el.addClass(this.groupClass)}if(this.checked){this.checked=false;this.setChecked(true,true)}},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this);Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(b,a){var c=a===true;if(this.checked!=b&&(c||this.fireEvent(\"beforecheckchange\",this,b)!==false)){Ext.menu.MenuMgr.onCheckChange(this,b);if(this.container){this.container[b?\"addClass\":\"removeClass\"](\"x-menu-item-checked\")}this.checked=b;if(!c){this.fireEvent(\"checkchange\",this,b)}}},handleClick:function(a){if(!this.disabled&&!(this.checked&&this.group)){this.setChecked(!this.checked)}Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}});Ext.reg(\"menucheckitem\",Ext.menu.CheckItem);Ext.menu.DateMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:false,hideOnClick:true,pickerId:null,cls:\"x-date-menu\",initComponent:function(){this.on(\"beforeshow\",this.onBeforeShow,this);if(this.strict=(Ext.isIE7&&Ext.isStrict)){this.on(\"show\",this.onShow,this,{single:true,delay:20})}Ext.apply(this,{plain:true,showSeparator:false,items:this.picker=new Ext.DatePicker(Ext.applyIf({internalRender:this.strict||!Ext.isIE,ctCls:\"x-menu-date-item\",id:this.pickerId},this.initialConfig))});this.picker.purgeListeners();Ext.menu.DateMenu.superclass.initComponent.call(this);this.relayEvents(this.picker,[\"select\"]);this.on(\"show\",this.picker.focus,this.picker);this.on(\"select\",this.menuHide,this);if(this.handler){this.on(\"select\",this.handler,this.scope||this)}},menuHide:function(){if(this.hideOnClick){this.hide(true)}},onBeforeShow:function(){if(this.picker){this.picker.hideMonthPicker(true)}},onShow:function(){var a=this.picker.getEl();a.setWidth(a.getWidth())}});Ext.reg(\"datemenu\",Ext.menu.DateMenu);Ext.menu.ColorMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:false,hideOnClick:true,cls:\"x-color-menu\",paletteId:null,initComponent:function(){Ext.apply(this,{plain:true,showSeparator:false,items:this.palette=new Ext.ColorPalette(Ext.applyIf({id:this.paletteId},this.initialConfig))});this.palette.purgeListeners();Ext.menu.ColorMenu.superclass.initComponent.call(this);this.relayEvents(this.palette,[\"select\"]);this.on(\"select\",this.menuHide,this);if(this.handler){this.on(\"select\",this.handler,this.scope||this)}},menuHide:function(){if(this.hideOnClick){this.hide(true)}}});Ext.reg(\"colormenu\",Ext.menu.ColorMenu);Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:\"x-form-invalid\",invalidText:\"The value in this field is invalid\",focusClass:\"x-form-focus\",validationEvent:\"keyup\",validateOnBlur:true,validationDelay:250,defaultAutoCreate:{tag:\"input\",type:\"text\",size:\"20\",autocomplete:\"off\"},fieldClass:\"x-form-field\",msgTarget:\"qtip\",msgFx:\"normal\",readOnly:false,disabled:false,submitValue:true,isFormField:true,msgDisplay:\"\",hasFocus:false,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents(\"focus\",\"blur\",\"specialkey\",\"change\",\"invalid\",\"valid\")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||\"\"},onRender:function(c,a){if(!this.el){var b=this.getAutoCreate();if(!b.name){b.name=this.name||this.id}if(this.inputType){b.type=this.inputType}this.autoEl=b}Ext.form.Field.superclass.onRender.call(this,c,a);if(this.submitValue===false){this.el.dom.removeAttribute(\"name\")}var d=this.el.dom.type;if(d){if(d==\"password\"){d=\"text\"}this.el.addClass(\"x-form-\"+d)}if(this.readOnly){this.setReadOnly(true)}if(this.tabIndex!==undefined){this.el.dom.setAttribute(\"tabIndex\",this.tabIndex)}this.el.addClass([this.fieldClass,this.cls])},getItemCt:function(){return this.itemCt},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{if(!Ext.isEmpty(this.el.dom.value)&&this.el.dom.value!=this.emptyText){this.setValue(this.el.dom.value)}}this.originalValue=this.getValue()},isDirty:function(){if(this.disabled||!this.rendered){return false}return String(this.getValue())!==String(this.originalValue)},setReadOnly:function(a){if(this.rendered){this.el.dom.readOnly=a}this.readOnly=a},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents();this.initValue()},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent(\"specialkey\",this,a)}},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this);this.mon(this.el,\"focus\",this.onFocus,this);this.mon(this.el,\"blur\",this.onBlur,this,this.inEditor?{buffer:10}:null)},preFocus:Ext.emptyFn,onFocus:function(){this.preFocus();if(this.focusClass){this.el.addClass(this.focusClass)}if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent(\"focus\",this)}},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();if(this.focusClass){this.el.removeClass(this.focusClass)}this.hasFocus=false;if(this.validationEvent!==false&&(this.validateOnBlur||this.validationEvent==\"blur\")){this.validate()}var a=this.getValue();if(String(a)!==String(this.startValue)){this.fireEvent(\"change\",this,a,this.startValue)}this.fireEvent(\"blur\",this);this.postBlur()},postBlur:Ext.emptyFn,isValid:function(a){if(this.disabled){return true}var c=this.preventMark;this.preventMark=a===true;var b=this.validateValue(this.processValue(this.getRawValue()));this.preventMark=c;return b},validate:function(){if(this.disabled||this.validateValue(this.processValue(this.getRawValue()))){this.clearInvalid();return true}return false},processValue:function(a){return a},validateValue:function(b){var a=this.getErrors(b)[0];if(a==undefined){return true}else{this.markInvalid(a);return false}},getErrors:function(){return[]},getActiveError:function(){return this.activeError||\"\"},markInvalid:function(c){if(this.rendered&&!this.preventMark){c=c||this.invalidText;var a=this.getMessageHandler();if(a){a.mark(this,c)}else{if(this.msgTarget){this.el.addClass(this.invalidClass);var b=Ext.getDom(this.msgTarget);if(b){b.innerHTML=c;b.style.display=this.msgDisplay}}}}this.setActiveError(c)},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.el.removeClass(this.invalidClass);var a=this.getMessageHandler();if(a){a.clear(this)}else{if(this.msgTarget){this.el.removeClass(this.invalidClass);var b=Ext.getDom(this.msgTarget);if(b){b.innerHTML=\"\";b.style.display=\"none\"}}}}this.unsetActiveError()},setActiveError:function(b,a){this.activeError=b;if(a!==true){this.fireEvent(\"invalid\",this,b)}},unsetActiveError:function(a){delete this.activeError;if(a!==true){this.fireEvent(\"valid\",this)}},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget]},getErrorCt:function(){return this.el.findParent(\".x-form-element\",5,true)||this.el.findParent(\".x-form-field-wrap\",5,true)},alignErrorEl:function(){this.errorEl.setWidth(this.getErrorCt().getWidth(true)-20)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,\"tl-tr\",[2,0])},getRawValue:function(){var a=this.rendered?this.el.getValue():Ext.value(this.value,\"\");if(a===this.emptyText){a=\"\"}return a},getValue:function(){if(!this.rendered){return this.value}var a=this.el.getValue();if(a===this.emptyText||a===undefined){a=\"\"}return a},setRawValue:function(a){return this.rendered?(this.el.dom.value=(Ext.isEmpty(a)?\"\":a)):\"\"},setValue:function(a){this.value=a;if(this.rendered){this.el.dom.value=(Ext.isEmpty(a)?\"\":a);this.validate()}return this},append:function(a){this.setValue([this.getValue(),a].join(\"\"))}});Ext.form.MessageTargets={qtip:{mark:function(a,b){a.el.addClass(a.invalidClass);a.el.dom.qtip=b;a.el.dom.qclass=\"x-form-invalid-tip\";if(Ext.QuickTips){Ext.QuickTips.enable()}},clear:function(a){a.el.removeClass(a.invalidClass);a.el.dom.qtip=\"\"}},title:{mark:function(a,b){a.el.addClass(a.invalidClass);a.el.dom.title=b},clear:function(a){a.el.dom.title=\"\"}},under:{mark:function(b,c){b.el.addClass(b.invalidClass);if(!b.errorEl){var a=b.getErrorCt();if(!a){b.el.dom.title=c;return}b.errorEl=a.createChild({cls:\"x-form-invalid-msg\"});b.on(\"resize\",b.alignErrorEl,b);b.on(\"destroy\",function(){Ext.destroy(this.errorEl)},b)}b.alignErrorEl();b.errorEl.update(c);Ext.form.Field.msgFx[b.msgFx].show(b.errorEl,b)},clear:function(a){a.el.removeClass(a.invalidClass);if(a.errorEl){Ext.form.Field.msgFx[a.msgFx].hide(a.errorEl,a)}else{a.el.dom.title=\"\"}}},side:{mark:function(b,c){b.el.addClass(b.invalidClass);if(!b.errorIcon){var a=b.getErrorCt();if(!a){b.el.dom.title=c;return}b.errorIcon=a.createChild({cls:\"x-form-invalid-icon\"});if(b.ownerCt){b.ownerCt.on(\"afterlayout\",b.alignErrorIcon,b);b.ownerCt.on(\"expand\",b.alignErrorIcon,b)}b.on(\"resize\",b.alignErrorIcon,b);b.on(\"destroy\",function(){Ext.destroy(this.errorIcon)},b)}b.alignErrorIcon();b.errorIcon.dom.qtip=c;b.errorIcon.dom.qclass=\"x-form-invalid-tip\";b.errorIcon.show()},clear:function(a){a.el.removeClass(a.invalidClass);if(a.errorIcon){a.errorIcon.dom.qtip=\"\";a.errorIcon.hide()}else{a.el.dom.title=\"\"}}}};Ext.form.Field.msgFx={normal:{show:function(a,b){a.setDisplayed(\"block\")},hide:function(a,b){a.setDisplayed(false).update(\"\")}},slide:{show:function(a,b){a.slideIn(\"t\",{stopFx:true})},hide:function(a,b){a.slideOut(\"t\",{stopFx:true,useDisplay:true})}},slideRight:{show:function(a,b){a.fixDisplay();a.alignTo(b.el,\"tl-tr\");a.slideIn(\"l\",{stopFx:true})},hide:function(a,b){a.slideOut(\"l\",{stopFx:true,useDisplay:true})}}};Ext.reg(\"field\",Ext.form.Field);Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:false,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:false,allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:\"The minimum length for this field is {0}\",maxLengthText:\"The maximum length for this field is {0}\",selectOnFocus:false,blankText:\"This field is required\",validator:null,regex:null,regexText:\"\",emptyText:null,emptyClass:\"x-form-empty-field\",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents(\"autosize\",\"keydown\",\"keyup\",\"keypress\")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this);if(this.validationEvent==\"keyup\"){this.validationTask=new Ext.util.DelayedTask(this.validate,this);this.mon(this.el,\"keyup\",this.filterValidation,this)}else{if(this.validationEvent!==false&&this.validationEvent!=\"blur\"){this.mon(this.el,this.validationEvent,this.validate,this,{buffer:this.validationDelay})}}if(this.selectOnFocus||this.emptyText){this.mon(this.el,\"mousedown\",this.onMouseDown,this);if(this.emptyText){this.applyEmptyText()}}if(this.maskRe||(this.vtype&&this.disableKeyFilter!==true&&(this.maskRe=Ext.form.VTypes[this.vtype+\"Mask\"]))){this.mon(this.el,\"keypress\",this.filterKeys,this)}if(this.grow){this.mon(this.el,\"keyup\",this.onKeyUpBuffered,this,{buffer:50});this.mon(this.el,\"click\",this.autoSize,this)}if(this.enableKeyEvents){this.mon(this.el,{scope:this,keyup:this.onKeyUp,keydown:this.onKeyDown,keypress:this.onKeyPress})}},onMouseDown:function(a){if(!this.hasFocus){this.mon(this.el,\"mouseup\",Ext.emptyFn,this,{single:true,preventDefault:true})}},processValue:function(a){if(this.stripCharsRe){var b=a.replace(this.stripCharsRe,\"\");if(b!==a){this.setRawValue(b);return b}}return a},filterValidation:function(a){if(!a.isNavKeyPress()){this.validationTask.delay(this.validationDelay)}},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this);if(Ext.isIE){this.el.dom.unselectable=\"on\"}},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this);if(Ext.isIE){this.el.dom.unselectable=\"\"}},onKeyUpBuffered:function(a){if(this.doAutoSize(a)){this.autoSize()}},doAutoSize:function(a){return !a.isNavKeyPress()},onKeyUp:function(a){this.fireEvent(\"keyup\",this,a)},onKeyDown:function(a){this.fireEvent(\"keydown\",this,a)},onKeyPress:function(a){this.fireEvent(\"keypress\",this,a)},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){if(this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}},preFocus:function(){var a=this.el,b;if(this.emptyText){if(a.dom.value==this.emptyText){this.setRawValue(\"\");b=true}a.removeClass(this.emptyClass)}if(this.selectOnFocus||b){a.dom.select()}},postBlur:function(){this.applyEmptyText()},filterKeys:function(b){if(b.ctrlKey){return}var a=b.getKey();if(Ext.isGecko&&(b.isNavKeyPress()||a==b.BACKSPACE||(a==b.DELETE&&b.button==-1))){return}var c=String.fromCharCode(b.getCharCode());if(!Ext.isGecko&&b.isSpecialKey()&&!c){return}if(!this.maskRe.test(c)){b.stopEvent()}},setValue:function(a){if(this.emptyText&&this.el&&!Ext.isEmpty(a)){this.el.removeClass(this.emptyClass)}Ext.form.TextField.superclass.setValue.apply(this,arguments);this.applyEmptyText();this.autoSize();return this},getErrors:function(a){var d=Ext.form.TextField.superclass.getErrors.apply(this,arguments);a=Ext.isDefined(a)?a:this.processValue(this.getRawValue());if(Ext.isFunction(this.validator)){var c=this.validator(a);if(c!==true){d.push(c)}}if(a.length<1||a===this.emptyText){if(this.allowBlank){return d}else{d.push(this.blankText)}}if(!this.allowBlank&&(a.length<1||a===this.emptyText)){d.push(this.blankText)}if(a.length<this.minLength){d.push(String.format(this.minLengthText,this.minLength))}if(a.length>this.maxLength){d.push(String.format(this.maxLengthText,this.maxLength))}if(this.vtype){var b=Ext.form.VTypes;if(!b[this.vtype](a,this)){d.push(this.vtypeText||b[this.vtype+\"Text\"])}}if(this.regex&&!this.regex.test(a)){d.push(this.regexText)}return d},selectText:function(h,a){var c=this.getRawValue();var e=false;if(c.length>0){h=h===undefined?0:h;a=a===undefined?c.length:a;var g=this.el.dom;if(g.setSelectionRange){g.setSelectionRange(h,a)}else{if(g.createTextRange){var b=g.createTextRange();b.moveStart(\"character\",h);b.moveEnd(\"character\",a-c.length);b.select()}}e=Ext.isGecko||Ext.isOpera}else{e=true}if(e){this.focus()}},autoSize:function(){if(!this.grow||!this.rendered){return}if(!this.metrics){this.metrics=Ext.util.TextMetrics.createInstance(this.el)}var c=this.el;var b=c.dom.value;var e=document.createElement(\"div\");e.appendChild(document.createTextNode(b));b=e.innerHTML;Ext.removeNode(e);e=null;b+=\"&#160;\";var a=Math.min(this.growMax,Math.max(this.metrics.getWidth(b)+10,this.growMin));this.el.setWidth(a);this.fireEvent(\"autosize\",this,a)},onDestroy:function(){if(this.validationTask){this.validationTask.cancel();this.validationTask=null}Ext.form.TextField.superclass.onDestroy.call(this)}});Ext.reg(\"textfield\",Ext.form.TextField);Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:\"input\",type:\"text\",size:\"16\",autocomplete:\"off\"},hideTrigger:false,editable:true,readOnly:false,wrapFocusClass:\"x-trigger-wrap-focus\",autoSize:Ext.emptyFn,monitorTab:true,deferHeight:true,mimicing:false,actionMode:\"wrap\",defaultTriggerWidth:17,onResize:function(a,c){Ext.form.TriggerField.superclass.onResize.call(this,a,c);var b=this.getTriggerWidth();if(Ext.isNumber(a)){this.el.setWidth(a-b)}this.wrap.setWidth(this.el.getWidth()+b)},getTriggerWidth:function(){var a=this.trigger.getWidth();if(!this.hideTrigger&&!this.readOnly&&a===0){a=this.defaultTriggerWidth}return a},alignErrorIcon:function(){if(this.wrap){this.errorIcon.alignTo(this.wrap,\"tl-tr\",[2,0])}},onRender:function(b,a){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc();Ext.form.TriggerField.superclass.onRender.call(this,b,a);this.wrap=this.el.wrap({cls:\"x-form-field-wrap x-form-field-trigger-wrap\"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:\"img\",src:Ext.BLANK_IMAGE_URL,alt:\"\",cls:\"x-form-trigger \"+this.triggerClass});this.initTrigger();if(!this.width){this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())}this.resizeEl=this.positionEl=this.wrap},getWidth:function(){return(this.el.getWidth()+this.trigger.getWidth())},updateEditState:function(){if(this.rendered){if(this.readOnly){this.el.dom.readOnly=true;this.el.addClass(\"x-trigger-noedit\");this.mun(this.el,\"click\",this.onTriggerClick,this);this.trigger.setDisplayed(false)}else{if(!this.editable){this.el.dom.readOnly=true;this.el.addClass(\"x-trigger-noedit\");this.mon(this.el,\"click\",this.onTriggerClick,this)}else{this.el.dom.readOnly=false;this.el.removeClass(\"x-trigger-noedit\");this.mun(this.el,\"click\",this.onTriggerClick,this)}this.trigger.setDisplayed(!this.hideTrigger)}this.onResize(this.width||this.wrap.getWidth())}},setHideTrigger:function(a){if(a!=this.hideTrigger){this.hideTrigger=a;this.updateEditState()}},setEditable:function(a){if(a!=this.editable){this.editable=a;this.updateEditState()}},setReadOnly:function(a){if(a!=this.readOnly){this.readOnly=a;this.updateEditState()}},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this);this.updateEditState()},initTrigger:function(){this.mon(this.trigger,\"click\",this.onTriggerClick,this,{preventDefault:true});this.trigger.addClassOnOver(\"x-form-trigger-over\");this.trigger.addClassOnClick(\"x-form-trigger-click\")},onDestroy:function(){Ext.destroy(this.trigger,this.wrap);if(this.mimicing){this.doc.un(\"mousedown\",this.mimicBlur,this)}delete this.doc;Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this);if(!this.mimicing){this.wrap.addClass(this.wrapFocusClass);this.mimicing=true;this.doc.on(\"mousedown\",this.mimicBlur,this,{delay:10});if(this.monitorTab){this.on(\"specialkey\",this.checkTab,this)}}},checkTab:function(a,b){if(b.getKey()==b.TAB){this.triggerBlur()}},onBlur:Ext.emptyFn,mimicBlur:function(a){if(!this.isDestroyed&&!this.wrap.contains(a.target)&&this.validateBlur(a)){this.triggerBlur()}},triggerBlur:function(){this.mimicing=false;this.doc.un(\"mousedown\",this.mimicBlur,this);if(this.monitorTab&&this.el){this.un(\"specialkey\",this.checkTab,this)}Ext.form.TriggerField.superclass.onBlur.call(this);if(this.wrap){this.wrap.removeClass(this.wrapFocusClass)}},beforeBlur:Ext.emptyFn,validateBlur:function(a){return true},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:\"span\",cls:\"x-form-twin-triggers\",cn:[{tag:\"img\",src:Ext.BLANK_IMAGE_URL,alt:\"\",cls:\"x-form-trigger \"+this.trigger1Class},{tag:\"img\",src:Ext.BLANK_IMAGE_URL,alt:\"\",cls:\"x-form-trigger \"+this.trigger2Class}]}},getTrigger:function(a){return this.triggers[a]},afterRender:function(){Ext.form.TwinTriggerField.superclass.afterRender.call(this);var c=this.triggers,b=0,a=c.length;for(;b<a;++b){if(this[\"hideTrigger\"+(b+1)]){c[b].hide()}}},initTrigger:function(){var a=this.trigger.select(\".x-form-trigger\",true),b=this;a.each(function(d,g,c){var e=\"Trigger\"+(c+1);d.hide=function(){var h=b.wrap.getWidth();this.dom.style.display=\"none\";b.el.setWidth(h-b.trigger.getWidth());b[\"hidden\"+e]=true};d.show=function(){var h=b.wrap.getWidth();this.dom.style.display=\"\";b.el.setWidth(h-b.trigger.getWidth());b[\"hidden\"+e]=false};this.mon(d,\"click\",this[\"on\"+e+\"Click\"],this,{preventDefault:true});d.addClassOnOver(\"x-form-trigger-over\");d.addClassOnClick(\"x-form-trigger-click\")},this);this.triggers=a.elements},getTriggerWidth:function(){var a=0;Ext.each(this.triggers,function(d,c){var e=\"Trigger\"+(c+1),b=d.getWidth();if(b===0&&!this[\"hidden\"+e]){a+=this.defaultTriggerWidth}else{a+=b}},this);return a},onDestroy:function(){Ext.destroy(this.triggers);Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg(\"trigger\",Ext.form.TriggerField);Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1000,growAppend:\"&#160;\\n&#160;\",enterIsSpecial:false,preventScrollbars:false,onRender:function(b,a){if(!this.el){this.defaultAutoCreate={tag:\"textarea\",style:\"width:100px;height:60px;\",autocomplete:\"off\"}}Ext.form.TextArea.superclass.onRender.call(this,b,a);if(this.grow){this.textSizeEl=Ext.DomHelper.append(document.body,{tag:\"pre\",cls:\"x-form-grow-sizer\"});if(this.preventScrollbars){this.el.setStyle(\"overflow\",\"hidden\")}this.el.setHeight(this.growMin)}},onDestroy:function(){Ext.removeNode(this.textSizeEl);Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(a){if(a.isSpecialKey()&&(this.enterIsSpecial||(a.getKey()!=a.ENTER||a.hasModifier()))){this.fireEvent(\"specialkey\",this,a)}},doAutoSize:function(a){return !a.isNavKeyPress()||a.getKey()==a.ENTER},filterValidation:function(a){if(!a.isNavKeyPress()||(!this.enterIsSpecial&&a.keyCode==a.ENTER)){this.validationTask.delay(this.validationDelay)}},autoSize:function(){if(!this.grow||!this.textSizeEl){return}var c=this.el,a=Ext.util.Format.htmlEncode(c.dom.value),d=this.textSizeEl,b;Ext.fly(d).setWidth(this.el.getWidth());if(a.length<1){a=\"&#160;&#160;\"}else{a+=this.growAppend;if(Ext.isIE){a=a.replace(/\\n/g,\"&#160;<br />\")}}d.innerHTML=a;b=Math.min(this.growMax,Math.max(d.offsetHeight,this.growMin));if(b!=this.lastHeight){this.lastHeight=b;this.el.setHeight(b);this.fireEvent(\"autosize\",this,b)}}});Ext.reg(\"textarea\",Ext.form.TextArea);Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:\"x-form-field x-form-num-field\",allowDecimals:true,decimalSeparator:\".\",decimalPrecision:2,allowNegative:true,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:\"The minimum value for this field is {0}\",maxText:\"The maximum value for this field is {0}\",nanText:\"{0} is not a valid number\",baseChars:\"0123456789\",autoStripChars:false,initEvents:function(){var a=this.baseChars+\"\";if(this.allowDecimals){a+=this.decimalSeparator}if(this.allowNegative){a+=\"-\"}a=Ext.escapeRe(a);this.maskRe=new RegExp(\"[\"+a+\"]\");if(this.autoStripChars){this.stripCharsRe=new RegExp(\"[^\"+a+\"]\",\"gi\")}Ext.form.NumberField.superclass.initEvents.call(this)},getErrors:function(b){var c=Ext.form.NumberField.superclass.getErrors.apply(this,arguments);b=Ext.isDefined(b)?b:this.processValue(this.getRawValue());if(b.length<1){return c}b=String(b).replace(this.decimalSeparator,\".\");if(isNaN(b)){c.push(String.format(this.nanText,b))}var a=this.parseValue(b);if(a<this.minValue){c.push(String.format(this.minText,this.minValue))}if(a>this.maxValue){c.push(String.format(this.maxText,this.maxValue))}return c},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(a){a=this.fixPrecision(a);a=Ext.isNumber(a)?a:parseFloat(String(a).replace(this.decimalSeparator,\".\"));a=isNaN(a)?\"\":String(a).replace(\".\",this.decimalSeparator);return Ext.form.NumberField.superclass.setValue.call(this,a)},setMinValue:function(a){this.minValue=Ext.num(a,Number.NEGATIVE_INFINITY)},setMaxValue:function(a){this.maxValue=Ext.num(a,Number.MAX_VALUE)},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,\".\"));return isNaN(a)?\"\":a},fixPrecision:function(b){var a=isNaN(b);if(!this.allowDecimals||this.decimalPrecision==-1||a||!b){return a?\"\":b}return parseFloat(parseFloat(b).toFixed(this.decimalPrecision))},beforeBlur:function(){var a=this.parseValue(this.getRawValue());if(!Ext.isEmpty(a)){this.setValue(a)}}});Ext.reg(\"numberfield\",Ext.form.NumberField);Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:\"m/d/Y\",altFormats:\"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j\",disabledDaysText:\"Disabled\",disabledDatesText:\"Disabled\",minText:\"The date in this field must be equal to or after {0}\",maxText:\"The date in this field must be equal to or before {0}\",invalidText:\"{0} is not a valid date - it must be in the format {1}\",triggerClass:\"x-form-date-trigger\",showToday:true,startDay:0,defaultAutoCreate:{tag:\"input\",type:\"text\",size:\"10\",autocomplete:\"off\"},initTime:\"12\",initTimeFormat:\"H\",safeParse:function(b,c){if(/[gGhH]/.test(c.replace(/(\\\\.)/g,\"\"))){return Date.parseDate(b,c)}else{var a=Date.parseDate(b+\" \"+this.initTime,c+\" \"+this.initTimeFormat);if(a){return a.clearTime()}}},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this);this.addEvents(\"select\");if(Ext.isString(this.minValue)){this.minValue=this.parseDate(this.minValue)}if(Ext.isString(this.maxValue)){this.maxValue=this.parseDate(this.maxValue)}this.disabledDatesRE=null;this.initDisabledDays()},initEvents:function(){Ext.form.DateField.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{down:function(a){this.onTriggerClick()},scope:this,forceKeyDown:true})},initDisabledDays:function(){if(this.disabledDates){var b=this.disabledDates,a=b.length-1,c=\"(?:\";Ext.each(b,function(g,e){c+=Ext.isDate(g)?\"^\"+Ext.escapeRe(g.dateFormat(this.format))+\"$\":b[e];if(e!=a){c+=\"|\"}},this);this.disabledDatesRE=new RegExp(c+\")\")}},setDisabledDates:function(a){this.disabledDates=a;this.initDisabledDays();if(this.menu){this.menu.picker.setDisabledDates(this.disabledDatesRE)}},setDisabledDays:function(a){this.disabledDays=a;if(this.menu){this.menu.picker.setDisabledDays(a)}},setMinValue:function(a){this.minValue=(Ext.isString(a)?this.parseDate(a):a);if(this.menu){this.menu.picker.setMinDate(this.minValue)}},setMaxValue:function(a){this.maxValue=(Ext.isString(a)?this.parseDate(a):a);if(this.menu){this.menu.picker.setMaxDate(this.maxValue)}},getErrors:function(e){var h=Ext.form.DateField.superclass.getErrors.apply(this,arguments);e=this.formatDate(e||this.processValue(this.getRawValue()));if(e.length<1){return h}var c=e;e=this.parseDate(e);if(!e){h.push(String.format(this.invalidText,c,this.format));return h}var g=e.getTime();if(this.minValue&&g<this.minValue.clearTime().getTime()){h.push(String.format(this.minText,this.formatDate(this.minValue)))}if(this.maxValue&&g>this.maxValue.clearTime().getTime()){h.push(String.format(this.maxText,this.formatDate(this.maxValue)))}if(this.disabledDays){var a=e.getDay();for(var b=0;b<this.disabledDays.length;b++){if(a===this.disabledDays[b]){h.push(this.disabledDaysText);break}}}var d=this.formatDate(e);if(this.disabledDatesRE&&this.disabledDatesRE.test(d)){h.push(String.format(this.disabledDatesText,d))}return h},validateBlur:function(){return !this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||\"\"},setValue:function(a){return Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},parseDate:function(g){if(!g||Ext.isDate(g)){return g}var b=this.safeParse(g,this.format),c=this.altFormats,e=this.altFormatsArray;if(!b&&c){e=e||c.split(\"|\");for(var d=0,a=e.length;d<a&&!b;d++){b=this.safeParse(g,e[d])}}return b},onDestroy:function(){Ext.destroy(this.menu,this.keyNav);Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(a){return Ext.isDate(a)?a.dateFormat(this.format):a},onTriggerClick:function(){if(this.disabled){return}if(this.menu==null){this.menu=new Ext.menu.DateMenu({hideOnClick:false,focusOnSelect:false})}this.onFocus();Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,startDay:this.startDay,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))});this.menu.picker.setValue(this.getValue()||new Date());this.menu.show(this.el,\"tl-bl?\");this.menuEvents(\"on\")},menuEvents:function(a){this.menu[a](\"select\",this.onSelect,this);this.menu[a](\"hide\",this.onMenuHide,this);this.menu[a](\"show\",this.onFocus,this)},onSelect:function(a,b){this.setValue(b);this.fireEvent(\"select\",this,b);this.menu.hide()},onMenuHide:function(){this.focus(false,60);this.menuEvents(\"un\")},beforeBlur:function(){var a=this.parseDate(this.getRawValue());if(a){this.setValue(a)}}});Ext.reg(\"datefield\",Ext.form.DateField);Ext.form.DisplayField=Ext.extend(Ext.form.Field,{validationEvent:false,validateOnBlur:false,defaultAutoCreate:{tag:\"div\"},fieldClass:\"x-form-display-field\",htmlEncode:false,initEvents:Ext.emptyFn,isValid:function(){return true},validate:function(){return true},getRawValue:function(){var a=this.rendered?this.el.dom.innerHTML:Ext.value(this.value,\"\");if(a===this.emptyText){a=\"\"}if(this.htmlEncode){a=Ext.util.Format.htmlDecode(a)}return a},getValue:function(){return this.getRawValue()},getName:function(){return this.name},setRawValue:function(a){if(this.htmlEncode){a=Ext.util.Format.htmlEncode(a)}return this.rendered?(this.el.dom.innerHTML=(Ext.isEmpty(a)?\"\":a)):(this.value=a)},setValue:function(a){this.setRawValue(a);return this}});Ext.reg(\"displayfield\",Ext.form.DisplayField);Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:\"input\",type:\"text\",size:\"24\",autocomplete:\"off\"},listClass:\"\",selectedClass:\"x-combo-selected\",listEmptyText:\"\",triggerClass:\"x-form-arrow-trigger\",shadow:\"sides\",listAlign:\"tl-bl?\",maxHeight:300,minHeight:90,triggerAction:\"query\",minChars:4,autoSelect:true,typeAhead:false,queryDelay:500,pageSize:0,selectOnFocus:false,queryParam:\"query\",loadingText:\"Loading...\",resizable:false,handleHeight:8,allQuery:\"\",mode:\"remote\",minListWidth:70,forceSelection:false,typeAheadDelay:250,lazyInit:true,clearFilterOnReset:true,submitValue:undefined,initComponent:function(){Ext.form.ComboBox.superclass.initComponent.call(this);this.addEvents(\"expand\",\"collapse\",\"beforeselect\",\"select\",\"beforequery\");if(this.transform){var c=Ext.getDom(this.transform);if(!this.hiddenName){this.hiddenName=c.name}if(!this.store){this.mode=\"local\";var k=[],e=c.options;for(var b=0,a=e.length;b<a;b++){var h=e[b],g=(h.hasAttribute?h.hasAttribute(\"value\"):h.getAttributeNode(\"value\").specified)?h.value:h.text;if(h.selected&&Ext.isEmpty(this.value,true)){this.value=g}k.push([g,h.text])}this.store=new Ext.data.ArrayStore({idIndex:0,fields:[\"value\",\"text\"],data:k,autoDestroy:true});this.valueField=\"value\";this.displayField=\"text\"}c.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(c,this.autoCreate||this.defaultAutoCreate);this.render(this.el.parentNode,c)}Ext.removeNode(c)}else{if(this.store){this.store=Ext.StoreMgr.lookup(this.store);if(this.store.autoCreated){this.displayField=this.valueField=\"field1\";if(!this.store.expandData){this.displayField=\"field2\"}this.mode=\"local\"}}}this.selectedIndex=-1;if(this.mode==\"local\"){if(!Ext.isDefined(this.initialConfig.queryDelay)){this.queryDelay=10}if(!Ext.isDefined(this.initialConfig.minChars)){this.minChars=0}}},onRender:function(b,a){if(this.hiddenName&&!Ext.isDefined(this.submitValue)){this.submitValue=false}Ext.form.ComboBox.superclass.onRender.call(this,b,a);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:\"input\",type:\"hidden\",name:this.hiddenName,id:(this.hiddenId||Ext.id())},\"before\",true)}if(Ext.isGecko){this.el.dom.setAttribute(\"autocomplete\",\"off\")}if(!this.lazyInit){this.initList()}else{this.on(\"focus\",this.initList,this,{single:true})}},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this);if(this.hiddenField){this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,\"\")}},getParentZIndex:function(){var a;if(this.ownerCt){this.findParentBy(function(b){a=parseInt(b.getPositionEl().getStyle(\"z-index\"),10);return !!a})}return a},getZIndex:function(b){b=b||Ext.getDom(this.getListParent()||Ext.getBody());var a=parseInt(Ext.fly(b).getStyle(\"z-index\"),10);if(!a){a=this.getParentZIndex()}return(a||12000)+5},initList:function(){if(!this.list){var a=\"x-combo-list\",c=Ext.getDom(this.getListParent()||Ext.getBody());this.list=new Ext.Layer({parentEl:c,shadow:this.shadow,cls:[a,this.listClass].join(\" \"),constrain:false,zindex:this.getZIndex(c)});var b=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setSize(b,0);this.list.swallowEvent(\"mousewheel\");this.assetHeight=0;if(this.syncFont!==false){this.list.setStyle(\"font-size\",this.el.getStyle(\"font-size\"))}if(this.title){this.header=this.list.createChild({cls:a+\"-hd\",html:this.title});this.assetHeight+=this.header.getHeight()}this.innerList=this.list.createChild({cls:a+\"-inner\"});this.mon(this.innerList,\"mouseover\",this.onViewOver,this);this.mon(this.innerList,\"mousemove\",this.onViewMove,this);this.innerList.setWidth(b-this.list.getFrameWidth(\"lr\"));if(this.pageSize){this.footer=this.list.createChild({cls:a+\"-ft\"});this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer});this.assetHeight+=this.footer.getHeight()}if(!this.tpl){this.tpl='<tpl for=\".\"><div class=\"'+a+'-item\">{'+this.displayField+\"}</div></tpl>\"}this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:true,selectedClass:this.selectedClass,itemSelector:this.itemSelector||\".\"+a+\"-item\",emptyText:this.listEmptyText,deferEmptyText:false});this.mon(this.view,{containerclick:this.onViewClick,click:this.onViewClick,scope:this});this.bindStore(this.store,true);if(this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:true,handles:\"se\"});this.mon(this.resizer,\"resize\",function(g,d,e){this.maxHeight=e-this.handleHeight-this.list.getFrameWidth(\"tb\")-this.assetHeight;this.listWidth=d;this.innerList.setWidth(d-this.list.getFrameWidth(\"lr\"));this.restrictHeight()},this);this[this.pageSize?\"footer\":\"innerList\"].setStyle(\"margin-bottom\",this.handleHeight+\"px\")}}},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(a,b){if(this.store&&!b){if(this.store!==a&&this.store.autoDestroy){this.store.destroy()}else{this.store.un(\"beforeload\",this.onBeforeLoad,this);this.store.un(\"load\",this.onLoad,this);this.store.un(\"exception\",this.collapse,this)}if(!a){this.store=null;if(this.view){this.view.bindStore(null)}if(this.pageTb){this.pageTb.bindStore(null)}}}if(a){if(!b){this.lastQuery=null;if(this.pageTb){this.pageTb.bindStore(a)}}this.store=Ext.StoreMgr.lookup(a);this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse});if(this.view){this.view.bindStore(a)}}},reset:function(){if(this.clearFilterOnReset&&this.mode==\"local\"){this.store.clearFilter()}Ext.form.ComboBox.superclass.reset.call(this)},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{up:function(a){this.inKeyMode=true;this.selectPrev()},down:function(a){if(!this.isExpanded()){this.onTriggerClick()}else{this.inKeyMode=true;this.selectNext()}},enter:function(a){this.onViewClick()},esc:function(a){this.collapse()},tab:function(a){if(this.forceSelection===true){this.collapse()}else{this.onViewClick(false)}return true},scope:this,doRelay:function(c,b,a){if(a==\"down\"||this.scope.isExpanded()){var d=Ext.KeyNav.prototype.doRelay.apply(this,arguments);if(!Ext.isIE&&Ext.EventManager.useKeydown){this.scope.fireKey(c)}return d}return true},forceKeyDown:true,defaultEventAction:\"stopEvent\"});this.queryDelay=Math.max(this.queryDelay||10,this.mode==\"local\"?10:250);this.dqTask=new Ext.util.DelayedTask(this.initQuery,this);if(this.typeAhead){this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)}if(!this.enableKeyEvents){this.mon(this.el,\"keyup\",this.onKeyUp,this)}},onDestroy:function(){if(this.dqTask){this.dqTask.cancel();this.dqTask=null}this.bindStore(null);Ext.destroy(this.resizer,this.view,this.pageTb,this.list);Ext.destroyMembers(this,\"hiddenField\");Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(a){if(!this.isExpanded()){Ext.form.ComboBox.superclass.fireKey.call(this,a)}},onResize:function(a,b){Ext.form.ComboBox.superclass.onResize.apply(this,arguments);if(!isNaN(a)&&this.isVisible()&&this.list){this.doResize(a)}else{this.bufferSize=a}},doResize:function(a){if(!Ext.isDefined(this.listWidth)){var b=Math.max(a,this.minListWidth);this.list.setWidth(b);this.innerList.setWidth(b-this.list.getFrameWidth(\"lr\"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=false}},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=true}},onBeforeLoad:function(){if(!this.hasFocus){return}this.innerList.update(this.loadingText?'<div class=\"loading-indicator\">'+this.loadingText+\"</div>\":\"\");this.restrictHeight();this.selectedIndex=-1},onLoad:function(){if(!this.hasFocus){return}if(this.store.getCount()>0||this.listEmptyText){this.expand();this.restrictHeight();if(this.lastQuery==this.allQuery){if(this.editable){this.el.dom.select()}if(this.autoSelect!==false&&!this.selectByValue(this.value,true)){this.select(0,true)}}else{if(this.autoSelect!==false){this.selectNext()}if(this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.taTask.delay(this.typeAheadDelay)}}}else{this.collapse()}},onTypeAhead:function(){if(this.store.getCount()>0){var b=this.store.getAt(0);var c=b.data[this.displayField];var a=c.length;var d=this.getRawValue().length;if(d!=a){this.setRawValue(c);this.selectText(d,c.length)}}},assertValue:function(){var b=this.getRawValue(),a;if(this.valueField&&Ext.isDefined(this.value)){a=this.findRecord(this.valueField,this.value)}if(!a||a.get(this.displayField)!=b){a=this.findRecord(this.displayField,b)}if(!a&&this.forceSelection){if(b.length>0&&b!=this.emptyText){this.el.dom.value=Ext.value(this.lastSelectionText,\"\");this.applyEmptyText()}else{this.clearValue()}}else{if(a&&this.valueField){if(this.value==b){return}b=a.get(this.valueField||this.displayField)}this.setValue(b)}},onSelect:function(a,b){if(this.fireEvent(\"beforeselect\",this,a,b)!==false){this.setValue(a.data[this.valueField||this.displayField]);this.collapse();this.fireEvent(\"select\",this,a,b)}},getName:function(){var a=this.hiddenField;return a&&a.name?a.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){if(this.valueField){return Ext.isDefined(this.value)?this.value:\"\"}else{return Ext.form.ComboBox.superclass.getValue.call(this)}},clearValue:function(){if(this.hiddenField){this.hiddenField.value=\"\"}this.setRawValue(\"\");this.lastSelectionText=\"\";this.applyEmptyText();this.value=\"\"},setValue:function(a){var c=a;if(this.valueField){var b=this.findRecord(this.valueField,a);if(b){c=b.data[this.displayField]}else{if(Ext.isDefined(this.valueNotFoundText)){c=this.valueNotFoundText}}}this.lastSelectionText=c;if(this.hiddenField){this.hiddenField.value=Ext.value(a,\"\")}Ext.form.ComboBox.superclass.setValue.call(this,c);this.value=a;return this},findRecord:function(c,b){var a;if(this.store.getCount()>0){this.store.each(function(d){if(d.data[c]==b){a=d;return false}})}return a},onViewMove:function(b,a){this.inKeyMode=false},onViewOver:function(d,b){if(this.inKeyMode){return}var c=this.view.findItemFromChild(b);if(c){var a=this.view.indexOf(c);this.select(a,false)}},onViewClick:function(b){var a=this.view.getSelectedIndexes()[0],c=this.store,d=c.getAt(a);if(d){this.onSelect(d,a)}else{this.collapse()}if(b!==false){this.el.focus()}},restrictHeight:function(){this.innerList.dom.style.height=\"\";var b=this.innerList.dom,e=this.list.getFrameWidth(\"tb\")+(this.resizable?this.handleHeight:0)+this.assetHeight,c=Math.max(b.clientHeight,b.offsetHeight,b.scrollHeight),a=this.getPosition()[1]-Ext.getBody().getScroll().top,g=Ext.lib.Dom.getViewHeight()-a-this.getSize().height,d=Math.max(a,g,this.minHeight||0)-this.list.shadowOffset-e-5;c=Math.min(c,d,this.maxHeight);this.innerList.setHeight(c);this.list.beginUpdate();this.list.setHeight(c+e);this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(a,c){if(!Ext.isEmpty(a,true)){var b=this.findRecord(this.valueField||this.displayField,a);if(b){this.select(this.store.indexOf(b),c);return true}}return false},select:function(a,c){this.selectedIndex=a;this.view.select(a);if(c!==false){var b=this.view.getNode(a);if(b){this.innerList.scrollChildIntoView(b,false)}}},selectNext:function(){var a=this.store.getCount();if(a>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex<a-1){this.select(this.selectedIndex+1)}}}},selectPrev:function(){var a=this.store.getCount();if(a>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex!==0){this.select(this.selectedIndex-1)}}}},onKeyUp:function(b){var a=b.getKey();if(this.editable!==false&&this.readOnly!==true&&(a==b.BACKSPACE||!b.isSpecialKey())){this.lastKey=a;this.dqTask.delay(this.queryDelay)}Ext.form.ComboBox.superclass.onKeyUp.call(this,b)},validateBlur:function(){return !this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.form.ComboBox.superclass.postBlur.call(this);this.collapse();this.inKeyMode=false},doQuery:function(c,b){c=Ext.isEmpty(c)?\"\":c;var a={query:c,forceAll:b,combo:this,cancel:false};if(this.fireEvent(\"beforequery\",a)===false||a.cancel){return false}c=a.query;b=a.forceAll;if(b===true||(c.length>=this.minChars)){if(this.lastQuery!==c){this.lastQuery=c;if(this.mode==\"local\"){this.selectedIndex=-1;if(b){this.store.clearFilter()}else{this.store.filter(this.displayField,c)}this.onLoad()}else{this.store.baseParams[this.queryParam]=c;this.store.load({params:this.getParams(c)});this.expand()}}else{this.selectedIndex=-1;this.onLoad()}}},getParams:function(a){var b={},c=this.store.paramNames;if(this.pageSize){b[c.start]=0;b[c.limit]=this.pageSize}return b},collapse:function(){if(!this.isExpanded()){return}this.list.hide();Ext.getDoc().un(\"mousewheel\",this.collapseIf,this);Ext.getDoc().un(\"mousedown\",this.collapseIf,this);this.fireEvent(\"collapse\",this)},collapseIf:function(a){if(!this.isDestroyed&&!a.within(this.wrap)&&!a.within(this.list)){this.collapse()}},expand:function(){if(this.isExpanded()||!this.hasFocus){return}if(this.title||this.pageSize){this.assetHeight=0;if(this.title){this.assetHeight+=this.header.getHeight()}if(this.pageSize){this.assetHeight+=this.footer.getHeight()}}if(this.bufferSize){this.doResize(this.bufferSize);delete this.bufferSize}this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.setZIndex(this.getZIndex());this.list.show();if(Ext.isGecko2){this.innerList.setOverflow(\"auto\")}this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf});this.fireEvent(\"expand\",this)},onTriggerClick:function(){if(this.readOnly||this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}else{this.onFocus({});if(this.triggerAction==\"all\"){this.doQuery(this.allQuery,true)}else{this.doQuery(this.getRawValue())}this.el.focus()}}});Ext.reg(\"combo\",Ext.form.ComboBox);Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:undefined,fieldClass:\"x-form-field\",checked:false,boxLabel:\"&#160;\",defaultAutoCreate:{tag:\"input\",type:\"checkbox\",autocomplete:\"off\"},actionMode:\"wrap\",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents(\"check\")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel){this.el.alignTo(this.wrap,\"c-c\")}},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.mon(this.el,{scope:this,click:this.onClick,change:this.onClick})},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(b,a){Ext.form.Checkbox.superclass.onRender.call(this,b,a);if(this.inputValue!==undefined){this.el.dom.value=this.inputValue}this.wrap=this.el.wrap({cls:\"x-form-check-wrap\"});if(this.boxLabel){this.wrap.createChild({tag:\"label\",htmlFor:this.el.id,cls:\"x-form-cb-label\",html:this.boxLabel})}if(this.checked){this.setValue(true)}else{this.checked=this.el.dom.checked}if(Ext.isIE&&!Ext.isStrict){this.wrap.repaint()}this.resizeEl=this.positionEl=this.wrap},onDestroy:function(){Ext.destroy(this.wrap);Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:function(){this.originalValue=this.getValue()},getValue:function(){if(this.rendered){return this.el.dom.checked}return this.checked},onClick:function(){if(this.el.dom.checked!=this.checked){this.setValue(this.el.dom.checked)}},setValue:function(a){var c=this.checked,b=this.inputValue;this.checked=(a===true||a===\"true\"||a==\"1\"||(b?a==b:String(a).toLowerCase()==\"on\"));if(this.rendered){this.el.dom.checked=this.checked;this.el.dom.defaultChecked=this.checked}if(c!=this.checked){this.fireEvent(\"check\",this,this.checked);if(this.handler){this.handler.call(this.scope||this,this,this.checked)}}return this}});Ext.reg(\"checkbox\",Ext.form.Checkbox);Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:\"auto\",vertical:false,allowBlank:true,blankText:\"You must select at least one item in this group\",defaultType:\"checkbox\",groupCls:\"x-form-check-group\",initComponent:function(){this.addEvents(\"change\");this.on(\"change\",this.validate,this);Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(k,g){if(!this.el){var q={autoEl:{id:this.id},cls:this.groupCls,layout:\"column\",renderTo:k,bufferResize:false};var a={xtype:\"container\",defaultType:this.defaultType,layout:\"form\",defaults:{hideLabel:true,anchor:\"100%\"}};if(this.items[0].items){Ext.apply(q,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var e=0,n=this.items.length;e<n;e++){Ext.applyIf(this.items[e],a)}}else{var d,o=[];if(typeof this.columns==\"string\"){this.columns=this.items.length}if(!Ext.isArray(this.columns)){var m=[];for(var e=0;e<this.columns;e++){m.push((100/this.columns)*0.01)}this.columns=m}d=this.columns.length;for(var e=0;e<d;e++){var b=Ext.apply({items:[]},a);b[this.columns[e]<=1?\"columnWidth\":\"width\"]=this.columns[e];if(this.defaults){b.defaults=Ext.apply(b.defaults||{},this.defaults)}o.push(b)}if(this.vertical){var s=Math.ceil(this.items.length/d),p=0;for(var e=0,n=this.items.length;e<n;e++){if(e>0&&e%s==0){p++}if(this.items[e].fieldLabel){this.items[e].hideLabel=false}o[p].items.push(this.items[e])}}else{for(var e=0,n=this.items.length;e<n;e++){var r=e%d;if(this.items[e].fieldLabel){this.items[e].hideLabel=false}o[r].items.push(this.items[e])}}Ext.apply(q,{layoutConfig:{columns:d},items:o})}this.panel=new Ext.Container(q);this.panel.ownerCt=this;this.el=this.panel.getEl();if(this.forId&&this.itemCls){var c=this.el.up(this.itemCls).child(\"label\",true);if(c){c.setAttribute(\"htmlFor\",this.forId)}}var h=this.panel.findBy(function(i){return i.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(h)}Ext.form.CheckboxGroup.superclass.onRender.call(this,k,g)},initValue:function(){if(this.value){this.setValue.apply(this,this.buffered?this.value:[this.value]);delete this.buffered;delete this.value}},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this);this.eachItem(function(a){a.on(\"check\",this.fireChecked,this);a.inGroup=true})},doLayout:function(){if(this.rendered){this.panel.forceLayout=this.ownerCt.forceLayout;this.panel.doLayout()}},fireChecked:function(){var a=[];this.eachItem(function(b){if(b.checked){a.push(b)}});this.fireEvent(\"change\",this,a)},getErrors:function(){var b=Ext.form.CheckboxGroup.superclass.getErrors.apply(this,arguments);if(!this.allowBlank){var a=true;this.eachItem(function(c){if(c.checked){return(a=false)}});if(a){b.push(this.blankText)}}return b},isDirty:function(){if(this.disabled||!this.rendered){return false}var a=false;this.eachItem(function(b){if(b.isDirty()){a=true;return false}});return a},setReadOnly:function(a){if(this.rendered){this.eachItem(function(b){b.setReadOnly(a)})}this.readOnly=a},onDisable:function(){this.eachItem(function(a){a.disable()})},onEnable:function(){this.eachItem(function(a){a.enable()})},onResize:function(a,b){this.panel.setSize(a,b);this.panel.doLayout()},reset:function(){if(this.originalValue){this.eachItem(function(a){if(a.setValue){a.setValue(false);a.originalValue=a.getValue()}});this.resetOriginal=true;this.setValue(this.originalValue);delete this.resetOriginal}else{this.eachItem(function(a){if(a.reset){a.reset()}})}(function(){this.clearInvalid()}).defer(50,this)},setValue:function(){if(this.rendered){this.onSetValue.apply(this,arguments)}else{this.buffered=true;this.value=arguments}return this},onSetValue:function(d,c){if(arguments.length==1){if(Ext.isArray(d)){Ext.each(d,function(h,e){if(Ext.isObject(h)&&h.setValue){h.setValue(true);if(this.resetOriginal===true){h.originalValue=h.getValue()}}else{var g=this.items.itemAt(e);if(g){g.setValue(h)}}},this)}else{if(Ext.isObject(d)){for(var a in d){var b=this.getBox(a);if(b){b.setValue(d[a])}}}else{this.setValueForItem(d)}}}else{var b=this.getBox(d);if(b){b.setValue(c)}}},beforeDestroy:function(){Ext.destroy(this.panel);if(!this.rendered){Ext.destroy(this.items)}Ext.form.CheckboxGroup.superclass.beforeDestroy.call(this)},setValueForItem:function(a){a=String(a).split(\",\");this.eachItem(function(b){if(a.indexOf(b.inputValue)>-1){b.setValue(true)}})},getBox:function(b){var a=null;this.eachItem(function(c){if(b==c||c.dataIndex==b||c.id==b||c.getName()==b){a=c;return false}});return a},getValue:function(){var a=[];this.eachItem(function(b){if(b.checked){a.push(b)}});return a},eachItem:function(b,a){if(this.items&&this.items.each){this.items.each(b,a||this)}},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn});Ext.reg(\"checkboxgroup\",Ext.form.CheckboxGroup);Ext.form.CompositeField=Ext.extend(Ext.form.Field,{defaultMargins:\"0 5 0 0\",skipLastItemMargin:true,isComposite:true,combineErrors:true,labelConnector:\", \",initComponent:function(){var g=[],b=this.items,e;for(var d=0,c=b.length;d<c;d++){e=b[d];if(!Ext.isEmpty(e.ref)){e.ref=\"../\"+e.ref}g.push(e.fieldLabel);Ext.applyIf(e,this.defaults);if(!(d==c-1&&this.skipLastItemMargin)){Ext.applyIf(e,{margins:this.defaultMargins})}}this.fieldLabel=this.fieldLabel||this.buildLabel(g);this.fieldErrors=new Ext.util.MixedCollection(true,function(h){return h.field});this.fieldErrors.on({scope:this,add:this.updateInvalidMark,remove:this.updateInvalidMark,replace:this.updateInvalidMark});Ext.form.CompositeField.superclass.initComponent.apply(this,arguments);this.innerCt=new Ext.Container({layout:\"hbox\",items:this.items,cls:\"x-form-composite\",defaultMargins:\"0 3 0 0\",ownerCt:this});this.innerCt.ownerCt=undefined;var a=this.innerCt.findBy(function(h){return h.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(a)},onRender:function(c,a){if(!this.el){var d=this.innerCt;d.render(c);this.el=d.getEl();if(this.combineErrors){this.eachItem(function(e){Ext.apply(e,{markInvalid:this.onFieldMarkInvalid.createDelegate(this,[e],0),clearInvalid:this.onFieldClearInvalid.createDelegate(this,[e],0)})})}var b=this.el.parent().parent().child(\"label\",true);if(b){b.setAttribute(\"for\",this.items.items[0].id)}}Ext.form.CompositeField.superclass.onRender.apply(this,arguments)},onFieldMarkInvalid:function(d,c){var b=d.getName(),a={field:b,errorName:d.fieldLabel||b,error:c};this.fieldErrors.replace(b,a);d.el.addClass(d.invalidClass)},onFieldClearInvalid:function(a){this.fieldErrors.removeKey(a.getName());a.el.removeClass(a.invalidClass)},updateInvalidMark:function(){var a=Ext.isIE6&&Ext.isStrict;if(this.fieldErrors.length==0){this.clearInvalid();if(a){this.clearInvalid.defer(50,this)}}else{var b=this.buildCombinedErrorMessage(this.fieldErrors.items);this.sortErrors();this.markInvalid(b);if(a){this.markInvalid(b)}}},validateValue:function(){var a=true;this.eachItem(function(b){if(!b.isValid()){a=false}});return a},buildCombinedErrorMessage:function(e){var d=[],b;for(var c=0,a=e.length;c<a;c++){b=e[c];d.push(String.format(\"{0}: {1}\",b.errorName,b.error))}return d.join(\"<br />\")},sortErrors:function(){var a=this.items;this.fieldErrors.sort(\"ASC\",function(g,d){var c=function(b){return function(i){return i.getName()==b}};var h=a.findIndexBy(c(g.field)),e=a.findIndexBy(c(d.field));return h<e?-1:1})},reset:function(){this.eachItem(function(a){a.reset()});(function(){this.clearInvalid()}).defer(50,this)},clearInvalidChildren:function(){this.eachItem(function(a){a.clearInvalid()})},buildLabel:function(a){return Ext.clean(a).join(this.labelConnector)},isDirty:function(){if(this.disabled||!this.rendered){return false}var a=false;this.eachItem(function(b){if(b.isDirty()){a=true;return false}});return a},eachItem:function(b,a){if(this.items&&this.items.each){this.items.each(b,a||this)}},onResize:function(e,c,a,d){var b=this.innerCt;if(this.rendered&&b.rendered){b.setSize(e,c)}Ext.form.CompositeField.superclass.onResize.apply(this,arguments)},doLayout:function(c,b){if(this.rendered){var a=this.innerCt;a.forceLayout=this.ownerCt.forceLayout;a.doLayout(c,b)}},beforeDestroy:function(){Ext.destroy(this.innerCt);Ext.form.CompositeField.superclass.beforeDestroy.call(this)},setReadOnly:function(a){if(a==undefined){a=true}a=!!a;if(this.rendered){this.eachItem(function(b){b.setReadOnly(a)})}this.readOnly=a},onShow:function(){Ext.form.CompositeField.superclass.onShow.call(this);this.doLayout()},onDisable:function(){this.eachItem(function(a){a.disable()})},onEnable:function(){this.eachItem(function(a){a.enable()})}});Ext.reg(\"compositefield\",Ext.form.CompositeField);Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:\"radio\",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var a=this.el.up(\"form\")||Ext.getBody();var b=a.child(\"input[name=\"+this.el.dom.name+\"]:checked\",true);return b?b.value:null},setValue:function(b){var a,d,c;if(typeof b==\"boolean\"){Ext.form.Radio.superclass.setValue.call(this,b)}else{if(this.rendered){a=this.getCheckEl();c=a.child(\"input[name=\"+this.el.dom.name+\"][value=\"+b+\"]\",true);if(c){Ext.getCmp(c.id).setValue(true)}}}if(this.rendered&&this.checked){a=a||this.getCheckEl();d=this.getCheckEl().select(\"input[name=\"+this.el.dom.name+\"]\");d.each(function(e){if(e.dom.id!=this.id){Ext.getCmp(e.dom.id).setValue(false)}},this)}return this},getCheckEl:function(){if(this.inGroup){return this.el.up(\".x-form-radio-group\")}return this.el.up(\"form\")||Ext.getBody()}});Ext.reg(\"radio\",Ext.form.Radio);Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:true,blankText:\"You must select one item in this group\",defaultType:\"radio\",groupCls:\"x-form-radio-group\",getValue:function(){var a=null;this.eachItem(function(b){if(b.checked){a=b;return false}});return a},onSetValue:function(c,b){if(arguments.length>1){var a=this.getBox(c);if(a){a.setValue(b);if(a.checked){this.eachItem(function(d){if(d!==a){d.setValue(false)}})}}}else{this.setValueForItem(c)}},setValueForItem:function(a){a=String(a).split(\",\")[0];this.eachItem(function(b){b.setValue(a==b.inputValue)})},fireChecked:function(){if(!this.checkTask){this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)}this.checkTask.delay(10)},bufferChecked:function(){var a=null;this.eachItem(function(b){if(b.checked){a=b;return false}});this.fireEvent(\"change\",this,a)},onDestroy:function(){if(this.checkTask){this.checkTask.cancel();this.checkTask=null}Ext.form.RadioGroup.superclass.onDestroy.call(this)}});Ext.reg(\"radiogroup\",Ext.form.RadioGroup);Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:\"hidden\",shouldLayout:false,onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg(\"hidden\",Ext.form.Hidden);Ext.form.BasicForm=Ext.extend(Ext.util.Observable,{constructor:function(b,a){Ext.apply(this,a);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\\s,|]/)}this.items=new Ext.util.MixedCollection(false,function(c){return c.getItemId()});this.addEvents(\"beforeaction\",\"actionfailed\",\"actioncomplete\");if(b){this.initEl(b)}Ext.form.BasicForm.superclass.constructor.call(this)},timeout:30,paramOrder:undefined,paramsAsHash:false,waitTitle:\"Please Wait...\",activeAction:null,trackResetOnLoad:false,initEl:function(a){this.el=Ext.get(a);this.id=this.el.id||Ext.id();if(!this.standardSubmit){this.el.on(\"submit\",this.onSubmit,this)}this.el.addClass(\"x-form\")},getEl:function(){return this.el},onSubmit:function(a){a.stopEvent()},destroy:function(a){if(a!==true){this.items.each(function(b){Ext.destroy(b)});Ext.destroy(this.el)}this.items.clear();this.purgeListeners()},isValid:function(){var a=true;this.items.each(function(b){if(!b.validate()){a=false}});return a},isDirty:function(){var a=false;this.items.each(function(b){if(b.isDirty()){a=true;return false}});return a},doAction:function(b,a){if(Ext.isString(b)){b=new Ext.form.Action.ACTION_TYPES[b](this,a)}if(this.fireEvent(\"beforeaction\",this,b)!==false){this.beforeAction(b);b.run.defer(100,b)}return this},submit:function(b){b=b||{};if(this.standardSubmit){var a=b.clientValidation===false||this.isValid();if(a){var c=this.el.dom;if(this.url&&Ext.isEmpty(c.action)){c.action=this.url}c.submit()}return a}var d=String.format(\"{0}submit\",this.api?\"direct\":\"\");this.doAction(d,b);return this},load:function(a){var b=String.format(\"{0}load\",this.api?\"direct\":\"\");this.doAction(b,a);return this},updateRecord:function(b){b.beginEdit();var a=b.fields,d,c;a.each(function(e){d=this.findField(e.name);if(d){c=d.getValue();if(typeof c!=undefined&&c.getGroupValue){c=c.getGroupValue()}else{if(d.eachItem){c=[];d.eachItem(function(g){c.push(g.getValue())})}}b.set(e.name,c)}},this);b.endEdit();return this},loadRecord:function(a){this.setValues(a.data);return this},beforeAction:function(a){this.items.each(function(c){if(c.isFormField&&c.syncValue){c.syncValue()}});var b=a.options;if(b.waitMsg){if(this.waitMsgTarget===true){this.el.mask(b.waitMsg,\"x-mask-loading\")}else{if(this.waitMsgTarget){this.waitMsgTarget=Ext.get(this.waitMsgTarget);this.waitMsgTarget.mask(b.waitMsg,\"x-mask-loading\")}else{Ext.MessageBox.wait(b.waitMsg,b.waitTitle||this.waitTitle)}}}},afterAction:function(a,c){this.activeAction=null;var b=a.options;if(b.waitMsg){if(this.waitMsgTarget===true){this.el.unmask()}else{if(this.waitMsgTarget){this.waitMsgTarget.unmask()}else{Ext.MessageBox.updateProgress(1);Ext.MessageBox.hide()}}}if(c){if(b.reset){this.reset()}Ext.callback(b.success,b.scope,[this,a]);this.fireEvent(\"actioncomplete\",this,a)}else{Ext.callback(b.failure,b.scope,[this,a]);this.fireEvent(\"actionfailed\",this,a)}},findField:function(c){var b=this.items.get(c);if(!Ext.isObject(b)){var a=function(d){if(d.isFormField){if(d.dataIndex==c||d.id==c||d.getName()==c){b=d;return false}else{if(d.isComposite){return d.items.each(a)}else{if(d instanceof Ext.form.CheckboxGroup&&d.rendered){return d.eachItem(a)}}}}};this.items.each(a)}return b||null},markInvalid:function(h){if(Ext.isArray(h)){for(var c=0,a=h.length;c<a;c++){var b=h[c];var d=this.findField(b.id);if(d){d.markInvalid(b.msg)}}}else{var e,g;for(g in h){if(!Ext.isFunction(h[g])&&(e=this.findField(g))){e.markInvalid(h[g])}}}return this},setValues:function(c){if(Ext.isArray(c)){for(var d=0,a=c.length;d<a;d++){var b=c[d];var e=this.findField(b.id);if(e){e.setValue(b.value);if(this.trackResetOnLoad){e.originalValue=e.getValue()}}}}else{var g,h;for(h in c){if(!Ext.isFunction(c[h])&&(g=this.findField(h))){g.setValue(c[h]);if(this.trackResetOnLoad){g.originalValue=g.getValue()}}}}return this},getValues:function(b){var a=Ext.lib.Ajax.serializeForm(this.el.dom);if(b===true){return a}return Ext.urlDecode(a)},getFieldValues:function(a){var d={},e,b,c;this.items.each(function(g){if(!g.disabled&&(a!==true||g.isDirty())){e=g.getName();b=d[e];c=g.getValue();if(Ext.isDefined(b)){if(Ext.isArray(b)){d[e].push(c)}else{d[e]=[b,c]}}else{d[e]=c}}});return d},clearInvalid:function(){this.items.each(function(a){a.clearInvalid()});return this},reset:function(){this.items.each(function(a){a.reset()});return this},add:function(){this.items.addAll(Array.prototype.slice.call(arguments,0));return this},remove:function(a){this.items.remove(a);return this},cleanDestroyed:function(){this.items.filterBy(function(a){return !!a.isDestroyed}).each(this.remove,this)},render:function(){this.items.each(function(a){if(a.isFormField&&!a.rendered&&document.getElementById(a.id)){a.applyToMarkup(a.id)}});return this},applyToFields:function(a){this.items.each(function(b){Ext.apply(b,a)});return this},applyIfToFields:function(a){this.items.each(function(b){Ext.applyIf(b,a)});return this},callFieldMethod:function(b,a){a=a||[];this.items.each(function(c){if(Ext.isFunction(c[b])){c[b].apply(c,a)}});return this}});Ext.BasicForm=Ext.form.BasicForm;Ext.FormPanel=Ext.extend(Ext.Panel,{minButtonWidth:75,labelAlign:\"left\",monitorValid:false,monitorPoll:200,layout:\"form\",initComponent:function(){this.form=this.createForm();Ext.FormPanel.superclass.initComponent.call(this);this.bodyCfg={tag:\"form\",cls:this.baseCls+\"-body\",method:this.method||\"POST\",id:this.formId||Ext.id()};if(this.fileUpload){this.bodyCfg.enctype=\"multipart/form-data\"}this.initItems();this.addEvents(\"clientvalidation\");this.relayEvents(this.form,[\"beforeaction\",\"actionfailed\",\"actioncomplete\"])},createForm:function(){var a=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,a)},initFields:function(){var c=this.form;var a=this;var b=function(d){if(a.isField(d)){c.add(d)}else{if(d.findBy&&d!=a){a.applySettings(d);if(d.items&&d.items.each){d.items.each(b,this)}}}};this.items.each(b,this)},applySettings:function(b){var a=b.ownerCt;Ext.applyIf(b,{labelAlign:a.labelAlign,labelWidth:a.labelWidth,itemCls:a.itemCls})},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(b,a){this.initFields();Ext.FormPanel.superclass.onRender.call(this,b,a);this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring();this.form.destroy(true);Ext.FormPanel.superclass.beforeDestroy.call(this)},isField:function(a){return !!a.setValue&&!!a.getValue&&!!a.markInvalid&&!!a.clearInvalid},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this);this.on({scope:this,add:this.onAddEvent,remove:this.onRemoveEvent});if(this.monitorValid){this.startMonitoring()}},onAdd:function(a){Ext.FormPanel.superclass.onAdd.call(this,a);this.processAdd(a)},onAddEvent:function(a,b){if(a!==this){this.processAdd(b)}},processAdd:function(a){if(this.isField(a)){this.form.add(a)}else{if(a.findBy){this.applySettings(a);this.form.add.apply(this.form,a.findBy(this.isField))}}},onRemove:function(a){Ext.FormPanel.superclass.onRemove.call(this,a);this.processRemove(a)},onRemoveEvent:function(a,b){if(a!==this){this.processRemove(b)}},processRemove:function(a){if(!this.destroying){if(this.isField(a)){this.form.remove(a)}else{if(a.findBy){Ext.each(a.findBy(this.isField),this.form.remove,this.form);this.form.cleanDestroyed()}}}},startMonitoring:function(){if(!this.validTask){this.validTask=new Ext.util.TaskRunner();this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this})}},stopMonitoring:function(){if(this.validTask){this.validTask.stopAll();this.validTask=null}},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this);if(this.form){this.form.items.each(function(){this.disable()})}},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this);if(this.form){this.form.items.each(function(){this.enable()})}},bindHandler:function(){var e=true;this.form.items.each(function(g){if(!g.isValid(true)){e=false;return false}});if(this.fbar){var b=this.fbar.items.items;for(var d=0,a=b.length;d<a;d++){var c=b[d];if(c.formBind===true&&c.disabled===e){c.setDisabled(!e)}}}this.fireEvent(\"clientvalidation\",this,e)}});Ext.reg(\"form\",Ext.FormPanel);Ext.form.FormPanel=Ext.FormPanel;Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:\"x-fieldset\",layout:\"form\",animCollapse:false,onRender:function(b,a){if(!this.el){this.el=document.createElement(\"fieldset\");this.el.id=this.id;if(this.title||this.header||this.checkboxToggle){this.el.appendChild(document.createElement(\"legend\")).className=this.baseCls+\"-header\"}}Ext.form.FieldSet.superclass.onRender.call(this,b,a);if(this.checkboxToggle){var c=typeof this.checkboxToggle==\"object\"?this.checkboxToggle:{tag:\"input\",type:\"checkbox\",name:this.checkboxName||this.id+\"-checkbox\"};this.checkbox=this.header.insertFirst(c);this.checkbox.dom.checked=!this.collapsed;this.mon(this.checkbox,\"click\",this.onCheckClick,this)}},onCollapse:function(a,b){if(this.checkbox){this.checkbox.dom.checked=false}Ext.form.FieldSet.superclass.onCollapse.call(this,a,b)},onExpand:function(a,b){if(this.checkbox){this.checkbox.dom.checked=true}Ext.form.FieldSet.superclass.onExpand.call(this,a,b)},onCheckClick:function(){this[this.checkbox.dom.checked?\"expand\":\"collapse\"]()}});Ext.reg(\"fieldset\",Ext.form.FieldSet);Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:\"Please enter the URL for the link:\",defaultLinkValue:\"http://\",fontFamilies:[\"Arial\",\"Courier New\",\"Tahoma\",\"Times New Roman\",\"Verdana\"],defaultFont:\"tahoma\",defaultValue:(Ext.isOpera||Ext.isIE6)?\"&#160;\":\"&#8203;\",actionMode:\"wrap\",validationEvent:false,deferHeight:true,initialized:false,activated:false,sourceEditMode:false,onFocus:Ext.emptyFn,iframePad:3,hideMode:\"offsets\",defaultAutoCreate:{tag:\"textarea\",style:\"width:500px;height:300px;\",autocomplete:\"off\"},initComponent:function(){this.addEvents(\"initialize\",\"activate\",\"beforesync\",\"beforepush\",\"sync\",\"push\",\"editmodechange\");Ext.form.HtmlEditor.superclass.initComponent.call(this)},createFontOptions:function(){var d=[],b=this.fontFamilies,c,g;for(var e=0,a=b.length;e<a;e++){c=b[e];g=c.toLowerCase();d.push('<option value=\"',g,'\" style=\"font-family:',c,';\"',(this.defaultFont==g?' selected=\"true\">':\">\"),c,\"</option>\")}return d.join(\"\")},createToolbar:function(e){var c=[];var a=Ext.QuickTips&&Ext.QuickTips.isEnabled();function d(k,h,i){return{itemId:k,cls:\"x-btn-icon\",iconCls:\"x-edit-\"+k,enableToggle:h!==false,scope:e,handler:i||e.relayBtnCmd,clickEvent:\"mousedown\",tooltip:a?e.buttonTips[k]||undefined:undefined,overflowText:e.buttonTips[k].title||undefined,tabIndex:-1}}if(this.enableFont&&!Ext.isSafari2){var g=new Ext.Toolbar.Item({autoEl:{tag:\"select\",cls:\"x-font-select\",html:this.createFontOptions()}});c.push(g,\"-\")}if(this.enableFormat){c.push(d(\"bold\"),d(\"italic\"),d(\"underline\"))}if(this.enableFontSize){c.push(\"-\",d(\"increasefontsize\",false,this.adjustFont),d(\"decreasefontsize\",false,this.adjustFont))}if(this.enableColors){c.push(\"-\",{itemId:\"forecolor\",cls:\"x-btn-icon\",iconCls:\"x-edit-forecolor\",clickEvent:\"mousedown\",tooltip:a?e.buttonTips.forecolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:true,focus:Ext.emptyFn,value:\"000000\",plain:true,listeners:{scope:this,select:function(i,h){this.execCmd(\"forecolor\",Ext.isWebKit||Ext.isIE?\"#\"+h:h);this.deferFocus()}},clickEvent:\"mousedown\"})},{itemId:\"backcolor\",cls:\"x-btn-icon\",iconCls:\"x-edit-backcolor\",clickEvent:\"mousedown\",tooltip:a?e.buttonTips.backcolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:\"FFFFFF\",plain:true,allowReselect:true,listeners:{scope:this,select:function(i,h){if(Ext.isGecko){this.execCmd(\"useCSS\",false);this.execCmd(\"hilitecolor\",h);this.execCmd(\"useCSS\",true);this.deferFocus()}else{this.execCmd(Ext.isOpera?\"hilitecolor\":\"backcolor\",Ext.isWebKit||Ext.isIE?\"#\"+h:h);this.deferFocus()}}},clickEvent:\"mousedown\"})})}if(this.enableAlignments){c.push(\"-\",d(\"justifyleft\"),d(\"justifycenter\"),d(\"justifyright\"))}if(!Ext.isSafari2){if(this.enableLinks){c.push(\"-\",d(\"createlink\",false,this.createLink))}if(this.enableLists){c.push(\"-\",d(\"insertorderedlist\"),d(\"insertunorderedlist\"))}if(this.enableSourceEdit){c.push(\"-\",d(\"sourceedit\",true,function(h){this.toggleSourceEdit(!this.sourceEditMode)}))}}var b=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild,items:c});if(g){this.fontSelect=g.el;this.mon(this.fontSelect,\"change\",function(){var h=this.fontSelect.dom.value;this.relayCmd(\"fontname\",h);this.deferFocus()},this)}this.mon(b.el,\"click\",function(h){h.preventDefault()});this.tb=b;this.tb.doLayout()},onDisable:function(){this.wrap.mask();Ext.form.HtmlEditor.superclass.onDisable.call(this)},onEnable:function(){this.wrap.unmask();Ext.form.HtmlEditor.superclass.onEnable.call(this)},setReadOnly:function(b){Ext.form.HtmlEditor.superclass.setReadOnly.call(this,b);if(this.initialized){if(Ext.isIE){this.getEditorBody().contentEditable=!b}else{this.setDesignMode(!b)}var a=this.getEditorBody();if(a){a.style.cursor=this.readOnly?\"default\":\"text\"}this.disableItems(b)}},getDocMarkup:function(){var a=Ext.fly(this.iframe).getHeight()-this.iframePad*2;return String.format('<html><head><style type=\"text/css\">body{border: 0; margin: 0; padding: {0}px; height: {1}px; cursor: text}</style></head><body></body></html>',this.iframePad,a)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:(this.iframe.contentDocument||this.getWin().document)},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(b,a){Ext.form.HtmlEditor.superclass.onRender.call(this,b,a);this.el.dom.style.border=\"0 none\";this.el.dom.setAttribute(\"tabIndex\",-1);this.el.addClass(\"x-hidden\");if(Ext.isIE){this.el.applyStyles(\"margin-top:-1px;margin-bottom:-1px;\")}this.wrap=this.el.wrap({cls:\"x-html-editor-wrap\",cn:{cls:\"x-html-editor-tb\"}});this.createToolbar(this);this.disableItems(true);this.tb.doLayout();this.createIFrame();if(!this.width){var c=this.el.getSize();this.setSize(c.width,this.height||c.height)}this.resizeEl=this.positionEl=this.wrap},createIFrame:function(){var a=document.createElement(\"iframe\");a.name=Ext.id();a.frameBorder=\"0\";a.style.overflow=\"auto\";a.src=Ext.SSL_SECURE_URL;this.wrap.dom.appendChild(a);this.iframe=a;this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100})},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);var b=this.getDoc();this.win=this.getWin();b.open();b.write(this.getDocMarkup());b.close();var a={run:function(){var c=this.getDoc();if(c.body||c.readyState==\"complete\"){Ext.TaskMgr.stop(a);this.setDesignMode(true);this.initEditor.defer(10,this)}},interval:10,duration:10000,scope:this};Ext.TaskMgr.start(a)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var a=this.getDoc();if(!a){return}if(!a.editorInitialized||this.getDesignMode()!=\"on\"){this.initFrame()}}},setDesignMode:function(b){var a=this.getDoc();if(a){if(this.readOnly){b=false}a.designMode=(/on|true/i).test(String(b).toLowerCase())?\"on\":\"off\"}},getDesignMode:function(){var a=this.getDoc();if(!a){return\"\"}return String(a.designMode).toLowerCase()},disableItems:function(a){if(this.fontSelect){this.fontSelect.dom.disabled=a}this.tb.items.each(function(b){if(b.getItemId()!=\"sourceedit\"){b.setDisabled(a)}})},onResize:function(b,c){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(Ext.isNumber(b)){var e=b-this.wrap.getFrameWidth(\"lr\");this.el.setWidth(e);this.tb.setWidth(e);this.iframe.style.width=Math.max(e,0)+\"px\"}if(Ext.isNumber(c)){var a=c-this.wrap.getFrameWidth(\"tb\")-this.tb.el.getHeight();this.el.setHeight(a);this.iframe.style.height=Math.max(a,0)+\"px\";var d=this.getEditorBody();if(d){d.style.height=Math.max((a-(this.iframePad*2)),0)+\"px\"}}}},toggleSourceEdit:function(b){var d,a;if(b===undefined){b=!this.sourceEditMode}this.sourceEditMode=b===true;var c=this.tb.getComponent(\"sourceedit\");if(c.pressed!==this.sourceEditMode){c.toggle(this.sourceEditMode);if(!c.xtbHidden){return}}if(this.sourceEditMode){this.previousSize=this.getSize();d=Ext.get(this.iframe).getHeight();this.disableItems(true);this.syncValue();this.iframe.className=\"x-hidden\";this.el.removeClass(\"x-hidden\");this.el.dom.removeAttribute(\"tabIndex\");this.el.focus();this.el.dom.style.height=d+\"px\"}else{a=parseInt(this.el.dom.style.height,10);if(this.initialized){this.disableItems(this.readOnly)}this.pushValue();this.iframe.className=\"\";this.el.addClass(\"x-hidden\");this.el.dom.setAttribute(\"tabIndex\",-1);this.deferFocus();this.setSize(this.previousSize);delete this.previousSize;this.iframe.style.height=a+\"px\"}this.fireEvent(\"editmodechange\",this,this.sourceEditMode)},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=\"http://\"){this.relayCmd(\"createlink\",a)}},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(a){Ext.form.HtmlEditor.superclass.setValue.call(this,a);this.pushValue();return this},cleanHtml:function(a){a=String(a);if(Ext.isWebKit){a=a.replace(/\\sclass=\"(?:Apple-style-span|khtml-block-placeholder)\"/gi,\"\")}if(a.charCodeAt(0)==this.defaultValue.replace(/\\D/g,\"\")){a=a.substring(1)}return a},syncValue:function(){if(this.initialized){var d=this.getEditorBody();var c=d.innerHTML;if(Ext.isWebKit){var b=d.getAttribute(\"style\");var a=b.match(/text-align:(.*?);/i);if(a&&a[1]){c='<div style=\"'+a[0]+'\">'+c+\"</div>\"}}c=this.cleanHtml(c);if(this.fireEvent(\"beforesync\",this,c)!==false){this.el.dom.value=c;this.fireEvent(\"sync\",this,c)}}},getValue:function(){this[this.sourceEditMode?\"pushValue\":\"syncValue\"]();return Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var a=this.el.dom.value;if(!this.activated&&a.length<1){a=this.defaultValue}if(this.fireEvent(\"beforepush\",this,a)!==false){this.getEditorBody().innerHTML=a;if(Ext.isGecko){this.setDesignMode(false);this.setDesignMode(true)}this.fireEvent(\"push\",this,a)}}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){if(this.win&&!this.sourceEditMode){this.win.focus()}else{this.el.focus()}},initEditor:function(){try{var c=this.getEditorBody(),a=this.el.getStyles(\"font-size\",\"font-family\",\"background-image\",\"background-repeat\",\"background-color\",\"color\"),g,b;a[\"background-attachment\"]=\"fixed\";c.bgProperties=\"fixed\";Ext.DomHelper.applyStyles(c,a);g=this.getDoc();if(g){try{Ext.EventManager.removeAll(g)}catch(d){}}b=this.onEditorEvent.createDelegate(this);Ext.EventManager.on(g,{mousedown:b,dblclick:b,click:b,keyup:b,buffer:100});if(Ext.isGecko){Ext.EventManager.on(g,\"keypress\",this.applyCommand,this)}if(Ext.isIE||Ext.isWebKit||Ext.isOpera){Ext.EventManager.on(g,\"keydown\",this.fixKeys,this)}g.editorInitialized=true;this.initialized=true;this.pushValue();this.setReadOnly(this.readOnly);this.fireEvent(\"initialize\",this)}catch(d){}},beforeDestroy:function(){if(this.monitorTask){Ext.TaskMgr.stop(this.monitorTask)}if(this.rendered){Ext.destroy(this.tb);var b=this.getDoc();if(b){try{Ext.EventManager.removeAll(b);for(var c in b){delete b[c]}}catch(a){}}if(this.wrap){this.wrap.dom.innerHTML=\"\";this.wrap.remove()}}Ext.form.HtmlEditor.superclass.beforeDestroy.call(this)},onFirstFocus:function(){this.activated=true;this.disableItems(this.readOnly);if(Ext.isGecko){this.win.focus();var a=this.win.getSelection();if(!a.focusNode||a.focusNode.nodeType!=3){var b=a.getRangeAt(0);b.selectNodeContents(this.getEditorBody());b.collapse(true);this.deferFocus()}try{this.execCmd(\"useCSS\",true);this.execCmd(\"styleWithCSS\",false)}catch(c){}}this.fireEvent(\"activate\",this)},adjustFont:function(b){var d=b.getItemId()==\"increasefontsize\"?1:-1,c=this.getDoc(),a=parseInt(c.queryCommandValue(\"FontSize\")||2,10);if((Ext.isSafari&&!Ext.isSafari2)||Ext.isChrome||Ext.isAir){if(a<=10){a=1+d}else{if(a<=13){a=2+d}else{if(a<=16){a=3+d}else{if(a<=18){a=4+d}else{if(a<=24){a=5+d}else{a=6+d}}}}}a=a.constrain(1,6)}else{if(Ext.isSafari){d*=2}a=Math.max(1,a+d)+(Ext.isSafari?\"px\":0)}this.execCmd(\"FontSize\",a)},onEditorEvent:function(a){this.updateToolbar()},updateToolbar:function(){if(this.readOnly){return}if(!this.activated){this.onFirstFocus();return}var b=this.tb.items.map,c=this.getDoc();if(this.enableFont&&!Ext.isSafari2){var a=(c.queryCommandValue(\"FontName\")||this.defaultFont).toLowerCase();if(a!=this.fontSelect.dom.value){this.fontSelect.dom.value=a}}if(this.enableFormat){b.bold.toggle(c.queryCommandState(\"bold\"));b.italic.toggle(c.queryCommandState(\"italic\"));b.underline.toggle(c.queryCommandState(\"underline\"))}if(this.enableAlignments){b.justifyleft.toggle(c.queryCommandState(\"justifyleft\"));b.justifycenter.toggle(c.queryCommandState(\"justifycenter\"));b.justifyright.toggle(c.queryCommandState(\"justifyright\"))}if(!Ext.isSafari2&&this.enableLists){b.insertorderedlist.toggle(c.queryCommandState(\"insertorderedlist\"));b.insertunorderedlist.toggle(c.queryCommandState(\"insertunorderedlist\"))}Ext.menu.MenuMgr.hideAll();this.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(b,a){(function(){this.focus();this.execCmd(b,a);this.updateToolbar()}).defer(10,this)},execCmd:function(b,a){var c=this.getDoc();c.execCommand(b,false,a===undefined?null:a);this.syncValue()},applyCommand:function(b){if(b.ctrlKey){var d=b.getCharCode(),a;if(d>0){d=String.fromCharCode(d);switch(d){case\"b\":a=\"bold\";break;case\"i\":a=\"italic\";break;case\"u\":a=\"underline\";break}if(a){this.win.focus();this.execCmd(a);this.deferFocus();b.preventDefault()}}}},insertAtCursor:function(c){if(!this.activated){return}if(Ext.isIE){this.win.focus();var b=this.getDoc(),a=b.selection.createRange();if(a){a.pasteHTML(c);this.syncValue();this.deferFocus()}}else{this.win.focus();this.execCmd(\"InsertHTML\",c);this.deferFocus()}},fixKeys:function(){if(Ext.isIE){return function(g){var a=g.getKey(),d=this.getDoc(),b;if(a==g.TAB){g.stopEvent();b=d.selection.createRange();if(b){b.collapse(true);b.pasteHTML(\"&nbsp;&nbsp;&nbsp;&nbsp;\");this.deferFocus()}}else{if(a==g.ENTER){b=d.selection.createRange();if(b){var c=b.parentElement();if(!c||c.tagName.toLowerCase()!=\"li\"){g.stopEvent();b.pasteHTML(\"<br />\");b.collapse(false);b.select()}}}}}}else{if(Ext.isOpera){return function(b){var a=b.getKey();if(a==b.TAB){b.stopEvent();this.win.focus();this.execCmd(\"InsertHTML\",\"&nbsp;&nbsp;&nbsp;&nbsp;\");this.deferFocus()}}}else{if(Ext.isWebKit){return function(b){var a=b.getKey();if(a==b.TAB){b.stopEvent();this.execCmd(\"InsertText\",\"\\t\");this.deferFocus()}else{if(a==b.ENTER){b.stopEvent();this.execCmd(\"InsertHtml\",\"<br /><br />\");this.deferFocus()}}}}}}}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:\"Bold (Ctrl+B)\",text:\"Make the selected text bold.\",cls:\"x-html-editor-tip\"},italic:{title:\"Italic (Ctrl+I)\",text:\"Make the selected text italic.\",cls:\"x-html-editor-tip\"},underline:{title:\"Underline (Ctrl+U)\",text:\"Underline the selected text.\",cls:\"x-html-editor-tip\"},increasefontsize:{title:\"Grow Text\",text:\"Increase the font size.\",cls:\"x-html-editor-tip\"},decreasefontsize:{title:\"Shrink Text\",text:\"Decrease the font size.\",cls:\"x-html-editor-tip\"},backcolor:{title:\"Text Highlight Color\",text:\"Change the background color of the selected text.\",cls:\"x-html-editor-tip\"},forecolor:{title:\"Font Color\",text:\"Change the color of the selected text.\",cls:\"x-html-editor-tip\"},justifyleft:{title:\"Align Text Left\",text:\"Align text to the left.\",cls:\"x-html-editor-tip\"},justifycenter:{title:\"Center Text\",text:\"Center text in the editor.\",cls:\"x-html-editor-tip\"},justifyright:{title:\"Align Text Right\",text:\"Align text to the right.\",cls:\"x-html-editor-tip\"},insertunorderedlist:{title:\"Bullet List\",text:\"Start a bulleted list.\",cls:\"x-html-editor-tip\"},insertorderedlist:{title:\"Numbered List\",text:\"Start a numbered list.\",cls:\"x-html-editor-tip\"},createlink:{title:\"Hyperlink\",text:\"Make the selected text a hyperlink.\",cls:\"x-html-editor-tip\"},sourceedit:{title:\"Source Edit\",text:\"Switch to source editing mode.\",cls:\"x-html-editor-tip\"}}});Ext.reg(\"htmleditor\",Ext.form.HtmlEditor);Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:undefined,maxValue:undefined,minText:\"The time in this field must be equal to or after {0}\",maxText:\"The time in this field must be equal to or before {0}\",invalidText:\"{0} is not a valid time\",format:\"g:i A\",altFormats:\"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A\",increment:15,mode:\"local\",triggerAction:\"all\",typeAhead:false,initDate:\"1/1/2008\",initDateFormat:\"j/n/Y\",initComponent:function(){if(Ext.isDefined(this.minValue)){this.setMinValue(this.minValue,true)}if(Ext.isDefined(this.maxValue)){this.setMaxValue(this.maxValue,true)}if(!this.store){this.generateStore(true)}Ext.form.TimeField.superclass.initComponent.call(this)},setMinValue:function(b,a){this.setLimit(b,true,a);return this},setMaxValue:function(b,a){this.setLimit(b,false,a);return this},generateStore:function(b){var c=this.minValue||new Date(this.initDate).clearTime(),a=this.maxValue||new Date(this.initDate).clearTime().add(\"mi\",(24*60)-1),d=[];while(c<=a){d.push(c.dateFormat(this.format));c=c.add(\"mi\",this.increment)}this.bindStore(d,b)},setLimit:function(b,g,a){var e;if(Ext.isString(b)){e=this.parseDate(b)}else{if(Ext.isDate(b)){e=b}}if(e){var c=new Date(this.initDate).clearTime();c.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());this[g?\"minValue\":\"maxValue\"]=c;if(!a){this.generateStore()}}},getValue:function(){var a=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(a))||\"\"},setValue:function(a){return Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},validateValue:Ext.form.DateField.prototype.validateValue,formatDate:Ext.form.DateField.prototype.formatDate,parseDate:function(h){if(!h||Ext.isDate(h)){return h}var k=this.initDate+\" \",g=this.initDateFormat+\" \",b=Date.parseDate(k+h,g+this.format),c=this.altFormats;if(!b&&c){if(!this.altFormatsArray){this.altFormatsArray=c.split(\"|\")}for(var e=0,d=this.altFormatsArray,a=d.length;e<a&&!b;e++){b=Date.parseDate(k+h,g+d[e])}}return b}});Ext.reg(\"timefield\",Ext.form.TimeField);Ext.form.SliderField=Ext.extend(Ext.form.Field,{useTips:true,tipText:null,actionMode:\"wrap\",initComponent:function(){var b=Ext.copyTo({id:this.id+\"-slider\"},this.initialConfig,[\"vertical\",\"minValue\",\"maxValue\",\"decimalPrecision\",\"keyIncrement\",\"increment\",\"clickToChange\",\"animate\"]);if(this.useTips){var a=this.tipText?{getText:this.tipText}:{};b.plugins=[new Ext.slider.Tip(a)]}this.slider=new Ext.Slider(b);Ext.form.SliderField.superclass.initComponent.call(this)},onRender:function(b,a){this.autoCreate={id:this.id,name:this.name,type:\"hidden\",tag:\"input\"};Ext.form.SliderField.superclass.onRender.call(this,b,a);this.wrap=this.el.wrap({cls:\"x-form-field-wrap\"});this.resizeEl=this.positionEl=this.wrap;this.slider.render(this.wrap)},onResize:function(b,c,d,a){Ext.form.SliderField.superclass.onResize.call(this,b,c,d,a);this.slider.setSize(b,c)},initEvents:function(){Ext.form.SliderField.superclass.initEvents.call(this);this.slider.on(\"change\",this.onChange,this)},onChange:function(b,a){this.setValue(a,undefined,true)},onEnable:function(){Ext.form.SliderField.superclass.onEnable.call(this);this.slider.enable()},onDisable:function(){Ext.form.SliderField.superclass.onDisable.call(this);this.slider.disable()},beforeDestroy:function(){Ext.destroy(this.slider);Ext.form.SliderField.superclass.beforeDestroy.call(this)},alignErrorIcon:function(){this.errorIcon.alignTo(this.slider.el,\"tl-tr\",[2,0])},setMinValue:function(a){this.slider.setMinValue(a);return this},setMaxValue:function(a){this.slider.setMaxValue(a);return this},setValue:function(c,b,a){if(!a){this.slider.setValue(c,b)}return Ext.form.SliderField.superclass.setValue.call(this,this.slider.getValue())},getValue:function(){return this.slider.getValue()}});Ext.reg(\"sliderfield\",Ext.form.SliderField);Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(b,a){if(!this.el){this.el=document.createElement(\"label\");this.el.id=this.getId();this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):(this.html||\"\");if(this.forId){this.el.setAttribute(\"for\",this.forId)}}Ext.form.Label.superclass.onRender.call(this,b,a)},setText:function(a,b){var c=b===false;this[!c?\"text\":\"html\"]=a;delete this[c?\"text\":\"html\"];if(this.rendered){this.el.dom.innerHTML=b!==false?Ext.util.Format.htmlEncode(a):a}return this}});Ext.reg(\"label\",Ext.form.Label);Ext.form.Action=function(b,a){this.form=b;this.options=a||{}};Ext.form.Action.CLIENT_INVALID=\"client\";Ext.form.Action.SERVER_INVALID=\"server\";Ext.form.Action.CONNECT_FAILURE=\"connect\";Ext.form.Action.LOAD_FAILURE=\"load\";Ext.form.Action.prototype={type:\"default\",run:function(a){},success:function(a){},handleResponse:function(a){},failure:function(a){this.response=a;this.failureType=Ext.form.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}this.result=this.handleResponse(a);return this.result},getUrl:function(c){var a=this.options.url||this.form.url||this.form.el.dom.action;if(c){var b=this.getParams();if(b){a=Ext.urlAppend(a,b)}}return a},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||\"POST\").toUpperCase()},getParams:function(){var a=this.form.baseParams;var b=this.options.params;if(b){if(typeof b==\"object\"){b=Ext.urlEncode(Ext.applyIf(b,a))}else{if(typeof b==\"string\"&&a){b+=\"&\"+Ext.urlEncode(a)}}}else{if(a){b=Ext.urlEncode(a)}}return b},createCallback:function(a){var a=a||{};return{success:this.success,failure:this.failure,scope:this,timeout:(a.timeout*1000)||(this.form.timeout*1000),upload:this.form.fileUpload?this.success:undefined}}};Ext.form.Action.Submit=function(b,a){Ext.form.Action.Submit.superclass.constructor.call(this,b,a)};Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:\"submit\",run:function(){var e=this.options,g=this.getMethod(),d=g==\"GET\";if(e.clientValidation===false||this.form.isValid()){if(e.submitEmptyText===false){var a=this.form.items,c=[],b=function(h){if(h.el.getValue()==h.emptyText){c.push(h);h.el.dom.value=\"\"}if(h.isComposite&&h.rendered){h.items.each(b)}};a.each(b)}Ext.Ajax.request(Ext.apply(this.createCallback(e),{form:this.form.el.dom,url:this.getUrl(d),method:g,headers:e.headers,params:!d?this.getParams():null,isUpload:this.form.fileUpload}));if(e.submitEmptyText===false){Ext.each(c,function(h){if(h.applyEmptyText){h.applyEmptyText()}})}}else{if(e.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},success:function(b){var a=this.processResponse(b);if(a===true||a.success){this.form.afterAction(this,true);return}if(a.errors){this.form.markInvalid(a.errors)}this.failureType=Ext.form.Action.SERVER_INVALID;this.form.afterAction(this,false)},handleResponse:function(c){if(this.form.errorReader){var b=this.form.errorReader.read(c);var g=[];if(b.records){for(var d=0,a=b.records.length;d<a;d++){var e=b.records[d];g[d]=e.data}}if(g.length<1){g=null}return{success:b.success,errors:g}}return Ext.decode(c.responseText)}});Ext.form.Action.Load=function(b,a){Ext.form.Action.Load.superclass.constructor.call(this,b,a);this.reader=this.form.reader};Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:\"load\",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(false),headers:this.options.headers,params:this.getParams()}))},success:function(b){var a=this.processResponse(b);if(a===true||!a.success||!a.data){this.failureType=Ext.form.Action.LOAD_FAILURE;this.form.afterAction(this,false);return}this.form.clearInvalid();this.form.setValues(a.data);this.form.afterAction(this,true)},handleResponse:function(b){if(this.form.reader){var a=this.form.reader.read(b);var c=a.records&&a.records[0]?a.records[0].data:null;return{success:a.success,data:c}}return Ext.decode(b.responseText)}});Ext.form.Action.DirectLoad=Ext.extend(Ext.form.Action.Load,{constructor:function(b,a){Ext.form.Action.DirectLoad.superclass.constructor.call(this,b,a)},type:\"directload\",run:function(){var a=this.getParams();a.push(this.success,this);this.form.api.load.apply(window,a)},getParams:function(){var c=[],h={};var e=this.form.baseParams;var g=this.options.params;Ext.apply(h,g,e);var b=this.form.paramOrder;if(b){for(var d=0,a=b.length;d<a;d++){c.push(h[b[d]])}}else{if(this.form.paramsAsHash){c.push(h)}}return c},processResponse:function(a){this.result=a;return a},success:function(a,b){if(b.type==Ext.Direct.exceptions.SERVER){a={}}Ext.form.Action.DirectLoad.superclass.success.call(this,a)}});Ext.form.Action.DirectSubmit=Ext.extend(Ext.form.Action.Submit,{constructor:function(b,a){Ext.form.Action.DirectSubmit.superclass.constructor.call(this,b,a)},type:\"directsubmit\",run:function(){var a=this.options;if(a.clientValidation===false||this.form.isValid()){this.success.params=this.getParams();this.form.api.submit(this.form.el.dom,this.success,this)}else{if(a.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},getParams:function(){var c={};var a=this.form.baseParams;var b=this.options.params;Ext.apply(c,b,a);return c},processResponse:function(a){this.result=a;return a},success:function(a,b){if(b.type==Ext.Direct.exceptions.SERVER){a={}}Ext.form.Action.DirectSubmit.superclass.success.call(this,a)}});Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit,directload:Ext.form.Action.DirectLoad,directsubmit:Ext.form.Action.DirectSubmit};Ext.form.VTypes=function(){var c=/^[a-zA-Z_]+$/,d=/^[a-zA-Z0-9_]+$/,b=/^(\\w+)([\\-+.][\\w]+)*@(\\w[\\-\\w]*\\.){1,5}([A-Za-z]){2,6}$/,a=/(((^https?)|(^ftp)):\\/\\/([\\-\\w]+\\.)+\\w{2,3}(\\/[%\\-\\w]+(\\.\\w{2,})?)*(([\\w\\-\\.\\?\\\\\\/+@&#;`~=%!]*)(\\.\\w{2,})?)*\\/?)/i;return{email:function(e){return b.test(e)},emailText:'This field should be an e-mail address in the format \"user@example.com\"',emailMask:/[a-z0-9_\\.\\-@\\+]/i,url:function(e){return a.test(e)},urlText:'This field should be a URL in the format \"http://www.example.com\"',alpha:function(e){return c.test(e)},alphaText:\"This field should only contain letters and _\",alphaMask:/[a-z_]/i,alphanum:function(e){return d.test(e)},alphanumText:\"This field should only contain letters, numbers and _\",alphanumMask:/[a-z0-9_]/i}}();Ext.grid.GridPanel=Ext.extend(Ext.Panel,{autoExpandColumn:false,autoExpandMax:1000,autoExpandMin:50,columnLines:false,ddText:\"{0} selected row{1}\",deferRowRender:true,enableColumnHide:true,enableColumnMove:true,enableDragDrop:false,enableHdMenu:true,loadMask:false,minColumnWidth:25,stripeRows:false,trackMouseOver:true,stateEvents:[\"columnmove\",\"columnresize\",\"sortchange\",\"groupchange\"],view:null,bubbleEvents:[],rendered:false,viewReady:false,initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this);if(this.columnLines){this.cls=(this.cls||\"\")+\" x-grid-with-col-lines\"}this.autoScroll=false;this.autoWidth=false;if(Ext.isArray(this.columns)){this.colModel=new Ext.grid.ColumnModel(this.columns);delete this.columns}if(this.ds){this.store=this.ds;delete this.ds}if(this.cm){this.colModel=this.cm;delete this.cm}if(this.sm){this.selModel=this.sm;delete this.sm}this.store=Ext.StoreMgr.lookup(this.store);this.addEvents(\"click\",\"dblclick\",\"contextmenu\",\"mousedown\",\"mouseup\",\"mouseover\",\"mouseout\",\"keypress\",\"keydown\",\"cellmousedown\",\"rowmousedown\",\"headermousedown\",\"groupmousedown\",\"rowbodymousedown\",\"containermousedown\",\"cellclick\",\"celldblclick\",\"rowclick\",\"rowdblclick\",\"headerclick\",\"headerdblclick\",\"groupclick\",\"groupdblclick\",\"containerclick\",\"containerdblclick\",\"rowbodyclick\",\"rowbodydblclick\",\"rowcontextmenu\",\"cellcontextmenu\",\"headercontextmenu\",\"groupcontextmenu\",\"containercontextmenu\",\"rowbodycontextmenu\",\"bodyscroll\",\"columnresize\",\"columnmove\",\"sortchange\",\"groupchange\",\"reconfigure\",\"viewready\")},onRender:function(d,a){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var e=this.getGridEl();this.el.addClass(\"x-grid-panel\");this.mon(e,{scope:this,mousedown:this.onMouseDown,click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu});this.relayEvents(e,[\"mousedown\",\"mouseup\",\"mouseover\",\"mouseout\",\"keypress\",\"keydown\"]);var b=this.getView();b.init(this);b.render();this.getSelectionModel().init(this)},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this);if(this.loadMask){this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask))}},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this);this.mon(this.colModel,\"hiddenchange\",this.saveState,this,{delay:100})},applyState:function(a){var l=this.colModel,g=a.columns,k=this.store,n,h,m;if(g){for(var d=0,e=g.length;d<e;d++){n=g[d];h=l.getColumnById(n.id);if(h){m=l.getIndexById(n.id);l.setState(m,{hidden:n.hidden,width:n.width,sortable:n.sortable});if(m!=d){l.moveColumn(m,d)}}}}if(k){n=a.sort;if(n){k[k.remoteSort?\"setDefaultSort\":\"sort\"](n.field,n.direction)}n=a.group;if(k.groupBy){if(n){k.groupBy(n)}else{k.clearGrouping()}}}var b=Ext.apply({},a);delete b.columns;delete b.sort;Ext.grid.GridPanel.superclass.applyState.call(this,b)},getState:function(){var g={columns:[]},b=this.store,e,a;for(var d=0,h;(h=this.colModel.config[d]);d++){g.columns[d]={id:h.id,width:h.width};if(h.hidden){g.columns[d].hidden=true}if(h.sortable){g.columns[d].sortable=true}}if(b){e=b.getSortState();if(e){g.sort=e}if(b.getGroupState){a=b.getGroupState();if(a){g.group=a}}}return g},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);var a=this.view;this.on(\"bodyresize\",a.layout,a);a.layout(true);if(this.deferRowRender){if(!this.deferRowRenderTask){this.deferRowRenderTask=new Ext.util.DelayedTask(a.afterRender,this.view)}this.deferRowRenderTask.delay(10)}else{a.afterRender()}this.viewReady=true},reconfigure:function(a,b){var c=this.rendered;if(c){if(this.loadMask){this.loadMask.destroy();this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:a},this.initialConfig.loadMask))}}if(this.view){this.view.initData(a,b)}this.store=a;this.colModel=b;if(c){this.view.refresh(true)}this.fireEvent(\"reconfigure\",this,a,b)},onDestroy:function(){if(this.deferRowRenderTask&&this.deferRowRenderTask.cancel){this.deferRowRenderTask.cancel()}if(this.rendered){Ext.destroy(this.view,this.loadMask)}else{if(this.store&&this.store.autoDestroy){this.store.destroy()}}Ext.destroy(this.colModel,this.selModel);this.store=this.selModel=this.colModel=this.view=this.loadMask=null;Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(a,b){this.view.processEvent(a,b)},onClick:function(a){this.processEvent(\"click\",a)},onMouseDown:function(a){this.processEvent(\"mousedown\",a)},onContextMenu:function(b,a){this.processEvent(\"contextmenu\",b)},onDblClick:function(a){this.processEvent(\"dblclick\",a)},walkCells:function(l,c,b,e,k){var i=this.colModel,g=i.getColumnCount(),a=this.store,h=a.getCount(),d=true;if(b<0){if(c<0){l--;d=false}while(l>=0){if(!d){c=g-1}d=false;while(c>=0){if(e.call(k||this,l,c,i)===true){return[l,c]}c--}l--}}else{if(c>=g){l++;d=false}while(l<h){if(!d){c=0}d=false;while(c<g){if(e.call(k||this,l,c,i)===true){return[l,c]}c++}l++}}return null},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)}return this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){if(!this.view){this.view=new Ext.grid.GridView(this.viewConfig)}return this.view},getDragDropText:function(){var a=this.selModel.getCount();return String.format(this.ddText,a,a==1?\"\":\"s\")}});Ext.reg(\"grid\",Ext.grid.GridPanel);Ext.grid.PivotGrid=Ext.extend(Ext.grid.GridPanel,{aggregator:\"sum\",renderer:undefined,initComponent:function(){Ext.grid.PivotGrid.superclass.initComponent.apply(this,arguments);this.initAxes();this.enableColumnResize=false;this.viewConfig=Ext.apply(this.viewConfig||{},{forceFit:true});this.colModel=new Ext.grid.ColumnModel({})},getAggregator:function(){if(typeof this.aggregator==\"string\"){return Ext.grid.PivotAggregatorMgr.types[this.aggregator]}else{return this.aggregator}},setAggregator:function(a){this.aggregator=a},setMeasure:function(a){this.measure=a},setLeftAxis:function(b,a){this.leftAxis=b;if(a){this.view.refresh()}},setTopAxis:function(b,a){this.topAxis=b;if(a){this.view.refresh()}},initAxes:function(){var a=Ext.grid.PivotAxis;if(!(this.leftAxis instanceof a)){this.setLeftAxis(new a({orientation:\"vertical\",dimensions:this.leftAxis||[],store:this.store}))}if(!(this.topAxis instanceof a)){this.setTopAxis(new a({orientation:\"horizontal\",dimensions:this.topAxis||[],store:this.store}))}},extractData:function(){var c=this.store.data.items,s=c.length,q=[],h,g,e,d;if(s==0){return[]}var l=this.leftAxis.getTuples(),o=l.length,m=this.topAxis.getTuples(),a=m.length,b=this.getAggregator();for(g=0;g<s;g++){h=c[g];for(e=0;e<o;e++){q[e]=q[e]||[];if(l[e].matcher(h)===true){for(d=0;d<a;d++){q[e][d]=q[e][d]||[];if(m[d].matcher(h)){q[e][d].push(h)}}}}}var n=q.length,p,r;for(g=0;g<n;g++){r=q[g];p=r.length;for(e=0;e<p;e++){q[g][e]=b(q[g][e],this.measure)}}return q},getView:function(){if(!this.view){this.view=new Ext.grid.PivotGridView(this.viewConfig)}return this.view}});Ext.reg(\"pivotgrid\",Ext.grid.PivotGrid);Ext.grid.PivotAggregatorMgr=new Ext.AbstractManager();Ext.grid.PivotAggregatorMgr.registerType(\"sum\",function(a,c){var e=a.length,d=0,b;for(b=0;b<e;b++){d+=a[b].get(c)}return d});Ext.grid.PivotAggregatorMgr.registerType(\"avg\",function(a,c){var e=a.length,d=0,b;for(b=0;b<e;b++){d+=a[b].get(c)}return(d/e)||\"n/a\"});Ext.grid.PivotAggregatorMgr.registerType(\"min\",function(a,c){var e=[],d=a.length,b;for(b=0;b<d;b++){e.push(a[b].get(c))}return Math.min.apply(this,e)||\"n/a\"});Ext.grid.PivotAggregatorMgr.registerType(\"max\",function(a,c){var e=[],d=a.length,b;for(b=0;b<d;b++){e.push(a[b].get(c))}return Math.max.apply(this,e)||\"n/a\"});Ext.grid.PivotAggregatorMgr.registerType(\"count\",function(a,b){return a.length});Ext.grid.GridView=Ext.extend(Ext.util.Observable,{deferEmptyText:true,scrollOffset:undefined,autoFill:false,forceFit:false,sortClasses:[\"sort-asc\",\"sort-desc\"],sortAscText:\"Sort Ascending\",sortDescText:\"Sort Descending\",columnsText:\"Columns\",selectedRowClass:\"x-grid3-row-selected\",borderWidth:2,tdClass:\"x-grid3-cell\",hdCls:\"x-grid3-hd\",markDirty:true,cellSelectorDepth:4,rowSelectorDepth:10,rowBodySelectorDepth:10,cellSelector:\"td.x-grid3-cell\",rowSelector:\"div.x-grid3-row\",rowBodySelector:\"div.x-grid3-row-body\",firstRowCls:\"x-grid3-row-first\",lastRowCls:\"x-grid3-row-last\",rowClsRe:/(?:^|\\s+)x-grid3-row-(first|last|alt)(?:\\s+|$)/g,headerMenuOpenCls:\"x-grid3-hd-menu-open\",rowOverCls:\"x-grid3-row-over\",constructor:function(a){Ext.apply(this,a);this.addEvents(\"beforerowremoved\",\"beforerowsinserted\",\"beforerefresh\",\"rowremoved\",\"rowsinserted\",\"rowupdated\",\"refresh\");Ext.grid.GridView.superclass.constructor.call(this)},masterTpl:new Ext.Template('<div class=\"x-grid3\" hidefocus=\"true\">','<div class=\"x-grid3-viewport\">','<div class=\"x-grid3-header\">','<div class=\"x-grid3-header-inner\">','<div class=\"x-grid3-header-offset\" style=\"{ostyle}\">{header}</div>',\"</div>\",'<div class=\"x-clear\"></div>',\"</div>\",'<div class=\"x-grid3-scroller\">','<div class=\"x-grid3-body\" style=\"{bstyle}\">{body}</div>','<a href=\"#\" class=\"x-grid3-focus\" tabIndex=\"-1\"></a>',\"</div>\",\"</div>\",'<div class=\"x-grid3-resize-marker\">&#160;</div>','<div class=\"x-grid3-resize-proxy\">&#160;</div>',\"</div>\"),headerTpl:new Ext.Template('<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"{tstyle}\">',\"<thead>\",'<tr class=\"x-grid3-hd-row\">{cells}</tr>',\"</thead>\",\"</table>\"),bodyTpl:new Ext.Template(\"{rows}\"),cellTpl:new Ext.Template('<td class=\"x-grid3-col x-grid3-cell x-grid3-td-{id} {css}\" style=\"{style}\" tabIndex=\"0\" {cellAttr}>','<div class=\"x-grid3-cell-inner x-grid3-col-{id}\" unselectable=\"on\" {attr}>{value}</div>',\"</td>\"),initTemplates:function(){var c=this.templates||{},d,b,g=new Ext.Template('<td class=\"x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}\" style=\"{style}\">','<div {tooltip} {attr} class=\"x-grid3-hd-inner x-grid3-hd-{id}\" unselectable=\"on\" style=\"{istyle}\">',this.grid.enableHdMenu?'<a class=\"x-grid3-hd-btn\" href=\"#\"></a>':\"\",\"{value}\",'<img alt=\"\" class=\"x-grid3-sort-icon\" src=\"',Ext.BLANK_IMAGE_URL,'\" />',\"</div>\",\"</td>\"),a=['<tr class=\"x-grid3-row-body-tr\" style=\"{bodyStyle}\">','<td colspan=\"{cols}\" class=\"x-grid3-body-cell\" tabIndex=\"0\" hidefocus=\"on\">','<div class=\"x-grid3-row-body\">{body}</div>',\"</td>\",\"</tr>\"].join(\"\"),e=['<table class=\"x-grid3-row-table\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"{tstyle}\">',\"<tbody>\",\"<tr>{cells}</tr>\",this.enableRowBody?a:\"\",\"</tbody>\",\"</table>\"].join(\"\");Ext.applyIf(c,{hcell:g,cell:this.cellTpl,body:this.bodyTpl,header:this.headerTpl,master:this.masterTpl,row:new Ext.Template('<div class=\"x-grid3-row {alt}\" style=\"{tstyle}\">'+e+\"</div>\"),rowInner:new Ext.Template(e)});for(b in c){d=c[b];if(d&&Ext.isFunction(d.compile)&&!d.compiled){d.disableFormats=true;d.compile()}}this.templates=c;this.colRe=new RegExp(\"x-grid3-td-([^\\\\s]+)\",\"\")},fly:function(a){if(!this._flyweight){this._flyweight=new Ext.Element.Flyweight(document.body)}this._flyweight.dom=a;return this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var b=Ext.Element,d=Ext.get(this.grid.getGridEl().dom.firstChild),e=new b(d.child(\"div.x-grid3-viewport\")),c=new b(e.child(\"div.x-grid3-header\")),a=new b(e.child(\"div.x-grid3-scroller\"));if(this.grid.hideHeaders){c.setDisplayed(false)}if(this.forceFit){a.setStyle(\"overflow-x\",\"hidden\")}Ext.apply(this,{el:d,mainWrap:e,scroller:a,mainHd:c,innerHd:c.child(\"div.x-grid3-header-inner\").dom,mainBody:new b(b.fly(a).child(\"div.x-grid3-body\")),focusEl:new b(b.fly(a).child(\"a\")),resizeMarker:new b(d.child(\"div.x-grid3-resize-marker\")),resizeProxy:new b(d.child(\"div.x-grid3-resize-proxy\"))});this.focusEl.swallowEvent(\"click\",true)},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(a){if(!a){return false}return this.fly(a).findParent(this.cellSelector,this.cellSelectorDepth)},findCellIndex:function(d,c){var b=this.findCell(d),a;if(b){a=this.fly(b).hasClass(c);if(!c||a){return this.getCellIndex(b)}}return false},getCellIndex:function(b){if(b){var a=b.className.match(this.colRe);if(a&&a[1]){return this.cm.getIndexById(a[1])}}return false},findHeaderCell:function(b){var a=this.findCell(b);return a&&this.fly(a).hasClass(this.hdCls)?a:null},findHeaderIndex:function(a){return this.findCellIndex(a,this.hdCls)},findRow:function(a){if(!a){return false}return this.fly(a).findParent(this.rowSelector,this.rowSelectorDepth)},findRowIndex:function(a){var b=this.findRow(a);return b?b.rowIndex:false},findRowBody:function(a){if(!a){return false}return this.fly(a).findParent(this.rowBodySelector,this.rowBodySelectorDepth)},getRow:function(a){return this.getRows()[a]},getCell:function(b,a){return Ext.fly(this.getRow(b)).query(this.cellSelector)[a]},getHeaderCell:function(a){return this.mainHd.dom.getElementsByTagName(\"td\")[a]},addRowClass:function(b,a){var c=this.getRow(b);if(c){this.fly(c).addClass(a)}},removeRowClass:function(c,a){var b=this.getRow(c);if(b){this.fly(b).removeClass(a)}},removeRow:function(a){Ext.removeNode(this.getRow(a));this.syncFocusEl(a)},removeRows:function(c,a){var b=this.mainBody.dom,d;for(d=c;d<=a;d++){Ext.removeNode(b.childNodes[c])}this.syncFocusEl(c)},getScrollState:function(){var a=this.scroller.dom;return{left:a.scrollLeft,top:a.scrollTop}},restoreScroll:function(a){var b=this.scroller.dom;b.scrollLeft=a.left;b.scrollTop=a.top},scrollToTop:function(){var a=this.scroller.dom;a.scrollTop=0;a.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var a=this.scroller.dom;this.grid.fireEvent(\"bodyscroll\",a.scrollLeft,a.scrollTop)},syncHeaderScroll:function(){var a=this.innerHd,b=this.scroller.dom.scrollLeft;a.scrollLeft=b;a.scrollLeft=b},updateSortIcon:function(d,c){var a=this.sortClasses,b=a[c==\"DESC\"?1:0],e=this.mainHd.select(\"td\").removeClass(a);e.item(d).addClass(b)},updateAllColumnWidths:function(){var e=this.getTotalWidth(),k=this.cm.getColumnCount(),m=this.getRows(),g=m.length,b=[],l,a,h,d,c;for(d=0;d<k;d++){b[d]=this.getColumnWidth(d);this.getHeaderCell(d).style.width=b[d]}this.updateHeaderWidth();for(d=0;d<g;d++){l=m[d];l.style.width=e;a=l.firstChild;if(a){a.style.width=e;h=a.rows[0];for(c=0;c<k;c++){h.childNodes[c].style.width=b[c]}}}this.onAllColumnWidthsUpdated(b,e)},updateColumnWidth:function(d,b){var c=this.getColumnWidth(d),k=this.getTotalWidth(),h=this.getHeaderCell(d),a=this.getRows(),e=a.length,m,g,l;this.updateHeaderWidth();h.style.width=c;for(g=0;g<e;g++){m=a[g];l=m.firstChild;m.style.width=k;if(l){l.style.width=k;l.rows[0].childNodes[d].style.width=c}}this.onColumnWidthUpdated(d,c,k)},updateColumnHidden:function(b,k){var h=this.getTotalWidth(),l=k?\"none\":\"\",g=this.getHeaderCell(b),a=this.getRows(),d=a.length,m,c,e;this.updateHeaderWidth();g.style.display=l;for(e=0;e<d;e++){m=a[e];m.style.width=h;c=m.firstChild;if(c){c.style.width=h;c.rows[0].childNodes[b].style.display=l}}this.onColumnHiddenUpdated(b,k,h);delete this.lastViewWidth;this.layout()},doRender:function(d,v,m,a,r,t){var h=this.templates,c=h.cell,y=h.row,o=r-1,b=\"width:\"+this.getTotalWidth()+\";\",k=[],l=[],n={tstyle:b},q={},w=v.length,x,g,e,u,s,p;for(s=0;s<w;s++){e=v[s];l=[];p=s+a;for(u=0;u<r;u++){g=d[u];q.id=g.id;q.css=u===0?\"x-grid3-cell-first \":(u==o?\"x-grid3-cell-last \":\"\");q.attr=q.cellAttr=\"\";q.style=g.style;q.value=g.renderer.call(g.scope,e.data[g.name],q,e,p,u,m);if(Ext.isEmpty(q.value)){q.value=\"&#160;\"}if(this.markDirty&&e.dirty&&typeof e.modified[g.name]!=\"undefined\"){q.css+=\" x-grid3-dirty-cell\"}l[l.length]=c.apply(q)}x=[];if(t&&((p+1)%2===0)){x[0]=\"x-grid3-row-alt\"}if(e.dirty){x[1]=\" x-grid3-dirty-row\"}n.cols=r;if(this.getRowClass){x[2]=this.getRowClass(e,p,n,m)}n.alt=x.join(\" \");n.cells=l.join(\"\");k[k.length]=y.apply(n)}return k.join(\"\")},processRows:function(a,g){if(!this.ds||this.ds.getCount()<1){return}var d=this.getRows(),c=d.length,e,b;g=g||!this.grid.stripeRows;a=a||0;for(b=0;b<c;b++){e=d[b];if(e){e.rowIndex=b;if(!g){e.className=e.className.replace(this.rowClsRe,\" \");if((b+1)%2===0){e.className+=\" x-grid3-row-alt\"}}}}if(a===0){Ext.fly(d[0]).addClass(this.firstRowCls)}Ext.fly(d[c-1]).addClass(this.lastRowCls)},afterRender:function(){if(!this.ds||!this.cm){return}this.mainBody.dom.innerHTML=this.renderBody()||\"&#160;\";this.processRows(0,true);if(this.deferEmptyText!==true){this.applyEmptyText()}this.grid.fireEvent(\"viewready\",this.grid)},afterRenderUI:function(){var a=this.grid;this.initElements();Ext.fly(this.innerHd).on(\"click\",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on(\"scroll\",this.syncScroll,this);if(a.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(a,this.mainHd.dom)}if(a.enableColumnMove){this.columnDrag=new Ext.grid.GridView.ColumnDragZone(a,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(a,this.mainHd.dom)}if(a.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:a.id+\"-hctx\"});this.hmenu.add({itemId:\"asc\",text:this.sortAscText,cls:\"xg-hmenu-sort-asc\"},{itemId:\"desc\",text:this.sortDescText,cls:\"xg-hmenu-sort-desc\"});if(a.enableColumnHide!==false){this.colMenu=new Ext.menu.Menu({id:a.id+\"-hcols-menu\"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick});this.hmenu.add(\"-\",{itemId:\"columns\",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:\"x-cols-icon\"})}this.hmenu.on(\"itemclick\",this.handleHdMenuClick,this)}if(a.trackMouseOver){this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut})}if(a.enableDragDrop||a.enableDrag){this.dragZone=new Ext.grid.GridDragZone(a,{ddGroup:a.ddGroup||\"GridDD\"})}this.updateHeaderSortState()},renderUI:function(){var a=this.templates;return a.master.apply({body:a.body.apply({rows:\"&#160;\"}),header:this.renderHeaders(),ostyle:\"width:\"+this.getOffsetWidth()+\";\",bstyle:\"width:\"+this.getTotalWidth()+\";\"})},processEvent:function(b,h){var i=h.getTarget(),a=this.grid,d=this.findHeaderIndex(i),l,k,c,g;a.fireEvent(b,h);if(d!==false){a.fireEvent(\"header\"+b,a,d,h)}else{l=this.findRowIndex(i);if(l!==false){k=this.findCellIndex(i);if(k!==false){c=a.colModel.getColumnAt(k);if(a.fireEvent(\"cell\"+b,a,l,k,h)!==false){if(!c||(c.processEvent&&(c.processEvent(b,h,a,l,k)!==false))){a.fireEvent(\"row\"+b,a,l,h)}}}else{if(a.fireEvent(\"row\"+b,a,l,h)!==false){(g=this.findRowBody(i))&&a.fireEvent(\"rowbody\"+b,a,l,h)}}}else{a.fireEvent(\"container\"+b,a,h)}}},layout:function(k){if(!this.mainBody){return}var a=this.grid,d=a.getGridEl(),c=d.getSize(true),i=c.width,b=c.height,h=this.scroller,g,e,l;if(i<20||b<20){return}if(a.autoHeight){g=h.dom.style;g.overflow=\"visible\";if(Ext.isWebKit){g.position=\"static\"}}else{this.el.setSize(i,b);e=this.mainHd.getHeight();l=b-e;h.setSize(i,l);if(this.innerHd){this.innerHd.style.width=(i)+\"px\"}}if(this.forceFit||(k===true&&this.autoFill)){if(this.lastViewWidth!=i){this.fitColumns(false,false);this.lastViewWidth=i}}else{this.autoExpand();this.syncHeaderScroll()}this.onLayout(i,l)},onLayout:function(a,b){},onColumnWidthUpdated:function(c,a,b){},onAllColumnWidthsUpdated:function(a,b){},onColumnHiddenUpdated:function(b,c,a){},updateColumnText:function(a,b){},afterMove:function(a){},init:function(a){this.grid=a;this.initTemplates();this.initData(a.store,a.colModel);this.initUI(a)},getColumnId:function(a){return this.cm.getColumnId(a)},getOffsetWidth:function(){return(this.cm.getTotalWidth()+this.getScrollOffset())+\"px\"},getScrollOffset:function(){return Ext.num(this.scrollOffset,Ext.getScrollBarWidth())},renderHeaders:function(){var e=this.cm,g=this.templates,a=g.hcell,d={},h=e.getColumnCount(),k=h-1,l=[],c,b;for(c=0;c<h;c++){if(c==0){b=\"x-grid3-cell-first \"}else{b=c==k?\"x-grid3-cell-last \":\"\"}d={id:e.getColumnId(c),value:e.getColumnHeader(c)||\"\",style:this.getColumnStyle(c,true),css:b,tooltip:this.getColumnTooltip(c)};if(e.config[c].align==\"right\"){d.istyle=\"padding-right: 16px;\"}else{delete d.istyle}l[c]=a.apply(d)}return g.header.apply({cells:l.join(\"\"),tstyle:String.format(\"width: {0};\",this.getTotalWidth())})},getColumnTooltip:function(a){var b=this.cm.getColumnTooltip(a);if(b){if(Ext.QuickTips.isEnabled()){return'ext:qtip=\"'+b+'\"'}else{return'title=\"'+b+'\"'}}return\"\"},beforeUpdate:function(){this.grid.stopEditing(true)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders();this.updateHeaderWidth(false)},updateHeaderWidth:function(c){var b=this.innerHd.firstChild,a=this.getTotalWidth();b.style.width=this.getOffsetWidth();b.firstChild.style.width=a;if(c!==false){this.mainBody.dom.style.width=a}},focusRow:function(a){this.focusCell(a,0,false)},focusCell:function(d,b,c){this.syncFocusEl(this.ensureVisible(d,b,c));var a=this.focusEl;if(Ext.isGecko){a.focus()}else{a.focus.defer(1,a)}},resolveCell:function(h,d,g){if(!Ext.isNumber(h)){h=h.rowIndex}if(!this.ds){return null}if(h<0||h>=this.ds.getCount()){return null}d=(d!==undefined?d:0);var c=this.getRow(h),b=this.cm,e=b.getColumnCount(),a;if(!(g===false&&d===0)){while(d<e&&b.isHidden(d)){d++}a=this.getCell(h,d)}return{row:c,cell:a}},getResolvedXY:function(b){if(!b){return null}var a=b.cell,c=b.row;if(a){return Ext.fly(a).getXY()}else{return[this.el.getX(),Ext.fly(c).getY()]}},syncFocusEl:function(d,a,c){var b=d;if(!Ext.isArray(b)){d=Math.min(d,Math.max(0,this.getRows().length-1));if(isNaN(d)){return}b=this.getResolvedXY(this.resolveCell(d,a,c))}this.focusEl.setXY(b||this.scroller.getXY())},ensureVisible:function(u,g,e){var s=this.resolveCell(u,g,e);if(!s||!s.row){return null}var l=s.row,h=s.cell,o=this.scroller.dom,d=l,t=0,q=this.el.dom;while(d&&d!=q){t+=d.offsetTop;d=d.offsetParent}t-=this.mainHd.dom.offsetHeight;q=parseInt(o.scrollTop,10);var r=t+l.offsetHeight,a=o.clientHeight,n=q+a;if(t<q){o.scrollTop=t}else{if(r>n){o.scrollTop=r-a}}if(e!==false){var m=parseInt(h.offsetLeft,10),k=m+h.offsetWidth,i=parseInt(o.scrollLeft,10),b=i+o.clientWidth;if(m<i){o.scrollLeft=m}else{if(k>b){o.scrollLeft=k-o.clientWidth}}}return this.getResolvedXY(s)},insertRows:function(a,i,e,h){var d=a.getCount()-1;if(!h&&i===0&&e>=d){this.fireEvent(\"beforerowsinserted\",this,i,e);this.refresh();this.fireEvent(\"rowsinserted\",this,i,e)}else{if(!h){this.fireEvent(\"beforerowsinserted\",this,i,e)}var b=this.renderRows(i,e),g=this.getRow(i);if(g){if(i===0){Ext.fly(this.getRow(0)).removeClass(this.firstRowCls)}Ext.DomHelper.insertHtml(\"beforeBegin\",g,b)}else{var c=this.getRow(d-1);if(c){Ext.fly(c).removeClass(this.lastRowCls)}Ext.DomHelper.insertHtml(\"beforeEnd\",this.mainBody.dom,b)}if(!h){this.processRows(i);this.fireEvent(\"rowsinserted\",this,i,e)}else{if(i===0||i>=d){Ext.fly(this.getRow(i)).addClass(i===0?this.firstRowCls:this.lastRowCls)}}}this.syncFocusEl(i)},deleteRows:function(a,c,b){if(a.getRowCount()<1){this.refresh()}else{this.fireEvent(\"beforerowsdeleted\",this,c,b);this.removeRows(c,b);this.processRows(c);this.fireEvent(\"rowsdeleted\",this,c,b)}},getColumnStyle:function(b,d){var a=this.cm,g=a.config,c=d?\"\":g[b].css||\"\",e=g[b].align;c+=String.format(\"width: {0};\",this.getColumnWidth(b));if(a.isHidden(b)){c+=\"display: none; \"}if(e){c+=String.format(\"text-align: {0};\",e)}return c},getColumnWidth:function(b){var c=this.cm.getColumnWidth(b),a=this.borderWidth;if(Ext.isNumber(c)){if(Ext.isBorderBox||(Ext.isWebKit&&!Ext.isSafari2)){return c+\"px\"}else{return Math.max(c-a,0)+\"px\"}}else{return c}},getTotalWidth:function(){return this.cm.getTotalWidth()+\"px\"},fitColumns:function(g,k,h){var a=this.grid,m=this.cm,t=m.getTotalWidth(false),r=this.getGridInnerWidth(),s=r-t,c=[],p=0,o=0,v,d,q;if(r<20||s===0){return false}var e=m.getColumnCount(true),n=m.getColumnCount(false),b=e-(Ext.isNumber(h)?1:0);if(b===0){b=1;h=undefined}for(q=0;q<n;q++){if(!m.isFixed(q)&&q!==h){v=m.getColumnWidth(q);c.push(q,v);if(!m.isHidden(q)){p=q;o+=v}}}d=(r-m.getTotalWidth())/o;while(c.length){v=c.pop();q=c.pop();m.setColumnWidth(q,Math.max(a.minColumnWidth,Math.floor(v+v*d)),true)}t=m.getTotalWidth(false);if(t>r){var u=(b==e)?p:h,l=Math.max(1,m.getColumnWidth(u)-(t-r));m.setColumnWidth(u,l,true)}if(g!==true){this.updateAllColumnWidths()}return true},autoExpand:function(l){var a=this.grid,i=this.cm,e=this.getGridInnerWidth(),c=i.getTotalWidth(false),g=a.autoExpandColumn;if(!this.userResized&&g){if(e!=c){var k=i.getIndexById(g),b=i.getColumnWidth(k),h=e-c+b,d=Math.min(Math.max(h,a.autoExpandMin),a.autoExpandMax);if(b!=d){i.setColumnWidth(k,d,true);if(l!==true){this.updateColumnWidth(k,d)}}}}},getGridInnerWidth:function(){return this.grid.getGridEl().getWidth(true)-this.getScrollOffset()},getColumnData:function(){var e=[],c=this.cm,g=c.getColumnCount(),a=this.ds.fields,d,b;for(d=0;d<g;d++){b=c.getDataIndex(d);e[d]={name:Ext.isDefined(b)?b:(a.get(d)?a.get(d).name:undefined),renderer:c.getRenderer(d),scope:c.getRendererScope(d),id:c.getColumnId(d),style:this.getColumnStyle(d)}}return e},renderRows:function(i,c){var a=this.grid,g=a.store,k=a.stripeRows,e=a.colModel,h=e.getColumnCount(),d=g.getCount(),b;if(d<1){return\"\"}i=i||0;c=Ext.isDefined(c)?c:d-1;b=g.getRange(i,c);return this.doRender(this.getColumnData(),b,g,i,h,k)},renderBody:function(){var a=this.renderRows()||\"&#160;\";return this.templates.body.apply({rows:a})},refreshRow:function(g){var m=this.ds,n=this.cm.getColumnCount(),c=this.getColumnData(),o=n-1,q=[\"x-grid3-row\"],e={tstyle:String.format(\"width: {0};\",this.getTotalWidth())},a=[],l=this.templates.cell,k,r,b,p,h,d;if(Ext.isNumber(g)){k=g;g=m.getAt(k)}else{k=m.indexOf(g)}if(!g||k<0){return}for(d=0;d<n;d++){b=c[d];if(d==0){h=\"x-grid3-cell-first\"}else{h=(d==o)?\"x-grid3-cell-last \":\"\"}p={id:b.id,style:b.style,css:h,attr:\"\",cellAttr:\"\"};p.value=b.renderer.call(b.scope,g.data[b.name],p,g,k,d,m);if(Ext.isEmpty(p.value)){p.value=\"&#160;\"}if(this.markDirty&&g.dirty&&typeof g.modified[b.name]!=\"undefined\"){p.css+=\" x-grid3-dirty-cell\"}a[d]=l.apply(p)}r=this.getRow(k);r.className=\"\";if(this.grid.stripeRows&&((k+1)%2===0)){q.push(\"x-grid3-row-alt\")}if(this.getRowClass){e.cols=n;q.push(this.getRowClass(g,k,e,m))}this.fly(r).addClass(q).setStyle(e.tstyle);e.cells=a.join(\"\");r.innerHTML=this.templates.rowInner.apply(e);this.fireEvent(\"rowupdated\",this,k,g)},refresh:function(b){this.fireEvent(\"beforerefresh\",this);this.grid.stopEditing(true);var a=this.renderBody();this.mainBody.update(a).setWidth(this.getTotalWidth());if(b===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent(\"refresh\",this)},applyEmptyText:function(){if(this.emptyText&&!this.hasRows()){this.mainBody.update('<div class=\"x-grid-empty\">'+this.emptyText+\"</div>\")}},updateHeaderSortState:function(){var b=this.ds.getSortState();if(!b){return}if(!this.sortState||(this.sortState.field!=b.field||this.sortState.direction!=b.direction)){this.grid.fireEvent(\"sortchange\",this.grid,b)}this.sortState=b;var c=this.cm.findColumnIndex(b.field);if(c!=-1){var a=b.direction;this.updateSortIcon(c,a)}},clearHeaderSortState:function(){if(!this.sortState){return}this.grid.fireEvent(\"sortchange\",this.grid,null);this.mainHd.select(\"td\").removeClass(this.sortClasses);delete this.sortState},destroy:function(){var k=this,a=k.grid,d=a.getGridEl(),i=k.dragZone,g=k.splitZone,h=k.columnDrag,e=k.columnDrop,l=k.scrollToTopTask,c,b;if(l&&l.cancel){l.cancel()}Ext.destroyMembers(k,\"colMenu\",\"hmenu\");k.initData(null,null);k.purgeListeners();Ext.fly(k.innerHd).un(\"click\",k.handleHdDown,k);if(a.enableColumnMove){c=h.dragData;b=h.proxy;Ext.destroy(h.el,b.ghost,b.el,e.el,e.proxyTop,e.proxyBottom,c.ddel,c.header);if(b.anim){Ext.destroy(b.anim)}delete b.ghost;delete c.ddel;delete c.header;h.destroy();delete Ext.dd.DDM.locationCache[h.id];delete h._domRef;delete e.proxyTop;delete e.proxyBottom;e.destroy();delete Ext.dd.DDM.locationCache[\"gridHeader\"+d.id];delete e._domRef;delete Ext.dd.DDM.ids[e.ddGroup]}if(g){g.destroy();delete g._domRef;delete Ext.dd.DDM.ids[\"gridSplitters\"+d.id]}Ext.fly(k.innerHd).removeAllListeners();Ext.removeNode(k.innerHd);delete k.innerHd;Ext.destroy(k.el,k.mainWrap,k.mainHd,k.scroller,k.mainBody,k.focusEl,k.resizeMarker,k.resizeProxy,k.activeHdBtn,k._flyweight,i,g);delete a.container;if(i){i.destroy()}Ext.dd.DDM.currentTarget=null;delete Ext.dd.DDM.locationCache[d.id];Ext.EventManager.removeResizeListener(k.onWindowResize,k)},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var a=this.grid.ownerCt;if(a&&a.getLayout()){a.on(\"afterlayout\",function(){this.fitColumns(true,true);this.updateHeaders();this.updateHeaderSortState()},this,{single:true})}}else{if(this.forceFit){this.fitColumns(true,false)}else{if(this.grid.autoExpandColumn){this.autoExpand(true)}}}this.grid.getGridEl().dom.innerHTML=this.renderUI();this.afterRenderUI()},initData:function(a,e){var b=this;if(b.ds){var d=b.ds;d.un(\"add\",b.onAdd,b);d.un(\"load\",b.onLoad,b);d.un(\"clear\",b.onClear,b);d.un(\"remove\",b.onRemove,b);d.un(\"update\",b.onUpdate,b);d.un(\"datachanged\",b.onDataChange,b);if(d!==a&&d.autoDestroy){d.destroy()}}if(a){a.on({scope:b,load:b.onLoad,add:b.onAdd,remove:b.onRemove,update:b.onUpdate,clear:b.onClear,datachanged:b.onDataChange})}if(b.cm){var c=b.cm;c.un(\"configchange\",b.onColConfigChange,b);c.un(\"widthchange\",b.onColWidthChange,b);c.un(\"headerchange\",b.onHeaderChange,b);c.un(\"hiddenchange\",b.onHiddenChange,b);c.un(\"columnmoved\",b.onColumnMove,b)}if(e){delete b.lastViewWidth;e.on({scope:b,configchange:b.onColConfigChange,widthchange:b.onColWidthChange,headerchange:b.onHeaderChange,hiddenchange:b.onHiddenChange,columnmoved:b.onColumnMove})}b.ds=a;b.cm=e},onDataChange:function(){this.refresh(true);this.updateHeaderSortState();this.syncFocusEl(0)},onClear:function(){this.refresh();this.syncFocusEl(0)},onUpdate:function(b,a){this.refreshRow(a)},onAdd:function(b,a,c){this.insertRows(b,c,c+(a.length-1))},onRemove:function(b,a,c,d){if(d!==true){this.fireEvent(\"beforerowremoved\",this,c,a)}this.removeRow(c);if(d!==true){this.processRows(c);this.applyEmptyText();this.fireEvent(\"rowremoved\",this,c,a)}},onLoad:function(){if(Ext.isGecko){if(!this.scrollToTopTask){this.scrollToTopTask=new Ext.util.DelayedTask(this.scrollToTop,this)}this.scrollToTopTask.delay(1)}else{this.scrollToTop()}},onColWidthChange:function(a,b,c){this.updateColumnWidth(b,c)},onHeaderChange:function(a,b,c){this.updateHeaders()},onHiddenChange:function(a,b,c){this.updateColumnHidden(b,c)},onColumnMove:function(a,c,b){this.indexMap=null;this.refresh(true);this.restoreScroll(this.getScrollState());this.afterMove(b);this.grid.fireEvent(\"columnmove\",c,b)},onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(true)},initUI:function(a){a.on(\"headerclick\",this.onHeaderClick,this)},initEvents:Ext.emptyFn,onHeaderClick:function(b,a){if(this.headersDisabled||!this.cm.isSortable(a)){return}b.stopEditing(true);b.store.sort(this.cm.getDataIndex(a))},onRowOver:function(b,a){var c=this.findRowIndex(a);if(c!==false){this.addRowClass(c,this.rowOverCls)}},onRowOut:function(b,a){var c=this.findRowIndex(a);if(c!==false&&!b.within(this.getRow(c),true)){this.removeRowClass(c,this.rowOverCls)}},onRowSelect:function(a){this.addRowClass(a,this.selectedRowClass)},onRowDeselect:function(a){this.removeRowClass(a,this.selectedRowClass)},onCellSelect:function(c,b){var a=this.getCell(c,b);if(a){this.fly(a).addClass(\"x-grid3-cell-selected\")}},onCellDeselect:function(c,b){var a=this.getCell(c,b);if(a){this.fly(a).removeClass(\"x-grid3-cell-selected\")}},handleWheel:function(a){a.stopPropagation()},onColumnSplitterMoved:function(a,b){this.userResized=true;this.grid.colModel.setColumnWidth(a,b,true);if(this.forceFit){this.fitColumns(true,false,a);this.updateAllColumnWidths()}else{this.updateColumnWidth(a,b);this.syncHeaderScroll()}this.grid.fireEvent(\"columnresize\",a,b)},beforeColMenuShow:function(){var b=this.cm,d=b.getColumnCount(),a=this.colMenu,c;a.removeAll();for(c=0;c<d;c++){if(b.config[c].hideable!==false){a.add(new Ext.menu.CheckItem({text:b.getColumnHeader(c),itemId:\"col-\"+b.getColumnId(c),checked:!b.isHidden(c),disabled:b.config[c].hideable===false,hideOnClick:false}))}}},handleHdMenuClick:function(c){var a=this.ds,b=this.cm.getDataIndex(this.hdCtxIndex);switch(c.getItemId()){case\"asc\":a.sort(b,\"ASC\");break;case\"desc\":a.sort(b,\"DESC\");break;default:this.handleHdMenuClickDefault(c)}return true},handleHdMenuClickDefault:function(c){var b=this.cm,d=c.getItemId(),a=b.getIndexById(d.substr(4));if(a!=-1){if(c.checked&&b.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return}b.setHidden(a,c.checked)}},handleHdDown:function(i,k){if(Ext.fly(k).hasClass(\"x-grid3-hd-btn\")){i.stopEvent();var l=this.cm,g=this.findHeaderCell(k),h=this.getCellIndex(g),d=l.isSortable(h),c=this.hmenu,b=c.items,a=this.headerMenuOpenCls;this.hdCtxIndex=h;Ext.fly(g).addClass(a);b.get(\"asc\").setDisabled(!d);b.get(\"desc\").setDisabled(!d);c.on(\"hide\",function(){Ext.fly(g).removeClass(a)},this,{single:true});c.show(k,\"tl-bl?\")}},handleHdMove:function(l){var i=this.findHeaderCell(this.activeHdRef);if(i&&!this.headersDisabled){var m=this.splitHandleWidth||5,k=this.activeHdRegion,q=i.style,n=this.cm,p=\"\",g=l.getPageX();if(this.grid.enableColumnResize!==false){var a=this.activeHdIndex,b=this.getPreviousVisible(a),o=n.isResizable(a),c=b&&n.isResizable(b),d=g-k.left<=m,h=k.right-g<=(!this.activeHdBtn?m:2);if(d&&c){p=Ext.isAir?\"move\":Ext.isWebKit?\"e-resize\":\"col-resize\"}else{if(h&&o){p=Ext.isAir?\"move\":Ext.isWebKit?\"w-resize\":\"col-resize\"}}}q.cursor=p}},getPreviousVisible:function(a){while(a>0){if(!this.cm.isHidden(a-1)){return a}a--}return undefined},handleHdOver:function(c,b){var d=this.findHeaderCell(b);if(d&&!this.headersDisabled){var a=this.fly(d);this.activeHdRef=b;this.activeHdIndex=this.getCellIndex(d);this.activeHdRegion=a.getRegion();if(!this.isMenuDisabled(this.activeHdIndex,a)){a.addClass(\"x-grid3-hd-over\");this.activeHdBtn=a.child(\".x-grid3-hd-btn\");if(this.activeHdBtn){this.activeHdBtn.dom.style.height=(d.firstChild.offsetHeight-1)+\"px\"}}}},handleHdOut:function(b,a){var c=this.findHeaderCell(a);if(c&&(!Ext.isIE||!b.within(c,true))){this.activeHdRef=null;this.fly(c).removeClass(\"x-grid3-hd-over\");c.style.cursor=\"\"}},isMenuDisabled:function(a,b){return this.cm.isMenuDisabled(a)},hasRows:function(){var a=this.mainBody.dom.firstChild;return a&&a.nodeType==1&&a.className!=\"x-grid-empty\"},isHideableColumn:function(a){return !a.hidden},bind:function(a,b){this.initData(a,b)}});Ext.grid.GridView.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{constructor:function(a,b){this.grid=a;this.view=a.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,b,\"gridSplitters\"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.scroll=false;this.hw=this.view.splitHandleWidth||5},b4StartDrag:function(a,e){this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=true;var d=this.view.mainWrap.getHeight();this.marker.setHeight(d);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),\"tl-tl\",[-2,0]);this.proxy.setHeight(d);var b=this.cm.getColumnWidth(this.cellIndex),c=Math.max(b-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(c,1000);this.setYConstraint(0,0);this.minX=a-c;this.maxX=a+1000;this.startPos=a;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,e)},allowHeaderDrag:function(a){return true},handleMouseDown:function(a){var h=this.view.findHeaderCell(a.getTarget());if(h&&this.allowHeaderDrag(a)){var l=this.view.fly(h).getXY(),c=l[0],i=a.getXY(),b=i[0],g=h.offsetWidth,d=false;if((b-c)<=this.hw){d=-1}else{if((c+g)-b<=this.hw){d=0}}if(d!==false){this.cm=this.grid.colModel;var k=this.view.getCellIndex(h);if(d==-1){if(k+d<0){return}while(this.cm.isHidden(k+d)){--d;if(k+d<0){return}}}this.cellIndex=k+d;this.split=h.dom;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}else{if(this.view.columnDrag){this.view.columnDrag.callHandleMouseDown(a)}}}},endDrag:function(g){this.marker.hide();var a=this.view,c=Math.max(this.minX,g.getPageX()),d=c-this.startPos,b=this.dragHeadersDisabled;a.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+d);setTimeout(function(){a.headersDisabled=b},50)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.PivotGridView=Ext.extend(Ext.grid.GridView,{colHeaderCellCls:\"grid-hd-group-cell\",title:\"\",getColumnHeaders:function(){return this.grid.topAxis.buildHeaders()},getRowHeaders:function(){return this.grid.leftAxis.buildHeaders()},renderRows:function(a,r){var b=this.grid,n=b.extractData(),o=n.length,e=this.templates,q=b.renderer,h=typeof q==\"function\",t=this.getCellCls,m=typeof t==\"function\",d=e.cell,u=e.row,k=[],p={},c=\"width:\"+this.getGridInnerWidth()+\"px;\",l,g,s;a=a||0;r=Ext.isDefined(r)?r:o-1;for(s=0;s<o;s++){row=n[s];colCount=row.length;l=[];rowIndex=a+s;for(j=0;j<colCount;j++){cell=row[j];p.css=j===0?\"x-grid3-cell-first \":(j==(colCount-1)?\"x-grid3-cell-last \":\"\");p.attr=p.cellAttr=\"\";p.value=cell;if(Ext.isEmpty(p.value)){p.value=\"&#160;\"}if(h){p.value=q(p.value)}if(m){p.css+=t(p.value)+\" \"}l[l.length]=d.apply(p)}k[k.length]=u.apply({tstyle:c,cols:colCount,cells:l.join(\"\"),alt:\"\"})}return k.join(\"\")},masterTpl:new Ext.Template('<div class=\"x-grid3 x-pivotgrid\" hidefocus=\"true\">','<div class=\"x-grid3-viewport\">','<div class=\"x-grid3-header\">','<div class=\"x-grid3-header-title\"><span>{title}</span></div>','<div class=\"x-grid3-header-inner\">','<div class=\"x-grid3-header-offset\" style=\"{ostyle}\"></div>',\"</div>\",'<div class=\"x-clear\"></div>',\"</div>\",'<div class=\"x-grid3-scroller\">','<div class=\"x-grid3-row-headers\"></div>','<div class=\"x-grid3-body\" style=\"{bstyle}\">{body}</div>','<a href=\"#\" class=\"x-grid3-focus\" tabIndex=\"-1\"></a>',\"</div>\",\"</div>\",'<div class=\"x-grid3-resize-marker\">&#160;</div>','<div class=\"x-grid3-resize-proxy\">&#160;</div>',\"</div>\"),initTemplates:function(){Ext.grid.PivotGridView.superclass.initTemplates.apply(this,arguments);var a=this.templates||{};if(!a.gcell){a.gcell=new Ext.XTemplate('<td class=\"x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} '+this.colHeaderCellCls+'\" style=\"{style}\">','<div {tooltip} class=\"x-grid3-hd-inner x-grid3-hd-{id}\" unselectable=\"on\" style=\"{istyle}\">',this.grid.enableHdMenu?'<a class=\"x-grid3-hd-btn\" href=\"#\"></a>':\"\",\"{value}\",\"</div>\",\"</td>\")}this.templates=a;this.hrowRe=new RegExp(\"ux-grid-hd-group-row-(\\\\d+)\",\"\")},initElements:function(){Ext.grid.PivotGridView.superclass.initElements.apply(this,arguments);this.rowHeadersEl=new Ext.Element(this.scroller.child(\"div.x-grid3-row-headers\"));this.headerTitleEl=new Ext.Element(this.mainHd.child(\"div.x-grid3-header-title\"))},getGridInnerWidth:function(){var a=Ext.grid.PivotGridView.superclass.getGridInnerWidth.apply(this,arguments);return a-this.getTotalRowHeaderWidth()},getTotalRowHeaderWidth:function(){var d=this.getRowHeaders(),c=d.length,b=0,a;for(a=0;a<c;a++){b+=d[a].width}return b},getTotalColumnHeaderHeight:function(){return this.getColumnHeaders().length*21},renderUI:function(){var b=this.templates,a=this.getGridInnerWidth();return b.master.apply({body:b.body.apply({rows:\"&#160;\"}),ostyle:\"width:\"+a+\"px\",bstyle:\"width:\"+a+\"px\"})},onLayout:function(b,a){Ext.grid.PivotGridView.superclass.onLayout.apply(this,arguments);var b=this.getGridInnerWidth();this.resizeColumnHeaders(b);this.resizeAllRows(b)},refresh:function(b){this.fireEvent(\"beforerefresh\",this);this.grid.stopEditing(true);var a=this.renderBody();this.mainBody.update(a).setWidth(this.getGridInnerWidth());if(b===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent(\"refresh\",this)},renderHeaders:Ext.emptyFn,fitColumns:Ext.emptyFn,resizeColumnHeaders:function(b){var a=this.grid.topAxis;if(a.rendered){a.el.setWidth(b)}},resizeRowHeaders:function(){var a=this.getTotalRowHeaderWidth(),b=String.format(\"margin-left: {0}px;\",a);this.rowHeadersEl.setWidth(a);this.mainBody.applyStyles(b);Ext.fly(this.innerHd).applyStyles(b);this.headerTitleEl.setWidth(a);this.headerTitleEl.setHeight(this.getTotalColumnHeaderHeight())},resizeAllRows:function(b){var d=this.getRows(),c=d.length,a;for(a=0;a<c;a++){Ext.fly(d[a]).setWidth(b);Ext.fly(d[a]).child(\"table\").setWidth(b)}},updateHeaders:function(){this.renderGroupRowHeaders();this.renderGroupColumnHeaders()},renderGroupRowHeaders:function(){var a=this.grid.leftAxis;this.resizeRowHeaders();a.rendered=false;a.render(this.rowHeadersEl);this.setTitle(this.title)},setTitle:function(a){this.headerTitleEl.child(\"span\").dom.innerHTML=a},renderGroupColumnHeaders:function(){var a=this.grid.topAxis;a.rendered=false;a.render(this.innerHd.firstChild)},isMenuDisabled:function(a,b){return true}});Ext.grid.PivotAxis=Ext.extend(Ext.Component,{orientation:\"horizontal\",defaultHeaderWidth:80,paddingWidth:7,setDimensions:function(a){this.dimensions=a},onRender:function(b,a){var c=this.orientation==\"horizontal\"?this.renderHorizontalRows():this.renderVerticalRows();this.el=Ext.DomHelper.overwrite(b.dom,{tag:\"table\",cn:c},true)},renderHorizontalRows:function(){var k=this.buildHeaders(),a=k.length,g=[],c,h,e,d,b;for(d=0;d<a;d++){c=[];h=k[d].items;e=h.length;for(b=0;b<e;b++){c.push({tag:\"td\",html:h[b].header,colspan:h[b].span})}g[d]={tag:\"tr\",cn:c}}return g},renderVerticalRows:function(){var b=this.buildHeaders(),k=b.length,a=[],m=[],h,c,l,g,e,d;for(e=0;e<k;e++){c=b[e];g=c.width||80;h=c.items.length;for(d=0;d<h;d++){l=c.items[d];a[l.start]=a[l.start]||[];a[l.start].push({tag:\"td\",html:l.header,rowspan:l.span,width:Ext.isBorderBox?g:g-this.paddingWidth})}}h=a.length;for(e=0;e<h;e++){m[e]={tag:\"tr\",cn:a[e]}}return m},getTuples:function(){var b=new Ext.data.Store({});b.data=this.store.data.clone();b.fields=this.store.fields;var m=[],a=this.dimensions,c=a.length,k;for(k=0;k<c;k++){m.push({field:a[k].dataIndex,direction:a[k].direction||\"ASC\"})}b.sort(m);var e=b.data.items,o=[],l=[],p,h,d,g,n;c=e.length;for(k=0;k<c;k++){d=this.getRecordInfo(e[k]);g=d.data;h=\"\";for(n in g){h+=g[n]+\"---\"}if(o.indexOf(h)==-1){o.push(h);l.push(d)}}b.destroy();return l},getRecordInfo:function(a){var e=this.dimensions,d=e.length,h={},k,c,b;for(b=0;b<d;b++){k=e[b];c=k.dataIndex;h[c]=a.get(c)}var g=function(i){return function(l){for(var m in i){if(l.get(m)!=i[m]){return false}}return true}};return{data:h,matcher:g(h)}},buildHeaders:function(){var k=this.getTuples(),l=k.length,a=this.dimensions,q=a.length,c=[],n,r,m,p,o,b,h,g,e,d;for(e=0;e<q;e++){dimension=a[e];r=[];o=0;b=0;for(d=0;d<l;d++){n=k[d];h=d==(l-1);m=n.data[dimension.dataIndex];g=p!=undefined&&p!=m;if(e>0&&d>0){g=g||n.data[a[e-1].dataIndex]!=k[d-1].data[a[e-1].dataIndex]}if(g){r.push({header:p,span:o,start:b});b+=o;o=0}if(h){r.push({header:m,span:o+1,start:b});b+=o;o=0}p=m;o++}c.push({items:r,width:dimension.width||this.defaultHeaderWidth});p=undefined}return c}});Ext.grid.HeaderDragZone=Ext.extend(Ext.dd.DragZone,{maxDragWidth:120,constructor:function(a,c,b){this.grid=a;this.view=a.getView();this.ddGroup=\"gridHeader\"+this.grid.getGridEl().id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,c);if(b){this.setHandleElId(Ext.id(c));this.setOuterHandleElId(Ext.id(b))}this.scroll=false},getDragData:function(c){var a=Ext.lib.Event.getTarget(c),b=this.view.findHeaderCell(a);if(b){return{ddel:b.firstChild,header:b}}return false},onInitDrag:function(a){this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=true;var b=this.dragData.ddel.cloneNode(true);b.id=Ext.id();b.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+\"px\";this.proxy.update(b);return true},afterValidDrop:function(){this.completeDrop()},afterInvalidDrop:function(){this.completeDrop()},completeDrop:function(){var a=this.view,b=this.dragHeadersDisabled;setTimeout(function(){a.headersDisabled=b},50)}});Ext.grid.HeaderDropZone=Ext.extend(Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,constructor:function(a,c,b){this.grid=a;this.view=a.getView();this.proxyTop=Ext.DomHelper.append(document.body,{cls:\"col-move-top\",html:\"&#160;\"},true);this.proxyBottom=Ext.DomHelper.append(document.body,{cls:\"col-move-bottom\",html:\"&#160;\"},true);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle(\"visibility\",\"hidden\")};this.ddGroup=\"gridHeader\"+this.grid.getGridEl().id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,a.getGridEl().dom)},getTargetFromEvent:function(c){var a=Ext.lib.Event.getTarget(c),b=this.view.findCellIndex(a);if(b!==false){return this.view.getHeaderCell(b)}},nextVisible:function(c){var b=this.view,a=this.grid.colModel;c=c.nextSibling;while(c){if(!a.isHidden(b.getCellIndex(c))){return c}c=c.nextSibling}return null},prevVisible:function(c){var b=this.view,a=this.grid.colModel;c=c.prevSibling;while(c){if(!a.isHidden(b.getCellIndex(c))){return c}c=c.prevSibling}return null},positionIndicator:function(d,l,k){var a=Ext.lib.Event.getPageX(k),g=Ext.lib.Dom.getRegion(l.firstChild),c,i,b=g.top+this.proxyOffsets[1];if((g.right-a)<=(g.right-g.left)/2){c=g.right+this.view.borderWidth;i=\"after\"}else{c=g.left;i=\"before\"}if(this.grid.colModel.isFixed(this.view.getCellIndex(l))){return false}c+=this.proxyOffsets[0];this.proxyTop.setLeftTop(c,b);this.proxyTop.show();if(!this.bottomOffset){this.bottomOffset=this.view.mainHd.getHeight()}this.proxyBottom.setLeftTop(c,b+this.proxyTop.dom.offsetHeight+this.bottomOffset);this.proxyBottom.show();return i},onNodeEnter:function(d,a,c,b){if(b.header!=d){this.positionIndicator(b.header,d,c)}},onNodeOver:function(g,b,d,c){var a=false;if(c.header!=g){a=this.positionIndicator(c.header,g,d)}if(!a){this.proxyTop.hide();this.proxyBottom.hide()}return a?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(d,a,c,b){this.proxyTop.hide();this.proxyBottom.hide()},onNodeDrop:function(b,o,g,c){var d=c.header;if(d!=b){var l=this.grid.colModel,k=Ext.lib.Event.getPageX(g),a=Ext.lib.Dom.getRegion(b.firstChild),p=(a.right-k)<=((a.right-a.left)/2)?\"after\":\"before\",i=this.view.getCellIndex(d),m=this.view.getCellIndex(b);if(p==\"after\"){m++}if(i<m){m--}l.moveColumn(i,m);return true}return false}});Ext.grid.GridView.ColumnDragZone=Ext.extend(Ext.grid.HeaderDragZone,{constructor:function(a,b){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,a,b,null);this.proxy.el.addClass(\"x-grid3-col-dd\")},handleMouseDown:function(a){},callHandleMouseDown:function(a){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,a)}});Ext.grid.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{fly:Ext.Element.fly,constructor:function(a,c,b){this.grid=a;this.view=a.getView();this.proxy=this.view.resizeProxy;Ext.grid.SplitDragZone.superclass.constructor.call(this,c,\"gridSplitters\"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.setHandleElId(Ext.id(c));this.setOuterHandleElId(Ext.id(b));this.scroll=false},b4StartDrag:function(a,d){this.view.headersDisabled=true;this.proxy.setHeight(this.view.mainWrap.getHeight());var b=this.cm.getColumnWidth(this.cellIndex);var c=Math.max(b-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(c,1000);this.setYConstraint(0,0);this.minX=a-c;this.maxX=a+1000;this.startPos=a;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,d)},handleMouseDown:function(c){var b=Ext.EventObject.setEvent(c);var a=this.fly(b.getTarget());if(a.hasClass(\"x-grid-split\")){this.cellIndex=this.view.getCellIndex(a.dom);this.split=a.dom;this.cm=this.grid.colModel;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}},endDrag:function(c){this.view.headersDisabled=false;var a=Math.max(this.minX,Ext.lib.Event.getPageX(c));var b=a-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+b)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GridDragZone=function(b,a){this.view=b.getView();Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,a);this.scroll=false;this.grid=b;this.ddel=document.createElement(\"div\");this.ddel.className=\"x-grid-dd-wrap\"};Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:\"GridDD\",getDragData:function(b){var a=Ext.lib.Event.getTarget(b);var d=this.view.findRowIndex(a);if(d!==false){var c=this.grid.selModel;if(!c.isSelected(d)||b.hasModifier()){c.handleMouseDown(this.grid,d,b)}return{grid:this.grid,ddel:this.ddel,rowIndex:d,selections:c.getSelections()}}return false},onInitDrag:function(b){var a=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=false},getRepairXY:function(b,a){return false},onEndDrag:function(a,b){},onValidDrop:function(a,b,c){this.hideProxy()},beforeInvalidDrop:function(a,b){}});Ext.grid.ColumnModel=Ext.extend(Ext.util.Observable,{defaultWidth:100,defaultSortable:false,constructor:function(a){if(a.columns){Ext.apply(this,a);this.setConfig(a.columns,true)}else{this.setConfig(a,true)}this.addEvents(\"widthchange\",\"headerchange\",\"hiddenchange\",\"columnmoved\",\"configchange\");Ext.grid.ColumnModel.superclass.constructor.call(this)},getColumnId:function(a){return this.config[a].id},getColumnAt:function(a){return this.config[a]},setConfig:function(d,b){var e,h,a;if(!b){delete this.totalWidth;for(e=0,a=this.config.length;e<a;e++){h=this.config[e];if(h.setEditor){h.setEditor(null)}}}this.defaults=Ext.apply({width:this.defaultWidth,sortable:this.defaultSortable},this.defaults);this.config=d;this.lookup={};for(e=0,a=d.length;e<a;e++){h=Ext.applyIf(d[e],this.defaults);if(Ext.isEmpty(h.id)){h.id=e}if(!h.isColumn){var g=Ext.grid.Column.types[h.xtype||\"gridcolumn\"];h=new g(h);d[e]=h}this.lookup[h.id]=h}if(!b){this.fireEvent(\"configchange\",this)}},getColumnById:function(a){return this.lookup[a]},getIndexById:function(c){for(var b=0,a=this.config.length;b<a;b++){if(this.config[b].id==c){return b}}return -1},moveColumn:function(e,b){var a=this.config,d=a[e];a.splice(e,1);a.splice(b,0,d);this.dataMap=null;this.fireEvent(\"columnmoved\",this,e,b)},getColumnCount:function(b){var d=this.config.length,e=0,a;if(b===true){for(a=0;a<d;a++){if(!this.isHidden(a)){e++}}return e}return d},getColumnsBy:function(g,e){var b=this.config,h=b.length,a=[],d,k;for(d=0;d<h;d++){k=b[d];if(g.call(e||this,k,d)===true){a[a.length]=k}}return a},isSortable:function(a){return !!this.config[a].sortable},isMenuDisabled:function(a){return !!this.config[a].menuDisabled},getRenderer:function(a){return this.config[a].renderer||Ext.grid.ColumnModel.defaultRenderer},getRendererScope:function(a){return this.config[a].scope},setRenderer:function(a,b){this.config[a].renderer=b},getColumnWidth:function(a){var b=this.config[a].width;if(typeof b!=\"number\"){b=this.defaultWidth}return b},setColumnWidth:function(b,c,a){this.config[b].width=c;this.totalWidth=null;if(!a){this.fireEvent(\"widthchange\",this,b,c)}},getTotalWidth:function(b){if(!this.totalWidth){this.totalWidth=0;for(var c=0,a=this.config.length;c<a;c++){if(b||!this.isHidden(c)){this.totalWidth+=this.getColumnWidth(c)}}}return this.totalWidth},getColumnHeader:function(a){return this.config[a].header},setColumnHeader:function(a,b){this.config[a].header=b;this.fireEvent(\"headerchange\",this,a,b)},getColumnTooltip:function(a){return this.config[a].tooltip},setColumnTooltip:function(a,b){this.config[a].tooltip=b},getDataIndex:function(a){return this.config[a].dataIndex},setDataIndex:function(a,b){this.config[a].dataIndex=b},findColumnIndex:function(d){var e=this.config;for(var b=0,a=e.length;b<a;b++){if(e[b].dataIndex==d){return b}}return -1},isCellEditable:function(b,e){var d=this.config[b],a=d.editable;return !!(a||(!Ext.isDefined(a)&&d.editor))},getCellEditor:function(a,b){return this.config[a].getCellEditor(b)},setEditable:function(a,b){this.config[a].editable=b},isHidden:function(a){return !!this.config[a].hidden},isFixed:function(a){return !!this.config[a].fixed},isResizable:function(a){return a>=0&&this.config[a].resizable!==false&&this.config[a].fixed!==true},setHidden:function(a,b){var d=this.config[a];if(d.hidden!==b){d.hidden=b;this.totalWidth=null;this.fireEvent(\"hiddenchange\",this,a,b)}},setEditor:function(a,b){this.config[a].setEditor(b)},destroy:function(){var b=this.config.length,a=0;for(;a<b;a++){this.config[a].destroy()}delete this.config;delete this.lookup;this.purgeListeners()},setState:function(a,b){b=Ext.applyIf(b,this.defaults);Ext.apply(this.config[a],b)}});Ext.grid.ColumnModel.defaultRenderer=function(a){if(typeof a==\"string\"&&a.length<1){return\"&#160;\"}return a};Ext.grid.AbstractSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(){this.locked=false;Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)},init:function(a){this.grid=a;if(this.lockOnInit){delete this.lockOnInit;this.locked=false;this.lock()}this.initEvents()},lock:function(){if(!this.locked){this.locked=true;var a=this.grid;if(a){a.getView().on({scope:this,beforerefresh:this.sortUnLock,refresh:this.sortLock})}else{this.lockOnInit=true}}},sortLock:function(){this.locked=true},sortUnLock:function(){this.locked=false},unlock:function(){if(this.locked){this.locked=false;var a=this.grid,b;if(a){b=a.getView();b.un(\"beforerefresh\",this.sortUnLock,this);b.un(\"refresh\",this.sortLock,this)}else{delete this.lockOnInit}}},isLocked:function(){return this.locked},destroy:function(){this.unlock();this.purgeListeners()}});Ext.grid.RowSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{singleSelect:false,constructor:function(a){Ext.apply(this,a);this.selections=new Ext.util.MixedCollection(false,function(b){return b.id});this.last=false;this.lastActive=false;this.addEvents(\"selectionchange\",\"beforerowselect\",\"rowselect\",\"rowdeselect\");Ext.grid.RowSelectionModel.superclass.constructor.call(this)},initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag){this.grid.on(\"rowmousedown\",this.handleMouseDown,this)}this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:this.onKeyPress,down:this.onKeyPress,scope:this});this.grid.getView().on({scope:this,refresh:this.onRefresh,rowupdated:this.onRowUpdated,rowremoved:this.onRemove})},onKeyPress:function(g,b){var a=b==\"up\",h=a?\"selectPrevious\":\"selectNext\",d=a?-1:1,c;if(!g.shiftKey||this.singleSelect){this[h](false)}else{if(this.last!==false&&this.lastActive!==false){c=this.last;this.selectRange(this.last,this.lastActive+d);this.grid.getView().focusRow(this.lastActive);if(c!==false){this.last=c}}else{this.selectFirstRow()}}},onRefresh:function(){var g=this.grid.store,d=this.getSelections(),c=0,a=d.length,b,e;this.silent=true;this.clearSelections(true);for(;c<a;c++){e=d[c];if((b=g.indexOfId(e.id))!=-1){this.selectRow(b,true)}}if(d.length!=this.selections.getCount()){this.fireEvent(\"selectionchange\",this)}this.silent=false},onRemove:function(a,b,c){if(this.selections.remove(c)!==false){this.fireEvent(\"selectionchange\",this)}},onRowUpdated:function(a,b,c){if(this.isSelected(c)){a.onRowSelect(b)}},selectRecords:function(b,e){if(!e){this.clearSelections()}var d=this.grid.store,c=0,a=b.length;for(;c<a;c++){this.selectRow(d.indexOf(b[c]),true)}},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(a){this.selectRow(this.grid.store.getCount()-1,a)},selectNext:function(a){if(this.hasNext()){this.selectRow(this.last+1,a);this.grid.getView().focusRow(this.last);return true}return false},selectPrevious:function(a){if(this.hasPrevious()){this.selectRow(this.last-1,a);this.grid.getView().focusRow(this.last);return true}return false},hasNext:function(){return this.last!==false&&(this.last+1)<this.grid.store.getCount()},hasPrevious:function(){return !!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(e,d){var c=this.getSelections(),b=0,a=c.length;for(;b<a;b++){if(e.call(d||this,c[b],b)===false){return false}}return true},clearSelections:function(a){if(this.isLocked()){return}if(a!==true){var c=this.grid.store,b=this.selections;b.each(function(d){this.deselectRow(c.indexOfId(d.id))},this);b.clear()}else{this.selections.clear()}this.last=false},selectAll:function(){if(this.isLocked()){return}this.selections.clear();for(var b=0,a=this.grid.store.getCount();b<a;b++){this.selectRow(b,true)}},hasSelection:function(){return this.selections.length>0},isSelected:function(a){var b=Ext.isNumber(a)?this.grid.store.getAt(a):a;return(b&&this.selections.key(b.id)?true:false)},isIdSelected:function(a){return(this.selections.key(a)?true:false)},handleMouseDown:function(d,i,h){if(h.button!==0||this.isLocked()){return}var a=this.grid.getView();if(h.shiftKey&&!this.singleSelect&&this.last!==false){var c=this.last;this.selectRange(c,i,h.ctrlKey);this.last=c;a.focusRow(i)}else{var b=this.isSelected(i);if(h.ctrlKey&&b){this.deselectRow(i)}else{if(!b||this.getCount()>1){this.selectRow(i,h.ctrlKey||h.shiftKey);a.focusRow(i)}}}},selectRows:function(c,d){if(!d){this.clearSelections()}for(var b=0,a=c.length;b<a;b++){this.selectRow(c[b],true)}},selectRange:function(b,a,d){var c;if(this.isLocked()){return}if(!d){this.clearSelections()}if(b<=a){for(c=b;c<=a;c++){this.selectRow(c,true)}}else{for(c=b;c>=a;c--){this.selectRow(c,true)}}},deselectRange:function(c,b,a){if(this.isLocked()){return}for(var d=c;d<=b;d++){this.deselectRow(d,a)}},selectRow:function(b,d,a){if(this.isLocked()||(b<0||b>=this.grid.store.getCount())||(d&&this.isSelected(b))){return}var c=this.grid.store.getAt(b);if(c&&this.fireEvent(\"beforerowselect\",this,b,d,c)!==false){if(!d||this.singleSelect){this.clearSelections()}this.selections.add(c);this.last=this.lastActive=b;if(!a){this.grid.getView().onRowSelect(b)}if(!this.silent){this.fireEvent(\"rowselect\",this,b,c);this.fireEvent(\"selectionchange\",this)}}},deselectRow:function(b,a){if(this.isLocked()){return}if(this.last==b){this.last=false}if(this.lastActive==b){this.lastActive=false}var c=this.grid.store.getAt(b);if(c){this.selections.remove(c);if(!a){this.grid.getView().onRowDeselect(b)}this.fireEvent(\"rowdeselect\",this,b,c);this.fireEvent(\"selectionchange\",this)}},acceptsNav:function(c,b,a){return !a.isHidden(b)&&a.isCellEditable(b,c)},onEditorKey:function(o,m){var d=m.getKey(),h,i=this.grid,q=i.lastEdit,l=i.activeEditor,b=m.shiftKey,p,q,a,n;if(d==m.TAB){m.stopEvent();l.completeEdit();if(b){h=i.walkCells(l.row,l.col-1,-1,this.acceptsNav,this)}else{h=i.walkCells(l.row,l.col+1,1,this.acceptsNav,this)}}else{if(d==m.ENTER){if(this.moveEditorOnEnter!==false){if(b){h=i.walkCells(q.row-1,q.col,-1,this.acceptsNav,this)}else{h=i.walkCells(q.row+1,q.col,1,this.acceptsNav,this)}}}}if(h){a=h[0];n=h[1];this.onEditorSelect(a,q.row);if(i.isEditor&&i.editing){p=i.activeEditor;if(p&&p.field.triggerBlur){p.field.triggerBlur()}}i.startEditing(a,n)}},onEditorSelect:function(b,a){if(a!=b){this.selectRow(b)}},destroy:function(){Ext.destroy(this.rowNav);this.rowNav=null;Ext.grid.RowSelectionModel.superclass.destroy.call(this)}});Ext.grid.Column=Ext.extend(Ext.util.Observable,{isColumn:true,constructor:function(b){Ext.apply(this,b);if(Ext.isString(this.renderer)){this.renderer=Ext.util.Format[this.renderer]}else{if(Ext.isObject(this.renderer)){this.scope=this.renderer.scope;this.renderer=this.renderer.fn}}if(!this.scope){this.scope=this}var a=this.editor;delete this.editor;this.setEditor(a);this.addEvents(\"click\",\"contextmenu\",\"dblclick\",\"mousedown\");Ext.grid.Column.superclass.constructor.call(this)},processEvent:function(b,d,c,g,a){return this.fireEvent(b,this,c,g,d)},destroy:function(){if(this.setEditor){this.setEditor(null)}this.purgeListeners()},renderer:function(a){return a},getEditor:function(a){return this.editable!==false?this.editor:null},setEditor:function(b){var a=this.editor;if(a){if(a.gridEditor){a.gridEditor.destroy();delete a.gridEditor}else{a.destroy()}}this.editor=null;if(b){if(!b.isXType){b=Ext.create(b,\"textfield\")}this.editor=b}},getCellEditor:function(b){var a=this.getEditor(b);if(a){if(!a.startEdit){if(!a.gridEditor){a.gridEditor=new Ext.grid.GridEditor(a)}a=a.gridEditor}}return a}});Ext.grid.BooleanColumn=Ext.extend(Ext.grid.Column,{trueText:\"true\",falseText:\"false\",undefinedText:\"&#160;\",constructor:function(a){Ext.grid.BooleanColumn.superclass.constructor.call(this,a);var c=this.trueText,d=this.falseText,b=this.undefinedText;this.renderer=function(e){if(e===undefined){return b}if(!e||e===\"false\"){return d}return c}}});Ext.grid.NumberColumn=Ext.extend(Ext.grid.Column,{format:\"0,000.00\",constructor:function(a){Ext.grid.NumberColumn.superclass.constructor.call(this,a);this.renderer=Ext.util.Format.numberRenderer(this.format)}});Ext.grid.DateColumn=Ext.extend(Ext.grid.Column,{format:\"m/d/Y\",constructor:function(a){Ext.grid.DateColumn.superclass.constructor.call(this,a);this.renderer=Ext.util.Format.dateRenderer(this.format)}});Ext.grid.TemplateColumn=Ext.extend(Ext.grid.Column,{constructor:function(a){Ext.grid.TemplateColumn.superclass.constructor.call(this,a);var b=(!Ext.isPrimitive(this.tpl)&&this.tpl.compile)?this.tpl:new Ext.XTemplate(this.tpl);this.renderer=function(d,e,c){return b.apply(c.data)};this.tpl=b}});Ext.grid.ActionColumn=Ext.extend(Ext.grid.Column,{header:\"&#160;\",actionIdRe:/x-action-col-(\\d+)/,altText:\"\",constructor:function(b){var g=this,c=b.items||(g.items=[g]),a=c.length,d,e;Ext.grid.ActionColumn.superclass.constructor.call(g,b);g.renderer=function(h,i){h=Ext.isFunction(b.renderer)?b.renderer.apply(this,arguments)||\"\":\"\";i.css+=\" x-action-col-cell\";for(d=0;d<a;d++){e=c[d];h+='<img alt=\"'+g.altText+'\" src=\"'+(e.icon||Ext.BLANK_IMAGE_URL)+'\" class=\"x-action-col-icon x-action-col-'+String(d)+\" \"+(e.iconCls||\"\")+\" \"+(Ext.isFunction(e.getClass)?e.getClass.apply(e.scope||this.scope||this,arguments):\"\")+'\"'+((e.tooltip)?' ext:qtip=\"'+e.tooltip+'\"':\"\")+\" />\"}return h}},destroy:function(){delete this.items;delete this.renderer;return Ext.grid.ActionColumn.superclass.destroy.apply(this,arguments)},processEvent:function(c,i,d,k,b){var a=i.getTarget().className.match(this.actionIdRe),h,g;if(a&&(h=this.items[parseInt(a[1],10)])){if(c==\"click\"){(g=h.handler||this.handler)&&g.call(h.scope||this.scope||this,d,k,b,h,i)}else{if((c==\"mousedown\")&&(h.stopSelection!==false)){return false}}}return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)}});Ext.grid.Column.types={gridcolumn:Ext.grid.Column,booleancolumn:Ext.grid.BooleanColumn,numbercolumn:Ext.grid.NumberColumn,datecolumn:Ext.grid.DateColumn,templatecolumn:Ext.grid.TemplateColumn,actioncolumn:Ext.grid.ActionColumn};Ext.grid.RowNumberer=Ext.extend(Object,{header:\"\",width:23,sortable:false,constructor:function(a){Ext.apply(this,a);if(this.rowspan){this.renderer=this.renderer.createDelegate(this)}},fixed:true,hideable:false,menuDisabled:true,dataIndex:\"\",id:\"numberer\",rowspan:undefined,renderer:function(b,c,a,d){if(this.rowspan){c.cellAttr='rowspan=\"'+this.rowspan+'\"'}return d+1}});Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class=\"x-grid3-hd-checker\">&#160;</div>',width:20,sortable:false,menuDisabled:true,fixed:true,hideable:false,dataIndex:\"\",id:\"checker\",isColumn:true,constructor:function(){Ext.grid.CheckboxSelectionModel.superclass.constructor.apply(this,arguments);if(this.checkOnly){this.handleMouseDown=Ext.emptyFn}},initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this);this.grid.on(\"render\",function(){Ext.fly(this.grid.getView().innerHd).on(\"mousedown\",this.onHdMouseDown,this)},this)},processEvent:function(b,d,c,g,a){if(b==\"mousedown\"){this.onMouseDown(d,d.getTarget());return false}else{return Ext.grid.Column.prototype.processEvent.apply(this,arguments)}},onMouseDown:function(c,b){if(c.button===0&&b.className==\"x-grid3-row-checker\"){c.stopEvent();var d=c.getTarget(\".x-grid3-row\");if(d){var a=d.rowIndex;if(this.isSelected(a)){this.deselectRow(a)}else{this.selectRow(a,true);this.grid.getView().focusRow(a)}}}},onHdMouseDown:function(c,a){if(a.className==\"x-grid3-hd-checker\"){c.stopEvent();var b=Ext.fly(a.parentNode);var d=b.hasClass(\"x-grid3-hd-checker-on\");if(d){b.removeClass(\"x-grid3-hd-checker-on\");this.clearSelections()}else{b.addClass(\"x-grid3-hd-checker-on\");this.selectAll()}}},renderer:function(b,c,a){return'<div class=\"x-grid3-row-checker\">&#160;</div>'},onEditorSelect:function(b,a){if(a!=b&&!this.checkOnly){this.selectRow(b)}}});Ext.grid.CellSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{constructor:function(a){Ext.apply(this,a);this.selection=null;this.addEvents(\"beforecellselect\",\"cellselect\",\"selectionchange\");Ext.grid.CellSelectionModel.superclass.constructor.call(this)},initEvents:function(){this.grid.on(\"cellmousedown\",this.handleMouseDown,this);this.grid.on(Ext.EventManager.getKeyEvent(),this.handleKeyDown,this);this.grid.getView().on({scope:this,refresh:this.onViewChange,rowupdated:this.onRowUpdated,beforerowremoved:this.clearSelections,beforerowsinserted:this.clearSelections});if(this.grid.isEditor){this.grid.on(\"beforeedit\",this.beforeEdit,this)}},beforeEdit:function(a){this.select(a.row,a.column,false,true,a.record)},onRowUpdated:function(a,b,c){if(this.selection&&this.selection.record==c){a.onCellSelect(b,this.selection.cell[1])}},onViewChange:function(){this.clearSelections(true)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(b){var a=this.selection;if(a){if(b!==true){this.grid.view.onCellDeselect(a.cell[0],a.cell[1])}this.selection=null;this.fireEvent(\"selectionchange\",this,null)}},hasSelection:function(){return this.selection?true:false},handleMouseDown:function(b,d,a,c){if(c.button!==0||this.isLocked()){return}this.select(d,a)},select:function(g,c,b,e,d){if(this.fireEvent(\"beforecellselect\",this,g,c)!==false){this.clearSelections();d=d||this.grid.store.getAt(g);this.selection={record:d,cell:[g,c]};if(!b){var a=this.grid.getView();a.onCellSelect(g,c);if(e!==true){a.focusCell(g,c)}}this.fireEvent(\"cellselect\",this,g,c);this.fireEvent(\"selectionchange\",this,this.selection)}},isSelectable:function(c,b,a){return !a.isHidden(b)},onEditorKey:function(b,a){if(a.getKey()==a.TAB){this.handleKeyDown(a)}},handleKeyDown:function(l){if(!l.isNavKeyPress()){return}var d=l.getKey(),i=this.grid,q=this.selection,b=this,n=function(g,c,e){return i.walkCells(g,c,e,i.isEditor&&i.editing?b.acceptsNav:b.isSelectable,b)},p,h,a,m,o;switch(d){case l.ESC:case l.PAGE_UP:case l.PAGE_DOWN:break;default:l.stopEvent();break}if(!q){p=n(0,0,1);if(p){this.select(p[0],p[1])}return}p=q.cell;a=p[0];m=p[1];switch(d){case l.TAB:if(l.shiftKey){h=n(a,m-1,-1)}else{h=n(a,m+1,1)}break;case l.DOWN:h=n(a+1,m,1);break;case l.UP:h=n(a-1,m,-1);break;case l.RIGHT:h=n(a,m+1,1);break;case l.LEFT:h=n(a,m-1,-1);break;case l.ENTER:if(i.isEditor&&!i.editing){i.startEditing(a,m);return}break}if(h){a=h[0];m=h[1];this.select(a,m);if(i.isEditor&&i.editing){o=i.activeEditor;if(o&&o.field.triggerBlur){o.field.triggerBlur()}i.startEditing(a,m)}}},acceptsNav:function(c,b,a){return !a.isHidden(b)&&a.isCellEditable(b,c)}});Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,forceValidation:false,isEditor:true,detectEdit:false,autoEncode:false,trackMouseOver:false,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this);if(!this.selModel){this.selModel=new Ext.grid.CellSelectionModel()}this.activeEditor=null;this.addEvents(\"beforeedit\",\"afteredit\",\"validateedit\")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this);this.getGridEl().on(\"mousewheel\",this.stopEditing.createDelegate(this,[true]),this);this.on(\"columnresize\",this.stopEditing,this,[true]);if(this.clicksToEdit==1){this.on(\"cellclick\",this.onCellDblClick,this)}else{var a=this.getView();if(this.clicksToEdit==\"auto\"&&a.mainBody){a.mainBody.on(\"mousedown\",this.onAutoEditClick,this)}this.on(\"celldblclick\",this.onCellDblClick,this)}},onResize:function(){Ext.grid.EditorGridPanel.superclass.onResize.apply(this,arguments);var a=this.activeEditor;if(this.editing&&a){a.realign(true)}},onCellDblClick:function(b,c,a){this.startEditing(c,a)},onAutoEditClick:function(c,b){if(c.button!==0){return}var g=this.view.findRowIndex(b),a=this.view.findCellIndex(b);if(g!==false&&a!==false){this.stopEditing();if(this.selModel.getSelectedCell){var d=this.selModel.getSelectedCell();if(d&&d[0]===g&&d[1]===a){this.startEditing(g,a)}}else{if(this.selModel.isSelected(g)){this.startEditing(g,a)}}}},onEditComplete:function(b,d,a){this.editing=false;this.lastActiveEditor=this.activeEditor;this.activeEditor=null;var c=b.record,h=this.colModel.getDataIndex(b.col);d=this.postEditValue(d,a,c,h);if(this.forceValidation===true||String(d)!==String(a)){var g={grid:this,record:c,field:h,originalValue:a,value:d,row:b.row,column:b.col,cancel:false};if(this.fireEvent(\"validateedit\",g)!==false&&!g.cancel&&String(d)!==String(a)){c.set(h,g.value);delete g.cancel;this.fireEvent(\"afteredit\",g)}}this.view.focusCell(b.row,b.col)},startEditing:function(i,c){this.stopEditing();if(this.colModel.isCellEditable(c,i)){this.view.ensureVisible(i,c,true);var d=this.store.getAt(i),h=this.colModel.getDataIndex(c),g={grid:this,record:d,field:h,value:d.data[h],row:i,column:c,cancel:false};if(this.fireEvent(\"beforeedit\",g)!==false&&!g.cancel){this.editing=true;var b=this.colModel.getCellEditor(c,i);if(!b){return}if(!b.rendered){b.parentEl=this.view.getEditorParent(b);b.on({scope:this,render:{fn:function(e){e.field.focus(false,true)},single:true,scope:this},specialkey:function(l,k){this.getSelectionModel().onEditorKey(l,k)},complete:this.onEditComplete,canceledit:this.stopEditing.createDelegate(this,[true])})}Ext.apply(b,{row:i,col:c,record:d});this.lastEdit={row:i,col:c};this.activeEditor=b;b.selectSameEditor=(this.activeEditor==this.lastActiveEditor);var a=this.preEditValue(d,h);b.startEdit(this.view.getCell(i,c).firstChild,Ext.isDefined(a)?a:\"\");(function(){delete b.selectSameEditor}).defer(50)}}},preEditValue:function(a,c){var b=a.data[c];return this.autoEncode&&Ext.isString(b)?Ext.util.Format.htmlDecode(b):b},postEditValue:function(c,a,b,d){return this.autoEncode&&Ext.isString(c)?Ext.util.Format.htmlEncode(c):c},stopEditing:function(b){if(this.editing){var a=this.lastActiveEditor=this.activeEditor;if(a){a[b===true?\"cancelEdit\":\"completeEdit\"]();this.view.focusCell(a.row,a.col)}this.activeEditor=null}this.editing=false}});Ext.reg(\"editorgrid\",Ext.grid.EditorGridPanel);Ext.grid.GridEditor=function(b,a){Ext.grid.GridEditor.superclass.constructor.call(this,b,a);b.monitorTab=false};Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:\"tl-tl\",autoSize:\"width\",hideEl:false,cls:\"x-small-editor x-grid-editor\",shim:false,shadow:false});Ext.grid.PropertyRecord=Ext.data.Record.create([{name:\"name\",type:\"string\"},\"value\"]);Ext.grid.PropertyStore=Ext.extend(Ext.util.Observable,{constructor:function(a,b){this.grid=a;this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord});this.store.on(\"update\",this.onUpdate,this);if(b){this.setSource(b)}Ext.grid.PropertyStore.superclass.constructor.call(this)},setSource:function(c){this.source=c;this.store.removeAll();var b=[];for(var a in c){if(this.isEditableValue(c[a])){b.push(new Ext.grid.PropertyRecord({name:a,value:c[a]},a))}}this.store.loadRecords({records:b},{},true)},onUpdate:function(e,a,d){if(d==Ext.data.Record.EDIT){var b=a.data.value;var c=a.modified.value;if(this.grid.fireEvent(\"beforepropertychange\",this.source,a.id,b,c)!==false){this.source[a.id]=b;a.commit();this.grid.fireEvent(\"propertychange\",this.source,a.id,b,c)}else{a.reject()}}},getProperty:function(a){return this.store.getAt(a)},isEditableValue:function(a){return Ext.isPrimitive(a)||Ext.isDate(a)},setValue:function(d,c,a){var b=this.getRec(d);if(b){b.set(\"value\",c);this.source[d]=c}else{if(a){this.source[d]=c;b=new Ext.grid.PropertyRecord({name:d,value:c},d);this.store.add(b)}}},remove:function(b){var a=this.getRec(b);if(a){this.store.remove(a);delete this.source[b]}},getRec:function(a){return this.store.getById(a)},getSource:function(){return this.source}});Ext.grid.PropertyColumnModel=Ext.extend(Ext.grid.ColumnModel,{nameText:\"Name\",valueText:\"Value\",dateFormat:\"m/j/Y\",trueText:\"true\",falseText:\"false\",constructor:function(c,b){var d=Ext.grid,e=Ext.form;this.grid=c;d.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:true,dataIndex:\"name\",id:\"name\",menuDisabled:true},{header:this.valueText,width:50,resizable:false,dataIndex:\"value\",id:\"value\",menuDisabled:true}]);this.store=b;var a=new e.Field({autoCreate:{tag:\"select\",children:[{tag:\"option\",value:\"true\",html:this.trueText},{tag:\"option\",value:\"false\",html:this.falseText}]},getValue:function(){return this.el.dom.value==\"true\"}});this.editors={date:new d.GridEditor(new e.DateField({selectOnFocus:true})),string:new d.GridEditor(new e.TextField({selectOnFocus:true})),number:new d.GridEditor(new e.NumberField({selectOnFocus:true,style:\"text-align:left;\"})),\"boolean\":new d.GridEditor(a,{autoSize:\"both\"})};this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)},renderDate:function(a){return a.dateFormat(this.dateFormat)},renderBool:function(a){return this[a?\"trueText\":\"falseText\"]},isCellEditable:function(a,b){return a==1},getRenderer:function(a){return a==1?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(a){return this.getPropertyName(a)},renderCell:function(d,b,c){var a=this.grid.customRenderers[c.get(\"name\")];if(a){return a.apply(this,arguments)}var e=d;if(Ext.isDate(d)){e=this.renderDate(d)}else{if(typeof d==\"boolean\"){e=this.renderBool(d)}}return Ext.util.Format.htmlEncode(e)},getPropertyName:function(b){var a=this.grid.propertyNames;return a&&a[b]?a[b]:b},getCellEditor:function(a,e){var b=this.store.getProperty(e),d=b.data.name,c=b.data.value;if(this.grid.customEditors[d]){return this.grid.customEditors[d]}if(Ext.isDate(c)){return this.editors.date}else{if(typeof c==\"number\"){return this.editors.number}else{if(typeof c==\"boolean\"){return this.editors[\"boolean\"]}else{return this.editors.string}}}},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this);this.destroyEditors(this.editors);this.destroyEditors(this.grid.customEditors)},destroyEditors:function(b){for(var a in b){Ext.destroy(b[a])}}});Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,viewConfig:{forceFit:true},initComponent:function(){this.customRenderers=this.customRenderers||{};this.customEditors=this.customEditors||{};this.lastEditRow=null;var b=new Ext.grid.PropertyStore(this);this.propStore=b;var a=new Ext.grid.PropertyColumnModel(this,b);b.store.sort(\"name\",\"ASC\");this.addEvents(\"beforepropertychange\",\"propertychange\");this.cm=a;this.ds=b.store;Ext.grid.PropertyGrid.superclass.initComponent.call(this);this.mon(this.selModel,\"beforecellselect\",function(e,d,c){if(c===0){this.startEditing.defer(200,this,[d,1]);return false}},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass(\"x-props-grid\")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments);if(this.source){this.setSource(this.source)}},setSource:function(a){this.propStore.setSource(a)},getSource:function(){return this.propStore.getSource()},setProperty:function(c,b,a){this.propStore.setValue(c,b,a)},removeProperty:function(a){this.propStore.remove(a)}});Ext.reg(\"propertygrid\",Ext.grid.PropertyGrid);Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{groupByText:\"Group By This Field\",showGroupsText:\"Show in Groups\",hideGroupedColumn:false,showGroupName:true,startCollapsed:false,enableGrouping:true,enableGroupingMenu:true,enableNoGroups:true,emptyGroupText:\"(None)\",ignoreAdd:false,groupTextTpl:\"{text}\",groupMode:\"value\",cancelEditOnToggle:true,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this);this.state={};var a=this.grid.getSelectionModel();a.on(a.selectRow?\"beforerowselect\":\"beforecellselect\",this.onBeforeRowSelect,this);if(!this.startGroup){this.startGroup=new Ext.XTemplate('<div id=\"{groupId}\" class=\"x-grid-group {cls}\">','<div id=\"{groupId}-hd\" class=\"x-grid-group-hd\" style=\"{style}\"><div class=\"x-grid-group-title\">',this.groupTextTpl,\"</div></div>\",'<div id=\"{groupId}-bd\" class=\"x-grid-group-body\">')}this.startGroup.compile();if(!this.endGroup){this.endGroup=\"</div></div>\"}},findGroup:function(a){return Ext.fly(a).up(\".x-grid-group\",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(d,a,b){if(this.canGroup()&&!this.ignoreAdd){var c=this.getScrollState();this.fireEvent(\"beforerowsinserted\",d,b,b+(a.length-1));this.refresh();this.restoreScroll(c);this.fireEvent(\"rowsinserted\",d,b,b+(a.length-1))}else{if(!this.canGroup()){Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)}}},onRemove:function(e,a,b,d){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var c=document.getElementById(a._groupId);if(c&&c.childNodes[1].childNodes.length<1){Ext.removeNode(c)}this.applyEmptyText()},refreshRow:function(a){if(this.ds.getCount()==1){this.refresh()}else{this.isUpdating=true;Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments);this.isUpdating=false}},beforeMenuShow:function(){var c,a=this.hmenu.items,b=this.cm.config[this.hdCtxIndex].groupable===false;if((c=a.get(\"groupBy\"))){c.setDisabled(b)}if((c=a.get(\"showGroups\"))){c.setDisabled(b);c.setChecked(this.canGroup(),true)}},renderUI:function(){var a=Ext.grid.GroupingView.superclass.renderUI.call(this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add(\"-\",{itemId:\"groupBy\",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:\"x-group-by-icon\"});if(this.enableNoGroups){this.hmenu.add({itemId:\"showGroups\",text:this.showGroupsText,checked:true,checkHandler:this.onShowGroupsClick,scope:this})}this.hmenu.on(\"beforeshow\",this.beforeMenuShow,this)}return a},processEvent:function(b,i){Ext.grid.GroupingView.superclass.processEvent.call(this,b,i);var h=i.getTarget(\".x-grid-group-hd\",this.mainBody);if(h){var g=this.getGroupField(),d=this.getPrefix(g),a=h.id.substring(d.length),c=new RegExp(\"gp-\"+Ext.escapeRe(g)+\"--hd\");a=a.substr(0,a.length-3);if(a||c.test(h.id)){this.grid.fireEvent(\"group\"+b,this.grid,g,a,i)}if(b==\"mousedown\"&&i.button==0){this.toggleGroup(h.parentNode)}}},onGroupByClick:function(){var a=this.grid;this.enableGrouping=true;a.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex));a.fireEvent(\"groupchange\",a,a.store.getGroupState());this.beforeMenuShow();this.refresh()},onShowGroupsClick:function(a,b){this.enableGrouping=b;if(b){this.onGroupByClick()}else{this.grid.store.clearGrouping();this.grid.fireEvent(\"groupchange\",this,null)}},toggleRowIndex:function(c,a){if(!this.canGroup()){return}var b=this.getRow(c);if(b){this.toggleGroup(this.findGroup(b),a)}},toggleGroup:function(c,b){var a=Ext.get(c);b=Ext.isDefined(b)?b:a.hasClass(\"x-grid-group-collapsed\");if(this.state[a.id]!==b){if(this.cancelEditOnToggle!==false){this.grid.stopEditing(true)}this.state[a.id]=b;a[b?\"removeClass\":\"addClass\"](\"x-grid-group-collapsed\")}},toggleAllGroups:function(c){var b=this.getGroups();for(var d=0,a=b.length;d<a;d++){this.toggleGroup(b[d],c)}},expandAllGroups:function(){this.toggleAllGroups(true)},collapseAllGroups:function(){this.toggleAllGroups(false)},getGroup:function(a,e,i,k,b,h){var c=this.cm.config[b],d=i?i.call(c.scope,a,{},e,k,b,h):String(a);if(d===\"\"||d===\"&#160;\"){d=c.emptyGroupText||this.emptyGroupText}return d},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){if(!this.ds||!this.cm){return}Ext.grid.GroupingView.superclass.afterRender.call(this);if(this.grid.deferRowRender){this.updateGroupWidths()}},afterRenderUI:function(){Ext.grid.GroupingView.superclass.afterRenderUI.call(this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add(\"-\",{itemId:\"groupBy\",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:\"x-group-by-icon\"});if(this.enableNoGroups){this.hmenu.add({itemId:\"showGroups\",text:this.showGroupsText,checked:true,checkHandler:this.onShowGroupsClick,scope:this})}this.hmenu.on(\"beforeshow\",this.beforeMenuShow,this)}},renderRows:function(){var a=this.getGroupField();var e=!!a;if(this.hideGroupedColumn){var b=this.cm.findColumnIndex(a),d=Ext.isDefined(this.lastGroupField);if(!e&&d){this.mainBody.update(\"\");this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),false);delete this.lastGroupField}else{if(e&&!d){this.lastGroupField=a;this.cm.setHidden(b,true)}else{if(e&&d&&a!==this.lastGroupField){this.mainBody.update(\"\");var c=this.cm.findColumnIndex(this.lastGroupField);this.cm.setHidden(c,false);this.lastGroupField=a;this.cm.setHidden(b,true)}}}}return Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(c,h,s,a,q,t){if(h.length<1){return\"\"}if(!this.canGroup()||this.isUpdating){return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments)}var A=this.getGroupField(),p=this.cm.findColumnIndex(A),x,k=\"width:\"+this.getTotalWidth()+\";\",e=this.cm.config[p],b=e.groupRenderer||e.renderer,u=this.showGroupName?(e.groupName||e.header)+\": \":\"\",z=[],m,v,w,o;for(v=0,w=h.length;v<w;v++){var l=a+v,n=h[v],d=n.data[A];x=this.getGroup(d,n,b,l,p,s);if(!m||m.group!=x){o=this.constructId(d,A,p);this.state[o]=!(Ext.isDefined(this.state[o])?!this.state[o]:this.startCollapsed);m={group:x,gvalue:d,text:u+x,groupId:o,startRow:l,rs:[n],cls:this.state[o]?\"\":\"x-grid-group-collapsed\",style:k};z.push(m)}else{m.rs.push(n)}n._groupId=o}var y=[];for(v=0,w=z.length;v<w;v++){x=z[v];this.doGroupStart(y,x,c,s,q);y[y.length]=Ext.grid.GroupingView.superclass.doRender.call(this,c,x.rs,s,x.startRow,q,t);this.doGroupEnd(y,x,c,s,q)}return y.join(\"\")},getGroupId:function(a){var b=this.getGroupField();return this.constructId(a,b,this.cm.findColumnIndex(b))},constructId:function(c,e,a){var b=this.cm.config[a],d=b.groupRenderer||b.renderer,g=(this.groupMode==\"value\")?c:this.getGroup(c,{data:{}},d,0,a,this.ds);return this.getPrefix(e)+Ext.util.Format.htmlEncode(g)},canGroup:function(){return this.enableGrouping&&!!this.getGroupField()},getPrefix:function(a){return this.grid.getGridEl().id+\"-gp-\"+a+\"-\"},doGroupStart:function(a,d,b,e,c){a[a.length]=this.startGroup.apply(d)},doGroupEnd:function(a,d,b,e,c){a[a.length]=this.endGroup},getRows:function(){if(!this.canGroup()){return Ext.grid.GroupingView.superclass.getRows.call(this)}var k=[],c=this.getGroups(),h,e=0,a=c.length,d,b;for(;e<a;++e){h=c[e].childNodes[1];if(h){h=h.childNodes;for(d=0,b=h.length;d<b;++d){k[k.length]=h[d]}}}return k},updateGroupWidths:function(){if(!this.canGroup()||!this.hasRows()){return}var c=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.getScrollOffset())+\"px\";var b=this.getGroups();for(var d=0,a=b.length;d<a;d++){b[d].firstChild.style.width=c}},onColumnWidthUpdated:function(c,a,b){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,c,a,b);this.updateGroupWidths()},onAllColumnWidthsUpdated:function(a,b){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,a,b);this.updateGroupWidths()},onColumnHiddenUpdated:function(b,c,a){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,b,c,a);this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(b,a){this.toggleRowIndex(a,true)}});Ext.grid.GroupingView.GROUP_ID=1000;\n   27  /*\n   28  ---\n   ..\n 17294   * http://www.sencha.com/license\n 17295   */\n 17296: (function(){var h=Ext.util,j=Ext.each,g=true,i=false;h.Observable=function(){var k=this,l=k.events;if(k.listeners){k.on(k.listeners);delete k.listeners}k.events=l||{}};h.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var k=Array.prototype.slice.call(arguments,0),m=k[0].toLowerCase(),n=this,l=g,p=n.events[m],s,o,r;if(n.eventsSuspended===g){if(o=n.eventQueue){o.push(k)}}else{if(typeof p==\"object\"){if(p.bubble){if(p.fire.apply(p,k.slice(1))===i){return i}r=n.getBubbleTarget&&n.getBubbleTarget();if(r&&r.enableBubble){s=r.events[m];if(!s||typeof s!=\"object\"||!s.bubble){r.enableBubble(m)}return r.fireEvent.apply(r,k)}}else{k.shift();l=p.fire.apply(p,k)}}}return l},addListener:function(k,m,l,r){var n=this,q,s,p;if(typeof k==\"object\"){r=k;for(q in r){s=r[q];if(!n.filterOptRe.test(q)){n.addListener(q,s.fn||s,s.scope||r.scope,s.fn?s:r)}}}else{k=k.toLowerCase();p=n.events[k]||g;if(typeof p==\"boolean\"){n.events[k]=p=new h.Event(n,k)}p.addListener(m,l,typeof r==\"object\"?r:{})}},removeListener:function(k,m,l){var n=this.events[k.toLowerCase()];if(typeof n==\"object\"){n.removeListener(m,l)}},purgeListeners:function(){var m=this.events,k,l;for(l in m){k=m[l];if(typeof k==\"object\"){k.clearListeners()}}},addEvents:function(n){var m=this;m.events=m.events||{};if(typeof n==\"string\"){var k=arguments,l=k.length;while(l--){m.events[k[l]]=m.events[k[l]]||g}}else{Ext.applyIf(m.events,n)}},hasListener:function(k){var l=this.events[k.toLowerCase()];return typeof l==\"object\"&&l.listeners.length>0},suspendEvents:function(k){this.eventsSuspended=g;if(k&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var k=this,l=k.eventQueue||[];k.eventsSuspended=i;delete k.eventQueue;j(l,function(m){k.fireEvent.apply(k,m)})}};var d=h.Observable.prototype;d.on=d.addListener;d.un=d.removeListener;h.Observable.releaseCapture=function(k){k.fireEvent=d.fireEvent};function e(l,m,k){return function(){if(m.target==arguments[0]){l.apply(k,Array.prototype.slice.call(arguments,0))}}}function b(n,p,k,m){k.task=new h.DelayedTask();return function(){k.task.delay(p.buffer,n,m,Array.prototype.slice.call(arguments,0))}}function c(m,n,l,k){return function(){n.removeListener(l,k);return m.apply(k,arguments)}}function a(n,p,k,m){return function(){var l=new h.DelayedTask(),o=Array.prototype.slice.call(arguments,0);if(!k.tasks){k.tasks=[]}k.tasks.push(l);l.delay(p.delay||10,function(){k.tasks.remove(l);n.apply(m,o)},m)}}h.Event=function(l,k){this.name=k;this.obj=l;this.listeners=[]};h.Event.prototype={addListener:function(o,n,m){var p=this,k;n=n||p.obj;if(!p.isListening(o,n)){k=p.createListener(o,n,m);if(p.firing){p.listeners=p.listeners.slice(0)}p.listeners.push(k)}},createListener:function(p,n,q){q=q||{};n=n||this.obj;var k={fn:p,scope:n,options:q},m=p;if(q.target){m=e(m,q,n)}if(q.delay){m=a(m,q,k,n)}if(q.single){m=c(m,this,p,n)}if(q.buffer){m=b(m,q,k,n)}k.fireFn=m;return k},findListener:function(o,n){var p=this.listeners,m=p.length,k;n=n||this.obj;while(m--){k=p[m];if(k){if(k.fn==o&&k.scope==n){return m}}}return -1},isListening:function(l,k){return this.findListener(l,k)!=-1},removeListener:function(r,q){var p,m,n,s=this,o=i;if((p=s.findListener(r,q))!=-1){if(s.firing){s.listeners=s.listeners.slice(0)}m=s.listeners[p];if(m.task){m.task.cancel();delete m.task}n=m.tasks&&m.tasks.length;if(n){while(n--){m.tasks[n].cancel()}delete m.tasks}s.listeners.splice(p,1);o=g}return o},clearListeners:function(){var n=this,k=n.listeners,m=k.length;while(m--){n.removeListener(k[m].fn,k[m].scope)}},fire:function(){var q=this,p=q.listeners,k=p.length,o=0,m;if(k>0){q.firing=g;var n=Array.prototype.slice.call(arguments,0);for(;o<k;o++){m=p[o];if(m&&m.fireFn.apply(m.scope||q.obj||window,n)===i){return(q.firing=i)}}}q.firing=i;return g}}})();Ext.DomHelper=function(){var x=null,k=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,m=/^table|tbody|tr|td$/i,d=/tag|children|cn|html$/i,t=/td|tr|tbody/i,o=/([a-z0-9-]+)\\s*:\\s*([^;\\s]+(?:\\s*[^;\\s]+)*);?/gi,v=/end/i,r,n=\"afterbegin\",p=\"afterend\",c=\"beforebegin\",q=\"beforeend\",a=\"<table>\",i=\"</table>\",b=a+\"<tbody>\",j=\"</tbody>\"+i,l=b+\"<tr>\",w=\"</tr>\"+j;function h(B,D,C,E,A,y){var z=r.insertHtml(E,Ext.getDom(B),u(D));return C?Ext.get(z,true):z}function u(D){var z=\"\",y,C,B,E;if(typeof D==\"string\"){z=D}else{if(Ext.isArray(D)){for(var A=0;A<D.length;A++){if(D[A]){z+=u(D[A])}}}else{z+=\"<\"+(D.tag=D.tag||\"div\");for(y in D){C=D[y];if(!d.test(y)){if(typeof C==\"object\"){z+=\" \"+y+'=\"';for(B in C){z+=B+\":\"+C[B]+\";\"}z+='\"'}else{z+=\" \"+({cls:\"class\",htmlFor:\"for\"}[y]||y)+'=\"'+C+'\"'}}}if(k.test(D.tag)){z+=\"/>\"}else{z+=\">\";if((E=D.children||D.cn)){z+=u(E)}else{if(D.html){z+=D.html}}z+=\"</\"+D.tag+\">\"}}}return z}function g(F,C,B,D){x.innerHTML=[C,B,D].join(\"\");var y=-1,A=x,z;while(++y<F){A=A.firstChild}if(z=A.nextSibling){var E=document.createDocumentFragment();while(A){z=A.nextSibling;E.appendChild(A);A=z}A=E}return A}function e(y,z,B,A){var C,D;x=x||document.createElement(\"div\");if(y==\"td\"&&(z==n||z==q)||!t.test(y)&&(z==c||z==p)){return}D=z==c?B:z==p?B.nextSibling:z==n?B.firstChild:null;if(z==c||z==p){B=B.parentNode}if(y==\"td\"||(y==\"tr\"&&(z==q||z==n))){C=g(4,l,A,w)}else{if((y==\"tbody\"&&(z==q||z==n))||(y==\"tr\"&&(z==c||z==p))){C=g(3,b,A,j)}else{C=g(2,a,A,i)}}B.insertBefore(C,D);return C}function s(A){var D=document.createElement(\"div\"),y=document.createDocumentFragment(),z=0,B,C;D.innerHTML=A;C=D.childNodes;B=C.length;for(;z<B;z++){y.appendChild(C[z].cloneNode(true))}return y}r={markup:function(y){return u(y)},applyStyles:function(y,z){if(z){var A;y=Ext.fly(y);if(typeof z==\"function\"){z=z.call()}if(typeof z==\"string\"){o.lastIndex=0;while((A=o.exec(z))){y.setStyle(A[1],A[2])}}else{if(typeof z==\"object\"){y.setStyle(z)}}}},insertHtml:function(D,y,E){var B={},A,F,C,G,H,z;D=D.toLowerCase();B[c]=[\"BeforeBegin\",\"previousSibling\"];B[p]=[\"AfterEnd\",\"nextSibling\"];if(y.insertAdjacentHTML){if(m.test(y.tagName)&&(z=e(y.tagName.toLowerCase(),D,y,E))){return z}B[n]=[\"AfterBegin\",\"firstChild\"];B[q]=[\"BeforeEnd\",\"lastChild\"];if((A=B[D])){y.insertAdjacentHTML(A[0],E);return y[A[1]]}}else{F=y.ownerDocument.createRange();G=\"setStart\"+(v.test(D)?\"After\":\"Before\");if(B[D]){F[G](y);if(!F.createContextualFragment){H=s(E)}else{H=F.createContextualFragment(E)}y.parentNode.insertBefore(H,D==c?y:y.nextSibling);return y[(D==c?\"previous\":\"next\")+\"Sibling\"]}else{C=(D==n?\"first\":\"last\")+\"Child\";if(y.firstChild){F[G](y[C]);if(!F.createContextualFragment){H=s(E)}else{H=F.createContextualFragment(E)}if(D==n){y.insertBefore(H,y.firstChild)}else{y.appendChild(H)}}else{y.innerHTML=E}return y[C]}}throw'Illegal insertion point -> \"'+D+'\"'},insertBefore:function(y,A,z){return h(y,A,z,c)},insertAfter:function(y,A,z){return h(y,A,z,p,\"nextSibling\")},insertFirst:function(y,A,z){return h(y,A,z,n,\"firstChild\")},append:function(y,A,z){return h(y,A,z,q,\"\",true)},overwrite:function(y,A,z){y=Ext.getDom(y);y.innerHTML=u(A);return z?Ext.get(y.firstChild):y.firstChild},createHtml:u};return r}();Ext.Template=function(h){var j=this,c=arguments,e=[],d;if(Ext.isArray(h)){h=h.join(\"\")}else{if(c.length>1){for(var g=0,b=c.length;g<b;g++){d=c[g];if(typeof d==\"object\"){Ext.apply(j,d)}else{e.push(d)}}h=e.join(\"\")}}j.html=h;if(j.compiled){j.compile()}};Ext.Template.prototype={re:/\\{([\\w\\-]+)\\}/g,applyTemplate:function(a){var b=this;return b.compiled?b.compiled(a):b.html.replace(b.re,function(c,d){return a[d]!==undefined?a[d]:\"\"})},set:function(a,c){var b=this;b.html=a;b.compiled=null;return c?b.compile():b},compile:function(){var me=this,sep=Ext.isGecko?\"+\":\",\";function fn(m,name){name=\"values['\"+name+\"']\";return\"'\"+sep+\"(\"+name+\" == undefined ? '' : \"+name+\")\"+sep+\"'\"}eval(\"this.compiled = function(values){ return \"+(Ext.isGecko?\"'\":\"['\")+me.html.replace(/\\\\/g,\"\\\\\\\\\").replace(/(\\r\\n|\\n)/g,\"\\\\n\").replace(/'/g,\"\\\\'\").replace(this.re,fn)+(Ext.isGecko?\"';};\":\"'].join('');};\"));return me},insertFirst:function(b,a,c){return this.doInsert(\"afterBegin\",b,a,c)},insertBefore:function(b,a,c){return this.doInsert(\"beforeBegin\",b,a,c)},insertAfter:function(b,a,c){return this.doInsert(\"afterEnd\",b,a,c)},append:function(b,a,c){return this.doInsert(\"beforeEnd\",b,a,c)},doInsert:function(c,e,b,a){e=Ext.getDom(e);var d=Ext.DomHelper.insertHtml(c,e,this.applyTemplate(b));return a?Ext.get(d,true):d},overwrite:function(b,a,c){b=Ext.getDom(b);b.innerHTML=this.applyTemplate(a);return c?Ext.get(b.firstChild,true):b.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.Template.from=function(b,a){b=Ext.getDom(b);return new Ext.Template(b.value||b.innerHTML,a||\"\")};Ext.DomQuery=function(){var cache={},simpleCache={},valueCache={},nonSpace=/\\S/,trimRe=/^\\s+|\\s+$/g,tplRe=/\\{(\\d+)\\}/g,modeRe=/^(\\s?[\\/>+~]\\s?|\\s|$)/,tagTokenRe=/^(#)?([\\w\\-\\*]+)/,nthRe=/(\\d*)n\\+?(\\d*)/,nthRe2=/\\D/,isIE=window.ActiveXObject?true:false,key=30803;eval(\"var batch = 30803;\");function child(parent,index){var i=0,n=parent.firstChild;while(n){if(n.nodeType==1){if(++i==index){return n}}n=n.nextSibling}return null}function next(n){while((n=n.nextSibling)&&n.nodeType!=1){}return n}function prev(n){while((n=n.previousSibling)&&n.nodeType!=1){}return n}function children(parent){var n=parent.firstChild,nodeIndex=-1,nextNode;while(n){nextNode=n.nextSibling;if(n.nodeType==3&&!nonSpace.test(n.nodeValue)){parent.removeChild(n)}else{n.nodeIndex=++nodeIndex}n=nextNode}return this}function byClassName(nodeSet,cls){if(!cls){return nodeSet}var result=[],ri=-1;for(var i=0,ci;ci=nodeSet[i];i++){if((\" \"+ci.className+\" \").indexOf(cls)!=-1){result[++ri]=ci}}return result}function attrValue(n,attr){if(!n.tagName&&typeof n.length!=\"undefined\"){n=n[0]}if(!n){return null}if(attr==\"for\"){return n.htmlFor}if(attr==\"class\"||attr==\"className\"){return n.className}return n.getAttribute(attr)||n[attr]}function getNodes(ns,mode,tagName){var result=[],ri=-1,cs;if(!ns){return result}tagName=tagName||\"*\";if(typeof ns.getElementsByTagName!=\"undefined\"){ns=[ns]}if(!mode){for(var i=0,ni;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(var j=0,ci;ci=cs[j];j++){result[++ri]=ci}}}else{if(mode==\"/\"||mode==\">\"){var utag=tagName.toUpperCase();for(var i=0,ni,cn;ni=ns[i];i++){cn=ni.childNodes;for(var j=0,cj;cj=cn[j];j++){if(cj.nodeName==utag||cj.nodeName==tagName||tagName==\"*\"){result[++ri]=cj}}}}else{if(mode==\"+\"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(n&&(n.nodeName==utag||n.nodeName==tagName||tagName==\"*\")){result[++ri]=n}}}else{if(mode==\"~\"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)){if(n.nodeName==utag||n.nodeName==tagName||tagName==\"*\"){result[++ri]=n}}}}}}}return result}function concat(a,b){if(b.slice){return a.concat(b)}for(var i=0,l=b.length;i<l;i++){a[a.length]=b[i]}return a}function byTag(cs,tagName){if(cs.tagName||cs==document){cs=[cs]}if(!tagName){return cs}var result=[],ri=-1;tagName=tagName.toLowerCase();for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType==1&&ci.tagName.toLowerCase()==tagName){result[++ri]=ci}}return result}function byId(cs,id){if(cs.tagName||cs==document){cs=[cs]}if(!id){return cs}var result=[],ri=-1;for(var i=0,ci;ci=cs[i];i++){if(ci&&ci.id==id){result[++ri]=ci;return result}}return result}function byAttribute(cs,attr,value,op,custom){var result=[],ri=-1,useGetStyle=custom==\"{\",fn=Ext.DomQuery.operators[op],a,xml,hasXml;for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType!=1){continue}if(!hasXml){xml=Ext.DomQuery.isXml(ci);hasXml=true}if(!xml){if(useGetStyle){a=Ext.DomQuery.getStyle(ci,attr)}else{if(attr==\"class\"||attr==\"className\"){a=ci.className}else{if(attr==\"for\"){a=ci.htmlFor}else{if(attr==\"href\"){a=ci.getAttribute(\"href\",2)}else{a=ci.getAttribute(attr)}}}}}else{a=ci.getAttribute(attr)}if((fn&&fn(a,value))||(!fn&&a)){result[++ri]=ci}}return result}function byPseudo(cs,name,value){return Ext.DomQuery.pseudos[name](cs,value)}function nodupIEXml(cs){var d=++key,r;cs[0].setAttribute(\"_nodup\",d);r=[cs[0]];for(var i=1,len=cs.length;i<len;i++){var c=cs[i];if(!c.getAttribute(\"_nodup\")!=d){c.setAttribute(\"_nodup\",d);r[r.length]=c}}for(var i=0,len=cs.length;i<len;i++){cs[i].removeAttribute(\"_nodup\")}return r}function nodup(cs){if(!cs){return[]}var len=cs.length,c,i,r=cs,cj,ri=-1;if(!len||typeof cs.nodeType!=\"undefined\"||len==1){return cs}if(isIE&&typeof cs[0].selectSingleNode!=\"undefined\"){return nodupIEXml(cs)}var d=++key;cs[0]._nodup=d;for(i=1;c=cs[i];i++){if(c._nodup!=d){c._nodup=d}else{r=[];for(var j=0;j<i;j++){r[++ri]=cs[j]}for(j=i+1;cj=cs[j];j++){if(cj._nodup!=d){cj._nodup=d;r[++ri]=cj}}return r}}return r}function quickDiffIEXml(c1,c2){var d=++key,r=[];for(var i=0,len=c1.length;i<len;i++){c1[i].setAttribute(\"_qdiff\",d)}for(var i=0,len=c2.length;i<len;i++){if(c2[i].getAttribute(\"_qdiff\")!=d){r[r.length]=c2[i]}}for(var i=0,len=c1.length;i<len;i++){c1[i].removeAttribute(\"_qdiff\")}return r}function quickDiff(c1,c2){var len1=c1.length,d=++key,r=[];if(!len1){return c2}if(isIE&&typeof c1[0].selectSingleNode!=\"undefined\"){return quickDiffIEXml(c1,c2)}for(var i=0;i<len1;i++){c1[i]._qdiff=d}for(var i=0,len=c2.length;i<len;i++){if(c2[i]._qdiff!=d){r[r.length]=c2[i]}}return r}function quickId(ns,mode,root,id){if(ns==root){var d=root.ownerDocument||root;return d.getElementById(id)}ns=getNodes(ns,mode,\"*\");return byId(ns,id)}return{getStyle:function(el,name){return Ext.fly(el).getStyle(name)},compile:function(path,type){type=type||\"select\";var fn=[\"var f = function(root){\\n var mode; ++batch; var n = root || document;\\n\"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode=\"'+lmode[1].replace(trimRe,\"\")+'\";';path=path.replace(lmode[1],\"\")}while(path.substr(0,1)==\"/\"){path=path.substr(1)}while(path&&lastPath!=path){lastPath=path;var tokenMatch=path.match(tagTokenRe);if(type==\"select\"){if(tokenMatch){if(tokenMatch[1]==\"#\"){fn[fn.length]='n = quickId(n, mode, root, \"'+tokenMatch[2]+'\");'}else{fn[fn.length]='n = getNodes(n, mode, \"'+tokenMatch[2]+'\");'}path=path.replace(tokenMatch[0],\"\")}else{if(path.substr(0,1)!=\"@\"){fn[fn.length]='n = getNodes(n, mode, \"*\");'}}}else{if(tokenMatch){if(tokenMatch[1]==\"#\"){fn[fn.length]='n = byId(n, \"'+tokenMatch[2]+'\");'}else{fn[fn.length]='n = byTag(n, \"'+tokenMatch[2]+'\");'}path=path.replace(tokenMatch[0],\"\")}}while(!(modeMatch=path.match(modeRe))){var matched=false;for(var j=0;j<matchersLn;j++){var t=matchers[j];var m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i]});path=path.replace(m[0],\"\");matched=true;break}}if(!matched){throw'Error parsing selector, parsing failed at \"'+path+'\"'}}if(modeMatch[1]){fn[fn.length]='mode=\"'+modeMatch[1].replace(trimRe,\"\")+'\";';path=path.replace(modeMatch[1],\"\")}}fn[fn.length]=\"return nodup(n);\\n}\";eval(fn.join(\"\"));return f},jsSelect:function(path,root,type){root=root||document;if(typeof root==\"string\"){root=document.getElementById(root)}var paths=path.split(\",\"),results=[];for(var i=0,len=paths.length;i<len;i++){var subPath=paths[i].replace(trimRe,\"\");if(!cache[subPath]){cache[subPath]=Ext.DomQuery.compile(subPath);if(!cache[subPath]){throw subPath+\" is not a valid selector\"}}var result=cache[subPath](root);if(result&&result!=document){results=results.concat(result)}}if(paths.length>1){return nodup(results)}return results},isXml:function(el){var docEl=(el?el.ownerDocument||el:0).documentElement;return docEl?docEl.nodeName!==\"HTML\":false},select:document.querySelectorAll?function(path,root,type){root=root||document;if(!Ext.DomQuery.isXml(root)){try{var cs=root.querySelectorAll(path);return Ext.toArray(cs)}catch(ex){}}return Ext.DomQuery.jsSelect.call(this,path,root,type)}:function(path,root,type){return Ext.DomQuery.jsSelect.call(this,path,root,type)},selectNode:function(path,root){return Ext.DomQuery.select(path,root)[0]},selectValue:function(path,root,defaultValue){path=path.replace(trimRe,\"\");if(!valueCache[path]){valueCache[path]=Ext.DomQuery.compile(path,\"select\")}var n=valueCache[path](root),v;n=n[0]?n[0]:n;if(typeof n.normalize==\"function\"){n.normalize()}v=(n&&n.firstChild?n.firstChild.nodeValue:null);return((v===null||v===undefined||v===\"\")?defaultValue:v)},selectNumber:function(path,root,defaultValue){var v=Ext.DomQuery.selectValue(path,root,defaultValue||0);return parseFloat(v)},is:function(el,ss){if(typeof el==\"string\"){el=document.getElementById(el)}var isArray=Ext.isArray(el),result=Ext.DomQuery.filter(isArray?el:[el],ss);return isArray?(result.length==el.length):(result.length>0)},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,\"\");if(!simpleCache[ss]){simpleCache[ss]=Ext.DomQuery.compile(ss,\"simple\")}var result=simpleCache[ss](els);return nonMatches?quickDiff(result,els):result},matchers:[{re:/^\\.([\\w\\-]+)/,select:'n = byClassName(n, \" {1} \");'},{re:/^\\:([\\w\\-]+)(?:\\(((?:[^\\s>\\/]*|.*?))\\))?/,select:'n = byPseudo(n, \"{1}\", \"{2}\");'},{re:/^(?:([\\[\\{])(?:@)?([\\w\\-]+)\\s?(?:(=|.=)\\s?([\"']?)(.*?)\\4)?[\\]\\}])/,select:'n = byAttribute(n, \"{2}\", \"{5}\", \"{3}\", \"{1}\");'},{re:/^#([\\w\\-]+)/,select:'n = byId(n, \"{1}\");'},{re:/^@([\\w\\-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, \"{1}\")}};'}],operators:{\"=\":function(a,v){return a==v},\"!=\":function(a,v){return a!=v},\"^=\":function(a,v){return a&&a.substr(0,v.length)==v},\"$=\":function(a,v){return a&&a.substr(a.length-v.length)==v},\"*=\":function(a,v){return a&&a.indexOf(v)!==-1},\"%=\":function(a,v){return(a%v)==0},\"|=\":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+\"-\")},\"~=\":function(a,v){return a&&(\" \"+a+\" \").indexOf(\" \"+v+\" \")!=-1}},pseudos:{\"first-child\":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.previousSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},\"last-child\":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},\"nth-child\":function(c,a){var r=[],ri=-1,m=nthRe.exec(a==\"even\"&&\"2n\"||a==\"odd\"&&\"2n+1\"||!nthRe2.test(a)&&\"n+\"+a||a),f=(m[1]||1)-0,l=m[2]-0;for(var i=0,n;n=c[i];i++){var pn=n.parentNode;if(batch!=pn._batch){var j=0;for(var cn=pn.firstChild;cn;cn=cn.nextSibling){if(cn.nodeType==1){cn.nodeIndex=++j}}pn._batch=batch}if(f==1){if(l==0||n.nodeIndex==l){r[++ri]=n}}else{if((n.nodeIndex+l)%f==0){r[++ri]=n}}}return r},\"only-child\":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(!prev(ci)&&!next(ci)){r[++ri]=ci}}return r},empty:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var cns=ci.childNodes,j=0,cn,empty=true;while(cn=cns[j]){++j;if(cn.nodeType==1||cn.nodeType==3){empty=false;break}}if(empty){r[++ri]=ci}}return r},contains:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if((ci.textContent||ci.innerText||\"\").indexOf(v)!=-1){r[++ri]=ci}}return r},nodeValue:function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.firstChild&&ci.firstChild.nodeValue==v){r[++ri]=ci}}return r},checked:function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.checked==true){r[++ri]=ci}}return r},not:function(c,ss){return Ext.DomQuery.filter(c,ss,true)},any:function(c,selectors){var ss=selectors.split(\"|\"),r=[],ri=-1,s;for(var i=0,ci;ci=c[i];i++){for(var j=0;s=ss[j];j++){if(Ext.DomQuery.is(ci,s)){r[++ri]=ci;break}}}return r},odd:function(c){return this[\"nth-child\"](c,\"odd\")},even:function(c){return this[\"nth-child\"](c,\"even\")},nth:function(c,a){return c[a-1]||[]},first:function(c){return c[0]||[]},last:function(c){return c[c.length-1]||[]},has:function(c,ss){var s=Ext.DomQuery.select,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(s(ss,ci).length>0){r[++ri]=ci}}return r},next:function(c,ss){var is=Ext.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=next(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},prev:function(c,ss){var is=Ext.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=prev(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r}}}}();Ext.query=Ext.DomQuery.select;Ext.util.DelayedTask=function(d,c,a){var e=this,g,b=function(){clearInterval(g);g=null;d.apply(c,a||[])};e.delay=function(i,k,j,h){e.cancel();d=k||d;c=j||c;a=h||a;g=setInterval(b,i)};e.cancel=function(){if(g){clearInterval(g);g=null}}};(function(){var h=document;Ext.Element=function(l,m){var n=typeof l==\"string\"?h.getElementById(l):l,o;if(!n){return null}o=n.id;if(!m&&o&&Ext.elCache[o]){return Ext.elCache[o].el}this.dom=n;this.id=o||Ext.id(n)};var d=Ext.DomHelper,e=Ext.Element,a=Ext.elCache;e.prototype={set:function(q,m){var n=this.dom,l,p,m=(m!==false)&&!!n.setAttribute;for(l in q){if(q.hasOwnProperty(l)){p=q[l];if(l==\"style\"){d.applyStyles(n,p)}else{if(l==\"cls\"){n.className=p}else{if(m){n.setAttribute(l,p)}else{n[l]=p}}}}}return this},defaultUnit:\"px\",is:function(l){return Ext.DomQuery.is(this.dom,l)},focus:function(o,n){var l=this,n=n||l.dom;try{if(Number(o)){l.focus.defer(o,null,[null,n])}else{n.focus()}}catch(m){}return l},blur:function(){try{this.dom.blur()}catch(l){}return this},getValue:function(l){var m=this.dom.value;return l?parseInt(m,10):m},addListener:function(l,o,n,m){Ext.EventManager.on(this.dom,l,o,n||this,m);return this},removeListener:function(l,n,m){Ext.EventManager.removeListener(this.dom,l,n,m||this);return this},removeAllListeners:function(){Ext.EventManager.removeAll(this.dom);return this},purgeAllListeners:function(){Ext.EventManager.purgeElement(this,true);return this},addUnits:function(l){if(l===\"\"||l==\"auto\"||l===undefined){l=l||\"\"}else{if(!isNaN(l)||!i.test(l)){l=l+(this.defaultUnit||\"px\")}}return l},load:function(m,n,l){Ext.Ajax.request(Ext.apply({params:n,url:m.url||m,callback:l,el:this.dom,indicatorText:m.indicatorText||\"\"},Ext.isObject(m)?m:{}));return this},isBorderBox:function(){return Ext.isBorderBox||Ext.isForcedBorderBox||g[(this.dom.tagName||\"\").toLowerCase()]},remove:function(){var l=this,m=l.dom;if(m){delete l.dom;Ext.removeNode(m)}},hover:function(m,l,o,n){var p=this;p.on(\"mouseenter\",m,o||p.dom,n);p.on(\"mouseleave\",l,o||p.dom,n);return p},contains:function(l){return !l?false:Ext.lib.Dom.isAncestor(this.dom,l.dom?l.dom:l)},getAttributeNS:function(m,l){return this.getAttribute(l,m)},getAttribute:(function(){var p=document.createElement(\"table\"),o=false,m=\"getAttribute\" in p,l=/undefined|unknown/;if(m){try{p.getAttribute(\"ext:qtip\")}catch(n){o=true}return function(q,s){var r=this.dom,t;if(r.getAttributeNS){t=r.getAttributeNS(s,q)||null}if(t==null){if(s){if(o&&r.tagName.toUpperCase()==\"TABLE\"){try{t=r.getAttribute(s+\":\"+q)}catch(u){t=\"\"}}else{t=r.getAttribute(s+\":\"+q)}}else{t=r.getAttribute(q)||r[q]}}return t||\"\"}}else{return function(q,s){var r=this.om,u,t;if(s){t=r[s+\":\"+q];u=l.test(typeof t)?undefined:t}else{u=r[q]}return u||\"\"}}p=null})(),update:function(l){if(this.dom){this.dom.innerHTML=l}return this}};var k=e.prototype;e.addMethods=function(l){Ext.apply(k,l)};k.on=k.addListener;k.un=k.removeListener;k.autoBoxAdjust=true;var i=/\\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,c;e.get=function(m){var l,p,o;if(!m){return null}if(typeof m==\"string\"){if(!(p=h.getElementById(m))){return null}if(a[m]&&a[m].el){l=a[m].el;l.dom=p}else{l=e.addToCache(new e(p))}return l}else{if(m.tagName){if(!(o=m.id)){o=Ext.id(m)}if(a[o]&&a[o].el){l=a[o].el;l.dom=m}else{l=e.addToCache(new e(m))}return l}else{if(m instanceof e){if(m!=c){if(Ext.isIE&&(m.id==undefined||m.id==\"\")){m.dom=m.dom}else{m.dom=h.getElementById(m.id)||m.dom}}return m}else{if(m.isComposite){return m}else{if(Ext.isArray(m)){return e.select(m)}else{if(m==h){if(!c){var n=function(){};n.prototype=e.prototype;c=new n();c.dom=h}return c}}}}}}return null};e.addToCache=function(l,m){m=m||l.id;a[m]={el:l,data:{},events:{}};return l};e.data=function(m,l,n){m=e.get(m);if(!m){return null}var o=a[m.id].data;if(arguments.length==2){return o[l]}else{return(o[l]=n)}};function j(){if(!Ext.enableGarbageCollector){clearInterval(e.collectorThreadId)}else{var l,n,q,p;for(l in a){p=a[l];if(p.skipGC){continue}n=p.el;q=n.dom;if(!q||!q.parentNode||(!q.offsetParent&&!h.getElementById(l))){if(Ext.enableListenerCollection){Ext.EventManager.removeAll(q)}delete a[l]}}if(Ext.isIE){var m={};for(l in a){m[l]=a[l]}a=Ext.elCache=m}}}e.collectorThreadId=setInterval(j,30000);var b=function(){};b.prototype=e.prototype;e.Flyweight=function(l){this.dom=l};e.Flyweight.prototype=new b();e.Flyweight.prototype.isFlyweight=true;e._flyweights={};e.fly=function(n,l){var m=null;l=l||\"_global\";if(n=Ext.getDom(n)){(e._flyweights[l]=e._flyweights[l]||new e.Flyweight()).dom=n;m=e._flyweights[l]}return m};Ext.get=e.get;Ext.fly=e.fly;var g=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko){g.button=1}})();Ext.Element.addMethods(function(){var d=\"parentNode\",b=\"nextSibling\",c=\"previousSibling\",e=Ext.DomQuery,a=Ext.get;return{findParent:function(m,l,h){var j=this.dom,g=document.body,k=0,i;if(Ext.isGecko&&Object.prototype.toString.call(j)==\"[object XULElement]\"){return null}l=l||50;if(isNaN(l)){i=Ext.getDom(l);l=Number.MAX_VALUE}while(j&&j.nodeType==1&&k<l&&j!=g&&j!=i){if(e.is(j,m)){return h?a(j):j}k++;j=j.parentNode}return null},findParentNode:function(j,i,g){var h=Ext.fly(this.dom.parentNode,\"_internal\");return h?h.findParent(j,i,g):null},up:function(h,g){return this.findParentNode(h,g,true)},select:function(g){return Ext.Element.select(g,this.dom)},query:function(g){return e.select(g,this.dom)},child:function(g,h){var i=e.selectNode(g,this.dom);return h?i:a(i)},down:function(g,h){var i=e.selectNode(\" > \"+g,this.dom);return h?i:a(i)},parent:function(g,h){return this.matchNode(d,d,g,h)},next:function(g,h){return this.matchNode(b,b,g,h)},prev:function(g,h){return this.matchNode(c,c,g,h)},first:function(g,h){return this.matchNode(b,\"firstChild\",g,h)},last:function(g,h){return this.matchNode(c,\"lastChild\",g,h)},matchNode:function(h,k,g,i){var j=this.dom[k];while(j){if(j.nodeType==1&&(!g||e.is(j,g))){return !i?a(j):j}j=j[h]}return null}}}());Ext.Element.addMethods(function(){var c=Ext.getDom,a=Ext.get,b=Ext.DomHelper;return{appendChild:function(d){return a(d).appendTo(this)},appendTo:function(d){c(d).appendChild(this.dom);return this},insertBefore:function(d){(d=c(d)).parentNode.insertBefore(this.dom,d);return this},insertAfter:function(d){(d=c(d)).parentNode.insertBefore(this.dom,d.nextSibling);return this},insertFirst:function(e,d){e=e||{};if(e.nodeType||e.dom||typeof e==\"string\"){e=c(e);this.dom.insertBefore(e,this.dom.firstChild);return !d?a(e):e}else{return this.createChild(e,this.dom.firstChild,d)}},replace:function(d){d=a(d);this.insertBefore(d);d.remove();return this},replaceWith:function(d){var e=this;if(d.nodeType||d.dom||typeof d==\"string\"){d=c(d);e.dom.parentNode.insertBefore(d,e.dom)}else{d=b.insertBefore(e.dom,d)}delete Ext.elCache[e.id];Ext.removeNode(e.dom);e.id=Ext.id(e.dom=d);Ext.Element.addToCache(e.isFlyweight?new Ext.Element(e.dom):e);return e},createChild:function(e,d,g){e=e||{tag:\"div\"};return d?b.insertBefore(d,e,g!==true):b[!this.dom.firstChild?\"overwrite\":\"append\"](this.dom,e,g!==true)},wrap:function(d,e){var g=b.insertBefore(this.dom,d||{tag:\"div\"},!e);g.dom?g.dom.appendChild(this.dom):g.appendChild(this.dom);return g},insertHtml:function(e,g,d){var h=b.insertHtml(e,this.dom,g);return d?Ext.get(h):h}}}());Ext.Element.addMethods(function(){var A=Ext.supports,h={},x=/(-[a-z])/gi,s=document.defaultView,D=/alpha\\(opacity=(.*)\\)/i,l=/^\\s+|\\s+$/g,B=Ext.Element,u=/\\s+/,b=/\\w/g,d=\"padding\",c=\"margin\",y=\"border\",t=\"-left\",q=\"-right\",w=\"-top\",o=\"-bottom\",j=\"-width\",r=Math,z=\"hidden\",e=\"isClipped\",k=\"overflow\",n=\"overflow-x\",m=\"overflow-y\",C=\"originalClip\",i={l:y+t+j,r:y+q+j,t:y+w+j,b:y+o+j},g={l:d+t,r:d+q,t:d+w,b:d+o},a={l:c+t,r:c+q,t:c+w,b:c+o},E=Ext.Element.data;function p(F,G){return G.charAt(1).toUpperCase()}function v(F){return h[F]||(h[F]=F==\"float\"?(A.cssFloat?\"cssFloat\":\"styleFloat\"):F.replace(x,p))}return{adjustWidth:function(F){var G=this;var H=(typeof F==\"number\");if(H&&G.autoBoxAdjust&&!G.isBorderBox()){F-=(G.getBorderWidth(\"lr\")+G.getPadding(\"lr\"))}return(H&&F<0)?0:F},adjustHeight:function(F){var G=this;var H=(typeof F==\"number\");if(H&&G.autoBoxAdjust&&!G.isBorderBox()){F-=(G.getBorderWidth(\"tb\")+G.getPadding(\"tb\"))}return(H&&F<0)?0:F},addClass:function(J){var K=this,I,F,H,G=[];if(!Ext.isArray(J)){if(typeof J==\"string\"&&!this.hasClass(J)){K.dom.className+=\" \"+J}}else{for(I=0,F=J.length;I<F;I++){H=J[I];if(typeof H==\"string\"&&(\" \"+K.dom.className+\" \").indexOf(\" \"+H+\" \")==-1){G.push(H)}}if(G.length){K.dom.className+=\" \"+G.join(\" \")}}return K},removeClass:function(K){var L=this,J,G,F,I,H;if(!Ext.isArray(K)){K=[K]}if(L.dom&&L.dom.className){H=L.dom.className.replace(l,\"\").split(u);for(J=0,F=K.length;J<F;J++){I=K[J];if(typeof I==\"string\"){I=I.replace(l,\"\");G=H.indexOf(I);if(G!=-1){H.splice(G,1)}}}L.dom.className=H.join(\" \")}return L},radioClass:function(I){var J=this.dom.parentNode.childNodes,G,H,F;I=Ext.isArray(I)?I:[I];for(H=0,F=J.length;H<F;H++){G=J[H];if(G&&G.nodeType==1){Ext.fly(G,\"_internal\").removeClass(I)}}return this.addClass(I)},toggleClass:function(F){return this.hasClass(F)?this.removeClass(F):this.addClass(F)},hasClass:function(F){return F&&(\" \"+this.dom.className+\" \").indexOf(\" \"+F+\" \")!=-1},replaceClass:function(G,F){return this.removeClass(G).addClass(F)},isStyle:function(F,G){return this.getStyle(F)==G},getStyle:function(){return s&&s.getComputedStyle?function(K){var I=this.dom,F,H,G,J;if(I==document){return null}K=v(K);G=(F=I.style[K])?F:(H=s.getComputedStyle(I,\"\"))?H[K]:null;if(K==\"marginRight\"&&G!=\"0px\"&&!A.correctRightMargin){J=I.style.display;I.style.display=\"inline-block\";G=s.getComputedStyle(I,\"\").marginRight;I.style.display=J}if(K==\"backgroundColor\"&&G==\"rgba(0, 0, 0, 0)\"&&!A.correctTransparentColor){G=\"transparent\"}return G}:function(J){var H=this.dom,F,G;if(H==document){return null}if(J==\"opacity\"){if(H.style.filter.match){if(F=H.style.filter.match(D)){var I=parseFloat(F[1]);if(!isNaN(I)){return I?I/100:0}}}return 1}J=v(J);return H.style[J]||((G=H.currentStyle)?G[J]:null)}}(),getColor:function(F,G,K){var I=this.getStyle(F),H=(typeof K!=\"undefined\")?K:\"#\",J;if(!I||(/transparent|inherit/.test(I))){return G}if(/^r/.test(I)){Ext.each(I.slice(4,I.length-1).split(\",\"),function(L){J=parseInt(L,10);H+=(J<16?\"0\":\"\")+J.toString(16)})}else{I=I.replace(\"#\",\"\");H+=I.length==3?I.replace(/^(\\w)(\\w)(\\w)$/,\"$1$1$2$2$3$3\"):I}return(H.length>5?H.toLowerCase():G)},setStyle:function(I,H){var F,G;if(typeof I!=\"object\"){F={};F[I]=H;I=F}for(G in I){H=I[G];G==\"opacity\"?this.setOpacity(H):this.dom.style[v(G)]=H}return this},setOpacity:function(G,F){var J=this,H=J.dom.style;if(!F||!J.anim){if(Ext.isIE){var I=G<1?\"alpha(opacity=\"+G*100+\")\":\"\",K=H.filter.replace(D,\"\").replace(l,\"\");H.zoom=1;H.filter=K+(K.length>0?\" \":\"\")+I}else{H.opacity=G}}else{J.anim({opacity:{to:G}},J.preanim(arguments,1),null,0.35,\"easeIn\")}return J},clearOpacity:function(){var F=this.dom.style;if(Ext.isIE){if(!Ext.isEmpty(F.filter)){F.filter=F.filter.replace(D,\"\").replace(l,\"\")}}else{F.opacity=F[\"-moz-opacity\"]=F[\"-khtml-opacity\"]=\"\"}return this},getHeight:function(H){var G=this,J=G.dom,I=Ext.isIE&&G.isStyle(\"display\",\"none\"),F=r.max(J.offsetHeight,I?0:J.clientHeight)||0;F=!H?F:F-G.getBorderWidth(\"tb\")-G.getPadding(\"tb\");return F<0?0:F},getWidth:function(G){var H=this,J=H.dom,I=Ext.isIE&&H.isStyle(\"display\",\"none\"),F=r.max(J.offsetWidth,I?0:J.clientWidth)||0;F=!G?F:F-H.getBorderWidth(\"lr\")-H.getPadding(\"lr\");return F<0?0:F},setWidth:function(G,F){var H=this;G=H.adjustWidth(G);!F||!H.anim?H.dom.style.width=H.addUnits(G):H.anim({width:{to:G}},H.preanim(arguments,1));return H},setHeight:function(F,G){var H=this;F=H.adjustHeight(F);!G||!H.anim?H.dom.style.height=H.addUnits(F):H.anim({height:{to:F}},H.preanim(arguments,1));return H},getBorderWidth:function(F){return this.addStyles(F,i)},getPadding:function(F){return this.addStyles(F,g)},clip:function(){var F=this,G=F.dom;if(!E(G,e)){E(G,e,true);E(G,C,{o:F.getStyle(k),x:F.getStyle(n),y:F.getStyle(m)});F.setStyle(k,z);F.setStyle(n,z);F.setStyle(m,z)}return F},unclip:function(){var F=this,H=F.dom;if(E(H,e)){E(H,e,false);var G=E(H,C);if(G.o){F.setStyle(k,G.o)}if(G.x){F.setStyle(n,G.x)}if(G.y){F.setStyle(m,G.y)}}return F},addStyles:function(M,L){var J=0,K=M.match(b),I,H,G,F=K.length;for(G=0;G<F;G++){I=K[G];H=I&&parseInt(this.getStyle(L[I]),10);if(H){J+=r.abs(H)}}return J},margins:a}}());(function(){var a=Ext.lib.Dom,b=\"left\",g=\"right\",d=\"top\",i=\"bottom\",h=\"position\",c=\"static\",e=\"relative\",j=\"auto\",k=\"z-index\";Ext.Element.addMethods({getX:function(){return a.getX(this.dom)},getY:function(){return a.getY(this.dom)},getXY:function(){return a.getXY(this.dom)},getOffsetsTo:function(l){var n=this.getXY(),m=Ext.fly(l,\"_internal\").getXY();return[n[0]-m[0],n[1]-m[1]]},setX:function(l,m){return this.setXY([l,this.getY()],this.animTest(arguments,m,1))},setY:function(m,l){return this.setXY([this.getX(),m],this.animTest(arguments,l,1))},setLeft:function(l){this.setStyle(b,this.addUnits(l));return this},setTop:function(l){this.setStyle(d,this.addUnits(l));return this},setRight:function(l){this.setStyle(g,this.addUnits(l));return this},setBottom:function(l){this.setStyle(i,this.addUnits(l));return this},setXY:function(n,l){var m=this;if(!l||!m.anim){a.setXY(m.dom,n)}else{m.anim({points:{to:n}},m.preanim(arguments,1),\"motion\")}return m},setLocation:function(l,n,m){return this.setXY([l,n],this.animTest(arguments,m,2))},moveTo:function(l,n,m){return this.setXY([l,n],this.animTest(arguments,m,2))},getLeft:function(l){return !l?this.getX():parseInt(this.getStyle(b),10)||0},getRight:function(l){var m=this;return !l?m.getX()+m.getWidth():(m.getLeft(true)+m.getWidth())||0},getTop:function(l){return !l?this.getY():parseInt(this.getStyle(d),10)||0},getBottom:function(l){var m=this;return !l?m.getY()+m.getHeight():(m.getTop(true)+m.getHeight())||0},position:function(p,o,l,n){var m=this;if(!p&&m.isStyle(h,c)){m.setStyle(h,e)}else{if(p){m.setStyle(h,p)}}if(o){m.setStyle(k,o)}if(l||n){m.setXY([l||false,n||false])}},clearPositioning:function(l){l=l||\"\";this.setStyle({left:l,right:l,top:l,bottom:l,\"z-index\":\"\",position:c});return this},getPositioning:function(){var m=this.getStyle(b);var n=this.getStyle(d);return{position:this.getStyle(h),left:m,right:m?\"\":this.getStyle(g),top:n,bottom:n?\"\":this.getStyle(i),\"z-index\":this.getStyle(k)}},setPositioning:function(l){var n=this,m=n.dom.style;n.setStyle(l);if(l.right==j){m.right=\"\"}if(l.bottom==j){m.bottom=\"\"}return n},translatePoints:function(m,u){u=isNaN(m[1])?u:m[1];m=isNaN(m[0])?m:m[0];var q=this,r=q.isStyle(h,e),s=q.getXY(),n=parseInt(q.getStyle(b),10),p=parseInt(q.getStyle(d),10);n=!isNaN(n)?n:(r?0:q.dom.offsetLeft);p=!isNaN(p)?p:(r?0:q.dom.offsetTop);return{left:(m-s[0]+n),top:(u-s[1]+p)}},animTest:function(m,l,n){return !!l&&this.preanim?this.preanim(m,n):false}})})();Ext.Element.addMethods({isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},scrollTo:function(a,b){this.dom[\"scroll\"+(/top/i.test(a)?\"Top\":\"Left\")]=b;return this},getScroll:function(){var i=this.dom,h=document,a=h.body,c=h.documentElement,b,g,e;if(i==h||i==a){if(Ext.isIE&&Ext.isStrict){b=c.scrollLeft;g=c.scrollTop}else{b=window.pageXOffset;g=window.pageYOffset}e={left:b||(a?a.scrollLeft:0),top:g||(a?a.scrollTop:0)}}else{e={left:i.scrollLeft,top:i.scrollTop}}return e}});Ext.Element.VISIBILITY=1;Ext.Element.DISPLAY=2;Ext.Element.OFFSETS=3;Ext.Element.ASCLASS=4;Ext.Element.visibilityCls=\"x-hide-nosize\";Ext.Element.addMethods(function(){var e=Ext.Element,p=\"opacity\",j=\"visibility\",g=\"display\",d=\"hidden\",n=\"offsets\",k=\"asclass\",m=\"none\",a=\"nosize\",b=\"originalDisplay\",c=\"visibilityMode\",h=\"isVisible\",i=e.data,l=function(r){var q=i(r,b);if(q===undefined){i(r,b,q=\"\")}return q},o=function(r){var q=i(r,c);if(q===undefined){i(r,c,q=1)}return q};return{originalDisplay:\"\",visibilityMode:1,setVisibilityMode:function(q){i(this.dom,c,q);return this},animate:function(r,t,s,u,q){this.anim(r,{duration:t,callback:s,easing:u},q);return this},anim:function(t,u,r,w,s,q){r=r||\"run\";u=u||{};var v=this,x=Ext.lib.Anim[r](v.dom,t,(u.duration||w)||0.35,(u.easing||s)||\"easeOut\",function(){if(q){q.call(v)}if(u.callback){u.callback.call(u.scope||v,v,u)}},v);u.anim=x;return x},preanim:function(q,r){return !q[r]?false:(typeof q[r]==\"object\"?q[r]:{duration:q[r+1],callback:q[r+2],easing:q[r+3]})},isVisible:function(){var q=this,s=q.dom,r=i(s,h);if(typeof r==\"boolean\"){return r}r=!q.isStyle(j,d)&&!q.isStyle(g,m)&&!((o(s)==e.ASCLASS)&&q.hasClass(q.visibilityCls||e.visibilityCls));i(s,h,r);return r},setVisible:function(t,q){var w=this,r,y,x,v,u=w.dom,s=o(u);if(typeof q==\"string\"){switch(q){case g:s=e.DISPLAY;break;case j:s=e.VISIBILITY;break;case n:s=e.OFFSETS;break;case a:case k:s=e.ASCLASS;break}w.setVisibilityMode(s);q=false}if(!q||!w.anim){if(s==e.ASCLASS){w[t?\"removeClass\":\"addClass\"](w.visibilityCls||e.visibilityCls)}else{if(s==e.DISPLAY){return w.setDisplayed(t)}else{if(s==e.OFFSETS){if(!t){w.hideModeStyles={position:w.getStyle(\"position\"),top:w.getStyle(\"top\"),left:w.getStyle(\"left\")};w.applyStyles({position:\"absolute\",top:\"-10000px\",left:\"-10000px\"})}else{w.applyStyles(w.hideModeStyles||{position:\"\",top:\"\",left:\"\"});delete w.hideModeStyles}}else{w.fixDisplay();u.style.visibility=t?\"visible\":d}}}}else{if(t){w.setOpacity(0.01);w.setVisible(true)}w.anim({opacity:{to:(t?1:0)}},w.preanim(arguments,1),null,0.35,\"easeIn\",function(){t||w.setVisible(false).setOpacity(1)})}i(u,h,t);return w},hasMetrics:function(){var q=this.dom;return this.isVisible()||(o(q)==e.VISIBILITY)},toggle:function(q){var r=this;r.setVisible(!r.isVisible(),r.preanim(arguments,0));return r},setDisplayed:function(q){if(typeof q==\"boolean\"){q=q?l(this.dom):m}this.setStyle(g,q);return this},fixDisplay:function(){var q=this;if(q.isStyle(g,m)){q.setStyle(j,d);q.setStyle(g,l(this.dom));if(q.isStyle(g,m)){q.setStyle(g,\"block\")}}},hide:function(q){if(typeof q==\"string\"){this.setVisible(false,q);return this}this.setVisible(false,this.preanim(arguments,0));return this},show:function(q){if(typeof q==\"string\"){this.setVisible(true,q);return this}this.setVisible(true,this.preanim(arguments,0));return this}}}());(function(){var y=null,A=undefined,k=true,t=false,j=\"setX\",h=\"setY\",a=\"setXY\",n=\"left\",l=\"bottom\",s=\"top\",m=\"right\",q=\"height\",g=\"width\",i=\"points\",w=\"hidden\",z=\"absolute\",u=\"visible\",e=\"motion\",o=\"position\",r=\"easeOut\",d=new Ext.Element.Flyweight(),v={},x=function(B){return B||{}},p=function(B){d.dom=B;d.id=Ext.id(B);return d},c=function(B){if(!v[B]){v[B]=[]}return v[B]},b=function(C,B){v[C]=B};Ext.enableFx=k;Ext.Fx={switchStatements:function(C,D,B){return D.apply(this,B[C])},slideIn:function(H,E){E=x(E);var J=this,G=J.dom,M=G.style,O,B,L,D,C,M,I,N,K,F;H=H||\"t\";J.queueFx(E,function(){O=p(G).getXY();p(G).fixDisplay();B=p(G).getFxRestore();L={x:O[0],y:O[1],0:O[0],1:O[1],width:G.offsetWidth,height:G.offsetHeight};L.right=L.x+L.width;L.bottom=L.y+L.height;p(G).setWidth(L.width).setHeight(L.height);D=p(G).fxWrap(B.pos,E,w);M.visibility=u;M.position=z;function P(){p(G).fxUnwrap(D,B.pos,E);M.width=B.width;M.height=B.height;p(G).afterFx(E)}N={to:[L.x,L.y]};K={to:L.width};F={to:L.height};function Q(U,R,V,S,X,Z,ac,ab,aa,W,T){var Y={};p(U).setWidth(V).setHeight(S);if(p(U)[X]){p(U)[X](Z)}R[ac]=R[ab]=\"0\";if(aa){Y.width=aa}if(W){Y.height=W}if(T){Y.points=T}return Y}I=p(G).switchStatements(H.toLowerCase(),Q,{t:[D,M,L.width,0,y,y,n,l,y,F,y],l:[D,M,0,L.height,y,y,m,s,K,y,y],r:[D,M,L.width,L.height,j,L.right,n,s,y,y,N],b:[D,M,L.width,L.height,h,L.bottom,n,s,y,F,N],tl:[D,M,0,0,y,y,m,l,K,F,N],bl:[D,M,0,0,h,L.y+L.height,m,s,K,F,N],br:[D,M,0,0,a,[L.right,L.bottom],n,s,K,F,N],tr:[D,M,0,0,j,L.x+L.width,n,l,K,F,N]});M.visibility=u;p(D).show();arguments.callee.anim=p(D).fxanim(I,E,e,0.5,r,P)});return J},slideOut:function(F,D){D=x(D);var H=this,E=H.dom,K=E.style,L=H.getXY(),C,B,I,J,G={to:0};F=F||\"t\";H.queueFx(D,function(){B=p(E).getFxRestore();I={x:L[0],y:L[1],0:L[0],1:L[1],width:E.offsetWidth,height:E.offsetHeight};I.right=I.x+I.width;I.bottom=I.y+I.height;p(E).setWidth(I.width).setHeight(I.height);C=p(E).fxWrap(B.pos,D,u);K.visibility=u;K.position=z;p(C).setWidth(I.width).setHeight(I.height);function M(){D.useDisplay?p(E).setDisplayed(t):p(E).hide();p(E).fxUnwrap(C,B.pos,D);K.width=B.width;K.height=B.height;p(E).afterFx(D)}function N(O,W,U,X,S,V,R,T,Q){var P={};O[W]=O[U]=\"0\";P[X]=S;if(V){P[V]=R}if(T){P[T]=Q}return P}J=p(E).switchStatements(F.toLowerCase(),N,{t:[K,n,l,q,G],l:[K,m,s,g,G],r:[K,n,s,g,G,i,{to:[I.right,I.y]}],b:[K,n,s,q,G,i,{to:[I.x,I.bottom]}],tl:[K,m,l,g,G,q,G],bl:[K,m,s,g,G,q,G,i,{to:[I.x,I.bottom]}],br:[K,n,s,g,G,q,G,i,{to:[I.x+I.width,I.bottom]}],tr:[K,n,l,g,G,q,G,i,{to:[I.right,I.y]}]});arguments.callee.anim=p(C).fxanim(J,D,e,0.5,r,M)});return H},puff:function(H){H=x(H);var F=this,G=F.dom,C=G.style,D,B,E;F.queueFx(H,function(){D=p(G).getWidth();B=p(G).getHeight();p(G).clearOpacity();p(G).show();E=p(G).getFxRestore();function I(){H.useDisplay?p(G).setDisplayed(t):p(G).hide();p(G).clearOpacity();p(G).setPositioning(E.pos);C.width=E.width;C.height=E.height;C.fontSize=\"\";p(G).afterFx(H)}arguments.callee.anim=p(G).fxanim({width:{to:p(G).adjustWidth(D*2)},height:{to:p(G).adjustHeight(B*2)},points:{by:[-D*0.5,-B*0.5]},opacity:{to:0},fontSize:{to:200,unit:\"%\"}},H,e,0.5,r,I)});return F},switchOff:function(F){F=x(F);var D=this,E=D.dom,B=E.style,C;D.queueFx(F,function(){p(E).clearOpacity();p(E).clip();C=p(E).getFxRestore();function G(){F.useDisplay?p(E).setDisplayed(t):p(E).hide();p(E).clearOpacity();p(E).setPositioning(C.pos);B.width=C.width;B.height=C.height;p(E).afterFx(F)}p(E).fxanim({opacity:{to:0.3}},y,y,0.1,y,function(){p(E).clearOpacity();(function(){p(E).fxanim({height:{to:1},points:{by:[0,p(E).getHeight()*0.5]}},F,e,0.3,\"easeIn\",G)}).defer(100)})});return D},highlight:function(D,H){H=x(H);var F=this,G=F.dom,B=H.attr||\"backgroundColor\",C={},E;F.queueFx(H,function(){p(G).clearOpacity();p(G).show();function I(){G.style[B]=E;p(G).afterFx(H)}E=G.style[B];C[B]={from:D||\"ffff9c\",to:H.endColor||p(G).getColor(B)||\"ffffff\"};arguments.callee.anim=p(G).fxanim(C,H,\"color\",1,\"easeIn\",I)});return F},frame:function(B,E,H){H=x(H);var D=this,G=D.dom,C,F;D.queueFx(H,function(){B=B||\"#C3DAF9\";if(B.length==6){B=\"#\"+B}E=E||1;p(G).show();var L=p(G).getXY(),J={x:L[0],y:L[1],0:L[0],1:L[1],width:G.offsetWidth,height:G.offsetHeight},I=function(){C=p(document.body||document.documentElement).createChild({style:{position:z,\"z-index\":35000,border:\"0px solid \"+B}});return C.queueFx({},K)};arguments.callee.anim={isAnimated:true,stop:function(){E=0;C.stopFx()}};function K(){var M=Ext.isBorderBox?2:1;F=C.anim({top:{from:J.y,to:J.y-20},left:{from:J.x,to:J.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:J.height,to:J.height+20*M},width:{from:J.width,to:J.width+20*M}},{duration:H.duration||1,callback:function(){C.remove();--E>0?I():p(G).afterFx(H)}});arguments.callee.anim={isAnimated:true,stop:function(){F.stop()}}}I()});return D},pause:function(D){var C=this.dom,B;this.queueFx({},function(){B=setTimeout(function(){p(C).afterFx({})},D*1000);arguments.callee.anim={isAnimated:true,stop:function(){clearTimeout(B);p(C).afterFx({})}}});return this},fadeIn:function(D){D=x(D);var B=this,C=B.dom,E=D.endOpacity||1;B.queueFx(D,function(){p(C).setOpacity(0);p(C).fixDisplay();C.style.visibility=u;arguments.callee.anim=p(C).fxanim({opacity:{to:E}},D,y,0.5,r,function(){if(E==1){p(C).clearOpacity()}p(C).afterFx(D)})});return B},fadeOut:function(E){E=x(E);var C=this,D=C.dom,B=D.style,F=E.endOpacity||0;C.queueFx(E,function(){arguments.callee.anim=p(D).fxanim({opacity:{to:F}},E,y,0.5,r,function(){if(F==0){Ext.Element.data(D,\"visibilityMode\")==Ext.Element.DISPLAY||E.useDisplay?B.display=\"none\":B.visibility=w;p(D).clearOpacity()}p(D).afterFx(E)})});return C},scale:function(B,C,D){this.shift(Ext.apply({},D,{width:B,height:C}));return this},shift:function(D){D=x(D);var C=this.dom,B={};this.queueFx(D,function(){for(var E in D){if(D[E]!=A){B[E]={to:D[E]}}}B.width?B.width.to=p(C).adjustWidth(D.width):B;B.height?B.height.to=p(C).adjustWidth(D.height):B;if(B.x||B.y||B.xy){B.points=B.xy||{to:[B.x?B.x.to:p(C).getX(),B.y?B.y.to:p(C).getY()]}}arguments.callee.anim=p(C).fxanim(B,D,e,0.35,r,function(){p(C).afterFx(D)})});return this},ghost:function(E,C){C=x(C);var G=this,D=G.dom,J=D.style,H={opacity:{to:0},points:{}},K=H.points,B,I,F;E=E||\"b\";G.queueFx(C,function(){B=p(D).getFxRestore();I=p(D).getWidth();F=p(D).getHeight();function L(){C.useDisplay?p(D).setDisplayed(t):p(D).hide();p(D).clearOpacity();p(D).setPositioning(B.pos);J.width=B.width;J.height=B.height;p(D).afterFx(C)}K.by=p(D).switchStatements(E.toLowerCase(),function(N,M){return[N,M]},{t:[0,-F],l:[-I,0],r:[I,0],b:[0,F],tl:[-I,-F],bl:[-I,F],br:[I,F],tr:[I,-F]});arguments.callee.anim=p(D).fxanim(H,C,e,0.5,r,L)});return G},syncFx:function(){var B=this;B.fxDefaults=Ext.apply(B.fxDefaults||{},{block:t,concurrent:k,stopFx:t});return B},sequenceFx:function(){var B=this;B.fxDefaults=Ext.apply(B.fxDefaults||{},{block:t,concurrent:t,stopFx:t});return B},nextFx:function(){var B=c(this.dom.id)[0];if(B){B.call(this)}},hasActiveFx:function(){return c(this.dom.id)[0]},stopFx:function(B){var C=this,E=C.dom.id;if(C.hasActiveFx()){var D=c(E)[0];if(D&&D.anim){if(D.anim.isAnimated){b(E,[D]);D.anim.stop(B!==undefined?B:k)}else{b(E,[])}}}return C},beforeFx:function(B){if(this.hasActiveFx()&&!B.concurrent){if(B.stopFx){this.stopFx();return k}return t}return k},hasFxBlock:function(){var B=c(this.dom.id);return B&&B[0]&&B[0].block},queueFx:function(E,B){var C=p(this.dom);if(!C.hasFxBlock()){Ext.applyIf(E,C.fxDefaults);if(!E.concurrent){var D=C.beforeFx(E);B.block=E.block;c(C.dom.id).push(B);if(D){C.nextFx()}}else{B.call(C)}}return C},fxWrap:function(H,F,D){var E=this.dom,C,B;if(!F.wrap||!(C=Ext.getDom(F.wrap))){if(F.fixPosition){B=p(E).getXY()}var G=document.createElement(\"div\");G.style.visibility=D;C=E.parentNode.insertBefore(G,E);p(C).setPositioning(H);if(p(C).isStyle(o,\"static\")){p(C).position(\"relative\")}p(E).clearPositioning(\"auto\");p(C).clip();C.appendChild(E);if(B){p(C).setXY(B)}}return C},fxUnwrap:function(C,F,E){var D=this.dom;p(D).clearPositioning();p(D).setPositioning(F);if(!E.wrap){var B=p(C).dom.parentNode;B.insertBefore(D,C);p(C).remove()}},getFxRestore:function(){var B=this.dom.style;return{pos:this.getPositioning(),width:B.width,height:B.height}},afterFx:function(C){var B=this.dom,D=B.id;if(C.afterStyle){p(B).setStyle(C.afterStyle)}if(C.afterCls){p(B).addClass(C.afterCls)}if(C.remove==k){p(B).remove()}if(C.callback){C.callback.call(C.scope,p(B))}if(!C.concurrent){c(D).shift();p(B).nextFx()}},fxanim:function(E,F,C,G,D,B){C=C||\"run\";F=F||{};var H=Ext.lib.Anim[C](this.dom,E,(F.duration||G)||0.35,(F.easing||D)||r,B,this);F.anim=H;return H}};Ext.Fx.resize=Ext.Fx.scale;Ext.Element.addMethods(Ext.Fx)})();Ext.CompositeElementLite=function(b,a){this.elements=[];this.add(b,a);this.el=new Ext.Element.Flyweight()};Ext.CompositeElementLite.prototype={isComposite:true,getElement:function(a){var b=this.el;b.dom=a;b.id=a.id;return b},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(d,b){var e=this,g=e.elements;if(!d){return this}if(typeof d==\"string\"){d=Ext.Element.selectorFunction(d,b)}else{if(d.isComposite){d=d.elements}else{if(!Ext.isIterable(d)){d=[d]}}}for(var c=0,a=d.length;c<a;++c){g.push(e.transformElement(d[c]))}return e},invoke:function(g,b){var h=this,d=h.elements,a=d.length,j,c;for(c=0;c<a;c++){j=d[c];if(j){Ext.Element.prototype[g].apply(h.getElement(j),b)}}return h},item:function(b){var d=this,c=d.elements[b],a=null;if(c){a=d.getElement(c)}return a},addListener:function(b,j,h,g){var d=this.elements,a=d.length,c,k;for(c=0;c<a;c++){k=d[c];if(k){Ext.EventManager.on(k,b,j,h||k,g)}}return this},each:function(g,d){var h=this,c=h.elements,a=c.length,b,j;for(b=0;b<a;b++){j=c[b];if(j){j=this.getElement(j);if(g.call(d||j,j,h,b)===false){break}}}return h},fill:function(a){var b=this;b.elements=[];b.add(a);return b},filter:function(a){var b=[],d=this,c=Ext.isFunction(a)?a:function(e){return e.is(a)};d.each(function(h,e,g){if(c(h,g)!==false){b[b.length]=d.transformElement(h)}});d.elements=b;return d},indexOf:function(a){return this.elements.indexOf(this.transformElement(a))},replaceElement:function(e,c,a){var b=!isNaN(e)?e:this.indexOf(e),g;if(b>-1){c=Ext.getDom(c);if(a){g=this.elements[b];g.parentNode.insertBefore(c,g);Ext.removeNode(g)}this.elements.splice(b,1,c)}return this},clear:function(){this.elements=[]}};Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;Ext.CompositeElementLite.importElementMethods=function(){var c,b=Ext.Element.prototype,a=Ext.CompositeElementLite.prototype;for(c in b){if(typeof b[c]==\"function\"){(function(d){a[d]=a[d]||function(){return this.invoke(d,arguments)}}).call(a,c)}}};Ext.CompositeElementLite.importElementMethods();if(Ext.DomQuery){Ext.Element.selectorFunction=Ext.DomQuery.select}Ext.Element.select=function(a,b){var c;if(typeof a==\"string\"){c=Ext.Element.selectorFunction(a,b)}else{if(a.length!==undefined){c=a}else{throw\"Invalid selector\"}}return new Ext.CompositeElementLite(c)};Ext.select=Ext.Element.select;(function(){var b=\"beforerequest\",e=\"requestcomplete\",d=\"requestexception\",h=undefined,c=\"load\",i=\"POST\",a=\"GET\",g=window;Ext.data.Connection=function(j){Ext.apply(this,j);this.addEvents(b,e,d);Ext.data.Connection.superclass.constructor.call(this)};Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:30000,autoAbort:false,disableCaching:true,disableCachingParam:\"_dc\",request:function(n){var s=this;if(s.fireEvent(b,s,n)){if(n.el){if(!Ext.isEmpty(n.indicatorText)){s.indicatorText='<div class=\"loading-indicator\">'+n.indicatorText+\"</div>\"}if(s.indicatorText){Ext.getDom(n.el).innerHTML=s.indicatorText}n.success=(Ext.isFunction(n.success)?n.success:function(){}).createInterceptor(function(o){Ext.getDom(n.el).innerHTML=o.responseText})}var l=n.params,k=n.url||s.url,j,q={success:s.handleResponse,failure:s.handleFailure,scope:s,argument:{options:n},timeout:Ext.num(n.timeout,s.timeout)},m,t;if(Ext.isFunction(l)){l=l.call(n.scope||g,n)}l=Ext.urlEncode(s.extraParams,Ext.isObject(l)?Ext.urlEncode(l):l);if(Ext.isFunction(k)){k=k.call(n.scope||g,n)}if((m=Ext.getDom(n.form))){k=k||m.action;if(n.isUpload||(/multipart\\/form-data/i.test(m.getAttribute(\"enctype\")))){return s.doFormUpload.call(s,n,l,k)}t=Ext.lib.Ajax.serializeForm(m);l=l?(l+\"&\"+t):t}j=n.method||s.method||((l||n.xmlData||n.jsonData)?i:a);if(j===a&&(s.disableCaching&&n.disableCaching!==false)||n.disableCaching===true){var r=n.disableCachingParam||s.disableCachingParam;k=Ext.urlAppend(k,r+\"=\"+(new Date().getTime()))}n.headers=Ext.applyIf(n.headers||{},s.defaultHeaders||{});if(n.autoAbort===true||s.autoAbort){s.abort()}if((j==a||n.xmlData||n.jsonData)&&l){k=Ext.urlAppend(k,l);l=\"\"}return(s.transId=Ext.lib.Ajax.request(j,k,q,l,n))}else{return n.callback?n.callback.apply(n.scope,[n,h,h]):null}},isLoading:function(j){return j?Ext.lib.Ajax.isCallInProgress(j):!!this.transId},abort:function(j){if(j||this.isLoading()){Ext.lib.Ajax.abort(j||this.transId)}},handleResponse:function(j){this.transId=false;var k=j.argument.options;j.argument=k?k.argument:null;this.fireEvent(e,this,j,k);if(k.success){k.success.call(k.scope,j,k)}if(k.callback){k.callback.call(k.scope,k,true,j)}},handleFailure:function(j,l){this.transId=false;var k=j.argument.options;j.argument=k?k.argument:null;this.fireEvent(d,this,j,k,l);if(k.failure){k.failure.call(k.scope,j,k)}if(k.callback){k.callback.call(k.scope,k,false,j)}},doFormUpload:function(q,j,k){var l=Ext.id(),v=document,r=v.createElement(\"iframe\"),m=Ext.getDom(q.form),u=[],t,p=\"multipart/form-data\",n={target:m.target,method:m.method,encoding:m.encoding,enctype:m.enctype,action:m.action};Ext.fly(r).set({id:l,name:l,cls:\"x-hidden\",src:Ext.SSL_SECURE_URL});v.body.appendChild(r);if(Ext.isIE){document.frames[l].name=l}Ext.fly(m).set({target:l,method:i,enctype:p,encoding:p,action:k||n.action});Ext.iterate(Ext.urlDecode(j,false),function(w,o){t=v.createElement(\"input\");Ext.fly(t).set({type:\"hidden\",value:o,name:w});m.appendChild(t);u.push(t)});function s(){var x=this,w={responseText:\"\",responseXML:null,argument:q.argument},A,z;try{A=r.contentWindow.document||r.contentDocument||g.frames[l].document;if(A){if(A.body){if(/textarea/i.test((z=A.body.firstChild||{}).tagName)){w.responseText=z.value}else{w.responseText=A.body.innerHTML}}w.responseXML=A.XMLDocument||A}}catch(y){}Ext.EventManager.removeListener(r,c,s,x);x.fireEvent(e,x,w,q);function o(D,C,B){if(Ext.isFunction(D)){D.apply(C,B)}}o(q.success,q.scope,[w,q]);o(q.callback,q.scope,[q,true,w]);if(!x.debugUploads){setTimeout(function(){Ext.removeNode(r)},100)}}Ext.EventManager.on(r,c,s,this);m.submit();Ext.fly(m).set(n);Ext.each(u,function(o){Ext.removeNode(o)})}})})();Ext.Ajax=new Ext.data.Connection({autoAbort:false,serializeForm:function(a){return Ext.lib.Ajax.serializeForm(a)}});Ext.util.JSON=new (function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var useNative=null;return function(){if(useNative===null){useNative=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()==\"[object JSON]\"}return useNative}}(),pad=function(n){return n<10?\"0\"+n:n},doDecode=function(json){return json?eval(\"(\"+json+\")\"):\"\"},doEncode=function(o){if(!Ext.isDefined(o)||o===null){return\"null\"}else{if(Ext.isArray(o)){return encodeArray(o)}else{if(Ext.isDate(o)){return Ext.util.JSON.encodeDate(o)}else{if(Ext.isString(o)){return encodeString(o)}else{if(typeof o==\"number\"){return isFinite(o)?String(o):\"null\"}else{if(Ext.isBoolean(o)){return String(o)}else{var a=[\"{\"],b,i,v;for(i in o){if(!o.getElementsByTagName){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];switch(typeof v){case\"undefined\":case\"function\":case\"unknown\":break;default:if(b){a.push(\",\")}a.push(doEncode(i),\":\",v===null?\"null\":doEncode(v));b=true}}}}a.push(\"}\");return a.join(\"\")}}}}}}},m={\"\\b\":\"\\\\b\",\"\\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"},encodeString=function(s){if(/[\"\\\\\\x00-\\x1f]/.test(s)){return'\"'+s.replace(/([\\x00-\\x1f\\\\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return\"\\\\u00\"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'\"'}return'\"'+s+'\"'},encodeArray=function(o){var a=[\"[\"],b,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];switch(typeof v){case\"undefined\":case\"function\":case\"unknown\":break;default:if(b){a.push(\",\")}a.push(v===null?\"null\":Ext.util.JSON.encode(v));b=true}}a.push(\"]\");return a.join(\"\")};this.encodeDate=function(o){return'\"'+o.getFullYear()+\"-\"+pad(o.getMonth()+1)+\"-\"+pad(o.getDate())+\"T\"+pad(o.getHours())+\":\"+pad(o.getMinutes())+\":\"+pad(o.getSeconds())+'\"'};this.encode=function(){var ec;return function(o){if(!ec){ec=isNative()?JSON.stringify:doEncode}return ec(o)}}();this.decode=function(){var dc;return function(json){if(!dc){dc=isNative()?JSON.parse:doDecode}return dc(json)}}()})();Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;Ext.EventManager=function(){var z,p,j=false,l=Ext.isGecko||Ext.isWebKit||Ext.isSafari,o=Ext.lib.Event,q=Ext.lib.Dom,c=document,A=window,r=\"DOMContentLoaded\",t=\"complete\",g=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,u=[];function n(E){var H=false,D=0,C=u.length,F=false,G;if(E){if(E.getElementById||E.navigator){for(;D<C;++D){G=u[D];if(G.el===E){H=G.id;break}}if(!H){H=Ext.id(E);u.push({id:H,el:E});F=true}}else{H=Ext.id(E)}if(!Ext.elCache[H]){Ext.Element.addToCache(new Ext.Element(E),H);if(F){Ext.elCache[H].skipGC=true}}}return H}function m(E,G,J,F,D,L){E=Ext.getDom(E);var C=n(E),K=Ext.elCache[C].events,H;H=o.on(E,G,D);K[G]=K[G]||[];K[G].push([J,D,L,H,F]);if(E.addEventListener&&G==\"mousewheel\"){var I=[\"DOMMouseScroll\",D,false];E.addEventListener.apply(E,I);Ext.EventManager.addListener(A,\"unload\",function(){E.removeEventListener.apply(E,I)})}if(E==c&&G==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.addListener(D)}}function d(){if(window!=top){return false}try{c.documentElement.doScroll(\"left\")}catch(C){return false}b();return true}function B(C){if(Ext.isIE&&d()){return true}if(c.readyState==t){b();return true}j||(p=setTimeout(arguments.callee,2));return false}var k;function i(C){k||(k=Ext.query(\"style, link[rel=stylesheet]\"));if(k.length==c.styleSheets.length){b();return true}j||(p=setTimeout(arguments.callee,2));return false}function y(C){c.removeEventListener(r,arguments.callee,false);i()}function b(C){if(!j){j=true;if(p){clearTimeout(p)}if(l){c.removeEventListener(r,b,false)}if(Ext.isIE&&B.bindIE){c.detachEvent(\"onreadystatechange\",B)}o.un(A,\"load\",arguments.callee)}if(z&&!Ext.isReady){Ext.isReady=true;z.fire();z.listeners=[]}}function a(){z||(z=new Ext.util.Event());if(l){c.addEventListener(r,b,false)}if(Ext.isIE){if(!B()){B.bindIE=true;c.attachEvent(\"onreadystatechange\",B)}}else{if(Ext.isOpera){(c.readyState==t&&i())||c.addEventListener(r,y,false)}else{if(Ext.isWebKit){B()}}}o.on(A,\"load\",b)}function x(C,D){return function(){var E=Ext.toArray(arguments);if(D.target==Ext.EventObject.setEvent(E[0]).target){C.apply(this,E)}}}function w(D,E,C){return function(F){C.delay(E.buffer,D,null,[new Ext.EventObjectImpl(F)])}}function s(G,F,C,E,D){return function(H){Ext.EventManager.removeListener(F,C,E,D);G(H)}}function e(D,E,C){return function(G){var F=new Ext.util.DelayedTask(D);if(!C.tasks){C.tasks=[]}C.tasks.push(F);F.delay(E.delay||10,D,null,[new Ext.EventObjectImpl(G)])}}function h(H,G,C,J,K){var D=(!C||typeof C==\"boolean\")?{}:C,E=Ext.getDom(H),F;J=J||D.fn;K=K||D.scope;if(!E){throw'Error listening for \"'+G+'\". Element \"'+H+\"\\\" doesn't exist.\"}function I(M){if(!Ext){return}M=Ext.EventObject.setEvent(M);var L;if(D.delegate){if(!(L=M.getTarget(D.delegate,E))){return}}else{L=M.target}if(D.stopEvent){M.stopEvent()}if(D.preventDefault){M.preventDefault()}if(D.stopPropagation){M.stopPropagation()}if(D.normalized===false){M=M.browserEvent}J.call(K||E,M,L,D)}if(D.target){I=x(I,D)}if(D.delay){I=e(I,D,J)}if(D.single){I=s(I,E,G,J,K)}if(D.buffer){F=new Ext.util.DelayedTask(I);I=w(I,D,F)}m(E,G,J,F,I,K);return I}var v={addListener:function(E,C,G,F,D){if(typeof C==\"object\"){var J=C,H,I;for(H in J){I=J[H];if(!g.test(H)){if(Ext.isFunction(I)){h(E,H,J,I,J.scope)}else{h(E,H,I)}}}}else{h(E,C,D,G,F)}},removeListener:function(E,I,M,N){E=Ext.getDom(E);var C=n(E),K=E&&(Ext.elCache[C].events)[I]||[],D,H,F,G,J,L;for(H=0,J=K.length;H<J;H++){if(Ext.isArray(L=K[H])&&L[0]==M&&(!N||L[2]==N)){if(L[4]){L[4].cancel()}G=M.tasks&&M.tasks.length;if(G){while(G--){M.tasks[G].cancel()}delete M.tasks}D=L[1];o.un(E,I,o.extAdapter?L[3]:D);if(D&&E.addEventListener&&I==\"mousewheel\"){E.removeEventListener(\"DOMMouseScroll\",D,false)}if(D&&E==c&&I==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.removeListener(D)}K.splice(H,1);if(K.length===0){delete Ext.elCache[C].events[I]}for(G in Ext.elCache[C].events){return false}Ext.elCache[C].events={};return false}}},removeAll:function(E){E=Ext.getDom(E);var D=n(E),J=Ext.elCache[D]||{},M=J.events||{},I,H,K,F,L,G,C;for(F in M){if(M.hasOwnProperty(F)){I=M[F];for(H=0,K=I.length;H<K;H++){L=I[H];if(L[4]){L[4].cancel()}if(L[0].tasks&&(G=L[0].tasks.length)){while(G--){L[0].tasks[G].cancel()}delete L.tasks}C=L[1];o.un(E,F,o.extAdapter?L[3]:C);if(E.addEventListener&&C&&F==\"mousewheel\"){E.removeEventListener(\"DOMMouseScroll\",C,false)}if(C&&E==c&&F==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.removeListener(C)}}}}if(Ext.elCache[D]){Ext.elCache[D].events={}}},getListeners:function(F,C){F=Ext.getDom(F);var H=n(F),D=Ext.elCache[H]||{},G=D.events||{},E=[];if(G&&G[C]){return G[C]}else{return null}},purgeElement:function(E,C,G){E=Ext.getDom(E);var D=n(E),J=Ext.elCache[D]||{},K=J.events||{},F,I,H;if(G){if(K&&K.hasOwnProperty(G)){I=K[G];for(F=0,H=I.length;F<H;F++){Ext.EventManager.removeListener(E,G,I[F][0])}}}else{Ext.EventManager.removeAll(E)}if(C&&E&&E.childNodes){for(F=0,H=E.childNodes.length;F<H;F++){Ext.EventManager.purgeElement(E.childNodes[F],C,G)}}},_unload:function(){var C;for(C in Ext.elCache){Ext.EventManager.removeAll(C)}delete Ext.elCache;delete Ext.Element._flyweights;var G,D,F,E=Ext.lib.Ajax;(typeof E.conn==\"object\")?D=E.conn:D={};for(F in D){G=D[F];if(G){E.abort({conn:G,tId:F})}}},onDocumentReady:function(E,D,C){if(Ext.isReady){z||(z=new Ext.util.Event());z.addListener(E,D,C);z.fire();z.listeners=[]}else{if(!z){a()}C=C||{};C.delay=C.delay||1;z.addListener(E,D,C)}},fireDocReady:b};v.on=v.addListener;v.un=v.removeListener;v.stoppedMouseDownEvent=new Ext.util.Event();return v}();Ext.onReady=Ext.EventManager.onDocumentReady;(function(){var a=function(){var c=document.body||document.getElementsByTagName(\"body\")[0];if(!c){return false}var b=[\" \",Ext.isIE?\"ext-ie \"+(Ext.isIE6?\"ext-ie6\":(Ext.isIE7?\"ext-ie7\":(Ext.isIE8?\"ext-ie8\":\"ext-ie9\"))):Ext.isGecko?\"ext-gecko \"+(Ext.isGecko2?\"ext-gecko2\":\"ext-gecko3\"):Ext.isOpera?\"ext-opera\":Ext.isWebKit?\"ext-webkit\":\"\"];if(Ext.isSafari){b.push(\"ext-safari \"+(Ext.isSafari2?\"ext-safari2\":(Ext.isSafari3?\"ext-safari3\":\"ext-safari4\")))}else{if(Ext.isChrome){b.push(\"ext-chrome\")}}if(Ext.isMac){b.push(\"ext-mac\")}if(Ext.isLinux){b.push(\"ext-linux\")}if(Ext.isStrict||Ext.isBorderBox){var d=c.parentNode;if(d){if(!Ext.isStrict){Ext.fly(d,\"_internal\").addClass(\"x-quirks\");if(Ext.isIE&&!Ext.isStrict){Ext.isIEQuirks=true}}Ext.fly(d,\"_internal\").addClass(((Ext.isStrict&&Ext.isIE)||(!Ext.enableForcedBoxModel&&!Ext.isIE))?\" ext-strict\":\" ext-border-box\")}}if(Ext.enableForcedBoxModel&&!Ext.isIE){Ext.isForcedBorderBox=true;b.push(\"ext-forced-border-box\")}Ext.fly(c,\"_internal\").addClass(b);return true};if(!a()){Ext.onReady(a)}})();(function(){var b=Ext.apply(Ext.supports,{correctRightMargin:true,correctTransparentColor:true,cssFloat:true});var a=function(){var g=document.createElement(\"div\"),e=document,c,d;g.innerHTML='<div style=\"height:30px;width:50px;\"><div style=\"height:20px;width:20px;\"></div></div><div style=\"float:left;background-color:transparent;\">';e.body.appendChild(g);d=g.lastChild;if((c=e.defaultView)){if(c.getComputedStyle(g.firstChild.firstChild,null).marginRight!=\"0px\"){b.correctRightMargin=false}if(c.getComputedStyle(d,null).backgroundColor!=\"transparent\"){b.correctTransparentColor=false}}b.cssFloat=!!d.style.cssFloat;e.body.removeChild(g)};if(Ext.isReady){a()}else{Ext.onReady(a)}})();Ext.EventObject=function(){var b=Ext.lib.Event,c=/(dbl)?click/,a={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},d=Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2};Ext.EventObjectImpl=function(g){if(g){this.setEvent(g.browserEvent||g)}};Ext.EventObjectImpl.prototype={setEvent:function(h){var g=this;if(h==g||(h&&h.browserEvent)){return h}g.browserEvent=h;if(h){g.button=h.button?d[h.button]:(h.which?h.which-1:-1);if(c.test(h.type)&&g.button==-1){g.button=0}g.type=h.type;g.shiftKey=h.shiftKey;g.ctrlKey=h.ctrlKey||h.metaKey||false;g.altKey=h.altKey;g.keyCode=h.keyCode;g.charCode=h.charCode;g.target=b.getTarget(h);g.xy=b.getXY(h)}else{g.button=-1;g.shiftKey=false;g.ctrlKey=false;g.altKey=false;g.keyCode=0;g.charCode=0;g.target=null;g.xy=[0,0]}return g},stopEvent:function(){var e=this;if(e.browserEvent){if(e.browserEvent.type==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.fire(e)}b.stopEvent(e.browserEvent)}},preventDefault:function(){if(this.browserEvent){b.preventDefault(this.browserEvent)}},stopPropagation:function(){var e=this;if(e.browserEvent){if(e.browserEvent.type==\"mousedown\"){Ext.EventManager.stoppedMouseDownEvent.fire(e)}b.stopPropagation(e.browserEvent)}},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(e){return Ext.isSafari?(a[e]||e):e},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(g,h,e){return g?Ext.fly(this.target).findParent(g,h,e):(e?Ext.get(this.target):this.target)},getRelatedTarget:function(){return this.browserEvent?b.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var g=this.browserEvent;var h=0;if(g.wheelDelta){h=g.wheelDelta/120}else{if(g.detail){h=-g.detail/3}}return h},within:function(h,i,e){if(h){var g=this[i?\"getRelatedTarget\":\"getTarget\"]();return g&&((e?(g==Ext.getDom(h)):false)||Ext.fly(h).contains(g))}return false}};return new Ext.EventObjectImpl()}();Ext.Loader=Ext.apply({},{load:function(j,i,k,c){var k=k||this,g=document.getElementsByTagName(\"head\")[0],b=document.createDocumentFragment(),a=j.length,h=0,e=this;var l=function(m){g.appendChild(e.buildScriptTag(j[m],d))};var d=function(){h++;if(a==h&&typeof i==\"function\"){i.call(k)}else{if(c===true){l(h)}}};if(c===true){l.call(this,0)}else{Ext.each(j,function(n,m){b.appendChild(this.buildScriptTag(n,d))},this);g.appendChild(b)}},buildScriptTag:function(b,c){var a=document.createElement(\"script\");a.type=\"text/javascript\";a.src=b;if(a.readyState){a.onreadystatechange=function(){if(a.readyState==\"loaded\"||a.readyState==\"complete\"){a.onreadystatechange=null;c()}}}else{a.onload=c}return a}});Ext.ns(\"Ext.grid\",\"Ext.list\",\"Ext.dd\",\"Ext.tree\",\"Ext.form\",\"Ext.menu\",\"Ext.state\",\"Ext.layout.boxOverflow\",\"Ext.app\",\"Ext.ux\",\"Ext.chart\",\"Ext.direct\",\"Ext.slider\");Ext.apply(Ext,function(){var c=Ext,a=0,b=null;return{emptyFn:function(){},BLANK_IMAGE_URL:Ext.isIE6||Ext.isIE7||Ext.isAir?\"http://www.extjs.com/s.gif\":\"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\",extendX:function(d,e){return Ext.extend(d,e(d.prototype))},getDoc:function(){return Ext.get(document)},num:function(e,d){e=Number(Ext.isEmpty(e)||Ext.isArray(e)||typeof e==\"boolean\"||(typeof e==\"string\"&&e.trim().length==0)?NaN:e);return isNaN(e)?d:e},value:function(g,d,e){return Ext.isEmpty(g,e)?d:g},escapeRe:function(d){return d.replace(/([-.*+?^${}()|[\\]\\/\\\\])/g,\"\\\\$1\")},sequence:function(h,d,g,e){h[d]=h[d].createSequence(g,e)},addBehaviors:function(i){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(i)})}else{var e={},h,d,g;for(d in i){if((h=d.split(\"@\"))[1]){g=h[0];if(!e[g]){e[g]=Ext.select(g)}e[g].on(h[1],i[d])}}e=null}},getScrollBarWidth:function(g){if(!Ext.isReady){return 0}if(g===true||b===null){var i=Ext.getBody().createChild('<div class=\"x-hide-offsets\" style=\"width:100px;height:50px;overflow:hidden;\"><div style=\"height:200px;\"></div></div>'),h=i.child(\"div\",true);var e=h.offsetWidth;i.setStyle(\"overflow\",(Ext.isWebKit||Ext.isGecko)?\"auto\":\"scroll\");var d=h.offsetWidth;i.remove();b=e-d+2}return b},combine:function(){var g=arguments,e=g.length,j=[];for(var h=0;h<e;h++){var d=g[h];if(Ext.isArray(d)){j=j.concat(d)}else{if(d.length!==undefined&&!d.substr){j=j.concat(Array.prototype.slice.call(d,0))}else{j.push(d)}}}return j},copyTo:function(d,e,g){if(typeof g==\"string\"){g=g.split(/[,;\\s]/)}Ext.each(g,function(h){if(e.hasOwnProperty(h)){d[h]=e[h]}},this);return d},destroy:function(){Ext.each(arguments,function(d){if(d){if(Ext.isArray(d)){this.destroy.apply(this,d)}else{if(typeof d.destroy==\"function\"){d.destroy()}else{if(d.dom){d.remove()}}}}},this)},destroyMembers:function(l,j,g,h){for(var k=1,e=arguments,d=e.length;k<d;k++){Ext.destroy(l[e[k]]);delete l[e[k]]}},clean:function(d){var e=[];Ext.each(d,function(g){if(!!g){e.push(g)}});return e},unique:function(d){var e=[],g={};Ext.each(d,function(h){if(!g[h]){e.push(h)}g[h]=true});return e},flatten:function(d){var g=[];function e(h){Ext.each(h,function(i){if(Ext.isArray(i)){e(i)}else{g.push(i)}});return g}return e(d)},min:function(d,e){var g=d[0];e=e||function(i,h){return i<h?-1:1};Ext.each(d,function(h){g=e(g,h)==-1?g:h});return g},max:function(d,e){var g=d[0];e=e||function(i,h){return i>h?1:-1};Ext.each(d,function(h){g=e(g,h)==1?g:h});return g},mean:function(d){return d.length>0?Ext.sum(d)/d.length:undefined},sum:function(d){var e=0;Ext.each(d,function(g){e+=g});return e},partition:function(d,e){var g=[[],[]];Ext.each(d,function(j,k,h){g[(e&&e(j,k,h))||(!e&&j)?0:1].push(j)});return g},invoke:function(d,e){var h=[],g=Array.prototype.slice.call(arguments,2);Ext.each(d,function(j,k){if(j&&typeof j[e]==\"function\"){h.push(j[e].apply(j,g))}else{h.push(undefined)}});return h},pluck:function(d,g){var e=[];Ext.each(d,function(h){e.push(h[g])});return e},zip:function(){var n=Ext.partition(arguments,function(i){return typeof i!=\"function\"}),k=n[0],m=n[1][0],d=Ext.max(Ext.pluck(k,\"length\")),h=[];for(var l=0;l<d;l++){h[l]=[];if(m){h[l]=m.apply(m,Ext.pluck(k,l))}else{for(var g=0,e=k.length;g<e;g++){h[l].push(k[g][l])}}}return h},getCmp:function(d){return Ext.ComponentMgr.get(d)},useShims:c.isIE6||(c.isMac&&c.isGecko2),type:function(e){if(e===undefined||e===null){return false}if(e.htmlElement){return\"element\"}var d=typeof e;if(d==\"object\"&&e.nodeName){switch(e.nodeType){case 1:return\"element\";case 3:return(/\\S/).test(e.nodeValue)?\"textnode\":\"whitespace\"}}if(d==\"object\"||d==\"function\"){switch(e.constructor){case Array:return\"array\";case RegExp:return\"regexp\";case Date:return\"date\"}if(typeof e.length==\"number\"&&typeof e.item==\"function\"){return\"nodelist\"}}return d},intercept:function(h,d,g,e){h[d]=h[d].createInterceptor(g,e)},callback:function(d,h,g,e){if(typeof d==\"function\"){if(e){d.defer(e,h,g||[])}else{d.apply(h,g||[])}}}}}());Ext.apply(Function.prototype,{createSequence:function(b,a){var c=this;return(typeof b!=\"function\")?this:function(){var d=c.apply(this||window,arguments);b.apply(a||this||window,arguments);return d}}});Ext.applyIf(String,{escape:function(a){return a.replace(/('|\\\\)/g,\"\\\\$1\")},leftPad:function(d,b,c){var a=String(d);if(!c){c=\" \"}while(a.length<b){a=c+a}return a}});String.prototype.toggle=function(b,a){return this==b?a:b};String.prototype.trim=function(){var a=/^\\s+|\\s+$/g;return function(){return this.replace(a,\"\")}}();Date.prototype.getElapsed=function(a){return Math.abs((a||new Date()).getTime()-this.getTime())};Ext.applyIf(Number.prototype,{constrain:function(b,a){return Math.min(Math.max(this,b),a)}});Ext.lib.Dom.getRegion=function(a){return Ext.lib.Region.getRegion(a)};Ext.lib.Region=function(d,g,a,c){var e=this;e.top=d;e[1]=d;e.right=g;e.bottom=a;e.left=c;e[0]=c};Ext.lib.Region.prototype={contains:function(b){var a=this;return(b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom)},getArea:function(){var a=this;return((a.bottom-a.top)*(a.right-a.left))},intersect:function(h){var g=this,d=Math.max(g.top,h.top),e=Math.min(g.right,h.right),a=Math.min(g.bottom,h.bottom),c=Math.max(g.left,h.left);if(a>=d&&e>=c){return new Ext.lib.Region(d,e,a,c)}},union:function(h){var g=this,d=Math.min(g.top,h.top),e=Math.max(g.right,h.right),a=Math.max(g.bottom,h.bottom),c=Math.min(g.left,h.left);return new Ext.lib.Region(d,e,a,c)},constrainTo:function(b){var a=this;a.top=a.top.constrain(b.top,b.bottom);a.bottom=a.bottom.constrain(b.top,b.bottom);a.left=a.left.constrain(b.left,b.right);a.right=a.right.constrain(b.left,b.right);return a},adjust:function(d,c,a,g){var e=this;e.top+=d;e.left+=c;e.right+=g;e.bottom+=a;return e}};Ext.lib.Region.getRegion=function(e){var h=Ext.lib.Dom.getXY(e),d=h[1],g=h[0]+e.offsetWidth,a=h[1]+e.offsetHeight,c=h[0];return new Ext.lib.Region(d,g,a,c)};Ext.lib.Point=function(a,c){if(Ext.isArray(a)){c=a[1];a=a[0]}var b=this;b.x=b.right=b.left=b[0]=a;b.y=b.top=b.bottom=b[1]=c};Ext.lib.Point.prototype=new Ext.lib.Region();Ext.apply(Ext.DomHelper,function(){var e,a=\"afterbegin\",h=\"afterend\",i=\"beforebegin\",d=\"beforeend\",b=/tag|children|cn|html$/i;function g(m,p,n,q,l,j){m=Ext.getDom(m);var k;if(e.useDom){k=c(p,null);if(j){m.appendChild(k)}else{(l==\"firstChild\"?m:m.parentNode).insertBefore(k,m[l]||m)}}else{k=Ext.DomHelper.insertHtml(q,m,Ext.DomHelper.createHtml(p))}return n?Ext.get(k,true):k}function c(j,r){var k,u=document,p,s,m,t;if(Ext.isArray(j)){k=u.createDocumentFragment();for(var q=0,n=j.length;q<n;q++){c(j[q],k)}}else{if(typeof j==\"string\"){k=u.createTextNode(j)}else{k=u.createElement(j.tag||\"div\");p=!!k.setAttribute;for(var s in j){if(!b.test(s)){m=j[s];if(s==\"cls\"){k.className=m}else{if(p){k.setAttribute(s,m)}else{k[s]=m}}}}Ext.DomHelper.applyStyles(k,j.style);if((t=j.children||j.cn)){c(t,k)}else{if(j.html){k.innerHTML=j.html}}}}if(r){r.appendChild(k)}return k}e={createTemplate:function(k){var j=Ext.DomHelper.createHtml(k);return new Ext.Template(j)},useDom:false,insertBefore:function(j,l,k){return g(j,l,k,i)},insertAfter:function(j,l,k){return g(j,l,k,h,\"nextSibling\")},insertFirst:function(j,l,k){return g(j,l,k,a,\"firstChild\")},append:function(j,l,k){return g(j,l,k,d,\"\",true)},createDom:c};return e}());Ext.apply(Ext.Template.prototype,{disableFormats:false,re:/\\{([\\w\\-]+)(?:\\:([\\w\\.]*)(?:\\((.*?)?\\))?)?\\}/g,argsRe:/^\\s*['\"](.*)[\"']\\s*$/,compileARe:/\\\\/g,compileBRe:/(\\r\\n|\\n)/g,compileCRe:/'/g,applyTemplate:function(b){var g=this,a=g.disableFormats!==true,e=Ext.util.Format,c=g;if(g.compiled){return g.compiled(b)}function d(j,l,p,k){if(p&&a){if(p.substr(0,5)==\"this.\"){return c.call(p.substr(5),b[l],b)}else{if(k){var o=g.argsRe;k=k.split(\",\");for(var n=0,h=k.length;n<h;n++){k[n]=k[n].replace(o,\"$1\")}k=[b[l]].concat(k)}else{k=[b[l]]}return e[p].apply(e,k)}}else{return b[l]!==undefined?b[l]:\"\"}}return g.html.replace(g.re,d)},compile:function(){var me=this,fm=Ext.util.Format,useF=me.disableFormats!==true,sep=Ext.isGecko?\"+\":\",\",body;function fn(m,name,format,args){if(format&&useF){args=args?\",\"+args:\"\";if(format.substr(0,5)!=\"this.\"){format=\"fm.\"+format+\"(\"}else{format='this.call(\"'+format.substr(5)+'\", ';args=\", values\"}}else{args=\"\";format=\"(values['\"+name+\"'] == undefined ? '' : \"}return\"'\"+sep+format+\"values['\"+name+\"']\"+args+\")\"+sep+\"'\"}if(Ext.isGecko){body=\"this.compiled = function(values){ return '\"+me.html.replace(me.compileARe,\"\\\\\\\\\").replace(me.compileBRe,\"\\\\n\").replace(me.compileCRe,\"\\\\'\").replace(me.re,fn)+\"';};\"}else{body=[\"this.compiled = function(values){ return ['\"];body.push(me.html.replace(me.compileARe,\"\\\\\\\\\").replace(me.compileBRe,\"\\\\n\").replace(me.compileCRe,\"\\\\'\").replace(me.re,fn));body.push(\"'].join('');};\");body=body.join(\"\")}eval(body);return me},call:function(c,b,a){return this[c](b,a)}});Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.util.Functions={createInterceptor:function(c,b,a){var d=c;if(!Ext.isFunction(b)){return c}else{return function(){var g=this,e=arguments;b.target=g;b.method=c;return(b.apply(a||g||window,e)!==false)?c.apply(g||window,e):null}}},createDelegate:function(c,d,b,a){if(!Ext.isFunction(c)){return c}return function(){var g=b||arguments;if(a===true){g=Array.prototype.slice.call(arguments,0);g=g.concat(b)}else{if(Ext.isNumber(a)){g=Array.prototype.slice.call(arguments,0);var e=[a,0].concat(b);Array.prototype.splice.apply(g,e)}}return c.apply(d||window,g)}},defer:function(d,c,e,b,a){d=Ext.util.Functions.createDelegate(d,e,b,a);if(c>0){return setTimeout(d,c)}d();return 0},createSequence:function(c,b,a){if(!Ext.isFunction(b)){return c}else{return function(){var d=c.apply(this||window,arguments);b.apply(a||this||window,arguments);return d}}}};Ext.defer=Ext.util.Functions.defer;Ext.createInterceptor=Ext.util.Functions.createInterceptor;Ext.createSequence=Ext.util.Functions.createSequence;Ext.createDelegate=Ext.util.Functions.createDelegate;Ext.apply(Ext.util.Observable.prototype,function(){function a(j){var i=(this.methodEvents=this.methodEvents||{})[j],d,c,g,h=this;if(!i){this.methodEvents[j]=i={};i.originalFn=this[j];i.methodName=j;i.before=[];i.after=[];var b=function(l,k,e){if((c=l.apply(k||h,e))!==undefined){if(typeof c==\"object\"){if(c.returnValue!==undefined){d=c.returnValue}else{d=c}g=!!c.cancel}else{if(c===false){g=true}else{d=c}}}};this[j]=function(){var l=Array.prototype.slice.call(arguments,0),k;d=c=undefined;g=false;for(var m=0,e=i.before.length;m<e;m++){k=i.before[m];b(k.fn,k.scope,l);if(g){return d}}if((c=i.originalFn.apply(h,l))!==undefined){d=c}for(var m=0,e=i.after.length;m<e;m++){k=i.after[m];b(k.fn,k.scope,l);if(g){return d}}return d}}return i}return{beforeMethod:function(d,c,b){a.call(this,d).before.push({fn:c,scope:b})},afterMethod:function(d,c,b){a.call(this,d).after.push({fn:c,scope:b})},removeMethodListener:function(j,g,d){var h=this.getMethodEvent(j);for(var c=0,b=h.before.length;c<b;c++){if(h.before[c].fn==g&&h.before[c].scope==d){h.before.splice(c,1);return}}for(var c=0,b=h.after.length;c<b;c++){if(h.after[c].fn==g&&h.after[c].scope==d){h.after.splice(c,1);return}}},relayEvents:function(j,e){var h=this;function g(i){return function(){return h.fireEvent.apply(h,[i].concat(Array.prototype.slice.call(arguments,0)))}}for(var d=0,b=e.length;d<b;d++){var c=e[d];h.events[c]=h.events[c]||true;j.on(c,g(c),h)}},enableBubble:function(e){var g=this;if(!Ext.isEmpty(e)){e=Ext.isArray(e)?e:Array.prototype.slice.call(arguments,0);for(var d=0,b=e.length;d<b;d++){var c=e[d];c=c.toLowerCase();var h=g.events[c]||true;if(typeof h==\"boolean\"){h=new Ext.util.Event(g,c);g.events[c]=h}h.bubble=true}}}}}());Ext.util.Observable.capture=function(c,b,a){c.fireEvent=c.fireEvent.createInterceptor(b,a)};Ext.util.Observable.observeClass=function(b,a){if(b){if(!b.fireEvent){Ext.apply(b,new Ext.util.Observable());Ext.util.Observable.capture(b.prototype,b.fireEvent,b)}if(typeof a==\"object\"){b.on(a)}return b}};Ext.apply(Ext.EventManager,function(){var d,k,g,b,a=Ext.lib.Dom,j=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,c=Ext.EventManager._unload,i=0,h=0,e=Ext.isWebKit?Ext.num(navigator.userAgent.match(/AppleWebKit\\/(\\d+)/)[1])>=525:!((Ext.isGecko&&!Ext.isWindows)||Ext.isOpera);return{_unload:function(){Ext.EventManager.un(window,\"resize\",this.fireWindowResize,this);c.call(Ext.EventManager)},doResizeEvent:function(){var m=a.getViewHeight(),l=a.getViewWidth();if(h!=m||i!=l){d.fire(i=l,h=m)}},onWindowResize:function(n,m,l){if(!d){d=new Ext.util.Event();k=new Ext.util.DelayedTask(this.doResizeEvent);Ext.EventManager.on(window,\"resize\",this.fireWindowResize,this)}d.addListener(n,m,l)},fireWindowResize:function(){if(d){k.delay(100)}},onTextResize:function(o,n,l){if(!g){g=new Ext.util.Event();var m=new Ext.Element(document.createElement(\"div\"));m.dom.className=\"x-text-resize\";m.dom.innerHTML=\"X\";m.appendTo(document.body);b=m.dom.offsetHeight;setInterval(function(){if(m.dom.offsetHeight!=b){g.fire(b,b=m.dom.offsetHeight)}},this.textResizeInterval)}g.addListener(o,n,l)},removeResizeListener:function(m,l){if(d){d.removeListener(m,l)}},fireResize:function(){if(d){d.fire(a.getViewWidth(),a.getViewHeight())}},textResizeInterval:50,ieDeferSrc:false,getKeyEvent:function(){return e?\"keydown\":\"keypress\"},useKeydown:e}}());Ext.EventManager.on=Ext.EventManager.addListener;Ext.apply(Ext.EventObjectImpl.prototype,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,isNavKeyPress:function(){var b=this,a=this.normalizeKey(b.keyCode);return(a>=33&&a<=40)||a==b.RETURN||a==b.TAB||a==b.ESC},isSpecialKey:function(){var a=this.normalizeKey(this.keyCode);return(this.type==\"keypress\"&&this.ctrlKey)||this.isNavKeyPress()||(a==this.BACKSPACE)||(a>=16&&a<=20)||(a>=44&&a<=46)},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])},hasModifier:function(){return((this.ctrlKey||this.altKey)||this.shiftKey)}});Ext.Element.addMethods({swallowEvent:function(a,b){var d=this;function c(g){g.stopPropagation();if(b){g.preventDefault()}}if(Ext.isArray(a)){Ext.each(a,function(g){d.on(g,c)});return d}d.on(a,c);return d},relayEvent:function(a,b){this.on(a,function(c){b.fireEvent(a,c)})},clean:function(b){var d=this,e=d.dom,g=e.firstChild,c=-1;if(Ext.Element.data(e,\"isCleaned\")&&b!==true){return d}while(g){var a=g.nextSibling;if(g.nodeType==3&&!(/\\S/.test(g.nodeValue))){e.removeChild(g)}else{g.nodeIndex=++c}g=a}Ext.Element.data(e,\"isCleaned\",true);return d},load:function(){var a=this.getUpdater();a.update.apply(a,arguments);return this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this))},update:function(html,loadScripts,callback){if(!this.dom){return this}html=html||\"\";if(loadScripts!==true){this.dom.innerHTML=html;if(typeof callback==\"function\"){callback()}return this}var id=Ext.id(),dom=this.dom;html+='<span id=\"'+id+'\"></span>';Ext.lib.Event.onAvailable(id,function(){var DOC=document,hd=DOC.getElementsByTagName(\"head\")[0],re=/(?:<script([^>]*)?>)((\\n|\\r|.)*?)(?:<\\/script>)/ig,srcRe=/\\ssrc=([\\'\\\"])(.*?)\\1/i,typeRe=/\\stype=([\\'\\\"])(.*?)\\1/i,match,attrs,srcMatch,typeMatch,el,s;while((match=re.exec(html))){attrs=match[1];srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){s=DOC.createElement(\"script\");s.src=srcMatch[2];typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(window.execScript){window.execScript(match[2])}else{window.eval(match[2])}}}}el=DOC.getElementById(id);if(el){Ext.removeNode(el)}if(typeof callback==\"function\"){callback()}});dom.innerHTML=html.replace(/(?:<script.*?>)((\\n|\\r|.)*?)(?:<\\/script>)/ig,\"\");return this},removeAllListeners:function(){this.removeAnchor();Ext.EventManager.removeAll(this.dom);return this},createProxy:function(a,e,d){a=(typeof a==\"object\")?a:{tag:\"div\",cls:a};var c=this,b=e?Ext.DomHelper.append(e,a,true):Ext.DomHelper.insertBefore(c.dom,a,true);if(d&&c.setBox&&c.getBox){b.setBox(c.getBox())}return b}});Ext.Element.prototype.getUpdateManager=Ext.Element.prototype.getUpdater;Ext.Element.addMethods({getAnchorXY:function(e,l,q){e=(e||\"tl\").toLowerCase();q=q||{};var k=this,b=k.dom==document.body||k.dom==document,n=q.width||b?Ext.lib.Dom.getViewWidth():k.getWidth(),i=q.height||b?Ext.lib.Dom.getViewHeight():k.getHeight(),p,a=Math.round,c=k.getXY(),m=k.getScroll(),j=b?m.left:!l?c[0]:0,g=b?m.top:!l?c[1]:0,d={c:[a(n*0.5),a(i*0.5)],t:[a(n*0.5),0],l:[0,a(i*0.5)],r:[n,a(i*0.5)],b:[a(n*0.5),i],tl:[0,0],bl:[0,i],br:[n,i],tr:[n,0]};p=d[e];return[p[0]+j,p[1]+g]},anchorTo:function(b,h,c,a,k,l){var i=this,e=i.dom,j=!Ext.isEmpty(k),d=function(){Ext.fly(e).alignTo(b,h,c,a);Ext.callback(l,Ext.fly(e))},g=this.getAnchor();this.removeAnchor();Ext.apply(g,{fn:d,scroll:j});Ext.EventManager.onWindowResize(d,null);if(j){Ext.EventManager.on(window,\"scroll\",d,null,{buffer:!isNaN(k)?k:50})}d.call(i);return i},removeAnchor:function(){var b=this,a=this.getAnchor();if(a&&a.fn){Ext.EventManager.removeResizeListener(a.fn);if(a.scroll){Ext.EventManager.un(window,\"scroll\",a.fn)}delete a.fn}return b},getAnchor:function(){var b=Ext.Element.data,c=this.dom;if(!c){return}var a=b(c,\"_anchor\");if(!a){a=b(c,\"_anchor\",{})}return a},getAlignToXY:function(g,A,B){g=Ext.get(g);if(!g||!g.dom){throw\"Element.alignToXY with an element that doesn't exist\"}B=B||[0,0];A=(!A||A==\"?\"?\"tl-bl?\":(!(/-/).test(A)&&A!==\"\"?\"tl-\"+A:A||\"tl-bl\")).toLowerCase();var K=this,H=K.dom,M,L,n,l,s,F,v,t=Ext.lib.Dom.getViewWidth()-10,G=Ext.lib.Dom.getViewHeight()-10,b,i,j,k,u,z,N=document,J=N.documentElement,q=N.body,E=(J.scrollLeft||q.scrollLeft||0)+5,D=(J.scrollTop||q.scrollTop||0)+5,I=false,e=\"\",a=\"\",C=A.match(/^([a-z]+)-([a-z]+)(\\?)?$/);if(!C){throw\"Element.alignTo with an invalid alignment \"+A}e=C[1];a=C[2];I=!!C[3];M=K.getAnchorXY(e,true);L=g.getAnchorXY(a,false);n=L[0]-M[0]+B[0];l=L[1]-M[1]+B[1];if(I){s=K.getWidth();F=K.getHeight();v=g.getRegion();b=e.charAt(0);i=e.charAt(e.length-1);j=a.charAt(0);k=a.charAt(a.length-1);u=((b==\"t\"&&j==\"b\")||(b==\"b\"&&j==\"t\"));z=((i==\"r\"&&k==\"l\")||(i==\"l\"&&k==\"r\"));if(n+s>t+E){n=z?v.left-s:t+E-s}if(n<E){n=z?v.right:E}if(l+F>G+D){l=u?v.top-F:G+D-F}if(l<D){l=u?v.bottom:D}}return[n,l]},alignTo:function(c,a,e,b){var d=this;return d.setXY(d.getAlignToXY(c,a,e),d.preanim&&!!b?d.preanim(arguments,3):false)},adjustForConstraints:function(c,a,b){return this.getConstrainToXY(a||document,false,b,c)||c},getConstrainToXY:function(b,a,c,e){var d={top:0,left:0,bottom:0,right:0};return function(i,A,l,n){i=Ext.get(i);l=l?Ext.applyIf(l,d):d;var z,D,v=0,u=0;if(i.dom==document.body||i.dom==document){z=Ext.lib.Dom.getViewWidth();D=Ext.lib.Dom.getViewHeight()}else{z=i.dom.clientWidth;D=i.dom.clientHeight;if(!A){var t=i.getXY();v=t[0];u=t[1]}}var r=i.getScroll();v+=l.left+r.left;u+=l.top+r.top;z-=l.right;D-=l.bottom;var B=v+z,g=u+D,j=n||(!A?this.getXY():[this.getLeft(true),this.getTop(true)]),p=j[0],o=j[1],k=this.getConstrainOffset(),q=this.dom.offsetWidth+k,C=this.dom.offsetHeight+k;var m=false;if((p+q)>B){p=B-q;m=true}if((o+C)>g){o=g-C;m=true}if(p<v){p=v;m=true}if(o<u){o=u;m=true}return m?[p,o]:false}}(),getConstrainOffset:function(){return 0},getCenterXY:function(){return this.getAlignToXY(document,\"c-c\")},center:function(a){return this.alignTo(a||document,\"c-c\")}});Ext.Element.addMethods({select:function(a,b){return Ext.Element.select(a,b,this.dom)}});Ext.apply(Ext.Element.prototype,function(){var c=Ext.getDom,a=Ext.get,b=Ext.DomHelper;return{insertSibling:function(i,g,h){var j=this,e,d=(g||\"before\").toLowerCase()==\"after\",k;if(Ext.isArray(i)){k=j;Ext.each(i,function(l){e=Ext.fly(k,\"_internal\").insertSibling(l,g,h);if(d){k=e}});return e}i=i||{};if(i.nodeType||i.dom){e=j.dom.parentNode.insertBefore(c(i),d?j.dom.nextSibling:j.dom);if(!h){e=a(e)}}else{if(d&&!j.dom.nextSibling){e=b.append(j.dom.parentNode,i,!h)}else{e=b[d?\"insertAfter\":\"insertBefore\"](j.dom,i,!h)}}return e}}}());Ext.Element.boxMarkup='<div class=\"{0}-tl\"><div class=\"{0}-tr\"><div class=\"{0}-tc\"></div></div></div><div class=\"{0}-ml\"><div class=\"{0}-mr\"><div class=\"{0}-mc\"></div></div></div><div class=\"{0}-bl\"><div class=\"{0}-br\"><div class=\"{0}-bc\"></div></div></div>';Ext.Element.addMethods(function(){var a=\"_internal\",b=/(\\d+\\.?\\d+)px/;return{applyStyles:function(c){Ext.DomHelper.applyStyles(this.dom,c);return this},getStyles:function(){var c={};Ext.each(arguments,function(d){c[d]=this.getStyle(d)},this);return c},setOverflow:function(c){var d=this.dom;if(c==\"auto\"&&Ext.isMac&&Ext.isGecko2){d.style.overflow=\"hidden\";(function(){d.style.overflow=\"auto\"}).defer(1)}else{d.style.overflow=c}},boxWrap:function(c){c=c||\"x-box\";var d=Ext.get(this.insertHtml(\"beforeBegin\",\"<div class='\"+c+\"'>\"+String.format(Ext.Element.boxMarkup,c)+\"</div>\"));Ext.DomQuery.selectNode(\".\"+c+\"-mc\",d.dom).appendChild(this.dom);return d},setSize:function(e,c,d){var g=this;if(typeof e==\"object\"){c=e.height;e=e.width}e=g.adjustWidth(e);c=g.adjustHeight(c);if(!d||!g.anim){g.dom.style.width=g.addUnits(e);g.dom.style.height=g.addUnits(c)}else{g.anim({width:{to:e},height:{to:c}},g.preanim(arguments,2))}return g},getComputedHeight:function(){var d=this,c=Math.max(d.dom.offsetHeight,d.dom.clientHeight);if(!c){c=parseFloat(d.getStyle(\"height\"))||0;if(!d.isBorderBox()){c+=d.getFrameWidth(\"tb\")}}return c},getComputedWidth:function(){var c=Math.max(this.dom.offsetWidth,this.dom.clientWidth);if(!c){c=parseFloat(this.getStyle(\"width\"))||0;if(!this.isBorderBox()){c+=this.getFrameWidth(\"lr\")}}return c},getFrameWidth:function(d,c){return c&&this.isBorderBox()?0:(this.getPadding(d)+this.getBorderWidth(d))},addClassOnOver:function(c){this.hover(function(){Ext.fly(this,a).addClass(c)},function(){Ext.fly(this,a).removeClass(c)});return this},addClassOnFocus:function(c){this.on(\"focus\",function(){Ext.fly(this,a).addClass(c)},this.dom);this.on(\"blur\",function(){Ext.fly(this,a).removeClass(c)},this.dom);return this},addClassOnClick:function(c){var d=this.dom;this.on(\"mousedown\",function(){Ext.fly(d,a).addClass(c);var g=Ext.getDoc(),e=function(){Ext.fly(d,a).removeClass(c);g.removeListener(\"mouseup\",e)};g.on(\"mouseup\",e)});return this},getViewSize:function(){var g=document,h=this.dom,c=(h==g||h==g.body);if(c){var e=Ext.lib.Dom;return{width:e.getViewWidth(),height:e.getViewHeight()}}else{return{width:h.clientWidth,height:h.clientHeight}}},getStyleSize:function(){var j=this,c,i,l=document,m=this.dom,e=(m==l||m==l.body),g=m.style;if(e){var k=Ext.lib.Dom;return{width:k.getViewWidth(),height:k.getViewHeight()}}if(g.width&&g.width!=\"auto\"){c=parseFloat(g.width);if(j.isBorderBox()){c-=j.getFrameWidth(\"lr\")}}if(g.height&&g.height!=\"auto\"){i=parseFloat(g.height);if(j.isBorderBox()){i-=j.getFrameWidth(\"tb\")}}return{width:c||j.getWidth(true),height:i||j.getHeight(true)}},getSize:function(c){return{width:this.getWidth(c),height:this.getHeight(c)}},repaint:function(){var c=this.dom;this.addClass(\"x-repaint\");setTimeout(function(){Ext.fly(c).removeClass(\"x-repaint\")},1);return this},unselectable:function(){this.dom.unselectable=\"on\";return this.swallowEvent(\"selectstart\",true).applyStyles(\"-moz-user-select:none;-khtml-user-select:none;\").addClass(\"x-unselectable\")},getMargins:function(d){var e=this,c,g={t:\"top\",l:\"left\",r:\"right\",b:\"bottom\"},h={};if(!d){for(c in e.margins){h[g[c]]=parseFloat(e.getStyle(e.margins[c]))||0}return h}else{return e.addStyles.call(e,d,e.margins)}}}}());Ext.Element.addMethods({setBox:function(e,g,b){var d=this,a=e.width,c=e.height;if((g&&!d.autoBoxAdjust)&&!d.isBorderBox()){a-=(d.getBorderWidth(\"lr\")+d.getPadding(\"lr\"));c-=(d.getBorderWidth(\"tb\")+d.getPadding(\"tb\"))}d.setBounds(e.x,e.y,a,c,d.animTest.call(d,arguments,b,2));return d},getBox:function(j,p){var m=this,v,e,o,d=m.getBorderWidth,q=m.getPadding,g,a,u,n;if(!p){v=m.getXY()}else{e=parseInt(m.getStyle(\"left\"),10)||0;o=parseInt(m.getStyle(\"top\"),10)||0;v=[e,o]}var c=m.dom,s=c.offsetWidth,i=c.offsetHeight,k;if(!j){k={x:v[0],y:v[1],0:v[0],1:v[1],width:s,height:i}}else{g=d.call(m,\"l\")+q.call(m,\"l\");a=d.call(m,\"r\")+q.call(m,\"r\");u=d.call(m,\"t\")+q.call(m,\"t\");n=d.call(m,\"b\")+q.call(m,\"b\");k={x:v[0]+g,y:v[1]+u,0:v[0]+g,1:v[1]+u,width:s-(g+a),height:i-(u+n)}}k.right=k.x+k.width;k.bottom=k.y+k.height;return k},move:function(j,b,c){var g=this,m=g.getXY(),k=m[0],i=m[1],d=[k-b,i],l=[k+b,i],h=[k,i-b],a=[k,i+b],e={l:d,left:d,r:l,right:l,t:h,top:h,up:h,b:a,bottom:a,down:a};j=j.toLowerCase();g.moveTo(e[j][0],e[j][1],g.animTest.call(g,arguments,c,2))},setLeftTop:function(d,c){var b=this,a=b.dom.style;a.left=b.addUnits(d);a.top=b.addUnits(c);return b},getRegion:function(){return Ext.lib.Dom.getRegion(this.dom)},setBounds:function(b,g,d,a,c){var e=this;if(!c||!e.anim){e.setSize(d,a);e.setLocation(b,g)}else{e.anim({points:{to:[b,g]},width:{to:e.adjustWidth(d)},height:{to:e.adjustHeight(a)}},e.preanim(arguments,4),\"motion\")}return e},setRegion:function(b,a){return this.setBounds(b.left,b.top,b.right-b.left,b.bottom-b.top,this.animTest.call(this,arguments,a,1))}});Ext.Element.addMethods({scrollTo:function(b,d,a){var e=/top/i.test(b),c=this,g=c.dom,h;if(!a||!c.anim){h=\"scroll\"+(e?\"Top\":\"Left\");g[h]=d}else{h=\"scroll\"+(e?\"Left\":\"Top\");c.anim({scroll:{to:e?[g[h],d]:[d,g[h]]}},c.preanim(arguments,2),\"scroll\")}return c},scrollIntoView:function(e,i){var p=Ext.getDom(e)||Ext.getBody().dom,h=this.dom,g=this.getOffsetsTo(p),k=g[0]+p.scrollLeft,u=g[1]+p.scrollTop,q=u+h.offsetHeight,d=k+h.offsetWidth,a=p.clientHeight,m=parseInt(p.scrollTop,10),s=parseInt(p.scrollLeft,10),j=m+a,n=s+p.clientWidth;if(h.offsetHeight>a||u<m){p.scrollTop=u}else{if(q>j){p.scrollTop=q-a}}p.scrollTop=p.scrollTop;if(i!==false){if(h.offsetWidth>p.clientWidth||k<s){p.scrollLeft=k}else{if(d>n){p.scrollLeft=d-p.clientWidth}}p.scrollLeft=p.scrollLeft}return this},scrollChildIntoView:function(b,a){Ext.fly(b,\"_scrollChildIntoView\").scrollIntoView(this,a)},scroll:function(m,b,d){if(!this.isScrollable()){return false}var e=this.dom,g=e.scrollLeft,p=e.scrollTop,n=e.scrollWidth,k=e.scrollHeight,i=e.clientWidth,a=e.clientHeight,c=false,o,j={l:Math.min(g+b,n-i),r:o=Math.max(g-b,0),t:Math.max(p-b,0),b:Math.min(p+b,k-a)};j.d=j.b;j.u=j.t;m=m.substr(0,1);if((o=j[m])>-1){c=true;this.scrollTo(m==\"l\"||m==\"r\"?\"left\":\"top\",o,this.preanim(arguments,2))}return c}});Ext.Element.addMethods(function(){var d=\"visibility\",b=\"display\",a=\"hidden\",h=\"none\",c=\"x-masked\",g=\"x-masked-relative\",e=Ext.Element.data;return{isVisible:function(i){var j=!this.isStyle(d,a)&&!this.isStyle(b,h),k=this.dom.parentNode;if(i!==true||!j){return j}while(k&&!(/^body/i.test(k.tagName))){if(!Ext.fly(k,\"_isVisible\").isVisible()){return false}k=k.parentNode}return true},isDisplayed:function(){return !this.isStyle(b,h)},enableDisplayMode:function(i){this.setVisibilityMode(Ext.Element.DISPLAY);if(!Ext.isEmpty(i)){e(this.dom,\"originalDisplay\",i)}return this},mask:function(j,n){var p=this,l=p.dom,o=Ext.DomHelper,m=\"ext-el-mask-msg\",i,q;if(!/^body/i.test(l.tagName)&&p.getStyle(\"position\")==\"static\"){p.addClass(g)}if(i=e(l,\"maskMsg\")){i.remove()}if(i=e(l,\"mask\")){i.remove()}q=o.append(l,{cls:\"ext-el-mask\"},true);e(l,\"mask\",q);p.addClass(c);q.setDisplayed(true);if(typeof j==\"string\"){var k=o.append(l,{cls:m,cn:{tag:\"div\"}},true);e(l,\"maskMsg\",k);k.dom.className=n?m+\" \"+n:m;k.dom.firstChild.innerHTML=j;k.setDisplayed(true);k.center(p)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&p.getStyle(\"height\")==\"auto\"){q.setSize(undefined,p.getHeight())}return q},unmask:function(){var k=this,l=k.dom,i=e(l,\"mask\"),j=e(l,\"maskMsg\");if(i){if(j){j.remove();e(l,\"maskMsg\",undefined)}i.remove();e(l,\"mask\",undefined);k.removeClass([c,g])}},isMasked:function(){var i=e(this.dom,\"mask\");return i&&i.isVisible()},createShim:function(){var i=document.createElement(\"iframe\"),j;i.frameBorder=\"0\";i.className=\"ext-shim\";i.src=Ext.SSL_SECURE_URL;j=Ext.get(this.dom.parentNode.insertBefore(i,this.dom));j.autoBoxAdjust=false;return j}}}());Ext.Element.addMethods({addKeyListener:function(b,d,c){var a;if(typeof b!=\"object\"||Ext.isArray(b)){a={key:b,fn:d,scope:c}}else{a={key:b.key,shift:b.shift,ctrl:b.ctrl,alt:b.alt,fn:d,scope:c}}return new Ext.KeyMap(this,a)},addKeyMap:function(a){return new Ext.KeyMap(this,a)}});Ext.CompositeElementLite.importElementMethods();Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(c,a){if(!c){return this}if(typeof c==\"string\"){c=Ext.Element.selectorFunction(c,a)}var b=this.elements;Ext.each(c,function(d){b.push(Ext.get(d))});return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(d,e){var c=this,a=this.elements,b;Ext.each(d,function(g){if((b=(a[g]||a[g=c.indexOf(g)]))){if(e){if(b.dom){b.remove()}else{Ext.removeNode(b)}}a.splice(g,1)}});return this}});Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(b,a){this.elements=[];this.add(b,a)},getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}});Ext.Element.select=function(a,d,b){var c;if(typeof a==\"string\"){c=Ext.Element.selectorFunction(a,b)}else{if(a.length!==undefined){c=a}else{throw\"Invalid selector\"}}return(d===true)?new Ext.CompositeElement(c):new Ext.CompositeElementLite(c)};Ext.select=Ext.Element.select;Ext.UpdateManager=Ext.Updater=Ext.extend(Ext.util.Observable,function(){var b=\"beforeupdate\",d=\"update\",c=\"failure\";function a(h){var i=this;i.transaction=null;if(h.argument.form&&h.argument.reset){try{h.argument.form.reset()}catch(j){}}if(i.loadScripts){i.renderer.render(i.el,h,i,g.createDelegate(i,[h]))}else{i.renderer.render(i.el,h,i);g.call(i,h)}}function g(h,i,j){this.fireEvent(i||d,this.el,h);if(Ext.isFunction(h.argument.callback)){h.argument.callback.call(h.argument.scope,this.el,Ext.isEmpty(j)?true:false,h,h.argument.options)}}function e(h){g.call(this,h,c,!!(this.transaction=null))}return{constructor:function(i,h){var j=this;i=Ext.get(i);if(!h&&i.updateManager){return i.updateManager}j.el=i;j.defaultUrl=null;j.addEvents(b,d,c);Ext.apply(j,Ext.Updater.defaults);j.transaction=null;j.refreshDelegate=j.refresh.createDelegate(j);j.updateDelegate=j.update.createDelegate(j);j.formUpdateDelegate=(j.formUpdate||function(){}).createDelegate(j);j.renderer=j.renderer||j.getDefaultRenderer();Ext.Updater.superclass.constructor.call(j)},setRenderer:function(h){this.renderer=h},getRenderer:function(){return this.renderer},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer()},setDefaultUrl:function(h){this.defaultUrl=h},getEl:function(){return this.el},update:function(i,n,p,l){var k=this,h,j;if(k.fireEvent(b,k.el,i,n)!==false){if(Ext.isObject(i)){h=i;i=h.url;n=n||h.params;p=p||h.callback;l=l||h.discardUrl;j=h.scope;if(!Ext.isEmpty(h.nocache)){k.disableCaching=h.nocache}if(!Ext.isEmpty(h.text)){k.indicatorText='<div class=\"loading-indicator\">'+h.text+\"</div>\"}if(!Ext.isEmpty(h.scripts)){k.loadScripts=h.scripts}if(!Ext.isEmpty(h.timeout)){k.timeout=h.timeout}}k.showLoading();if(!l){k.defaultUrl=i}if(Ext.isFunction(i)){i=i.call(k)}var m=Ext.apply({},{url:i,params:(Ext.isFunction(n)&&j)?n.createDelegate(j):n,success:a,failure:e,scope:k,callback:undefined,timeout:(k.timeout*1000),disableCaching:k.disableCaching,argument:{options:h,url:i,form:null,callback:p,scope:j||window,params:n}},h);k.transaction=Ext.Ajax.request(m)}},formUpdate:function(k,h,j,l){var i=this;if(i.fireEvent(b,i.el,k,h)!==false){if(Ext.isFunction(h)){h=h.call(i)}k=Ext.getDom(k);i.transaction=Ext.Ajax.request({form:k,url:h,success:a,failure:e,scope:i,timeout:(i.timeout*1000),argument:{url:h,form:k,callback:l,reset:j}});i.showLoading.defer(1,i)}},startAutoRefresh:function(i,j,l,m,h){var k=this;if(h){k.update(j||k.defaultUrl,l,m,true)}if(k.autoRefreshProcId){clearInterval(k.autoRefreshProcId)}k.autoRefreshProcId=setInterval(k.update.createDelegate(k,[j||k.defaultUrl,l,m,true]),i*1000)},stopAutoRefresh:function(){if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId);delete this.autoRefreshProcId}},isAutoRefreshing:function(){return !!this.autoRefreshProcId},showLoading:function(){if(this.showLoadIndicator){this.el.dom.innerHTML=this.indicatorText}},abort:function(){if(this.transaction){Ext.Ajax.abort(this.transaction)}},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):false},refresh:function(h){if(this.defaultUrl){this.update(this.defaultUrl,null,h,true)}}}}());Ext.Updater.defaults={timeout:30,disableCaching:false,showLoadIndicator:true,indicatorText:'<div class=\"loading-indicator\">Loading...</div>',loadScripts:false,sslBlankUrl:Ext.SSL_SECURE_URL};Ext.Updater.updateElement=function(d,c,e,b){var a=Ext.get(d).getUpdater();Ext.apply(a,b);a.update(c,e,b?b.callback:null)};Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(c,a,b,d){c.update(a.responseText,b.loadScripts,d)}};(function(){Date.useStrict=false;function b(d){var c=Array.prototype.slice.call(arguments,1);return d.replace(/\\{(\\d+)\\}/g,function(e,g){return c[g]})}Date.formatCodeToRegex=function(d,c){var e=Date.parseCodes[d];if(e){e=typeof e==\"function\"?e():e;Date.parseCodes[d]=e}return e?Ext.applyIf({c:e.c?b(e.c,c||\"{0}\"):e.c},e):{g:0,c:null,s:Ext.escapeRe(d)}};var a=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{\"M$\":function(d,c){var e=new RegExp(\"\\\\/Date\\\\(([-+])?(\\\\d+)(?:[+-]\\\\d{4})?\\\\)\\\\/\");var g=(d||\"\").match(e);return g?new Date(((g[1]||\"\")+g[2])*1):null}},parseRegexes:[],formatFunctions:{\"M$\":function(){return\"\\\\/Date(\"+this.getTime()+\")\\\\/\"}},y2kYear:50,MILLI:\"ms\",SECOND:\"s\",MINUTE:\"mi\",HOUR:\"h\",DAY:\"d\",MONTH:\"mo\",YEAR:\"y\",defaults:{},dayNames:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],monthNames:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(c){return Date.monthNames[c].substring(0,3)},getShortDayName:function(c){return Date.dayNames[c].substring(0,3)},getMonthNumber:function(c){return Date.monthNumbers[c.substring(0,1).toUpperCase()+c.substring(1,3).toLowerCase()]},formatContainsHourInfo:(function(){var d=/(\\\\.)/g,c=/([gGhHisucUOPZ]|M\\$)/;return function(e){return c.test(e.replace(d,\"\"))}})(),formatCodes:{d:\"String.leftPad(this.getDate(), 2, '0')\",D:\"Date.getShortDayName(this.getDay())\",j:\"this.getDate()\",l:\"Date.dayNames[this.getDay()]\",N:\"(this.getDay() ? this.getDay() : 7)\",S:\"this.getSuffix()\",w:\"this.getDay()\",z:\"this.getDayOfYear()\",W:\"String.leftPad(this.getWeekOfYear(), 2, '0')\",F:\"Date.monthNames[this.getMonth()]\",m:\"String.leftPad(this.getMonth() + 1, 2, '0')\",M:\"Date.getShortMonthName(this.getMonth())\",n:\"(this.getMonth() + 1)\",t:\"this.getDaysInMonth()\",L:\"(this.isLeapYear() ? 1 : 0)\",o:\"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))\",Y:\"String.leftPad(this.getFullYear(), 4, '0')\",y:\"('' + this.getFullYear()).substring(2, 4)\",a:\"(this.getHours() < 12 ? 'am' : 'pm')\",A:\"(this.getHours() < 12 ? 'AM' : 'PM')\",g:\"((this.getHours() % 12) ? this.getHours() % 12 : 12)\",G:\"this.getHours()\",h:\"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')\",H:\"String.leftPad(this.getHours(), 2, '0')\",i:\"String.leftPad(this.getMinutes(), 2, '0')\",s:\"String.leftPad(this.getSeconds(), 2, '0')\",u:\"String.leftPad(this.getMilliseconds(), 3, '0')\",O:\"this.getGMTOffset()\",P:\"this.getGMTOffset(true)\",T:\"this.getTimezone()\",Z:\"(this.getTimezoneOffset() * -60)\",c:function(){for(var k=\"Y-m-dTH:i:sP\",h=[],g=0,d=k.length;g<d;++g){var j=k.charAt(g);h.push(j==\"T\"?\"'T'\":Date.getFormatCode(j))}return h.join(\" + \")},U:\"Math.round(this.getTime() / 1000)\"},isValid:function(o,c,n,k,g,j,e){k=k||0;g=g||0;j=j||0;e=e||0;var l=new Date(o<100?100:o,c-1,n,k,g,j,e).add(Date.YEAR,o<100?o-100:0);return o==l.getFullYear()&&c==l.getMonth()+1&&n==l.getDate()&&k==l.getHours()&&g==l.getMinutes()&&j==l.getSeconds()&&e==l.getMilliseconds()},parseDate:function(d,g,c){var e=Date.parseFunctions;if(e[g]==null){Date.createParser(g)}return e[g](d,Ext.isDefined(c)?c:Date.useStrict)},getFormatCode:function(d){var c=Date.formatCodes[d];if(c){c=typeof c==\"function\"?c():c;Date.formatCodes[d]=c}return c||(\"'\"+String.escape(d)+\"'\")},createFormat:function(h){var g=[],c=false,e=\"\";for(var d=0;d<h.length;++d){e=h.charAt(d);if(!c&&e==\"\\\\\"){c=true}else{if(c){c=false;g.push(\"'\"+String.escape(e)+\"'\")}else{g.push(Date.getFormatCode(e))}}}Date.formatFunctions[h]=new Function(\"return \"+g.join(\"+\"))},createParser:function(){var c=[\"var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,\",\"def = Date.defaults,\",\"results = String(input).match(Date.parseRegexes[{0}]);\",\"if(results){\",\"{1}\",\"if(u != null){\",\"v = new Date(u * 1000);\",\"}else{\",\"dt = (new Date()).clearTime();\",\"y = Ext.num(y, Ext.num(def.y, dt.getFullYear()));\",\"m = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));\",\"d = Ext.num(d, Ext.num(def.d, dt.getDate()));\",\"h  = Ext.num(h, Ext.num(def.h, dt.getHours()));\",\"i  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));\",\"s  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));\",\"ms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));\",\"if(z >= 0 && y >= 0){\",\"v = new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);\",\"v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);\",\"}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){\",\"v = null;\",\"}else{\",\"v = new Date(y < 100 ? 100 : y, m, d, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);\",\"}\",\"}\",\"}\",\"if(v){\",\"if(zz != null){\",\"v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);\",\"}else if(o){\",\"v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));\",\"}\",\"}\",\"return v;\"].join(\"\\n\");return function(m){var e=Date.parseRegexes.length,o=1,g=[],l=[],k=false,d=\"\",j=0,h,n;for(;j<m.length;++j){d=m.charAt(j);if(!k&&d==\"\\\\\"){k=true}else{if(k){k=false;l.push(String.escape(d))}else{h=a(d,o);o+=h.g;l.push(h.s);if(h.g&&h.c){if(h.calcLast){n=h.c}else{g.push(h.c)}}}}}if(n){g.push(n)}Date.parseRegexes[e]=new RegExp(\"^\"+l.join(\"\")+\"$\",\"i\");Date.parseFunctions[m]=new Function(\"input\",\"strict\",b(c,e,g.join(\"\")))}}(),parseCodes:{d:{g:1,c:\"d = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{2})\"},j:{g:1,c:\"d = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{1,2})\"},D:function(){for(var c=[],d=0;d<7;c.push(Date.getShortDayName(d)),++d){}return{g:0,c:null,s:\"(?:\"+c.join(\"|\")+\")\"}},l:function(){return{g:0,c:null,s:\"(?:\"+Date.dayNames.join(\"|\")+\")\"}},N:{g:0,c:null,s:\"[1-7]\"},S:{g:0,c:null,s:\"(?:st|nd|rd|th)\"},w:{g:0,c:null,s:\"[0-6]\"},z:{g:1,c:\"z = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{1,3})\"},W:{g:0,c:null,s:\"(?:\\\\d{2})\"},F:function(){return{g:1,c:\"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\\n\",s:\"(\"+Date.monthNames.join(\"|\")+\")\"}},M:function(){for(var c=[],d=0;d<12;c.push(Date.getShortMonthName(d)),++d){}return Ext.applyIf({s:\"(\"+c.join(\"|\")+\")\"},a(\"F\"))},m:{g:1,c:\"m = parseInt(results[{0}], 10) - 1;\\n\",s:\"(\\\\d{2})\"},n:{g:1,c:\"m = parseInt(results[{0}], 10) - 1;\\n\",s:\"(\\\\d{1,2})\"},t:{g:0,c:null,s:\"(?:\\\\d{2})\"},L:{g:0,c:null,s:\"(?:1|0)\"},o:function(){return a(\"Y\")},Y:{g:1,c:\"y = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{4})\"},y:{g:1,c:\"var ty = parseInt(results[{0}], 10);\\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\\n\",s:\"(\\\\d{1,2})\"},a:function(){return a(\"A\")},A:{calcLast:true,g:1,c:\"if (/(am)/i.test(results[{0}])) {\\nif (!h || h == 12) { h = 0; }\\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}\",s:\"(AM|PM|am|pm)\"},g:function(){return a(\"G\")},G:{g:1,c:\"h = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{1,2})\"},h:function(){return a(\"H\")},H:{g:1,c:\"h = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{2})\"},i:{g:1,c:\"i = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{2})\"},s:{g:1,c:\"s = parseInt(results[{0}], 10);\\n\",s:\"(\\\\d{2})\"},u:{g:1,c:\"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\\n\",s:\"(\\\\d+)\"},O:{g:1,c:[\"o = results[{0}];\",\"var sn = o.substring(0,1),\",\"hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),\",\"mn = o.substring(3,5) % 60;\",\"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\\n\"].join(\"\\n\"),s:\"([+-]\\\\d{4})\"},P:{g:1,c:[\"o = results[{0}];\",\"var sn = o.substring(0,1),\",\"hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),\",\"mn = o.substring(4,6) % 60;\",\"o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\\n\"].join(\"\\n\"),s:\"([+-]\\\\d{2}:\\\\d{2})\"},T:{g:0,c:null,s:\"[A-Z]{1,4}\"},Z:{g:1,c:\"zz = results[{0}] * 1;\\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\\n\",s:\"([+-]?\\\\d{1,5})\"},c:function(){var e=[],c=[a(\"Y\",1),a(\"m\",2),a(\"d\",3),a(\"h\",4),a(\"i\",5),a(\"s\",6),{c:\"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\\n\"},{c:[\"if(results[8]) {\",\"if(results[8] == 'Z'){\",\"zz = 0;\",\"}else if (results[8].indexOf(':') > -1){\",a(\"P\",8).c,\"}else{\",a(\"O\",8).c,\"}\",\"}\"].join(\"\\n\")}];for(var g=0,d=c.length;g<d;++g){e.push(c[g].c)}return{g:1,c:e.join(\"\"),s:[c[0].s,\"(?:\",\"-\",c[1].s,\"(?:\",\"-\",c[2].s,\"(?:\",\"(?:T| )?\",c[3].s,\":\",c[4].s,\"(?::\",c[5].s,\")?\",\"(?:(?:\\\\.|,)(\\\\d+))?\",\"(Z|(?:[-+]\\\\d{2}(?::)?\\\\d{2}))?\",\")?\",\")?\",\")?\"].join(\"\")}},U:{g:1,c:\"u = parseInt(results[{0}], 10);\\n\",s:\"(-?\\\\d+)\"}}})}());Ext.apply(Date.prototype,{dateFormat:function(a){if(Date.formatFunctions[a]==null){Date.createFormat(a)}return Date.formatFunctions[a].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\\((.*)\\)|([A-Z]{1,4})(?:[\\-+][0-9]{4})?(?: -?\\d+)?)$/,\"$1$2\").replace(/[^A-Z]/g,\"\")},getGMTOffset:function(a){return(this.getTimezoneOffset()>0?\"-\":\"+\")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,\"0\")+(a?\":\":\"\")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,\"0\")},getDayOfYear:function(){var b=0,e=this.clone(),a=this.getMonth(),c;for(c=0,e.setDate(1),e.setMonth(0);c<a;e.setMonth(++c)){b+=e.getDaysInMonth()}return b+this.getDate()-1},getWeekOfYear:function(){var a=86400000,b=7*a;return function(){var d=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/a,c=Math.floor(d/7),e=new Date(c*b).getUTCFullYear();return c-Math.floor(Date.UTC(e,0,7)/b)+1}}(),isLeapYear:function(){var a=this.getFullYear();return !!((a&3)==0&&(a%100||(a%400==0&&a)))},getFirstDayOfMonth:function(){var a=(this.getDay()-(this.getDate()-1))%7;return(a<0)?(a+7):a},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var b=this.getMonth();return b==1&&this.isLeapYear()?29:a[b]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return\"st\";case 2:case 22:return\"nd\";case 3:case 23:return\"rd\";default:return\"th\"}},clone:function(){return new Date(this.getTime())},isDST:function(){return new Date(this.getFullYear(),0,1).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(g){if(g){return this.clone().clearTime()}var b=this.getDate();this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);if(this.getDate()!=b){for(var a=1,e=this.add(Date.HOUR,a);e.getDate()!=b;a++,e=this.add(Date.HOUR,a)){}this.setDate(b);this.setHours(e.getHours())}return this},add:function(b,c){var e=this.clone();if(!b||c===0){return e}switch(b.toLowerCase()){case Date.MILLI:e.setMilliseconds(this.getMilliseconds()+c);break;case Date.SECOND:e.setSeconds(this.getSeconds()+c);break;case Date.MINUTE:e.setMinutes(this.getMinutes()+c);break;case Date.HOUR:e.setHours(this.getHours()+c);break;case Date.DAY:e.setDate(this.getDate()+c);break;case Date.MONTH:var a=this.getDate();if(a>28){a=Math.min(a,this.getFirstDateOfMonth().add(\"mo\",c).getLastDateOfMonth().getDate())}e.setDate(a);e.setMonth(this.getMonth()+c);break;case Date.YEAR:e.setFullYear(this.getFullYear()+c);break}return e},between:function(c,a){var b=this.getTime();return c.getTime()<=b&&b<=a.getTime()}});Date.prototype.format=Date.prototype.dateFormat;if(Ext.isSafari&&(navigator.userAgent.match(/WebKit\\/(\\d+)/)[1]||NaN)<420){Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(a){if(a<=-1){var d=Math.ceil(-a),c=Math.ceil(d/12),b=(d%12)?12-d%12:0;this.setFullYear(this.getFullYear()-c);return this._xMonth(b)}else{return this._xMonth(a)}},setDate:function(a){return this.setTime(this.getTime()-(this.getDate()-a)*86400000)}})}Ext.util.MixedCollection=function(b,a){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents(\"clear\",\"add\",\"replace\",\"remove\",\"sort\");this.allowFunctions=b===true;if(a){this.getKey=a}Ext.util.MixedCollection.superclass.constructor.call(this)};Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:false,add:function(b,c){if(arguments.length==1){c=arguments[0];b=this.getKey(c)}if(typeof b!=\"undefined\"&&b!==null){var a=this.map[b];if(typeof a!=\"undefined\"){return this.replace(b,c)}this.map[b]=c}this.length++;this.items.push(c);this.keys.push(b);this.fireEvent(\"add\",this.length-1,c,b);return c},getKey:function(a){return a.id},replace:function(c,d){if(arguments.length==1){d=arguments[0];c=this.getKey(d)}var a=this.map[c];if(typeof c==\"undefined\"||c===null||typeof a==\"undefined\"){return this.add(c,d)}var b=this.indexOfKey(c);this.items[b]=d;this.map[c]=d;this.fireEvent(\"replace\",c,a,d);return d},addAll:function(e){if(arguments.length>1||Ext.isArray(e)){var b=arguments.length>1?arguments:e;for(var d=0,a=b.length;d<a;d++){this.add(b[d])}}else{for(var c in e){if(this.allowFunctions||typeof e[c]!=\"function\"){this.add(c,e[c])}}}},each:function(e,d){var b=[].concat(this.items);for(var c=0,a=b.length;c<a;c++){if(e.call(d||b[c],b[c],c,a)===false){break}}},eachKey:function(d,c){for(var b=0,a=this.keys.length;b<a;b++){d.call(c||window,this.keys[b],this.items[b],b,a)}},find:function(d,c){for(var b=0,a=this.items.length;b<a;b++){if(d.call(c||window,this.items[b],this.keys[b])){return this.items[b]}}return null},insert:function(a,b,c){if(arguments.length==2){c=arguments[1];b=this.getKey(c)}if(this.containsKey(b)){this.suspendEvents();this.removeKey(b);this.resumeEvents()}if(a>=this.length){return this.add(b,c)}this.length++;this.items.splice(a,0,c);if(typeof b!=\"undefined\"&&b!==null){this.map[b]=c}this.keys.splice(a,0,b);this.fireEvent(\"add\",a,c,b);return c},remove:function(a){return this.removeAt(this.indexOf(a))},removeAt:function(a){if(a<this.length&&a>=0){this.length--;var c=this.items[a];this.items.splice(a,1);var b=this.keys[a];if(typeof b!=\"undefined\"){delete this.map[b]}this.keys.splice(a,1);this.fireEvent(\"remove\",c,b);return c}return false},removeKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:function(a){return this.items.indexOf(a)},indexOfKey:function(a){return this.keys.indexOf(a)},item:function(b){var a=this.map[b],c=a!==undefined?a:(typeof b==\"number\")?this.items[b]:undefined;return typeof c!=\"function\"||this.allowFunctions?c:null},itemAt:function(a){return this.items[a]},key:function(a){return this.map[a]},contains:function(a){return this.indexOf(a)!=-1},containsKey:function(a){return typeof this.map[a]!=\"undefined\"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent(\"clear\")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(k,a,j){var d,e,b=String(a).toUpperCase()==\"DESC\"?-1:1,h=[],l=this.keys,g=this.items;j=j||function(i,c){return i-c};for(d=0,e=g.length;d<e;d++){h[h.length]={key:l[d],value:g[d],index:d}}h.sort(function(i,c){var m=j(i[k],c[k])*b;if(m===0){m=(i.index<c.index?-1:1)}return m});for(d=0,e=h.length;d<e;d++){g[d]=h[d].value;l[d]=h[d].key}this.fireEvent(\"sort\",this)},sort:function(a,b){this._sort(\"value\",a,b)},reorder:function(d){this.suspendEvents();var b=this.items,c=0,g=b.length,a=[],e=[],h;for(h in d){a[d[h]]=b[h]}for(c=0;c<g;c++){if(d[c]==undefined){e.push(b[c])}}for(c=0;c<g;c++){if(a[c]==undefined){a[c]=e.shift()}}this.clear();this.addAll(a);this.resumeEvents();this.fireEvent(\"sort\",this)},keySort:function(a,b){this._sort(\"key\",a,b||function(d,c){var g=String(d).toUpperCase(),e=String(c).toUpperCase();return g>e?1:(g<e?-1:0)})},getRange:function(e,a){var b=this.items;if(b.length<1){return[]}e=e||0;a=Math.min(typeof a==\"undefined\"?this.length-1:a,this.length-1);var c,d=[];if(e<=a){for(c=e;c<=a;c++){d[d.length]=b[c]}}else{for(c=e;c>=a;c--){d[d.length]=b[c]}}return d},filter:function(c,b,d,a){if(Ext.isEmpty(b,false)){return this.clone()}b=this.createValueMatcher(b,d,a);return this.filterBy(function(e){return e&&b.test(e[c])})},filterBy:function(g,e){var h=new Ext.util.MixedCollection();h.getKey=this.getKey;var b=this.keys,d=this.items;for(var c=0,a=d.length;c<a;c++){if(g.call(e||this,d[c],b[c])){h.add(b[c],d[c])}}return h},findIndex:function(c,b,e,d,a){if(Ext.isEmpty(b,false)){return -1}b=this.createValueMatcher(b,d,a);return this.findIndexBy(function(g){return g&&b.test(g[c])},null,e)},findIndexBy:function(g,e,h){var b=this.keys,d=this.items;for(var c=(h||0),a=d.length;c<a;c++){if(g.call(e||this,d[c],b[c])){return c}}return -1},createValueMatcher:function(c,e,a,b){if(!c.exec){var d=Ext.escapeRe;c=String(c);if(e===true){c=d(c)}else{c=\"^\"+d(c);if(b===true){c+=\"$\"}}c=new RegExp(c,a?\"\":\"i\")}return c},clone:function(){var e=new Ext.util.MixedCollection();var b=this.keys,d=this.items;for(var c=0,a=d.length;c<a;c++){e.add(b[c],d[c])}e.getKey=this.getKey;return e}});Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item;Ext.AbstractManager=Ext.extend(Object,{typeName:\"type\",constructor:function(a){Ext.apply(this,a||{});this.all=new Ext.util.MixedCollection();this.types={}},get:function(a){return this.all.get(a)},register:function(a){this.all.add(a)},unregister:function(a){this.all.remove(a)},registerType:function(b,a){this.types[b]=a;a[this.typeName]=b},isRegistered:function(a){return this.types[a]!==undefined},create:function(a,d){var b=a[this.typeName]||a.type||d,c=this.types[b];if(c==undefined){throw new Error(String.format(\"The '{0}' type has not been registered with this manager\",b))}return new c(a)},onAvailable:function(d,c,b){var a=this.all;a.on(\"add\",function(e,g){if(g.id==d){c.call(b||g,g);a.un(\"add\",c,b)}})}});Ext.util.Format=function(){var trimRe=/^\\s+|\\s+$/g,stripTagsRE=/<\\/?[^>]+>/gi,stripScriptsRe=/(?:<script.*?>)((\\n|\\r|.)*?)(?:<\\/script>)/ig,nl2brRe=/\\r?\\n/g;return{ellipsis:function(value,len,word){if(value&&value.length>len){if(word){var vs=value.substr(0,len-2),index=Math.max(vs.lastIndexOf(\" \"),vs.lastIndexOf(\".\"),vs.lastIndexOf(\"!\"),vs.lastIndexOf(\"?\"));if(index==-1||index<(len-15)){return value.substr(0,len-3)+\"...\"}else{return vs.substr(0,index)+\"...\"}}else{return value.substr(0,len-3)+\"...\"}}return value},undef:function(value){return value!==undefined?value:\"\"},defaultValue:function(value,defaultValue){return value!==undefined&&value!==\"\"?value:defaultValue},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,\"&amp;\").replace(/>/g,\"&gt;\").replace(/</g,\"&lt;\").replace(/\"/g,\"&quot;\")},htmlDecode:function(value){return !value?value:String(value).replace(/&gt;/g,\">\").replace(/&lt;/g,\"<\").replace(/&quot;/g,'\"').replace(/&amp;/g,\"&\")},trim:function(value){return String(value).replace(trimRe,\"\")},substr:function(value,start,length){return String(value).substr(start,length)},lowercase:function(value){return String(value).toLowerCase()},uppercase:function(value){return String(value).toUpperCase()},capitalize:function(value){return !value?value:value.charAt(0).toUpperCase()+value.substr(1).toLowerCase()},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);args.unshift(value);return eval(fn).apply(window,args)}else{return eval(fn).call(window,value)}},usMoney:function(v){v=(Math.round((v-0)*100))/100;v=(v==Math.floor(v))?v+\".00\":((v*10==Math.floor(v*10))?v+\"0\":v);v=String(v);var ps=v.split(\".\"),whole=ps[0],sub=ps[1]?\".\"+ps[1]:\".00\",r=/(\\d+)(\\d{3})/;while(r.test(whole)){whole=whole.replace(r,\"$1,$2\")}v=whole+sub;if(v.charAt(0)==\"-\"){return\"-$\"+v.substr(1)}return\"$\"+v},date:function(v,format){if(!v){return\"\"}if(!Ext.isDate(v)){v=new Date(Date.parse(v))}return v.dateFormat(format||\"m/d/Y\")},dateRenderer:function(format){return function(v){return Ext.util.Format.date(v,format)}},stripTags:function(v){return !v?v:String(v).replace(stripTagsRE,\"\")},stripScripts:function(v){return !v?v:String(v).replace(stripScriptsRe,\"\")},fileSize:function(size){if(size<1024){return size+\" bytes\"}else{if(size<1048576){return(Math.round(((size*10)/1024))/10)+\" KB\"}else{return(Math.round(((size*10)/1048576))/10)+\" MB\"}}},math:function(){var fns={};return function(v,a){if(!fns[a]){fns[a]=new Function(\"v\",\"return v \"+a+\";\")}return fns[a](v)}}(),round:function(value,precision){var result=Number(value);if(typeof precision==\"number\"){precision=Math.pow(10,precision);result=Math.round(value*precision)/precision}return result},number:function(v,format){if(!format){return v}v=Ext.num(v,NaN);if(isNaN(v)){return\"\"}var comma=\",\",dec=\".\",i18n=false,neg=v<0;v=Math.abs(v);if(format.substr(format.length-2)==\"/i\"){format=format.substr(0,format.length-2);i18n=true;comma=\".\";dec=\",\"}var hasComma=format.indexOf(comma)!=-1,psplit=(i18n?format.replace(/[^\\d\\,]/g,\"\"):format.replace(/[^\\d\\.]/g,\"\")).split(dec);if(1<psplit.length){v=v.toFixed(psplit[1].length)}else{if(2<psplit.length){throw (\"NumberFormatException: invalid format, formats should have no more than 1 period: \"+format)}else{v=v.toFixed(0)}}var fnum=v.toString();psplit=fnum.split(\".\");if(hasComma){var cnum=psplit[0],parr=[],j=cnum.length,m=Math.floor(j/3),n=cnum.length%3||3,i;for(i=0;i<j;i+=n){if(i!=0){n=3}parr[parr.length]=cnum.substr(i,n);m-=1}fnum=parr.join(comma);if(psplit[1]){fnum+=dec+psplit[1]}}else{if(psplit[1]){fnum=psplit[0]+dec+psplit[1]}}return(neg?\"-\":\"\")+format.replace(/[\\d,?\\.?]+/,fnum)},numberRenderer:function(format){return function(v){return Ext.util.Format.number(v,format)}},plural:function(v,s,p){return v+\" \"+(v==1?s:(p?p:s+\"s\"))},nl2br:function(v){return Ext.isEmpty(v)?\"\":v.replace(nl2brRe,\"<br/>\")}}}();Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var y=this,j=y.html,q=/<tpl\\b[^>]*>((?:(?=([^<]+))\\2|<(?!tpl\\b[^>]*>))*?)<\\/tpl>/,d=/^<tpl\\b[^>]*?for=\"(.*?)\"/,v=/^<tpl\\b[^>]*?if=\"(.*?)\"/,x=/^<tpl\\b[^>]*?exec=\"(.*?)\"/,r,p=0,k=[],o=\"values\",w=\"parent\",l=\"xindex\",n=\"xcount\",e=\"return \",c=\"with(values){ \";j=[\"<tpl>\",j,\"</tpl>\"].join(\"\");while((r=j.match(q))){var b=r[0].match(d),a=r[0].match(v),A=r[0].match(x),g=null,h=null,t=null,z=b&&b[1]?b[1]:\"\";if(a){g=a&&a[1]?a[1]:null;if(g){h=new Function(o,w,l,n,c+e+(Ext.util.Format.htmlDecode(g))+\"; }\")}}if(A){g=A&&A[1]?A[1]:null;if(g){t=new Function(o,w,l,n,c+(Ext.util.Format.htmlDecode(g))+\"; }\")}}if(z){switch(z){case\".\":z=new Function(o,w,c+e+o+\"; }\");break;case\"..\":z=new Function(o,w,c+e+w+\"; }\");break;default:z=new Function(o,w,c+e+z+\"; }\")}}k.push({id:p,target:z,exec:t,test:h,body:r[1]||\"\"});j=j.replace(r[0],\"{xtpl\"+p+\"}\");++p}for(var u=k.length-1;u>=0;--u){y.compileTpl(k[u])}y.master=k[k.length-1];y.tpls=k};Ext.extend(Ext.XTemplate,Ext.Template,{re:/\\{([\\w\\-\\.\\#]+)(?:\\:([\\w\\.]*)(?:\\((.*?)?\\))?)?(\\s?[\\+\\-\\*\\\\]\\s?[\\d\\.\\+\\-\\*\\\\\\(\\)]+)?\\}/g,codeRe:/\\{\\[((?:\\\\\\]|.|\\n)*?)\\]\\}/g,applySubTemplate:function(a,k,j,d,c){var h=this,g,m=h.tpls[a],l,b=[];if((m.test&&!m.test.call(h,k,j,d,c))||(m.exec&&m.exec.call(h,k,j,d,c))){return\"\"}l=m.target?m.target.call(h,k,j):k;g=l.length;j=m.target?k:j;if(m.target&&Ext.isArray(l)){for(var e=0,g=l.length;e<g;e++){b[b.length]=m.compiled.call(h,l[e],j,e+1,g)}return b.join(\"\")}return m.compiled.call(h,l,j,d,c)},compileTpl:function(tpl){var fm=Ext.util.Format,useF=this.disableFormats!==true,sep=Ext.isGecko?\"+\":\",\",body;function fn(m,name,format,args,math){if(name.substr(0,4)==\"xtpl\"){return\"'\"+sep+\"this.applySubTemplate(\"+name.substr(4)+\", values, parent, xindex, xcount)\"+sep+\"'\"}var v;if(name===\".\"){v=\"values\"}else{if(name===\"#\"){v=\"xindex\"}else{if(name.indexOf(\".\")!=-1){v=name}else{v=\"values['\"+name+\"']\"}}}if(math){v=\"(\"+v+math+\")\"}if(format&&useF){args=args?\",\"+args:\"\";if(format.substr(0,5)!=\"this.\"){format=\"fm.\"+format+\"(\"}else{format='this.call(\"'+format.substr(5)+'\", ';args=\", values\"}}else{args=\"\";format=\"(\"+v+\" === undefined ? '' : \"}return\"'\"+sep+format+v+args+\")\"+sep+\"'\"}function codeFn(m,code){return\"'\"+sep+\"(\"+code.replace(/\\\\'/g,\"'\")+\")\"+sep+\"'\"}if(Ext.isGecko){body=\"tpl.compiled = function(values, parent, xindex, xcount){ return '\"+tpl.body.replace(/(\\r\\n|\\n)/g,\"\\\\n\").replace(/'/g,\"\\\\'\").replace(this.re,fn).replace(this.codeRe,codeFn)+\"';};\"}else{body=[\"tpl.compiled = function(values, parent, xindex, xcount){ return ['\"];body.push(tpl.body.replace(/(\\r\\n|\\n)/g,\"\\\\n\").replace(/'/g,\"\\\\'\").replace(this.re,fn).replace(this.codeRe,codeFn));body.push(\"'].join('');};\");body=body.join(\"\")}eval(body);return this},applyTemplate:function(a){return this.master.compiled.call(this,a,{},1,1)},compile:function(){return this}});Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate;Ext.XTemplate.from=function(a){a=Ext.getDom(a);return new Ext.XTemplate(a.value||a.innerHTML)};Ext.util.CSS=function(){var d=null;var c=document;var b=/(-[a-z])/gi;var a=function(e,g){return g.charAt(1).toUpperCase()};return{createStyleSheet:function(i,l){var h;var g=c.getElementsByTagName(\"head\")[0];var k=c.createElement(\"style\");k.setAttribute(\"type\",\"text/css\");if(l){k.setAttribute(\"id\",l)}if(Ext.isIE){g.appendChild(k);h=k.styleSheet;h.cssText=i}else{try{k.appendChild(c.createTextNode(i))}catch(j){k.cssText=i}g.appendChild(k);h=k.styleSheet?k.styleSheet:(k.sheet||c.styleSheets[c.styleSheets.length-1])}this.cacheStyleSheet(h);return h},removeStyleSheet:function(g){var e=c.getElementById(g);if(e){e.parentNode.removeChild(e)}},swapStyleSheet:function(h,e){this.removeStyleSheet(h);var g=c.createElement(\"link\");g.setAttribute(\"rel\",\"stylesheet\");g.setAttribute(\"type\",\"text/css\");g.setAttribute(\"id\",h);g.setAttribute(\"href\",e);c.getElementsByTagName(\"head\")[0].appendChild(g)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(h){if(!d){d={}}try{var k=h.cssRules||h.rules;for(var g=k.length-1;g>=0;--g){d[k[g].selectorText.toLowerCase()]=k[g]}}catch(i){}},getRules:function(h){if(d===null||h){d={};var k=c.styleSheets;for(var j=0,g=k.length;j<g;j++){try{this.cacheStyleSheet(k[j])}catch(l){}}}return d},getRule:function(e,h){var g=this.getRules(h);if(!Ext.isArray(e)){return g[e.toLowerCase()]}for(var j=0;j<e.length;j++){if(g[e[j]]){return g[e[j].toLowerCase()]}}return null},updateRule:function(e,j,h){if(!Ext.isArray(e)){var k=this.getRule(e);if(k){k.style[j.replace(b,a)]=h;return true}}else{for(var g=0;g<e.length;g++){if(this.updateRule(e[g],j,h)){return true}}}return false}}}();Ext.util.ClickRepeater=Ext.extend(Ext.util.Observable,{constructor:function(b,a){this.el=Ext.get(b);this.el.unselectable();Ext.apply(this,a);this.addEvents(\"mousedown\",\"click\",\"mouseup\");if(!this.disabled){this.disabled=true;this.enable()}if(this.handler){this.on(\"click\",this.handler,this.scope||this)}Ext.util.ClickRepeater.superclass.constructor.call(this)},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on(\"mousedown\",this.handleMouseDown,this);if(Ext.isIE){this.el.on(\"dblclick\",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on(\"click\",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}Ext.getDoc().un(\"mouseup\",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(a){this[a?\"disable\":\"enable\"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.purgeListeners()},handleDblClick:function(a){clearTimeout(this.timer);this.el.blur();this.fireEvent(\"mousedown\",this,a);this.fireEvent(\"click\",this,a)},handleMouseDown:function(a){clearTimeout(this.timer);this.el.blur();if(this.pressClass){this.el.addClass(this.pressClass)}this.mousedownTime=new Date();Ext.getDoc().on(\"mouseup\",this.handleMouseUp,this);this.el.on(\"mouseout\",this.handleMouseOut,this);this.fireEvent(\"mousedown\",this,a);this.fireEvent(\"click\",this,a);if(this.accelerate){this.delay=400}this.timer=this.click.defer(this.delay||this.interval,this,[a])},click:function(a){this.fireEvent(\"click\",this,a);this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(e,a,h,g){return(e==g)?a+h:h*(-Math.pow(2,-10*e/g)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}this.el.on(\"mouseover\",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un(\"mouseover\",this.handleMouseReturn,this);if(this.pressClass){this.el.addClass(this.pressClass)}this.click()},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un(\"mouseover\",this.handleMouseReturn,this);this.el.un(\"mouseout\",this.handleMouseOut,this);Ext.getDoc().un(\"mouseup\",this.handleMouseUp,this);this.el.removeClass(this.pressClass);this.fireEvent(\"mouseup\",this,a)}});Ext.KeyNav=function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(!this.disabled){this.disabled=true;this.enable()}};Ext.KeyNav.prototype={disabled:false,defaultEventAction:\"stopEvent\",forceKeyDown:false,relay:function(c){var a=c.getKey(),b=this.keyToHandler[a];if(b&&this[b]){if(this.doRelay(c,this[b],b)!==true){c[this.defaultEventAction]()}}},doRelay:function(c,b,a){return b.call(this.scope||this,c,a)},enter:false,left:false,right:false,up:false,down:false,tab:false,esc:false,pageUp:false,pageDown:false,del:false,home:false,end:false,space:false,keyToHandler:{37:\"left\",39:\"right\",38:\"up\",40:\"down\",33:\"pageUp\",34:\"pageDown\",46:\"del\",36:\"home\",35:\"end\",13:\"enter\",27:\"esc\",9:\"tab\",32:\"space\"},stopKeyUp:function(b){var a=b.getKey();if(a>=37&&a<=40){b.stopEvent()}},destroy:function(){this.disable()},enable:function(){if(this.disabled){if(Ext.isSafari2){this.el.on(\"keyup\",this.stopKeyUp,this)}this.el.on(this.isKeydown()?\"keydown\":\"keypress\",this.relay,this);this.disabled=false}},disable:function(){if(!this.disabled){if(Ext.isSafari2){this.el.un(\"keyup\",this.stopKeyUp,this)}this.el.un(this.isKeydown()?\"keydown\":\"keypress\",this.relay,this);this.disabled=true}},setDisabled:function(a){this[a?\"disable\":\"enable\"]()},isKeydown:function(){return this.forceKeyDown||Ext.EventManager.useKeydown}};Ext.KeyMap=function(c,b,a){this.el=Ext.get(c);this.eventName=a||\"keydown\";this.bindings=[];if(b){this.addBinding(b)}this.enable()};Ext.KeyMap.prototype={stopEvent:false,addBinding:function(b){if(Ext.isArray(b)){Ext.each(b,function(j){this.addBinding(j)},this);return}var k=b.key,g=b.fn||b.handler,l=b.scope;if(b.stopEvent){this.stopEvent=b.stopEvent}if(typeof k==\"string\"){var h=[];var e=k.toUpperCase();for(var c=0,d=e.length;c<d;c++){h.push(e.charCodeAt(c))}k=h}var a=Ext.isArray(k);var i=function(o){if(this.checkModifiers(b,o)){var m=o.getKey();if(a){for(var n=0,j=k.length;n<j;n++){if(k[n]==m){if(this.stopEvent){o.stopEvent()}g.call(l||window,m,o);return}}}else{if(m==k){if(this.stopEvent){o.stopEvent()}g.call(l||window,m,o)}}}};this.bindings.push(i)},checkModifiers:function(b,h){var j,d,g=[\"shift\",\"ctrl\",\"alt\"];for(var c=0,a=g.length;c<a;++c){d=g[c];j=b[d];if(!(j===undefined||(j===h[d+\"Key\"]))){return false}}return true},on:function(b,d,c){var h,a,e,g;if(typeof b==\"object\"&&!Ext.isArray(b)){h=b.key;a=b.shift;e=b.ctrl;g=b.alt}else{h=b}this.addBinding({key:h,shift:a,ctrl:e,alt:g,fn:d,scope:c})},handleKeyDown:function(g){if(this.enabled){var c=this.bindings;for(var d=0,a=c.length;d<a;d++){c[d].call(this,g)}}},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.handleKeyDown,this);this.enabled=true}},disable:function(){if(this.enabled){this.el.removeListener(this.eventName,this.handleKeyDown,this);this.enabled=false}},setDisabled:function(a){this[a?\"disable\":\"enable\"]()}};Ext.util.TextMetrics=function(){var a;return{measure:function(b,c,d){if(!a){a=Ext.util.TextMetrics.Instance(b,d)}a.bind(b);a.setFixedWidth(d||\"auto\");return a.getSize(c)},createInstance:function(b,c){return Ext.util.TextMetrics.Instance(b,c)}}}();Ext.util.TextMetrics.Instance=function(b,d){var c=new Ext.Element(document.createElement(\"div\"));document.body.appendChild(c.dom);c.position(\"absolute\");c.setLeftTop(-1000,-1000);c.hide();if(d){c.setWidth(d)}var a={getSize:function(g){c.update(g);var e=c.getSize();c.update(\"\");return e},bind:function(e){c.setStyle(Ext.fly(e).getStyles(\"font-size\",\"font-style\",\"font-weight\",\"font-family\",\"line-height\",\"text-transform\",\"letter-spacing\"))},setFixedWidth:function(e){c.setWidth(e)},getWidth:function(e){c.dom.style.width=\"auto\";return this.getSize(e).width},getHeight:function(e){return this.getSize(e).height}};a.bind(b);return a};Ext.Element.addMethods({getTextWidth:function(c,b,a){return(Ext.util.TextMetrics.measure(this.dom,Ext.value(c,this.dom.innerHTML,true)).width).constrain(b||0,a||1000000)}});Ext.util.Cookies={set:function(c,e){var a=arguments;var i=arguments.length;var b=(i>2)?a[2]:null;var h=(i>3)?a[3]:\"/\";var d=(i>4)?a[4]:null;var g=(i>5)?a[5]:false;document.cookie=c+\"=\"+escape(e)+((b===null)?\"\":(\"; expires=\"+b.toGMTString()))+((h===null)?\"\":(\"; path=\"+h))+((d===null)?\"\":(\"; domain=\"+d))+((g===true)?\"; secure\":\"\")},get:function(d){var b=d+\"=\";var g=b.length;var a=document.cookie.length;var e=0;var c=0;while(e<a){c=e+g;if(document.cookie.substring(e,c)==b){return Ext.util.Cookies.getCookieVal(c)}e=document.cookie.indexOf(\" \",e)+1;if(e===0){break}}return null},clear:function(a){if(Ext.util.Cookies.get(a)){document.cookie=a+\"=; expires=Thu, 01-Jan-70 00:00:01 GMT\"}},getCookieVal:function(b){var a=document.cookie.indexOf(\";\",b);if(a==-1){a=document.cookie.length}return unescape(document.cookie.substring(b,a))}};Ext.handleError=function(a){throw a};Ext.Error=function(a){this.message=(this.lang[a])?this.lang[a]:a};Ext.Error.prototype=new Error();Ext.apply(Ext.Error.prototype,{lang:{},name:\"Ext.Error\",getName:function(){return this.name},getMessage:function(){return this.message},toJson:function(){return Ext.encode(this)}});Ext.ComponentMgr=function(){var c=new Ext.util.MixedCollection();var b={};var a={};return{register:function(d){c.add(d)},unregister:function(d){c.remove(d)},get:function(d){return c.get(d)},onAvailable:function(g,e,d){c.on(\"add\",function(h,i){if(i.id==g){e.call(d||i,i);c.un(\"add\",e,d)}})},all:c,types:b,ptypes:a,isRegistered:function(d){return b[d]!==undefined},isPluginRegistered:function(d){return a[d]!==undefined},registerType:function(e,d){b[e]=d;d.xtype=e},create:function(d,e){return d.render?d:new b[d.xtype||e](d)},registerPlugin:function(e,d){a[e]=d;d.ptype=e},createPlugin:function(e,g){var d=a[e.ptype||g];if(d.init){return d}else{return new d(e)}}}}();Ext.reg=Ext.ComponentMgr.registerType;Ext.preg=Ext.ComponentMgr.registerPlugin;Ext.create=Ext.ComponentMgr.create;Ext.Component=function(b){b=b||{};if(b.initialConfig){if(b.isAction){this.baseAction=b}b=b.initialConfig}else{if(b.tagName||b.dom||Ext.isString(b)){b={applyTo:b,id:b.id||b}}}this.initialConfig=b;Ext.apply(this,b);this.addEvents(\"added\",\"disable\",\"enable\",\"beforeshow\",\"show\",\"beforehide\",\"hide\",\"removed\",\"beforerender\",\"render\",\"afterrender\",\"beforedestroy\",\"destroy\",\"beforestaterestore\",\"staterestore\",\"beforestatesave\",\"statesave\");this.getId();Ext.ComponentMgr.register(this);Ext.Component.superclass.constructor.call(this);if(this.baseAction){this.baseAction.addComponent(this)}this.initComponent();if(this.plugins){if(Ext.isArray(this.plugins)){for(var c=0,a=this.plugins.length;c<a;c++){this.plugins[c]=this.initPlugin(this.plugins[c])}}else{this.plugins=this.initPlugin(this.plugins)}}if(this.stateful!==false){this.initState()}if(this.applyTo){this.applyToMarkup(this.applyTo);delete this.applyTo}else{if(this.renderTo){this.render(this.renderTo);delete this.renderTo}}};Ext.Component.AUTO_ID=1000;Ext.extend(Ext.Component,Ext.util.Observable,{disabled:false,hidden:false,autoEl:\"div\",disabledClass:\"x-item-disabled\",allowDomMove:true,autoShow:false,hideMode:\"display\",hideParent:false,rendered:false,tplWriteMode:\"overwrite\",bubbleEvents:[],ctype:\"Ext.Component\",actionMode:\"el\",getActionEl:function(){return this[this.actionMode]},initPlugin:function(a){if(a.ptype&&!Ext.isFunction(a.init)){a=Ext.ComponentMgr.createPlugin(a)}else{if(Ext.isString(a)){a=Ext.ComponentMgr.createPlugin({ptype:a})}}a.init(this);return a},initComponent:function(){if(this.listeners){this.on(this.listeners);delete this.listeners}this.enableBubble(this.bubbleEvents)},render:function(b,a){if(!this.rendered&&this.fireEvent(\"beforerender\",this)!==false){if(!b&&this.el){this.el=Ext.get(this.el);b=this.el.dom.parentNode;this.allowDomMove=false}this.container=Ext.get(b);if(this.ctCls){this.container.addClass(this.ctCls)}this.rendered=true;if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}this.onRender(this.container,a||null);if(this.autoShow){this.el.removeClass([\"x-hidden\",\"x-hide-\"+this.hideMode])}if(this.cls){this.el.addClass(this.cls);delete this.cls}if(this.style){this.el.applyStyles(this.style);delete this.style}if(this.overCls){this.el.addClassOnOver(this.overCls)}this.fireEvent(\"render\",this);var c=this.getContentTarget();if(this.html){c.update(Ext.DomHelper.markup(this.html));delete this.html}if(this.contentEl){var d=Ext.getDom(this.contentEl);Ext.fly(d).removeClass([\"x-hidden\",\"x-hide-display\"]);c.appendChild(d)}if(this.tpl){if(!this.tpl.compile){this.tpl=new Ext.XTemplate(this.tpl)}if(this.data){this.tpl[this.tplWriteMode](c,this.data);delete this.data}}this.afterRender(this.container);if(this.hidden){this.doHide()}if(this.disabled){this.disable(true)}if(this.stateful!==false){this.initStateEvents()}this.fireEvent(\"afterrender\",this)}return this},update:function(b,d,a){var c=this.getContentTarget();if(this.tpl&&typeof b!==\"string\"){this.tpl[this.tplWriteMode](c,b||{})}else{var e=Ext.isObject(b)?Ext.DomHelper.markup(b):b;c.update(e,d,a)}},onAdded:function(a,b){this.ownerCt=a;this.initRef();this.fireEvent(\"added\",this,a,b)},onRemoved:function(){this.removeRef();this.fireEvent(\"removed\",this,this.ownerCt);delete this.ownerCt},initRef:function(){if(this.ref&&!this.refOwner){var d=this.ref.split(\"/\"),c=d.length,b=0,a=this;while(a&&b<c){a=a.ownerCt;++b}if(a){a[this.refName=d[--b]]=this;this.refOwner=a}}},removeRef:function(){if(this.refOwner&&this.refName){delete this.refOwner[this.refName];delete this.refOwner}},initState:function(){if(Ext.state.Manager){var b=this.getStateId();if(b){var a=Ext.state.Manager.get(b);if(a){if(this.fireEvent(\"beforestaterestore\",this,a)!==false){this.applyState(Ext.apply({},a));this.fireEvent(\"staterestore\",this,a)}}}}},getStateId:function(){return this.stateId||((/^(ext-comp-|ext-gen)/).test(String(this.id))?null:this.id)},initStateEvents:function(){if(this.stateEvents){for(var a=0,b;b=this.stateEvents[a];a++){this.on(b,this.saveState,this,{delay:100})}}},applyState:function(a){if(a){Ext.apply(this,a)}},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==false){var b=this.getStateId();if(b){var a=this.getState();if(this.fireEvent(\"beforestatesave\",this,a)!==false){Ext.state.Manager.set(b,a);this.fireEvent(\"statesave\",this,a)}}}},applyToMarkup:function(a){this.allowDomMove=false;this.el=Ext.get(a);this.render(this.el.dom.parentNode)},addClass:function(a){if(this.el){this.el.addClass(a)}else{this.cls=this.cls?this.cls+\" \"+a:a}return this},removeClass:function(a){if(this.el){this.el.removeClass(a)}else{if(this.cls){this.cls=this.cls.split(\" \").remove(a).join(\" \")}}return this},onRender:function(b,a){if(!this.el&&this.autoEl){if(Ext.isString(this.autoEl)){this.el=document.createElement(this.autoEl)}else{var c=document.createElement(\"div\");Ext.DomHelper.overwrite(c,this.autoEl);this.el=c.firstChild}if(!this.el.id){this.el.id=this.getId()}}if(this.el){this.el=Ext.get(this.el);if(this.allowDomMove!==false){b.dom.insertBefore(this.el.dom,a);if(c){Ext.removeNode(c);c=null}}}},getAutoCreate:function(){var a=Ext.isObject(this.autoCreate)?this.autoCreate:Ext.apply({},this.defaultAutoCreate);if(this.id&&!a.id){a.id=this.id}return a},afterRender:Ext.emptyFn,destroy:function(){if(!this.isDestroyed){if(this.fireEvent(\"beforedestroy\",this)!==false){this.destroying=true;this.beforeDestroy();if(this.ownerCt&&this.ownerCt.remove){this.ownerCt.remove(this,false)}if(this.rendered){this.el.remove();if(this.actionMode==\"container\"||this.removeMode==\"container\"){this.container.remove()}}if(this.focusTask&&this.focusTask.cancel){this.focusTask.cancel()}this.onDestroy();Ext.ComponentMgr.unregister(this);this.fireEvent(\"destroy\",this);this.purgeListeners();this.destroying=false;this.isDestroyed=true}}},deleteMembers:function(){var b=arguments;for(var c=0,a=b.length;c<a;++c){delete this[b[c]]}},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getContentTarget:function(){return this.el},getId:function(){return this.id||(this.id=\"ext-comp-\"+(++Ext.Component.AUTO_ID))},getItemId:function(){return this.itemId||this.getId()},focus:function(b,a){if(a){this.focusTask=new Ext.util.DelayedTask(this.focus,this,[b,false]);this.focusTask.delay(Ext.isNumber(a)?a:10);return this}if(this.rendered&&!this.isDestroyed){this.el.focus();if(b===true){this.el.dom.select()}}return this},blur:function(){if(this.rendered){this.el.blur()}return this},disable:function(a){if(this.rendered){this.onDisable()}this.disabled=true;if(a!==true){this.fireEvent(\"disable\",this)}return this},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.el.dom.disabled=true},enable:function(){if(this.rendered){this.onEnable()}this.disabled=false;this.fireEvent(\"enable\",this);return this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.el.dom.disabled=false},setDisabled:function(a){return this[a?\"disable\":\"enable\"]()},show:function(){if(this.fireEvent(\"beforeshow\",this)!==false){this.hidden=false;if(this.autoRender){this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender)}if(this.rendered){this.onShow()}this.fireEvent(\"show\",this)}return this},onShow:function(){this.getVisibilityEl().removeClass(\"x-hide-\"+this.hideMode)},hide:function(){if(this.fireEvent(\"beforehide\",this)!==false){this.doHide();this.fireEvent(\"hide\",this)}return this},doHide:function(){this.hidden=true;if(this.rendered){this.onHide()}},onHide:function(){this.getVisibilityEl().addClass(\"x-hide-\"+this.hideMode)},getVisibilityEl:function(){return this.hideParent?this.container:this.getActionEl()},setVisible:function(a){return this[a?\"show\":\"hide\"]()},isVisible:function(){return this.rendered&&this.getVisibilityEl().isVisible()},cloneConfig:function(b){b=b||{};var c=b.id||Ext.id();var a=Ext.applyIf(b,this.initialConfig);a.id=c;return new this.constructor(a)},getXType:function(){return this.constructor.xtype},isXType:function(b,a){if(Ext.isFunction(b)){b=b.xtype}else{if(Ext.isObject(b)){b=b.constructor.xtype}}return !a?(\"/\"+this.getXTypes()+\"/\").indexOf(\"/\"+b+\"/\")!=-1:this.constructor.xtype==b},getXTypes:function(){var a=this.constructor;if(!a.xtypes){var d=[],b=this;while(b&&b.constructor.xtype){d.unshift(b.constructor.xtype);b=b.constructor.superclass}a.xtypeChain=d;a.xtypes=d.join(\"/\")}return a.xtypes},findParentBy:function(a){for(var b=this.ownerCt;(b!=null)&&!a(b,this);b=b.ownerCt){}return b||null},findParentByType:function(b,a){return this.findParentBy(function(d){return d.isXType(b,a)})},bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.ownerCt}return this},getPositionEl:function(){return this.positionEl||this.el},purgeListeners:function(){Ext.Component.superclass.purgeListeners.call(this);if(this.mons){this.on(\"beforedestroy\",this.clearMons,this,{single:true})}},clearMons:function(){Ext.each(this.mons,function(a){a.item.un(a.ename,a.fn,a.scope)},this);this.mons=[]},createMons:function(){if(!this.mons){this.mons=[];this.on(\"beforedestroy\",this.clearMons,this,{single:true})}},mon:function(g,b,d,c,a){this.createMons();if(Ext.isObject(b)){var j=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/;var i=b;for(var h in i){if(j.test(h)){continue}if(Ext.isFunction(i[h])){this.mons.push({item:g,ename:h,fn:i[h],scope:i.scope});g.on(h,i[h],i.scope,i)}else{this.mons.push({item:g,ename:h,fn:i[h],scope:i.scope});g.on(h,i[h])}}return}this.mons.push({item:g,ename:b,fn:d,scope:c});g.on(b,d,c,a)},mun:function(h,c,g,e){var j,d;this.createMons();for(var b=0,a=this.mons.length;b<a;++b){d=this.mons[b];if(h===d.item&&c==d.ename&&g===d.fn&&e===d.scope){this.mons.splice(b,1);h.un(c,g,e);j=true;break}}return j},nextSibling:function(){if(this.ownerCt){var a=this.ownerCt.items.indexOf(this);if(a!=-1&&a+1<this.ownerCt.items.getCount()){return this.ownerCt.items.itemAt(a+1)}}return null},previousSibling:function(){if(this.ownerCt){var a=this.ownerCt.items.indexOf(this);if(a>0){return this.ownerCt.items.itemAt(a-1)}}return null},getBubbleTarget:function(){return this.ownerCt}});Ext.reg(\"component\",Ext.Component);Ext.Action=Ext.extend(Object,{constructor:function(a){this.initialConfig=a;this.itemId=a.itemId=(a.itemId||a.id||Ext.id());this.items=[]},isAction:true,setText:function(a){this.initialConfig.text=a;this.callEach(\"setText\",[a])},getText:function(){return this.initialConfig.text},setIconClass:function(a){this.initialConfig.iconCls=a;this.callEach(\"setIconClass\",[a])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(a){this.initialConfig.disabled=a;this.callEach(\"setDisabled\",[a])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(a){this.initialConfig.hidden=a;this.callEach(\"setVisible\",[!a])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(b,a){this.initialConfig.handler=b;this.initialConfig.scope=a;this.callEach(\"setHandler\",[b,a])},each:function(b,a){Ext.each(this.items,b,a)},callEach:function(e,b){var d=this.items;for(var c=0,a=d.length;c<a;c++){d[c][e].apply(d[c],b)}},addComponent:function(a){this.items.push(a);a.on(\"destroy\",this.removeComponent,this)},removeComponent:function(a){this.items.remove(a)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}});(function(){Ext.Layer=function(d,c){d=d||{};var e=Ext.DomHelper,h=d.parentEl,g=h?Ext.getDom(h):document.body;if(c){this.dom=Ext.getDom(c)}if(!this.dom){var i=d.dh||{tag:\"div\",cls:\"x-layer\"};this.dom=e.append(g,i)}if(d.cls){this.addClass(d.cls)}this.constrain=d.constrain!==false;this.setVisibilityMode(Ext.Element.VISIBILITY);if(d.id){this.id=this.dom.id=d.id}else{this.id=Ext.id(this.dom)}this.zindex=d.zindex||this.getZIndex();this.position(\"absolute\",this.zindex);if(d.shadow){this.shadowOffset=d.shadowOffset||4;this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:d.shadow})}else{this.shadowOffset=0}this.useShim=d.shim!==false&&Ext.useShims;this.useDisplay=d.useDisplay;this.hide()};var a=Ext.Element.prototype;var b=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle(\"z-index\"),10)||11000},getShim:function(){if(!this.useShim){return null}if(this.shim){return this.shim}var d=b.shift();if(!d){d=this.createShim();d.enableDisplayMode(\"block\");d.dom.style.display=\"none\";d.dom.style.visibility=\"visible\"}var c=this.dom.parentNode;if(d.dom.parentNode!=c){c.insertBefore(d.dom,this.dom)}d.setStyle(\"z-index\",this.getZIndex()-2);this.shim=d;return d},hideShim:function(){if(this.shim){this.shim.setDisplayed(false);b.push(this.shim);delete this.shim}},disableShadow:function(){if(this.shadow){this.shadowDisabled=true;this.shadow.hide();this.lastShadowOffset=this.shadowOffset;this.shadowOffset=0}},enableShadow:function(c){if(this.shadow){this.shadowDisabled=false;if(Ext.isDefined(this.lastShadowOffset)){this.shadowOffset=this.lastShadowOffset;delete this.lastShadowOffset}if(c){this.sync(true)}}},sync:function(d){var n=this.shadow;if(!this.updating&&this.isVisible()&&(n||this.useShim)){var i=this.getShim(),m=this.getWidth(),j=this.getHeight(),e=this.getLeft(true),o=this.getTop(true);if(n&&!this.shadowDisabled){if(d&&!n.isVisible()){n.show(this)}else{n.realign(e,o,m,j)}if(i){if(d){i.show()}var k=n.el.getXY(),g=i.dom.style,c=n.el.getSize();g.left=(k[0])+\"px\";g.top=(k[1])+\"px\";g.width=(c.width)+\"px\";g.height=(c.height)+\"px\"}}else{if(i){if(d){i.show()}i.setSize(m,j);i.setLeftTop(e,o)}}}},destroy:function(){this.hideShim();if(this.shadow){this.shadow.hide()}this.removeAllListeners();Ext.removeNode(this.dom);delete this.dom},remove:function(){this.destroy()},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(c){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var j=Ext.lib.Dom.getViewWidth(),d=Ext.lib.Dom.getViewHeight();var o=Ext.getDoc().getScroll();var n=this.getXY();var k=n[0],i=n[1];var c=this.shadowOffset;var l=this.dom.offsetWidth+c,e=this.dom.offsetHeight+c;var g=false;if((k+l)>j+o.left){k=j-l-c;g=true}if((i+e)>d+o.top){i=d-e-c;g=true}if(k<o.left){k=o.left;g=true}if(i<o.top){i=o.top;g=true}if(g){if(this.avoidY){var m=this.avoidY;if(i<=m&&(i+e)>=m){i=m-e-5}}n=[k,i];this.storeXY(n);a.setXY.call(this,n);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},isVisible:function(){return this.visible},showAction:function(){this.visible=true;if(this.useDisplay===true){this.setDisplayed(\"\")}else{if(this.lastXY){a.setXY.call(this,this.lastXY)}else{if(this.lastLT){a.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])}}}},hideAction:function(){this.visible=false;if(this.useDisplay===true){this.setDisplayed(false)}else{this.setLeftTop(-10000,-10000)}},setVisible:function(i,h,k,l,j){if(i){this.showAction()}if(h&&i){var g=function(){this.sync(true);if(l){l()}}.createDelegate(this);a.setVisible.call(this,true,true,k,g,j)}else{if(!i){this.hideUnders(true)}var g=l;if(h){g=function(){this.hideAction();if(l){l()}}.createDelegate(this)}a.setVisible.call(this,i,h,k,g,j);if(i){this.sync(true)}else{if(!h){this.hideAction()}}}return this},storeXY:function(c){delete this.lastLT;this.lastXY=c},storeLeftTop:function(d,c){delete this.lastXY;this.lastLT=[d,c]},beforeFx:function(){this.beforeAction();return Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(c){this.storeLeftTop(c,this.getTop(true));a.setLeft.apply(this,arguments);this.sync();return this},setTop:function(c){this.storeLeftTop(this.getLeft(true),c);a.setTop.apply(this,arguments);this.sync();return this},setLeftTop:function(d,c){this.storeLeftTop(d,c);a.setLeftTop.apply(this,arguments);this.sync();return this},setXY:function(j,h,k,l,i){this.fixDisplay();this.beforeAction();this.storeXY(j);var g=this.createCB(l);a.setXY.call(this,j,h,k,g,i);if(!h){g()}return this},createCB:function(e){var d=this;return function(){d.constrainXY();d.sync(true);if(e){e()}}},setX:function(g,h,j,k,i){this.setXY([g,this.getY()],h,j,k,i);return this},setY:function(k,g,i,j,h){this.setXY([this.getX(),k],g,i,j,h);return this},setSize:function(j,k,i,m,n,l){this.beforeAction();var g=this.createCB(n);a.setSize.call(this,j,k,i,m,g,l);if(!i){g()}return this},setWidth:function(i,h,k,l,j){this.beforeAction();var g=this.createCB(l);a.setWidth.call(this,i,h,k,g,j);if(!h){g()}return this},setHeight:function(j,i,l,m,k){this.beforeAction();var g=this.createCB(m);a.setHeight.call(this,j,i,l,g,k);if(!i){g()}return this},setBounds:function(o,m,p,i,n,k,l,j){this.beforeAction();var g=this.createCB(l);if(!n){this.storeXY([o,m]);a.setXY.call(this,[o,m]);a.setSize.call(this,p,i,n,k,g,j);g()}else{a.setBounds.call(this,o,m,p,i,n,k,g,j)}return this},setZIndex:function(c){this.zindex=c;this.setStyle(\"z-index\",c+2);if(this.shadow){this.shadow.setZIndex(c+1)}if(this.shim){this.shim.setStyle(\"z-index\",c)}return this}})})();Ext.Shadow=function(d){Ext.apply(this,d);if(typeof this.mode!=\"string\"){this.mode=this.defaultMode}var e=this.offset,c={h:0},b=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case\"drop\":c.w=0;c.l=c.t=e;c.t-=1;if(Ext.isIE){c.l-=this.offset+b;c.t-=this.offset+b;c.w-=b;c.h-=b;c.t+=1}break;case\"sides\":c.w=(e*2);c.l=-e;c.t=e-1;if(Ext.isIE){c.l-=(this.offset-b);c.t-=this.offset+b;c.l+=1;c.w-=(this.offset-b)*2;c.w-=b+1;c.h-=1}break;case\"frame\":c.w=c.h=(e*2);c.l=c.t=-e;c.t+=1;c.h-=2;if(Ext.isIE){c.l-=(this.offset-b);c.t-=(this.offset-b);c.l+=1;c.w-=(this.offset+b+1);c.h-=(this.offset+b);c.h+=1}break}this.adjusts=c};Ext.Shadow.prototype={offset:4,defaultMode:\"drop\",show:function(a){a=Ext.get(a);if(!this.el){this.el=Ext.Shadow.Pool.pull();if(this.el.dom.nextSibling!=a.dom){this.el.insertBefore(a)}}this.el.setStyle(\"z-index\",this.zIndex||parseInt(a.getStyle(\"z-index\"),10)-1);if(Ext.isIE){this.el.dom.style.filter=\"progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius=\"+(this.offset)+\")\"}this.realign(a.getLeft(true),a.getTop(true),a.getWidth(),a.getHeight());this.el.dom.style.display=\"block\"},isVisible:function(){return this.el?true:false},realign:function(b,r,q,g){if(!this.el){return}var n=this.adjusts,k=this.el.dom,u=k.style,i=0,p=(q+n.w),e=(g+n.h),j=p+\"px\",o=e+\"px\",m,c;u.left=(b+n.l)+\"px\";u.top=(r+n.t)+\"px\";if(u.width!=j||u.height!=o){u.width=j;u.height=o;if(!Ext.isIE){m=k.childNodes;c=Math.max(0,(p-12))+\"px\";m[0].childNodes[1].style.width=c;m[1].childNodes[1].style.width=c;m[2].childNodes[1].style.width=c;m[1].style.height=Math.max(0,(e-12))+\"px\"}}},hide:function(){if(this.el){this.el.dom.style.display=\"none\";Ext.Shadow.Pool.push(this.el);delete this.el}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle(\"z-index\",a)}}};Ext.Shadow.Pool=function(){var b=[],a=Ext.isIE?'<div class=\"x-ie-shadow\"></div>':'<div class=\"x-shadow\"><div class=\"xst\"><div class=\"xstl\"></div><div class=\"xstc\"></div><div class=\"xstr\"></div></div><div class=\"xsc\"><div class=\"xsml\"></div><div class=\"xsmc\"></div><div class=\"xsmr\"></div></div><div class=\"xsb\"><div class=\"xsbl\"></div><div class=\"xsbc\"></div><div class=\"xsbr\"></div></div></div>';return{pull:function(){var c=b.shift();if(!c){c=Ext.get(Ext.DomHelper.insertHtml(\"beforeBegin\",document.body.firstChild,a));c.autoBoxAdjust=false}return c},push:function(c){b.push(c)}}}();Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this);this.addEvents(\"resize\",\"move\")},boxReady:false,deferHeight:false,setSize:function(b,d){if(typeof b==\"object\"){d=b.height;b=b.width}if(Ext.isDefined(b)&&Ext.isDefined(this.boxMinWidth)&&(b<this.boxMinWidth)){b=this.boxMinWidth}if(Ext.isDefined(d)&&Ext.isDefined(this.boxMinHeight)&&(d<this.boxMinHeight)){d=this.boxMinHeight}if(Ext.isDefined(b)&&Ext.isDefined(this.boxMaxWidth)&&(b>this.boxMaxWidth)){b=this.boxMaxWidth}if(Ext.isDefined(d)&&Ext.isDefined(this.boxMaxHeight)&&(d>this.boxMaxHeight)){d=this.boxMaxHeight}if(!this.boxReady){this.width=b;this.height=d;return this}if(this.cacheSizes!==false&&this.lastSize&&this.lastSize.width==b&&this.lastSize.height==d){return this}this.lastSize={width:b,height:d};var c=this.adjustSize(b,d),g=c.width,a=c.height,e;if(g!==undefined||a!==undefined){e=this.getResizeEl();if(!this.deferHeight&&g!==undefined&&a!==undefined){e.setSize(g,a)}else{if(!this.deferHeight&&a!==undefined){e.setHeight(a)}else{if(g!==undefined){e.setWidth(g)}}}this.onResize(g,a,b,d);this.fireEvent(\"resize\",this,g,a,b,d)}return this},setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return this.getResizeEl().getSize()},getWidth:function(){return this.getResizeEl().getWidth()},getHeight:function(){return this.getResizeEl().getHeight()},getOuterSize:function(){var a=this.getResizeEl();return{width:a.getWidth()+a.getMargins(\"lr\"),height:a.getHeight()+a.getMargins(\"tb\")}},getPosition:function(a){var b=this.getPositionEl();if(a===true){return[b.getLeft(true),b.getTop(true)]}return this.xy||b.getXY()},getBox:function(a){var c=this.getPosition(a);var b=this.getSize();b.x=c[0];b.y=c[1];return b},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},getResizeEl:function(){return this.resizeEl||this.el},setAutoScroll:function(a){if(this.rendered){this.getContentTarget().setOverflow(a?\"auto\":\"\")}this.autoScroll=a;return this},setPosition:function(a,g){if(a&&typeof a[1]==\"number\"){g=a[1];a=a[0]}this.x=a;this.y=g;if(!this.boxReady){return this}var b=this.adjustPosition(a,g);var e=b.x,d=b.y;var c=this.getPositionEl();if(e!==undefined||d!==undefined){if(e!==undefined&&d!==undefined){c.setLeftTop(e,d)}else{if(e!==undefined){c.setLeft(e)}else{if(d!==undefined){c.setTop(d)}}}this.onPosition(e,d);this.fireEvent(\"move\",this,e,d)}return this},setPagePosition:function(a,c){if(a&&typeof a[1]==\"number\"){c=a[1];a=a[0]}this.pageX=a;this.pageY=c;if(!this.boxReady){return}if(a===undefined||c===undefined){return}var b=this.getPositionEl().translatePoints(a,c);this.setPosition(b.left,b.top);return this},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this);if(this.resizeEl){this.resizeEl=Ext.get(this.resizeEl)}if(this.positionEl){this.positionEl=Ext.get(this.positionEl)}this.boxReady=true;Ext.isDefined(this.autoScroll)&&this.setAutoScroll(this.autoScroll);this.setSize(this.width,this.height);if(this.x||this.y){this.setPosition(this.x,this.y)}else{if(this.pageX||this.pageY){this.setPagePosition(this.pageX,this.pageY)}}},syncSize:function(){delete this.lastSize;this.setSize(this.autoWidth?undefined:this.getResizeEl().getWidth(),this.autoHeight?undefined:this.getResizeEl().getHeight());return this},onResize:function(d,b,a,c){},onPosition:function(a,b){},adjustSize:function(a,b){if(this.autoWidth){a=\"auto\"}if(this.autoHeight){b=\"auto\"}return{width:a,height:b}},adjustPosition:function(a,b){return{x:a,y:b}}});Ext.reg(\"box\",Ext.BoxComponent);Ext.Spacer=Ext.extend(Ext.BoxComponent,{autoEl:\"div\"});Ext.reg(\"spacer\",Ext.Spacer);Ext.SplitBar=function(c,e,b,d,a){this.el=Ext.get(c,true);this.el.dom.unselectable=\"on\";this.resizingEl=Ext.get(e,true);this.orientation=b||Ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2000;this.animate=false;this.useShim=false;this.shim=null;if(!a){this.proxy=Ext.SplitBar.createProxy(this.orientation)}else{this.proxy=Ext.get(a).dom}this.dd=new Ext.dd.DDProxy(this.el.dom.id,\"XSplitBars\",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new Ext.SplitBar.BasicLayoutAdapter();this.adapter.init(this);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.placement=d||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT);this.el.addClass(\"x-splitbar-h\")}else{this.placement=d||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM);this.el.addClass(\"x-splitbar-v\")}this.addEvents(\"resize\",\"moved\",\"beforeresize\",\"beforeapply\");Ext.SplitBar.superclass.constructor.call(this)};Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(a,e){this.fireEvent(\"beforeresize\",this);this.overlay=Ext.DomHelper.append(document.body,{cls:\"x-drag-overlay\",html:\"&#160;\"},true);this.overlay.unselectable();this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();Ext.get(this.proxy).setDisplayed(\"block\");var c=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();var d=c-this.activeMinSize;var b=Math.max(this.activeMaxSize-c,0);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.dd.resetConstraints();this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?d:b,this.placement==Ext.SplitBar.LEFT?b:d,this.tickSize);this.dd.setYConstraint(0,0)}else{this.dd.resetConstraints();this.dd.setXConstraint(0,0);this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?d:b,this.placement==Ext.SplitBar.TOP?b:d,this.tickSize)}this.dragSpecs.startSize=c;this.dragSpecs.startPoint=[a,e];Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,a,e)},onEndProxyDrag:function(c){Ext.get(this.proxy).setDisplayed(false);var b=Ext.lib.Event.getXY(c);if(this.overlay){Ext.destroy(this.overlay);delete this.overlay}var a;if(this.orientation==Ext.SplitBar.HORIZONTAL){a=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?b[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-b[0])}else{a=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?b[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-b[1])}a=Math.min(Math.max(a,this.activeMinSize),this.activeMaxSize);if(a!=this.dragSpecs.startSize){if(this.fireEvent(\"beforeapply\",this,a)!==false){this.adapter.setElementSize(this,a);this.fireEvent(\"moved\",this,a);this.fireEvent(\"resize\",this,a)}}},getAdapter:function(){return this.adapter},setAdapter:function(a){this.adapter=a;this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(a){this.minSize=a},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(a){this.maxSize=a},setCurrentSize:function(b){var a=this.animate;this.animate=false;this.adapter.setElementSize(this,b);this.animate=a},destroy:function(a){Ext.destroy(this.shim,Ext.get(this.proxy));this.dd.unreg();if(a){this.el.remove()}this.purgeListeners()}});Ext.SplitBar.createProxy=function(b){var c=new Ext.Element(document.createElement(\"div\"));document.body.appendChild(c.dom);c.unselectable();var a=\"x-splitbar-proxy\";c.addClass(a+\" \"+(b==Ext.SplitBar.HORIZONTAL?a+\"-h\":a+\"-v\"));return c.dom};Ext.SplitBar.BasicLayoutAdapter=function(){};Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(a){},getElementSize:function(a){if(a.orientation==Ext.SplitBar.HORIZONTAL){return a.resizingEl.getWidth()}else{return a.resizingEl.getHeight()}},setElementSize:function(b,a,c){if(b.orientation==Ext.SplitBar.HORIZONTAL){if(!b.animate){b.resizingEl.setWidth(a);if(c){c(b,a)}}else{b.resizingEl.setWidth(a,true,0.1,c,\"easeOut\")}}else{if(!b.animate){b.resizingEl.setHeight(a);if(c){c(b,a)}}else{b.resizingEl.setHeight(a,true,0.1,c,\"easeOut\")}}}};Ext.SplitBar.AbsoluteLayoutAdapter=function(a){this.basic=new Ext.SplitBar.BasicLayoutAdapter();this.container=Ext.get(a)};Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(a){this.basic.init(a)},getElementSize:function(a){return this.basic.getElementSize(a)},setElementSize:function(b,a,c){this.basic.setElementSize(b,a,this.moveSplitter.createDelegate(this,[b]))},moveSplitter:function(a){var b=Ext.SplitBar;switch(a.placement){case b.LEFT:a.el.setX(a.resizingEl.getRight());break;case b.RIGHT:a.el.setStyle(\"right\",(this.container.getWidth()-a.resizingEl.getLeft())+\"px\");break;case b.TOP:a.el.setY(a.resizingEl.getBottom());break;case b.BOTTOM:a.el.setY(a.resizingEl.getTop()-a.el.getHeight());break}}};Ext.SplitBar.VERTICAL=1;Ext.SplitBar.HORIZONTAL=2;Ext.SplitBar.LEFT=1;Ext.SplitBar.RIGHT=2;Ext.SplitBar.TOP=3;Ext.SplitBar.BOTTOM=4;Ext.Container=Ext.extend(Ext.BoxComponent,{bufferResize:50,autoDestroy:true,forceLayout:false,defaultType:\"panel\",resizeEvent:\"resize\",bubbleEvents:[\"add\",\"remove\"],initComponent:function(){Ext.Container.superclass.initComponent.call(this);this.addEvents(\"afterlayout\",\"beforeadd\",\"beforeremove\",\"add\",\"remove\");var a=this.items;if(a){delete this.items;this.add(a)}},initItems:function(){if(!this.items){this.items=new Ext.util.MixedCollection(false,this.getComponentId);this.getLayout()}},setLayout:function(a){if(this.layout&&this.layout!=a){this.layout.setContainer(null)}this.layout=a;this.initItems();a.setContainer(this)},afterRender:function(){Ext.Container.superclass.afterRender.call(this);if(!this.layout){this.layout=\"auto\"}if(Ext.isObject(this.layout)&&!this.layout.layout){this.layoutConfig=this.layout;this.layout=this.layoutConfig.type}if(Ext.isString(this.layout)){this.layout=new Ext.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)}this.setLayout(this.layout);if(this.activeItem!==undefined&&this.layout.setActiveItem){var a=this.activeItem;delete this.activeItem;this.layout.setActiveItem(a)}if(!this.ownerCt){this.doLayout(false,true)}if(this.monitorResize===true){Ext.EventManager.onWindowResize(this.doLayout,this,[false])}},getLayoutTarget:function(){return this.el},getComponentId:function(a){return a.getItemId()},add:function(b){this.initItems();var e=arguments.length>1;if(e||Ext.isArray(b)){var a=[];Ext.each(e?arguments:b,function(h){a.push(this.add(h))},this);return a}var g=this.lookupComponent(this.applyDefaults(b));var d=this.items.length;if(this.fireEvent(\"beforeadd\",this,g,d)!==false&&this.onBeforeAdd(g)!==false){this.items.add(g);g.onAdded(this,d);this.onAdd(g);this.fireEvent(\"add\",this,g,d)}return g},onAdd:function(a){},onAdded:function(a,b){this.ownerCt=a;this.initRef();this.cascade(function(d){d.initRef()});this.fireEvent(\"added\",this,a,b)},insert:function(e,b){var d=arguments,h=d.length,a=[],g,j;this.initItems();if(h>2){for(g=h-1;g>=1;--g){a.push(this.insert(e,d[g]))}return a}j=this.lookupComponent(this.applyDefaults(b));e=Math.min(e,this.items.length);if(this.fireEvent(\"beforeadd\",this,j,e)!==false&&this.onBeforeAdd(j)!==false){if(j.ownerCt==this){this.items.remove(j)}this.items.insert(e,j);j.onAdded(this,e);this.onAdd(j);this.fireEvent(\"add\",this,j,e)}return j},applyDefaults:function(b){var a=this.defaults;if(a){if(Ext.isFunction(a)){a=a.call(this,b)}if(Ext.isString(b)){b=Ext.ComponentMgr.get(b);Ext.apply(b,a)}else{if(!b.events){Ext.applyIf(b.isAction?b.initialConfig:b,a)}else{Ext.apply(b,a)}}}return b},onBeforeAdd:function(a){if(a.ownerCt){a.ownerCt.remove(a,false)}if(this.hideBorders===true){a.border=(a.border===true)}},remove:function(a,b){this.initItems();var d=this.getComponent(a);if(d&&this.fireEvent(\"beforeremove\",this,d)!==false){this.doRemove(d,b);this.fireEvent(\"remove\",this,d)}return d},onRemove:function(a){},doRemove:function(e,d){var b=this.layout,a=b&&this.rendered;if(a){b.onRemove(e)}this.items.remove(e);e.onRemoved();this.onRemove(e);if(d===true||(d!==false&&this.autoDestroy)){e.destroy()}if(a){b.afterRemove(e)}},removeAll:function(c){this.initItems();var e,g=[],b=[];this.items.each(function(h){g.push(h)});for(var d=0,a=g.length;d<a;++d){e=g[d];this.remove(e,c);if(e.ownerCt!==this){b.push(e)}}return b},getComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.items.get(a)},lookupComponent:function(a){if(Ext.isString(a)){return Ext.ComponentMgr.get(a)}else{if(!a.events){return this.createComponent(a)}}return a},createComponent:function(a,d){if(a.render){return a}var b=Ext.create(Ext.apply({ownerCt:this},a),d||this.defaultType);delete b.initialConfig.ownerCt;delete b.ownerCt;return b},canLayout:function(){var a=this.getVisibilityEl();return a&&a.dom&&!a.isStyle(\"display\",\"none\")},doLayout:function(g,e){var k=this.rendered,j=e||this.forceLayout;if(this.collapsed||!this.canLayout()){this.deferLayout=this.deferLayout||!g;if(!j){return}g=g&&!this.deferLayout}else{delete this.deferLayout}if(k&&this.layout){this.layout.layout()}if(g!==true&&this.items){var d=this.items.items;for(var b=0,a=d.length;b<a;b++){var h=d[b];if(h.doLayout){h.doLayout(false,j)}}}if(k){this.onLayout(g,j)}this.hasLayout=true;delete this.forceLayout},onLayout:Ext.emptyFn,shouldBufferLayout:function(){var a=this.hasLayout;if(this.ownerCt){return a?!this.hasLayoutPending():false}return a},hasLayoutPending:function(){var a=false;this.ownerCt.bubble(function(b){if(b.layoutPending){a=true;return false}});return a},onShow:function(){Ext.Container.superclass.onShow.call(this);if(Ext.isDefined(this.deferLayout)){delete this.deferLayout;this.doLayout(true)}},getLayout:function(){if(!this.layout){var a=new Ext.layout.AutoLayout(this.layoutConfig);this.setLayout(a)}return this.layout},beforeDestroy:function(){var a;if(this.items){while(a=this.items.first()){this.doRemove(a,true)}}if(this.monitorResize){Ext.EventManager.removeResizeListener(this.doLayout,this)}Ext.destroy(this.layout);Ext.Container.superclass.beforeDestroy.call(this)},cascade:function(g,e,b){if(g.apply(e||this,b||[this])!==false){if(this.items){var d=this.items.items;for(var c=0,a=d.length;c<a;c++){if(d[c].cascade){d[c].cascade(g,e,b)}else{g.apply(e||d[c],b||[d[c]])}}}}return this},findById:function(c){var a=null,b=this;this.cascade(function(d){if(b!=d&&d.id===c){a=d;return false}});return a},findByType:function(b,a){return this.findBy(function(d){return d.isXType(b,a)})},find:function(b,a){return this.findBy(function(d){return d[b]===a})},findBy:function(d,c){var a=[],b=this;this.cascade(function(e){if(b!=e&&d.call(c||e,e,b)===true){a.push(e)}});return a},get:function(a){return this.getComponent(a)}});Ext.Container.LAYOUTS={};Ext.reg(\"container\",Ext.Container);Ext.layout.ContainerLayout=Ext.extend(Object,{monitorResize:false,activeItem:null,constructor:function(a){this.id=Ext.id(null,\"ext-layout-\");Ext.apply(this,a)},type:\"container\",IEMeasureHack:function(k,g){var a=k.dom.childNodes,b=a.length,n,m=[],l,h,j;for(h=0;h<b;h++){n=a[h];l=Ext.get(n);if(l){m[h]=l.getStyle(\"display\");l.setStyle({display:\"none\"})}}j=k?k.getViewSize(g):{};for(h=0;h<b;h++){n=a[h];l=Ext.get(n);if(l){l.setStyle({display:m[h]})}}return j},getLayoutTargetSize:Ext.EmptyFn,layout:function(){var a=this.container,b=a.getLayoutTarget();if(!(this.hasLayout||Ext.isEmpty(this.targetCls))){b.addClass(this.targetCls)}this.onLayout(a,b);a.fireEvent(\"afterlayout\",a,this)},onLayout:function(a,b){this.renderAll(a,b)},isValidParent:function(b,a){return a&&b.getPositionEl().dom.parentNode==(a.dom||a)},renderAll:function(e,g){var b=e.items.items,d,h,a=b.length;for(d=0;d<a;d++){h=b[d];if(h&&(!h.rendered||!this.isValidParent(h,g))){this.renderItem(h,d,g)}}},renderItem:function(d,a,b){if(d){if(!d.rendered){d.render(b,a);this.configureItem(d)}else{if(!this.isValidParent(d,b)){if(Ext.isNumber(a)){a=b.dom.childNodes[a]}b.dom.insertBefore(d.getPositionEl().dom,a||null);d.container=b;this.configureItem(d)}}}},getRenderedItems:function(g){var e=g.getLayoutTarget(),h=g.items.items,a=h.length,d,j,b=[];for(d=0;d<a;d++){if((j=h[d]).rendered&&this.isValidParent(j,e)&&j.shouldLayout!==false){b.push(j)}}return b},configureItem:function(b){if(this.extraCls){var a=b.getPositionEl?b.getPositionEl():b;a.addClass(this.extraCls)}if(b.doLayout&&this.forceLayout){b.doLayout()}if(this.renderHidden&&b!=this.activeItem){b.hide()}},onRemove:function(b){if(this.activeItem==b){delete this.activeItem}if(b.rendered&&this.extraCls){var a=b.getPositionEl?b.getPositionEl():b;a.removeClass(this.extraCls)}},afterRemove:function(a){if(a.removeRestore){a.removeMode=\"container\";delete a.removeRestore}},onResize:function(){var c=this.container,a;if(c.collapsed){return}if(a=c.bufferResize&&c.shouldBufferLayout()){if(!this.resizeTask){this.resizeTask=new Ext.util.DelayedTask(this.runLayout,this);this.resizeBuffer=Ext.isNumber(a)?a:50}c.layoutPending=true;this.resizeTask.delay(this.resizeBuffer)}else{this.runLayout()}},runLayout:function(){var a=this.container;this.layout();a.onLayout();delete a.layoutPending},setContainer:function(b){if(this.monitorResize&&b!=this.container){var a=this.container;if(a){a.un(a.resizeEvent,this.onResize,this)}if(b){b.on(b.resizeEvent,this.onResize,this)}}this.container=b},parseMargins:function(b){if(Ext.isNumber(b)){b=b.toString()}var c=b.split(\" \"),a=c.length;if(a==1){c[1]=c[2]=c[3]=c[0]}else{if(a==2){c[2]=c[0];c[3]=c[1]}else{if(a==3){c[3]=c[1]}}}return{top:parseInt(c[0],10)||0,right:parseInt(c[1],10)||0,bottom:parseInt(c[2],10)||0,left:parseInt(c[3],10)||0}},fieldTpl:(function(){var a=new Ext.Template('<div class=\"x-form-item {itemCls}\" tabIndex=\"-1\">','<label for=\"{id}\" style=\"{labelStyle}\" class=\"x-form-item-label\">{label}{labelSeparator}</label>','<div class=\"x-form-element\" id=\"x-form-el-{id}\" style=\"{elementStyle}\">','</div><div class=\"{clearCls}\"></div>',\"</div>\");a.disableFormats=true;return a.compile()})(),destroy:function(){if(this.resizeTask&&this.resizeTask.cancel){this.resizeTask.cancel()}if(this.container){this.container.un(this.container.resizeEvent,this.onResize,this)}if(!Ext.isEmpty(this.targetCls)){var a=this.container.getLayoutTarget();if(a){a.removeClass(this.targetCls)}}}});Ext.layout.AutoLayout=Ext.extend(Ext.layout.ContainerLayout,{type:\"auto\",monitorResize:true,onLayout:function(d,g){Ext.layout.AutoLayout.superclass.onLayout.call(this,d,g);var e=this.getRenderedItems(d),a=e.length,b,h;for(b=0;b<a;b++){h=e[b];if(h.doLayout){h.doLayout(true)}}}});Ext.Container.LAYOUTS.auto=Ext.layout.AutoLayout;Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"fit\",getLayoutTargetSize:function(){var a=this.container.getLayoutTarget();if(!a){return{}}return a.getStyleSize()},onLayout:function(a,b){Ext.layout.FitLayout.superclass.onLayout.call(this,a,b);if(!a.collapsed){this.setItemSize(this.activeItem||a.items.itemAt(0),this.getLayoutTargetSize())}},setItemSize:function(b,a){if(b&&a.height>0){b.setSize(a)}}});Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout;Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:false,layoutOnCardChange:false,renderHidden:true,type:\"card\",setActiveItem:function(d){var a=this.activeItem,b=this.container;d=b.getComponent(d);if(d&&a!=d){if(a){a.hide();if(a.hidden!==true){return false}a.fireEvent(\"deactivate\",a)}var c=d.doLayout&&(this.layoutOnCardChange||!d.rendered);this.activeItem=d;delete d.deferLayout;d.show();this.layout();if(c){d.doLayout()}d.fireEvent(\"activate\",d)}},renderAll:function(a,b){if(this.deferredRender){this.renderItem(this.activeItem,undefined,b)}else{Ext.layout.CardLayout.superclass.renderAll.call(this,a,b)}}});Ext.Container.LAYOUTS.card=Ext.layout.CardLayout;Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"anchor\",defaultAnchor:\"100%\",parseAnchorRE:/^(r|right|b|bottom)$/i,getLayoutTargetSize:function(){var b=this.container.getLayoutTarget(),a={};if(b){a=b.getViewSize();if(Ext.isIE&&Ext.isStrict&&a.width==0){a=b.getStyleSize()}a.width-=b.getPadding(\"lr\");a.height-=b.getPadding(\"tb\")}return a},onLayout:function(m,w){Ext.layout.AnchorLayout.superclass.onLayout.call(this,m,w);var p=this.getLayoutTargetSize(),k=p.width,o=p.height,q=w.getStyle(\"overflow\"),n=this.getRenderedItems(m),t=n.length,g=[],j,a,v,l,h,c,e,d,u=0,s,b;if(k<20&&o<20){return}if(m.anchorSize){if(typeof m.anchorSize==\"number\"){a=m.anchorSize}else{a=m.anchorSize.width;v=m.anchorSize.height}}else{a=m.initialConfig.width;v=m.initialConfig.height}for(s=0;s<t;s++){l=n[s];b=l.getPositionEl();if(!l.anchor&&l.items&&!Ext.isNumber(l.width)&&!(Ext.isIE6&&Ext.isStrict)){l.anchor=this.defaultAnchor}if(l.anchor){h=l.anchorSpec;if(!h){d=l.anchor.split(\" \");l.anchorSpec=h={right:this.parseAnchor(d[0],l.initialConfig.width,a),bottom:this.parseAnchor(d[1],l.initialConfig.height,v)}}c=h.right?this.adjustWidthAnchor(h.right(k)-b.getMargins(\"lr\"),l):undefined;e=h.bottom?this.adjustHeightAnchor(h.bottom(o)-b.getMargins(\"tb\"),l):undefined;if(c||e){g.push({component:l,width:c||undefined,height:e||undefined})}}}for(s=0,t=g.length;s<t;s++){j=g[s];j.component.setSize(j.width,j.height)}if(q&&q!=\"hidden\"&&!this.adjustmentPass){var r=this.getLayoutTargetSize();if(r.width!=p.width||r.height!=p.height){this.adjustmentPass=true;this.onLayout(m,w)}}delete this.adjustmentPass},parseAnchor:function(c,h,b){if(c&&c!=\"none\"){var e;if(this.parseAnchorRE.test(c)){var g=b-h;return function(a){if(a!==e){e=a;return a-g}}}else{if(c.indexOf(\"%\")!=-1){var d=parseFloat(c.replace(\"%\",\"\"))*0.01;return function(a){if(a!==e){e=a;return Math.floor(a*d)}}}else{c=parseInt(c,10);if(!isNaN(c)){return function(a){if(a!==e){e=a;return a+c}}}}}}return false},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b}});Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout;Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"column\",extraCls:\"x-column\",scrollOffset:0,targetCls:\"x-column-layout-ct\",isValidParent:function(b,a){return this.innerCt&&b.getPositionEl().dom.parentNode==this.innerCt.dom},getLayoutTargetSize:function(){var b=this.container.getLayoutTarget(),a;if(b){a=b.getViewSize();if(Ext.isIE&&Ext.isStrict&&a.width==0){a=b.getStyleSize()}a.width-=b.getPadding(\"lr\");a.height-=b.getPadding(\"tb\")}return a},renderAll:function(a,b){if(!this.innerCt){this.innerCt=b.createChild({cls:\"x-column-inner\"});this.innerCt.createChild({cls:\"x-clear\"})}Ext.layout.ColumnLayout.superclass.renderAll.call(this,a,this.innerCt)},onLayout:function(e,k){var g=e.items.items,j=g.length,n,b,a,o=[];this.renderAll(e,k);var r=this.getLayoutTargetSize();if(r.width<1&&r.height<1){return}var p=r.width-this.scrollOffset,d=r.height,q=p;this.innerCt.setWidth(p);for(b=0;b<j;b++){n=g[b];a=n.getPositionEl().getMargins(\"lr\");o[b]=a;if(!n.columnWidth){q-=(n.getWidth()+a)}}q=q<0?0:q;for(b=0;b<j;b++){n=g[b];a=o[b];if(n.columnWidth){n.setSize(Math.floor(n.columnWidth*q)-a)}}if(Ext.isIE){if(b=k.getStyle(\"overflow\")&&b!=\"hidden\"&&!this.adjustmentPass){var l=this.getLayoutTargetSize();if(l.width!=r.width){this.adjustmentPass=true;this.onLayout(e,k)}}}delete this.adjustmentPass}});Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout;Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,rendered:false,type:\"border\",targetCls:\"x-border-layout-ct\",getLayoutTargetSize:function(){var a=this.container.getLayoutTarget();return a?a.getViewSize():{}},onLayout:function(g,I){var j,B,F,o,x=g.items.items,C=x.length;if(!this.rendered){j=[];for(B=0;B<C;B++){F=x[B];o=F.region;if(F.collapsed){j.push(F)}F.collapsed=false;if(!F.rendered){F.render(I,B);F.getPositionEl().addClass(\"x-border-panel\")}this[o]=o!=\"center\"&&F.split?new Ext.layout.BorderLayout.SplitRegion(this,F.initialConfig,o):new Ext.layout.BorderLayout.Region(this,F.initialConfig,o);this[o].render(I,F)}this.rendered=true}var v=this.getLayoutTargetSize();if(v.width<20||v.height<20){if(j){this.restoreCollapsed=j}return}else{if(this.restoreCollapsed){j=this.restoreCollapsed;delete this.restoreCollapsed}}var t=v.width,D=v.height,r=t,A=D,p=0,q=0,y=this.north,u=this.south,l=this.west,E=this.east,F=this.center,H,z,d,G;if(!F&&Ext.layout.BorderLayout.WARN!==false){throw\"No center region defined in BorderLayout \"+g.id}if(y&&y.isVisible()){H=y.getSize();z=y.getMargins();H.width=t-(z.left+z.right);H.x=z.left;H.y=z.top;p=H.height+H.y+z.bottom;A-=p;y.applyLayout(H)}if(u&&u.isVisible()){H=u.getSize();z=u.getMargins();H.width=t-(z.left+z.right);H.x=z.left;G=(H.height+z.top+z.bottom);H.y=D-G+z.top;A-=G;u.applyLayout(H)}if(l&&l.isVisible()){H=l.getSize();z=l.getMargins();H.height=A-(z.top+z.bottom);H.x=z.left;H.y=p+z.top;d=(H.width+z.left+z.right);q+=d;r-=d;l.applyLayout(H)}if(E&&E.isVisible()){H=E.getSize();z=E.getMargins();H.height=A-(z.top+z.bottom);d=(H.width+z.left+z.right);H.x=t-d+z.left;H.y=p+z.top;r-=d;E.applyLayout(H)}if(F){z=F.getMargins();var k={x:q+z.left,y:p+z.top,width:r-(z.left+z.right),height:A-(z.top+z.bottom)};F.applyLayout(k)}if(j){for(B=0,C=j.length;B<C;B++){j[B].collapse(false)}}if(Ext.isIE&&Ext.isStrict){I.repaint()}if(B=I.getStyle(\"overflow\")&&B!=\"hidden\"&&!this.adjustmentPass){var a=this.getLayoutTargetSize();if(a.width!=v.width||a.height!=v.height){this.adjustmentPass=true;this.onLayout(g,I)}}delete this.adjustmentPass},destroy:function(){var b=[\"north\",\"south\",\"east\",\"west\"],a,c;for(a=0;a<b.length;a++){c=this[b[a]];if(c){if(c.destroy){c.destroy()}else{if(c.split){c.split.destroy(true)}}}}Ext.layout.BorderLayout.superclass.destroy.call(this)}});Ext.layout.BorderLayout.Region=function(b,a,c){Ext.apply(this,a);this.layout=b;this.position=c;this.state={};if(typeof this.margins==\"string\"){this.margins=this.layout.parseMargins(this.margins)}this.margins=Ext.applyIf(this.margins||{},this.defaultMargins);if(this.collapsible){if(typeof this.cmargins==\"string\"){this.cmargins=this.layout.parseMargins(this.cmargins)}if(this.collapseMode==\"mini\"&&!this.cmargins){this.cmargins={left:0,top:0,right:0,bottom:0}}else{this.cmargins=Ext.applyIf(this.cmargins||{},c==\"north\"||c==\"south\"?this.defaultNSCMargins:this.defaultEWCMargins)}}};Ext.layout.BorderLayout.Region.prototype={collapsible:false,split:false,floatable:true,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},floatingZIndex:100,isCollapsed:false,render:function(b,c){this.panel=c;c.el.enableDisplayMode();this.targetEl=b;this.el=c.el;var a=c.getState,d=this.position;c.getState=function(){return Ext.apply(a.call(c)||{},this.state)}.createDelegate(this);if(d!=\"center\"){c.allowQueuedExpand=false;c.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this});if(this.collapsible||this.floatable){c.collapseEl=\"el\";c.slideAnchor=this.getSlideAnchor()}if(c.tools&&c.tools.toggle){c.tools.toggle.addClass(\"x-tool-collapse-\"+d);c.tools.toggle.addClassOnOver(\"x-tool-collapse-\"+d+\"-over\")}}},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var b=new Ext.Template('<div class=\"x-tool x-tool-{id}\">&#160;</div>');b.disableFormats=true;b.compile();Ext.layout.BorderLayout.Region.prototype.toolTemplate=b}this.collapsedEl=this.targetEl.createChild({cls:\"x-layout-collapsed x-layout-collapsed-\"+this.position,id:this.panel.id+\"-xcollapsed\"});this.collapsedEl.enableDisplayMode(\"block\");if(this.collapseMode==\"mini\"){this.collapsedEl.addClass(\"x-layout-cmini-\"+this.position);this.miniCollapsedEl=this.collapsedEl.createChild({cls:\"x-layout-mini x-layout-mini-\"+this.position,html:\"&#160;\"});this.miniCollapsedEl.addClassOnOver(\"x-layout-mini-over\");this.collapsedEl.addClassOnOver(\"x-layout-collapsed-over\");this.collapsedEl.on(\"click\",this.onExpandClick,this,{stopEvent:true})}else{if(this.collapsible!==false&&!this.hideCollapseTool){var a=this.expandToolEl=this.toolTemplate.append(this.collapsedEl.dom,{id:\"expand-\"+this.position},true);a.addClassOnOver(\"x-tool-expand-\"+this.position+\"-over\");a.on(\"click\",this.onExpandClick,this,{stopEvent:true})}if(this.floatable!==false||this.titleCollapse){this.collapsedEl.addClassOnOver(\"x-layout-collapsed-over\");this.collapsedEl.on(\"click\",this[this.floatable?\"collapseClick\":\"onExpandClick\"],this)}}}return this.collapsedEl},onExpandClick:function(a){if(this.isSlid){this.panel.expand(false)}else{this.panel.expand()}},onCollapseClick:function(a){this.panel.collapse()},beforeCollapse:function(c,a){this.lastAnim=a;if(this.splitEl){this.splitEl.hide()}this.getCollapsedEl().show();var b=this.panel.getEl();this.originalZIndex=b.getStyle(\"z-index\");b.setStyle(\"z-index\",100);this.isCollapsed=true;this.layout.layout()},onCollapse:function(a){this.panel.el.setStyle(\"z-index\",1);if(this.lastAnim===false||this.panel.animCollapse===false){this.getCollapsedEl().dom.style.visibility=\"visible\"}else{this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:0.2})}this.state.collapsed=true;this.panel.saveState()},beforeExpand:function(a){if(this.isSlid){this.afterSlideIn()}var b=this.getCollapsedEl();this.el.show();if(this.position==\"east\"||this.position==\"west\"){this.panel.setSize(undefined,b.getHeight())}else{this.panel.setSize(b.getWidth(),undefined)}b.hide();b.dom.style.visibility=\"hidden\";this.panel.el.setStyle(\"z-index\",this.floatingZIndex)},onExpand:function(){this.isCollapsed=false;if(this.splitEl){this.splitEl.show()}this.layout.layout();this.panel.el.setStyle(\"z-index\",this.originalZIndex);this.state.collapsed=false;this.panel.saveState()},collapseClick:function(a){if(this.isSlid){a.stopPropagation();this.slideIn()}else{a.stopPropagation();this.slideOut()}},onHide:function(){if(this.isCollapsed){this.getCollapsedEl().hide()}else{if(this.splitEl){this.splitEl.hide()}}},onShow:function(){if(this.isCollapsed){this.getCollapsedEl().show()}else{if(this.splitEl){this.splitEl.show()}}},isVisible:function(){return !this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(a){this.panel=a},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(a){var b=this.getCollapsedEl();b.setLeftTop(a.x,a.y);b.setSize(a.width,a.height)},applyLayout:function(a){if(this.isCollapsed){this.applyLayoutCollapsed(a)}else{this.panel.setPosition(a.x,a.y);this.panel.setSize(a.width,a.height)}},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){if(this.autoHide!==false){if(!this.autoHideHd){this.autoHideSlideTask=new Ext.util.DelayedTask(this.slideIn,this);this.autoHideHd={mouseout:function(a){if(!a.within(this.el,true)){this.autoHideSlideTask.delay(500)}},mouseover:function(a){this.autoHideSlideTask.cancel()},scope:this}}this.el.on(this.autoHideHd);this.collapsedEl.on(this.autoHideHd)}},clearAutoHide:function(){if(this.autoHide!==false){this.el.un(\"mouseout\",this.autoHideHd.mouseout);this.el.un(\"mouseover\",this.autoHideHd.mouseover);this.collapsedEl.un(\"mouseout\",this.autoHideHd.mouseout);this.collapsedEl.un(\"mouseover\",this.autoHideHd.mouseover)}},clearMonitor:function(){Ext.getDoc().un(\"click\",this.slideInIf,this)},slideOut:function(){if(this.isSlid||this.el.hasActiveFx()){return}this.isSlid=true;var b=this.panel.tools,c,a;if(b&&b.toggle){b.toggle.hide()}this.el.show();a=this.panel.collapsed;this.panel.collapsed=false;if(this.position==\"east\"||this.position==\"west\"){c=this.panel.deferHeight;this.panel.deferHeight=false;this.panel.setSize(undefined,this.collapsedEl.getHeight());this.panel.deferHeight=c}else{this.panel.setSize(this.collapsedEl.getWidth(),undefined)}this.panel.collapsed=a;this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top];this.el.alignTo(this.collapsedEl,this.getCollapseAnchor());this.el.setStyle(\"z-index\",this.floatingZIndex+2);this.panel.el.replaceClass(\"x-panel-collapsed\",\"x-panel-floating\");if(this.animFloat!==false){this.beforeSlide();this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide();this.initAutoHide();Ext.getDoc().on(\"click\",this.slideInIf,this)},scope:this,block:true})}else{this.initAutoHide();Ext.getDoc().on(\"click\",this.slideInIf,this)}},afterSlideIn:function(){this.clearAutoHide();this.isSlid=false;this.clearMonitor();this.el.setStyle(\"z-index\",\"\");this.panel.el.replaceClass(\"x-panel-floating\",\"x-panel-collapsed\");this.el.dom.style.left=this.restoreLT[0];this.el.dom.style.top=this.restoreLT[1];var a=this.panel.tools;if(a&&a.toggle){a.toggle.show()}},slideIn:function(a){if(!this.isSlid||this.el.hasActiveFx()){Ext.callback(a);return}this.isSlid=false;if(this.animFloat!==false){this.beforeSlide();this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide();this.afterSlide();this.afterSlideIn();Ext.callback(a)},scope:this,block:true})}else{this.el.hide();this.afterSlideIn()}},slideInIf:function(a){if(!a.within(this.el)){this.slideIn()}},anchors:{west:\"left\",east:\"right\",north:\"top\",south:\"bottom\"},sanchors:{west:\"l\",east:\"r\",north:\"t\",south:\"b\"},canchors:{west:\"tl-tr\",east:\"tr-tl\",north:\"tl-bl\",south:\"bl-tl\"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){var a=this.cmargins;switch(this.position){case\"west\":return[0,0];break;case\"east\":return[0,0];break;case\"north\":return[0,0];break;case\"south\":return[0,0];break}},getExpandAdj:function(){var b=this.collapsedEl,a=this.cmargins;switch(this.position){case\"west\":return[-(a.right+b.getWidth()+a.left),0];break;case\"east\":return[a.right+b.getWidth()+a.left,0];break;case\"north\":return[0,-(a.top+a.bottom+b.getHeight())];break;case\"south\":return[0,a.top+a.bottom+b.getHeight()];break}},destroy:function(){if(this.autoHideSlideTask&&this.autoHideSlideTask.cancel){this.autoHideSlideTask.cancel()}Ext.destroyMembers(this,\"miniCollapsedEl\",\"collapsedEl\",\"expandToolEl\")}};Ext.layout.BorderLayout.SplitRegion=function(b,a,c){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,b,a,c);this.applyLayout=this.applyFns[c]};Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:\"Drag to resize.\",collapsibleSplitTip:\"Drag to resize. Double click to hide.\",useSplitTips:false,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:\"getVMaxSize\",minProp:\"minHeight\",maxProp:\"maxHeight\"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:\"getVMaxSize\",minProp:\"minHeight\",maxProp:\"maxHeight\"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:\"getHMaxSize\",minProp:\"minWidth\",maxProp:\"maxWidth\"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:\"getHMaxSize\",minProp:\"minWidth\",maxProp:\"maxWidth\"}},applyFns:{west:function(c){if(this.isCollapsed){return this.applyLayoutCollapsed(c)}var d=this.splitEl.dom,b=d.style;this.panel.setPosition(c.x,c.y);var a=d.offsetWidth;b.left=(c.x+c.width-a)+\"px\";b.top=(c.y)+\"px\";b.height=Math.max(0,c.height)+\"px\";this.panel.setSize(c.width-a,c.height)},east:function(c){if(this.isCollapsed){return this.applyLayoutCollapsed(c)}var d=this.splitEl.dom,b=d.style;var a=d.offsetWidth;this.panel.setPosition(c.x+a,c.y);b.left=(c.x)+\"px\";b.top=(c.y)+\"px\";b.height=Math.max(0,c.height)+\"px\";this.panel.setSize(c.width-a,c.height)},north:function(c){if(this.isCollapsed){return this.applyLayoutCollapsed(c)}var d=this.splitEl.dom,b=d.style;var a=d.offsetHeight;this.panel.setPosition(c.x,c.y);b.left=(c.x)+\"px\";b.top=(c.y+c.height-a)+\"px\";b.width=Math.max(0,c.width)+\"px\";this.panel.setSize(c.width,c.height-a)},south:function(c){if(this.isCollapsed){return this.applyLayoutCollapsed(c)}var d=this.splitEl.dom,b=d.style;var a=d.offsetHeight;this.panel.setPosition(c.x,c.y+a);b.left=(c.x)+\"px\";b.top=(c.y)+\"px\";b.width=Math.max(0,c.width)+\"px\";this.panel.setSize(c.width,c.height-a)}},render:function(a,c){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,a,c);var d=this.position;this.splitEl=a.createChild({cls:\"x-layout-split x-layout-split-\"+d,html:\"&#160;\",id:this.panel.id+\"-xsplit\"});if(this.collapseMode==\"mini\"){this.miniSplitEl=this.splitEl.createChild({cls:\"x-layout-mini x-layout-mini-\"+d,html:\"&#160;\"});this.miniSplitEl.addClassOnOver(\"x-layout-mini-over\");this.miniSplitEl.on(\"click\",this.onCollapseClick,this,{stopEvent:true})}var b=this.splitSettings[d];this.split=new Ext.SplitBar(this.splitEl.dom,c.el,b.orientation);this.split.tickSize=this.tickSize;this.split.placement=b.placement;this.split.getMaximumSize=this[b.maxFn].createDelegate(this);this.split.minSize=this.minSize||this[b.minProp];this.split.on(\"beforeapply\",this.onSplitMove,this);this.split.useShim=this.useShim===true;this.maxSize=this.maxSize||this[b.maxProp];if(c.hidden){this.splitEl.hide()}if(this.useSplitTips){this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip}if(this.collapsible){this.splitEl.on(\"dblclick\",this.onCollapseClick,this)}},getSize:function(){if(this.isCollapsed){return this.collapsedEl.getSize()}var a=this.panel.getSize();if(this.position==\"north\"||this.position==\"south\"){a.height+=this.splitEl.dom.offsetHeight}else{a.width+=this.splitEl.dom.offsetWidth}return a},getHMaxSize:function(){var b=this.maxSize||10000;var a=this.layout.center;return Math.min(b,(this.el.getWidth()+a.el.getWidth())-a.getMinWidth())},getVMaxSize:function(){var b=this.maxSize||10000;var a=this.layout.center;return Math.min(b,(this.el.getHeight()+a.el.getHeight())-a.getMinHeight())},onSplitMove:function(b,a){var c=this.panel.getSize();this.lastSplitSize=a;if(this.position==\"north\"||this.position==\"south\"){this.panel.setSize(c.width,a);this.state.height=a}else{this.panel.setSize(a,c.height);this.state.width=a}this.layout.layout();this.panel.saveState();return false},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl);Ext.layout.BorderLayout.SplitRegion.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout;Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:\":\",trackLabels:true,type:\"form\",onRemove:function(d){Ext.layout.FormLayout.superclass.onRemove.call(this,d);if(this.trackLabels){d.un(\"show\",this.onFieldShow,this);d.un(\"hide\",this.onFieldHide,this)}var b=d.getPositionEl(),a=d.getItemCt&&d.getItemCt();if(d.rendered&&a){if(b&&b.dom){b.insertAfter(a)}Ext.destroy(a);Ext.destroyMembers(d,\"label\",\"itemCt\");if(d.customItemCt){Ext.destroyMembers(d,\"getItemCt\",\"customItemCt\")}}},setContainer:function(a){Ext.layout.FormLayout.superclass.setContainer.call(this,a);if(a.labelAlign){a.addClass(\"x-form-label-\"+a.labelAlign)}if(a.hideLabels){Ext.apply(this,{labelStyle:\"display:none\",elementStyle:\"padding-left:0;\",labelAdjust:0})}else{this.labelSeparator=Ext.isDefined(a.labelSeparator)?a.labelSeparator:this.labelSeparator;a.labelWidth=a.labelWidth||100;if(Ext.isNumber(a.labelWidth)){var b=Ext.isNumber(a.labelPad)?a.labelPad:5;Ext.apply(this,{labelAdjust:a.labelWidth+b,labelStyle:\"width:\"+a.labelWidth+\"px;\",elementStyle:\"padding-left:\"+(a.labelWidth+b)+\"px\"})}if(a.labelAlign==\"top\"){Ext.apply(this,{labelStyle:\"width:auto;\",labelAdjust:0,elementStyle:\"padding-left:0;\"})}}},isHide:function(a){return a.hideLabel||this.container.hideLabels},onFieldShow:function(a){a.getItemCt().removeClass(\"x-hide-\"+a.hideMode);if(a.isComposite){a.doLayout()}},onFieldHide:function(a){a.getItemCt().addClass(\"x-hide-\"+a.hideMode)},getLabelStyle:function(e){var b=\"\",c=[this.labelStyle,e];for(var d=0,a=c.length;d<a;++d){if(c[d]){b+=c[d];if(b.substr(-1,1)!=\";\"){b+=\";\"}}}return b},renderItem:function(e,a,d){if(e&&(e.isFormField||e.fieldLabel)&&e.inputType!=\"hidden\"){var b=this.getTemplateArgs(e);if(Ext.isNumber(a)){a=d.dom.childNodes[a]||null}if(a){e.itemCt=this.fieldTpl.insertBefore(a,b,true)}else{e.itemCt=this.fieldTpl.append(d,b,true)}if(!e.getItemCt){Ext.apply(e,{getItemCt:function(){return e.itemCt},customItemCt:true})}e.label=e.getItemCt().child(\"label.x-form-item-label\");if(!e.rendered){e.render(\"x-form-el-\"+e.id)}else{if(!this.isValidParent(e,d)){Ext.fly(\"x-form-el-\"+e.id).appendChild(e.getPositionEl())}}if(this.trackLabels){if(e.hidden){this.onFieldHide(e)}e.on({scope:this,show:this.onFieldShow,hide:this.onFieldHide})}this.configureItem(e)}else{Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)}},getTemplateArgs:function(c){var a=!c.fieldLabel||c.hideLabel,b=(c.itemCls||this.container.itemCls||\"\")+(c.hideLabel?\" x-hide-label\":\"\");if(Ext.isIE9&&Ext.isIEQuirks&&c instanceof Ext.form.TextField){b+=\" x-input-wrapper\"}return{id:c.id,label:c.fieldLabel,itemCls:b,clearCls:c.clearCls||\"x-form-clear-left\",labelStyle:this.getLabelStyle(c.labelStyle),elementStyle:this.elementStyle||\"\",labelSeparator:a?\"\":(Ext.isDefined(c.labelSeparator)?c.labelSeparator:this.labelSeparator)}},adjustWidthAnchor:function(a,d){if(d.label&&!this.isHide(d)&&(this.container.labelAlign!=\"top\")){var b=Ext.isIE6||(Ext.isIE&&!Ext.isStrict);return a-this.labelAdjust+(b?-3:0)}return a},adjustHeightAnchor:function(a,b){if(b.label&&!this.isHide(b)&&(this.container.labelAlign==\"top\")){return a-b.label.getHeight()}return a},isValidParent:function(b,a){return a&&this.container.getEl().contains(b.getPositionEl())}});Ext.Container.LAYOUTS.form=Ext.layout.FormLayout;Ext.layout.AccordionLayout=Ext.extend(Ext.layout.FitLayout,{fill:true,autoWidth:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:false,animate:false,sequence:false,activeOnTop:false,type:\"accordion\",renderItem:function(a){if(this.animate===false){a.animCollapse=false}a.collapsible=true;if(this.autoWidth){a.autoWidth=true}if(this.titleCollapse){a.titleCollapse=true}if(this.hideCollapseTool){a.hideCollapseTool=true}if(this.collapseFirst!==undefined){a.collapseFirst=this.collapseFirst}if(!this.activeItem&&!a.collapsed){this.setActiveItem(a,true)}else{if(this.activeItem&&this.activeItem!=a){a.collapsed=true}}Ext.layout.AccordionLayout.superclass.renderItem.apply(this,arguments);a.header.addClass(\"x-accordion-hd\");a.on(\"beforeexpand\",this.beforeExpand,this)},onRemove:function(a){Ext.layout.AccordionLayout.superclass.onRemove.call(this,a);if(a.rendered){a.header.removeClass(\"x-accordion-hd\")}a.un(\"beforeexpand\",this.beforeExpand,this)},beforeExpand:function(c,b){var a=this.activeItem;if(a){if(this.sequence){delete this.activeItem;if(!a.collapsed){a.collapse({callback:function(){c.expand(b||true)},scope:this});return false}}else{a.collapse(this.animate)}}this.setActive(c);if(this.activeOnTop){c.el.dom.parentNode.insertBefore(c.el.dom,c.el.dom.parentNode.firstChild)}this.layout()},setItemSize:function(g,e){if(this.fill&&g){var d=0,c,b=this.getRenderedItems(this.container),a=b.length,h;for(c=0;c<a;c++){if((h=b[c])!=g&&!h.hidden){d+=h.header.getHeight()}}e.height-=d;g.setSize(e)}},setActiveItem:function(a){this.setActive(a,true)},setActive:function(c,b){var a=this.activeItem;c=this.container.getComponent(c);if(a!=c){if(c.rendered&&c.collapsed&&b){c.expand()}else{if(a){a.fireEvent(\"deactivate\",a)}this.activeItem=c;c.fireEvent(\"activate\",c)}}}});Ext.Container.LAYOUTS.accordion=Ext.layout.AccordionLayout;Ext.layout.Accordion=Ext.layout.AccordionLayout;Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:false,type:\"table\",targetCls:\"x-table-layout-ct\",tableAttrs:null,setContainer:function(a){Ext.layout.TableLayout.superclass.setContainer.call(this,a);this.currentRow=0;this.currentColumn=0;this.cells=[]},onLayout:function(d,g){var e=d.items.items,a=e.length,h,b;if(!this.table){g.addClass(\"x-table-layout-ct\");this.table=g.createChild(Ext.apply({tag:\"table\",cls:\"x-table-layout\",cellspacing:0,cn:{tag:\"tbody\"}},this.tableAttrs),null,true)}this.renderAll(d,g)},getRow:function(a){var b=this.table.tBodies[0].childNodes[a];if(!b){b=document.createElement(\"tr\");this.table.tBodies[0].appendChild(b)}return b},getNextCell:function(j){var a=this.getNextNonSpan(this.currentColumn,this.currentRow);var g=this.currentColumn=a[0],e=this.currentRow=a[1];for(var i=e;i<e+(j.rowspan||1);i++){if(!this.cells[i]){this.cells[i]=[]}for(var d=g;d<g+(j.colspan||1);d++){this.cells[i][d]=true}}var h=document.createElement(\"td\");if(j.cellId){h.id=j.cellId}var b=\"x-table-layout-cell\";if(j.cellCls){b+=\" \"+j.cellCls}h.className=b;if(j.colspan){h.colSpan=j.colspan}if(j.rowspan){h.rowSpan=j.rowspan}this.getRow(e).appendChild(h);return h},getNextNonSpan:function(a,c){var b=this.columns;while((b&&a>=b)||(this.cells[c]&&this.cells[c][a])){if(b&&a>=b){c++;a=0}else{a++}}return[a,c]},renderItem:function(e,a,d){if(!this.table){this.table=d.createChild(Ext.apply({tag:\"table\",cls:\"x-table-layout\",cellspacing:0,cn:{tag:\"tbody\"}},this.tableAttrs),null,true)}if(e&&!e.rendered){e.render(this.getNextCell(e));this.configureItem(e)}else{if(e&&!this.isValidParent(e,d)){var b=this.getNextCell(e);b.insertBefore(e.getPositionEl().dom,null);e.container=Ext.get(b);this.configureItem(e)}}},isValidParent:function(b,a){return b.getPositionEl().up(\"table\",5).dom.parentNode===(a.dom||a)},destroy:function(){delete this.table;Ext.layout.TableLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.table=Ext.layout.TableLayout;Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:\"x-abs-layout-item\",type:\"absolute\",onLayout:function(a,b){b.position();this.paddingLeft=b.getPadding(\"l\");this.paddingTop=b.getPadding(\"t\");Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,a,b)},adjustWidthAnchor:function(b,a){return b?b-a.getPosition(true)[0]+this.paddingLeft:b},adjustHeightAnchor:function(b,a){return b?b-a.getPosition(true)[1]+this.paddingTop:b}});Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout;Ext.layout.BoxLayout=Ext.extend(Ext.layout.ContainerLayout,{defaultMargins:{left:0,top:0,right:0,bottom:0},padding:\"0\",pack:\"start\",monitorResize:true,type:\"box\",scrollOffset:0,extraCls:\"x-box-item\",targetCls:\"x-box-layout-ct\",innerCls:\"x-box-inner\",constructor:function(a){Ext.layout.BoxLayout.superclass.constructor.call(this,a);if(Ext.isString(this.defaultMargins)){this.defaultMargins=this.parseMargins(this.defaultMargins)}var d=this.overflowHandler;if(typeof d==\"string\"){d={type:d}}var c=\"none\";if(d&&d.type!=undefined){c=d.type}var b=Ext.layout.boxOverflow[c];if(b[this.type]){b=b[this.type]}this.overflowHandler=new b(this,d)},onLayout:function(b,h){Ext.layout.BoxLayout.superclass.onLayout.call(this,b,h);var d=this.getLayoutTargetSize(),i=this.getVisibleItems(b),c=this.calculateChildBoxes(i,d),g=c.boxes,j=c.meta;if(d.width>0){var k=this.overflowHandler,a=j.tooNarrow?\"handleOverflow\":\"clearOverflow\";var e=k[a](c,d);if(e){if(e.targetSize){d=e.targetSize}if(e.recalculate){i=this.getVisibleItems(b);c=this.calculateChildBoxes(i,d);g=c.boxes}}}this.layoutTargetLastSize=d;this.childBoxCache=c;this.updateInnerCtSize(d,c);this.updateChildBoxes(g);this.handleTargetOverflow(d,b,h)},updateChildBoxes:function(c){for(var b=0,e=c.length;b<e;b++){var d=c[b],a=d.component;if(d.dirtySize){a.setSize(d.width,d.height)}if(isNaN(d.left)||isNaN(d.top)){continue}a.setPosition(d.left,d.top)}},updateInnerCtSize:function(c,h){var i=this.align,g=this.padding,e=c.width,a=c.height;if(this.type==\"hbox\"){var b=e,d=h.meta.maxHeight+g.top+g.bottom;if(i==\"stretch\"){d=a}else{if(i==\"middle\"){d=Math.max(a,d)}}}else{var d=a,b=h.meta.maxWidth+g.left+g.right;if(i==\"stretch\"){b=e}else{if(i==\"center\"){b=Math.max(e,b)}}}this.innerCt.setSize(b||undefined,d||undefined)},handleTargetOverflow:function(d,a,c){var e=c.getStyle(\"overflow\");if(e&&e!=\"hidden\"&&!this.adjustmentPass){var b=this.getLayoutTargetSize();if(b.width!=d.width||b.height!=d.height){this.adjustmentPass=true;this.onLayout(a,c)}}delete this.adjustmentPass},isValidParent:function(b,a){return this.innerCt&&b.getPositionEl().dom.parentNode==this.innerCt.dom},getVisibleItems:function(g){var g=g||this.container,e=g.getLayoutTarget(),h=g.items.items,a=h.length,d,j,b=[];for(d=0;d<a;d++){if((j=h[d]).rendered&&this.isValidParent(j,e)&&j.hidden!==true&&j.collapsed!==true&&j.shouldLayout!==false){b.push(j)}}return b},renderAll:function(a,b){if(!this.innerCt){this.innerCt=b.createChild({cls:this.innerCls});this.padding=this.parseMargins(this.padding)}Ext.layout.BoxLayout.superclass.renderAll.call(this,a,this.innerCt)},getLayoutTargetSize:function(){var b=this.container.getLayoutTarget(),a;if(b){a=b.getViewSize();if(Ext.isIE&&Ext.isStrict&&a.width==0){a=b.getStyleSize()}a.width-=b.getPadding(\"lr\");a.height-=b.getPadding(\"tb\")}return a},renderItem:function(a){if(Ext.isString(a.margins)){a.margins=this.parseMargins(a.margins)}else{if(!a.margins){a.margins=this.defaultMargins}}Ext.layout.BoxLayout.superclass.renderItem.apply(this,arguments)},destroy:function(){Ext.destroy(this.overflowHandler);Ext.layout.BoxLayout.superclass.destroy.apply(this,arguments)}});Ext.layout.boxOverflow.None=Ext.extend(Object,{constructor:function(b,a){this.layout=b;Ext.apply(this,a||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn});Ext.layout.boxOverflow.none=Ext.layout.boxOverflow.None;Ext.layout.boxOverflow.Menu=Ext.extend(Ext.layout.boxOverflow.None,{afterCls:\"x-strip-right\",noItemsMenuText:'<div class=\"x-toolbar-no-items\">(None)</div>',constructor:function(a){Ext.layout.boxOverflow.Menu.superclass.constructor.apply(this,arguments);this.menuItems=[]},createInnerElements:function(){if(!this.afterCt){this.afterCt=this.layout.innerCt.insertSibling({cls:this.afterCls},\"before\")}},clearOverflow:function(a,g){var e=g.width+(this.afterCt?this.afterCt.getWidth():0),b=this.menuItems;this.hideTrigger();for(var c=0,d=b.length;c<d;c++){b.pop().component.show()}return{targetSize:{height:g.height,width:e}}},showTrigger:function(){this.createMenu();this.menuTrigger.show()},hideTrigger:function(){if(this.menuTrigger!=undefined){this.menuTrigger.hide()}},beforeMenuShow:function(h){var b=this.menuItems,a=b.length,g,e;var c=function(j,i){return j.isXType(\"buttongroup\")&&!(i instanceof Ext.Toolbar.Separator)};this.clearMenu();h.removeAll();for(var d=0;d<a;d++){g=b[d].component;if(e&&(c(g,e)||c(e,g))){h.add(\"-\")}this.addComponentToMenu(h,g);e=g}if(h.items.length<1){h.add(this.noItemsMenuText)}},createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),d=c.toggleGroup;Ext.copyTo(b,c,[\"iconCls\",\"icon\",\"itemId\",\"disabled\",\"handler\",\"scope\",\"menu\"]);Ext.apply(b,{text:c.overflowText||c.text,hideOnClick:a});if(d||c.enableToggle){Ext.apply(b,{group:d,checked:c.pressed,listeners:{checkchange:function(g,e){c.toggle(e)}}})}delete b.ownerCt;delete b.xtype;delete b.id;return b},addComponentToMenu:function(b,a){if(a instanceof Ext.Toolbar.Separator){b.add(\"-\")}else{if(Ext.isFunction(a.isXType)){if(a.isXType(\"splitbutton\")){b.add(this.createMenuConfig(a,true))}else{if(a.isXType(\"button\")){b.add(this.createMenuConfig(a,!a.menu))}else{if(a.isXType(\"buttongroup\")){a.items.each(function(c){this.addComponentToMenu(b,c)},this)}}}}}},clearMenu:function(){var a=this.moreMenu;if(a&&a.items){a.items.each(function(b){delete b.menu})}},createMenu:function(){if(!this.menuTrigger){this.createInnerElements();this.menu=new Ext.menu.Menu({ownerCt:this.layout.container,listeners:{scope:this,beforeshow:this.beforeMenuShow}});this.menuTrigger=new Ext.Button({iconCls:\"x-toolbar-more-icon\",cls:\"x-toolbar-more\",menu:this.menu,renderTo:this.afterCt})}},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}});Ext.layout.boxOverflow.menu=Ext.layout.boxOverflow.Menu;Ext.layout.boxOverflow.HorizontalMenu=Ext.extend(Ext.layout.boxOverflow.Menu,{constructor:function(){Ext.layout.boxOverflow.HorizontalMenu.superclass.constructor.apply(this,arguments);var c=this,b=c.layout,a=b.calculateChildBoxes;b.calculateChildBoxes=function(d,i){var l=a.apply(b,arguments),k=l.meta,e=c.menuItems;var j=0;for(var g=0,h=e.length;g<h;g++){j+=e[g].width}k.minimumWidth+=j;k.tooNarrow=k.minimumWidth>i.width;return l}},handleOverflow:function(d,h){this.showTrigger();var k=h.width-this.afterCt.getWidth(),l=d.boxes,e=0,r=false;for(var o=0,c=l.length;o<c;o++){e+=l[o].width}var a=k-e,g=0;for(var o=0,c=this.menuItems.length;o<c;o++){var n=this.menuItems[o],m=n.component,b=n.width;if(b<a){m.show();a-=b;g++;r=true}else{break}}if(r){this.menuItems=this.menuItems.slice(g)}else{for(var j=l.length-1;j>=0;j--){var q=l[j].component,p=l[j].left+l[j].width;if(p>=k){this.menuItems.unshift({component:q,width:l[j].width});q.hide()}else{break}}}if(this.menuItems.length==0){this.hideTrigger()}return{targetSize:{height:h.height,width:k},recalculate:r}}});Ext.layout.boxOverflow.menu.hbox=Ext.layout.boxOverflow.HorizontalMenu;Ext.layout.boxOverflow.Scroller=Ext.extend(Ext.layout.boxOverflow.None,{animateScroll:true,scrollIncrement:100,wheelIncrement:3,scrollRepeatInterval:400,scrollDuration:0.4,beforeCls:\"x-strip-left\",afterCls:\"x-strip-right\",scrollerCls:\"x-strip-scroller\",beforeScrollerCls:\"x-strip-scroller-left\",afterScrollerCls:\"x-strip-scroller-right\",createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(a){a.stopEvent();this.scrollBy(a.getWheelDelta()*this.wheelIncrement*-1,false)}})},handleOverflow:function(a,b){this.createInnerElements();this.showScrollers()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers();this.beforeScroller.show();this.afterScroller.show();this.updateScrollButtons()},hideScrollers:function(){if(this.beforeScroller!=undefined){this.beforeScroller.hide();this.afterScroller.hide()}},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var a=this.beforeCt.createChild({cls:String.format(\"{0} {1} \",this.scrollerCls,this.beforeScrollerCls)});var b=this.afterCt.createChild({cls:String.format(\"{0} {1}\",this.scrollerCls,this.afterScrollerCls)});a.addClassOnOver(this.beforeScrollerCls+\"-hover\");b.addClassOnOver(this.afterScrollerCls+\"-hover\");a.setVisibilityMode(Ext.Element.DISPLAY);b.setVisibilityMode(Ext.Element.DISPLAY);this.beforeRepeater=new Ext.util.ClickRepeater(a,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this});this.afterRepeater=new Ext.util.ClickRepeater(b,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this});this.beforeScroller=a;this.afterScroller=b}},destroy:function(){Ext.destroy(this.beforeScroller,this.afterScroller,this.beforeRepeater,this.afterRepeater,this.beforeCt,this.afterCt)},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getItem:function(a){if(Ext.isString(a)){a=Ext.getCmp(a)}else{if(Ext.isNumber(a)){a=this.items[a]}}return a},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller==undefined||this.afterScroller==undefined){return}var d=this.atExtremeBefore()?\"addClass\":\"removeClass\",c=this.atExtremeAfter()?\"addClass\":\"removeClass\",a=this.beforeScrollerCls+\"-disabled\",b=this.afterScrollerCls+\"-disabled\";this.beforeScroller[d](a);this.afterScroller[c](b);this.scrolling=false},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(a){this.scrollBy(-this.scrollIncrement,a)},scrollRight:function(a){this.scrollBy(this.scrollIncrement,a)},scrollToItem:function(d,b){d=this.getItem(d);if(d!=undefined){var a=this.getItemVisibility(d);if(!a.fullyVisible){var c=d.getBox(true,true),e=c.x;if(a.hiddenRight){e-=(this.layout.innerCt.getWidth()-c.width)}this.scrollTo(e,b)}}},getItemVisibility:function(e){var d=this.getItem(e).getBox(true,true),a=d.x,c=d.x+d.width,g=this.getScrollPosition(),b=this.layout.innerCt.getWidth()+g;return{hiddenLeft:a<g,hiddenRight:c>b,fullyVisible:a>g&&c<b}}});Ext.layout.boxOverflow.scroller=Ext.layout.boxOverflow.Scroller;Ext.layout.boxOverflow.VerticalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{scrollIncrement:75,wheelIncrement:2,handleOverflow:function(a,b){Ext.layout.boxOverflow.VerticalScroller.superclass.handleOverflow.apply(this,arguments);return{targetSize:{height:b.height-(this.beforeCt.getHeight()+this.afterCt.getHeight()),width:b.width}}},createInnerElements:function(){var a=this.layout.innerCt;if(!this.beforeCt){this.beforeCt=a.insertSibling({cls:this.beforeCls},\"before\");this.afterCt=a.insertSibling({cls:this.afterCls},\"after\");this.createWheelListener()}},scrollTo:function(a,b){var d=this.getScrollPosition(),c=a.constrain(0,this.getMaxScrollBottom());if(c!=d&&!this.scrolling){if(b==undefined){b=this.animateScroll}this.layout.innerCt.scrollTo(\"top\",c,b?this.getScrollAnim():false);if(b){this.scrolling=true}else{this.scrolling=false;this.updateScrollButtons()}}},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollTop,10)||0},getMaxScrollBottom:function(){return this.layout.innerCt.dom.scrollHeight-this.layout.innerCt.getHeight()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollBottom()}});Ext.layout.boxOverflow.scroller.vbox=Ext.layout.boxOverflow.VerticalScroller;Ext.layout.boxOverflow.HorizontalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{handleOverflow:function(a,b){Ext.layout.boxOverflow.HorizontalScroller.superclass.handleOverflow.apply(this,arguments);return{targetSize:{height:b.height,width:b.width-(this.beforeCt.getWidth()+this.afterCt.getWidth())}}},createInnerElements:function(){var a=this.layout.innerCt;if(!this.beforeCt){this.afterCt=a.insertSibling({cls:this.afterCls},\"before\");this.beforeCt=a.insertSibling({cls:this.beforeCls},\"before\");this.createWheelListener()}},scrollTo:function(a,b){var d=this.getScrollPosition(),c=a.constrain(0,this.getMaxScrollRight());if(c!=d&&!this.scrolling){if(b==undefined){b=this.animateScroll}this.layout.innerCt.scrollTo(\"left\",c,b?this.getScrollAnim():false);if(b){this.scrolling=true}else{this.scrolling=false;this.updateScrollButtons()}}},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollLeft,10)||0},getMaxScrollRight:function(){return this.layout.innerCt.dom.scrollWidth-this.layout.innerCt.getWidth()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollRight()}});Ext.layout.boxOverflow.scroller.hbox=Ext.layout.boxOverflow.HorizontalScroller;Ext.layout.HBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:\"top\",type:\"hbox\",calculateChildBoxes:function(r,b){var F=r.length,R=this.padding,D=R.top,U=R.left,y=D+R.bottom,O=U+R.right,a=b.width-this.scrollOffset,e=b.height,o=Math.max(0,e-y),P=this.pack==\"start\",W=this.pack==\"center\",A=this.pack==\"end\",L=0,Q=0,T=0,l=0,X=0,H=[],k,J,M,V,w,j,S,I,c,x,q,N;for(S=0;S<F;S++){k=r[S];M=k.height;J=k.width;j=!k.hasLayout&&typeof k.doLayout==\"function\";if(typeof J!=\"number\"){if(k.flex&&!J){T+=k.flex}else{if(!J&&j){k.doLayout()}V=k.getSize();J=V.width;M=V.height}}w=k.margins;x=w.left+w.right;L+=x+(J||0);l+=x+(k.flex?k.minWidth||0:J);X+=x+(k.minWidth||J||0);if(typeof M!=\"number\"){if(j){k.doLayout()}M=k.getHeight()}Q=Math.max(Q,M+w.top+w.bottom);H.push({component:k,height:M||undefined,width:J||undefined})}var K=l-a,p=X>a;var n=Math.max(0,a-L-O);if(p){for(S=0;S<F;S++){H[S].width=r[S].minWidth||r[S].width||H[S].width}}else{if(K>0){var C=[];for(var E=0,v=F;E<v;E++){var B=r[E],t=B.minWidth||0;if(B.flex){H[E].width=t}else{C.push({minWidth:t,available:H[E].width-t,index:E})}}C.sort(function(Y,i){return Y.available>i.available?1:-1});for(var S=0,v=C.length;S<v;S++){var G=C[S].index;if(G==undefined){continue}var B=r[G],m=H[G],u=m.width,t=B.minWidth,d=Math.max(t,u-Math.ceil(K/(v-S))),g=u-d;H[G].width=d;K-=g}}else{var h=n,s=T;for(S=0;S<F;S++){k=r[S];I=H[S];w=k.margins;q=w.top+w.bottom;if(P&&k.flex&&!k.width){c=Math.ceil((k.flex/s)*h);h-=c;s-=k.flex;I.width=c;I.dirtySize=true}}}}if(W){U+=n/2}else{if(A){U+=n}}for(S=0;S<F;S++){k=r[S];I=H[S];w=k.margins;U+=w.left;q=w.top+w.bottom;I.left=U;I.top=D+w.top;switch(this.align){case\"stretch\":N=o-q;I.height=N.constrain(k.minHeight||0,k.maxHeight||1000000);I.dirtySize=true;break;case\"stretchmax\":N=Q-q;I.height=N.constrain(k.minHeight||0,k.maxHeight||1000000);I.dirtySize=true;break;case\"middle\":var z=o-I.height-q;if(z>0){I.top=D+q+(z/2)}}U+=I.width+w.right}return{boxes:H,meta:{maxHeight:Q,nonFlexWidth:L,desiredWidth:l,minimumWidth:X,shortfall:l-a,tooNarrow:p}}}});Ext.Container.LAYOUTS.hbox=Ext.layout.HBoxLayout;Ext.layout.VBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:\"left\",type:\"vbox\",calculateChildBoxes:function(o,b){var E=o.length,R=this.padding,C=R.top,V=R.left,x=C+R.bottom,O=V+R.right,a=b.width-this.scrollOffset,c=b.height,K=Math.max(0,a-O),P=this.pack==\"start\",X=this.pack==\"center\",z=this.pack==\"end\",k=0,u=0,U=0,L=0,m=0,G=[],h,I,N,W,t,g,T,H,S,w,n,d,r;for(T=0;T<E;T++){h=o[T];N=h.height;I=h.width;g=!h.hasLayout&&typeof h.doLayout==\"function\";if(typeof N!=\"number\"){if(h.flex&&!N){U+=h.flex}else{if(!N&&g){h.doLayout()}W=h.getSize();I=W.width;N=W.height}}t=h.margins;n=t.top+t.bottom;k+=n+(N||0);L+=n+(h.flex?h.minHeight||0:N);m+=n+(h.minHeight||N||0);if(typeof I!=\"number\"){if(g){h.doLayout()}I=h.getWidth()}u=Math.max(u,I+t.left+t.right);G.push({component:h,height:N||undefined,width:I||undefined})}var M=L-c,l=m>c;var q=Math.max(0,(c-k-x));if(l){for(T=0,r=E;T<r;T++){G[T].height=o[T].minHeight||o[T].height||G[T].height}}else{if(M>0){var J=[];for(var D=0,r=E;D<r;D++){var A=o[D],s=A.minHeight||0;if(A.flex){G[D].height=s}else{J.push({minHeight:s,available:G[D].height-s,index:D})}}J.sort(function(Y,i){return Y.available>i.available?1:-1});for(var T=0,r=J.length;T<r;T++){var F=J[T].index;if(F==undefined){continue}var A=o[F],j=G[F],v=j.height,s=A.minHeight,B=Math.max(s,v-Math.ceil(M/(r-T))),e=v-B;G[F].height=B;M-=e}}else{var Q=q,p=U;for(T=0;T<E;T++){h=o[T];H=G[T];t=h.margins;w=t.left+t.right;if(P&&h.flex&&!h.height){S=Math.ceil((h.flex/p)*Q);Q-=S;p-=h.flex;H.height=S;H.dirtySize=true}}}}if(X){C+=q/2}else{if(z){C+=q}}for(T=0;T<E;T++){h=o[T];H=G[T];t=h.margins;C+=t.top;w=t.left+t.right;H.left=V+t.left;H.top=C;switch(this.align){case\"stretch\":d=K-w;H.width=d.constrain(h.minWidth||0,h.maxWidth||1000000);H.dirtySize=true;break;case\"stretchmax\":d=u-w;H.width=d.constrain(h.minWidth||0,h.maxWidth||1000000);H.dirtySize=true;break;case\"center\":var y=K-H.width-w;if(y>0){H.left=V+w+(y/2)}}C+=H.height+t.bottom}return{boxes:G,meta:{maxWidth:u,nonFlexHeight:k,desiredHeight:L,minimumHeight:m,shortfall:L-c,tooNarrow:l}}}});Ext.Container.LAYOUTS.vbox=Ext.layout.VBoxLayout;Ext.layout.ToolbarLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"toolbar\",triggerWidth:18,noItemsMenuText:'<div class=\"x-toolbar-no-items\">(None)</div>',lastOverflow:false,tableHTML:['<table cellspacing=\"0\" class=\"x-toolbar-ct\">',\"<tbody>\",\"<tr>\",'<td class=\"x-toolbar-left\" align=\"{0}\">','<table cellspacing=\"0\">',\"<tbody>\",'<tr class=\"x-toolbar-left-row\"></tr>',\"</tbody>\",\"</table>\",\"</td>\",'<td class=\"x-toolbar-right\" align=\"right\">','<table cellspacing=\"0\" class=\"x-toolbar-right-ct\">',\"<tbody>\",\"<tr>\",\"<td>\",'<table cellspacing=\"0\">',\"<tbody>\",'<tr class=\"x-toolbar-right-row\"></tr>',\"</tbody>\",\"</table>\",\"</td>\",\"<td>\",'<table cellspacing=\"0\">',\"<tbody>\",'<tr class=\"x-toolbar-extras-row\"></tr>',\"</tbody>\",\"</table>\",\"</td>\",\"</tr>\",\"</tbody>\",\"</table>\",\"</td>\",\"</tr>\",\"</tbody>\",\"</table>\"].join(\"\"),onLayout:function(e,j){if(!this.leftTr){var h=e.buttonAlign==\"center\"?\"center\":\"left\";j.addClass(\"x-toolbar-layout-ct\");j.insertHtml(\"beforeEnd\",String.format(this.tableHTML,h));this.leftTr=j.child(\"tr.x-toolbar-left-row\",true);this.rightTr=j.child(\"tr.x-toolbar-right-row\",true);this.extrasTr=j.child(\"tr.x-toolbar-extras-row\",true);if(this.hiddenItem==undefined){this.hiddenItems=[]}}var k=e.buttonAlign==\"right\"?this.rightTr:this.leftTr,l=e.items.items,d=0;for(var b=0,g=l.length,m;b<g;b++,d++){m=l[b];if(m.isFill){k=this.rightTr;d=-1}else{if(!m.rendered){m.render(this.insertCell(m,k,d));this.configureItem(m)}else{if(!m.xtbHidden&&!this.isValidParent(m,k.childNodes[d])){var a=this.insertCell(m,k,d);a.appendChild(m.getPositionEl().dom);m.container=Ext.get(a)}}}}this.cleanup(this.leftTr);this.cleanup(this.rightTr);this.cleanup(this.extrasTr);this.fitToSize(j)},cleanup:function(b){var e=b.childNodes,a,d;for(a=e.length-1;a>=0&&(d=e[a]);a--){if(!d.firstChild){b.removeChild(d)}}},insertCell:function(e,b,a){var d=document.createElement(\"td\");d.className=\"x-toolbar-cell\";b.insertBefore(d,b.childNodes[a]||null);return d},hideItem:function(a){this.hiddenItems.push(a);a.xtbHidden=true;a.xtbWidth=a.getPositionEl().dom.parentNode.offsetWidth;a.hide()},unhideItem:function(a){a.show();a.xtbHidden=false;this.hiddenItems.remove(a)},getItemWidth:function(a){return a.hidden?(a.xtbWidth||0):a.getPositionEl().dom.parentNode.offsetWidth},fitToSize:function(k){if(this.container.enableOverflow===false){return}var b=k.dom.clientWidth,j=k.dom.firstChild.offsetWidth,m=b-this.triggerWidth,a=this.lastWidth||0,c=this.hiddenItems,e=c.length!=0,n=b>=a;this.lastWidth=b;if(j>b||(e&&n)){var l=this.container.items.items,h=l.length,d=0,o;for(var g=0;g<h;g++){o=l[g];if(!o.isFill){d+=this.getItemWidth(o);if(d>m){if(!(o.hidden||o.xtbHidden)){this.hideItem(o)}}else{if(o.xtbHidden){this.unhideItem(o)}}}}}e=c.length!=0;if(e){this.initMore();if(!this.lastOverflow){this.container.fireEvent(\"overflowchange\",this.container,true);this.lastOverflow=true}}else{if(this.more){this.clearMenu();this.more.destroy();delete this.more;if(this.lastOverflow){this.container.fireEvent(\"overflowchange\",this.container,false);this.lastOverflow=false}}}},createMenuConfig:function(c,a){var b=Ext.apply({},c.initialConfig),d=c.toggleGroup;Ext.copyTo(b,c,[\"iconCls\",\"icon\",\"itemId\",\"disabled\",\"handler\",\"scope\",\"menu\"]);Ext.apply(b,{text:c.overflowText||c.text,hideOnClick:a});if(d||c.enableToggle){Ext.apply(b,{group:d,checked:c.pressed,listeners:{checkchange:function(g,e){c.toggle(e)}}})}delete b.ownerCt;delete b.xtype;delete b.id;return b},addComponentToMenu:function(b,a){if(a instanceof Ext.Toolbar.Separator){b.add(\"-\")}else{if(Ext.isFunction(a.isXType)){if(a.isXType(\"splitbutton\")){b.add(this.createMenuConfig(a,true))}else{if(a.isXType(\"button\")){b.add(this.createMenuConfig(a,!a.menu))}else{if(a.isXType(\"buttongroup\")){a.items.each(function(c){this.addComponentToMenu(b,c)},this)}}}}}},clearMenu:function(){var a=this.moreMenu;if(a&&a.items){a.items.each(function(b){delete b.menu})}},beforeMoreShow:function(h){var b=this.container.items.items,a=b.length,g,e;var c=function(j,i){return j.isXType(\"buttongroup\")&&!(i instanceof Ext.Toolbar.Separator)};this.clearMenu();h.removeAll();for(var d=0;d<a;d++){g=b[d];if(g.xtbHidden){if(e&&(c(g,e)||c(e,g))){h.add(\"-\")}this.addComponentToMenu(h,g);e=g}}if(h.items.length<1){h.add(this.noItemsMenuText)}},initMore:function(){if(!this.more){this.moreMenu=new Ext.menu.Menu({ownerCt:this.container,listeners:{beforeshow:this.beforeMoreShow,scope:this}});this.more=new Ext.Button({iconCls:\"x-toolbar-more-icon\",cls:\"x-toolbar-more\",menu:this.moreMenu,ownerCt:this.container});var a=this.insertCell(this.more,this.extrasTr,100);this.more.render(a)}},destroy:function(){Ext.destroy(this.more,this.moreMenu);delete this.leftTr;delete this.rightTr;delete this.extrasTr;Ext.layout.ToolbarLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.toolbar=Ext.layout.ToolbarLayout;Ext.layout.MenuLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:\"menu\",setContainer:function(a){this.monitorResize=!a.floating;a.on(\"autosize\",this.doAutoSize,this);Ext.layout.MenuLayout.superclass.setContainer.call(this,a)},renderItem:function(g,b,e){if(!this.itemTpl){this.itemTpl=Ext.layout.MenuLayout.prototype.itemTpl=new Ext.XTemplate('<li id=\"{itemId}\" class=\"{itemCls}\">','<tpl if=\"needsIcon\">','<img alt=\"{altText}\" src=\"{icon}\" class=\"{iconCls}\"/>',\"</tpl>\",\"</li>\")}if(g&&!g.rendered){if(Ext.isNumber(b)){b=e.dom.childNodes[b]}var d=this.getItemArgs(g);g.render(g.positionEl=b?this.itemTpl.insertBefore(b,d,true):this.itemTpl.append(e,d,true));g.positionEl.menuItemId=g.getItemId();if(!d.isMenuItem&&d.needsIcon){g.positionEl.addClass(\"x-menu-list-item-indent\")}this.configureItem(g)}else{if(g&&!this.isValidParent(g,e)){if(Ext.isNumber(b)){b=e.dom.childNodes[b]}e.dom.insertBefore(g.getActionEl().dom,b||null)}}},getItemArgs:function(d){var a=d instanceof Ext.menu.Item,b=!(a||d instanceof Ext.menu.Separator);return{isMenuItem:a,needsIcon:b&&(d.icon||d.iconCls),icon:d.icon||Ext.BLANK_IMAGE_URL,iconCls:\"x-menu-item-icon \"+(d.iconCls||\"\"),itemId:\"x-menu-el-\"+d.id,itemCls:\"x-menu-list-item \",altText:d.altText||\"\"}},isValidParent:function(b,a){return b.el.up(\"li.x-menu-list-item\",5).dom.parentNode===(a.dom||a)},onLayout:function(a,b){Ext.layout.MenuLayout.superclass.onLayout.call(this,a,b);this.doAutoSize()},doAutoSize:function(){var c=this.container,a=c.width;if(c.floating){if(a){c.setWidth(a)}else{if(Ext.isIE){c.setWidth(Ext.isStrict&&(Ext.isIE7||Ext.isIE8||Ext.isIE9)?\"auto\":c.minWidth);var d=c.getEl(),b=d.dom.offsetWidth;c.setWidth(c.getLayoutTarget().getWidth()+d.getFrameWidth(\"lr\"))}}}}});Ext.Container.LAYOUTS.menu=Ext.layout.MenuLayout;Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this);document.getElementsByTagName(\"html\")[0].className+=\" x-viewport\";this.el=Ext.getBody();this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll=\"no\";this.allowDomMove=false;this.autoWidth=true;this.autoHeight=true;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(a,b){this.fireEvent(\"resize\",this,a,b,a,b)}});Ext.reg(\"viewport\",Ext.Viewport);Ext.Panel=Ext.extend(Ext.Container,{baseCls:\"x-panel\",collapsedCls:\"x-panel-collapsed\",maskDisabled:true,animCollapse:Ext.enableFx,headerAsText:true,buttonAlign:\"right\",collapsed:false,collapseFirst:true,minButtonWidth:75,elements:\"body\",preventBodyReset:false,padding:undefined,resizeEvent:\"bodyresize\",toolTarget:\"header\",collapseEl:\"bwrap\",slideAnchor:\"t\",disabledClass:\"\",deferHeight:true,expandDefaults:{duration:0.25},collapseDefaults:{duration:0.25},initComponent:function(){Ext.Panel.superclass.initComponent.call(this);this.addEvents(\"bodyresize\",\"titlechange\",\"iconchange\",\"collapse\",\"expand\",\"beforecollapse\",\"beforeexpand\",\"beforeclose\",\"close\",\"activate\",\"deactivate\");if(this.unstyled){this.baseCls=\"x-plain\"}this.toolbars=[];if(this.tbar){this.elements+=\",tbar\";this.topToolbar=this.createToolbar(this.tbar);this.tbar=null}if(this.bbar){this.elements+=\",bbar\";this.bottomToolbar=this.createToolbar(this.bbar);this.bbar=null}if(this.header===true){this.elements+=\",header\";this.header=null}else{if(this.headerCfg||(this.title&&this.header!==false)){this.elements+=\",header\"}}if(this.footerCfg||this.footer===true){this.elements+=\",footer\";this.footer=null}if(this.buttons){this.fbar=this.buttons;this.buttons=null}if(this.fbar){this.createFbar(this.fbar)}if(this.autoLoad){this.on(\"render\",this.doAutoLoad,this,{delay:10})}},createFbar:function(b){var a=this.minButtonWidth;this.elements+=\",footer\";this.fbar=this.createToolbar(b,{buttonAlign:this.buttonAlign,toolbarCls:\"x-panel-fbar\",enableOverflow:false,defaults:function(d){return{minWidth:d.minWidth||a}}});this.fbar.items.each(function(d){d.minWidth=d.minWidth||this.minButtonWidth},this);this.buttons=this.fbar.items.items},createToolbar:function(b,c){var a;if(Ext.isArray(b)){b={items:b}}a=b.events?Ext.apply(b,c):this.createComponent(Ext.apply({},b,c),\"toolbar\");this.toolbars.push(a);return a},createElement:function(a,c){if(this[a]){c.appendChild(this[a].dom);return}if(a===\"bwrap\"||this.elements.indexOf(a)!=-1){if(this[a+\"Cfg\"]){this[a]=Ext.fly(c).createChild(this[a+\"Cfg\"])}else{var b=document.createElement(\"div\");b.className=this[a+\"Cls\"];this[a]=Ext.get(c.appendChild(b))}if(this[a+\"CssClass\"]){this[a].addClass(this[a+\"CssClass\"])}if(this[a+\"Style\"]){this[a].applyStyles(this[a+\"Style\"])}}},onRender:function(g,e){Ext.Panel.superclass.onRender.call(this,g,e);this.createClasses();var a=this.el,h=a.dom,k,i;if(this.collapsible&&!this.hideCollapseTool){this.tools=this.tools?this.tools.slice(0):[];this.tools[this.collapseFirst?\"unshift\":\"push\"]({id:\"toggle\",handler:this.toggleCollapse,scope:this})}if(this.tools){i=this.tools;this.elements+=(this.header!==false)?\",header\":\"\"}this.tools={};a.addClass(this.baseCls);if(h.firstChild){this.header=a.down(\".\"+this.headerCls);this.bwrap=a.down(\".\"+this.bwrapCls);var j=this.bwrap?this.bwrap:a;this.tbar=j.down(\".\"+this.tbarCls);this.body=j.down(\".\"+this.bodyCls);this.bbar=j.down(\".\"+this.bbarCls);this.footer=j.down(\".\"+this.footerCls);this.fromMarkup=true}if(this.preventBodyReset===true){a.addClass(\"x-panel-reset\")}if(this.cls){a.addClass(this.cls)}if(this.buttons){this.elements+=\",footer\"}if(this.frame){a.insertHtml(\"afterBegin\",String.format(Ext.Element.boxMarkup,this.baseCls));this.createElement(\"header\",h.firstChild.firstChild.firstChild);this.createElement(\"bwrap\",h);k=this.bwrap.dom;var c=h.childNodes[1],b=h.childNodes[2];k.appendChild(c);k.appendChild(b);var l=k.firstChild.firstChild.firstChild;this.createElement(\"tbar\",l);this.createElement(\"body\",l);this.createElement(\"bbar\",l);this.createElement(\"footer\",k.lastChild.firstChild.firstChild);if(!this.footer){this.bwrap.dom.lastChild.className+=\" x-panel-nofooter\"}this.ft=Ext.get(this.bwrap.dom.lastChild);this.mc=Ext.get(l)}else{this.createElement(\"header\",h);this.createElement(\"bwrap\",h);k=this.bwrap.dom;this.createElement(\"tbar\",k);this.createElement(\"body\",k);this.createElement(\"bbar\",k);this.createElement(\"footer\",k);if(!this.header){this.body.addClass(this.bodyCls+\"-noheader\");if(this.tbar){this.tbar.addClass(this.tbarCls+\"-noheader\")}}}if(Ext.isDefined(this.padding)){this.body.setStyle(\"padding\",this.body.addUnits(this.padding))}if(this.border===false){this.el.addClass(this.baseCls+\"-noborder\");this.body.addClass(this.bodyCls+\"-noborder\");if(this.header){this.header.addClass(this.headerCls+\"-noborder\")}if(this.footer){this.footer.addClass(this.footerCls+\"-noborder\")}if(this.tbar){this.tbar.addClass(this.tbarCls+\"-noborder\")}if(this.bbar){this.bbar.addClass(this.bbarCls+\"-noborder\")}}if(this.bodyBorder===false){this.body.addClass(this.bodyCls+\"-noborder\")}this.bwrap.enableDisplayMode(\"block\");if(this.header){this.header.unselectable();if(this.headerAsText){this.header.dom.innerHTML='<span class=\"'+this.headerTextCls+'\">'+this.header.dom.innerHTML+\"</span>\";if(this.iconCls){this.setIconClass(this.iconCls)}}}if(this.floating){this.makeFloating(this.floating)}if(this.collapsible&&this.titleCollapse&&this.header){this.mon(this.header,\"click\",this.toggleCollapse,this);this.header.setStyle(\"cursor\",\"pointer\")}if(i){this.addTool.apply(this,i)}if(this.fbar){this.footer.addClass(\"x-panel-btns\");this.fbar.ownerCt=this;this.fbar.render(this.footer);this.footer.createChild({cls:\"x-clear\"})}if(this.tbar&&this.topToolbar){this.topToolbar.ownerCt=this;this.topToolbar.render(this.tbar)}if(this.bbar&&this.bottomToolbar){this.bottomToolbar.ownerCt=this;this.bottomToolbar.render(this.bbar)}},setIconClass:function(b){var a=this.iconCls;this.iconCls=b;if(this.rendered&&this.header){if(this.frame){this.header.addClass(\"x-panel-icon\");this.header.replaceClass(a,this.iconCls)}else{var e=this.header,c=e.child(\"img.x-panel-inline-icon\");if(c){Ext.fly(c).replaceClass(a,this.iconCls)}else{var d=e.child(\"span.\"+this.headerTextCls);if(d){Ext.DomHelper.insertBefore(d.dom,{tag:\"img\",alt:\"\",src:Ext.BLANK_IMAGE_URL,cls:\"x-panel-inline-icon \"+this.iconCls})}}}}this.fireEvent(\"iconchange\",this,b,a)},makeFloating:function(a){this.floating=true;this.el=new Ext.Layer(Ext.apply({},a,{shadow:Ext.isDefined(this.shadow)?this.shadow:\"sides\",shadowOffset:this.shadowOffset,constrain:false,shim:this.shim===false?false:undefined}),this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},getFooterToolbar:function(){return this.fbar},addButton:function(a,c,b){if(!this.fbar){this.createFbar([])}if(c){if(Ext.isString(a)){a={text:a}}a=Ext.apply({handler:c,scope:b},a)}return this.fbar.add(a)},addTool:function(){if(!this.rendered){if(!this.tools){this.tools=[]}Ext.each(arguments,function(a){this.tools.push(a)},this);return}if(!this[this.toolTarget]){return}if(!this.toolTemplate){var h=new Ext.Template('<div class=\"x-tool x-tool-{id}\">&#160;</div>');h.disableFormats=true;h.compile();Ext.Panel.prototype.toolTemplate=h}for(var g=0,d=arguments,c=d.length;g<c;g++){var b=d[g];if(!this.tools[b.id]){var j=\"x-tool-\"+b.id+\"-over\";var e=this.toolTemplate.insertFirst(this[this.toolTarget],b,true);this.tools[b.id]=e;e.enableDisplayMode(\"block\");this.mon(e,\"click\",this.createToolHandler(e,b,j,this));if(b.on){this.mon(e,b.on)}if(b.hidden){e.hide()}if(b.qtip){if(Ext.isObject(b.qtip)){Ext.QuickTips.register(Ext.apply({target:e.id},b.qtip))}else{e.dom.qtip=b.qtip}}e.addClassOnOver(j)}}},onLayout:function(b,a){Ext.Panel.superclass.onLayout.apply(this,arguments);if(this.hasLayout&&this.toolbars.length>0){Ext.each(this.toolbars,function(c){c.doLayout(undefined,a)});this.syncHeight()}},syncHeight:function(){var b=this.toolbarHeight,c=this.body,a=this.lastSize.height,d;if(this.autoHeight||!Ext.isDefined(a)||a==\"auto\"){return}if(b!=this.getToolbarHeight()){b=Math.max(0,a-this.getFrameHeight());c.setHeight(b);d=c.getSize();this.toolbarHeight=this.getToolbarHeight();this.onBodyResize(d.width,d.height)}},onShow:function(){if(this.floating){return this.el.show()}Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating){return this.el.hide()}Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(c,a,d,b){return function(g){c.removeClass(d);if(a.stopEvent!==false){g.stopEvent()}if(a.handler){a.handler.call(a.scope||c,g,c,b,a)}}},afterRender:function(){if(this.floating&&!this.hidden){this.el.show()}if(this.title){this.setTitle(this.title)}Ext.Panel.superclass.afterRender.call(this);if(this.collapsed){this.collapsed=false;this.collapse(false)}this.initEvents()},getKeyMap:function(){if(!this.keyMap){this.keyMap=new Ext.KeyMap(this.el,this.keys)}return this.keyMap},initEvents:function(){if(this.keys){this.getKeyMap()}if(this.draggable){this.initDraggable()}if(this.toolbars.length>0){Ext.each(this.toolbars,function(a){a.doLayout();a.on({scope:this,afterlayout:this.syncHeight,remove:this.syncHeight})},this);this.syncHeight()}},initDraggable:function(){this.dd=new Ext.Panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},beforeEffect:function(a){if(this.floating){this.el.beforeAction()}if(a!==false){this.el.addClass(\"x-panel-animated\")}},afterEffect:function(a){this.syncShadow();this.el.removeClass(\"x-panel-animated\")},createEffect:function(c,b,d){var e={scope:d,block:true};if(c===true){e.callback=b;return e}else{if(!c.callback){e.callback=b}else{e.callback=function(){b.call(d);Ext.callback(c.callback,c.scope)}}}return Ext.applyIf(e,c)},collapse:function(b){if(this.collapsed||this.el.hasFxBlock()||this.fireEvent(\"beforecollapse\",this,b)===false){return}var a=b===true||(b!==false&&this.animCollapse);this.beforeEffect(a);this.onCollapse(a,b);return this},onCollapse:function(a,b){if(a){this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(b||true,this.afterCollapse,this),this.collapseDefaults))}else{this[this.collapseEl].hide(this.hideMode);this.afterCollapse(false)}},afterCollapse:function(a){this.collapsed=true;this.el.addClass(this.collapsedCls);if(a!==false){this[this.collapseEl].hide(this.hideMode)}this.afterEffect(a);this.cascade(function(b){if(b.lastSize){b.lastSize={width:undefined,height:undefined}}});this.fireEvent(\"collapse\",this)},expand:function(b){if(!this.collapsed||this.el.hasFxBlock()||this.fireEvent(\"beforeexpand\",this,b)===false){return}var a=b===true||(b!==false&&this.animCollapse);this.el.removeClass(this.collapsedCls);this.beforeEffect(a);this.onExpand(a,b);return this},onExpand:function(a,b){if(a){this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(b||true,this.afterExpand,this),this.expandDefaults))}else{this[this.collapseEl].show(this.hideMode);this.afterExpand(false)}},afterExpand:function(a){this.collapsed=false;if(a!==false){this[this.collapseEl].show(this.hideMode)}this.afterEffect(a);if(this.deferLayout){delete this.deferLayout;this.doLayout(true)}this.fireEvent(\"expand\",this)},toggleCollapse:function(a){this[this.collapsed?\"expand\":\"collapse\"](a);return this},onDisable:function(){if(this.rendered&&this.maskDisabled){this.el.mask()}Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){if(this.rendered&&this.maskDisabled){this.el.unmask()}Ext.Panel.superclass.onEnable.call(this)},onResize:function(g,d,c,e){var a=g,b=d;if(Ext.isDefined(a)||Ext.isDefined(b)){if(!this.collapsed){if(Ext.isNumber(a)){this.body.setWidth(a=this.adjustBodyWidth(a-this.getFrameWidth()))}else{if(a==\"auto\"){a=this.body.setWidth(\"auto\").dom.offsetWidth}else{a=this.body.dom.offsetWidth}}if(this.tbar){this.tbar.setWidth(a);if(this.topToolbar){this.topToolbar.setSize(a)}}if(this.bbar){this.bbar.setWidth(a);if(this.bottomToolbar){this.bottomToolbar.setSize(a);if(Ext.isIE){this.bbar.setStyle(\"position\",\"static\");this.bbar.setStyle(\"position\",\"\")}}}if(this.footer){this.footer.setWidth(a);if(this.fbar){this.fbar.setSize(Ext.isIE?(a-this.footer.getFrameWidth(\"lr\")):\"auto\")}}if(Ext.isNumber(b)){b=Math.max(0,b-this.getFrameHeight());this.body.setHeight(b)}else{if(b==\"auto\"){this.body.setHeight(b)}}if(this.disabled&&this.el._mask){this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())}}else{this.queuedBodySize={width:a,height:b};if(!this.queuedExpand&&this.allowQueuedExpand!==false){this.queuedExpand=true;this.on(\"expand\",function(){delete this.queuedExpand;this.onResize(this.queuedBodySize.width,this.queuedBodySize.height)},this,{single:true})}}this.onBodyResize(a,b)}this.syncShadow();Ext.Panel.superclass.onResize.call(this,g,d,c,e)},onBodyResize:function(a,b){this.fireEvent(\"bodyresize\",this,a,b)},getToolbarHeight:function(){var a=0;if(this.rendered){Ext.each(this.toolbars,function(b){a+=b.getHeight()},this)}return a},adjustBodyHeight:function(a){return a},adjustBodyWidth:function(a){return a},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var b=this.el.getFrameWidth(\"lr\")+this.bwrap.getFrameWidth(\"lr\");if(this.frame){var a=this.bwrap.dom.firstChild;b+=(Ext.fly(a).getFrameWidth(\"l\")+Ext.fly(a.firstChild).getFrameWidth(\"r\"));b+=this.mc.getFrameWidth(\"lr\")}return b},getFrameHeight:function(){var a=this.el.getFrameWidth(\"tb\")+this.bwrap.getFrameWidth(\"tb\");a+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0);if(this.frame){a+=this.el.dom.firstChild.offsetHeight+this.ft.dom.offsetHeight+this.mc.getFrameWidth(\"tb\")}else{a+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0)}return a},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.body.getHeight()},syncShadow:function(){if(this.floating){this.el.sync(true)}},getLayoutTarget:function(){return this.body},getContentTarget:function(){return this.body},setTitle:function(b,a){this.title=b;if(this.header&&this.headerAsText){this.header.child(\"span\").update(b)}if(a){this.setIconClass(a)}this.fireEvent(\"titlechange\",this,b);return this},getUpdater:function(){return this.body.getUpdater()},load:function(){var a=this.body.getUpdater();a.update.apply(a,arguments);return this},beforeDestroy:function(){Ext.Panel.superclass.beforeDestroy.call(this);if(this.header){this.header.removeAllListeners()}if(this.tools){for(var a in this.tools){Ext.destroy(this.tools[a])}}if(this.toolbars.length>0){Ext.each(this.toolbars,function(b){b.un(\"afterlayout\",this.syncHeight,this);b.un(\"remove\",this.syncHeight,this)},this)}if(Ext.isArray(this.buttons)){while(this.buttons.length){Ext.destroy(this.buttons[0])}}if(this.rendered){Ext.destroy(this.ft,this.header,this.footer,this.tbar,this.bbar,this.body,this.mc,this.bwrap,this.dd);if(this.fbar){Ext.destroy(this.fbar,this.fbar.el)}}Ext.destroy(this.toolbars)},createClasses:function(){this.headerCls=this.baseCls+\"-header\";this.headerTextCls=this.baseCls+\"-header-text\";this.bwrapCls=this.baseCls+\"-bwrap\";this.tbarCls=this.baseCls+\"-tbar\";this.bodyCls=this.baseCls+\"-body\";this.bbarCls=this.baseCls+\"-bbar\";this.footerCls=this.baseCls+\"-footer\"},createGhost:function(a,e,b){var d=document.createElement(\"div\");d.className=\"x-panel-ghost \"+(a?a:\"\");if(this.header){d.appendChild(this.el.dom.firstChild.cloneNode(true))}Ext.fly(d.appendChild(document.createElement(\"ul\"))).setHeight(this.bwrap.getHeight());d.style.width=this.el.dom.offsetWidth+\"px\";if(!b){this.container.dom.appendChild(d)}else{Ext.getDom(b).appendChild(d)}if(e!==false&&this.el.useShim!==false){var c=new Ext.Layer({shadow:false,useDisplay:true,constrain:false},d);c.show();return c}else{return new Ext.Element(d)}},doAutoLoad:function(){var a=this.body.getUpdater();if(this.renderer){a.setRenderer(this.renderer)}a.update(Ext.isObject(this.autoLoad)?this.autoLoad:{url:this.autoLoad})},getTool:function(a){return this.tools[a]}});Ext.reg(\"panel\",Ext.Panel);Ext.Editor=function(b,a){if(b.field){this.field=Ext.create(b.field,\"textfield\");a=Ext.apply({},b);delete a.field}else{this.field=b}Ext.Editor.superclass.constructor.call(this,a)};Ext.extend(Ext.Editor,Ext.Component,{allowBlur:true,value:\"\",alignment:\"c-c?\",offsets:[0,0],shadow:\"frame\",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,initComponent:function(){Ext.Editor.superclass.initComponent.call(this);this.addEvents(\"beforestartedit\",\"startedit\",\"beforecomplete\",\"complete\",\"canceledit\",\"specialkey\")},onRender:function(b,a){this.el=new Ext.Layer({shadow:this.shadow,cls:\"x-editor\",parentEl:b,shim:this.shim,shadowOffset:this.shadowOffset||4,id:this.id,constrain:this.constrain});if(this.zIndex){this.el.setZIndex(this.zIndex)}this.el.setStyle(\"overflow\",Ext.isGecko?\"auto\":\"hidden\");if(this.field.msgTarget!=\"title\"){this.field.msgTarget=\"qtip\"}this.field.inEditor=true;this.mon(this.field,{scope:this,blur:this.onBlur,specialkey:this.onSpecialKey});if(this.field.grow){this.mon(this.field,\"autosize\",this.el.sync,this.el,{delay:1})}this.field.render(this.el).show();this.field.getEl().dom.name=\"\";if(this.swallowKeys){this.field.el.swallowEvent([\"keypress\",\"keydown\"])}},onSpecialKey:function(g,d){var b=d.getKey(),a=this.completeOnEnter&&b==d.ENTER,c=this.cancelOnEsc&&b==d.ESC;if(a||c){d.stopEvent();if(a){this.completeEdit()}else{this.cancelEdit()}if(g.triggerBlur){g.triggerBlur()}}this.fireEvent(\"specialkey\",g,d)},startEdit:function(b,c){if(this.editing){this.completeEdit()}this.boundEl=Ext.get(b);var a=c!==undefined?c:this.boundEl.dom.innerHTML;if(!this.rendered){this.render(this.parentEl||document.body)}if(this.fireEvent(\"beforestartedit\",this,this.boundEl,a)!==false){this.startValue=a;this.field.reset();this.field.setValue(a);this.realign(true);this.editing=true;this.show()}},doAutoSize:function(){if(this.autoSize){var b=this.boundEl.getSize(),a=this.field.getSize();switch(this.autoSize){case\"width\":this.setSize(b.width,a.height);break;case\"height\":this.setSize(a.width,b.height);break;case\"none\":this.setSize(a.width,a.height);break;default:this.setSize(b.width,b.height)}}},setSize:function(a,b){delete this.field.lastSize;this.field.setSize(a,b);if(this.el){if(Ext.isGecko2||Ext.isOpera||(Ext.isIE7&&Ext.isStrict)){this.el.setSize(a,b)}this.el.sync()}},realign:function(a){if(a===true){this.doAutoSize()}this.el.alignTo(this.boundEl,this.alignment,this.offsets)},completeEdit:function(a){if(!this.editing){return}if(this.field.assertValue){this.field.assertValue()}var b=this.getValue();if(!this.field.isValid()){if(this.revertInvalid!==false){this.cancelEdit(a)}return}if(String(b)===String(this.startValue)&&this.ignoreNoChange){this.hideEdit(a);return}if(this.fireEvent(\"beforecomplete\",this,b,this.startValue)!==false){b=this.getValue();if(this.updateEl&&this.boundEl){this.boundEl.update(b)}this.hideEdit(a);this.fireEvent(\"complete\",this,b,this.startValue)}},onShow:function(){this.el.show();if(this.hideEl!==false){this.boundEl.hide()}this.field.show().focus(false,true);this.fireEvent(\"startedit\",this.boundEl,this.startValue)},cancelEdit:function(a){if(this.editing){var b=this.getValue();this.setValue(this.startValue);this.hideEdit(a);this.fireEvent(\"canceledit\",this,b,this.startValue)}},hideEdit:function(a){if(a!==true){this.editing=false;this.hide()}},onBlur:function(){if(this.allowBlur===true&&this.editing&&this.selectSameEditor!==true){this.completeEdit()}},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();if(this.field.collapse){this.field.collapse()}this.el.hide();if(this.hideEl!==false){this.boundEl.show()}},setValue:function(a){this.field.setValue(a)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroyMembers(this,\"field\");delete this.parentEl;delete this.boundEl}});Ext.reg(\"editor\",Ext.Editor);Ext.ColorPalette=Ext.extend(Ext.Component,{itemCls:\"x-color-palette\",value:null,clickEvent:\"click\",ctype:\"Ext.ColorPalette\",allowReselect:false,colors:[\"000000\",\"993300\",\"333300\",\"003300\",\"003366\",\"000080\",\"333399\",\"333333\",\"800000\",\"FF6600\",\"808000\",\"008000\",\"008080\",\"0000FF\",\"666699\",\"808080\",\"FF0000\",\"FF9900\",\"99CC00\",\"339966\",\"33CCCC\",\"3366FF\",\"800080\",\"969696\",\"FF00FF\",\"FFCC00\",\"FFFF00\",\"00FF00\",\"00FFFF\",\"00CCFF\",\"993366\",\"C0C0C0\",\"FF99CC\",\"FFCC99\",\"FFFF99\",\"CCFFCC\",\"CCFFFF\",\"99CCFF\",\"CC99FF\",\"FFFFFF\"],initComponent:function(){Ext.ColorPalette.superclass.initComponent.call(this);this.addEvents(\"select\");if(this.handler){this.on(\"select\",this.handler,this.scope,true)}},onRender:function(b,a){this.autoEl={tag:\"div\",cls:this.itemCls};Ext.ColorPalette.superclass.onRender.call(this,b,a);var c=this.tpl||new Ext.XTemplate('<tpl for=\".\"><a href=\"#\" class=\"color-{.}\" hidefocus=\"on\"><em><span style=\"background:#{.}\" unselectable=\"on\">&#160;</span></em></a></tpl>');c.overwrite(this.el,this.colors);this.mon(this.el,this.clickEvent,this.handleClick,this,{delegate:\"a\"});if(this.clickEvent!=\"click\"){this.mon(this.el,\"click\",Ext.emptyFn,this,{delegate:\"a\",preventDefault:true})}},afterRender:function(){Ext.ColorPalette.superclass.afterRender.call(this);if(this.value){var a=this.value;this.value=null;this.select(a,true)}},handleClick:function(b,a){b.preventDefault();if(!this.disabled){var d=a.className.match(/(?:^|\\s)color-(.{6})(?:\\s|$)/)[1];this.select(d.toUpperCase())}},select:function(b,a){b=b.replace(\"#\",\"\");if(b!=this.value||this.allowReselect){var c=this.el;if(this.value){c.child(\"a.color-\"+this.value).removeClass(\"x-color-palette-sel\")}c.child(\"a.color-\"+b).addClass(\"x-color-palette-sel\");this.value=b;if(a!==true){this.fireEvent(\"select\",this,b)}}}});Ext.reg(\"colorpalette\",Ext.ColorPalette);Ext.DatePicker=Ext.extend(Ext.BoxComponent,{todayText:\"Today\",okText:\"&#160;OK&#160;\",cancelText:\"Cancel\",todayTip:\"{0} (Spacebar)\",minText:\"This date is before the minimum date\",maxText:\"This date is after the maximum date\",format:\"m/d/y\",disabledDaysText:\"Disabled\",disabledDatesText:\"Disabled\",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:\"Next Month (Control+Right)\",prevText:\"Previous Month (Control+Left)\",monthYearText:\"Choose a month (Control+Up/Down to move years)\",startDay:0,showToday:true,focusOnSelect:true,initHour:12,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this);this.value=this.value?this.value.clearTime(true):new Date().clearTime();this.addEvents(\"select\");if(this.handler){this.on(\"select\",this.handler,this.scope||this)}this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var b=this.disabledDates,a=b.length-1,c=\"(?:\";Ext.each(b,function(g,e){c+=Ext.isDate(g)?\"^\"+Ext.escapeRe(g.dateFormat(this.format))+\"$\":b[e];if(e!=a){c+=\"|\"}},this);this.disabledDatesRE=new RegExp(c+\")\")}},setDisabledDates:function(a){if(Ext.isArray(a)){this.disabledDates=a;this.disabledDatesRE=null}else{this.disabledDatesRE=a}this.initDisabledDays();this.update(this.value,true)},setDisabledDays:function(a){this.disabledDays=a;this.update(this.value,true)},setMinDate:function(a){this.minDate=a;this.update(this.value,true)},setMaxDate:function(a){this.maxDate=a;this.update(this.value,true)},setValue:function(a){this.value=a.clearTime(true);this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(a){Ext.DatePicker.superclass.onEnable.call(this);this.doDisabled(false);this.update(a?this.value:this.activeDate);if(Ext.isIE){this.el.repaint()}},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this);this.doDisabled(true);if(Ext.isIE&&!Ext.isIE8){Ext.each([].concat(this.textNodes,this.el.query(\"th span\")),function(a){Ext.fly(a).repaint()})}},doDisabled:function(a){this.keyNav.setDisabled(a);this.prevRepeater.setDisabled(a);this.nextRepeater.setDisabled(a);if(this.showToday){this.todayKeyListener.setDisabled(a);this.todayBtn.setDisabled(a)}},onRender:function(e,b){var a=['<table cellspacing=\"0\">','<tr><td class=\"x-date-left\"><a href=\"#\" title=\"',this.prevText,'\">&#160;</a></td><td class=\"x-date-middle\" align=\"center\"></td><td class=\"x-date-right\"><a href=\"#\" title=\"',this.nextText,'\">&#160;</a></td></tr>','<tr><td colspan=\"3\"><table class=\"x-date-inner\" cellspacing=\"0\"><thead><tr>'],c=this.dayNames,h;for(h=0;h<7;h++){var k=this.startDay+h;if(k>6){k=k-7}a.push(\"<th><span>\",c[k].substr(0,1),\"</span></th>\")}a[a.length]=\"</tr></thead><tbody><tr>\";for(h=0;h<42;h++){if(h%7===0&&h!==0){a[a.length]=\"</tr><tr>\"}a[a.length]='<td><a href=\"#\" hidefocus=\"on\" class=\"x-date-date\" tabIndex=\"1\"><em><span></span></em></a></td>'}a.push(\"</tr></tbody></table></td></tr>\",this.showToday?'<tr><td colspan=\"3\" class=\"x-date-bottom\" align=\"center\"></td></tr>':\"\",'</table><div class=\"x-date-mp\"></div>');var j=document.createElement(\"div\");j.className=\"x-date-picker\";j.innerHTML=a.join(\"\");e.dom.insertBefore(j,b);this.el=Ext.get(j);this.eventEl=Ext.get(j.firstChild);this.prevRepeater=new Ext.util.ClickRepeater(this.el.child(\"td.x-date-left a\"),{handler:this.showPrevMonth,scope:this,preventDefault:true,stopDefault:true});this.nextRepeater=new Ext.util.ClickRepeater(this.el.child(\"td.x-date-right a\"),{handler:this.showNextMonth,scope:this,preventDefault:true,stopDefault:true});this.monthPicker=this.el.down(\"div.x-date-mp\");this.monthPicker.enableDisplayMode(\"block\");this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(d){if(d.ctrlKey){this.showPrevMonth()}else{this.update(this.activeDate.add(\"d\",-1))}},right:function(d){if(d.ctrlKey){this.showNextMonth()}else{this.update(this.activeDate.add(\"d\",1))}},up:function(d){if(d.ctrlKey){this.showNextYear()}else{this.update(this.activeDate.add(\"d\",-7))}},down:function(d){if(d.ctrlKey){this.showPrevYear()}else{this.update(this.activeDate.add(\"d\",7))}},pageUp:function(d){this.showNextMonth()},pageDown:function(d){this.showPrevMonth()},enter:function(d){d.stopPropagation();return true},scope:this});this.el.unselectable();this.cells=this.el.select(\"table.x-date-inner tbody td\");this.textNodes=this.el.query(\"table.x-date-inner tbody span\");this.mbtn=new Ext.Button({text:\"&#160;\",tooltip:this.monthYearText,renderTo:this.el.child(\"td.x-date-middle\",true)});this.mbtn.el.child(\"em\").addClass(\"x-btn-arrow\");if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);var g=(new Date()).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child(\"td.x-date-bottom\",true),text:String.format(this.todayText,g),tooltip:String.format(this.todayTip,g),handler:this.selectToday,scope:this})}this.mon(this.eventEl,\"mousewheel\",this.handleMouseWheel,this);this.mon(this.eventEl,\"click\",this.handleDateClick,this,{delegate:\"a.x-date-date\"});this.mon(this.mbtn,\"click\",this.showMonthPicker,this);this.onEnable(true)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){var a=['<table border=\"0\" cellspacing=\"0\">'];for(var b=0;b<6;b++){a.push('<tr><td class=\"x-date-mp-month\"><a href=\"#\">',Date.getShortMonthName(b),\"</a></td>\",'<td class=\"x-date-mp-month x-date-mp-sep\"><a href=\"#\">',Date.getShortMonthName(b+6),\"</a></td>\",b===0?'<td class=\"x-date-mp-ybtn\" align=\"center\"><a class=\"x-date-mp-prev\"></a></td><td class=\"x-date-mp-ybtn\" align=\"center\"><a class=\"x-date-mp-next\"></a></td></tr>':'<td class=\"x-date-mp-year\"><a href=\"#\"></a></td><td class=\"x-date-mp-year\"><a href=\"#\"></a></td></tr>')}a.push('<tr class=\"x-date-mp-btns\"><td colspan=\"4\"><button type=\"button\" class=\"x-date-mp-ok\">',this.okText,'</button><button type=\"button\" class=\"x-date-mp-cancel\">',this.cancelText,\"</button></td></tr>\",\"</table>\");this.monthPicker.update(a.join(\"\"));this.mon(this.monthPicker,\"click\",this.onMonthClick,this);this.mon(this.monthPicker,\"dblclick\",this.onMonthDblClick,this);this.mpMonths=this.monthPicker.select(\"td.x-date-mp-month\");this.mpYears=this.monthPicker.select(\"td.x-date-mp-year\");this.mpMonths.each(function(c,d,e){e+=1;if((e%2)===0){c.dom.xmonth=5+Math.round(e*0.5)}else{c.dom.xmonth=Math.round((e-1)*0.5)}})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var a=this.el.getSize();this.monthPicker.setSize(a);this.monthPicker.child(\"table\").setSize(a);this.mpSelMonth=(this.activeDate||this.value).getMonth();this.updateMPMonth(this.mpSelMonth);this.mpSelYear=(this.activeDate||this.value).getFullYear();this.updateMPYear(this.mpSelYear);this.monthPicker.slideIn(\"t\",{duration:0.2})}},updateMPYear:function(e){this.mpyear=e;var c=this.mpYears.elements;for(var b=1;b<=10;b++){var d=c[b-1],a;if((b%2)===0){a=e+Math.round(b*0.5);d.firstChild.innerHTML=a;d.xyear=a}else{a=e-(5-Math.round(b*0.5));d.firstChild.innerHTML=a;d.xyear=a}this.mpYears.item(b-1)[a==this.mpSelYear?\"addClass\":\"removeClass\"](\"x-date-mp-sel\")}},updateMPMonth:function(a){this.mpMonths.each(function(b,c,d){b[b.dom.xmonth==a?\"addClass\":\"removeClass\"](\"x-date-mp-sel\")})},selectMPMonth:function(a){},onMonthClick:function(g,b){g.stopEvent();var c=new Ext.Element(b),a;if(c.is(\"button.x-date-mp-cancel\")){this.hideMonthPicker()}else{if(c.is(\"button.x-date-mp-ok\")){var h=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());if(h.getMonth()!=this.mpSelMonth){h=new Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth()}this.update(h);this.hideMonthPicker()}else{if((a=c.up(\"td.x-date-mp-month\",2))){this.mpMonths.removeClass(\"x-date-mp-sel\");a.addClass(\"x-date-mp-sel\");this.mpSelMonth=a.dom.xmonth}else{if((a=c.up(\"td.x-date-mp-year\",2))){this.mpYears.removeClass(\"x-date-mp-sel\");a.addClass(\"x-date-mp-sel\");this.mpSelYear=a.dom.xyear}else{if(c.is(\"a.x-date-mp-prev\")){this.updateMPYear(this.mpyear-10)}else{if(c.is(\"a.x-date-mp-next\")){this.updateMPYear(this.mpyear+10)}}}}}}},onMonthDblClick:function(d,b){d.stopEvent();var c=new Ext.Element(b),a;if((a=c.up(\"td.x-date-mp-month\",2))){this.update(new Date(this.mpSelYear,a.dom.xmonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}else{if((a=c.up(\"td.x-date-mp-year\",2))){this.update(new Date(a.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}}},hideMonthPicker:function(a){if(this.monthPicker){if(a===true){this.monthPicker.hide()}else{this.monthPicker.slideOut(\"t\",{duration:0.2})}}},showPrevMonth:function(a){this.update(this.activeDate.add(\"mo\",-1))},showNextMonth:function(a){this.update(this.activeDate.add(\"mo\",1))},showPrevYear:function(){this.update(this.activeDate.add(\"y\",-1))},showNextYear:function(){this.update(this.activeDate.add(\"y\",1))},handleMouseWheel:function(a){a.stopEvent();if(!this.disabled){var b=a.getWheelDelta();if(b>0){this.showPrevMonth()}else{if(b<0){this.showNextMonth()}}}},handleDateClick:function(b,a){b.stopEvent();if(!this.disabled&&a.dateValue&&!Ext.fly(a.parentNode).hasClass(\"x-date-disabled\")){this.cancelFocus=this.focusOnSelect===false;this.setValue(new Date(a.dateValue));delete this.cancelFocus;this.fireEvent(\"select\",this,this.value)}},selectToday:function(){if(this.todayBtn&&!this.todayBtn.disabled){this.setValue(new Date().clearTime());this.fireEvent(\"select\",this,this.value)}},update:function(G,A){if(this.rendered){var a=this.activeDate,p=this.isVisible();this.activeDate=G;if(!A&&a&&this.el){var o=G.getTime();if(a.getMonth()==G.getMonth()&&a.getFullYear()==G.getFullYear()){this.cells.removeClass(\"x-date-selected\");this.cells.each(function(d){if(d.dom.firstChild.dateValue==o){d.addClass(\"x-date-selected\");if(p&&!this.cancelFocus){Ext.fly(d.dom.firstChild).focus(50)}return false}},this);return}}var k=G.getDaysInMonth(),q=G.getFirstDateOfMonth(),g=q.getDay()-this.startDay;if(g<0){g+=7}k+=g;var B=G.add(\"mo\",-1),h=B.getDaysInMonth()-g,e=this.cells.elements,r=this.textNodes,D=(new Date(B.getFullYear(),B.getMonth(),h,this.initHour)),C=new Date().clearTime().getTime(),v=G.clearTime(true).getTime(),u=this.minDate?this.minDate.clearTime(true):Number.NEGATIVE_INFINITY,y=this.maxDate?this.maxDate.clearTime(true):Number.POSITIVE_INFINITY,F=this.disabledDatesRE,s=this.disabledDatesText,I=this.disabledDays?this.disabledDays.join(\"\"):false,E=this.disabledDaysText,z=this.format;if(this.showToday){var m=new Date().clearTime(),c=(m<u||m>y||(F&&z&&F.test(m.dateFormat(z)))||(I&&I.indexOf(m.getDay())!=-1));if(!this.disabled){this.todayBtn.setDisabled(c);this.todayKeyListener[c?\"disable\":\"enable\"]()}}var l=function(J,d){d.title=\"\";var i=D.clearTime(true).getTime();d.firstChild.dateValue=i;if(i==C){d.className+=\" x-date-today\";d.title=J.todayText}if(i==v){d.className+=\" x-date-selected\";if(p){Ext.fly(d.firstChild).focus(50)}}if(i<u){d.className=\" x-date-disabled\";d.title=J.minText;return}if(i>y){d.className=\" x-date-disabled\";d.title=J.maxText;return}if(I){if(I.indexOf(D.getDay())!=-1){d.title=E;d.className=\" x-date-disabled\"}}if(F&&z){var w=D.dateFormat(z);if(F.test(w)){d.title=s.replace(\"%0\",w);d.className=\" x-date-disabled\"}}};var x=0;for(;x<g;x++){r[x].innerHTML=(++h);D.setDate(D.getDate()+1);e[x].className=\"x-date-prevday\";l(this,e[x])}for(;x<k;x++){var b=x-g+1;r[x].innerHTML=(b);D.setDate(D.getDate()+1);e[x].className=\"x-date-active\";l(this,e[x])}var H=0;for(;x<42;x++){r[x].innerHTML=(++H);D.setDate(D.getDate()+1);e[x].className=\"x-date-nextday\";l(this,e[x])}this.mbtn.setText(this.monthNames[G.getMonth()]+\" \"+G.getFullYear());if(!this.internalRender){var j=this.el.dom.firstChild,n=j.offsetWidth;this.el.setWidth(n+this.el.getBorderWidth(\"lr\"));Ext.fly(j).setWidth(n);this.internalRender=true;if(Ext.isOpera&&!this.secondPass){j.rows[0].cells[1].style.width=(n-(j.rows[0].cells[0].offsetWidth+j.rows[0].cells[2].offsetWidth))+\"px\";this.secondPass=true;this.update.defer(10,this,[G])}}}},beforeDestroy:function(){if(this.rendered){Ext.destroy(this.keyNav,this.monthPicker,this.eventEl,this.mbtn,this.nextRepeater,this.prevRepeater,this.cells.el,this.todayBtn);delete this.textNodes;delete this.cells.elements}}});Ext.reg(\"datepicker\",Ext.DatePicker);Ext.LoadMask=function(c,b){this.el=Ext.get(c);Ext.apply(this,b);if(this.store){this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad});this.removeMask=Ext.value(this.removeMask,false)}else{var a=this.el.getUpdater();a.showLoadIndicator=false;a.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad});this.removeMask=Ext.value(this.removeMask,true)}};Ext.LoadMask.prototype={msg:\"Loading...\",msgCls:\"x-mask-loading\",disabled:false,disable:function(){this.disabled=true},enable:function(){this.disabled=false},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){if(!this.disabled){this.el.mask(this.msg,this.msgCls)}},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store){this.store.un(\"beforeload\",this.onBeforeLoad,this);this.store.un(\"load\",this.onLoad,this);this.store.un(\"exception\",this.onLoad,this)}else{var a=this.el.getUpdater();a.un(\"beforeupdate\",this.onBeforeLoad,this);a.un(\"update\",this.onLoad,this);a.un(\"failure\",this.onLoad,this)}}};Ext.slider.Thumb=Ext.extend(Object,{dragging:false,constructor:function(a){Ext.apply(this,a||{},{cls:\"x-slider-thumb\",constrain:false});Ext.slider.Thumb.superclass.constructor.call(this,a);if(this.slider.vertical){Ext.apply(this,Ext.slider.Thumb.Vertical)}},render:function(){this.el=this.slider.innerEl.insertFirst({cls:this.cls});this.initEvents()},enable:function(){this.disabled=false;this.el.removeClass(this.slider.disabledClass)},disable:function(){this.disabled=true;this.el.addClass(this.slider.disabledClass)},initEvents:function(){var a=this.el;a.addClassOnOver(\"x-slider-thumb-over\");this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(a)},onBeforeDragStart:function(a){if(this.disabled){return false}else{this.slider.promoteThumb(this);return true}},onDragStart:function(a){this.el.addClass(\"x-slider-thumb-drag\");this.dragging=true;this.dragStartValue=this.value;this.slider.fireEvent(\"dragstart\",this.slider,a,this)},onDrag:function(g){var c=this.slider,b=this.index,d=this.getNewValue();if(this.constrain){var a=c.thumbs[b+1],h=c.thumbs[b-1];if(h!=undefined&&d<=h.value){d=h.value}if(a!=undefined&&d>=a.value){d=a.value}}c.setValue(b,d,false);c.fireEvent(\"drag\",c,g,this)},getNewValue:function(){var a=this.slider,b=a.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(a.reverseValue(b.left),a.decimalPrecision)},onDragEnd:function(c){var a=this.slider,b=this.value;this.el.removeClass(\"x-slider-thumb-drag\");this.dragging=false;a.fireEvent(\"dragend\",a,c);if(this.dragStartValue!=b){a.fireEvent(\"changecomplete\",a,b,this)}},destroy:function(){Ext.destroyMembers(this,\"tracker\",\"el\")}});Ext.slider.MultiSlider=Ext.extend(Ext.BoxComponent,{vertical:false,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,constrainThumbs:true,topThumbZIndex:10000,initComponent:function(){if(!Ext.isDefined(this.value)){this.value=this.minValue}this.thumbs=[];Ext.slider.MultiSlider.superclass.initComponent.call(this);this.keyIncrement=Math.max(this.increment,this.keyIncrement);this.addEvents(\"beforechange\",\"change\",\"changecomplete\",\"dragstart\",\"drag\",\"dragend\");if(this.values==undefined||Ext.isEmpty(this.values)){this.values=[0]}var a=this.values;for(var b=0;b<a.length;b++){this.addThumb(a[b])}if(this.vertical){Ext.apply(this,Ext.slider.Vertical)}},addThumb:function(b){var a=new Ext.slider.Thumb({value:b,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs});this.thumbs.push(a);if(this.rendered){a.render()}},promoteThumb:function(d){var a=this.thumbs,g,b;for(var e=0,c=a.length;e<c;e++){b=a[e];if(b==d){g=this.topThumbZIndex}else{g=\"\"}b.el.setStyle(\"zIndex\",g)}},onRender:function(){this.autoEl={cls:\"x-slider \"+(this.vertical?\"x-slider-vert\":\"x-slider-horz\"),cn:{cls:\"x-slider-end\",cn:{cls:\"x-slider-inner\",cn:[{tag:\"a\",cls:\"x-slider-focus\",href:\"#\",tabIndex:\"-1\",hidefocus:\"on\"}]}}};Ext.slider.MultiSlider.superclass.onRender.apply(this,arguments);this.endEl=this.el.first();this.innerEl=this.endEl.first();this.focusEl=this.innerEl.child(\".x-slider-focus\");for(var b=0;b<this.thumbs.length;b++){this.thumbs[b].render()}var a=this.innerEl.child(\".x-slider-thumb\");this.halfThumb=(this.vertical?a.getHeight():a.getWidth())/2;this.initEvents()},initEvents:function(){this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown});this.focusEl.swallowEvent(\"click\",true)},onMouseDown:function(d){if(this.disabled){return}var c=false;for(var b=0;b<this.thumbs.length;b++){c=c||d.target==this.thumbs[b].el.dom}if(this.clickToChange&&!c){var a=this.innerEl.translatePoints(d.getXY());this.onClickChange(a)}this.focus()},onClickChange:function(c){if(c.top>this.clickRange[0]&&c.top<this.clickRange[1]){var a=this.getNearest(c,\"left\"),b=a.index;this.setValue(b,Ext.util.Format.round(this.reverseValue(c.left),this.decimalPrecision),undefined,true)}},getNearest:function(k,b){var m=b==\"top\"?this.innerEl.getHeight()-k[b]:k[b],g=this.reverseValue(m),j=(this.maxValue-this.minValue)+5,e=0,c=null;for(var d=0;d<this.thumbs.length;d++){var a=this.thumbs[d],l=a.value,h=Math.abs(l-g);if(Math.abs(h<=j)){c=a;e=d;j=h}}return c},onKeyDown:function(b){if(this.disabled||this.thumbs.length!==1){b.preventDefault();return}var a=b.getKey(),c;switch(a){case b.UP:case b.RIGHT:b.stopEvent();c=b.ctrlKey?this.maxValue:this.getValue(0)+this.keyIncrement;this.setValue(0,c,undefined,true);break;case b.DOWN:case b.LEFT:b.stopEvent();c=b.ctrlKey?this.minValue:this.getValue(0)-this.keyIncrement;this.setValue(0,c,undefined,true);break;default:b.preventDefault()}},doSnap:function(b){if(!(this.increment&&b)){return b}var d=b,c=this.increment,a=b%c;if(a!=0){d-=a;if(a*2>=c){d+=c}else{if(a*2<-c){d-=c}}}return d.constrain(this.minValue,this.maxValue)},afterRender:function(){Ext.slider.MultiSlider.superclass.afterRender.apply(this,arguments);for(var c=0;c<this.thumbs.length;c++){var b=this.thumbs[c];if(b.value!==undefined){var a=this.normalizeValue(b.value);if(a!==b.value){this.setValue(c,a,false)}else{this.moveThumb(c,this.translateValue(a),false)}}}},getRatio:function(){var a=this.innerEl.getWidth(),b=this.maxValue-this.minValue;return b==0?a:(a/b)},normalizeValue:function(a){a=this.doSnap(a);a=Ext.util.Format.round(a,this.decimalPrecision);a=a.constrain(this.minValue,this.maxValue);return a},setMinValue:function(e){this.minValue=e;var d=0,b=this.thumbs,a=b.length,c;for(;d<a;++d){c=b[d];c.value=c.value<e?e:c.value}this.syncThumb()},setMaxValue:function(e){this.maxValue=e;var d=0,b=this.thumbs,a=b.length,c;for(;d<a;++d){c=b[d];c.value=c.value>e?e:c.value}this.syncThumb()},setValue:function(d,c,b,g){var a=this.thumbs[d],e=a.el;c=this.normalizeValue(c);if(c!==a.value&&this.fireEvent(\"beforechange\",this,c,a.value,a)!==false){a.value=c;if(this.rendered){this.moveThumb(d,this.translateValue(c),b!==false);this.fireEvent(\"change\",this,c,a);if(g){this.fireEvent(\"changecomplete\",this,c,a)}}}},translateValue:function(a){var b=this.getRatio();return(a*b)-(this.minValue*b)-this.halfThumb},reverseValue:function(b){var a=this.getRatio();return(b+(this.minValue*a))/a},moveThumb:function(d,c,b){var a=this.thumbs[d].el;if(!b||this.animate===false){a.setLeft(c)}else{a.shift({left:c,stopFx:true,duration:0.35})}},focus:function(){this.focusEl.focus(10)},onResize:function(c,e){var b=this.thumbs,a=b.length,d=0;for(;d<a;++d){b[d].el.stopFx()}if(Ext.isNumber(c)){this.innerEl.setWidth(c-(this.el.getPadding(\"l\")+this.endEl.getPadding(\"r\")))}this.syncThumb();Ext.slider.MultiSlider.superclass.onResize.apply(this,arguments)},onDisable:function(){Ext.slider.MultiSlider.superclass.onDisable.call(this);for(var b=0;b<this.thumbs.length;b++){var a=this.thumbs[b],c=a.el;a.disable();if(Ext.isIE){var d=c.getXY();c.hide();this.innerEl.addClass(this.disabledClass).dom.disabled=true;if(!this.thumbHolder){this.thumbHolder=this.endEl.createChild({cls:\"x-slider-thumb \"+this.disabledClass})}this.thumbHolder.show().setXY(d)}}},onEnable:function(){Ext.slider.MultiSlider.superclass.onEnable.call(this);for(var b=0;b<this.thumbs.length;b++){var a=this.thumbs[b],c=a.el;a.enable();if(Ext.isIE){this.innerEl.removeClass(this.disabledClass).dom.disabled=false;if(this.thumbHolder){this.thumbHolder.hide()}c.show();this.syncThumb()}}},syncThumb:function(){if(this.rendered){for(var a=0;a<this.thumbs.length;a++){this.moveThumb(a,this.translateValue(this.thumbs[a].value))}}},getValue:function(a){return this.thumbs[a].value},getValues:function(){var a=[];for(var b=0;b<this.thumbs.length;b++){a.push(this.thumbs[b].value)}return a},beforeDestroy:function(){var b=this.thumbs;for(var c=0,a=b.length;c<a;++c){b[c].destroy();b[c]=null}Ext.destroyMembers(this,\"endEl\",\"innerEl\",\"focusEl\",\"thumbHolder\");Ext.slider.MultiSlider.superclass.beforeDestroy.call(this)}});Ext.reg(\"multislider\",Ext.slider.MultiSlider);Ext.slider.SingleSlider=Ext.extend(Ext.slider.MultiSlider,{constructor:function(a){a=a||{};Ext.applyIf(a,{values:[a.value||0]});Ext.slider.SingleSlider.superclass.constructor.call(this,a)},getValue:function(){return Ext.slider.SingleSlider.superclass.getValue.call(this,0)},setValue:function(d,b){var c=Ext.toArray(arguments),a=c.length;if(a==1||(a<=3&&typeof arguments[1]!=\"number\")){c.unshift(0)}return Ext.slider.SingleSlider.superclass.setValue.apply(this,c)},syncThumb:function(){return Ext.slider.SingleSlider.superclass.syncThumb.apply(this,[0].concat(arguments))},getNearest:function(){return this.thumbs[0]}});Ext.Slider=Ext.slider.SingleSlider;Ext.reg(\"slider\",Ext.slider.SingleSlider);Ext.slider.Vertical={onResize:function(a,b){this.innerEl.setHeight(b-(this.el.getPadding(\"t\")+this.endEl.getPadding(\"b\")));this.syncThumb()},getRatio:function(){var b=this.innerEl.getHeight(),a=this.maxValue-this.minValue;return b/a},moveThumb:function(d,c,b){var a=this.thumbs[d],e=a.el;if(!b||this.animate===false){e.setBottom(c)}else{e.shift({bottom:c,stopFx:true,duration:0.35})}},onClickChange:function(c){if(c.left>this.clickRange[0]&&c.left<this.clickRange[1]){var a=this.getNearest(c,\"top\"),b=a.index,d=this.minValue+this.reverseValue(this.innerEl.getHeight()-c.top);this.setValue(b,Ext.util.Format.round(d,this.decimalPrecision),undefined,true)}}};Ext.slider.Thumb.Vertical={getNewValue:function(){var b=this.slider,c=b.innerEl,d=c.translatePoints(this.tracker.getXY()),a=c.getHeight()-d.top;return b.minValue+Ext.util.Format.round(a/b.getRatio(),b.decimalPrecision)}};Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:\"x-progress\",animate:false,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this);this.addEvents(\"update\")},onRender:function(d,a){var c=new Ext.Template('<div class=\"{cls}-wrap\">','<div class=\"{cls}-inner\">','<div class=\"{cls}-bar\">','<div class=\"{cls}-text\">',\"<div>&#160;</div>\",\"</div>\",\"</div>\",'<div class=\"{cls}-text {cls}-text-back\">',\"<div>&#160;</div>\",\"</div>\",\"</div>\",\"</div>\");this.el=a?c.insertBefore(a,{cls:this.baseCls},true):c.append(d,{cls:this.baseCls},true);if(this.id){this.el.dom.id=this.id}var b=this.el.dom.firstChild;this.progressBar=Ext.get(b.firstChild);if(this.textEl){this.textEl=Ext.get(this.textEl);delete this.textTopEl}else{this.textTopEl=Ext.get(this.progressBar.dom.firstChild);var e=Ext.get(b.childNodes[1]);this.textTopEl.setStyle(\"z-index\",99).addClass(\"x-hidden\");this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,e.dom.firstChild]);this.textEl.setWidth(b.offsetWidth)}this.progressBar.setHeight(b.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this);if(this.value){this.updateProgress(this.value,this.text)}else{this.updateText(this.text)}},updateProgress:function(c,d,b){this.value=c||0;if(d){this.updateText(d)}if(this.rendered&&!this.isDestroyed){var a=Math.floor(c*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(a,b===true||(b!==false&&this.animate));if(this.textTopEl){this.textTopEl.removeClass(\"x-hidden\").setWidth(a)}}this.fireEvent(\"update\",this,c,d);return this},wait:function(b){if(!this.waitTimer){var a=this;b=b||{};this.updateText(b.text);this.waitTimer=Ext.TaskMgr.start({run:function(c){var d=b.increment||10;c-=1;this.updateProgress(((((c+d)%d)+1)*(100/d))*0.01,null,b.animate)},interval:b.interval||1000,duration:b.duration,onStop:function(){if(b.fn){b.fn.apply(b.scope||this)}this.reset()},scope:a})}return this},isWaiting:function(){return this.waitTimer!==null},updateText:function(a){this.text=a||\"&#160;\";if(this.rendered){this.textEl.update(this.text)}return this},syncProgressBar:function(){if(this.value){this.updateProgress(this.value,this.text)}return this},setSize:function(a,c){Ext.ProgressBar.superclass.setSize.call(this,a,c);if(this.textTopEl){var b=this.el.dom.firstChild;this.textEl.setSize(b.offsetWidth,b.offsetHeight)}this.syncProgressBar();return this},reset:function(a){this.updateProgress(0);if(this.textTopEl){this.textTopEl.addClass(\"x-hidden\")}this.clearTimer();if(a===true){this.hide()}return this},clearTimer:function(){if(this.waitTimer){this.waitTimer.onStop=null;Ext.TaskMgr.stop(this.waitTimer);this.waitTimer=null}},onDestroy:function(){this.clearTimer();if(this.rendered){if(this.textEl.isComposite){this.textEl.clear()}Ext.destroyMembers(this,\"textEl\",\"progressBar\",\"textTopEl\")}Ext.ProgressBar.superclass.onDestroy.call(this)}});Ext.reg(\"progress\",Ext.ProgressBar);(function(){var a=Ext.EventManager;var b=Ext.lib.Dom;Ext.dd.DragDrop=function(e,c,d){if(e){this.init(e,c,d)}};Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(c,d){},startDrag:function(c,d){},b4Drag:function(c){},onDrag:function(c){},onDragEnter:function(c,d){},b4DragOver:function(c){},onDragOver:function(c,d){},b4DragOut:function(c){},onDragOut:function(c,d){},b4DragDrop:function(c){},onDragDrop:function(c,d){},onInvalidDrop:function(c){},b4EndDrag:function(c){},endDrag:function(c){},b4MouseDown:function(c){},onMouseDown:function(c){},onMouseUp:function(c){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(j,h,o){if(Ext.isNumber(h)){h={left:h,right:h,top:h,bottom:h}}h=h||this.defaultPadding;var l=Ext.get(this.getEl()).getBox(),d=Ext.get(j),n=d.getScroll(),k,e=d.dom;if(e==document.body){k={x:n.left,y:n.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}}else{var m=d.getXY();k={x:m[0],y:m[1],width:e.clientWidth,height:e.clientHeight}}var i=l.y-k.y,g=l.x-k.x;this.resetConstraints();this.setXConstraint(g-(h.left||0),k.width-g-l.width-(h.right||0),this.xTickSize);this.setYConstraint(i-(h.top||0),k.height-i-l.height-(h.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(e,c,d){this.initTarget(e,c,d);a.on(this.id,\"mousedown\",this.handleMouseDown,this)},initTarget:function(e,c,d){this.config=d||{};this.DDM=Ext.dd.DDM;this.groups={};if(typeof e!==\"string\"){e=Ext.id(e)}this.id=e;this.addToGroup((c)?c:\"default\");this.handleElId=e;this.setDragElId(e);this.invalidHandleTypes={A:\"A\"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(e,c,g,d){if(!c&&0!==c){this.padding=[e,e,e,e]}else{if(!g&&0!==g){this.padding=[e,c,e,c]}else{this.padding=[e,c,g,d]}}},setInitPosition:function(g,e){var h=this.getEl();if(!this.DDM.verifyEl(h)){return}var d=g||0;var c=e||0;var i=b.getXY(h);this.initPageX=i[0]-d;this.initPageY=i[1]-c;this.lastPageX=i[0];this.lastPageY=i[1];this.setStartPosition(i)},setStartPosition:function(d){var c=d||b.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=c[0];this.startPageY=c[1]},addToGroup:function(c){this.groups[c]=true;this.DDM.regDragDrop(this,c)},removeFromGroup:function(c){if(this.groups[c]){delete this.groups[c]}this.DDM.removeDDFromGroup(this,c)},setDragElId:function(c){this.dragElId=c},setHandleElId:function(c){if(typeof c!==\"string\"){c=Ext.id(c)}this.handleElId=c;this.DDM.regHandle(this.id,c)},setOuterHandleElId:function(c){if(typeof c!==\"string\"){c=Ext.id(c)}a.on(c,\"mousedown\",this.handleMouseDown,this);this.setHandleElId(c);this.hasOuterHandles=true},unreg:function(){a.un(this.id,\"mousedown\",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return(this.DDM.isLocked()||this.locked)},handleMouseDown:function(g,d){if(this.primaryButtonOnly&&g.button!=0){return}if(this.isLocked()){return}this.DDM.refreshCache(this.groups);var c=new Ext.lib.Point(Ext.lib.Event.getPageX(g),Ext.lib.Event.getPageY(g));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(c,this)){}else{if(this.clickValidator(g)){this.setStartPosition();this.b4MouseDown(g);this.onMouseDown(g);this.DDM.handleMouseDown(g,this);this.DDM.stopEvent(g)}else{}}},clickValidator:function(d){var c=d.getTarget();return(this.isValidHandleChild(c)&&(this.id==this.handleElId||this.DDM.handleWasClicked(c,this.id)))},addInvalidHandleType:function(c){var d=c.toUpperCase();this.invalidHandleTypes[d]=d},addInvalidHandleId:function(c){if(typeof c!==\"string\"){c=Ext.id(c)}this.invalidHandleIds[c]=c},addInvalidHandleClass:function(c){this.invalidHandleClasses.push(c)},removeInvalidHandleType:function(c){var d=c.toUpperCase();delete this.invalidHandleTypes[d]},removeInvalidHandleId:function(c){if(typeof c!==\"string\"){c=Ext.id(c)}delete this.invalidHandleIds[c]},removeInvalidHandleClass:function(d){for(var e=0,c=this.invalidHandleClasses.length;e<c;++e){if(this.invalidHandleClasses[e]==d){delete this.invalidHandleClasses[e]}}},isValidHandleChild:function(h){var g=true;var k;try{k=h.nodeName.toUpperCase()}catch(j){k=h.nodeName}g=g&&!this.invalidHandleTypes[k];g=g&&!this.invalidHandleIds[h.id];for(var d=0,c=this.invalidHandleClasses.length;g&&d<c;++d){g=!Ext.fly(h).hasClass(this.invalidHandleClasses[d])}return g},setXTicks:function(g,c){this.xTicks=[];this.xTickSize=c;var e={};for(var d=this.initPageX;d>=this.minX;d=d-c){if(!e[d]){this.xTicks[this.xTicks.length]=d;e[d]=true}}for(d=this.initPageX;d<=this.maxX;d=d+c){if(!e[d]){this.xTicks[this.xTicks.length]=d;e[d]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(g,c){this.yTicks=[];this.yTickSize=c;var e={};for(var d=this.initPageY;d>=this.minY;d=d-c){if(!e[d]){this.yTicks[this.yTicks.length]=d;e[d]=true}}for(d=this.initPageY;d<=this.maxY;d=d+c){if(!e[d]){this.yTicks[this.yTicks.length]=d;e[d]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(e,d,c){this.leftConstraint=e;this.rightConstraint=d;this.minX=this.initPageX-e;this.maxX=this.initPageX+d;if(c){this.setXTicks(this.initPageX,c)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(c,e,d){this.topConstraint=c;this.bottomConstraint=e;this.minY=this.initPageY-c;this.maxY=this.initPageY+e;if(d){this.setYTicks(this.initPageY,d)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var d=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var c=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(d,c)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(k,g){if(!g){return k}else{if(g[0]>=k){return g[0]}else{for(var d=0,c=g.length;d<c;++d){var e=d+1;if(g[e]&&g[e]>=k){var j=k-g[d];var h=g[e]-k;return(h>j)?g[d]:g[e]}}return g[g.length-1]}}},toString:function(){return(\"DragDrop \"+this.id)}}})();if(!Ext.dd.DragDropMgr){Ext.dd.DragDropMgr=function(){var a=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(d,c){for(var e in this.ids){for(var b in this.ids[e]){var g=this.ids[e][b];if(!this.isTypeOfDD(g)){continue}g[d].apply(g,c)}}},_onLoad:function(){this.init();a.on(document,\"mouseup\",this.handleMouseUp,this,true);a.on(document,\"mousemove\",this.handleMouseMove,this,true);a.on(window,\"unload\",this._onUnload,this,true);a.on(window,\"resize\",this._onResize,this,true)},_onResize:function(b){this._execOnAll(\"resetConstraints\",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(c,b){if(!this.initialized){this.init()}if(!this.ids[b]){this.ids[b]={}}this.ids[b][c.id]=c},removeDDFromGroup:function(d,b){if(!this.ids[b]){this.ids[b]={}}var c=this.ids[b];if(c&&c[d.id]){delete c[d.id]}},_remove:function(c){for(var b in c.groups){if(b&&this.ids[b]&&this.ids[b][c.id]){delete this.ids[b][c.id]}}delete this.handleIds[c.id]},regHandle:function(c,b){if(!this.handleIds[c]){this.handleIds[c]={}}this.handleIds[c][b]=b},isDragDrop:function(b){return(this.getDDById(b))?true:false},getRelated:function(h,c){var g=[];for(var e in h.groups){for(var d in this.ids[e]){var b=this.ids[e][d];if(!this.isTypeOfDD(b)){continue}if(!c||b.isTarget){g[g.length]=b}}}return g},isLegalTarget:function(g,e){var c=this.getRelated(g,true);for(var d=0,b=c.length;d<b;++d){if(c[d].id==e.id){return true}}return false},isTypeOfDD:function(b){return(b&&b.__ygDragDrop)},isHandle:function(c,b){return(this.handleIds[c]&&this.handleIds[c][b])},getDDById:function(c){for(var b in this.ids){if(this.ids[b][c]){return this.ids[b][c]}}return null},handleMouseDown:function(d,c){if(Ext.QuickTips){Ext.QuickTips.ddDisable()}if(this.dragCurrent){this.handleMouseUp(d)}this.currentTarget=d.getTarget();this.dragCurrent=c;var b=c.getEl();this.startX=d.getPageX();this.startY=d.getPageY();this.deltaX=this.startX-b.offsetLeft;this.deltaY=this.startY-b.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var e=Ext.dd.DDM;e.startDrag(e.startX,e.startY)},this.clickTimeThresh)},startDrag:function(b,c){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(b,c);this.dragCurrent.startDrag(b,c)}this.dragThreshMet=true},handleMouseUp:function(b){if(Ext.QuickTips){Ext.QuickTips.ddEnable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(b,true)}else{}this.stopDrag(b);this.stopEvent(b)},stopEvent:function(b){if(this.stopPropagation){b.stopPropagation()}if(this.preventDefault){b.preventDefault()}},stopDrag:function(b){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(b);this.dragCurrent.endDrag(b)}this.dragCurrent.onMouseUp(b)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(d){if(!this.dragCurrent){return true}if(Ext.isIE&&(d.button!==0&&d.button!==1&&d.button!==2)){this.stopEvent(d);return this.handleMouseUp(d)}if(!this.dragThreshMet){var c=Math.abs(this.startX-d.getPageX());var b=Math.abs(this.startY-d.getPageY());if(c>this.clickPixelThresh||b>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(d);this.dragCurrent.onDrag(d);if(!this.dragCurrent.moveOnly){this.fireEvents(d,false)}}this.stopEvent(d);return true},fireEvents:function(n,o){var q=this.dragCurrent;if(!q||q.isLocked()){return}var r=n.getPoint();var b=[];var g=[];var l=[];var j=[];var d=[];for(var h in this.dragOvers){var c=this.dragOvers[h];if(!this.isTypeOfDD(c)){continue}if(!this.isOverTarget(r,c,this.mode)){g.push(c)}b[h]=true;delete this.dragOvers[h]}for(var p in q.groups){if(\"string\"!=typeof p){continue}for(h in this.ids[p]){var k=this.ids[p][h];if(!this.isTypeOfDD(k)){continue}if(k.isTarget&&!k.isLocked()&&((k!=q)||(q.ignoreSelf===false))){if(this.isOverTarget(r,k,this.mode)){if(o){j.push(k)}else{if(!b[k.id]){d.push(k)}else{l.push(k)}this.dragOvers[k.id]=k}}}}}if(this.mode){if(g.length){q.b4DragOut(n,g);q.onDragOut(n,g)}if(d.length){q.onDragEnter(n,d)}if(l.length){q.b4DragOver(n,l);q.onDragOver(n,l)}if(j.length){q.b4DragDrop(n,j);q.onDragDrop(n,j)}}else{var m=0;for(h=0,m=g.length;h<m;++h){q.b4DragOut(n,g[h].id);q.onDragOut(n,g[h].id)}for(h=0,m=d.length;h<m;++h){q.onDragEnter(n,d[h].id)}for(h=0,m=l.length;h<m;++h){q.b4DragOver(n,l[h].id);q.onDragOver(n,l[h].id)}for(h=0,m=j.length;h<m;++h){q.b4DragDrop(n,j[h].id);q.onDragDrop(n,j[h].id)}}if(o&&!j.length){q.onInvalidDrop(n)}},getBestMatch:function(d){var g=null;var c=d.length;if(c==1){g=d[0]}else{for(var e=0;e<c;++e){var b=d[e];if(b.cursorIsOver){g=b;break}else{if(!g||g.overlap.getArea()<b.overlap.getArea()){g=b}}}}return g},refreshCache:function(c){for(var b in c){if(\"string\"!=typeof b){continue}for(var d in this.ids[b]){var e=this.ids[b][d];if(this.isTypeOfDD(e)){var g=this.getLocation(e);if(g){this.locationCache[e.id]=g}else{delete this.locationCache[e.id]}}}}},verifyEl:function(c){if(c){var b;if(Ext.isIE){try{b=c.offsetParent}catch(d){}}else{b=c.offsetParent}if(b){return true}}return false},getLocation:function(j){if(!this.isTypeOfDD(j)){return null}var h=j.getEl(),o,g,d,q,p,s,c,n,i,m;try{o=Ext.lib.Dom.getXY(h)}catch(k){}if(!o){return null}g=o[0];d=g+h.offsetWidth;q=o[1];p=q+h.offsetHeight;s=q-j.padding[0];c=d+j.padding[1];n=p+j.padding[2];i=g-j.padding[3];m=new Ext.lib.Region(s,c,n,i);h=Ext.get(h.parentNode);while(h&&m){if(h.isScrollable()){m=m.intersect(h.getRegion())}h=h.parent()}return m},isOverTarget:function(k,b,d){var g=this.locationCache[b.id];if(!g||!this.useCache){g=this.getLocation(b);this.locationCache[b.id]=g}if(!g){return false}b.cursorIsOver=g.contains(k);var j=this.dragCurrent;if(!j||!j.getTargetCoord||(!d&&!j.constrainX&&!j.constrainY)){return b.cursorIsOver}b.overlap=null;var h=j.getTargetCoord(k.x,k.y);var c=j.getDragEl();var e=new Ext.lib.Region(h.y,h.x+c.offsetWidth,h.y+c.offsetHeight,h.x);var i=e.intersect(g);if(i){b.overlap=i;return(d)?true:b.cursorIsOver}else{return false}},_onUnload:function(c,b){a.removeListener(document,\"mouseup\",this.handleMouseUp,this);a.removeListener(document,\"mousemove\",this.handleMouseMove,this);a.removeListener(window,\"resize\",this._onResize,this);Ext.dd.DragDropMgr.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll(\"unreg\",[]);for(var b in this.elementCache){delete this.elementCache[b]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(c){var b=this.elementCache[c];if(!b||!b.el){b=this.elementCache[c]=new this.ElementWrapper(Ext.getDom(c))}return b},getElement:function(b){return Ext.getDom(b)},getCss:function(c){var b=Ext.getDom(c);return(b)?b.style:null},ElementWrapper:function(b){this.el=b||null;this.id=this.el&&b.id;this.css=this.el&&b.style},getPosX:function(b){return Ext.lib.Dom.getX(b)},getPosY:function(b){return Ext.lib.Dom.getY(b)},swapNode:function(d,b){if(d.swapNode){d.swapNode(b)}else{var e=b.parentNode;var c=b.nextSibling;if(c==d){e.insertBefore(d,b)}else{if(b==d.nextSibling){e.insertBefore(b,d)}else{d.parentNode.replaceChild(b,d);e.insertBefore(d,c)}}}},getScroll:function(){var d,b,e=document.documentElement,c=document.body;if(e&&(e.scrollTop||e.scrollLeft)){d=e.scrollTop;b=e.scrollLeft}else{if(c){d=c.scrollTop;b=c.scrollLeft}else{}}return{top:d,left:b}},getStyle:function(c,b){return Ext.fly(c).getStyle(b)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(b,d){var c=Ext.lib.Dom.getXY(d);Ext.lib.Dom.setXY(b,c)},numericSort:function(d,c){return(d-c)},_timeoutCount:0,_addListeners:function(){var b=Ext.dd.DDM;if(Ext.lib.Event&&document){b._onLoad()}else{if(b._timeoutCount>2000){}else{setTimeout(b._addListeners,10);if(document&&document.body){b._timeoutCount+=1}}}},handleWasClicked:function(b,d){if(this.isHandle(d,b.id)){return true}else{var c=b.parentNode;while(c){if(this.isHandle(d,c.id)){return true}else{c=c.parentNode}}}return false}}}();Ext.dd.DDM=Ext.dd.DragDropMgr;Ext.dd.DDM._addListeners()}Ext.dd.DD=function(c,a,b){if(c){this.init(c,a,b)}};Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:true,autoOffset:function(c,b){var a=c-this.startPageX;var d=b-this.startPageY;this.setDelta(a,d)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(c,b){var a=this.getDragEl();this.alignElWithMouse(a,c,b)},alignElWithMouse:function(c,h,g){var e=this.getTargetCoord(h,g);var b=c.dom?c:Ext.fly(c,\"_dd\");if(!this.deltaSetXY){var i=[e.x,e.y];b.setXY(i);var d=b.getLeft(true);var a=b.getTop(true);this.deltaSetXY=[d-e.x,a-e.y]}else{b.setLeftTop(e.x+this.deltaSetXY[0],e.y+this.deltaSetXY[1])}this.cachePosition(e.x,e.y);this.autoScroll(e.x,e.y,c.offsetHeight,c.offsetWidth);return e},cachePosition:function(b,a){if(b){this.lastPageX=b;this.lastPageY=a}else{var c=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=c[0];this.lastPageY=c[1]}},autoScroll:function(l,k,e,m){if(this.scroll){var n=Ext.lib.Dom.getViewHeight();var b=Ext.lib.Dom.getViewWidth();var p=this.DDM.getScrollTop();var d=this.DDM.getScrollLeft();var j=e+k;var o=m+l;var i=(n+p-k-this.deltaY);var g=(b+d-l-this.deltaX);var c=40;var a=(document.all)?80:30;if(j>n&&i<c){window.scrollTo(d,p+a)}if(k<p&&p>0&&k-p<c){window.scrollTo(d,p-a)}if(o>b&&g<c){window.scrollTo(d+a,p)}if(l<d&&d>0&&l-d<c){window.scrollTo(d-a,p)}}},getTargetCoord:function(c,b){var a=c-this.deltaX;var d=b-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(d<this.minY){d=this.minY}if(d>this.maxY){d=this.maxY}}a=this.getTick(a,this.xTicks);d=this.getTick(d,this.yTicks);return{x:a,y:d}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(a){this.autoOffset(a.getPageX(),a.getPageY())},b4Drag:function(a){this.setDragElPos(a.getPageX(),a.getPageY())},toString:function(){return(\"DD \"+this.id)}});Ext.dd.DDProxy=function(c,a,b){if(c){this.init(c,a,b);this.initFrame()}};Ext.dd.DDProxy.dragElId=\"ygddfdiv\";Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var b=this;var a=document.body;if(!a||!a.firstChild){setTimeout(function(){b.createFrame()},50);return}var d=this.getDragEl();if(!d){d=document.createElement(\"div\");d.id=this.dragElId;var c=d.style;c.position=\"absolute\";c.visibility=\"hidden\";c.cursor=\"move\";c.border=\"2px solid #aaa\";c.zIndex=999;a.insertBefore(d,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(e,d){var c=this.getEl();var a=this.getDragEl();var b=a.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(b.width,10)/2),Math.round(parseInt(b.height,10)/2))}this.setDragElPos(e,d);Ext.fly(a).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(b){var a=b.getPageX();var c=b.getPageY();this.autoOffset(a,c);this.setDragElPos(a,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl();var a=this.getDragEl();a.style.visibility=\"\";this.beforeMove();b.style.visibility=\"hidden\";Ext.dd.DDM.moveToEl(b,a);a.style.visibility=\"hidden\";b.style.visibility=\"\";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return(\"DDProxy \"+this.id)}});Ext.dd.DDTarget=function(c,a,b){if(c){this.initTarget(c,a,b)}};Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return(\"DDTarget \"+this.id)}});Ext.dd.DragTracker=Ext.extend(Ext.util.Observable,{active:false,tolerance:5,autoStart:false,constructor:function(a){Ext.apply(this,a);this.addEvents(\"mousedown\",\"mouseup\",\"mousemove\",\"dragstart\",\"dragend\",\"drag\");this.dragRegion=new Ext.lib.Region(0,0,0,0);if(this.el){this.initEl(this.el)}Ext.dd.DragTracker.superclass.constructor.call(this,a)},initEl:function(a){this.el=Ext.get(a);a.on(\"mousedown\",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un(\"mousedown\",this.onMouseDown,this);delete this.el},onMouseDown:function(b,a){if(this.fireEvent(\"mousedown\",this,b)!==false&&this.onBeforeStart(b)!==false){this.startXY=this.lastXY=b.getXY();this.dragTarget=this.delegate?a:this.el.dom;if(this.preventDefault!==false){b.preventDefault()}Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect});if(this.autoStart){this.timer=this.triggerStart.defer(this.autoStart===true?1000:this.autoStart,this,[b])}}},onMouseMove:function(d,c){if(this.active&&Ext.isIE&&!d.browserEvent.button){d.preventDefault();this.onMouseUp(d);return}d.preventDefault();var b=d.getXY(),a=this.startXY;this.lastXY=b;if(!this.active){if(Math.abs(a[0]-b[0])>this.tolerance||Math.abs(a[1]-b[1])>this.tolerance){this.triggerStart(d)}else{return}}this.fireEvent(\"mousemove\",this,d);this.onDrag(d);this.fireEvent(\"drag\",this,d)},onMouseUp:function(c){var b=Ext.getDoc(),a=this.active;b.un(\"mousemove\",this.onMouseMove,this);b.un(\"mouseup\",this.onMouseUp,this);b.un(\"selectstart\",this.stopSelect,this);c.preventDefault();this.clearStart();this.active=false;delete this.elRegion;this.fireEvent(\"mouseup\",this,c);if(a){this.onEnd(c);this.fireEvent(\"dragend\",this,c)}},triggerStart:function(a){this.clearStart();this.active=true;this.onStart(a);this.fireEvent(\"dragstart\",this,a)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(a){return a?this.constrainModes[a].call(this,this.lastXY):this.lastXY},getOffset:function(c){var b=this.getXY(c),a=this.startXY;return[a[0]-b[0],a[1]-b[1]]},constrainModes:{point:function(b){if(!this.elRegion){this.elRegion=this.getDragCt().getRegion()}var a=this.dragRegion;a.left=b[0];a.top=b[1];a.right=b[0];a.bottom=b[1];a.constrainTo(this.elRegion);return[a.left,a.top]}}});Ext.dd.ScrollManager=function(){var c=Ext.dd.DragDropMgr;var e={};var b=null;var i={};var h=function(l){b=null;a()};var j=function(){if(c.dragCurrent){c.refreshCache(c.dragCurrent.groups)}};var d=function(){if(c.dragCurrent){var l=Ext.dd.ScrollManager;var m=i.el.ddScrollConfig?i.el.ddScrollConfig.increment:l.increment;if(!l.animate){if(i.el.scroll(i.dir,m)){j()}}else{i.el.scroll(i.dir,m,true,l.animDuration,j)}}};var a=function(){if(i.id){clearInterval(i.id)}i.id=0;i.el=null;i.dir=\"\"};var g=function(m,l){a();i.el=m;i.dir=l;var o=m.ddScrollConfig?m.ddScrollConfig.ddGroup:undefined,n=(m.ddScrollConfig&&m.ddScrollConfig.frequency)?m.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;if(o===undefined||c.dragCurrent.ddGroup==o){i.id=setInterval(d,n)}};var k=function(o,q){if(q||!c.dragCurrent){return}var s=Ext.dd.ScrollManager;if(!b||b!=c.dragCurrent){b=c.dragCurrent;s.refreshCache()}var t=Ext.lib.Event.getXY(o);var u=new Ext.lib.Point(t[0],t[1]);for(var m in e){var n=e[m],l=n._region;var p=n.ddScrollConfig?n.ddScrollConfig:s;if(l&&l.contains(u)&&n.isScrollable()){if(l.bottom-u.y<=p.vthresh){if(i.el!=n){g(n,\"down\")}return}else{if(l.right-u.x<=p.hthresh){if(i.el!=n){g(n,\"left\")}return}else{if(u.y-l.top<=p.vthresh){if(i.el!=n){g(n,\"up\")}return}else{if(u.x-l.left<=p.hthresh){if(i.el!=n){g(n,\"right\")}return}}}}}}a()};c.fireEvents=c.fireEvents.createSequence(k,c);c.stopDrag=c.stopDrag.createSequence(h,c);return{register:function(n){if(Ext.isArray(n)){for(var m=0,l=n.length;m<l;m++){this.register(n[m])}}else{n=Ext.get(n);e[n.id]=n}},unregister:function(n){if(Ext.isArray(n)){for(var m=0,l=n.length;m<l;m++){this.unregister(n[m])}}else{n=Ext.get(n);delete e[n.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){for(var l in e){if(typeof e[l]==\"object\"){e[l]._region=e[l].getRegion()}}}}}();Ext.dd.Registry=function(){var d={};var b={};var a=0;var c=function(g,e){if(typeof g==\"string\"){return g}var h=g.id;if(!h&&e!==false){h=\"extdd-\"+(++a);g.id=h}return h};return{register:function(j,k){k=k||{};if(typeof j==\"string\"){j=document.getElementById(j)}k.ddel=j;d[c(j)]=k;if(k.isHandle!==false){b[k.ddel.id]=k}if(k.handles){var h=k.handles;for(var g=0,e=h.length;g<e;g++){b[c(h[g])]=k}}},unregister:function(j){var l=c(j,false);var k=d[l];if(k){delete d[l];if(k.handles){var h=k.handles;for(var g=0,e=h.length;g<e;g++){delete b[c(h[g],false)]}}}},getHandle:function(e){if(typeof e!=\"string\"){e=e.id}return b[e]},getHandleFromEvent:function(h){var g=Ext.lib.Event.getTarget(h);return g?b[g.id]:null},getTarget:function(e){if(typeof e!=\"string\"){e=e.id}return d[e]},getTargetFromEvent:function(h){var g=Ext.lib.Event.getTarget(h);return g?d[g.id]||b[g.id]:null}}}();Ext.dd.StatusProxy=function(a){Ext.apply(this,a);this.id=this.id||Ext.id();this.el=new Ext.Layer({dh:{id:this.id,tag:\"div\",cls:\"x-dd-drag-proxy \"+this.dropNotAllowed,children:[{tag:\"div\",cls:\"x-dd-drop-icon\"},{tag:\"div\",cls:\"x-dd-drag-ghost\"}]},shadow:!a||a.shadow!==false});this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed};Ext.dd.StatusProxy.prototype={dropAllowed:\"x-dd-drop-ok\",dropNotAllowed:\"x-dd-drop-nodrop\",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!=a){this.el.replaceClass(this.dropStatus,a);this.dropStatus=a}},reset:function(a){this.el.dom.className=\"x-dd-drag-proxy \"+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(a){this.ghost.update(\"\")}},update:function(a){if(typeof a==\"string\"){this.ghost.update(a)}else{this.ghost.update(\"\");a.style.margin=\"0\";this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle(\"float\",\"none\")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(a){this.el.hide();if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(b,c,a){this.callback=c;this.scope=a;if(b&&this.animRepair!==false){this.el.addClass(\"x-dd-drag-repair\");this.el.hideUnders(true);this.anim=this.el.shift({duration:this.repairDuration||0.5,easing:\"easeOut\",xy:b,stopFx:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback==\"function\"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}};Ext.dd.DragSource=function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy()}Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false};Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:\"x-dd-drop-ok\",dropNotAllowed:\"x-dd-drop-nodrop\",getDragData:function(a){return this.dragData},onDragEnter:function(c,d){var b=Ext.dd.DragDropMgr.getDDById(d);this.cachedTarget=b;if(this.beforeDragEnter(b,c,d)!==false){if(b.isNotifyTarget){var a=b.notifyEnter(this,c,this.dragData);this.proxy.setStatus(a)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(b,c,d)}}},beforeDragEnter:function(b,a,c){return true},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(c,d){var b=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(d);if(this.beforeDragOver(b,c,d)!==false){if(b.isNotifyTarget){var a=b.notifyOver(this,c,this.dragData);this.proxy.setStatus(a)}if(this.afterDragOver){this.afterDragOver(b,c,d)}}},beforeDragOver:function(b,a,c){return true},onDragOut:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(c);if(this.beforeDragOut(a,b,c)!==false){if(a.isNotifyTarget){a.notifyOut(this,b,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,b,c)}}this.cachedTarget=null},beforeDragOut:function(b,a,c){return true},onDragDrop:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(c);if(this.beforeDragDrop(a,b,c)!==false){if(a.isNotifyTarget){if(a.notifyDrop(this,b,this.dragData)){this.onValidDrop(a,b,c)}else{this.onInvalidDrop(a,b,c)}}else{this.onValidDrop(a,b,c)}if(this.afterDragDrop){this.afterDragDrop(a,b,c)}}delete this.cachedTarget},beforeDragDrop:function(b,a,c){return true},onValidDrop:function(b,a,c){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(b,a,c)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(b,a,c){this.beforeInvalidDrop(b,a,c);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,a,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(a,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(a,c)}},afterRepair:function(){if(Ext.enableFx){this.el.highlight(this.hlColor||\"c3daf9\")}this.dragging=false},beforeInvalidDrop:function(b,a,c){return true},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==false){this.dragData=a;this.proxy.stop();Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(a,b){return true},onStartDrag:Ext.emptyFn,startDrag:function(a,b){this.proxy.reset();this.dragging=true;this.proxy.update(\"\");this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(a,c){var b=this.el.dom.cloneNode(true);b.id=Ext.id();this.proxy.update(b);this.onStartDrag(a,c);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this);Ext.destroy(this.proxy)}});Ext.dd.DropTarget=Ext.extend(Ext.dd.DDTarget,{constructor:function(b,a){this.el=Ext.get(b);Ext.apply(this,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},dropAllowed:\"x-dd-drop-ok\",dropNotAllowed:\"x-dd-drop-nodrop\",isTarget:true,isNotifyTarget:true,notifyEnter:function(a,c,b){if(this.overClass){this.el.addClass(this.overClass)}return this.dropAllowed},notifyOver:function(a,c,b){return this.dropAllowed},notifyOut:function(a,c,b){if(this.overClass){this.el.removeClass(this.overClass)}},notifyDrop:function(a,c,b){return false},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DragZone=Ext.extend(Ext.dd.DragSource,{constructor:function(b,a){Ext.dd.DragZone.superclass.constructor.call(this,b,a);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(a,b);return true},afterRepair:function(){if(Ext.enableFx){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||\"c3daf9\")}this.dragging=false},getRepairXY:function(a){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DropZone=function(b,a){Ext.dd.DropZone.superclass.constructor.call(this,b,a)};Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(d,a,c,b){},onNodeOver:function(d,a,c,b){return this.dropAllowed},onNodeOut:function(d,a,c,b){},onNodeDrop:function(d,a,c,b){return false},onContainerOver:function(a,c,b){return this.dropNotAllowed},onContainerDrop:function(a,c,b){return false},notifyEnter:function(a,c,b){return this.dropNotAllowed},notifyOver:function(a,c,b){var d=this.getTargetFromEvent(c);if(!d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}return this.onContainerOver(a,c,b)}if(this.lastOverNode!=d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b)}this.onNodeEnter(d,a,c,b);this.lastOverNode=d}return this.onNodeOver(d,a,c,b)},notifyOut:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}},notifyDrop:function(a,c,b){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,a,c,b);this.lastOverNode=null}var d=this.getTargetFromEvent(c);return d?this.onNodeDrop(d,a,c,b):this.onContainerDrop(a,c,b)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.Element.addMethods({initDD:function(c,b,d){var a=new Ext.dd.DD(Ext.id(this.dom),c,b);return Ext.apply(a,d)},initDDProxy:function(c,b,d){var a=new Ext.dd.DDProxy(Ext.id(this.dom),c,b);return Ext.apply(a,d)},initDDTarget:function(c,b,d){var a=new Ext.dd.DDTarget(Ext.id(this.dom),c,b);return Ext.apply(a,d)}});Ext.data.Api=(function(){var a={};return{actions:{create:\"create\",read:\"read\",update:\"update\",destroy:\"destroy\"},restActions:{create:\"POST\",read:\"GET\",update:\"PUT\",destroy:\"DELETE\"},isAction:function(b){return(Ext.data.Api.actions[b])?true:false},getVerb:function(b){if(a[b]){return a[b]}for(var c in this.actions){if(this.actions[c]===b){a[b]=c;break}}return(a[b]!==undefined)?a[b]:null},isValid:function(b){var e=[];var d=this.actions;for(var c in b){if(!(c in d)){e.push(c)}}return(!e.length)?true:e},hasUniqueUrl:function(c,g){var b=(c.api[g])?c.api[g].url:null;var e=true;for(var d in c.api){if((e=(d===g)?true:(c.api[d].url!=b)?true:false)===false){break}}return e},prepare:function(b){if(!b.api){b.api={}}for(var d in this.actions){var c=this.actions[d];b.api[c]=b.api[c]||b.url||b.directFn;if(typeof(b.api[c])==\"string\"){b.api[c]={url:b.api[c],method:(b.restful===true)?Ext.data.Api.restActions[c]:undefined}}}},restify:function(b){b.restful=true;for(var c in this.restActions){b.api[this.actions[c]].method||(b.api[this.actions[c]].method=this.restActions[c])}b.onWrite=b.onWrite.createInterceptor(function(i,j,g,e){var d=j.reader;var h=new Ext.data.Response({action:i,raw:g});switch(g.status){case 200:return true;break;case 201:if(Ext.isEmpty(h.raw.responseText)){h.success=true}else{return true}break;case 204:h.success=true;h.data=null;break;default:return true;break}if(h.success===true){this.fireEvent(\"write\",this,i,h.data,h,e,j.request.arg)}else{this.fireEvent(\"exception\",this,\"remote\",i,j,h,e)}j.request.callback.call(j.request.scope,h.data,h,h.success);return false},b)}}})();Ext.data.Response=function(b,a){Ext.apply(this,b,{raw:a})};Ext.data.Response.prototype={message:null,success:false,status:null,root:null,raw:null,getMessage:function(){return this.message},getSuccess:function(){return this.success},getStatus:function(){return this.status},getRoot:function(){return this.root},getRawResponse:function(){return this.raw}};Ext.data.Api.Error=Ext.extend(Ext.Error,{constructor:function(b,a){this.arg=a;Ext.Error.call(this,b)},name:\"Ext.data.Api\"});Ext.apply(Ext.data.Api.Error.prototype,{lang:{\"action-url-undefined\":\"No fallback url defined for this action.  When defining a DataProxy api, please be sure to define an url for each CRUD action in Ext.data.Api.actions or define a default url in addition to your api-configuration.\",invalid:\"received an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions defined in Ext.data.Api.actions\",\"invalid-url\":\"Invalid url.  Please review your proxy configuration.\",execute:'Attempted to execute an unknown action.  Valid API actions are defined in Ext.data.Api.actions\"'}});Ext.data.SortTypes={none:function(a){return a},stripTagsRE:/<\\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,\"\")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,\"\")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,\"\"));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,\"\"),10);return isNaN(b)?0:b}};Ext.data.Record=function(a,b){this.id=(b||b===0)?b:Ext.data.Record.id(this);this.data=a||{}};Ext.data.Record.create=function(e){var c=Ext.extend(Ext.data.Record,{});var d=c.prototype;d.fields=new Ext.util.MixedCollection(false,function(g){return g.name});for(var b=0,a=e.length;b<a;b++){d.fields.add(new Ext.data.Field(e[b]))}c.getField=function(g){return d.fields.get(g)};return c};Ext.data.Record.PREFIX=\"ext-record\";Ext.data.Record.AUTO_ID=1;Ext.data.Record.EDIT=\"edit\";Ext.data.Record.REJECT=\"reject\";Ext.data.Record.COMMIT=\"commit\";Ext.data.Record.id=function(a){a.phantom=true;return[Ext.data.Record.PREFIX,\"-\",Ext.data.Record.AUTO_ID++].join(\"\")};Ext.data.Record.prototype={dirty:false,editing:false,error:null,modified:null,phantom:false,join:function(a){this.store=a},set:function(a,c){var b=Ext.isPrimitive(c)?String:Ext.encode;if(b(this.data[a])==b(c)){return}this.dirty=true;if(!this.modified){this.modified={}}if(this.modified[a]===undefined){this.modified[a]=this.data[a]}this.data[a]=c;if(!this.editing){this.afterEdit()}},afterEdit:function(){if(this.store!=undefined&&typeof this.store.afterEdit==\"function\"){this.store.afterEdit(this)}},afterReject:function(){if(this.store){this.store.afterReject(this)}},afterCommit:function(){if(this.store){this.store.afterCommit(this)}},get:function(a){return this.data[a]},beginEdit:function(){this.editing=true;this.modified=this.modified||{}},cancelEdit:function(){this.editing=false;delete this.modified},endEdit:function(){this.editing=false;if(this.dirty){this.afterEdit()}},reject:function(b){var a=this.modified;for(var c in a){if(typeof a[c]!=\"function\"){this.data[c]=a[c]}}this.dirty=false;delete this.modified;this.editing=false;if(b!==true){this.afterReject()}},commit:function(a){this.dirty=false;delete this.modified;this.editing=false;if(a!==true){this.afterCommit()}},getChanges:function(){var a=this.modified,b={};for(var c in a){if(a.hasOwnProperty(c)){b[c]=this.data[c]}}return b},hasError:function(){return this.error!==null},clearError:function(){this.error=null},copy:function(a){return new this.constructor(Ext.apply({},this.data),a||this.id)},isModified:function(a){return !!(this.modified&&this.modified.hasOwnProperty(a))},isValid:function(){return this.fields.find(function(a){return(a.allowBlank===false&&Ext.isEmpty(this.data[a.name]))?true:false},this)?false:true},markDirty:function(){this.dirty=true;if(!this.modified){this.modified={}}this.fields.each(function(a){this.modified[a.name]=this.data[a.name]},this)}};Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection(),{register:function(){for(var a=0,b;(b=arguments[a]);a++){this.add(b)}},unregister:function(){for(var a=0,b;(b=arguments[a]);a++){this.remove(this.lookup(b))}},lookup:function(e){if(Ext.isArray(e)){var b=[\"field1\"],d=!Ext.isArray(e[0]);if(!d){for(var c=2,a=e[0].length;c<=a;++c){b.push(\"field\"+c)}}return new Ext.data.ArrayStore({fields:b,data:e,expandData:d,autoDestroy:true,autoCreated:true})}return Ext.isObject(e)?(e.events?e:Ext.create(e,\"store\")):this.get(e)},getKey:function(a){return a.storeId}});Ext.data.Store=Ext.extend(Ext.util.Observable,{writer:undefined,remoteSort:false,autoDestroy:false,pruneModifiedRecords:false,lastOptions:null,autoSave:true,batch:true,restful:false,paramNames:undefined,defaultParamNames:{start:\"start\",limit:\"limit\",sort:\"sort\",dir:\"dir\"},isDestroyed:false,hasMultiSort:false,batchKey:\"_ext_batch_\",constructor:function(a){this.data=new Ext.util.MixedCollection(false);this.data.getKey=function(b){return b.id};this.removed=[];if(a&&a.data){this.inlineData=a.data;delete a.data}Ext.apply(this,a);this.baseParams=Ext.isObject(this.baseParams)?this.baseParams:{};this.paramNames=Ext.applyIf(this.paramNames||{},this.defaultParamNames);if((this.url||this.api)&&!this.proxy){this.proxy=new Ext.data.HttpProxy({url:this.url,api:this.api})}if(this.restful===true&&this.proxy){this.batch=false;Ext.data.Api.restify(this.proxy)}if(this.reader){if(!this.recordType){this.recordType=this.reader.recordType}if(this.reader.onMetaChange){this.reader.onMetaChange=this.reader.onMetaChange.createSequence(this.onMetaChange,this)}if(this.writer){if(this.writer instanceof (Ext.data.DataWriter)===false){this.writer=this.buildWriter(this.writer)}this.writer.meta=this.reader.meta;this.pruneModifiedRecords=true}}if(this.recordType){this.fields=this.recordType.prototype.fields}this.modified=[];this.addEvents(\"datachanged\",\"metachange\",\"add\",\"remove\",\"update\",\"clear\",\"exception\",\"beforeload\",\"load\",\"loadexception\",\"beforewrite\",\"write\",\"beforesave\",\"save\");if(this.proxy){this.relayEvents(this.proxy,[\"loadexception\",\"exception\"])}if(this.writer){this.on({scope:this,add:this.createRecords,remove:this.destroyRecord,update:this.updateRecord,clear:this.onClear})}this.sortToggle={};if(this.sortField){this.setDefaultSort(this.sortField,this.sortDir)}else{if(this.sortInfo){this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction)}}Ext.data.Store.superclass.constructor.call(this);if(this.id){this.storeId=this.id;delete this.id}if(this.storeId){Ext.StoreMgr.register(this)}if(this.inlineData){this.loadData(this.inlineData);delete this.inlineData}else{if(this.autoLoad){this.load.defer(10,this,[typeof this.autoLoad==\"object\"?this.autoLoad:undefined])}}this.batchCounter=0;this.batches={}},buildWriter:function(b){var a=undefined,c=(b.format||\"json\").toLowerCase();switch(c){case\"json\":a=Ext.data.JsonWriter;break;case\"xml\":a=Ext.data.XmlWriter;break;default:a=Ext.data.JsonWriter}return new a(b)},destroy:function(){if(!this.isDestroyed){if(this.storeId){Ext.StoreMgr.unregister(this)}this.clearData();this.data=null;Ext.destroy(this.proxy);this.reader=this.writer=null;this.purgeListeners();this.isDestroyed=true}},add:function(c){var e,a,b,d;c=[].concat(c);if(c.length<1){return}for(e=0,a=c.length;e<a;e++){b=c[e];b.join(this);if(b.dirty||b.phantom){this.modified.push(b)}}d=this.data.length;this.data.addAll(c);if(this.snapshot){this.snapshot.addAll(c)}this.fireEvent(\"add\",this,c,d)},addSorted:function(a){var b=this.findInsertIndex(a);this.insert(b,a)},doUpdate:function(a){var b=a.id;this.getById(b).join(null);this.data.replace(b,a);if(this.snapshot){this.snapshot.replace(b,a)}a.join(this);this.fireEvent(\"update\",this,a,Ext.data.Record.COMMIT)},remove:function(a){if(Ext.isArray(a)){Ext.each(a,function(c){this.remove(c)},this);return}var b=this.data.indexOf(a);if(b>-1){a.join(null);this.data.removeAt(b)}if(this.pruneModifiedRecords){this.modified.remove(a)}if(this.snapshot){this.snapshot.remove(a)}if(b>-1){this.fireEvent(\"remove\",this,a,b)}},removeAt:function(a){this.remove(this.getAt(a))},removeAll:function(b){var a=[];this.each(function(c){a.push(c)});this.clearData();if(this.snapshot){this.snapshot.clear()}if(this.pruneModifiedRecords){this.modified=[]}if(b!==true){this.fireEvent(\"clear\",this,a)}},onClear:function(b,a){Ext.each(a,function(d,c){this.destroyRecord(this,d,c)},this)},insert:function(d,c){var e,a,b;c=[].concat(c);for(e=0,a=c.length;e<a;e++){b=c[e];this.data.insert(d+e,b);b.join(this);if(b.dirty||b.phantom){this.modified.push(b)}}if(this.snapshot){this.snapshot.addAll(c)}this.fireEvent(\"add\",this,c,d)},indexOf:function(a){return this.data.indexOf(a)},indexOfId:function(a){return this.data.indexOfKey(a)},getById:function(a){return(this.snapshot||this.data).key(a)},getAt:function(a){return this.data.itemAt(a)},getRange:function(b,a){return this.data.getRange(b,a)},storeOptions:function(a){a=Ext.apply({},a);delete a.callback;delete a.scope;this.lastOptions=a},clearData:function(){this.data.each(function(a){a.join(null)});this.data.clear()},load:function(b){b=Ext.apply({},b);this.storeOptions(b);if(this.sortInfo&&this.remoteSort){var a=this.paramNames;b.params=Ext.apply({},b.params);b.params[a.sort]=this.sortInfo.field;b.params[a.dir]=this.sortInfo.direction}try{return this.execute(\"read\",null,b)}catch(c){this.handleException(c);return false}},updateRecord:function(b,a,c){if(c==Ext.data.Record.EDIT&&this.autoSave===true&&(!a.phantom||(a.phantom&&a.isValid()))){this.save()}},createRecords:function(c,b,e){var d=this.modified,h=b.length,a,g;for(g=0;g<h;g++){a=b[g];if(a.phantom&&a.isValid()){a.markDirty();if(d.indexOf(a)==-1){d.push(a)}}}if(this.autoSave===true){this.save()}},destroyRecord:function(b,a,c){if(this.modified.indexOf(a)!=-1){this.modified.remove(a)}if(!a.phantom){this.removed.push(a);a.lastIndex=c;if(this.autoSave===true){this.save()}}},execute:function(e,a,c,b){if(!Ext.data.Api.isAction(e)){throw new Ext.data.Api.Error(\"execute\",e)}c=Ext.applyIf(c||{},{params:{}});if(b!==undefined){this.addToBatch(b)}var d=true;if(e===\"read\"){d=this.fireEvent(\"beforeload\",this,c);Ext.applyIf(c.params,this.baseParams)}else{if(this.writer.listful===true&&this.restful!==true){a=(Ext.isArray(a))?a:[a]}else{if(Ext.isArray(a)&&a.length==1){a=a.shift()}}if((d=this.fireEvent(\"beforewrite\",this,e,a,c))!==false){this.writer.apply(c.params,this.baseParams,e,a)}}if(d!==false){if(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,e)){c.params.xaction=e}this.proxy.request(Ext.data.Api.actions[e],a,c.params,this.reader,this.createCallback(e,a,b),this,c)}return d},save:function(){if(!this.writer){throw new Ext.data.Store.Error(\"writer-undefined\")}var h=[],j,k,e,c={},d;if(this.removed.length){h.push([\"destroy\",this.removed])}var b=[].concat(this.getModifiedRecords());if(b.length){var g=[];for(d=b.length-1;d>=0;d--){if(b[d].phantom===true){var a=b.splice(d,1).shift();if(a.isValid()){g.push(a)}}else{if(!b[d].isValid()){b.splice(d,1)}}}if(g.length){h.push([\"create\",g])}if(b.length){h.push([\"update\",b])}}j=h.length;if(j){e=++this.batchCounter;for(d=0;d<j;++d){k=h[d];c[k[0]]=k[1]}if(this.fireEvent(\"beforesave\",this,c)!==false){for(d=0;d<j;++d){k=h[d];this.doTransaction(k[0],k[1],e)}return e}}return -1},doTransaction:function(e,b,c){function g(h){try{this.execute(e,h,undefined,c)}catch(i){this.handleException(i)}}if(this.batch===false){for(var d=0,a=b.length;d<a;d++){g.call(this,b[d])}}else{g.call(this,b)}},addToBatch:function(c){var a=this.batches,d=this.batchKey+c,e=a[d];if(!e){a[d]=e={id:c,count:0,data:{}}}++e.count},removeFromBatch:function(d,h,g){var c=this.batches,e=this.batchKey+d,i=c[e],a;if(i){a=i.data[h]||[];i.data[h]=a.concat(g);if(i.count===1){g=i.data;delete c[e];this.fireEvent(\"save\",this,d,g)}else{--i.count}}},createCallback:function(c,a,b){var d=Ext.data.Api.actions;return(c==\"read\")?this.loadRecords:function(g,e,h){this[\"on\"+Ext.util.Format.capitalize(c)+\"Records\"](h,a,[].concat(g));if(h===true){this.fireEvent(\"write\",this,c,g,e,a)}this.removeFromBatch(b,c,g)}},clearModified:function(a){if(Ext.isArray(a)){for(var b=a.length-1;b>=0;b--){this.modified.splice(this.modified.indexOf(a[b]),1)}}else{this.modified.splice(this.modified.indexOf(a),1)}},reMap:function(b){if(Ext.isArray(b)){for(var d=0,a=b.length;d<a;d++){this.reMap(b[d])}}else{delete this.data.map[b._phid];this.data.map[b.id]=b;var c=this.data.keys.indexOf(b._phid);this.data.keys.splice(c,1,b.id);delete b._phid}},onCreateRecords:function(d,a,b){if(d===true){try{this.reader.realize(a,b)}catch(c){this.handleException(c);if(Ext.isArray(a)){this.onCreateRecords(d,a,b)}}}},onUpdateRecords:function(d,a,b){if(d===true){try{this.reader.update(a,b)}catch(c){this.handleException(c);if(Ext.isArray(a)){this.onUpdateRecords(d,a,b)}}}},onDestroyRecords:function(e,b,d){b=(b instanceof Ext.data.Record)?[b]:[].concat(b);for(var c=0,a=b.length;c<a;c++){this.removed.splice(this.removed.indexOf(b[c]),1)}if(e===false){for(c=b.length-1;c>=0;c--){this.insert(b[c].lastIndex,b[c])}}},handleException:function(a){Ext.handleError(a)},reload:function(a){this.load(Ext.applyIf(a||{},this.lastOptions))},loadRecords:function(b,l,h){var e,g;if(this.isDestroyed===true){return}if(!b||h===false){if(h!==false){this.fireEvent(\"load\",this,[],l)}if(l.callback){l.callback.call(l.scope||this,[],l,false,b)}return}var a=b.records,j=b.totalRecords||a.length;if(!l||l.add!==true){if(this.pruneModifiedRecords){this.modified=[]}for(e=0,g=a.length;e<g;e++){a[e].join(this)}if(this.snapshot){this.data=this.snapshot;delete this.snapshot}this.clearData();this.data.addAll(a);this.totalLength=j;this.applySort();this.fireEvent(\"datachanged\",this)}else{var k=[],d,c=0;for(e=0,g=a.length;e<g;++e){d=a[e];if(this.indexOfId(d.id)>-1){this.doUpdate(d)}else{k.push(d);++c}}this.totalLength=Math.max(j,this.data.length+c);this.add(k)}this.fireEvent(\"load\",this,a,l);if(l.callback){l.callback.call(l.scope||this,a,l,true)}},loadData:function(c,a){var b=this.reader.readRecords(c);this.loadRecords(b,{add:a},true)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if((this.sortInfo||this.multiSortInfo)&&!this.remoteSort){this.sortData()}},sortData:function(){var a=this.hasMultiSort?this.multiSortInfo:this.sortInfo,k=a.direction||\"ASC\",h=a.sorters,c=[];if(!this.hasMultiSort){h=[{direction:k,field:a.field}]}for(var d=0,b=h.length;d<b;d++){c.push(this.createSortFunction(h[d].field,h[d].direction))}if(c.length==0){return}var g=k.toUpperCase()==\"DESC\"?-1:1;var e=function(n,m){var l=c[0].call(this,n,m);if(c.length>1){for(var p=1,o=c.length;p<o;p++){l=l||c[p].call(this,n,m)}}return g*l};this.data.sort(k,e);if(this.snapshot&&this.snapshot!=this.data){this.snapshot.sort(k,e)}},createSortFunction:function(c,b){b=b||\"ASC\";var a=b.toUpperCase()==\"DESC\"?-1:1;var d=this.fields.get(c).sortType;return function(g,e){var i=d(g.data[c]),h=d(e.data[c]);return a*(i>h?1:(i<h?-1:0))}},setDefaultSort:function(b,a){a=a?a.toUpperCase():\"ASC\";this.sortInfo={field:b,direction:a};this.sortToggle[b]=a},sort:function(b,a){if(Ext.isArray(arguments[0])){return this.multiSort.call(this,b,a)}else{return this.singleSort(b,a)}},singleSort:function(g,c){var e=this.fields.get(g);if(!e){return false}var b=e.name,a=this.sortInfo||null,d=this.sortToggle?this.sortToggle[b]:null;if(!c){if(a&&a.field==b){c=(this.sortToggle[b]||\"ASC\").toggle(\"ASC\",\"DESC\")}else{c=e.sortDir}}this.sortToggle[b]=c;this.sortInfo={field:b,direction:c};this.hasMultiSort=false;if(this.remoteSort){if(!this.load(this.lastOptions)){if(d){this.sortToggle[b]=d}if(a){this.sortInfo=a}}}else{this.applySort();this.fireEvent(\"datachanged\",this)}return true},multiSort:function(b,a){this.hasMultiSort=true;a=a||\"ASC\";if(this.multiSortInfo&&a==this.multiSortInfo.direction){a=a.toggle(\"ASC\",\"DESC\")}this.multiSortInfo={sorters:b,direction:a};if(this.remoteSort){this.singleSort(b[0].field,b[0].direction)}else{this.applySort();this.fireEvent(\"datachanged\",this)}},each:function(b,a){this.data.each(b,a)},getModifiedRecords:function(){return this.modified},sum:function(e,g,a){var c=this.data.items,b=0;g=g||0;a=(a||a===0)?a:c.length-1;for(var d=g;d<=a;d++){b+=(c[d].data[e]||0)}return b},createFilterFn:function(d,c,e,a,b){if(Ext.isEmpty(c,false)){return false}c=this.data.createValueMatcher(c,e,a,b);return function(g){return c.test(g.data[d])}},createMultipleFilterFn:function(a){return function(b){var k=true;for(var d=0,c=a.length;d<c;d++){var h=a[d],g=h.fn,e=h.scope;k=k&&g.call(e,b)}return k}},filter:function(n,m,h,k,e){var l;if(Ext.isObject(n)){n=[n]}if(Ext.isArray(n)){var b=[];for(var g=0,d=n.length;g<d;g++){var a=n[g],c=a.fn,o=a.scope||this;if(!Ext.isFunction(c)){c=this.createFilterFn(a.property,a.value,a.anyMatch,a.caseSensitive,a.exactMatch)}b.push({fn:c,scope:o})}l=this.createMultipleFilterFn(b)}else{l=this.createFilterFn(n,m,h,k,e)}return l?this.filterBy(l):this.clearFilter()},filterBy:function(b,a){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(b,a||this);this.fireEvent(\"datachanged\",this)},clearFilter:function(a){if(this.isFiltered()){this.data=this.snapshot;delete this.snapshot;if(a!==true){this.fireEvent(\"datachanged\",this)}}},isFiltered:function(){return !!this.snapshot&&this.snapshot!=this.data},query:function(d,c,e,a){var b=this.createFilterFn(d,c,e,a);return b?this.queryBy(b):this.data.clone()},queryBy:function(b,a){var c=this.snapshot||this.data;return c.filterBy(b,a||this)},find:function(d,c,g,e,a){var b=this.createFilterFn(d,c,e,a);return b?this.data.findIndexBy(b,null,g):-1},findExact:function(b,a,c){return this.data.findIndexBy(function(d){return d.get(b)===a},this,c)},findBy:function(b,a,c){return this.data.findIndexBy(b,a,c)},collect:function(j,k,b){var h=(b===true&&this.snapshot)?this.snapshot.items:this.data.items;var m,n,a=[],c={};for(var e=0,g=h.length;e<g;e++){m=h[e].data[j];n=String(m);if((k||!Ext.isEmpty(m))&&!c[n]){c[n]=true;a[a.length]=m}}return a},afterEdit:function(a){if(this.modified.indexOf(a)==-1){this.modified.push(a)}this.fireEvent(\"update\",this,a,Ext.data.Record.EDIT)},afterReject:function(a){this.modified.remove(a);this.fireEvent(\"update\",this,a,Ext.data.Record.REJECT)},afterCommit:function(a){this.modified.remove(a);this.fireEvent(\"update\",this,a,Ext.data.Record.COMMIT)},commitChanges:function(){var a=this.modified.slice(0),c=a.length,b;for(b=0;b<c;b++){a[b].commit()}this.modified=[];this.removed=[]},rejectChanges:function(){var a=this.modified.slice(0),e=this.removed.slice(0).reverse(),c=a.length,d=e.length,b;for(b=0;b<c;b++){a[b].reject()}for(b=0;b<d;b++){this.insert(e[b].lastIndex||0,e[b]);e[b].reject()}this.modified=[];this.removed=[]},onMetaChange:function(a){this.recordType=this.reader.recordType;this.fields=this.recordType.prototype.fields;delete this.snapshot;if(this.reader.meta.sortInfo){this.sortInfo=this.reader.meta.sortInfo}else{if(this.sortInfo&&!this.fields.get(this.sortInfo.field)){delete this.sortInfo}}if(this.writer){this.writer.meta=this.reader.meta}this.modified=[];this.fireEvent(\"metachange\",this,this.reader.meta)},findInsertIndex:function(a){this.suspendEvents();var c=this.data.clone();this.data.add(a);this.applySort();var b=this.data.indexOf(a);this.data=c;this.resumeEvents();return b},setBaseParam:function(a,b){this.baseParams=this.baseParams||{};this.baseParams[a]=b}});Ext.reg(\"store\",Ext.data.Store);Ext.data.Store.Error=Ext.extend(Ext.Error,{name:\"Ext.data.Store\"});Ext.apply(Ext.data.Store.Error.prototype,{lang:{\"writer-undefined\":\"Attempted to execute a write-action without a DataWriter installed.\"}});Ext.data.Field=Ext.extend(Object,{constructor:function(b){if(Ext.isString(b)){b={name:b}}Ext.apply(this,b);var d=Ext.data.Types,a=this.sortType,c;if(this.type){if(Ext.isString(this.type)){this.type=Ext.data.Types[this.type.toUpperCase()]||d.AUTO}}else{this.type=d.AUTO}if(Ext.isString(a)){this.sortType=Ext.data.SortTypes[a]}else{if(Ext.isEmpty(a)){this.sortType=this.type.sortType}}if(!this.convert){this.convert=this.type.convert}},dateFormat:null,useNull:false,defaultValue:\"\",mapping:null,sortType:null,sortDir:\"ASC\",allowBlank:true});Ext.data.DataReader=function(a,b){this.meta=a;this.recordType=Ext.isArray(b)?Ext.data.Record.create(b):b;if(this.recordType){this.buildExtractors()}};Ext.data.DataReader.prototype={getTotal:Ext.emptyFn,getRoot:Ext.emptyFn,getMessage:Ext.emptyFn,getSuccess:Ext.emptyFn,getId:Ext.emptyFn,buildExtractors:Ext.emptyFn,extractValues:Ext.emptyFn,realize:function(a,c){if(Ext.isArray(a)){for(var b=a.length-1;b>=0;b--){if(Ext.isArray(c)){this.realize(a.splice(b,1).shift(),c.splice(b,1).shift())}else{this.realize(a.splice(b,1).shift(),c)}}}else{if(Ext.isArray(c)&&c.length==1){c=c.shift()}if(!this.isData(c)){throw new Ext.data.DataReader.Error(\"realize\",a)}a.phantom=false;a._phid=a.id;a.id=this.getId(c);a.data=c;a.commit();a.store.reMap(a)}},update:function(a,c){if(Ext.isArray(a)){for(var b=a.length-1;b>=0;b--){if(Ext.isArray(c)){this.update(a.splice(b,1).shift(),c.splice(b,1).shift())}else{this.update(a.splice(b,1).shift(),c)}}}else{if(Ext.isArray(c)&&c.length==1){c=c.shift()}if(this.isData(c)){a.data=Ext.apply(a.data,c)}a.commit()}},extractData:function(k,a){var j=(this instanceof Ext.data.JsonReader)?\"json\":\"node\";var c=[];if(this.isData(k)&&!(this instanceof Ext.data.XmlReader)){k=[k]}var h=this.recordType.prototype.fields,o=h.items,m=h.length,c=[];if(a===true){var l=this.recordType;for(var e=0;e<k.length;e++){var b=k[e];var g=new l(this.extractValues(b,o,m),this.getId(b));g[j]=b;c.push(g)}}else{for(var e=0;e<k.length;e++){var d=this.extractValues(k[e],o,m);d[this.meta.idProperty]=this.getId(k[e]);c.push(d)}}return c},isData:function(a){return(a&&Ext.isObject(a)&&!Ext.isEmpty(this.getId(a)))?true:false},onMetaChange:function(a){delete this.ef;this.meta=a;this.recordType=Ext.data.Record.create(a.fields);this.buildExtractors()}};Ext.data.DataReader.Error=Ext.extend(Ext.Error,{constructor:function(b,a){this.arg=a;Ext.Error.call(this,b)},name:\"Ext.data.DataReader\"});Ext.apply(Ext.data.DataReader.Error.prototype,{lang:{update:\"#update received invalid data from server.  Please see docs for DataReader#update and review your DataReader configuration.\",realize:\"#realize was called with invalid remote-data.  Please see the docs for DataReader#realize and review your DataReader configuration.\",\"invalid-response\":\"#readResponse received an invalid response from the server.\"}});Ext.data.DataWriter=function(a){Ext.apply(this,a)};Ext.data.DataWriter.prototype={writeAllFields:false,listful:false,apply:function(e,g,d,a){var c=[],b=d+\"Record\";if(Ext.isArray(a)){Ext.each(a,function(h){c.push(this[b](h))},this)}else{if(a instanceof Ext.data.Record){c=this[b](a)}}this.render(e,g,c)},render:Ext.emptyFn,updateRecord:Ext.emptyFn,createRecord:Ext.emptyFn,destroyRecord:Ext.emptyFn,toHash:function(g,c){var e=g.fields.map,d={},b=(this.writeAllFields===false&&g.phantom===false)?g.getChanges():g.data,a;Ext.iterate(b,function(i,h){if((a=e[i])){d[a.mapping?a.mapping:a.name]=h}});if(g.phantom){if(g.fields.containsKey(this.meta.idProperty)&&Ext.isEmpty(g.data[this.meta.idProperty])){delete d[this.meta.idProperty]}}else{d[this.meta.idProperty]=g.id}return d},toArray:function(b){var a=[];Ext.iterate(b,function(d,c){a.push({name:d,value:c})},this);return a}};Ext.data.DataProxy=function(a){a=a||{};this.api=a.api;this.url=a.url;this.restful=a.restful;this.listeners=a.listeners;this.prettyUrls=a.prettyUrls;this.addEvents(\"exception\",\"beforeload\",\"load\",\"loadexception\",\"beforewrite\",\"write\");Ext.data.DataProxy.superclass.constructor.call(this);try{Ext.data.Api.prepare(this)}catch(b){if(b instanceof Ext.data.Api.Error){b.toConsole()}}Ext.data.DataProxy.relayEvents(this,[\"beforewrite\",\"write\",\"exception\"])};Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{restful:false,setApi:function(){if(arguments.length==1){var a=Ext.data.Api.isValid(arguments[0]);if(a===true){this.api=arguments[0]}else{throw new Ext.data.Api.Error(\"invalid\",a)}}else{if(arguments.length==2){if(!Ext.data.Api.isAction(arguments[0])){throw new Ext.data.Api.Error(\"invalid\",arguments[0])}this.api[arguments[0]]=arguments[1]}}Ext.data.Api.prepare(this)},isApiAction:function(a){return(this.api[a])?true:false},request:function(e,b,g,a,h,d,c){if(!this.api[e]&&!this.load){throw new Ext.data.DataProxy.Error(\"action-undefined\",e)}g=g||{};if((e===Ext.data.Api.actions.read)?this.fireEvent(\"beforeload\",this,g):this.fireEvent(\"beforewrite\",this,e,b,g)!==false){this.doRequest.apply(this,arguments)}else{h.call(d||this,null,c,false)}},load:null,doRequest:function(e,b,g,a,h,d,c){this.load(g,a,h,d,c)},onRead:Ext.emptyFn,onWrite:Ext.emptyFn,buildUrl:function(d,b){b=b||null;var c=(this.conn&&this.conn.url)?this.conn.url:(this.api[d])?this.api[d].url:this.url;if(!c){throw new Ext.data.Api.Error(\"invalid-url\",d)}var e=null;var a=c.match(/(.*)(\\.json|\\.xml|\\.html)$/);if(a){e=a[2];c=a[1]}if((this.restful===true||this.prettyUrls===true)&&b instanceof Ext.data.Record&&!b.phantom){c+=\"/\"+b.id}return(e===null)?c:c+e},destroy:function(){this.purgeListeners()}});Ext.apply(Ext.data.DataProxy,Ext.util.Observable.prototype);Ext.util.Observable.call(Ext.data.DataProxy);Ext.data.DataProxy.Error=Ext.extend(Ext.Error,{constructor:function(b,a){this.arg=a;Ext.Error.call(this,b)},name:\"Ext.data.DataProxy\"});Ext.apply(Ext.data.DataProxy.Error.prototype,{lang:{\"action-undefined\":\"DataProxy attempted to execute an API-action but found an undefined url / function.  Please review your Proxy url/api-configuration.\",\"api-invalid\":\"Recieved an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions from Ext.data.Api.actions.\"}});Ext.data.Request=function(a){Ext.apply(this,a)};Ext.data.Request.prototype={action:undefined,rs:undefined,params:undefined,callback:Ext.emptyFn,scope:undefined,reader:undefined};Ext.data.Response=function(a){Ext.apply(this,a)};Ext.data.Response.prototype={action:undefined,success:undefined,message:undefined,data:undefined,raw:undefined,records:undefined};Ext.data.ScriptTagProxy=function(a){Ext.apply(this,a);Ext.data.ScriptTagProxy.superclass.constructor.call(this,a);this.head=document.getElementsByTagName(\"head\")[0]};Ext.data.ScriptTagProxy.TRANS_ID=1000;Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:30000,callbackParam:\"callback\",nocache:true,doRequest:function(e,g,d,h,j,k,l){var c=Ext.urlEncode(Ext.apply(d,this.extraParams));var b=this.buildUrl(e,g);if(!b){throw new Ext.data.Api.Error(\"invalid-url\",b)}b=Ext.urlAppend(b,c);if(this.nocache){b=Ext.urlAppend(b,\"_dc=\"+(new Date().getTime()))}var a=++Ext.data.ScriptTagProxy.TRANS_ID;var m={id:a,action:e,cb:\"stcCallback\"+a,scriptId:\"stcScript\"+a,params:d,arg:l,url:b,callback:j,scope:k,reader:h};window[m.cb]=this.createCallback(e,g,m);b+=String.format(\"&{0}={1}\",this.callbackParam,m.cb);if(this.autoAbort!==false){this.abort()}m.timeoutId=this.handleFailure.defer(this.timeout,this,[m]);var i=document.createElement(\"script\");i.setAttribute(\"src\",b);i.setAttribute(\"type\",\"text/javascript\");i.setAttribute(\"id\",m.scriptId);this.head.appendChild(i);this.trans=m},createCallback:function(d,b,c){var a=this;return function(e){a.trans=false;a.destroyTrans(c,true);if(d===Ext.data.Api.actions.read){a.onRead.call(a,d,c,e)}else{a.onWrite.call(a,d,c,e,b)}}},onRead:function(d,c,b){var a;try{a=c.reader.readRecords(b)}catch(g){this.fireEvent(\"loadexception\",this,c,b,g);this.fireEvent(\"exception\",this,\"response\",d,c,b,g);c.callback.call(c.scope||window,null,c.arg,false);return}if(a.success===false){this.fireEvent(\"loadexception\",this,c,b);this.fireEvent(\"exception\",this,\"remote\",d,c,b,null)}else{this.fireEvent(\"load\",this,b,c.arg)}c.callback.call(c.scope||window,a,c.arg,a.success)},onWrite:function(h,g,c,b){var a=g.reader;try{var d=a.readResponse(h,c)}catch(i){this.fireEvent(\"exception\",this,\"response\",h,g,d,i);g.callback.call(g.scope||window,null,d,false);return}if(!d.success===true){this.fireEvent(\"exception\",this,\"remote\",h,g,d,b);g.callback.call(g.scope||window,null,d,false);return}this.fireEvent(\"write\",this,h,d.data,d,b,g.arg);g.callback.call(g.scope||window,d.data,d,true)},isLoading:function(){return this.trans?true:false},abort:function(){if(this.isLoading()){this.destroyTrans(this.trans)}},destroyTrans:function(b,a){this.head.removeChild(document.getElementById(b.scriptId));clearTimeout(b.timeoutId);if(a){window[b.cb]=undefined;try{delete window[b.cb]}catch(c){}}else{window[b.cb]=function(){window[b.cb]=undefined;try{delete window[b.cb]}catch(d){}}}},handleFailure:function(a){this.trans=false;this.destroyTrans(a,false);if(a.action===Ext.data.Api.actions.read){this.fireEvent(\"loadexception\",this,null,a.arg)}this.fireEvent(\"exception\",this,\"response\",a.action,{response:null,options:a.arg});a.callback.call(a.scope||window,null,a.arg,false)},destroy:function(){this.abort();Ext.data.ScriptTagProxy.superclass.destroy.call(this)}});Ext.data.HttpProxy=function(a){Ext.data.HttpProxy.superclass.constructor.call(this,a);this.conn=a;this.conn.url=null;this.useAjax=!a||!a.events;var c=Ext.data.Api.actions;this.activeRequest={};for(var b in c){this.activeRequest[c[b]]=undefined}};Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},setUrl:function(a,b){this.conn.url=a;if(b===true){this.url=a;this.api=null;Ext.data.Api.prepare(this)}},doRequest:function(g,d,i,c,b,e,a){var h={method:(this.api[g])?this.api[g][\"method\"]:undefined,request:{callback:b,scope:e,arg:a},reader:c,callback:this.createCallback(g,d),scope:this};if(i.jsonData){h.jsonData=i.jsonData}else{if(i.xmlData){h.xmlData=i.xmlData}else{h.params=i||{}}}this.conn.url=this.buildUrl(g,d);if(this.useAjax){Ext.applyIf(h,this.conn);if(this.activeRequest[g]){}this.activeRequest[g]=Ext.Ajax.request(h)}else{this.conn.request(h)}this.conn.url=null},createCallback:function(b,a){return function(e,d,c){this.activeRequest[b]=undefined;if(!d){if(b===Ext.data.Api.actions.read){this.fireEvent(\"loadexception\",this,e,c)}this.fireEvent(\"exception\",this,\"response\",b,e,c);e.request.callback.call(e.request.scope,null,e.request.arg,false);return}if(b===Ext.data.Api.actions.read){this.onRead(b,e,c)}else{this.onWrite(b,e,c,a)}}},onRead:function(d,h,b){var a;try{a=h.reader.read(b)}catch(g){this.fireEvent(\"loadexception\",this,h,b,g);this.fireEvent(\"exception\",this,\"response\",d,h,b,g);h.request.callback.call(h.request.scope,null,h.request.arg,false);return}if(a.success===false){this.fireEvent(\"loadexception\",this,h,b);var c=h.reader.readResponse(d,b);this.fireEvent(\"exception\",this,\"remote\",d,h,c,null)}else{this.fireEvent(\"load\",this,h,h.request.arg)}h.request.callback.call(h.request.scope,a,h.request.arg,a.success)},onWrite:function(g,i,c,b){var a=i.reader;var d;try{d=a.readResponse(g,c)}catch(h){this.fireEvent(\"exception\",this,\"response\",g,i,c,h);i.request.callback.call(i.request.scope,null,i.request.arg,false);return}if(d.success===true){this.fireEvent(\"write\",this,g,d.data,d,b,i.request.arg)}else{this.fireEvent(\"exception\",this,\"remote\",g,i,d,b)}i.request.callback.call(i.request.scope,d.data,d,d.success)},destroy:function(){if(!this.useAjax){this.conn.abort()}else{if(this.activeRequest){var b=Ext.data.Api.actions;for(var a in b){if(this.activeRequest[b[a]]){Ext.Ajax.abort(this.activeRequest[b[a]])}}}}Ext.data.HttpProxy.superclass.destroy.call(this)}});Ext.data.MemoryProxy=function(b){var a={};a[Ext.data.Api.actions.read]=true;Ext.data.MemoryProxy.superclass.constructor.call(this,{api:a});this.data=b};Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{doRequest:function(b,c,a,d,h,i,j){a=a||{};var k;try{k=d.readRecords(this.data)}catch(g){this.fireEvent(\"loadexception\",this,null,j,g);this.fireEvent(\"exception\",this,\"response\",b,j,null,g);h.call(i,null,j,false);return}h.call(i,k,j,true)}});Ext.data.Types=new function(){var a=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\\$,%]/g,AUTO:{convert:function(b){return b},sortType:a.none,type:\"auto\"},STRING:{convert:function(b){return(b===undefined||b===null)?\"\":String(b)},sortType:a.asUCString,type:\"string\"},INT:{convert:function(b){return b!==undefined&&b!==null&&b!==\"\"?parseInt(String(b).replace(Ext.data.Types.stripRe,\"\"),10):(this.useNull?null:0)},sortType:a.none,type:\"int\"},FLOAT:{convert:function(b){return b!==undefined&&b!==null&&b!==\"\"?parseFloat(String(b).replace(Ext.data.Types.stripRe,\"\"),10):(this.useNull?null:0)},sortType:a.none,type:\"float\"},BOOL:{convert:function(b){return b===true||b===\"true\"||b==1},sortType:a.none,type:\"bool\"},DATE:{convert:function(c){var d=this.dateFormat;if(!c){return null}if(Ext.isDate(c)){return c}if(d){if(d==\"timestamp\"){return new Date(c*1000)}if(d==\"time\"){return new Date(parseInt(c,10))}return Date.parseDate(c,d)}var b=Date.parse(c);return b?new Date(b):null},sortType:a.asDate,type:\"date\"}});Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})};Ext.data.JsonWriter=Ext.extend(Ext.data.DataWriter,{encode:true,encodeDelete:false,constructor:function(a){Ext.data.JsonWriter.superclass.constructor.call(this,a)},render:function(c,d,b){if(this.encode===true){Ext.apply(c,d);c[this.meta.root]=Ext.encode(b)}else{var a=Ext.apply({},d);a[this.meta.root]=b;c.jsonData=a}},createRecord:function(a){return this.toHash(a)},updateRecord:function(a){return this.toHash(a)},destroyRecord:function(b){if(this.encodeDelete){var a={};a[this.meta.idProperty]=b.id;return a}else{return b.id}}});Ext.data.JsonReader=function(a,b){a=a||{};Ext.applyIf(a,{idProperty:\"id\",successProperty:\"success\",totalProperty:\"total\"});Ext.data.JsonReader.superclass.constructor.call(this,a,b||a.fields)};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(a){var b=a.responseText;var c=Ext.decode(b);if(!c){throw {message:\"JsonReader.read: Json object not found\"}}return this.readRecords(c)},readResponse:function(e,b){var h=(b.responseText!==undefined)?Ext.decode(b.responseText):b;if(!h){throw new Ext.data.JsonReader.Error(\"response\")}var a=this.getRoot(h),g=this.getSuccess(h);if(g&&e===Ext.data.Api.actions.create){var d=Ext.isDefined(a);if(d&&Ext.isEmpty(a)){throw new Ext.data.JsonReader.Error(\"root-empty\",this.meta.root)}else{if(!d){throw new Ext.data.JsonReader.Error(\"root-undefined-response\",this.meta.root)}}}var c=new Ext.data.Response({action:e,success:g,data:(a)?this.extractData(a,false):[],message:this.getMessage(h),raw:h});if(Ext.isEmpty(c.success)){throw new Ext.data.JsonReader.Error(\"successProperty-response\",this.meta.successProperty)}return c},readRecords:function(a){this.jsonData=a;if(a.metaData){this.onMetaChange(a.metaData)}var m=this.meta,h=this.recordType,b=h.prototype.fields,l=b.items,i=b.length,j;var g=this.getRoot(a),e=g.length,d=e,k=true;if(m.totalProperty){j=parseInt(this.getTotal(a),10);if(!isNaN(j)){d=j}}if(m.successProperty){j=this.getSuccess(a);if(j===false||j===\"false\"){k=false}}return{success:k,records:this.extractData(g,true),totalRecords:d}},buildExtractors:function(){if(this.ef){return}var l=this.meta,h=this.recordType,e=h.prototype.fields,k=e.items,j=e.length;if(l.totalProperty){this.getTotal=this.createAccessor(l.totalProperty)}if(l.successProperty){this.getSuccess=this.createAccessor(l.successProperty)}if(l.messageProperty){this.getMessage=this.createAccessor(l.messageProperty)}this.getRoot=l.root?this.createAccessor(l.root):function(g){return g};if(l.id||l.idProperty){var d=this.createAccessor(l.id||l.idProperty);this.getId=function(i){var g=d(i);return(g===undefined||g===\"\")?null:g}}else{this.getId=function(){return null}}var c=[];for(var b=0;b<j;b++){e=k[b];var a=(e.mapping!==undefined&&e.mapping!==null)?e.mapping:e.name;c.push(this.createAccessor(a))}this.ef=c},simpleAccess:function(b,a){return b[a]},createAccessor:function(){var a=/[\\[\\.]/;return function(c){if(Ext.isEmpty(c)){return Ext.emptyFn}if(Ext.isFunction(c)){return c}var b=String(c).search(a);if(b>=0){return new Function(\"obj\",\"return obj\"+(b>0?\".\":\"\")+c)}return function(d){return d[c]}}}(),extractValues:function(h,d,a){var g,c={};for(var e=0;e<a;e++){g=d[e];var b=this.ef[e](h);c[g.name]=g.convert((b!==undefined)?b:g.defaultValue,h)}return c}});Ext.data.JsonReader.Error=Ext.extend(Ext.Error,{constructor:function(b,a){this.arg=a;Ext.Error.call(this,b)},name:\"Ext.data.JsonReader\"});Ext.apply(Ext.data.JsonReader.Error.prototype,{lang:{response:\"An error occurred while json-decoding your server response\",\"successProperty-response\":'Could not locate your \"successProperty\" in your server response.  Please review your JsonReader config to ensure the config-property \"successProperty\" matches the property in your server-response.  See the JsonReader docs.',\"root-undefined-config\":'Your JsonReader was configured without a \"root\" property.  Please review your JsonReader config and make sure to define the root property.  See the JsonReader docs.',\"idProperty-undefined\":'Your JsonReader was configured without an \"idProperty\"  Please review your JsonReader configuration and ensure the \"idProperty\" is set (e.g.: \"id\").  See the JsonReader docs.',\"root-empty\":'Data was expected to be returned by the server in the \"root\" property of the response.  Please review your JsonReader configuration to ensure the \"root\" property matches that returned in the server-response.  See JsonReader docs.'}});Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(r){this.arrayData=r;var l=this.meta,d=l?Ext.num(l.idIndex,l.id):null,b=this.recordType,q=b.prototype.fields,z=[],e=true,g;var u=this.getRoot(r);for(var y=0,A=u.length;y<A;y++){var t=u[y],a={},p=((d||d===0)&&t[d]!==undefined&&t[d]!==\"\"?t[d]:null);for(var x=0,m=q.length;x<m;x++){var B=q.items[x],w=B.mapping!==undefined&&B.mapping!==null?B.mapping:x;g=t[w]!==undefined?t[w]:B.defaultValue;g=B.convert(g,t);a[B.name]=g}var c=new b(a,p);c.json=t;z[z.length]=c}var h=z.length;if(l.totalProperty){g=parseInt(this.getTotal(r),10);if(!isNaN(g)){h=g}}if(l.successProperty){g=this.getSuccess(r);if(g===false||g===\"false\"){e=false}}return{success:e,records:z,totalRecords:h}}});Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.ArrayStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.ArrayReader(a)}))},loadData:function(e,b){if(this.expandData===true){var d=[];for(var c=0,a=e.length;c<a;c++){d[d.length]=[e[c]]}e=d}Ext.data.ArrayStore.superclass.loadData.call(this,e,b)}});Ext.reg(\"arraystore\",Ext.data.ArrayStore);Ext.data.SimpleStore=Ext.data.ArrayStore;Ext.reg(\"simplestore\",Ext.data.SimpleStore);Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.JsonReader(a)}))}});Ext.reg(\"jsonstore\",Ext.data.JsonStore);Ext.data.XmlWriter=function(a){Ext.data.XmlWriter.superclass.constructor.apply(this,arguments);this.tpl=(typeof(this.tpl)===\"string\")?new Ext.XTemplate(this.tpl).compile():this.tpl.compile()};Ext.extend(Ext.data.XmlWriter,Ext.data.DataWriter,{documentRoot:\"xrequest\",forceDocumentRoot:false,root:\"records\",xmlVersion:\"1.0\",xmlEncoding:\"ISO-8859-15\",tpl:'<tpl for=\".\"><\\u003fxml version=\"{version}\" encoding=\"{encoding}\"\\u003f><tpl if=\"documentRoot\"><{documentRoot}><tpl for=\"baseParams\"><tpl for=\".\"><{name}>{value}</{name}></tpl></tpl></tpl><tpl if=\"records.length&gt;1\"><{root}></tpl><tpl for=\"records\"><{parent.record}><tpl for=\".\"><{name}>{value}</{name}></tpl></{parent.record}></tpl><tpl if=\"records.length&gt;1\"></{root}></tpl><tpl if=\"documentRoot\"></{documentRoot}></tpl></tpl>',render:function(b,c,a){c=this.toArray(c);b.xmlData=this.tpl.applyTemplate({version:this.xmlVersion,encoding:this.xmlEncoding,documentRoot:(c.length>0||this.forceDocumentRoot===true)?this.documentRoot:false,record:this.meta.record,root:this.root,baseParams:c,records:(Ext.isArray(a[0]))?a:[a]})},createRecord:function(a){return this.toArray(this.toHash(a))},updateRecord:function(a){return this.toArray(this.toHash(a))},destroyRecord:function(b){var a={};a[this.meta.idProperty]=b.id;return this.toArray(a)}});Ext.data.XmlReader=function(a,b){a=a||{};Ext.applyIf(a,{idProperty:a.idProperty||a.idPath||a.id,successProperty:a.successProperty||a.success});Ext.data.XmlReader.superclass.constructor.call(this,a,b||a.fields)};Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(a){var b=a.responseXML;if(!b){throw {message:\"XmlReader.read: XML Document not available\"}}return this.readRecords(b)},readRecords:function(d){this.xmlData=d;var a=d.documentElement||d,c=Ext.DomQuery,g=0,e=true;if(this.meta.totalProperty){g=this.getTotal(a,0)}if(this.meta.successProperty){e=this.getSuccess(a)}var b=this.extractData(c.select(this.meta.record,a),true);return{success:e,records:b,totalRecords:g||b.length}},readResponse:function(g,b){var e=Ext.DomQuery,h=b.responseXML,a=h.documentElement||h;var c=new Ext.data.Response({action:g,success:this.getSuccess(a),message:this.getMessage(a),data:this.extractData(e.select(this.meta.record,a)||e.select(this.meta.root,a),false),raw:h});if(Ext.isEmpty(c.success)){throw new Ext.data.DataReader.Error(\"successProperty-response\",this.meta.successProperty)}if(g===Ext.data.Api.actions.create){var d=Ext.isDefined(c.data);if(d&&Ext.isEmpty(c.data)){throw new Ext.data.JsonReader.Error(\"root-empty\",this.meta.root)}else{if(!d){throw new Ext.data.JsonReader.Error(\"root-undefined-response\",this.meta.root)}}}return c},getSuccess:function(){return true},buildExtractors:function(){if(this.ef){return}var l=this.meta,h=this.recordType,e=h.prototype.fields,k=e.items,j=e.length;if(l.totalProperty){this.getTotal=this.createAccessor(l.totalProperty)}if(l.successProperty){this.getSuccess=this.createAccessor(l.successProperty)}if(l.messageProperty){this.getMessage=this.createAccessor(l.messageProperty)}this.getRoot=function(g){return(!Ext.isEmpty(g[this.meta.record]))?g[this.meta.record]:g[this.meta.root]};if(l.idPath||l.idProperty){var d=this.createAccessor(l.idPath||l.idProperty);this.getId=function(g){var i=d(g)||g.id;return(i===undefined||i===\"\")?null:i}}else{this.getId=function(){return null}}var c=[];for(var b=0;b<j;b++){e=k[b];var a=(e.mapping!==undefined&&e.mapping!==null)?e.mapping:e.name;c.push(this.createAccessor(a))}this.ef=c},createAccessor:function(){var a=Ext.DomQuery;return function(b){if(Ext.isFunction(b)){return b}switch(b){case this.meta.totalProperty:return function(c,d){return a.selectNumber(b,c,d)};break;case this.meta.successProperty:return function(d,e){var c=a.selectValue(b,d,true);var g=c!==false&&c!==\"false\";return g};break;default:return function(c,d){return a.selectValue(b,c,d)};break}}}(),extractValues:function(h,d,a){var g,c={};for(var e=0;e<a;e++){g=d[e];var b=this.ef[e](h);c[g.name]=g.convert((b!==undefined)?b:g.defaultValue,h)}return c}});Ext.data.XmlStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.XmlStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.XmlReader(a)}))}});Ext.reg(\"xmlstore\",Ext.data.XmlStore);Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(d){d=d||{};this.hasMultiSort=true;this.multiSortInfo=this.multiSortInfo||{sorters:[]};var e=this.multiSortInfo.sorters,c=d.groupField||this.groupField,b=d.sortInfo||this.sortInfo,a=d.groupDir||this.groupDir;if(c){e.push({field:c,direction:a})}if(b){e.push(b)}Ext.data.GroupingStore.superclass.constructor.call(this,d);this.addEvents(\"groupchange\");this.applyGroupField()},remoteGroup:false,groupOnSort:false,groupDir:\"ASC\",clearGrouping:function(){this.groupField=false;if(this.remoteGroup){if(this.baseParams){delete this.baseParams.groupBy;delete this.baseParams.groupDir}var a=this.lastOptions;if(a&&a.params){delete a.params.groupBy;delete a.params.groupDir}this.reload()}else{this.sort();this.fireEvent(\"datachanged\",this)}},groupBy:function(e,a,d){d=d?(String(d).toUpperCase()==\"DESC\"?\"DESC\":\"ASC\"):this.groupDir;if(this.groupField==e&&this.groupDir==d&&!a){return}var c=this.multiSortInfo.sorters;if(c.length>0&&c[0].field==this.groupField){c.shift()}this.groupField=e;this.groupDir=d;this.applyGroupField();var b=function(){this.fireEvent(\"groupchange\",this,this.getGroupState())};if(this.groupOnSort){this.sort(e,d);b.call(this);return}if(this.remoteGroup){this.on(\"load\",b,this,{single:true});this.reload()}else{this.sort(c);b.call(this)}},sort:function(h,c){if(this.remoteSort){return Ext.data.GroupingStore.superclass.sort.call(this,h,c)}var g=[];if(Ext.isArray(arguments[0])){g=arguments[0]}else{if(h==undefined){g=this.sortInfo?[this.sortInfo]:[]}else{var e=this.fields.get(h);if(!e){return false}var b=e.name,a=this.sortInfo||null,d=this.sortToggle?this.sortToggle[b]:null;if(!c){if(a&&a.field==b){c=(this.sortToggle[b]||\"ASC\").toggle(\"ASC\",\"DESC\")}else{c=e.sortDir}}this.sortToggle[b]=c;this.sortInfo={field:b,direction:c};g=[this.sortInfo]}}if(this.groupField){g.unshift({direction:this.groupDir,field:this.groupField})}return this.multiSort.call(this,g,c)},applyGroupField:function(){if(this.remoteGroup){if(!this.baseParams){this.baseParams={}}Ext.apply(this.baseParams,{groupBy:this.groupField,groupDir:this.groupDir});var a=this.lastOptions;if(a&&a.params){a.params.groupDir=this.groupDir;delete a.params.groupBy}}},applyGrouping:function(a){if(this.groupField!==false){this.groupBy(this.groupField,true,this.groupDir);return true}else{if(a===true){this.fireEvent(\"datachanged\",this)}return false}},getGroupState:function(){return this.groupOnSort&&this.groupField!==false?(this.sortInfo?this.sortInfo.field:undefined):this.groupField}});Ext.reg(\"groupingstore\",Ext.data.GroupingStore);Ext.data.DirectProxy=function(a){Ext.apply(this,a);if(typeof this.paramOrder==\"string\"){this.paramOrder=this.paramOrder.split(/[\\s,|]/)}Ext.data.DirectProxy.superclass.constructor.call(this,a)};Ext.extend(Ext.data.DirectProxy,Ext.data.DataProxy,{paramOrder:undefined,paramsAsHash:true,directFn:undefined,doRequest:function(b,c,a,e,k,l,n){var j=[],h=this.api[b]||this.directFn;switch(b){case Ext.data.Api.actions.create:j.push(a.jsonData);break;case Ext.data.Api.actions.read:if(h.directCfg.method.len>0){if(this.paramOrder){for(var d=0,g=this.paramOrder.length;d<g;d++){j.push(a[this.paramOrder[d]])}}else{if(this.paramsAsHash){j.push(a)}}}break;case Ext.data.Api.actions.update:j.push(a.jsonData);break;case Ext.data.Api.actions.destroy:j.push(a.jsonData);break}var m={params:a||{},request:{callback:k,scope:l,arg:n},reader:e};j.push(this.createCallback(b,c,m),this);h.apply(window,j)},createCallback:function(d,a,b){var c=this;return function(e,g){if(!g.status){if(d===Ext.data.Api.actions.read){c.fireEvent(\"loadexception\",c,b,g,null)}c.fireEvent(\"exception\",c,\"remote\",d,b,g,null);b.request.callback.call(b.request.scope,null,b.request.arg,false);return}if(d===Ext.data.Api.actions.read){c.onRead(d,b,e,g)}else{c.onWrite(d,b,e,g,a)}}},onRead:function(g,e,a,d){var b;try{b=e.reader.readRecords(a)}catch(c){this.fireEvent(\"loadexception\",this,e,d,c);this.fireEvent(\"exception\",this,\"response\",g,e,d,c);e.request.callback.call(e.request.scope,null,e.request.arg,false);return}this.fireEvent(\"load\",this,d,e.request.arg);e.request.callback.call(e.request.scope,b,e.request.arg,true)},onWrite:function(g,d,a,c,b){var e=d.reader.extractData(d.reader.getRoot(a),false);var h=d.reader.getSuccess(a);h=(h!==false);if(h){this.fireEvent(\"write\",this,g,e,c,b,d.request.arg)}else{this.fireEvent(\"exception\",this,\"remote\",g,d,a,b)}d.request.callback.call(d.request.scope,e,c,h)}});Ext.data.DirectStore=Ext.extend(Ext.data.Store,{constructor:function(a){var b=Ext.apply({},{batchTransactions:false},a);Ext.data.DirectStore.superclass.constructor.call(this,Ext.apply(b,{proxy:Ext.isDefined(b.proxy)?b.proxy:new Ext.data.DirectProxy(Ext.copyTo({},b,\"paramOrder,paramsAsHash,directFn,api\")),reader:(!Ext.isDefined(b.reader)&&b.fields)?new Ext.data.JsonReader(Ext.copyTo({},b,\"totalProperty,root,idProperty\"),b.fields):b.reader}))}});Ext.reg(\"directstore\",Ext.data.DirectStore);Ext.Direct=Ext.extend(Ext.util.Observable,{exceptions:{TRANSPORT:\"xhr\",PARSE:\"parse\",LOGIN:\"login\",SERVER:\"exception\"},constructor:function(){this.addEvents(\"event\",\"exception\");this.transactions={};this.providers={}},addProvider:function(e){var c=arguments;if(c.length>1){for(var d=0,b=c.length;d<b;d++){this.addProvider(c[d])}return}if(!e.events){e=new Ext.Direct.PROVIDERS[e.type](e)}e.id=e.id||Ext.id();this.providers[e.id]=e;e.on(\"data\",this.onProviderData,this);e.on(\"exception\",this.onProviderException,this);if(!e.isConnected()){e.connect()}return e},getProvider:function(a){return this.providers[a]},removeProvider:function(b){var a=b.id?b:this.providers[b];a.un(\"data\",this.onProviderData,this);a.un(\"exception\",this.onProviderException,this);delete this.providers[a.id];return a},addTransaction:function(a){this.transactions[a.tid]=a;return a},removeTransaction:function(a){delete this.transactions[a.tid||a];return a},getTransaction:function(a){return this.transactions[a.tid||a]},onProviderData:function(d,c){if(Ext.isArray(c)){for(var b=0,a=c.length;b<a;b++){this.onProviderData(d,c[b])}return}if(c.name&&c.name!=\"event\"&&c.name!=\"exception\"){this.fireEvent(c.name,c)}else{if(c.type==\"exception\"){this.fireEvent(\"exception\",c)}}this.fireEvent(\"event\",c,d)},createEvent:function(a,b){return new Ext.Direct.eventTypes[a.type](Ext.apply(a,b))}});Ext.Direct=new Ext.Direct();Ext.Direct.TID=1;Ext.Direct.PROVIDERS={};Ext.Direct.Transaction=function(a){Ext.apply(this,a);this.tid=++Ext.Direct.TID;this.retryCount=0};Ext.Direct.Transaction.prototype={send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++;this.send()},getProvider:function(){return this.provider}};Ext.Direct.Event=function(a){Ext.apply(this,a)};Ext.Direct.Event.prototype={status:true,getData:function(){return this.data}};Ext.Direct.RemotingEvent=Ext.extend(Ext.Direct.Event,{type:\"rpc\",getTransaction:function(){return this.transaction||Ext.Direct.getTransaction(this.tid)}});Ext.Direct.ExceptionEvent=Ext.extend(Ext.Direct.RemotingEvent,{status:false,type:\"exception\"});Ext.Direct.eventTypes={rpc:Ext.Direct.RemotingEvent,event:Ext.Direct.Event,exception:Ext.Direct.ExceptionEvent};Ext.direct.Provider=Ext.extend(Ext.util.Observable,{priority:1,constructor:function(a){Ext.apply(this,a);this.addEvents(\"connect\",\"disconnect\",\"data\",\"exception\");Ext.direct.Provider.superclass.constructor.call(this,a)},isConnected:function(){return false},connect:Ext.emptyFn,disconnect:Ext.emptyFn});Ext.direct.JsonProvider=Ext.extend(Ext.direct.Provider,{parseResponse:function(a){if(!Ext.isEmpty(a.responseText)){if(typeof a.responseText==\"object\"){return a.responseText}return Ext.decode(a.responseText)}return null},getEvents:function(j){var g=null;try{g=this.parseResponse(j)}catch(h){var d=new Ext.Direct.ExceptionEvent({data:h,xhr:j,code:Ext.Direct.exceptions.PARSE,message:\"Error parsing json response: \\n\\n \"+g});return[d]}var c=[];if(Ext.isArray(g)){for(var b=0,a=g.length;b<a;b++){c.push(Ext.Direct.createEvent(g[b]))}}else{c.push(Ext.Direct.createEvent(g))}return c}});Ext.direct.PollingProvider=Ext.extend(Ext.direct.JsonProvider,{priority:3,interval:3000,constructor:function(a){Ext.direct.PollingProvider.superclass.constructor.call(this,a);this.addEvents(\"beforepoll\",\"poll\")},isConnected:function(){return !!this.pollTask},connect:function(){if(this.url&&!this.pollTask){this.pollTask=Ext.TaskMgr.start({run:function(){if(this.fireEvent(\"beforepoll\",this)!==false){if(typeof this.url==\"function\"){this.url(this.baseParams)}else{Ext.Ajax.request({url:this.url,callback:this.onData,scope:this,params:this.baseParams})}}},interval:this.interval,scope:this});this.fireEvent(\"connect\",this)}else{if(!this.url){throw\"Error initializing PollingProvider, no url configured.\"}}},disconnect:function(){if(this.pollTask){Ext.TaskMgr.stop(this.pollTask);delete this.pollTask;this.fireEvent(\"disconnect\",this)}},onData:function(d,j,h){if(j){var c=this.getEvents(h);for(var b=0,a=c.length;b<a;b++){var g=c[b];this.fireEvent(\"data\",this,g)}}else{var g=new Ext.Direct.ExceptionEvent({data:g,code:Ext.Direct.exceptions.TRANSPORT,message:\"Unable to connect to the server.\",xhr:h});this.fireEvent(\"data\",this,g)}}});Ext.Direct.PROVIDERS.polling=Ext.direct.PollingProvider;Ext.direct.RemotingProvider=Ext.extend(Ext.direct.JsonProvider,{enableBuffer:10,maxRetries:1,timeout:undefined,constructor:function(a){Ext.direct.RemotingProvider.superclass.constructor.call(this,a);this.addEvents(\"beforecall\",\"call\");this.namespace=(Ext.isString(this.namespace))?Ext.ns(this.namespace):this.namespace||window;this.transactions={};this.callBuffer=[]},initAPI:function(){var h=this.actions;for(var j in h){var d=this.namespace[j]||(this.namespace[j]={}),e=h[j];for(var g=0,b=e.length;g<b;g++){var a=e[g];d[a.name]=this.createMethod(j,a)}}},isConnected:function(){return !!this.connected},connect:function(){if(this.url){this.initAPI();this.connected=true;this.fireEvent(\"connect\",this)}else{if(!this.url){throw\"Error initializing RemotingProvider, no url configured.\"}}},disconnect:function(){if(this.connected){this.connected=false;this.fireEvent(\"disconnect\",this)}},onData:function(a,h,j){if(h){var k=this.getEvents(j);for(var b=0,c=k.length;b<c;b++){var d=k[b],l=this.getTransaction(d);this.fireEvent(\"data\",this,d);if(l){this.doCallback(l,d,true);Ext.Direct.removeTransaction(l)}}}else{var g=[].concat(a.ts);for(var b=0,c=g.length;b<c;b++){var l=this.getTransaction(g[b]);if(l&&l.retryCount<this.maxRetries){l.retry()}else{var d=new Ext.Direct.ExceptionEvent({data:d,transaction:l,code:Ext.Direct.exceptions.TRANSPORT,message:\"Unable to connect to the server.\",xhr:j});this.fireEvent(\"data\",this,d);if(l){this.doCallback(l,d,false);Ext.Direct.removeTransaction(l)}}}}},getCallData:function(a){return{action:a.action,method:a.method,data:a.data,type:\"rpc\",tid:a.tid}},doSend:function(d){var g={url:this.url,callback:this.onData,scope:this,ts:d,timeout:this.timeout},b;if(Ext.isArray(d)){b=[];for(var c=0,a=d.length;c<a;c++){b.push(this.getCallData(d[c]))}}else{b=this.getCallData(d)}if(this.enableUrlEncode){var e={};e[Ext.isString(this.enableUrlEncode)?this.enableUrlEncode:\"data\"]=Ext.encode(b);g.params=e}else{g.jsonData=b}Ext.Ajax.request(g)},combineAndSend:function(){var a=this.callBuffer.length;if(a>0){this.doSend(a==1?this.callBuffer[0]:this.callBuffer);this.callBuffer=[]}},queueTransaction:function(a){if(a.form){this.processForm(a);return}this.callBuffer.push(a);if(this.enableBuffer){if(!this.callTask){this.callTask=new Ext.util.DelayedTask(this.combineAndSend,this)}this.callTask.delay(Ext.isNumber(this.enableBuffer)?this.enableBuffer:10)}else{this.combineAndSend()}},doCall:function(i,a,b){var h=null,e=b[a.len],g=b[a.len+1];if(a.len!==0){h=b.slice(0,a.len)}var d=new Ext.Direct.Transaction({provider:this,args:b,action:i,method:a.name,data:h,cb:g&&Ext.isFunction(e)?e.createDelegate(g):e});if(this.fireEvent(\"beforecall\",this,d,a)!==false){Ext.Direct.addTransaction(d);this.queueTransaction(d);this.fireEvent(\"call\",this,d,a)}},doForm:function(j,b,g,i,e){var d=new Ext.Direct.Transaction({provider:this,action:j,method:b.name,args:[g,i,e],cb:e&&Ext.isFunction(i)?i.createDelegate(e):i,isForm:true});if(this.fireEvent(\"beforecall\",this,d,b)!==false){Ext.Direct.addTransaction(d);var a=String(g.getAttribute(\"enctype\")).toLowerCase()==\"multipart/form-data\",h={extTID:d.tid,extAction:j,extMethod:b.name,extType:\"rpc\",extUpload:String(a)};Ext.apply(d,{form:Ext.getDom(g),isUpload:a,params:i&&Ext.isObject(i.params)?Ext.apply(h,i.params):h});this.fireEvent(\"call\",this,d,b);this.processForm(d)}},processForm:function(a){Ext.Ajax.request({url:this.url,params:a.params,callback:this.onData,scope:this,form:a.form,isUpload:a.isUpload,ts:a})},createMethod:function(d,a){var b;if(!a.formHandler){b=function(){this.doCall(d,a,Array.prototype.slice.call(arguments,0))}.createDelegate(this)}else{b=function(e,g,c){this.doForm(d,a,e,g,c)}.createDelegate(this)}b.directCfg={action:d,method:a};return b},getTransaction:function(a){return a&&a.tid?Ext.Direct.getTransaction(a.tid):null},doCallback:function(c,g){var d=g.status?\"success\":\"failure\";if(c&&c.cb){var b=c.cb,a=Ext.isDefined(g.result)?g.result:g.data;if(Ext.isFunction(b)){b(a,g)}else{Ext.callback(b[d],b.scope,[a,g]);Ext.callback(b.callback,b.scope,[a,g])}}}});Ext.Direct.PROVIDERS.remoting=Ext.direct.RemotingProvider;Ext.Resizable=Ext.extend(Ext.util.Observable,{constructor:function(d,e){this.el=Ext.get(d);if(e&&e.wrap){e.resizeChild=this.el;this.el=this.el.wrap(typeof e.wrap==\"object\"?e.wrap:{cls:\"xresizable-wrap\"});this.el.id=this.el.dom.id=e.resizeChild.id+\"-rzwrap\";this.el.setStyle(\"overflow\",\"hidden\");this.el.setPositioning(e.resizeChild.getPositioning());e.resizeChild.clearPositioning();if(!e.width||!e.height){var g=e.resizeChild.getSize();this.el.setSize(g.width,g.height)}if(e.pinned&&!e.adjustments){e.adjustments=\"auto\"}}this.proxy=this.el.createProxy({tag:\"div\",cls:\"x-resizable-proxy\",id:this.el.id+\"-rzproxy\"},Ext.getBody());this.proxy.unselectable();this.proxy.enableDisplayMode(\"block\");Ext.apply(this,e);if(this.pinned){this.disableTrackOver=true;this.el.addClass(\"x-resizable-pinned\")}var k=this.el.getStyle(\"position\");if(k!=\"absolute\"&&k!=\"fixed\"){this.el.setStyle(\"position\",\"relative\")}if(!this.handles){this.handles=\"s,e,se\";if(this.multiDirectional){this.handles+=\",n,w\"}}if(this.handles==\"all\"){this.handles=\"n s e w ne nw se sw\"}var o=this.handles.split(/\\s*?[,;]\\s*?| /);var c=Ext.Resizable.positions;for(var j=0,l=o.length;j<l;j++){if(o[j]&&c[o[j]]){var n=c[o[j]];this[n]=new Ext.Resizable.Handle(this,n,this.disableTrackOver,this.transparent,this.handleCls)}}this.corner=this.southeast;if(this.handles.indexOf(\"n\")!=-1||this.handles.indexOf(\"w\")!=-1){this.updateBox=true}this.activeHandle=null;if(this.resizeChild){if(typeof this.resizeChild==\"boolean\"){this.resizeChild=Ext.get(this.el.dom.firstChild,true)}else{this.resizeChild=Ext.get(this.resizeChild,true)}}if(this.adjustments==\"auto\"){var b=this.resizeChild;var m=this.west,h=this.east,a=this.north,o=this.south;if(b&&(m||a)){b.position(\"relative\");b.setLeft(m?m.el.getWidth():0);b.setTop(a?a.el.getHeight():0)}this.adjustments=[(h?-h.el.getWidth():0)+(m?-m.el.getWidth():0),(a?-a.el.getHeight():0)+(o?-o.el.getHeight():0)-1]}if(this.draggable){this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id});this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id);if(this.constrainTo){this.dd.constrainTo(this.constrainTo)}}this.addEvents(\"beforeresize\",\"resize\");if(this.width!==null&&this.height!==null){this.resizeTo(this.width,this.height)}else{this.updateChildSize()}if(Ext.isIE){this.el.dom.style.zoom=1}Ext.Resizable.superclass.constructor.call(this)},adjustments:[0,0],animate:false,disableTrackOver:false,draggable:false,duration:0.35,dynamic:false,easing:\"easeOutStrong\",enabled:true,handles:false,multiDirectional:false,height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:10000,maxWidth:10000,minX:0,minY:0,pinned:false,preserveRatio:false,resizeChild:false,transparent:false,resizeTo:function(b,a){this.el.setSize(b,a);this.updateChildSize();this.fireEvent(\"resize\",this,b,a,null)},startSizing:function(c,b){this.fireEvent(\"beforeresize\",this,c);if(this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:\"div\",cls:\"x-resizable-overlay\",html:\"&#160;\"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode(\"block\");this.overlay.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})}this.overlay.setStyle(\"cursor\",b.el.getStyle(\"cursor\"));this.resizing=true;this.startBox=this.el.getBox();this.startPoint=c.getXY();this.offsets=[(this.startBox.x+this.startBox.width)-this.startPoint[0],(this.startBox.y+this.startBox.height)-this.startPoint[1]];this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();if(this.constrainTo){var a=Ext.get(this.constrainTo);this.resizeRegion=a.getRegion().adjust(a.getFrameWidth(\"t\"),a.getFrameWidth(\"l\"),-a.getFrameWidth(\"b\"),-a.getFrameWidth(\"r\"))}this.proxy.setStyle(\"visibility\",\"hidden\");this.proxy.show();this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.setStyle(\"visibility\",\"visible\")}}},onMouseDown:function(a,b){if(this.enabled){b.stopEvent();this.activeHandle=a;this.startSizing(b,a)}},onMouseUp:function(b){this.activeHandle=null;var a=this.resizeElement();this.resizing=false;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent(\"resize\",this,a.width,a.height,b)},updateChildSize:function(){if(this.resizeChild){var d=this.el;var e=this.resizeChild;var c=this.adjustments;if(d.dom.offsetWidth){var a=d.getSize(true);e.setSize(a.width+c[0],a.height+c[1])}if(Ext.isIE){setTimeout(function(){if(d.dom.offsetWidth){var g=d.getSize(true);e.setSize(g.width+c[0],g.height+c[1])}},10)}}},snap:function(c,e,b){if(!e||!c){return c}var d=c;var a=c%e;if(a>0){if(a>(e/2)){d=c+(e-a)}else{d=c-a}}return Math.max(b,d)},resizeElement:function(){var a=this.proxy.getBox();if(this.updateBox){this.el.setBox(a,false,this.animate,this.duration,null,this.easing)}else{this.el.setSize(a.width,a.height,this.animate,this.duration,null,this.easing)}this.updateChildSize();if(!this.dynamic){this.proxy.hide()}if(this.draggable&&this.constrainTo){this.dd.resetConstraints();this.dd.constrainTo(this.constrainTo)}return a},constrain:function(b,c,a,d){if(b-c<a){c=b-a}else{if(b-c>d){c=b-d}}return c},onMouseMove:function(z){if(this.enabled&&this.activeHandle){try{if(this.resizeRegion&&!this.resizeRegion.contains(z.getPoint())){return}var t=this.curSize||this.startBox,l=this.startBox.x,k=this.startBox.y,c=l,b=k,m=t.width,u=t.height,d=m,o=u,n=this.minWidth,A=this.minHeight,s=this.maxWidth,D=this.maxHeight,i=this.widthIncrement,a=this.heightIncrement,B=z.getXY(),r=-(this.startPoint[0]-Math.max(this.minX,B[0])),p=-(this.startPoint[1]-Math.max(this.minY,B[1])),j=this.activeHandle.position,E,g;switch(j){case\"east\":m+=r;m=Math.min(Math.max(n,m),s);break;case\"south\":u+=p;u=Math.min(Math.max(A,u),D);break;case\"southeast\":m+=r;u+=p;m=Math.min(Math.max(n,m),s);u=Math.min(Math.max(A,u),D);break;case\"north\":p=this.constrain(u,p,A,D);k+=p;u-=p;break;case\"west\":r=this.constrain(m,r,n,s);l+=r;m-=r;break;case\"northeast\":m+=r;m=Math.min(Math.max(n,m),s);p=this.constrain(u,p,A,D);k+=p;u-=p;break;case\"northwest\":r=this.constrain(m,r,n,s);p=this.constrain(u,p,A,D);k+=p;u-=p;l+=r;m-=r;break;case\"southwest\":r=this.constrain(m,r,n,s);u+=p;u=Math.min(Math.max(A,u),D);l+=r;m-=r;break}var q=this.snap(m,i,n);var C=this.snap(u,a,A);if(q!=m||C!=u){switch(j){case\"northeast\":k-=C-u;break;case\"north\":k-=C-u;break;case\"southwest\":l-=q-m;break;case\"west\":l-=q-m;break;case\"northwest\":l-=q-m;k-=C-u;break}m=q;u=C}if(this.preserveRatio){switch(j){case\"southeast\":case\"east\":u=o*(m/d);u=Math.min(Math.max(A,u),D);m=d*(u/o);break;case\"south\":m=d*(u/o);m=Math.min(Math.max(n,m),s);u=o*(m/d);break;case\"northeast\":m=d*(u/o);m=Math.min(Math.max(n,m),s);u=o*(m/d);break;case\"north\":E=m;m=d*(u/o);m=Math.min(Math.max(n,m),s);u=o*(m/d);l+=(E-m)/2;break;case\"southwest\":u=o*(m/d);u=Math.min(Math.max(A,u),D);E=m;m=d*(u/o);l+=E-m;break;case\"west\":g=u;u=o*(m/d);u=Math.min(Math.max(A,u),D);k+=(g-u)/2;E=m;m=d*(u/o);l+=E-m;break;case\"northwest\":E=m;g=u;u=o*(m/d);u=Math.min(Math.max(A,u),D);m=d*(u/o);k+=g-u;l+=E-m;break}}this.proxy.setBounds(l,k,m,u);if(this.dynamic){this.resizeElement()}}catch(v){}}},handleOver:function(){if(this.enabled){this.el.addClass(\"x-resizable-over\")}},handleOut:function(){if(!this.resizing){this.el.removeClass(\"x-resizable-over\")}},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(b){Ext.destroy(this.dd,this.overlay,this.proxy);this.overlay=null;this.proxy=null;var c=Ext.Resizable.positions;for(var a in c){if(typeof c[a]!=\"function\"&&this[c[a]]){this[c[a]].destroy()}}if(b){this.el.update(\"\");Ext.destroy(this.el);this.el=null}this.purgeListeners()},syncHandleHeight:function(){var a=this.el.getHeight(true);if(this.west){this.west.el.setHeight(a)}if(this.east){this.east.el.setHeight(a)}}});Ext.Resizable.positions={n:\"north\",s:\"south\",e:\"east\",w:\"west\",se:\"southeast\",sw:\"southwest\",nw:\"northwest\",ne:\"northeast\"};Ext.Resizable.Handle=Ext.extend(Object,{constructor:function(d,g,c,e,a){if(!this.tpl){var b=Ext.DomHelper.createTemplate({tag:\"div\",cls:\"x-resizable-handle x-resizable-handle-{0}\"});b.compile();Ext.Resizable.Handle.prototype.tpl=b}this.position=g;this.rz=d;this.el=this.tpl.append(d.el.dom,[this.position],true);this.el.unselectable();if(e){this.el.setOpacity(0)}if(!Ext.isEmpty(a)){this.el.addClass(a)}this.el.on(\"mousedown\",this.onMouseDown,this);if(!c){this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})}},afterResize:function(a){},onMouseDown:function(a){this.rz.onMouseDown(this,a)},onMouseOver:function(a){this.rz.handleOver(this,a)},onMouseOut:function(a){this.rz.handleOut(this,a)},destroy:function(){Ext.destroy(this.el);this.el=null}});Ext.Window=Ext.extend(Ext.Panel,{baseCls:\"x-window\",resizable:true,draggable:true,closable:true,closeAction:\"close\",constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,showAnimDuration:0.25,hideAnimDuration:0.25,collapsible:false,initHidden:undefined,hidden:true,elements:\"header,body\",frame:true,floating:true,initComponent:function(){this.initTools();Ext.Window.superclass.initComponent.call(this);this.addEvents(\"resize\",\"maximize\",\"minimize\",\"restore\");if(Ext.isDefined(this.initHidden)){this.hidden=this.initHidden}if(this.hidden===false){this.hidden=true;this.show()}},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(true))},onRender:function(b,a){Ext.Window.superclass.onRender.call(this,b,a);if(this.plain){this.el.addClass(\"x-window-plain\")}this.focusEl=this.el.createChild({tag:\"a\",href:\"#\",cls:\"x-dlg-focus\",tabIndex:\"-1\",html:\"&#160;\"});this.focusEl.swallowEvent(\"click\",true);this.proxy=this.el.createProxy(\"x-window-proxy\");this.proxy.enableDisplayMode(\"block\");if(this.modal){this.mask=this.container.createChild({cls:\"ext-el-mask\"},this.el.dom);this.mask.enableDisplayMode(\"block\");this.mask.hide();this.mon(this.mask,\"click\",this.focus,this)}if(this.maximizable){this.mon(this.header,\"dblclick\",this.toggleMaximize,this)}},initEvents:function(){Ext.Window.superclass.initEvents.call(this);if(this.animateTarget){this.setAnimateTarget(this.animateTarget)}if(this.resizable){this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||\"all\",pinned:true,resizeElement:this.resizerAction,handleCls:\"x-window-handle\"});this.resizer.window=this;this.mon(this.resizer,\"beforeresize\",this.beforeResize,this)}if(this.draggable){this.header.addClass(\"x-window-draggable\")}this.mon(this.el,\"mousedown\",this.toFront,this);this.manager=this.manager||Ext.WindowMgr;this.manager.register(this);if(this.maximized){this.maximized=false;this.maximize()}if(this.closable){var a=this.getKeyMap();a.on(27,this.onEsc,this);a.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(a,b){if(this.activeGhost){this.unghost()}b.stopEvent();this[this.closeAction]()},beforeDestroy:function(){if(this.rendered){this.hide();this.clearAnchor();Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)}Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){if(this.manager){this.manager.unregister(this)}Ext.Window.superclass.onDestroy.call(this)},initTools:function(){if(this.minimizable){this.addTool({id:\"minimize\",handler:this.minimize.createDelegate(this,[])})}if(this.maximizable){this.addTool({id:\"maximize\",handler:this.maximize.createDelegate(this,[])});this.addTool({id:\"restore\",handler:this.restore.createDelegate(this,[]),hidden:true})}if(this.closable){this.addTool({id:\"close\",handler:this[this.closeAction].createDelegate(this,[])})}},resizerAction:function(){var a=this.proxy.getBox();this.proxy.hide();this.window.handleResize(a);return a},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this.el.getBox()},updateHandles:function(){if(Ext.isIE&&this.resizer){this.resizer.syncHandleHeight();this.el.repaint()}},handleResize:function(b){var a=this.resizeBox;if(a.x!=b.x||a.y!=b.y){this.updateBox(b)}else{this.setSize(b);if(Ext.isIE6&&Ext.isStrict){this.doLayout()}}this.focus();this.updateHandles();this.saveState()},focus:function(){var e=this.focusEl,a=this.defaultButton,c=typeof a,d,b;if(Ext.isDefined(a)){if(Ext.isNumber(a)&&this.fbar){e=this.fbar.items.get(a)}else{if(Ext.isString(a)){e=Ext.getCmp(a)}else{e=a}}d=e.getEl();b=Ext.getDom(this.container);if(d&&b){if(b!=document.body&&!Ext.lib.Region.getRegion(b).contains(Ext.lib.Region.getRegion(d.dom))){return}}}e=e||this.focusEl;e.focus.defer(10,e)},setAnimateTarget:function(a){a=Ext.get(a);this.animateTarget=a},beforeShow:function(){delete this.el.lastXY;delete this.el.lastLT;if(this.x===undefined||this.y===undefined){var a=this.el.getAlignToXY(this.container,\"c-c\");var b=this.el.translatePoints(a[0],a[1]);this.x=this.x===undefined?b.left:this.x;this.y=this.y===undefined?b.top:this.y}this.el.setLeftTop(this.x,this.y);if(this.expandOnShow){this.expand(false)}if(this.modal){Ext.getBody().addClass(\"x-body-masked\");this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.mask.show()}},show:function(c,a,b){if(!this.rendered){this.render(Ext.getBody())}if(this.hidden===false){this.toFront();return this}if(this.fireEvent(\"beforeshow\",this)===false){return this}if(a){this.on(\"show\",a,b,{single:true})}this.hidden=false;if(Ext.isDefined(c)){this.setAnimateTarget(c)}this.beforeShow();if(this.animateTarget){this.animShow()}else{this.afterShow()}return this},afterShow:function(b){if(this.isDestroyed){return false}this.proxy.hide();this.el.setStyle(\"display\",\"block\");this.el.show();if(this.maximized){this.fitContainer()}if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.onWindowResize(this.onWindowResize,this)}this.doConstrain();this.doLayout();if(this.keyMap){this.keyMap.enable()}this.toFront();this.updateHandles();if(b&&(Ext.isIE||Ext.isWebKit)){var a=this.getSize();this.onResize(a.width,a.height)}this.onShow();this.fireEvent(\"show\",this)},animShow:function(){this.proxy.show();this.proxy.setBox(this.animateTarget.getBox());this.proxy.setOpacity(0);var a=this.getBox();this.el.setStyle(\"display\",\"none\");this.proxy.shift(Ext.apply(a,{callback:this.afterShow.createDelegate(this,[true],false),scope:this,easing:\"easeNone\",duration:this.showAnimDuration,opacity:0.5}))},hide:function(c,a,b){if(this.hidden||this.fireEvent(\"beforehide\",this)===false){return this}if(a){this.on(\"hide\",a,b,{single:true})}this.hidden=true;if(c!==undefined){this.setAnimateTarget(c)}if(this.modal){this.mask.hide();Ext.getBody().removeClass(\"x-body-masked\")}if(this.animateTarget){this.animHide()}else{this.el.hide();this.afterHide()}return this},afterHide:function(){this.proxy.hide();if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.removeResizeListener(this.onWindowResize,this)}if(this.keyMap){this.keyMap.disable()}this.onHide();this.fireEvent(\"hide\",this)},animHide:function(){this.proxy.setOpacity(0.5);this.proxy.show();var a=this.getBox(false);this.proxy.setBox(a);this.el.hide();this.proxy.shift(Ext.apply(this.animateTarget.getBox(),{callback:this.afterHide,scope:this,duration:this.hideAnimDuration,easing:\"easeNone\",opacity:0}))},onShow:Ext.emptyFn,onHide:Ext.emptyFn,onWindowResize:function(){if(this.maximized){this.fitContainer()}if(this.modal){this.mask.setSize(\"100%\",\"100%\");var a=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var b;if(this.constrain){b={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}}else{var a=this.getSize();b={right:-(a.width-100),bottom:-(a.height-25+this.el.getConstrainOffset())}}var c=this.el.getConstrainToXY(this.container,true,b);if(c){this.setPosition(c[0],c[1])}}},ghost:function(a){var c=this.createGhost(a);var b=this.getBox(true);c.setLeftTop(b.x,b.y);c.setWidth(b.width);this.el.hide();this.activeGhost=c;return c},unghost:function(b,a){if(!this.activeGhost){return}if(b!==false){this.el.show();this.focus.defer(10,this);if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}}if(a!==false){this.setPosition(this.activeGhost.getLeft(true),this.activeGhost.getTop(true))}this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost},minimize:function(){this.fireEvent(\"minimize\",this);return this},close:function(){if(this.fireEvent(\"beforeclose\",this)!==false){if(this.hidden){this.doClose()}else{this.hide(null,this.doClose,this)}}},doClose:function(){this.fireEvent(\"close\",this);this.destroy()},maximize:function(){if(!this.maximized){this.expand(false);this.restoreSize=this.getSize();this.restorePos=this.getPosition(true);if(this.maximizable){this.tools.maximize.hide();this.tools.restore.show()}this.maximized=true;this.el.disableShadow();if(this.dd){this.dd.lock()}if(this.collapsible){this.tools.toggle.hide()}this.el.addClass(\"x-window-maximized\");this.container.addClass(\"x-window-maximized-ct\");this.setPosition(0,0);this.fitContainer();this.fireEvent(\"maximize\",this)}return this},restore:function(){if(this.maximized){var a=this.tools;this.el.removeClass(\"x-window-maximized\");if(a.restore){a.restore.hide()}if(a.maximize){a.maximize.show()}this.setPosition(this.restorePos[0],this.restorePos[1]);this.setSize(this.restoreSize.width,this.restoreSize.height);delete this.restorePos;delete this.restoreSize;this.maximized=false;this.el.enableShadow(true);if(this.dd){this.dd.unlock()}if(this.collapsible&&a.toggle){a.toggle.show()}this.container.removeClass(\"x-window-maximized-ct\");this.doConstrain();this.fireEvent(\"restore\",this)}return this},toggleMaximize:function(){return this[this.maximized?\"restore\":\"maximize\"]()},fitContainer:function(){var a=this.container.getViewSize(false);this.setSize(a.width,a.height)},setZIndex:function(a){if(this.modal){this.mask.setStyle(\"z-index\",a)}this.el.setZIndex(++a);a+=5;if(this.resizer){this.resizer.proxy.setStyle(\"z-index\",++a)}this.lastZIndex=a},alignTo:function(b,a,c){var d=this.el.getAlignToXY(b,a,c);this.setPagePosition(d[0],d[1]);return this},anchorTo:function(c,e,d,b){this.clearAnchor();this.anchorTarget={el:c,alignment:e,offsets:d};Ext.EventManager.onWindowResize(this.doAnchor,this);var a=typeof b;if(a!=\"undefined\"){Ext.EventManager.on(window,\"scroll\",this.doAnchor,this,{buffer:a==\"number\"?b:50})}return this.doAnchor()},doAnchor:function(){var a=this.anchorTarget;this.alignTo(a.el,a.alignment,a.offsets);return this},clearAnchor:function(){if(this.anchorTarget){Ext.EventManager.removeResizeListener(this.doAnchor,this);Ext.EventManager.un(window,\"scroll\",this.doAnchor,this);delete this.anchorTarget}return this},toFront:function(a){if(this.manager.bringToFront(this)){if(!a||!a.getTarget().focus){this.focus()}}return this},setActive:function(a){if(a){if(!this.maximized){this.el.enableShadow(true)}this.fireEvent(\"activate\",this)}else{this.el.disableShadow();this.fireEvent(\"deactivate\",this)}},toBack:function(){this.manager.sendToBack(this);return this},center:function(){var a=this.el.getAlignToXY(this.container,\"c-c\");this.setPagePosition(a[0],a[1]);return this}});Ext.reg(\"window\",Ext.Window);Ext.Window.DD=Ext.extend(Ext.dd.DD,{constructor:function(a){this.win=a;Ext.Window.DD.superclass.constructor.call(this,a.el.id,\"WindowDD-\"+a.id);this.setHandleElId(a.header.id);this.scroll=false},moveOnly:true,headerOffsets:[100,25],startDrag:function(){var a=this.win;this.proxy=a.ghost(a.initialConfig.cls);if(a.constrain!==false){var c=a.el.shadowOffset;this.constrainTo(a.container,{right:c,left:c,bottom:c})}else{if(a.constrainHeader!==false){var b=this.proxy.getSize();this.constrainTo(a.container,{right:-(b.width-this.headerOffsets[0]),bottom:-(b.height-this.headerOffsets[1])})}}},b4Drag:Ext.emptyFn,onDrag:function(a){this.alignElWithMouse(this.proxy,a.getPageX(),a.getPageY())},endDrag:function(a){this.win.unghost();this.win.saveState()}});Ext.WindowGroup=function(){var g={};var d=[];var e=null;var c=function(j,i){return(!j._lastAccess||j._lastAccess<i._lastAccess)?-1:1};var h=function(){var l=d,j=l.length;if(j>0){l.sort(c);var k=l[0].manager.zseed;for(var m=0;m<j;m++){var n=l[m];if(n&&!n.hidden){n.setZIndex(k+(m*10))}}}a()};var b=function(i){if(i!=e){if(e){e.setActive(false)}e=i;if(i){i.setActive(true)}}};var a=function(){for(var j=d.length-1;j>=0;--j){if(!d[j].hidden){b(d[j]);return}}b(null)};return{zseed:9000,register:function(i){if(i.manager){i.manager.unregister(i)}i.manager=this;g[i.id]=i;d.push(i);i.on(\"hide\",a)},unregister:function(i){delete i.manager;delete g[i.id];i.un(\"hide\",a);d.remove(i)},get:function(i){return typeof i==\"object\"?i:g[i]},bringToFront:function(i){i=this.get(i);if(i!=e){i._lastAccess=new Date().getTime();h();return true}return false},sendToBack:function(i){i=this.get(i);i._lastAccess=-(new Date().getTime());h();return i},hideAll:function(){for(var i in g){if(g[i]&&typeof g[i]!=\"function\"&&g[i].isVisible()){g[i].hide()}}},getActive:function(){return e},getBy:function(l,k){var m=[];for(var j=d.length-1;j>=0;--j){var n=d[j];if(l.call(k||n,n)!==false){m.push(n)}}return m},each:function(j,i){for(var k in g){if(g[k]&&typeof g[k]!=\"function\"){if(j.call(i||g[k],g[k])===false){return}}}}}};Ext.WindowMgr=new Ext.WindowGroup();Ext.MessageBox=function(){var u,b,q,t,h,l,s,a,n,p,j,g,r,v,o,i=\"\",d=\"\",m=[\"ok\",\"yes\",\"no\",\"cancel\"];var c=function(x){r[x].blur();if(u.isVisible()){u.hide();w();Ext.callback(b.fn,b.scope||window,[x,v.dom.value,b],1)}};var w=function(){if(b&&b.cls){u.el.removeClass(b.cls)}n.reset()};var e=function(z,x,y){if(b&&b.closable!==false){u.hide();w()}if(y){y.stopEvent()}};var k=function(x){var z=0,y;if(!x){Ext.each(m,function(A){r[A].hide()});return z}u.footer.dom.style.display=\"\";Ext.iterate(r,function(A,B){y=x[A];if(y){B.show();B.setText(Ext.isString(y)?y:Ext.MessageBox.buttonText[A]);z+=B.getEl().getWidth()+15}else{B.hide()}});return z};return{getDialog:function(x){if(!u){var z=[];r={};Ext.each(m,function(A){z.push(r[A]=new Ext.Button({text:this.buttonText[A],handler:c.createCallback(A),hideMode:\"offsets\"}))},this);u=new Ext.Window({autoCreate:true,title:x,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:\"center\",width:400,height:100,minHeight:80,plain:true,footer:true,closable:true,close:function(){if(b&&b.buttons&&b.buttons.no&&!b.buttons.cancel){c(\"no\")}else{c(\"cancel\")}},fbar:new Ext.Toolbar({items:z,enableOverflow:false})});u.render(document.body);u.getEl().addClass(\"x-window-dlg\");q=u.mask;h=u.body.createChild({html:'<div class=\"ext-mb-icon\"></div><div class=\"ext-mb-content\"><span class=\"ext-mb-text\"></span><br /><div class=\"ext-mb-fix-cursor\"><input type=\"text\" class=\"ext-mb-input\" /><textarea class=\"ext-mb-textarea\"></textarea></div></div>'});j=Ext.get(h.dom.firstChild);var y=h.dom.childNodes[1];l=Ext.get(y.firstChild);s=Ext.get(y.childNodes[2].firstChild);s.enableDisplayMode();s.addKeyListener([10,13],function(){if(u.isVisible()&&b&&b.buttons){if(b.buttons.ok){c(\"ok\")}else{if(b.buttons.yes){c(\"yes\")}}}});a=Ext.get(y.childNodes[2].childNodes[1]);a.enableDisplayMode();n=new Ext.ProgressBar({renderTo:h});h.createChild({cls:\"x-clear\"})}return u},updateText:function(A){if(!u.isVisible()&&!b.width){u.setSize(this.maxWidth,100)}l.update(A?A+\" \":\"&#160;\");var y=d!=\"\"?(j.getWidth()+j.getMargins(\"lr\")):0,C=l.getWidth()+l.getMargins(\"lr\"),z=u.getFrameWidth(\"lr\"),B=u.body.getFrameWidth(\"lr\"),x;x=Math.max(Math.min(b.width||y+C+z+B,b.maxWidth||this.maxWidth),Math.max(b.minWidth||this.minWidth,o||0));if(b.prompt===true){v.setWidth(x-y-z-B)}if(b.progress===true||b.wait===true){n.setSize(x-y-z-B)}if(Ext.isIE&&x==o){x+=4}l.update(A||\"&#160;\");u.setSize(x,\"auto\").center();return this},updateProgress:function(y,x,z){n.updateProgress(y,x);if(z){this.updateText(z)}return this},isVisible:function(){return u&&u.isVisible()},hide:function(){var x=u?u.activeGhost:null;if(this.isVisible()||x){u.hide();w();if(x){u.unghost(false,false)}}return this},show:function(A){if(this.isVisible()){this.hide()}b=A;var B=this.getDialog(b.title||\"&#160;\");B.setTitle(b.title||\"&#160;\");var x=(b.closable!==false&&b.progress!==true&&b.wait!==true);B.tools.close.setDisplayed(x);v=s;b.prompt=b.prompt||(b.multiline?true:false);if(b.prompt){if(b.multiline){s.hide();a.show();a.setHeight(Ext.isNumber(b.multiline)?b.multiline:this.defaultTextHeight);v=a}else{s.show();a.hide()}}else{s.hide();a.hide()}v.dom.value=b.value||\"\";if(b.prompt){B.focusEl=v}else{var z=b.buttons;var y=null;if(z&&z.ok){y=r.ok}else{if(z&&z.yes){y=r.yes}}if(y){B.focusEl=y}}if(Ext.isDefined(b.iconCls)){B.setIconClass(b.iconCls)}this.setIcon(Ext.isDefined(b.icon)?b.icon:i);o=k(b.buttons);n.setVisible(b.progress===true||b.wait===true);this.updateProgress(0,b.progressText);this.updateText(b.msg);if(b.cls){B.el.addClass(b.cls)}B.proxyDrag=b.proxyDrag===true;B.modal=b.modal!==false;B.mask=b.modal!==false?q:false;if(!B.isVisible()){document.body.appendChild(u.el.dom);B.setAnimateTarget(b.animEl);B.on(\"show\",function(){if(x===true){B.keyMap.enable()}else{B.keyMap.disable()}},this,{single:true});B.show(b.animEl)}if(b.wait===true){n.wait(b.waitConfig)}return this},setIcon:function(x){if(!u){i=x;return}i=undefined;if(x&&x!=\"\"){j.removeClass(\"x-hidden\");j.replaceClass(d,x);h.addClass(\"x-dlg-icon\");d=x}else{j.replaceClass(d,\"x-hidden\");h.removeClass(\"x-dlg-icon\");d=\"\"}return this},progress:function(z,y,x){this.show({title:z,msg:y,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,progressText:x});return this},wait:function(z,y,x){this.show({title:y,msg:z,buttons:false,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:x});return this},alert:function(A,z,y,x){this.show({title:A,msg:z,buttons:this.OK,fn:y,scope:x,minWidth:this.minWidth});return this},confirm:function(A,z,y,x){this.show({title:A,msg:z,buttons:this.YESNO,fn:y,scope:x,icon:this.QUESTION,minWidth:this.minWidth});return this},prompt:function(C,B,z,y,x,A){this.show({title:C,msg:B,buttons:this.OKCANCEL,fn:z,minWidth:this.minPromptWidth,scope:y,prompt:true,multiline:x,value:A});return this},OK:{ok:true},CANCEL:{cancel:true},OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:\"ext-mb-info\",WARNING:\"ext-mb-warning\",QUESTION:\"ext-mb-question\",ERROR:\"ext-mb-error\",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:\"OK\",cancel:\"Cancel\",yes:\"Yes\",no:\"No\"}}}();Ext.Msg=Ext.MessageBox;Ext.dd.PanelProxy=Ext.extend(Object,{constructor:function(a,b){this.panel=a;this.id=this.panel.id+\"-ddproxy\";Ext.apply(this,b)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.el.dom.style.display=\"\";this.ghost.remove();delete this.ghost}},show:function(){if(!this.ghost){this.ghost=this.panel.createGhost(this.panel.initialConfig.cls,undefined,Ext.getBody());this.ghost.setXY(this.panel.el.getXY());if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:\"x-panel-dd-spacer\"});this.proxy.setSize(this.panel.getSize())}this.panel.el.dom.style.display=\"none\"}},repair:function(b,c,a){this.hide();if(typeof c==\"function\"){c.call(a||this)}},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}});Ext.Panel.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(b,a){this.panel=b;this.dragData={panel:b};this.proxy=new Ext.dd.PanelProxy(b,a);Ext.Panel.DD.superclass.constructor.call(this,b.el,a);var d=b.header,c=b.body;if(d){this.setHandleElId(d.id);c=b.header}c.setStyle(\"cursor\",\"move\");this.scroll=false},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.proxy.show()},b4MouseDown:function(b){var a=b.getPageX(),c=b.getPageY();this.autoOffset(a,c)},onInitDrag:function(a,b){this.onStartDrag(a,b);return true},createFrame:Ext.emptyFn,getDragEl:function(a){return this.proxy.ghost.dom},endDrag:function(a){this.proxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)}});Ext.state.Provider=Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents(\"statechange\");this.state={};Ext.state.Provider.superclass.constructor.call(this)},get:function(b,a){return typeof this.state[b]==\"undefined\"?a:this.state[b]},clear:function(a){delete this.state[a];this.fireEvent(\"statechange\",this,a,null)},set:function(a,b){this.state[a]=b;this.fireEvent(\"statechange\",this,a,b)},decodeValue:function(b){var e=/^(a|n|d|b|s|o|e)\\:(.*)$/,h=e.exec(unescape(b)),d,c,a,g;if(!h||!h[1]){return}c=h[1];a=h[2];switch(c){case\"e\":return null;case\"n\":return parseFloat(a);case\"d\":return new Date(Date.parse(a));case\"b\":return(a==\"1\");case\"a\":d=[];if(a!=\"\"){Ext.each(a.split(\"^\"),function(i){d.push(this.decodeValue(i))},this)}return d;case\"o\":d={};if(a!=\"\"){Ext.each(a.split(\"^\"),function(i){g=i.split(\"=\");d[g[0]]=this.decodeValue(g[1])},this)}return d;default:return a}},encodeValue:function(c){var b,g=\"\",e=0,a,d;if(c==null){return\"e:1\"}else{if(typeof c==\"number\"){b=\"n:\"+c}else{if(typeof c==\"boolean\"){b=\"b:\"+(c?\"1\":\"0\")}else{if(Ext.isDate(c)){b=\"d:\"+c.toGMTString()}else{if(Ext.isArray(c)){for(a=c.length;e<a;e++){g+=this.encodeValue(c[e]);if(e!=a-1){g+=\"^\"}}b=\"a:\"+g}else{if(typeof c==\"object\"){for(d in c){if(typeof c[d]!=\"function\"&&c[d]!==undefined){g+=d+\"=\"+this.encodeValue(c[d])+\"^\"}}b=\"o:\"+g.substring(0,g.length-1)}else{b=\"s:\"+c}}}}}}return escape(b)}});Ext.state.Manager=function(){var a=new Ext.state.Provider();return{setProvider:function(b){a=b},get:function(c,b){return a.get(c,b)},set:function(b,c){a.set(b,c)},clear:function(b){a.clear(b)},getProvider:function(){return a}}}();Ext.state.CookieProvider=Ext.extend(Ext.state.Provider,{constructor:function(a){Ext.state.CookieProvider.superclass.constructor.call(this);this.path=\"/\";this.expires=new Date(new Date().getTime()+(1000*60*60*24*7));this.domain=null;this.secure=false;Ext.apply(this,a);this.state=this.readCookies()},set:function(a,b){if(typeof b==\"undefined\"||b===null){this.clear(a);return}this.setCookie(a,b);Ext.state.CookieProvider.superclass.set.call(this,a,b)},clear:function(a){this.clearCookie(a);Ext.state.CookieProvider.superclass.clear.call(this,a)},readCookies:function(){var d={},h=document.cookie+\";\",b=/\\s?(.*?)=(.*?);/g,g,a,e;while((g=b.exec(h))!=null){a=g[1];e=g[2];if(a&&a.substring(0,3)==\"ys-\"){d[a.substr(3)]=this.decodeValue(e)}}return d},setCookie:function(a,b){document.cookie=\"ys-\"+a+\"=\"+this.encodeValue(b)+((this.expires==null)?\"\":(\"; expires=\"+this.expires.toGMTString()))+((this.path==null)?\"\":(\"; path=\"+this.path))+((this.domain==null)?\"\":(\"; domain=\"+this.domain))+((this.secure==true)?\"; secure\":\"\")},clearCookie:function(a){document.cookie=\"ys-\"+a+\"=null; expires=Thu, 01-Jan-70 00:00:01 GMT\"+((this.path==null)?\"\":(\"; path=\"+this.path))+((this.domain==null)?\"\":(\"; domain=\"+this.domain))+((this.secure==true)?\"; secure\":\"\")}});Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:\"x-view-selected\",emptyText:\"\",deferEmptyText:true,trackOver:false,blockRefresh:false,last:false,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);if(Ext.isString(this.tpl)||Ext.isArray(this.tpl)){this.tpl=new Ext.XTemplate(this.tpl)}this.addEvents(\"beforeclick\",\"click\",\"mouseenter\",\"mouseleave\",\"containerclick\",\"dblclick\",\"contextmenu\",\"containercontextmenu\",\"selectionchange\",\"beforeselect\");this.store=Ext.StoreMgr.lookup(this.store);this.all=new Ext.CompositeElementLite();this.selected=new Ext.CompositeElementLite()},afterRender:function(){Ext.DataView.superclass.afterRender.call(this);this.mon(this.getTemplateTarget(),{click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this});if(this.overClass||this.trackOver){this.mon(this.getTemplateTarget(),{mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this})}if(this.store){this.bindStore(this.store,true)}},refresh:function(){this.clearSelections(false,true);var b=this.getTemplateTarget(),a=this.store.getRange();b.update(\"\");if(a.length<1){if(!this.deferEmptyText||this.hasSkippedEmptyText){b.update(this.emptyText)}this.all.clear()}else{this.tpl.overwrite(b,this.collectData(a,0));this.all.fill(Ext.query(this.itemSelector,b.dom));this.updateIndexes(0)}this.hasSkippedEmptyText=true},getTemplateTarget:function(){return this.el},prepareData:function(a){return a},collectData:function(b,e){var d=[],c=0,a=b.length;for(;c<a;c++){d[d.length]=this.prepareData(b[c].data,e+c,b[c])}return d},bufferRender:function(a,b){var c=document.createElement(\"div\");this.tpl.overwrite(c,this.collectData(a,b));return Ext.query(this.itemSelector,c)},onUpdate:function(g,a){var b=this.store.indexOf(a);if(b>-1){var e=this.isSelected(b),c=this.all.elements[b],d=this.bufferRender([a],b)[0];this.all.replaceElement(b,d,true);if(e){this.selected.replaceElement(c,d);this.all.item(b).addClass(this.selectedClass)}this.updateIndexes(b,b)}},onAdd:function(g,d,e){if(this.all.getCount()===0){this.refresh();return}var c=this.bufferRender(d,e),h,b=this.all.elements;if(e<this.all.getCount()){h=this.all.item(e).insertSibling(c,\"before\",true);b.splice.apply(b,[e,0].concat(c))}else{h=this.all.last().insertSibling(c,\"after\",true);b.push.apply(b,c)}this.updateIndexes(e)},onRemove:function(c,a,b){this.deselect(b);this.all.removeElement(b,true);this.updateIndexes(b);if(this.store.getCount()===0){this.refresh()}},refreshNode:function(a){this.onUpdate(this.store,this.store.getAt(a))},updateIndexes:function(d,c){var b=this.all.elements;d=d||0;c=c||((c===0)?0:(b.length-1));for(var a=d;a<=c;a++){b[a].viewIndex=a}},getStore:function(){return this.store},bindStore:function(a,b){if(!b&&this.store){if(a!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un(\"beforeload\",this.onBeforeLoad,this);this.store.un(\"datachanged\",this.onDataChanged,this);this.store.un(\"add\",this.onAdd,this);this.store.un(\"remove\",this.onRemove,this);this.store.un(\"update\",this.onUpdate,this);this.store.un(\"clear\",this.refresh,this)}if(!a){this.store=null}}if(a){a=Ext.StoreMgr.lookup(a);a.on({scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh})}this.store=a;if(a){this.refresh()}},onDataChanged:function(){if(this.blockRefresh!==true){this.refresh.apply(this,arguments)}},findItemFromChild:function(a){return Ext.fly(a).findParent(this.itemSelector,this.getTemplateTarget())},onClick:function(c){var b=c.getTarget(this.itemSelector,this.getTemplateTarget()),a;if(b){a=this.indexOf(b);if(this.onItemClick(b,a,c)!==false){this.fireEvent(\"click\",this,a,b,c)}}else{if(this.fireEvent(\"containerclick\",this,c)!==false){this.onContainerClick(c)}}},onContainerClick:function(a){this.clearSelections()},onContextMenu:function(b){var a=b.getTarget(this.itemSelector,this.getTemplateTarget());if(a){this.fireEvent(\"contextmenu\",this,this.indexOf(a),a,b)}else{this.fireEvent(\"containercontextmenu\",this,b)}},onDblClick:function(b){var a=b.getTarget(this.itemSelector,this.getTemplateTarget());if(a){this.fireEvent(\"dblclick\",this,this.indexOf(a),a,b)}},onMouseOver:function(b){var a=b.getTarget(this.itemSelector,this.getTemplateTarget());if(a&&a!==this.lastItem){this.lastItem=a;Ext.fly(a).addClass(this.overClass);this.fireEvent(\"mouseenter\",this,this.indexOf(a),a,b)}},onMouseOut:function(a){if(this.lastItem){if(!a.within(this.lastItem,true,true)){Ext.fly(this.lastItem).removeClass(this.overClass);this.fireEvent(\"mouseleave\",this,this.indexOf(this.lastItem),this.lastItem,a);delete this.lastItem}}},onItemClick:function(b,a,c){if(this.fireEvent(\"beforeclick\",this,a,b,c)===false){return false}if(this.multiSelect){this.doMultiSelection(b,a,c);c.preventDefault()}else{if(this.singleSelect){this.doSingleSelection(b,a,c);c.preventDefault()}}return true},doSingleSelection:function(b,a,c){if(c.ctrlKey&&this.isSelected(a)){this.deselect(a)}else{this.select(a,false)}},doMultiSelection:function(c,a,d){if(d.shiftKey&&this.last!==false){var b=this.last;this.selectRange(b,a,d.ctrlKey);this.last=b}else{if((d.ctrlKey||this.simpleSelect)&&this.isSelected(a)){this.deselect(a)}else{this.select(a,d.ctrlKey||d.shiftKey||this.simpleSelect)}}},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){var b=[],d=this.selected.elements,c=0,a=d.length;for(;c<a;c++){b.push(d[c].viewIndex)}return b},getSelectedRecords:function(){return this.getRecords(this.selected.elements)},getRecords:function(c){var b=[],d=0,a=c.length;for(;d<a;d++){b[b.length]=this.store.getAt(c[d].viewIndex)}return b},getRecord:function(a){return this.store.getAt(a.viewIndex)},clearSelections:function(a,b){if((this.multiSelect||this.singleSelect)&&this.selected.getCount()>0){if(!b){this.selected.removeClass(this.selectedClass)}this.selected.clear();this.last=false;if(!a){this.fireEvent(\"selectionchange\",this,this.selected.elements)}}},isSelected:function(a){return this.selected.contains(this.getNode(a))},deselect:function(a){if(this.isSelected(a)){a=this.getNode(a);this.selected.removeElement(a);if(this.last==a.viewIndex){this.last=false}Ext.fly(a).removeClass(this.selectedClass);this.fireEvent(\"selectionchange\",this,this.selected.elements)}},select:function(d,g,b){if(Ext.isArray(d)){if(!g){this.clearSelections(true)}for(var c=0,a=d.length;c<a;c++){this.select(d[c],true,true)}if(!b){this.fireEvent(\"selectionchange\",this,this.selected.elements)}}else{var e=this.getNode(d);if(!g){this.clearSelections(true)}if(e&&!this.isSelected(e)){if(this.fireEvent(\"beforeselect\",this,e,this.selected.elements)!==false){Ext.fly(e).addClass(this.selectedClass);this.selected.add(e);this.last=e.viewIndex;if(!b){this.fireEvent(\"selectionchange\",this,this.selected.elements)}}}}},selectRange:function(c,a,b){if(!b){this.clearSelections(true)}this.select(this.getNodes(c,a),true)},getNode:function(b){if(Ext.isString(b)){return document.getElementById(b)}else{if(Ext.isNumber(b)){return this.all.elements[b]}else{if(b instanceof Ext.data.Record){var a=this.store.indexOf(b);return this.all.elements[a]}}}return b},getNodes:function(e,a){var d=this.all.elements,b=[],c;e=e||0;a=!Ext.isDefined(a)?Math.max(d.length-1,0):a;if(e<=a){for(c=e;c<=a&&d[c];c++){b.push(d[c])}}else{for(c=e;c>=a&&d[c];c--){b.push(d[c])}}return b},indexOf:function(a){a=this.getNode(a);if(Ext.isNumber(a.viewIndex)){return a.viewIndex}return this.all.indexOf(a)},onBeforeLoad:function(){if(this.loadingText){this.clearSelections(false,true);this.getTemplateTarget().update('<div class=\"loading-indicator\">'+this.loadingText+\"</div>\");this.all.clear()}},onDestroy:function(){this.all.clear();this.selected.clear();Ext.DataView.superclass.onDestroy.call(this);this.bindStore(null)}});Ext.DataView.prototype.setStore=Ext.DataView.prototype.bindStore;Ext.reg(\"dataview\",Ext.DataView);Ext.list.ListView=Ext.extend(Ext.DataView,{itemSelector:\"dl\",selectedClass:\"x-list-selected\",overClass:\"x-list-over\",scrollOffset:undefined,columnResize:true,columnSort:true,maxColumnWidth:Ext.isIE?99:100,initComponent:function(){if(this.columnResize){this.colResizer=new Ext.list.ColumnResizer(this.colResizer);this.colResizer.init(this)}if(this.columnSort){this.colSorter=new Ext.list.Sorter(this.columnSort);this.colSorter.init(this)}if(!this.internalTpl){this.internalTpl=new Ext.XTemplate('<div class=\"x-list-header\"><div class=\"x-list-header-inner\">','<tpl for=\"columns\">','<div style=\"width:{[values.width*100]}%;text-align:{align};\"><em unselectable=\"on\" id=\"',this.id,'-xlhd-{#}\">',\"{header}\",\"</em></div>\",\"</tpl>\",'<div class=\"x-clear\"></div>',\"</div></div>\",'<div class=\"x-list-body\"><div class=\"x-list-body-inner\">',\"</div></div>\")}if(!this.tpl){this.tpl=new Ext.XTemplate('<tpl for=\"rows\">',\"<dl>\",'<tpl for=\"parent.columns\">','<dt style=\"width:{[values.width*100]}%;text-align:{align};\">','<em unselectable=\"on\"<tpl if=\"cls\"> class=\"{cls}</tpl>\">',\"{[values.tpl.apply(parent)]}\",\"</em></dt>\",\"</tpl>\",'<div class=\"x-clear\"></div>',\"</dl>\",\"</tpl>\")}var l=this.columns,h=0,k=0,m=l.length,b=[];for(var g=0;g<m;g++){var n=l[g];if(!n.isColumn){n.xtype=n.xtype?(/^lv/.test(n.xtype)?n.xtype:\"lv\"+n.xtype):\"lvcolumn\";n=Ext.create(n)}if(n.width){h+=n.width*100;if(h>this.maxColumnWidth){n.width-=(h-this.maxColumnWidth)/100}k++}b.push(n)}l=this.columns=b;if(k<m){var d=m-k;if(h<this.maxColumnWidth){var a=((this.maxColumnWidth-h)/d)/100;for(var e=0;e<m;e++){var n=l[e];if(!n.width){n.width=a}}}}Ext.list.ListView.superclass.initComponent.call(this)},onRender:function(){this.autoEl={cls:\"x-list-wrap\"};Ext.list.ListView.superclass.onRender.apply(this,arguments);this.internalTpl.overwrite(this.el,{columns:this.columns});this.innerBody=Ext.get(this.el.dom.childNodes[1].firstChild);this.innerHd=Ext.get(this.el.dom.firstChild.firstChild);if(this.hideHeaders){this.el.dom.firstChild.style.display=\"none\"}},getTemplateTarget:function(){return this.innerBody},collectData:function(){var a=Ext.list.ListView.superclass.collectData.apply(this,arguments);return{columns:this.columns,rows:a}},verifyInternalSize:function(){if(this.lastSize){this.onResize(this.lastSize.width,this.lastSize.height)}},onResize:function(c,e){var b=this.innerBody.dom,g=this.innerHd.dom,d=c-Ext.num(this.scrollOffset,Ext.getScrollBarWidth())+\"px\",a;if(!b){return}a=b.parentNode;if(Ext.isNumber(c)){if(this.reserveScrollOffset||((a.offsetWidth-a.clientWidth)>10)){b.style.width=d;g.style.width=d}else{b.style.width=c+\"px\";g.style.width=c+\"px\";setTimeout(function(){if((a.offsetWidth-a.clientWidth)>10){b.style.width=d;g.style.width=d}},10)}}if(Ext.isNumber(e)){a.style.height=Math.max(0,e-g.parentNode.offsetHeight)+\"px\"}},updateIndexes:function(){Ext.list.ListView.superclass.updateIndexes.apply(this,arguments);this.verifyInternalSize()},findHeaderIndex:function(g){g=g.dom||g;var a=g.parentNode,d=a.parentNode.childNodes,b=0,e;for(;e=d[b];b++){if(e==a){return b}}return -1},setHdWidths:function(){var d=this.innerHd.dom.getElementsByTagName(\"div\"),c=0,b=this.columns,a=b.length;for(;c<a;c++){d[c].style.width=(b[c].width*100)+\"%\"}}});Ext.reg(\"listview\",Ext.list.ListView);Ext.ListView=Ext.list.ListView;Ext.list.Column=Ext.extend(Object,{isColumn:true,align:\"left\",header:\"\",width:null,cls:\"\",constructor:function(a){if(!a.tpl){a.tpl=new Ext.XTemplate(\"{\"+a.dataIndex+\"}\")}else{if(Ext.isString(a.tpl)){a.tpl=new Ext.XTemplate(a.tpl)}}Ext.apply(this,a)}});Ext.reg(\"lvcolumn\",Ext.list.Column);Ext.list.NumberColumn=Ext.extend(Ext.list.Column,{format:\"0,000.00\",constructor:function(a){a.tpl=a.tpl||new Ext.XTemplate(\"{\"+a.dataIndex+':number(\"'+(a.format||this.format)+'\")}');Ext.list.NumberColumn.superclass.constructor.call(this,a)}});Ext.reg(\"lvnumbercolumn\",Ext.list.NumberColumn);Ext.list.DateColumn=Ext.extend(Ext.list.Column,{format:\"m/d/Y\",constructor:function(a){a.tpl=a.tpl||new Ext.XTemplate(\"{\"+a.dataIndex+':date(\"'+(a.format||this.format)+'\")}');Ext.list.DateColumn.superclass.constructor.call(this,a)}});Ext.reg(\"lvdatecolumn\",Ext.list.DateColumn);Ext.list.BooleanColumn=Ext.extend(Ext.list.Column,{trueText:\"true\",falseText:\"false\",undefinedText:\"&#160;\",constructor:function(e){e.tpl=e.tpl||new Ext.XTemplate(\"{\"+e.dataIndex+\":this.format}\");var b=this.trueText,d=this.falseText,a=this.undefinedText;e.tpl.format=function(c){if(c===undefined){return a}if(!c||c===\"false\"){return d}return b};Ext.list.DateColumn.superclass.constructor.call(this,e)}});Ext.reg(\"lvbooleancolumn\",Ext.list.BooleanColumn);Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:0.05,constructor:function(a){Ext.apply(this,a);Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(a){this.view=a;a.on(\"render\",this.initEvents,this)},initEvents:function(a){a.mon(a.innerHd,\"mousemove\",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(a.innerHd);a.on(\"beforedestroy\",this.tracker.destroy,this.tracker)},handleHdMove:function(i,d){var c=5,b=i.getPageX(),j=i.getTarget(\"em\",3,true);if(j){var h=j.getRegion(),g=j.dom.style,a=j.dom.parentNode;if(b-h.left<=c&&a!=a.parentNode.firstChild){this.activeHd=Ext.get(a.previousSibling.firstChild);g.cursor=Ext.isWebKit?\"e-resize\":\"col-resize\"}else{if(h.right-b<=c&&a!=a.parentNode.lastChild.previousSibling){this.activeHd=j;g.cursor=Ext.isWebKit?\"w-resize\":\"col-resize\"}else{delete this.activeHd;g.cursor=\"\"}}}},onBeforeStart:function(a){this.dragHd=this.activeHd;return !!this.dragHd},onStart:function(g){var d=this,b=d.view,c=d.dragHd,a=d.tracker.getXY()[0];d.proxy=b.el.createChild({cls:\"x-list-resizer\"});d.dragX=c.getX();d.headerIndex=b.findHeaderIndex(c);d.headersDisabled=b.disableHeaders;b.disableHeaders=true;d.proxy.setHeight(b.el.getHeight());d.proxy.setX(d.dragX);d.proxy.setWidth(a-d.dragX);this.setBoundaries()},setBoundaries:function(j){var k=this.view,h=this.headerIndex,c=k.innerHd.getWidth(),j=k.innerHd.getX(),b=Math.ceil(c*this.minPct),l=c-b,e=k.columns.length,d=k.innerHd.select(\"em\",true),g=b+j,a=l+j,i;if(e==2){this.minX=g;this.maxX=a}else{i=d.item(h+2);this.minX=d.item(h).getX()+b;this.maxX=i?i.getX()-b:a;if(h==0){this.minX=g}else{if(h==e-2){this.maxX=a}}}},onDrag:function(c){var b=this,a=b.tracker.getXY()[0].constrain(b.minX,b.maxX);b.proxy.setWidth(a-this.dragX)},onEnd:function(i){var g=this.proxy.getWidth(),h=this.headerIndex,l=this.view,c=l.columns,b=l.innerHd.getWidth(),k=Math.ceil(g*l.maxColumnWidth/b)/100,d=this.headersDisabled,m=c[h],j=c[h+1],a=m.width+j.width;this.proxy.remove();m.width=k;j.width=a-k;delete this.dragHd;l.setHdWidths();l.refresh();setTimeout(function(){l.disableHeaders=d},100)}});Ext.ListView.ColumnResizer=Ext.list.ColumnResizer;Ext.list.Sorter=Ext.extend(Ext.util.Observable,{sortClasses:[\"sort-asc\",\"sort-desc\"],constructor:function(a){Ext.apply(this,a);Ext.list.Sorter.superclass.constructor.call(this)},init:function(a){this.view=a;a.on(\"render\",this.initEvents,this)},initEvents:function(a){a.mon(a.innerHd,\"click\",this.onHdClick,this);a.innerHd.setStyle(\"cursor\",\"pointer\");a.mon(a.store,\"datachanged\",this.updateSortState,this);this.updateSortState.defer(10,this,[a.store])},updateSortState:function(c){var g=c.getSortState();if(!g){return}this.sortState=g;var e=this.view.columns,h=-1;for(var d=0,a=e.length;d<a;d++){if(e[d].dataIndex==g.field){h=d;break}}if(h!=-1){var b=g.direction;this.updateSortIcon(h,b)}},updateSortIcon:function(b,a){var d=this.sortClasses;var c=this.view.innerHd.select(\"em\").removeClass(d);c.item(b).addClass(d[a==\"DESC\"?1:0])},onHdClick:function(c){var b=c.getTarget(\"em\",3);if(b&&!this.view.disableHeaders){var a=this.view.findHeaderIndex(b);this.view.store.sort(this.view.columns[a].dataIndex)}}});Ext.ListView.Sorter=Ext.list.Sorter;Ext.TabPanel=Ext.extend(Ext.Panel,{deferredRender:true,tabWidth:120,minTabWidth:30,resizeTabs:false,enableTabScroll:false,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:0.35,animScroll:true,tabPosition:\"top\",baseCls:\"x-tab-panel\",autoTabs:false,autoTabSelector:\"div.x-tab\",activeTab:undefined,tabMargin:2,plain:false,wheelIncrement:20,idDelimiter:\"__\",itemCls:\"x-tab-item\",elements:\"body\",headerAsText:false,frame:false,hideBorders:true,initComponent:function(){this.frame=false;Ext.TabPanel.superclass.initComponent.call(this);this.addEvents(\"beforetabchange\",\"tabchange\",\"contextmenu\");this.setLayout(new Ext.layout.CardLayout(Ext.apply({layoutOnCardChange:this.layoutOnTabChange,deferredRender:this.deferredRender},this.layoutConfig)));if(this.tabPosition==\"top\"){this.elements+=\",header\";this.stripTarget=\"header\"}else{this.elements+=\",footer\";this.stripTarget=\"footer\"}if(!this.stack){this.stack=Ext.TabPanel.AccessStack()}this.initItems()},onRender:function(c,a){Ext.TabPanel.superclass.onRender.call(this,c,a);if(this.plain){var g=this.tabPosition==\"top\"?\"header\":\"footer\";this[g].addClass(\"x-tab-panel-\"+g+\"-plain\")}var b=this[this.stripTarget];this.stripWrap=b.createChild({cls:\"x-tab-strip-wrap\",cn:{tag:\"ul\",cls:\"x-tab-strip x-tab-strip-\"+this.tabPosition}});var e=(this.tabPosition==\"bottom\"?this.stripWrap:null);b.createChild({cls:\"x-tab-strip-spacer\"},e);this.strip=new Ext.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:\"li\",cls:\"x-tab-edge\",cn:[{tag:\"span\",cls:\"x-tab-strip-text\",cn:\"&#160;\"}]});this.strip.createChild({cls:\"x-clear\"});this.body.addClass(\"x-tab-panel-body-\"+this.tabPosition);if(!this.itemTpl){var d=new Ext.Template('<li class=\"{cls}\" id=\"{id}\"><a class=\"x-tab-strip-close\"></a>','<a class=\"x-tab-right\" href=\"#\"><em class=\"x-tab-left\">','<span class=\"x-tab-strip-inner\"><span class=\"x-tab-strip-text {iconCls}\">{text}</span></span>',\"</em></a></li>\");d.disableFormats=true;d.compile();Ext.TabPanel.prototype.itemTpl=d}this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this);if(this.autoTabs){this.readTabs(false)}if(this.activeTab!==undefined){var a=Ext.isObject(this.activeTab)?this.activeTab:this.items.get(this.activeTab);delete this.activeTab;this.setActiveTab(a)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this);this.mon(this.strip,{scope:this,mousedown:this.onStripMouseDown,contextmenu:this.onStripContextMenu});if(this.enableTabScroll){this.mon(this.strip,\"mousewheel\",this.onWheel,this)}},findTargets:function(c){var b=null,a=c.getTarget(\"li:not(.x-tab-edge)\",this.strip);if(a){b=this.getComponent(a.id.split(this.idDelimiter)[1]);if(b.disabled){return{close:null,item:null,el:null}}}return{close:c.getTarget(\".x-tab-strip-close\",this.strip),item:b,el:a}},onStripMouseDown:function(b){if(b.button!==0){return}b.preventDefault();var a=this.findTargets(b);if(a.close){if(a.item.fireEvent(\"beforeclose\",a.item)!==false){a.item.fireEvent(\"close\",a.item);this.remove(a.item)}return}if(a.item&&a.item!=this.activeTab){this.setActiveTab(a.item)}},onStripContextMenu:function(b){b.preventDefault();var a=this.findTargets(b);if(a.item){this.fireEvent(\"contextmenu\",this,a.item,b)}},readTabs:function(d){if(d===true){this.items.each(function(h){this.remove(h)},this)}var c=this.el.query(this.autoTabSelector);for(var b=0,a=c.length;b<a;b++){var e=c[b],g=e.getAttribute(\"title\");e.removeAttribute(\"title\");this.add({title:g,contentEl:e})}},initTab:function(d,b){var e=this.strip.dom.childNodes[b],g=this.getTemplateArgs(d),c=e?this.itemTpl.insertBefore(e,g):this.itemTpl.append(this.strip,g),a=\"x-tab-strip-over\",h=Ext.get(c);h.hover(function(){if(!d.disabled){h.addClass(a)}},function(){h.removeClass(a)});if(d.tabTip){h.child(\"span.x-tab-strip-text\",true).qtip=d.tabTip}d.tabEl=c;h.select(\"a\").on(\"click\",function(i){if(!i.getPageX()){this.onStripMouseDown(i)}},this,{preventDefault:true});d.on({scope:this,disable:this.onItemDisabled,enable:this.onItemEnabled,titlechange:this.onItemTitleChanged,iconchange:this.onItemIconChanged,beforeshow:this.onBeforeShowItem})},getTemplateArgs:function(b){var a=b.closable?\"x-tab-strip-closable\":\"\";if(b.disabled){a+=\" x-item-disabled\"}if(b.iconCls){a+=\" x-tab-with-icon\"}if(b.tabCls){a+=\" \"+b.tabCls}return{id:this.id+this.idDelimiter+b.getItemId(),text:b.title,cls:a,iconCls:b.iconCls||\"\"}},onAdd:function(b){Ext.TabPanel.superclass.onAdd.call(this,b);if(this.rendered){var a=this.items;this.initTab(b,a.indexOf(b));this.delegateUpdates()}},onBeforeAdd:function(b){var a=b.events?(this.items.containsKey(b.getItemId())?b:null):this.items.get(b);if(a){this.setActiveTab(b);return false}Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var c=b.elements;b.elements=c?c.replace(\",header\",\"\"):c;b.border=(b.border===true)},onRemove:function(d){var b=Ext.get(d.tabEl);if(b){b.select(\"a\").removeAllListeners();Ext.destroy(b)}Ext.TabPanel.superclass.onRemove.call(this,d);this.stack.remove(d);delete d.tabEl;d.un(\"disable\",this.onItemDisabled,this);d.un(\"enable\",this.onItemEnabled,this);d.un(\"titlechange\",this.onItemTitleChanged,this);d.un(\"iconchange\",this.onItemIconChanged,this);d.un(\"beforeshow\",this.onBeforeShowItem,this);if(d==this.activeTab){var a=this.stack.next();if(a){this.setActiveTab(a)}else{if(this.items.getCount()>0){this.setActiveTab(0)}else{this.setActiveTab(null)}}}if(!this.destroying){this.delegateUpdates()}},onBeforeShowItem:function(a){if(a!=this.activeTab){this.setActiveTab(a);return false}},onItemDisabled:function(b){var a=this.getTabEl(b);if(a){Ext.fly(a).addClass(\"x-item-disabled\")}this.stack.remove(b)},onItemEnabled:function(b){var a=this.getTabEl(b);if(a){Ext.fly(a).removeClass(\"x-item-disabled\")}},onItemTitleChanged:function(b){var a=this.getTabEl(b);if(a){Ext.fly(a).child(\"span.x-tab-strip-text\",true).innerHTML=b.title}},onItemIconChanged:function(d,a,c){var b=this.getTabEl(d);if(b){b=Ext.get(b);b.child(\"span.x-tab-strip-text\").replaceClass(c,a);b[Ext.isEmpty(a)?\"removeClass\":\"addClass\"](\"x-tab-with-icon\")}},getTabEl:function(a){var b=this.getComponent(a);return b?b.tabEl:null},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments);this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=true},endUpdate:function(){this.suspendUpdates=false;this.delegateUpdates()},hideTabStripItem:function(b){b=this.getComponent(b);var a=this.getTabEl(b);if(a){a.style.display=\"none\";this.delegateUpdates()}this.stack.remove(b)},unhideTabStripItem:function(b){b=this.getComponent(b);var a=this.getTabEl(b);if(a){a.style.display=\"\";this.delegateUpdates()}},delegateUpdates:function(){var a=this.rendered;if(this.suspendUpdates){return}if(this.resizeTabs&&a){this.autoSizeTabs()}if(this.enableTabScroll&&a){this.autoScrollTabs()}},autoSizeTabs:function(){var h=this.items.length,b=this.tabPosition!=\"bottom\"?\"header\":\"footer\",c=this[b].dom.offsetWidth,a=this[b].dom.clientWidth;if(!this.resizeTabs||h<1||!a){return}var k=Math.max(Math.min(Math.floor((a-4)/h)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=k;var m=this.strip.query(\"li:not(.x-tab-edge)\");for(var e=0,j=m.length;e<j;e++){var l=m[e],n=Ext.fly(l).child(\".x-tab-strip-inner\",true),g=l.offsetWidth,d=n.offsetWidth;n.style.width=(k-(g-d))+\"px\"}},adjustBodyWidth:function(a){if(this.header){this.header.setWidth(a)}if(this.footer){this.footer.setWidth(a)}return a},setActiveTab:function(c){c=this.getComponent(c);if(this.fireEvent(\"beforetabchange\",this,c,this.activeTab)===false){return}if(!this.rendered){this.activeTab=c;return}if(this.activeTab!=c){if(this.activeTab){var a=this.getTabEl(this.activeTab);if(a){Ext.fly(a).removeClass(\"x-tab-strip-active\")}}this.activeTab=c;if(c){var b=this.getTabEl(c);Ext.fly(b).addClass(\"x-tab-strip-active\");this.stack.add(c);this.layout.setActiveItem(c);this.delegateUpdates();if(this.scrolling){this.scrollToTab(c,this.animScroll)}}this.fireEvent(\"tabchange\",this,c)}},getActiveTab:function(){return this.activeTab||null},getItem:function(a){return this.getComponent(a)},autoScrollTabs:function(){this.pos=this.tabPosition==\"bottom\"?this.footer:this.header;var h=this.items.length,d=this.pos.dom.offsetWidth,c=this.pos.dom.clientWidth,g=this.stripWrap,e=g.dom,b=e.offsetWidth,i=this.getScrollPos(),a=this.edge.getOffsetsTo(this.stripWrap)[0]+i;if(!this.enableTabScroll||b<20){return}if(h==0||a<=c){e.scrollLeft=0;g.setWidth(c);if(this.scrolling){this.scrolling=false;this.pos.removeClass(\"x-tab-scrolling\");this.scrollLeft.hide();this.scrollRight.hide();if(Ext.isAir||Ext.isWebKit){e.style.marginLeft=\"\";e.style.marginRight=\"\"}}}else{if(!this.scrolling){this.pos.addClass(\"x-tab-scrolling\");if(Ext.isAir||Ext.isWebKit){e.style.marginLeft=\"18px\";e.style.marginRight=\"18px\"}}c-=g.getMargins(\"lr\");g.setWidth(c>20?c:20);if(!this.scrolling){if(!this.scrollLeft){this.createScrollers()}else{this.scrollLeft.show();this.scrollRight.show()}}this.scrolling=true;if(i>(a-c)){e.scrollLeft=a-c}else{this.scrollToTab(this.activeTab,false)}this.updateScrollButtons()}},createScrollers:function(){this.pos.addClass(\"x-tab-scrolling-\"+this.tabPosition);var c=this.stripWrap.dom.offsetHeight;var a=this.pos.insertFirst({cls:\"x-tab-scroller-left\"});a.setHeight(c);a.addClassOnOver(\"x-tab-scroller-left-over\");this.leftRepeater=new Ext.util.ClickRepeater(a,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this});this.scrollLeft=a;var b=this.pos.insertFirst({cls:\"x-tab-scroller-right\"});b.setHeight(c);b.addClassOnOver(\"x-tab-scroller-right-over\");this.rightRepeater=new Ext.util.ClickRepeater(b,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this});this.scrollRight=b},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(e,a){if(!e){return}var c=this.getTabEl(e),h=this.getScrollPos(),d=this.getScrollArea(),g=Ext.fly(c).getOffsetsTo(this.stripWrap)[0]+h,b=g+c.offsetWidth;if(g<h){this.scrollTo(g,a)}else{if(b>(h+d)){this.scrollTo(b-d,a)}}},scrollTo:function(b,a){this.stripWrap.scrollTo(\"left\",b,a?this.getScrollAnim():false);if(!a){this.updateScrollButtons()}},onWheel:function(g){var h=g.getWheelDelta()*this.wheelIncrement*-1;g.stopEvent();var i=this.getScrollPos(),c=i+h,a=this.getScrollWidth()-this.getScrollArea();var b=Math.max(0,Math.min(a,c));if(b!=i){this.scrollTo(b,false)}},onScrollRight:function(){var a=this.getScrollWidth()-this.getScrollArea(),c=this.getScrollPos(),b=Math.min(a,c+this.getScrollIncrement());if(b!=c){this.scrollTo(b,this.animScroll)}},onScrollLeft:function(){var b=this.getScrollPos(),a=Math.max(0,b-this.getScrollIncrement());if(a!=b){this.scrollTo(a,this.animScroll)}},updateScrollButtons:function(){var a=this.getScrollPos();this.scrollLeft[a===0?\"addClass\":\"removeClass\"](\"x-tab-scroller-left-disabled\");this.scrollRight[a>=(this.getScrollWidth()-this.getScrollArea())?\"addClass\":\"removeClass\"](\"x-tab-scroller-right-disabled\")},beforeDestroy:function(){Ext.destroy(this.leftRepeater,this.rightRepeater);this.deleteMembers(\"strip\",\"edge\",\"scrollLeft\",\"scrollRight\",\"stripWrap\");this.activeTab=null;Ext.TabPanel.superclass.beforeDestroy.apply(this)}});Ext.reg(\"tabpanel\",Ext.TabPanel);Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab;Ext.TabPanel.AccessStack=function(){var a=[];return{add:function(b){a.push(b);if(a.length>10){a.shift()}},remove:function(e){var d=[];for(var c=0,b=a.length;c<b;c++){if(a[c]!=e){d.push(a[c])}}a=d},next:function(){return a.pop()}}};Ext.Button=Ext.extend(Ext.BoxComponent,{hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:\"tl-bl?\",type:\"button\",menuClassTarget:\"tr:nth(2)\",clickEvent:\"click\",handleMouseEvents:true,tooltipType:\"qtip\",buttonSelector:\"button:first-child\",scale:\"small\",iconAlign:\"left\",arrowAlign:\"right\",initComponent:function(){if(this.menu){if(Ext.isArray(this.menu)){this.menu={items:this.menu}}if(Ext.isObject(this.menu)){this.menu.ownerCt=this}this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=undefined}Ext.Button.superclass.initComponent.call(this);this.addEvents(\"click\",\"toggle\",\"mouseover\",\"mouseout\",\"menushow\",\"menuhide\",\"menutriggerover\",\"menutriggerout\");if(Ext.isString(this.toggleGroup)){this.enableToggle=true}},getTemplateArgs:function(){return[this.type,\"x-btn-\"+this.scale+\" x-btn-icon-\"+this.scale+\"-\"+this.iconAlign,this.getMenuClass(),this.cls,this.id]},setButtonClass:function(){if(this.useSetClass){if(!Ext.isEmpty(this.oldCls)){this.el.removeClass([this.oldCls,\"x-btn-pressed\"])}this.oldCls=(this.iconCls||this.icon)?(this.text?\"x-btn-text-icon\":\"x-btn-icon\"):\"x-btn-noicon\";this.el.addClass([this.oldCls,this.pressed?\"x-btn-pressed\":null])}},getMenuClass:function(){return this.menu?(this.arrowAlign!=\"bottom\"?\"x-btn-arrow\":\"x-btn-arrow-bottom\"):\"\"},onRender:function(c,a){if(!this.template){if(!Ext.Button.buttonTemplate){Ext.Button.buttonTemplate=new Ext.Template('<table id=\"{4}\" cellspacing=\"0\" class=\"x-btn {3}\"><tbody class=\"{1}\">','<tr><td class=\"x-btn-tl\"><i>&#160;</i></td><td class=\"x-btn-tc\"></td><td class=\"x-btn-tr\"><i>&#160;</i></td></tr>','<tr><td class=\"x-btn-ml\"><i>&#160;</i></td><td class=\"x-btn-mc\"><em class=\"{2}\" unselectable=\"on\"><button type=\"{0}\"></button></em></td><td class=\"x-btn-mr\"><i>&#160;</i></td></tr>','<tr><td class=\"x-btn-bl\"><i>&#160;</i></td><td class=\"x-btn-bc\"></td><td class=\"x-btn-br\"><i>&#160;</i></td></tr>',\"</tbody></table>\");Ext.Button.buttonTemplate.compile()}this.template=Ext.Button.buttonTemplate}var b,d=this.getTemplateArgs();if(a){b=this.template.insertBefore(a,d,true)}else{b=this.template.append(c,d,true)}this.btnEl=b.child(this.buttonSelector);this.mon(this.btnEl,{scope:this,focus:this.onFocus,blur:this.onBlur});this.initButtonEl(b,this.btnEl);Ext.ButtonToggleMgr.register(this)},initButtonEl:function(b,c){this.el=b;this.setIcon(this.icon);this.setText(this.text);this.setIconClass(this.iconCls);if(Ext.isDefined(this.tabIndex)){c.dom.tabIndex=this.tabIndex}if(this.tooltip){this.setTooltip(this.tooltip,true)}if(this.handleMouseEvents){this.mon(b,{scope:this,mouseover:this.onMouseOver,mousedown:this.onMouseDown})}if(this.menu){this.mon(this.menu,{scope:this,show:this.onMenuShow,hide:this.onMenuHide})}if(this.repeat){var a=new Ext.util.ClickRepeater(b,Ext.isObject(this.repeat)?this.repeat:{});this.mon(a,\"click\",this.onRepeatClick,this)}else{this.mon(b,this.clickEvent,this.onClick,this)}},afterRender:function(){Ext.Button.superclass.afterRender.call(this);this.useSetClass=true;this.setButtonClass();this.doc=Ext.getDoc();this.doAutoWidth()},setIconClass:function(a){this.iconCls=a;if(this.el){this.btnEl.dom.className=\"\";this.btnEl.addClass([\"x-btn-text\",a||\"\"]);this.setButtonClass()}return this},setTooltip:function(b,a){if(this.rendered){if(!a){this.clearTip()}if(Ext.isObject(b)){Ext.QuickTips.register(Ext.apply({target:this.btnEl.id},b));this.tooltip=b}else{this.btnEl.dom[this.tooltipType]=b}}else{this.tooltip=b}return this},clearTip:function(){if(Ext.isObject(this.tooltip)){Ext.QuickTips.unregister(this.btnEl)}},beforeDestroy:function(){if(this.rendered){this.clearTip()}if(this.menu&&this.destroyMenu!==false){Ext.destroy(this.btnEl,this.menu)}Ext.destroy(this.repeater)},onDestroy:function(){if(this.rendered){this.doc.un(\"mouseover\",this.monitorMouseOver,this);this.doc.un(\"mouseup\",this.onMouseUp,this);delete this.doc;delete this.btnEl;Ext.ButtonToggleMgr.unregister(this)}Ext.Button.superclass.onDestroy.call(this)},doAutoWidth:function(){if(this.autoWidth!==false&&this.el&&this.text&&this.width===undefined){this.el.setWidth(\"auto\");if(Ext.isIE7&&Ext.isStrict){var a=this.btnEl;if(a&&a.getWidth()>20){a.clip();a.setWidth(Ext.util.TextMetrics.measure(a,this.text).width+a.getFrameWidth(\"lr\"))}}if(this.minWidth){if(this.el.getWidth()<this.minWidth){this.el.setWidth(this.minWidth)}}}},setHandler:function(b,a){this.handler=b;this.scope=a;return this},setText:function(a){this.text=a;if(this.el){this.btnEl.update(a||\"&#160;\");this.setButtonClass()}this.doAutoWidth();return this},setIcon:function(a){this.icon=a;if(this.el){this.btnEl.setStyle(\"background-image\",a?\"url(\"+a+\")\":\"\");this.setButtonClass()}return this},getText:function(){return this.text},toggle:function(b,a){b=b===undefined?!this.pressed:!!b;if(b!=this.pressed){if(this.rendered){this.el[b?\"addClass\":\"removeClass\"](\"x-btn-pressed\")}this.pressed=b;if(!a){this.fireEvent(\"toggle\",this,b);if(this.toggleHandler){this.toggleHandler.call(this.scope||this,this,b)}}}return this},onDisable:function(){this.onDisableChange(true)},onEnable:function(){this.onDisableChange(false)},onDisableChange:function(a){if(this.el){if(!Ext.isIE6||!this.text){this.el[a?\"addClass\":\"removeClass\"](this.disabledClass)}this.el.dom.disabled=a}this.disabled=a},showMenu:function(){if(this.rendered&&this.menu){if(this.tooltip){Ext.QuickTips.getQuickTip().cancelShow(this.btnEl)}if(this.menu.isVisible()){this.menu.hide()}this.menu.ownerCt=this;this.menu.show(this.el,this.menuAlign)}return this},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){return this.menu&&this.menu.ownerCt==this&&this.menu.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onClick:function(a){if(a){a.preventDefault()}if(a.button!==0){return}if(!this.disabled){this.doToggle();if(this.menu&&!this.hasVisibleMenu()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent(\"click\",this,a);if(this.handler){this.handler.call(this.scope||this,this,a)}}},doToggle:function(){if(this.enableToggle&&(this.allowDepress!==false||!this.pressed)){this.toggle()}},isMenuTriggerOver:function(b,a){return this.menu&&!a},isMenuTriggerOut:function(b,a){return this.menu&&!a},onMouseOver:function(b){if(!this.disabled){var a=b.within(this.el,true);if(!a){this.el.addClass(\"x-btn-over\");if(!this.monitoringMouseOver){this.doc.on(\"mouseover\",this.monitorMouseOver,this);this.monitoringMouseOver=true}this.fireEvent(\"mouseover\",this,b)}if(this.isMenuTriggerOver(b,a)){this.fireEvent(\"menutriggerover\",this,this.menu,b)}}},monitorMouseOver:function(a){if(a.target!=this.el.dom&&!a.within(this.el)){if(this.monitoringMouseOver){this.doc.un(\"mouseover\",this.monitorMouseOver,this);this.monitoringMouseOver=false}this.onMouseOut(a)}},onMouseOut:function(b){var a=b.within(this.el)&&b.target!=this.el.dom;this.el.removeClass(\"x-btn-over\");this.fireEvent(\"mouseout\",this,b);if(this.isMenuTriggerOut(b,a)){this.fireEvent(\"menutriggerout\",this,this.menu,b)}},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(a){if(!this.disabled){this.el.addClass(\"x-btn-focus\")}},onBlur:function(a){this.el.removeClass(\"x-btn-focus\")},getClickEl:function(b,a){return this.el},onMouseDown:function(a){if(!this.disabled&&a.button===0){this.getClickEl(a).addClass(\"x-btn-click\");this.doc.on(\"mouseup\",this.onMouseUp,this)}},onMouseUp:function(a){if(a.button===0){this.getClickEl(a,true).removeClass(\"x-btn-click\");this.doc.un(\"mouseup\",this.onMouseUp,this)}},onMenuShow:function(a){if(this.menu.ownerCt==this){this.menu.ownerCt=this;this.ignoreNextClick=0;this.el.addClass(\"x-btn-menu-active\");this.fireEvent(\"menushow\",this,this.menu)}},onMenuHide:function(a){if(this.menu.ownerCt==this){this.el.removeClass(\"x-btn-menu-active\");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent(\"menuhide\",this,this.menu);delete this.menu.ownerCt}},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg(\"button\",Ext.Button);Ext.ButtonToggleMgr=function(){var a={};function b(e,j){if(j){var h=a[e.toggleGroup];for(var d=0,c=h.length;d<c;d++){if(h[d]!=e){h[d].toggle(false)}}}}return{register:function(c){if(!c.toggleGroup){return}var d=a[c.toggleGroup];if(!d){d=a[c.toggleGroup]=[]}d.push(c);c.on(\"toggle\",b)},unregister:function(c){if(!c.toggleGroup){return}var d=a[c.toggleGroup];if(d){d.remove(c);c.un(\"toggle\",b)}},getPressed:function(h){var e=a[h];if(e){for(var d=0,c=e.length;d<c;d++){if(e[d].pressed===true){return e[d]}}}return null}}}();Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:\"em\",split:true,initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this);this.addEvents(\"arrowclick\")},onRender:function(){Ext.SplitButton.superclass.onRender.apply(this,arguments);if(this.arrowTooltip){this.el.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip}},setArrowHandler:function(b,a){this.arrowHandler=b;this.scope=a},getMenuClass:function(){return\"x-btn-split\"+(this.arrowAlign==\"bottom\"?\"-bottom\":\"\")},isClickOnArrow:function(c){if(this.arrowAlign!=\"bottom\"){var b=this.el.child(\"em.x-btn-split\");var a=b.getRegion().right-b.getPadding(\"r\");return c.getPageX()>a}else{return c.getPageY()>this.btnEl.getRegion().bottom}},onClick:function(b,a){b.preventDefault();if(!this.disabled){if(this.isClickOnArrow(b)){if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent(\"arrowclick\",this,b);if(this.arrowHandler){this.arrowHandler.call(this.scope||this,this,b)}}else{this.doToggle();this.fireEvent(\"click\",this,b);if(this.handler){this.handler.call(this.scope||this,this,b)}}}},isMenuTriggerOver:function(a){return this.menu&&a.target.tagName==this.arrowSelector},isMenuTriggerOut:function(b,a){return this.menu&&b.target.tagName!=this.arrowSelector}});Ext.reg(\"splitbutton\",Ext.SplitButton);Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(a){if(a&&this.showText===true){var b=\"\";if(this.prependText){b+=this.prependText}b+=a.text;return b}return undefined},setActiveItem:function(c,a){if(!Ext.isObject(c)){c=this.menu.getComponent(c)}if(c){if(!this.rendered){this.text=this.getItemText(c);this.iconCls=c.iconCls}else{var b=this.getItemText(c);if(b){this.setText(b)}this.setIconClass(c.iconCls)}this.activeItem=c;if(!c.checked){c.setChecked(true,a)}if(this.forceIcon){this.setIconClass(this.forceIcon)}if(!a){this.fireEvent(\"change\",this,c)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents(\"change\");if(this.changeHandler){this.on(\"change\",this.changeHandler,this.scope||this);delete this.changeHandler}this.itemCount=this.items.length;this.menu={cls:\"x-cycle-menu\",items:[]};var a=0;Ext.each(this.items,function(c,b){Ext.apply(c,{group:c.group||this.id,itemIndex:b,checkHandler:this.checkHandler,scope:this,checked:c.checked||false});this.menu.items.push(c);if(c.checked){a=b}},this);Ext.CycleButton.superclass.initComponent.call(this);this.on(\"click\",this.toggleSelected,this);this.setActiveItem(a,true)},checkHandler:function(a,b){if(b){this.setActiveItem(a)}},toggleSelected:function(){var a=this.menu;a.render();if(!a.hasLayout){a.doLayout()}var d,b;for(var c=1;c<this.itemCount;c++){d=(this.activeItem.itemIndex+c)%this.itemCount;b=a.items.itemAt(d);if(!b.disabled){b.setChecked(true);break}}}});Ext.reg(\"cycle\",Ext.CycleButton);Ext.Toolbar=function(a){if(Ext.isArray(a)){a={items:a,layout:\"toolbar\"}}else{a=Ext.apply({layout:\"toolbar\"},a);if(a.buttons){a.items=a.buttons}}Ext.Toolbar.superclass.constructor.call(this,a)};(function(){var a=Ext.Toolbar;Ext.extend(a,Ext.Container,{defaultType:\"button\",enableOverflow:false,trackMenus:true,internalDefaults:{removeMode:\"container\",hideParent:true},toolbarCls:\"x-toolbar\",initComponent:function(){a.superclass.initComponent.call(this);this.addEvents(\"overflowchange\")},onRender:function(c,b){if(!this.el){if(!this.autoCreate){this.autoCreate={cls:this.toolbarCls+\" x-small-editor\"}}this.el=c.createChild(Ext.apply({id:this.id},this.autoCreate),b);Ext.Toolbar.superclass.onRender.apply(this,arguments)}},lookupComponent:function(b){if(Ext.isString(b)){if(b==\"-\"){b=new a.Separator()}else{if(b==\" \"){b=new a.Spacer()}else{if(b==\"->\"){b=new a.Fill()}else{b=new a.TextItem(b)}}}this.applyDefaults(b)}else{if(b.isFormField||b.render){b=this.createComponent(b)}else{if(b.tag){b=new a.Item({autoEl:b})}else{if(b.tagName){b=new a.Item({el:b})}else{if(Ext.isObject(b)){b=b.xtype?this.createComponent(b):this.constructButton(b)}}}}}return b},applyDefaults:function(e){if(!Ext.isString(e)){e=Ext.Toolbar.superclass.applyDefaults.call(this,e);var b=this.internalDefaults;if(e.events){Ext.applyIf(e.initialConfig,b);Ext.apply(e,b)}else{Ext.applyIf(e,b)}}return e},addSeparator:function(){return this.add(new a.Separator())},addSpacer:function(){return this.add(new a.Spacer())},addFill:function(){this.add(new a.Fill())},addElement:function(b){return this.addItem(new a.Item({el:b}))},addItem:function(b){return this.add.apply(this,arguments)},addButton:function(c){if(Ext.isArray(c)){var e=[];for(var d=0,b=c.length;d<b;d++){e.push(this.addButton(c[d]))}return e}return this.add(this.constructButton(c))},addText:function(b){return this.addItem(new a.TextItem(b))},addDom:function(b){return this.add(new a.Item({autoEl:b}))},addField:function(b){return this.add(b)},insertButton:function(c,g){if(Ext.isArray(g)){var e=[];for(var d=0,b=g.length;d<b;d++){e.push(this.insertButton(c+d,g[d]))}return e}return Ext.Toolbar.superclass.insert.call(this,c,g)},trackMenu:function(c,b){if(this.trackMenus&&c.menu){var d=b?\"mun\":\"mon\";this[d](c,\"menutriggerover\",this.onButtonTriggerOver,this);this[d](c,\"menushow\",this.onButtonMenuShow,this);this[d](c,\"menuhide\",this.onButtonMenuHide,this)}},constructButton:function(d){var c=d.events?d:this.createComponent(d,d.split?\"splitbutton\":this.defaultType);return c},onAdd:function(b){Ext.Toolbar.superclass.onAdd.call(this);this.trackMenu(b);if(this.disabled){b.disable()}},onRemove:function(b){Ext.Toolbar.superclass.onRemove.call(this);if(b==this.activeMenuBtn){delete this.activeMenuBtn}this.trackMenu(b,true)},onDisable:function(){this.items.each(function(b){if(b.disable){b.disable()}})},onEnable:function(){this.items.each(function(b){if(b.enable){b.enable()}})},onButtonTriggerOver:function(b){if(this.activeMenuBtn&&this.activeMenuBtn!=b){this.activeMenuBtn.hideMenu();b.showMenu();this.activeMenuBtn=b}},onButtonMenuShow:function(b){this.activeMenuBtn=b},onButtonMenuHide:function(b){delete this.activeMenuBtn}});Ext.reg(\"toolbar\",Ext.Toolbar);a.Item=Ext.extend(Ext.BoxComponent,{hideParent:true,enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg(\"tbitem\",a.Item);a.Separator=Ext.extend(a.Item,{onRender:function(c,b){this.el=c.createChild({tag:\"span\",cls:\"xtb-sep\"},b)}});Ext.reg(\"tbseparator\",a.Separator);a.Spacer=Ext.extend(a.Item,{onRender:function(c,b){this.el=c.createChild({tag:\"div\",cls:\"xtb-spacer\",style:this.width?\"width:\"+this.width+\"px\":\"\"},b)}});Ext.reg(\"tbspacer\",a.Spacer);a.Fill=Ext.extend(a.Item,{render:Ext.emptyFn,isFill:true});Ext.reg(\"tbfill\",a.Fill);a.TextItem=Ext.extend(a.Item,{constructor:function(b){a.TextItem.superclass.constructor.call(this,Ext.isString(b)?{text:b}:b)},onRender:function(c,b){this.autoEl={cls:\"xtb-text\",html:this.text||\"\"};a.TextItem.superclass.onRender.call(this,c,b)},setText:function(b){if(this.rendered){this.el.update(b)}else{this.text=b}}});Ext.reg(\"tbtext\",a.TextItem);a.Button=Ext.extend(Ext.Button,{});a.SplitButton=Ext.extend(Ext.SplitButton,{});Ext.reg(\"tbbutton\",a.Button);Ext.reg(\"tbsplit\",a.SplitButton)})();Ext.ButtonGroup=Ext.extend(Ext.Panel,{baseCls:\"x-btn-group\",layout:\"table\",defaultType:\"button\",frame:true,internalDefaults:{removeMode:\"container\",hideParent:true},initComponent:function(){this.layoutConfig=this.layoutConfig||{};Ext.applyIf(this.layoutConfig,{columns:this.columns});if(!this.title){this.addClass(\"x-btn-group-notitle\")}this.on(\"afterlayout\",this.onAfterLayout,this);Ext.ButtonGroup.superclass.initComponent.call(this)},applyDefaults:function(b){b=Ext.ButtonGroup.superclass.applyDefaults.call(this,b);var a=this.internalDefaults;if(b.events){Ext.applyIf(b.initialConfig,a);Ext.apply(b,a)}else{Ext.applyIf(b,a)}return b},onAfterLayout:function(){var a=this.body.getFrameWidth(\"lr\")+this.body.dom.firstChild.offsetWidth;this.body.setWidth(a);this.el.setWidth(a+this.getFrameWidth())}});Ext.reg(\"buttongroup\",Ext.ButtonGroup);(function(){var a=Ext.Toolbar;Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:\"Displaying {0} - {1} of {2}\",emptyMsg:\"No data to display\",beforePageText:\"Page\",afterPageText:\"of {0}\",firstText:\"First Page\",prevText:\"Previous Page\",nextText:\"Next Page\",lastText:\"Last Page\",refreshText:\"Refresh\",initComponent:function(){var c=[this.first=new a.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:\"x-tbar-page-first\",disabled:true,handler:this.moveFirst,scope:this}),this.prev=new a.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:\"x-tbar-page-prev\",disabled:true,handler:this.movePrevious,scope:this}),\"-\",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:\"x-tbar-page-number\",allowDecimals:false,allowNegative:false,enableKeyEvents:true,selectOnFocus:true,submitValue:false,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new a.TextItem({text:String.format(this.afterPageText,1)}),\"-\",this.next=new a.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:\"x-tbar-page-next\",disabled:true,handler:this.moveNext,scope:this}),this.last=new a.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:\"x-tbar-page-last\",disabled:true,handler:this.moveLast,scope:this}),\"-\",this.refresh=new a.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:\"x-tbar-loading\",handler:this.doRefresh,scope:this})];var b=this.items||this.buttons||[];if(this.prependButtons){this.items=b.concat(c)}else{this.items=c.concat(b)}delete this.buttons;if(this.displayInfo){this.items.push(\"->\");this.items.push(this.displayItem=new a.TextItem({}))}Ext.PagingToolbar.superclass.initComponent.call(this);this.addEvents(\"change\",\"beforechange\");this.on(\"afterlayout\",this.onFirstLayout,this,{single:true});this.cursor=0;this.bindStore(this.store,true)},onFirstLayout:function(){if(this.dsLoaded){this.onLoad.apply(this,this.dsLoaded)}},updateInfo:function(){if(this.displayItem){var b=this.store.getCount();var c=b==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+b,this.store.getTotalCount());this.displayItem.setText(c)}},onLoad:function(b,e,j){if(!this.rendered){this.dsLoaded=[b,e,j];return}var g=this.getParams();this.cursor=(j.params&&j.params[g.start])?j.params[g.start]:0;var i=this.getPageData(),c=i.activePage,h=i.pages;this.afterTextItem.setText(String.format(this.afterPageText,i.pages));this.inputItem.setValue(c);this.first.setDisabled(c==1);this.prev.setDisabled(c==1);this.next.setDisabled(c==h);this.last.setDisabled(c==h);this.refresh.enable();this.updateInfo();this.fireEvent(\"change\",this,i)},getPageData:function(){var b=this.store.getTotalCount();return{total:b,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:b<this.pageSize?1:Math.ceil(b/this.pageSize)}},changePage:function(b){this.doLoad(((b-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onLoadError:function(){if(!this.rendered){return}this.refresh.enable()},readPage:function(e){var b=this.inputItem.getValue(),c;if(!b||isNaN(c=parseInt(b,10))){this.inputItem.setValue(e.activePage);return false}return c},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(b){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(i,h){var c=h.getKey(),j=this.getPageData(),g;if(c==h.RETURN){h.stopEvent();g=this.readPage(j);if(g!==false){g=Math.min(Math.max(1,g),j.pages)-1;this.doLoad(g*this.pageSize)}}else{if(c==h.HOME||c==h.END){h.stopEvent();g=c==h.HOME?1:j.pages;i.setValue(g)}else{if(c==h.UP||c==h.PAGEUP||c==h.DOWN||c==h.PAGEDOWN){h.stopEvent();if((g=this.readPage(j))){var b=h.shiftKey?10:1;if(c==h.DOWN||c==h.PAGEDOWN){b*=-1}g+=b;if(g>=1&g<=j.pages){i.setValue(g)}}}}}},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){if(this.rendered&&this.refresh){this.refresh.disable()}},doLoad:function(d){var c={},b=this.getParams();c[b.start]=d;c[b.limit]=this.pageSize;if(this.fireEvent(\"beforechange\",this,c)!==false){this.store.load({params:c})}},moveFirst:function(){this.doLoad(0)},movePrevious:function(){this.doLoad(Math.max(0,this.cursor-this.pageSize))},moveNext:function(){this.doLoad(this.cursor+this.pageSize)},moveLast:function(){var c=this.store.getTotalCount(),b=c%this.pageSize;this.doLoad(b?(c-b):c-this.pageSize)},doRefresh:function(){this.doLoad(this.cursor)},bindStore:function(c,d){var b;if(!d&&this.store){if(c!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un(\"beforeload\",this.beforeLoad,this);this.store.un(\"load\",this.onLoad,this);this.store.un(\"exception\",this.onLoadError,this)}if(!c){this.store=null}}if(c){c=Ext.StoreMgr.lookup(c);c.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError});b=true}this.store=c;if(b){this.onLoad(c,null,{})}},unbind:function(b){this.bindStore(null)},bind:function(b){this.bindStore(b)},onDestroy:function(){this.bindStore(null);Ext.PagingToolbar.superclass.onDestroy.call(this)}})})();Ext.reg(\"paging\",Ext.PagingToolbar);Ext.History=(function(){var e,c;var k=false;var d;function g(){var l=location.href,m=l.indexOf(\"#\"),n=m>=0?l.substr(m+1):null;if(Ext.isGecko){n=decodeURIComponent(n)}return n}function a(){c.value=d}function h(l){d=l;Ext.History.fireEvent(\"change\",l)}function i(m){var l=['<html><body><div id=\"state\">',Ext.util.Format.htmlEncode(m),\"</div></body></html>\"].join(\"\");try{var o=e.contentWindow.document;o.open();o.write(l);o.close();return true}catch(n){return false}}function b(){if(!e.contentWindow||!e.contentWindow.document){setTimeout(b,10);return}var o=e.contentWindow.document;var m=o.getElementById(\"state\");var l=m?m.innerText:null;var n=g();setInterval(function(){o=e.contentWindow.document;m=o.getElementById(\"state\");var q=m?m.innerText:null;var p=g();if(q!==l){l=q;h(l);location.hash=l;n=l;a()}else{if(p!==n){n=p;i(p)}}},50);k=true;Ext.History.fireEvent(\"ready\",Ext.History)}function j(){d=c.value?c.value:g();if(Ext.isIE){b()}else{var l=g();setInterval(function(){var m=g();if(m!==l){l=m;h(l);a()}},50);k=true;Ext.History.fireEvent(\"ready\",Ext.History)}}return{fieldId:\"x-history-field\",iframeId:\"x-history-frame\",events:{},init:function(m,l){if(k){Ext.callback(m,l,[this]);return}if(!Ext.isReady){Ext.onReady(function(){Ext.History.init(m,l)});return}c=Ext.getDom(Ext.History.fieldId);if(Ext.isIE){e=Ext.getDom(Ext.History.iframeId)}this.addEvents(\"ready\",\"change\");if(m){this.on(\"ready\",m,l,{single:true})}j()},add:function(l,m){if(m!==false){if(this.getToken()==l){return true}}if(Ext.isIE){return i(l)}else{location.hash=l;return true}},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return k?d:g()}}})();Ext.apply(Ext.History,new Ext.util.Observable());Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:\"sides\",defaultAlign:\"tl-bl?\",autoRender:true,quickShowInterval:250,frame:true,hidden:true,baseCls:\"x-tip\",floating:{shadow:true,shim:true,useDisplay:true,constrain:false},autoHeight:true,closeAction:\"hide\",initComponent:function(){Ext.Tip.superclass.initComponent.call(this);if(this.closable&&!this.title){this.elements+=\",header\"}},afterRender:function(){Ext.Tip.superclass.afterRender.call(this);if(this.closable){this.addTool({id:\"close\",handler:this[this.closeAction],scope:this})}},showAt:function(a){Ext.Tip.superclass.show.call(this);if(this.measureWidth!==false&&(!this.initialConfig||typeof this.initialConfig.width!=\"number\")){this.doAutoWidth()}if(this.constrainPosition){a=this.el.adjustForConstraints(a)}this.setPagePosition(a[0],a[1])},doAutoWidth:function(a){a=a||0;var b=this.body.getTextWidth();if(this.title){b=Math.max(b,this.header.child(\"span\").getTextWidth(this.title))}b+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding(\"lr\")+a;this.setWidth(b.constrain(this.minWidth,this.maxWidth));if(Ext.isIE7&&!this.repainted){this.el.repaint();this.repainted=true}},showBy:function(a,b){if(!this.rendered){this.render(Ext.getBody())}this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable==\"boolean\"?null:this.draggable);this.header.addClass(\"x-tip-draggable\")}});Ext.reg(\"tip\",Ext.Tip);Ext.Tip.DD=function(b,a){Ext.apply(this,a);this.tip=b;Ext.Tip.DD.superclass.constructor.call(this,b.el.id,\"WindowDD-\"+b.id);this.setHandleElId(b.header.id);this.scroll=false};Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:true,scroll:false,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(a){this.tip.el.enableShadow(true)}});Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,constrainPosition:false,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this);this.lastActive=new Date();this.initTarget(this.target);this.origAnchor=this.anchor},onRender:function(b,a){Ext.ToolTip.superclass.onRender.call(this,b,a);this.anchorCls=\"x-tip-anchor-\"+this.getAnchorPosition();this.anchorEl=this.el.createChild({cls:\"x-tip-anchor \"+this.anchorCls})},afterRender:function(){Ext.ToolTip.superclass.afterRender.call(this);this.anchorEl.setStyle(\"z-index\",this.el.getZIndex()+1).setVisibilityMode(Ext.Element.DISPLAY)},initTarget:function(c){var a;if((a=Ext.get(c))){if(this.target){var b=Ext.get(this.target);this.mun(b,\"mouseover\",this.onTargetOver,this);this.mun(b,\"mouseout\",this.onTargetOut,this);this.mun(b,\"mousemove\",this.onMouseMove,this)}this.mon(a,{mouseover:this.onTargetOver,mouseout:this.onTargetOut,mousemove:this.onMouseMove,scope:this});this.target=a}if(this.anchor){this.anchorTarget=this.target}},onMouseMove:function(b){var a=this.delegate?b.getTarget(this.delegate):this.triggerElement=true;if(a){this.targetXY=b.getXY();if(a===this.triggerElement){if(!this.hidden&&this.trackMouse){this.setPagePosition(this.getTargetXY())}}else{this.hide();this.lastActive=new Date(0);this.onTargetOver(b)}}else{if(!this.closable&&this.isVisible()){this.hide()}}},getTargetXY:function(){if(this.delegate){this.anchorTarget=this.triggerElement}if(this.anchor){this.targetCounter++;var c=this.getOffsets(),l=(this.anchorToTarget&&!this.trackMouse)?this.el.getAlignToXY(this.anchorTarget,this.getAnchorAlign()):this.targetXY,a=Ext.lib.Dom.getViewWidth()-5,h=Ext.lib.Dom.getViewHeight()-5,i=document.documentElement,e=document.body,k=(i.scrollLeft||e.scrollLeft||0)+5,j=(i.scrollTop||e.scrollTop||0)+5,b=[l[0]+c[0],l[1]+c[1]],g=this.getSize();this.anchorEl.removeClass(this.anchorCls);if(this.targetCounter<2){if(b[0]<k){if(this.anchorToTarget){this.defaultAlign=\"l-r\";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor=\"left\";return this.getTargetXY()}if(b[0]+g.width>a){if(this.anchorToTarget){this.defaultAlign=\"r-l\";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor=\"right\";return this.getTargetXY()}if(b[1]<j){if(this.anchorToTarget){this.defaultAlign=\"t-b\";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor=\"top\";return this.getTargetXY()}if(b[1]+g.height>h){if(this.anchorToTarget){this.defaultAlign=\"b-t\";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor=\"bottom\";return this.getTargetXY()}}this.anchorCls=\"x-tip-anchor-\"+this.getAnchorPosition();this.anchorEl.addClass(this.anchorCls);this.targetCounter=0;return b}else{var d=this.getMouseOffset();return[this.targetXY[0]+d[0],this.targetXY[1]+d[1]]}},getMouseOffset:function(){var a=this.anchor?[0,0]:[15,18];if(this.mouseOffset){a[0]+=this.mouseOffset[0];a[1]+=this.mouseOffset[1]}return a},getAnchorPosition:function(){if(this.anchor){this.tipAnchor=this.anchor.charAt(0)}else{var a=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\\?)?$/);if(!a){throw\"AnchorTip.defaultAlign is invalid\"}this.tipAnchor=a[1].charAt(0)}switch(this.tipAnchor){case\"t\":return\"top\";case\"b\":return\"bottom\";case\"r\":return\"right\"}return\"left\"},getAnchorAlign:function(){switch(this.anchor){case\"top\":return\"tl-bl\";case\"left\":return\"tl-tr\";case\"right\":return\"tr-tl\";default:return\"bl-tl\"}},getOffsets:function(){var b,a=this.getAnchorPosition().charAt(0);if(this.anchorToTarget&&!this.trackMouse){switch(a){case\"t\":b=[0,9];break;case\"b\":b=[0,-13];break;case\"r\":b=[-13,0];break;default:b=[9,0];break}}else{switch(a){case\"t\":b=[-15-this.anchorOffset,30];break;case\"b\":b=[-19-this.anchorOffset,-13-this.el.dom.offsetHeight];break;case\"r\":b=[-15-this.el.dom.offsetWidth,-13-this.anchorOffset];break;default:b=[25,-13-this.anchorOffset];break}}var c=this.getMouseOffset();b[0]+=c[0];b[1]+=c[1];return b},onTargetOver:function(b){if(this.disabled||b.within(this.target.dom,true)){return}var a=b.getTarget(this.delegate);if(a){this.triggerElement=a;this.clearTimer(\"hide\");this.targetXY=b.getXY();this.delayShow()}},delayShow:function(){if(this.hidden&&!this.showTimer){if(this.lastActive.getElapsed()<this.quickShowInterval){this.show()}else{this.showTimer=this.show.defer(this.showDelay,this)}}else{if(!this.hidden&&this.autoHide!==false){this.show()}}},onTargetOut:function(a){if(this.disabled||a.within(this.target.dom,true)){return}this.clearTimer(\"show\");if(this.autoHide!==false){this.delayHide()}},delayHide:function(){if(!this.hidden&&!this.hideTimer){this.hideTimer=this.hide.defer(this.hideDelay,this)}},hide:function(){this.clearTimer(\"dismiss\");this.lastActive=new Date();if(this.anchorEl){this.anchorEl.hide()}Ext.ToolTip.superclass.hide.call(this);delete this.triggerElement},show:function(){if(this.anchor){this.showAt([-1000,-1000]);this.origConstrainPosition=this.constrainPosition;this.constrainPosition=false;this.anchor=this.origAnchor}this.showAt(this.getTargetXY());if(this.anchor){this.anchorEl.show();this.syncAnchor();this.constrainPosition=this.origConstrainPosition}else{this.anchorEl.hide()}},showAt:function(a){this.lastActive=new Date();this.clearTimers();Ext.ToolTip.superclass.showAt.call(this,a);if(this.dismissDelay&&this.autoHide!==false){this.dismissTimer=this.hide.defer(this.dismissDelay,this)}if(this.anchor&&!this.anchorEl.isVisible()){this.syncAnchor();this.anchorEl.show()}else{this.anchorEl.hide()}},syncAnchor:function(){var a,b,c;switch(this.tipAnchor.charAt(0)){case\"t\":a=\"b\";b=\"tl\";c=[20+this.anchorOffset,2];break;case\"r\":a=\"l\";b=\"tr\";c=[-2,11+this.anchorOffset];break;case\"b\":a=\"t\";b=\"bl\";c=[20+this.anchorOffset,-2];break;default:a=\"r\";b=\"tl\";c=[2,11+this.anchorOffset];break}this.anchorEl.alignTo(this.el,a+\"-\"+b,c)},setPagePosition:function(a,b){Ext.ToolTip.superclass.setPagePosition.call(this,a,b);if(this.anchor){this.syncAnchor()}},clearTimer:function(a){a=a+\"Timer\";clearTimeout(this[a]);delete this[a]},clearTimers:function(){this.clearTimer(\"show\");this.clearTimer(\"dismiss\");this.clearTimer(\"hide\")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this);Ext.getDoc().on(\"mousedown\",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this);Ext.getDoc().un(\"mousedown\",this.onDocMouseDown,this)},onDocMouseDown:function(a){if(this.autoHide!==true&&!this.closable&&!a.within(this.el.dom)){this.disable();this.doEnable.defer(100,this)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.clearTimers();this.hide()},adjustPosition:function(a,d){if(this.constrainPosition){var c=this.targetXY[1],b=this.getSize().height;if(d<=c&&(d+b)>=c){d=c-b-5}}return{x:a,y:d}},beforeDestroy:function(){this.clearTimers();Ext.destroy(this.anchorEl);delete this.anchorEl;delete this.target;delete this.anchorTarget;delete this.triggerElement;Ext.ToolTip.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un(\"mousedown\",this.onDocMouseDown,this);Ext.ToolTip.superclass.onDestroy.call(this)}});Ext.reg(\"tooltip\",Ext.ToolTip);Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:false,tagConfig:{namespace:\"ext\",attribute:\"qtip\",width:\"qwidth\",target:\"target\",title:\"qtitle\",hide:\"hide\",cls:\"qclass\",align:\"qalign\",anchor:\"anchor\"},initComponent:function(){this.target=this.target||Ext.getDoc();this.targets=this.targets||{};Ext.QuickTip.superclass.initComponent.call(this)},register:function(e){var h=Ext.isArray(e)?e:arguments;for(var g=0,a=h.length;g<a;g++){var l=h[g];var k=l.target;if(k){if(Ext.isArray(k)){for(var d=0,b=k.length;d<b;d++){this.targets[Ext.id(k[d])]=l}}else{this.targets[Ext.id(k)]=l}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(b){var a=this.activeTarget;b=Ext.get(b).dom;if(this.isVisible()){if(a&&a.el==b){this.hide()}}else{if(a&&a.el==b){this.clearTimer(\"show\")}}},getTipCfg:function(d){var b=d.getTarget(),c,a;if(this.interceptTitles&&b.title&&Ext.isString(b.title)){c=b.title;b.qtip=c;b.removeAttribute(\"title\");d.preventDefault()}else{a=this.tagConfig;c=b.qtip||Ext.fly(b).getAttribute(a.attribute,a.namespace)}return c},onTargetOver:function(i){if(this.disabled){return}this.targetXY=i.getXY();var c=i.getTarget();if(!c||c.nodeType!==1||c==document||c==document.body){return}if(this.activeTarget&&((c==this.activeTarget.el)||Ext.fly(this.activeTarget.el).contains(c))){this.clearTimer(\"hide\");this.show();return}if(c&&this.targets[c.id]){this.activeTarget=this.targets[c.id];this.activeTarget.el=c;this.anchor=this.activeTarget.anchor;if(this.anchor){this.anchorTarget=c}this.delayShow();return}var g,h=Ext.fly(c),b=this.tagConfig,d=b.namespace;if(g=this.getTipCfg(i)){var a=h.getAttribute(b.hide,d);this.activeTarget={el:c,text:g,width:h.getAttribute(b.width,d),autoHide:a!=\"user\"&&a!==\"false\",title:h.getAttribute(b.title,d),cls:h.getAttribute(b.cls,d),align:h.getAttribute(b.align,d)};this.anchor=h.getAttribute(b.anchor,d);if(this.anchor){this.anchorTarget=c}this.delayShow()}},onTargetOut:function(a){if(this.activeTarget&&a.within(this.activeTarget.el)&&!this.getTipCfg(a)){return}this.clearTimer(\"show\");if(this.autoHide!==false){this.delayHide()}},showAt:function(b){var a=this.activeTarget;if(a){if(!this.rendered){this.render(Ext.getBody());this.activeTarget=a}if(a.width){this.setWidth(a.width);this.body.setWidth(this.adjustBodyWidth(a.width-this.getFrameWidth()));this.measureWidth=false}else{this.measureWidth=true}this.setTitle(a.title||\"\");this.body.update(a.text);this.autoHide=a.autoHide;this.dismissDelay=a.dismissDelay||this.dismissDelay;if(this.lastCls){this.el.removeClass(this.lastCls);delete this.lastCls}if(a.cls){this.el.addClass(a.cls);this.lastCls=a.cls}if(this.anchor){this.constrainPosition=false}else{if(a.align){b=this.el.getAlignToXY(a.el,a.align);this.constrainPosition=false}else{this.constrainPosition=true}}}Ext.QuickTip.superclass.showAt.call(this,b)},hide:function(){delete this.activeTarget;Ext.QuickTip.superclass.hide.call(this)}});Ext.reg(\"quicktip\",Ext.QuickTip);Ext.QuickTips=function(){var b,a=false;return{init:function(c){if(!b){if(!Ext.isReady){Ext.onReady(function(){Ext.QuickTips.init(c)});return}b=new Ext.QuickTip({elements:\"header,body\",disabled:a});if(c!==false){b.render(Ext.getBody())}}},ddDisable:function(){if(b&&!a){b.disable()}},ddEnable:function(){if(b&&!a){b.enable()}},enable:function(){if(b){b.enable()}a=false},disable:function(){if(b){b.disable()}a=true},isEnabled:function(){return b!==undefined&&!b.disabled},getQuickTip:function(){return b},register:function(){b.register.apply(b,arguments)},unregister:function(){b.unregister.apply(b,arguments)},tips:function(){b.register.apply(b,arguments)}}}();Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(a){a.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(b,c,a){this.show();this.body.update(this.getText(a));this.doAutoWidth();this.el.alignTo(a.el,\"b-t?\",this.offsets)},getText:function(a){return String(a.value)}});Ext.ux.SliderTip=Ext.slider.Tip;Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:true,animate:Ext.enableFx,lines:true,enableDD:false,hlDrop:Ext.enableFx,pathSeparator:\"/\",bubbleEvents:[],initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this);if(!this.eventModel){this.eventModel=new Ext.tree.TreeEventModel(this)}var a=this.loader;if(!a){a=new Ext.tree.TreeLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod})}else{if(Ext.isObject(a)&&!a.load){a=new Ext.tree.TreeLoader(a)}}this.loader=a;this.nodeHash={};if(this.root){var b=this.root;delete this.root;this.setRootNode(b)}this.addEvents(\"append\",\"remove\",\"movenode\",\"insert\",\"beforeappend\",\"beforeremove\",\"beforemovenode\",\"beforeinsert\",\"beforeload\",\"load\",\"textchange\",\"beforeexpandnode\",\"beforecollapsenode\",\"expandnode\",\"disabledchange\",\"collapsenode\",\"beforeclick\",\"click\",\"containerclick\",\"checkchange\",\"beforedblclick\",\"dblclick\",\"containerdblclick\",\"contextmenu\",\"containercontextmenu\",\"beforechildrenrendered\",\"startdrag\",\"enddrag\",\"dragdrop\",\"beforenodedrop\",\"nodedrop\",\"nodedragover\");if(this.singleExpand){this.on(\"beforeexpandnode\",this.restrictExpand,this)}},proxyNodeEvent:function(c,b,a,h,g,e,d){if(c==\"collapse\"||c==\"expand\"||c==\"beforecollapse\"||c==\"beforeexpand\"||c==\"move\"||c==\"beforemove\"){c=c+\"node\"}return this.fireEvent(c,b,a,h,g,e,d)},getRootNode:function(){return this.root},setRootNode:function(b){this.destroyRoot();if(!b.render){b=this.loader.createNode(b)}this.root=b;b.ownerTree=this;b.isRoot=true;this.registerNode(b);if(!this.rootVisible){var a=b.attributes.uiProvider;b.ui=a?new a(b):new Ext.tree.RootTreeNodeUI(b)}if(this.innerCt){this.clearInnerCt();this.renderRoot()}return b},clearInnerCt:function(){this.innerCt.update(\"\")},renderRoot:function(){this.root.render();if(!this.rootVisible){this.root.renderChildren()}},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return\"[Tree\"+(this.id?\" \"+this.id:\"\")+\"]\"},restrictExpand:function(a){var b=a.parentNode;if(b){if(b.expandedChild&&b.expandedChild.parentNode==b){b.expandedChild.collapse()}b.expandedChild=a}},getChecked:function(b,c){c=c||this.root;var d=[];var e=function(){if(this.attributes.checked){d.push(!b?this:(b==\"id\"?this.id:this.attributes[b]))}};c.cascade(e);return d},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(true)},collapseAll:function(){this.root.collapse(true)},getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.tree.DefaultSelectionModel()}return this.selModel},expandPath:function(g,a,h){if(Ext.isEmpty(g)){if(h){h(false,undefined)}return}a=a||\"id\";var d=g.split(this.pathSeparator);var c=this.root;if(c.attributes[a]!=d[1]){if(h){h(false,null)}return}var b=1;var e=function(){if(++b==d.length){if(h){h(true,c)}return}var i=c.findChild(a,d[b]);if(!i){if(h){h(false,c)}return}c=i;i.expand(false,false,e)};c.expand(false,false,e)},selectPath:function(e,a,g){if(Ext.isEmpty(e)){if(g){g(false,undefined)}return}a=a||\"id\";var c=e.split(this.pathSeparator),b=c.pop();if(c.length>1){var d=function(i,h){if(i&&h){var j=h.findChild(a,b);if(j){j.select();if(g){g(true,j)}}else{if(g){g(false,j)}}}else{if(g){g(false,j)}}};this.expandPath(c.join(this.pathSeparator),a,d)}else{this.root.select();if(g){g(true,this.root)}}},getTreeEl:function(){return this.body},onRender:function(b,a){Ext.tree.TreePanel.superclass.onRender.call(this,b,a);this.el.addClass(\"x-tree\");this.innerCt=this.body.createChild({tag:\"ul\",cls:\"x-tree-root-ct \"+(this.useArrows?\"x-tree-arrows\":this.lines?\"x-tree-lines\":\"x-tree-no-lines\")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);if(this.containerScroll){Ext.dd.ScrollManager.register(this.body)}if((this.enableDD||this.enableDrop)&&!this.dropZone){this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||\"TreeDD\",appendOnly:this.ddAppendOnly===true})}if((this.enableDD||this.enableDrag)&&!this.dragZone){this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||\"TreeDD\",scroll:this.ddScroll})}this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.renderRoot()},beforeDestroy:function(){if(this.rendered){Ext.dd.ScrollManager.unregister(this.body);Ext.destroy(this.dropZone,this.dragZone)}this.destroyRoot();Ext.destroy(this.loader);this.nodeHash=this.root=this.loader=null;Ext.tree.TreePanel.superclass.beforeDestroy.call(this)},destroyRoot:function(){if(this.root&&this.root.destroy){this.root.destroy(true)}}});Ext.tree.TreePanel.nodeTypes={};Ext.reg(\"treepanel\",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(a){this.tree=a;this.tree.on(\"render\",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var a=this.tree;if(a.trackMouseOver!==false){a.mon(a.innerCt,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut})}a.mon(a.getTreeEl(),{scope:this,click:this.delegateClick,dblclick:this.delegateDblClick,contextmenu:this.delegateContextMenu})},getNode:function(b){var a;if(a=b.getTarget(\".x-tree-node-el\",10)){var c=Ext.fly(a,\"_treeEvents\").getAttribute(\"tree-node-id\",\"ext\");if(c){return this.tree.getNodeById(c)}}return null},getNodeTarget:function(b){var a=b.getTarget(\".x-tree-node-icon\",1);if(!a){a=b.getTarget(\".x-tree-node-el\",6)}return a},delegateOut:function(b,a){if(!this.beforeEvent(b)){return}if(b.getTarget(\".x-tree-ec-icon\",1)){var c=this.getNode(b);this.onIconOut(b,c);if(c==this.lastEcOver){delete this.lastEcOver}}if((a=this.getNodeTarget(b))&&!b.within(a,true)){this.onNodeOut(b,this.getNode(b))}},delegateOver:function(b,a){if(!this.beforeEvent(b)){return}if(Ext.isGecko&&!this.trackingDoc){Ext.getBody().on(\"mouseover\",this.trackExit,this);this.trackingDoc=true}if(this.lastEcOver){this.onIconOut(b,this.lastEcOver);delete this.lastEcOver}if(b.getTarget(\".x-tree-ec-icon\",1)){this.lastEcOver=this.getNode(b);this.onIconOver(b,this.lastEcOver)}if(a=this.getNodeTarget(b)){this.onNodeOver(b,this.getNode(b))}},trackExit:function(a){if(this.lastOverNode){if(this.lastOverNode.ui&&!a.within(this.lastOverNode.ui.getEl())){this.onNodeOut(a,this.lastOverNode)}delete this.lastOverNode;Ext.getBody().un(\"mouseover\",this.trackExit,this);this.trackingDoc=false}},delegateClick:function(b,a){if(this.beforeEvent(b)){if(b.getTarget(\"input[type=checkbox]\",1)){this.onCheckboxClick(b,this.getNode(b))}else{if(b.getTarget(\".x-tree-ec-icon\",1)){this.onIconClick(b,this.getNode(b))}else{if(this.getNodeTarget(b)){this.onNodeClick(b,this.getNode(b))}}}}else{this.checkContainerEvent(b,\"click\")}},delegateDblClick:function(b,a){if(this.beforeEvent(b)){if(this.getNodeTarget(b)){this.onNodeDblClick(b,this.getNode(b))}}else{this.checkContainerEvent(b,\"dblclick\")}},delegateContextMenu:function(b,a){if(this.beforeEvent(b)){if(this.getNodeTarget(b)){this.onNodeContextMenu(b,this.getNode(b))}}else{this.checkContainerEvent(b,\"contextmenu\")}},checkContainerEvent:function(b,a){if(this.disabled){b.stopEvent();return false}this.onContainerEvent(b,a)},onContainerEvent:function(b,a){this.tree.fireEvent(\"container\"+a,this.tree,b)},onNodeClick:function(b,a){a.ui.onClick(b)},onNodeOver:function(b,a){this.lastOverNode=a;a.ui.onOver(b)},onNodeOut:function(b,a){a.ui.onOut(b)},onIconOver:function(b,a){a.ui.addClass(\"x-tree-ec-over\")},onIconOut:function(b,a){a.ui.removeClass(\"x-tree-ec-over\")},onIconClick:function(b,a){a.ui.ecClick(b)},onCheckboxClick:function(b,a){a.ui.onCheckChange(b)},onNodeDblClick:function(b,a){a.ui.onDblClick(b)},onNodeContextMenu:function(b,a){a.ui.onContextMenu(b)},beforeEvent:function(b){var a=this.getNode(b);if(this.disabled||!a||!a.ui){b.stopEvent();return false}return true},disable:function(){this.disabled=true},enable:function(){this.disabled=false}};Ext.tree.DefaultSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(a){this.selNode=null;this.addEvents(\"selectionchange\",\"beforeselect\");Ext.apply(this,a);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},init:function(a){this.tree=a;a.mon(a.getTreeEl(),\"keydown\",this.onKeyDown,this);a.on(\"click\",this.onNodeClick,this)},onNodeClick:function(a,b){this.select(a)},select:function(c,a){if(!Ext.fly(c.ui.wrap).isVisible()&&a){return a.call(this,c)}var b=this.selNode;if(c==b){c.ui.onSelectedChange(true)}else{if(this.fireEvent(\"beforeselect\",this,c,b)!==false){if(b&&b.ui){b.ui.onSelectedChange(false)}this.selNode=c;c.ui.onSelectedChange(true);this.fireEvent(\"selectionchange\",this,c,b)}}return c},unselect:function(b,a){if(this.selNode==b){this.clearSelections(a)}},clearSelections:function(a){var b=this.selNode;if(b){b.ui.onSelectedChange(false);this.selNode=null;if(a!==true){this.fireEvent(\"selectionchange\",this,null)}}return b},getSelectedNode:function(){return this.selNode},isSelected:function(a){return this.selNode==a},selectPrevious:function(a){if(!(a=a||this.selNode||this.lastSelNode)){return null}var c=a.previousSibling;if(c){if(!c.isExpanded()||c.childNodes.length<1){return this.select(c,this.selectPrevious)}else{var b=c.lastChild;while(b&&b.isExpanded()&&Ext.fly(b.ui.wrap).isVisible()&&b.childNodes.length>0){b=b.lastChild}return this.select(b,this.selectPrevious)}}else{if(a.parentNode&&(this.tree.rootVisible||!a.parentNode.isRoot)){return this.select(a.parentNode,this.selectPrevious)}}return null},selectNext:function(b){if(!(b=b||this.selNode||this.lastSelNode)){return null}if(b.firstChild&&b.isExpanded()&&Ext.fly(b.ui.wrap).isVisible()){return this.select(b.firstChild,this.selectNext)}else{if(b.nextSibling){return this.select(b.nextSibling,this.selectNext)}else{if(b.parentNode){var a=null;b.parentNode.bubble(function(){if(this.nextSibling){a=this.getOwnerTree().selModel.select(this.nextSibling,this.selectNext);return false}});return a}}}return null},onKeyDown:function(c){var b=this.selNode||this.lastSelNode;var d=this;if(!b){return}var a=c.getKey();switch(a){case c.DOWN:c.stopEvent();this.selectNext();break;case c.UP:c.stopEvent();this.selectPrevious();break;case c.RIGHT:c.preventDefault();if(b.hasChildNodes()){if(!b.isExpanded()){b.expand()}else{if(b.firstChild){this.select(b.firstChild,c)}}}break;case c.LEFT:c.preventDefault();if(b.hasChildNodes()&&b.isExpanded()){b.collapse()}else{if(b.parentNode&&(this.tree.rootVisible||b.parentNode!=this.tree.getRootNode())){this.select(b.parentNode,c)}}break}}});Ext.tree.MultiSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(a){this.selNodes=[];this.selMap={};this.addEvents(\"selectionchange\");Ext.apply(this,a);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},init:function(a){this.tree=a;a.mon(a.getTreeEl(),\"keydown\",this.onKeyDown,this);a.on(\"click\",this.onNodeClick,this)},onNodeClick:function(a,b){if(b.ctrlKey&&this.isSelected(a)){this.unselect(a)}else{this.select(a,b,b.ctrlKey)}},select:function(a,c,b){if(b!==true){this.clearSelections(true)}if(this.isSelected(a)){this.lastSelNode=a;return a}this.selNodes.push(a);this.selMap[a.id]=a;this.lastSelNode=a;a.ui.onSelectedChange(true);this.fireEvent(\"selectionchange\",this,this.selNodes);return a},unselect:function(b){if(this.selMap[b.id]){b.ui.onSelectedChange(false);var c=this.selNodes;var a=c.indexOf(b);if(a!=-1){this.selNodes.splice(a,1)}delete this.selMap[b.id];this.fireEvent(\"selectionchange\",this,this.selNodes)}},clearSelections:function(b){var d=this.selNodes;if(d.length>0){for(var c=0,a=d.length;c<a;c++){d[c].ui.onSelectedChange(false)}this.selNodes=[];this.selMap={};if(b!==true){this.fireEvent(\"selectionchange\",this,this.selNodes)}}},isSelected:function(a){return this.selMap[a.id]?true:false},getSelectedNodes:function(){return this.selNodes.concat([])},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(a){this.nodeHash={};this.root=null;if(a){this.setRootNode(a)}this.addEvents(\"append\",\"remove\",\"move\",\"insert\",\"beforeappend\",\"beforeremove\",\"beforemove\",\"beforeinsert\");Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:\"/\",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(a){this.root=a;a.ownerTree=this;a.isRoot=true;this.registerNode(a);return a},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return\"[Tree\"+(this.id?\" \"+this.id:\"\")+\"]\"}});Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(a){this.attributes=a||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;if(!this.id){this.id=Ext.id(null,\"xnode-\");this.attributes.id=this.id}this.childNodes=[];this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(b){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===false){return false}var a=this.getOwnerTree();if(a){if(a.proxyNodeEvent.apply(a,arguments)===false){return false}}return true},isLeaf:function(){return this.leaf===true},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},isLast:function(){return(!this.parentNode?true:this.parentNode.lastChild==this)},isFirst:function(){return(!this.parentNode?true:this.parentNode.firstChild==this)},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(e){var g=false;if(Ext.isArray(e)){g=e}else{if(arguments.length>1){g=arguments}}if(g){for(var d=0,a=g.length;d<a;d++){this.appendChild(g[d])}}else{if(this.fireEvent(\"beforeappend\",this.ownerTree,this,e)===false){return false}var b=this.childNodes.length;var c=e.parentNode;if(c){if(e.fireEvent(\"beforemove\",e.getOwnerTree(),e,c,this,b)===false){return false}c.removeChild(e)}b=this.childNodes.length;if(b===0){this.setFirstChild(e)}this.childNodes.push(e);e.parentNode=this;var h=this.childNodes[b-1];if(h){e.previousSibling=h;h.nextSibling=e}else{e.previousSibling=null}e.nextSibling=null;this.setLastChild(e);e.setOwnerTree(this.getOwnerTree());this.fireEvent(\"append\",this.ownerTree,this,e,b);if(c){e.fireEvent(\"move\",this.ownerTree,e,c,this,b)}return e}},removeChild:function(c,b){var a=this.childNodes.indexOf(c);if(a==-1){return false}if(this.fireEvent(\"beforeremove\",this.ownerTree,this,c)===false){return false}this.childNodes.splice(a,1);if(c.previousSibling){c.previousSibling.nextSibling=c.nextSibling}if(c.nextSibling){c.nextSibling.previousSibling=c.previousSibling}if(this.firstChild==c){this.setFirstChild(c.nextSibling)}if(this.lastChild==c){this.setLastChild(c.previousSibling)}this.fireEvent(\"remove\",this.ownerTree,this,c);if(b){c.destroy(true)}else{c.clear()}return c},clear:function(a){this.setOwnerTree(null,a);this.parentNode=this.previousSibling=this.nextSibling=null;if(a){this.firstChild=this.lastChild=null}},destroy:function(a){if(a===true){this.purgeListeners();this.clear(true);Ext.each(this.childNodes,function(b){b.destroy(true)});this.childNodes=null}else{this.remove(true)}},insertBefore:function(d,a){if(!a){return this.appendChild(d)}if(d==a){return false}if(this.fireEvent(\"beforeinsert\",this.ownerTree,this,d,a)===false){return false}var b=this.childNodes.indexOf(a);var c=d.parentNode;var e=b;if(c==this&&this.childNodes.indexOf(d)<b){e--}if(c){if(d.fireEvent(\"beforemove\",d.getOwnerTree(),d,c,this,b,a)===false){return false}c.removeChild(d)}if(e===0){this.setFirstChild(d)}this.childNodes.splice(e,0,d);d.parentNode=this;var g=this.childNodes[e-1];if(g){d.previousSibling=g;g.nextSibling=d}else{d.previousSibling=null}d.nextSibling=a;a.previousSibling=d;d.setOwnerTree(this.getOwnerTree());this.fireEvent(\"insert\",this.ownerTree,this,d,a);if(c){d.fireEvent(\"move\",this.ownerTree,d,c,this,e,a)}return d},remove:function(a){if(this.parentNode){this.parentNode.removeChild(this,a)}return this},removeAll:function(a){var c=this.childNodes,b;while((b=c[0])){this.removeChild(b,a)}return this},item:function(a){return this.childNodes[a]},replaceChild:function(a,c){var b=c?c.nextSibling:null;this.removeChild(c);this.insertBefore(a,b);return c},indexOf:function(a){return this.childNodes.indexOf(a)},getOwnerTree:function(){if(!this.ownerTree){var a=this;while(a){if(a.ownerTree){this.ownerTree=a.ownerTree;break}a=a.parentNode}}return this.ownerTree},getDepth:function(){var b=0;var a=this;while(a.parentNode){++b;a=a.parentNode}return b},setOwnerTree:function(a,b){if(a!=this.ownerTree){if(this.ownerTree){this.ownerTree.unregisterNode(this)}this.ownerTree=a;if(b!==true){Ext.each(this.childNodes,function(c){c.setOwnerTree(a)})}if(a){a.registerNode(this)}}},setId:function(b){if(b!==this.id){var a=this.ownerTree;if(a){a.unregisterNode(this)}this.id=this.attributes.id=b;if(a){a.registerNode(this)}this.onIdChange(b)}},onIdChange:Ext.emptyFn,getPath:function(c){c=c||\"id\";var e=this.parentNode;var a=[this.attributes[c]];while(e){a.unshift(e.attributes[c]);e=e.parentNode}var d=this.getOwnerTree().pathSeparator;return d+a.join(d)},bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.parentNode}},cascade:function(g,e,b){if(g.apply(e||this,b||[this])!==false){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].cascade(g,e,b)}}},eachChild:function(g,e,b){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){if(g.apply(e||d[c],b||[d[c]])===false){break}}},findChild:function(b,c,a){return this.findChildBy(function(){return this.attributes[b]==c},null,a)},findChildBy:function(h,g,b){var e=this.childNodes,a=e.length,d=0,j,c;for(;d<a;d++){j=e[d];if(h.call(g||j,j)===true){return j}else{if(b){c=j.findChildBy(h,g,b);if(c!=null){return c}}}}return null},sort:function(e,d){var c=this.childNodes;var a=c.length;if(a>0){var g=d?function(){e.apply(d,arguments)}:e;c.sort(g);for(var b=0;b<a;b++){var h=c[b];h.previousSibling=c[b-1];h.nextSibling=c[b+1];if(b===0){this.setFirstChild(h)}if(b==a-1){this.setLastChild(h)}}}},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var b=this.parentNode;while(b){if(b==a){return true}b=b.parentNode}return false},toString:function(){return\"[Node\"+(this.id?\" \"+this.id:\"\")+\"]\"}});Ext.tree.TreeNode=Ext.extend(Ext.data.Node,{constructor:function(a){a=a||{};if(Ext.isString(a)){a={text:a}}this.childrenRendered=false;this.rendered=false;Ext.tree.TreeNode.superclass.constructor.call(this,a);this.expanded=a.expanded===true;this.isTarget=a.isTarget!==false;this.draggable=a.draggable!==false&&a.allowDrag!==false;this.allowChildren=a.allowChildren!==false&&a.allowDrop!==false;this.text=a.text;this.disabled=a.disabled===true;this.hidden=a.hidden===true;this.addEvents(\"textchange\",\"beforeexpand\",\"beforecollapse\",\"expand\",\"disabledchange\",\"collapse\",\"beforeclick\",\"click\",\"checkchange\",\"beforedblclick\",\"dblclick\",\"contextmenu\",\"beforechildrenrendered\");var b=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new b(this)},preventHScroll:true,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var a;return this.loader||((a=this.getOwnerTree())&&a.loader?a.loader:(this.loader=new Ext.tree.TreeLoader()))},setFirstChild:function(a){var b=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,a);if(this.childrenRendered&&b&&a!=b){b.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},setLastChild:function(b){var a=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,b);if(this.childrenRendered&&a&&b!=a){a.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},appendChild:function(b){if(!b.render&&!Ext.isArray(b)){b=this.getLoader().createNode(b)}var a=Ext.tree.TreeNode.superclass.appendChild.call(this,b);if(a&&this.childrenRendered){a.render()}this.ui.updateExpandIcon();return a},removeChild:function(b,a){this.ownerTree.getSelectionModel().unselect(b);Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(!a){var c=b.ui.rendered;if(c){b.ui.remove()}if(c&&this.childNodes.length<1){this.collapse(false,false)}else{this.ui.updateExpandIcon()}if(!this.firstChild&&!this.isHiddenRoot()){this.childrenRendered=false}}return b},insertBefore:function(c,a){if(!c.render){c=this.getLoader().createNode(c)}var b=Ext.tree.TreeNode.superclass.insertBefore.call(this,c,a);if(b&&a&&this.childrenRendered){c.render()}this.ui.updateExpandIcon();return b},setText:function(b){var a=this.text;this.text=this.attributes.text=b;if(this.rendered){this.ui.onTextChange(this,b,a)}this.fireEvent(\"textchange\",this,b,a)},setIconCls:function(b){var a=this.attributes.iconCls;this.attributes.iconCls=b;if(this.rendered){this.ui.onIconClsChange(this,b,a)}},setTooltip:function(a,b){this.attributes.qtip=a;this.attributes.qtipTitle=b;if(this.rendered){this.ui.onTipChange(this,a,b)}},setIcon:function(a){this.attributes.icon=a;if(this.rendered){this.ui.onIconChange(this,a)}},setHref:function(a,b){this.attributes.href=a;this.attributes.hrefTarget=b;if(this.rendered){this.ui.onHrefChange(this,a,b)}},setCls:function(b){var a=this.attributes.cls;this.attributes.cls=b;if(this.rendered){this.ui.onClsChange(this,b,a)}},select:function(){var a=this.getOwnerTree();if(a){a.getSelectionModel().select(this)}},unselect:function(a){var b=this.getOwnerTree();if(b){b.getSelectionModel().unselect(this,a)}},isSelected:function(){var a=this.getOwnerTree();return a?a.getSelectionModel().isSelected(this):false},expand:function(a,c,d,b){if(!this.expanded){if(this.fireEvent(\"beforeexpand\",this,a,c)===false){return}if(!this.childrenRendered){this.renderChildren()}this.expanded=true;if(!this.isHiddenRoot()&&(this.getOwnerTree().animate&&c!==false)||c){this.ui.animExpand(function(){this.fireEvent(\"expand\",this);this.runCallback(d,b||this,[this]);if(a===true){this.expandChildNodes(true,true)}}.createDelegate(this));return}else{this.ui.expand();this.fireEvent(\"expand\",this);this.runCallback(d,b||this,[this])}}else{this.runCallback(d,b||this,[this])}if(a===true){this.expandChildNodes(true)}},runCallback:function(a,c,b){if(Ext.isFunction(a)){a.apply(c,b)}},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(b,g,h,e){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent(\"beforecollapse\",this,b,g)===false){return}this.expanded=false;if((this.getOwnerTree().animate&&g!==false)||g){this.ui.animCollapse(function(){this.fireEvent(\"collapse\",this);this.runCallback(h,e||this,[this]);if(b===true){this.collapseChildNodes(true)}}.createDelegate(this));return}else{this.ui.collapse();this.fireEvent(\"collapse\",this);this.runCallback(h,e||this,[this])}}else{if(!this.expanded){this.runCallback(h,e||this,[this])}}if(b===true){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].collapse(true,false)}}},delayedExpand:function(a){if(!this.expandProcId){this.expandProcId=this.expand.defer(a,this)}},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId)}this.expandProcId=false},toggle:function(){if(this.expanded){this.collapse()}else{this.expand()}},ensureVisible:function(c,b){var a=this.getOwnerTree();a.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),false,function(){var d=a.getNodeById(this.id);a.getTreeEl().scrollChildIntoView(d.ui.anchor);this.runCallback(c,b||this,[this])}.createDelegate(this))},expandChildNodes:function(b,e){var d=this.childNodes,c,a=d.length;for(c=0;c<a;c++){d[c].expand(b,e)}},collapseChildNodes:function(b){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].collapse(b)}},disable:function(){this.disabled=true;this.unselect();if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,true)}this.fireEvent(\"disabledchange\",this,true)},enable:function(){this.disabled=false;if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,false)}this.fireEvent(\"disabledchange\",this,false)},renderChildren:function(b){if(b!==false){this.fireEvent(\"beforechildrenrendered\",this)}var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].render(true)}this.childrenRendered=true},sort:function(e,d){Ext.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var c=this.childNodes;for(var b=0,a=c.length;b<a;b++){c[b].render(true)}}},render:function(a){this.ui.render(a);if(!this.rendered){this.getOwnerTree().registerNode(this);this.rendered=true;if(this.expanded){this.expanded=false;this.expand(false,false)}}},renderIndent:function(b,e){if(e){this.ui.childIndent=null}this.ui.renderIndent();if(b===true&&this.childrenRendered){var d=this.childNodes;for(var c=0,a=d.length;c<a;c++){d[c].renderIndent(true,e)}}},beginUpdate:function(){this.childrenRendered=false},endUpdate:function(){if(this.expanded&&this.rendered){this.renderChildren()}},destroy:function(a){if(a===true){this.unselect(true)}Ext.tree.TreeNode.superclass.destroy.call(this,a);Ext.destroy(this.ui,this.loader);this.ui=this.loader=null},onIdChange:function(a){this.ui.onIdChange(a)}});Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode;Ext.tree.AsyncTreeNode=function(a){this.loaded=a&&a.loaded===true;this.loading=false;Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments);this.addEvents(\"beforeload\",\"load\")};Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(b,e,h,c){if(this.loading){var g;var d=function(){if(!this.loading){clearInterval(g);this.expand(b,e,h,c)}}.createDelegate(this);g=setInterval(d,200);return}if(!this.loaded){if(this.fireEvent(\"beforeload\",this)===false){return}this.loading=true;this.ui.beforeLoad(this);var a=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(a){a.load(this,this.loadComplete.createDelegate(this,[b,e,h,c]),this);return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,b,e,h,c)},isLoading:function(){return this.loading},loadComplete:function(a,c,d,b){this.loading=false;this.loaded=true;this.ui.afterLoad(this);this.fireEvent(\"load\",this);this.expand(a,c,d,b)},isLoaded:function(){return this.loaded},hasChildNodes:function(){if(!this.isLeaf()&&!this.loaded){return true}else{return Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this)}},reload:function(b,a){this.collapse(false,false);while(this.firstChild){this.removeChild(this.firstChild).destroy()}this.childrenRendered=false;this.loaded=false;if(this.isHiddenRoot()){this.expanded=false}this.expand(false,false,b,a)}});Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode;Ext.tree.TreeNodeUI=Ext.extend(Object,{constructor:function(a){Ext.apply(this,{node:a,rendered:false,animating:false,wasLeaf:true,ecc:\"x-tree-ec-icon x-tree-elbow\",emptyIcon:Ext.BLANK_IMAGE_URL})},removeChild:function(a){if(this.rendered){this.ctNode.removeChild(a.ui.getEl())}},beforeLoad:function(){this.addClass(\"x-tree-node-loading\")},afterLoad:function(){this.removeClass(\"x-tree-node-loading\")},onTextChange:function(b,c,a){if(this.rendered){this.textNode.innerHTML=c}},onIconClsChange:function(c,a,b){if(this.rendered){Ext.fly(this.iconNode).replaceClass(b,a)}},onIconChange:function(b,a){if(this.rendered){var c=Ext.isEmpty(a);this.iconNode.src=c?this.emptyIcon:a;Ext.fly(this.iconNode)[c?\"removeClass\":\"addClass\"](\"x-tree-node-inline-icon\")}},onTipChange:function(b,c,d){if(this.rendered){var a=Ext.isDefined(d);if(this.textNode.setAttributeNS){this.textNode.setAttributeNS(\"ext\",\"qtip\",c);if(a){this.textNode.setAttributeNS(\"ext\",\"qtitle\",d)}}else{this.textNode.setAttribute(\"ext:qtip\",c);if(a){this.textNode.setAttribute(\"ext:qtitle\",d)}}}},onHrefChange:function(b,a,c){if(this.rendered){this.anchor.href=this.getHref(a);if(Ext.isDefined(c)){this.anchor.target=c}}},onClsChange:function(c,a,b){if(this.rendered){Ext.fly(this.elNode).replaceClass(b,a)}},onDisableChange:function(a,b){this.disabled=b;if(this.checkbox){this.checkbox.disabled=b}this[b?\"addClass\":\"removeClass\"](\"x-tree-node-disabled\")},onSelectedChange:function(a){if(a){this.focus();this.addClass(\"x-tree-selected\")}else{this.removeClass(\"x-tree-selected\")}},onMove:function(a,h,e,g,d,b){this.childIndent=null;if(this.rendered){var i=g.ui.getContainer();if(!i){this.holder=document.createElement(\"div\");this.holder.appendChild(this.wrap);return}var c=b?b.ui.getEl():null;if(c){i.insertBefore(this.wrap,c)}else{i.appendChild(this.wrap)}this.node.renderIndent(true,e!=g)}},addClass:function(a){if(this.elNode){Ext.fly(this.elNode).addClass(a)}},removeClass:function(a){if(this.elNode){Ext.fly(this.elNode).removeClass(a)}},remove:function(){if(this.rendered){this.holder=document.createElement(\"div\");this.holder.appendChild(this.wrap)}},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on(\"move\",this.onMove,this);if(this.node.disabled){this.onDisableChange(this.node,true)}if(this.node.hidden){this.hide()}var b=this.node.getOwnerTree();var a=b.enableDD||b.enableDrag||b.enableDrop;if(a&&(!this.node.isRoot||b.rootVisible)){Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:false})}},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=true;if(this.wrap){this.wrap.style.display=\"none\"}},show:function(){this.node.hidden=false;if(this.wrap){this.wrap.style.display=\"\"}},onContextMenu:function(a){if(this.node.hasListener(\"contextmenu\")||this.node.getOwnerTree().hasListener(\"contextmenu\")){a.preventDefault();this.focus();this.fireEvent(\"contextmenu\",this.node,a)}},onClick:function(c){if(this.dropping){c.stopEvent();return}if(this.fireEvent(\"beforeclick\",this.node,c)!==false){var b=c.getTarget(\"a\");if(!this.disabled&&this.node.attributes.href&&b){this.fireEvent(\"click\",this.node,c);return}else{if(b&&c.ctrlKey){c.stopEvent()}}c.preventDefault();if(this.disabled){return}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent(\"click\",this.node,c)}else{c.stopEvent()}},onDblClick:function(a){a.preventDefault();if(this.disabled){return}if(this.fireEvent(\"beforedblclick\",this.node,a)!==false){if(this.checkbox){this.toggleCheck()}if(!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent(\"dblclick\",this.node,a)}},onOver:function(a){this.addClass(\"x-tree-node-over\")},onOut:function(a){this.removeClass(\"x-tree-node-over\")},onCheckChange:function(){var a=this.checkbox.checked;this.checkbox.defaultChecked=a;this.node.attributes.checked=a;this.fireEvent(\"checkchange\",this.node,a)},ecClick:function(a){if(!this.animating&&this.node.isExpandable()){this.node.toggle()}},startDrop:function(){this.dropping=true},endDrop:function(){setTimeout(function(){this.dropping=false}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=\"\"},focus:function(){if(!this.node.preventHScroll){try{this.anchor.focus()}catch(c){}}else{try{var b=this.node.getOwnerTree().getTreeEl().dom;var a=b.scrollLeft;this.anchor.focus();b.scrollLeft=a}catch(c){}}},toggleCheck:function(b){var a=this.checkbox;if(a){a.checked=(b===undefined?!a.checked:b);this.onCheckChange()}},blur:function(){try{this.anchor.blur()}catch(a){}},animExpand:function(b){var a=Ext.get(this.ctNode);a.stopFx();if(!this.node.isExpandable()){this.updateExpandIcon();this.ctNode.style.display=\"\";Ext.callback(b);return}this.animating=true;this.updateExpandIcon();a.slideIn(\"t\",{callback:function(){this.animating=false;Ext.callback(b)},scope:this,duration:this.node.ownerTree.duration||0.25})},highlight:function(){var a=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(a.hlColor||\"C3DAF9\",{endColor:a.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display=\"none\"},animCollapse:function(b){var a=Ext.get(this.ctNode);a.enableDisplayMode(\"block\");a.stopFx();this.animating=true;this.updateExpandIcon();a.slideOut(\"t\",{callback:function(){this.animating=false;Ext.callback(b)},scope:this,duration:this.node.ownerTree.duration||0.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(a){a.appendChild(this.elNode.cloneNode(true))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(c){var e=this.node,b=e.attributes;var d=e.parentNode?e.parentNode.ui.getContainer():e.ownerTree.innerCt.dom;if(!this.rendered){this.rendered=true;this.renderElements(e,b,d,c);if(b.qtip){this.onTipChange(e,b.qtip,b.qtipTitle)}else{if(b.qtipCfg){b.qtipCfg.target=Ext.id(this.textNode);Ext.QuickTips.register(b.qtipCfg)}}this.initEvents();if(!this.node.expanded){this.updateExpandIcon(true)}}else{if(c===true){d.appendChild(this.wrap)}}},renderElements:function(e,k,j,l){this.indentMarkup=e.parentNode?e.parentNode.ui.getChildIndent():\"\";var g=Ext.isBoolean(k.checked),b,c=this.getHref(k.href),d=['<li class=\"x-tree-node\"><div ext:tree-node-id=\"',e.id,'\" class=\"x-tree-node-el x-tree-node-leaf x-unselectable ',k.cls,'\" unselectable=\"on\">','<span class=\"x-tree-node-indent\">',this.indentMarkup,\"</span>\",'<img alt=\"\" src=\"',this.emptyIcon,'\" class=\"x-tree-ec-icon x-tree-elbow\" />','<img alt=\"\" src=\"',k.icon||this.emptyIcon,'\" class=\"x-tree-node-icon',(k.icon?\" x-tree-node-inline-icon\":\"\"),(k.iconCls?\" \"+k.iconCls:\"\"),'\" unselectable=\"on\" />',g?('<input class=\"x-tree-node-cb\" type=\"checkbox\" '+(k.checked?'checked=\"checked\" />':\"/>\")):\"\",'<a hidefocus=\"on\" class=\"x-tree-node-anchor\" href=\"',c,'\" tabIndex=\"1\" ',k.hrefTarget?' target=\"'+k.hrefTarget+'\"':\"\",'><span unselectable=\"on\">',e.text,\"</span></a></div>\",'<ul class=\"x-tree-node-ct\" style=\"display:none;\"></ul>',\"</li>\"].join(\"\");if(l!==true&&e.nextSibling&&(b=e.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml(\"beforeBegin\",b,d)}else{this.wrap=Ext.DomHelper.insertHtml(\"beforeEnd\",j,d)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var i=this.elNode.childNodes;this.indentNode=i[0];this.ecNode=i[1];this.iconNode=i[2];var h=3;if(g){this.checkbox=i[3];this.checkbox.defaultChecked=this.checkbox.checked;h++}this.anchor=i[h];this.textNode=i[h].firstChild},getHref:function(a){return Ext.isEmpty(a)?(Ext.isGecko?\"\":\"#\"):a},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:false},updateExpandIcon:function(){if(this.rendered){var g=this.node,d,c,a=g.isLast()?\"x-tree-elbow-end\":\"x-tree-elbow\",e=g.hasChildNodes();if(e||g.attributes.expandable){if(g.expanded){a+=\"-minus\";d=\"x-tree-node-collapsed\";c=\"x-tree-node-expanded\"}else{a+=\"-plus\";d=\"x-tree-node-expanded\";c=\"x-tree-node-collapsed\"}if(this.wasLeaf){this.removeClass(\"x-tree-node-leaf\");this.wasLeaf=false}if(this.c1!=d||this.c2!=c){Ext.fly(this.elNode).replaceClass(d,c);this.c1=d;this.c2=c}}else{if(!this.wasLeaf){Ext.fly(this.elNode).replaceClass(\"x-tree-node-expanded\",\"x-tree-node-collapsed\");delete this.c1;delete this.c2;this.wasLeaf=true}}var b=\"x-tree-ec-icon \"+a;if(this.ecc!=b){this.ecNode.className=b;this.ecc=b}}},onIdChange:function(a){if(this.rendered){this.elNode.setAttribute(\"ext:tree-node-id\",a)}},getChildIndent:function(){if(!this.childIndent){var a=[],b=this.node;while(b){if(!b.isRoot||(b.isRoot&&b.ownerTree.rootVisible)){if(!b.isLast()){a.unshift('<img alt=\"\" src=\"'+this.emptyIcon+'\" class=\"x-tree-elbow-line\" />')}else{a.unshift('<img alt=\"\" src=\"'+this.emptyIcon+'\" class=\"x-tree-icon\" />')}}b=b.parentNode}this.childIndent=a.join(\"\")}return this.childIndent},renderIndent:function(){if(this.rendered){var a=\"\",b=this.node.parentNode;if(b){a=b.ui.getChildIndent()}if(this.indentMarkup!=a){this.indentNode.innerHTML=a;this.indentMarkup=a}this.updateExpandIcon()}},destroy:function(){if(this.elNode){Ext.dd.Registry.unregister(this.elNode.id)}Ext.each([\"textnode\",\"anchor\",\"checkbox\",\"indentNode\",\"ecNode\",\"iconNode\",\"elNode\",\"ctNode\",\"wrap\",\"holder\"],function(a){if(this[a]){Ext.fly(this[a]).remove();delete this[a]}},this);delete this.node}});Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var a=this.node.ownerTree.innerCt.dom;this.node.expanded=true;a.innerHTML='<div class=\"x-tree-root-node\"></div>';this.wrap=this.ctNode=a.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeLoader=function(a){this.baseParams={};Ext.apply(this,a);this.addEvents(\"beforeload\",\"load\",\"loadexception\");Ext.tree.TreeLoader.superclass.constructor.call(this);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\\s,|]/)}};Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:true,paramOrder:undefined,paramsAsHash:false,nodeParameter:\"node\",directFn:undefined,load:function(b,c,a){if(this.clearOnLoad){while(b.firstChild){b.removeChild(b.firstChild)}}if(this.doPreload(b)){this.runCallback(c,a||b,[b])}else{if(this.directFn||this.dataUrl||this.url){this.requestData(b,c,a||b)}}},doPreload:function(d){if(d.attributes.children){if(d.childNodes.length<1){var c=d.attributes.children;d.beginUpdate();for(var b=0,a=c.length;b<a;b++){var e=d.appendChild(this.createNode(c[b]));if(this.preloadChildren){this.doPreload(e)}}d.endUpdate()}return true}return false},getParams:function(g){var e=Ext.apply({},this.baseParams),h=this.nodeParameter,b=this.paramOrder;h&&(e[h]=g.id);if(this.directFn){var c=[g.id];if(b){if(h&&b.indexOf(h)>-1){c=[]}for(var d=0,a=b.length;d<a;d++){c.push(e[b[d]])}}else{if(this.paramsAsHash){c=[e]}}return c}else{return e}},requestData:function(c,d,b){if(this.fireEvent(\"beforeload\",this,c,d)!==false){if(this.directFn){var a=this.getParams(c);a.push(this.processDirectResponse.createDelegate(this,[{callback:d,node:c,scope:b}],true));this.directFn.apply(window,a)}else{this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:d,node:c,scope:b},params:this.getParams(c)})}}else{this.runCallback(d,b||c,[])}},processDirectResponse:function(a,b,c){if(b.status){this.handleResponse({responseData:Ext.isArray(a)?a:null,responseText:a,argument:c})}else{this.handleFailure({argument:c})}},runCallback:function(a,c,b){if(Ext.isFunction(a)){a.apply(c,b)}},isLoading:function(){return !!this.transId},abort:function(){if(this.isLoading()){Ext.Ajax.abort(this.transId)}},createNode:function(attr){if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false&&!attr.loader){attr.loader=this}if(Ext.isString(attr.uiProvider)){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}if(attr.nodeType){return new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr)}else{return attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)}},processResponse:function(d,c,k,l){var m=d.responseText;try{var a=d.responseData||Ext.decode(m);c.beginUpdate();for(var g=0,h=a.length;g<h;g++){var b=this.createNode(a[g]);if(b){c.appendChild(b)}}c.endUpdate();this.runCallback(k,l||c,[c])}catch(j){this.handleFailure(d)}},handleResponse:function(c){this.transId=false;var b=c.argument;this.processResponse(c,b.node,b.callback,b.scope);this.fireEvent(\"load\",this,b.node,c)},handleFailure:function(c){this.transId=false;var b=c.argument;this.fireEvent(\"loadexception\",this,b.node,c);this.runCallback(b.callback,b.scope||b.node,[b.node])},destroy:function(){this.abort();this.purgeListeners()}});Ext.tree.TreeFilter=function(a,b){this.tree=a;this.filtered={};Ext.apply(this,b)};Ext.tree.TreeFilter.prototype={clearBlank:false,reverse:false,autoClear:false,remove:false,filter:function(d,a,b){a=a||\"text\";var c;if(typeof d==\"string\"){var e=d.length;if(e==0&&this.clearBlank){this.clear();return}d=d.toLowerCase();c=function(g){return g.attributes[a].substr(0,e).toLowerCase()==d}}else{if(d.exec){c=function(g){return d.test(g.attributes[a])}}else{throw\"Illegal filter type, must be string or regex\"}}this.filterBy(c,null,b)},filterBy:function(d,c,b){b=b||this.tree.root;if(this.autoClear){this.clear()}var a=this.filtered,i=this.reverse;var e=function(k){if(k==b){return true}if(a[k.id]){return false}var j=d.call(c||k,k);if(!j||i){a[k.id]=k;k.ui.hide();return false}return true};b.cascade(e);if(this.remove){for(var h in a){if(typeof h!=\"function\"){var g=a[h];if(g&&g.parentNode){g.parentNode.removeChild(g)}}}}},clear:function(){var b=this.tree;var a=this.filtered;for(var d in a){if(typeof d!=\"function\"){var c=a[d];if(c){c.ui.show()}}}this.filtered={}}};Ext.tree.TreeSorter=Ext.extend(Object,{constructor:function(a,c){Ext.apply(this,c);a.on({scope:this,beforechildrenrendered:this.doSort,append:this.updateSort,insert:this.updateSort,textchange:this.updateSortParent});var e=this.dir&&this.dir.toLowerCase()==\"desc\",i=this.property||\"text\",d=this.sortType,h=this.folderSort,b=this.caseSensitive===true,g=this.leafAttr||\"leaf\";if(Ext.isString(d)){d=Ext.data.SortTypes[d]}this.sortFn=function(o,m){var k=o.attributes,j=m.attributes;if(h){if(k[g]&&!j[g]){return 1}if(!k[g]&&j[g]){return -1}}var n=k[i],l=j[i],q=d?d(n):(b?n:n.toUpperCase()),p=d?d(l):(b?l:l.toUpperCase());if(q<p){return e?1:-1}else{if(q>p){return e?-1:1}}return 0}},doSort:function(a){a.sort(this.sortFn)},updateSort:function(a,b){if(b.childrenRendered){this.doSort.defer(1,this,[b])}},updateSortParent:function(a){var b=a.parentNode;if(b&&b.childrenRendered){this.doSort.defer(1,this,[b])}}});if(Ext.dd.DropZone){Ext.tree.TreeDropZone=function(a,b){this.allowParentInsert=b.allowParentInsert||false;this.allowContainerDrop=b.allowContainerDrop||false;this.appendOnly=b.appendOnly||false;Ext.tree.TreeDropZone.superclass.constructor.call(this,a.getTreeEl(),b);this.tree=a;this.dragOverData={};this.lastInsertClass=\"x-tree-no-status\"};Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:\"TreeDD\",expandDelay:1000,expandNode:function(a){if(a.hasChildNodes()&&!a.isExpanded()){a.expand(false,null,this.triggerCacheRefresh.createDelegate(this))}},queueExpand:function(a){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[a])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},isValidDropPoint:function(a,k,i,d,c){if(!a||!c){return false}var g=a.node;var h=c.node;if(!(g&&g.isTarget&&k)){return false}if(k==\"append\"&&g.allowChildren===false){return false}if((k==\"above\"||k==\"below\")&&(g.parentNode&&g.parentNode.allowChildren===false)){return false}if(h&&(g==h||h.contains(g))){return false}var b=this.dragOverData;b.tree=this.tree;b.target=g;b.data=c;b.point=k;b.source=i;b.rawEvent=d;b.dropNode=h;b.cancel=false;var j=this.tree.fireEvent(\"nodedragover\",b);return b.cancel===false&&j!==false},getDropPoint:function(h,g,l){var m=g.node;if(m.isRoot){return m.allowChildren!==false?\"append\":false}var c=g.ddel;var o=Ext.lib.Dom.getY(c),j=o+c.offsetHeight;var i=Ext.lib.Event.getPageY(h);var k=m.allowChildren===false||m.isLeaf();if(this.appendOnly||m.parentNode.allowChildren===false){return k?false:\"append\"}var d=false;if(!this.allowParentInsert){d=m.hasChildNodes()&&m.isExpanded()}var a=(j-o)/(k?2:3);if(i>=o&&i<(o+a)){return\"above\"}else{if(!d&&(k||i>=j-a&&i<=j)){return\"below\"}else{return\"append\"}}},onNodeEnter:function(d,a,c,b){this.cancelExpand()},onContainerOver:function(a,c,b){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},\"append\",a,c,b)){return this.dropAllowed}return this.dropNotAllowed},onNodeOver:function(b,i,h,g){var k=this.getDropPoint(h,b,i);var c=b.node;if(!this.expandProcId&&k==\"append\"&&c.hasChildNodes()&&!b.node.isExpanded()){this.queueExpand(c)}else{if(k!=\"append\"){this.cancelExpand()}}var d=this.dropNotAllowed;if(this.isValidDropPoint(b,k,i,h,g)){if(k){var a=b.ddel;var j;if(k==\"above\"){d=b.node.isFirst()?\"x-tree-drop-ok-above\":\"x-tree-drop-ok-between\";j=\"x-tree-drag-insert-above\"}else{if(k==\"below\"){d=b.node.isLast()?\"x-tree-drop-ok-below\":\"x-tree-drop-ok-between\";j=\"x-tree-drag-insert-below\"}else{d=\"x-tree-drop-ok-append\";j=\"x-tree-drag-append\"}}if(this.lastInsertClass!=j){Ext.fly(a).replaceClass(this.lastInsertClass,j);this.lastInsertClass=j}}}return d},onNodeOut:function(d,a,c,b){this.cancelExpand();this.removeDropIndicators(d)},onNodeDrop:function(i,b,h,d){var a=this.getDropPoint(h,i,b);var g=i.node;g.ui.startDrop();if(!this.isValidDropPoint(i,a,b,h,d)){g.ui.endDrop();return false}var c=d.node||(b.getTreeNode?b.getTreeNode(d,g,a,h):null);return this.processDrop(g,d,a,b,h,c)},onContainerDrop:function(a,g,c){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},\"append\",a,g,c)){var d=this.tree.getRootNode();d.ui.startDrop();var b=c.node||(a.getTreeNode?a.getTreeNode(c,d,\"append\",g):null);return this.processDrop(d,c,\"append\",a,g,b)}return false},processDrop:function(j,h,b,a,i,d){var g={tree:this.tree,target:j,data:h,point:b,source:a,rawEvent:i,dropNode:d,cancel:!d,dropStatus:false};var c=this.tree.fireEvent(\"beforenodedrop\",g);if(c===false||g.cancel===true||!g.dropNode){j.ui.endDrop();return g.dropStatus}j=g.target;if(b==\"append\"&&!j.isExpanded()){j.expand(false,null,function(){this.completeDrop(g)}.createDelegate(this))}else{this.completeDrop(g)}return true},completeDrop:function(h){var d=h.dropNode,e=h.point,c=h.target;if(!Ext.isArray(d)){d=[d]}var g;for(var b=0,a=d.length;b<a;b++){g=d[b];if(e==\"above\"){c.parentNode.insertBefore(g,c)}else{if(e==\"below\"){c.parentNode.insertBefore(g,c.nextSibling)}else{c.appendChild(g)}}}g.ui.focus();if(Ext.enableFx&&this.tree.hlDrop){g.ui.highlight()}c.ui.endDrop();this.tree.fireEvent(\"nodedrop\",h)},afterNodeMoved:function(a,c,g,d,b){if(Ext.enableFx&&this.tree.hlDrop){b.ui.focus();b.ui.highlight()}this.tree.fireEvent(\"nodedrop\",this.tree,d,c,a,g)},getTree:function(){return this.tree},removeDropIndicators:function(b){if(b&&b.ddel){var a=b.ddel;Ext.fly(a).removeClass([\"x-tree-drag-insert-above\",\"x-tree-drag-insert-below\",\"x-tree-drag-append\"]);this.lastInsertClass=\"_noclass\"}},beforeDragDrop:function(b,a,c){this.cancelExpand();return true},afterRepair:function(a){if(a&&Ext.enableFx){a.node.ui.highlight()}this.hideProxy()}})}if(Ext.dd.DragZone){Ext.tree.TreeDragZone=function(a,b){Ext.tree.TreeDragZone.superclass.constructor.call(this,a.innerCt,b);this.tree=a};Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:\"TreeDD\",onBeforeDrag:function(a,b){var c=a.node;return c&&c.draggable&&!c.disabled},onInitDrag:function(b){var a=this.dragData;this.tree.getSelectionModel().select(a.node);this.tree.eventModel.disable();this.proxy.update(\"\");a.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent(\"startdrag\",this.tree,a.node,b)},getRepairXY:function(b,a){return a.node.ui.getDDRepairXY()},onEndDrag:function(a,b){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent(\"enddrag\",this.tree,a.node,b)},onValidDrop:function(a,b,c){this.tree.fireEvent(\"dragdrop\",this.tree,this.dragData.node,a,b);this.hideProxy()},beforeInvalidDrop:function(a,c){var b=this.tree.getSelectionModel();b.clearSelections();b.select(this.dragData.node)},afterRepair:function(){if(Ext.enableFx&&this.tree.hlDrop){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||\"c3daf9\")}this.dragging=false}})}Ext.tree.TreeEditor=function(a,c,b){c=c||{};var d=c.events?c:new Ext.form.TextField(c);Ext.tree.TreeEditor.superclass.constructor.call(this,d,b);this.tree=a;if(!a.rendered){a.on(\"render\",this.initEditor,this)}else{this.initEditor(a)}};Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:\"l-l\",autoSize:false,hideEl:false,cls:\"x-small-editor x-tree-editor\",shim:false,shadow:\"frame\",maxWidth:250,editDelay:350,initEditor:function(a){a.on({scope:this,beforeclick:this.beforeNodeClick,dblclick:this.onNodeDblClick});this.on({scope:this,complete:this.updateNode,beforestartedit:this.fitToTree,specialkey:this.onSpecialKey});this.on(\"startedit\",this.bindScroll,this,{delay:10})},fitToTree:function(b,c){var e=this.tree.getTreeEl().dom,d=c.dom;if(e.scrollLeft>d.offsetLeft){e.scrollLeft=d.offsetLeft}var a=Math.min(this.maxWidth,(e.clientWidth>20?e.clientWidth:e.offsetWidth)-Math.max(0,d.offsetLeft-e.scrollLeft)-5);this.setSize(a,\"\")},triggerEdit:function(a,c){this.completeEdit();if(a.attributes.editable!==false){this.editNode=a;if(this.tree.autoScroll){Ext.fly(a.ui.getEl()).scrollIntoView(this.tree.body)}var b=a.text||\"\";if(!Ext.isGecko&&Ext.isEmpty(a.text)){a.setText(\"&#160;\")}this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[a.ui.textNode,b]);return false}},bindScroll:function(){this.tree.getTreeEl().on(\"scroll\",this.cancelEdit,this)},beforeNodeClick:function(a,b){clearTimeout(this.autoEditTimer);if(this.tree.getSelectionModel().isSelected(a)){b.stopEvent();return this.triggerEdit(a)}},onNodeDblClick:function(a,b){clearTimeout(this.autoEditTimer)},updateNode:function(a,b){this.tree.getTreeEl().un(\"scroll\",this.cancelEdit,this);this.editNode.setText(b)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this);if(this.editNode){this.editNode.ui.focus.defer(50,this.editNode.ui)}},onSpecialKey:function(c,b){var a=b.getKey();if(a==b.ESC){b.stopEvent();this.cancelEdit()}else{if(a==b.ENTER&&!b.hasModifier()){b.stopEvent();this.completeEdit()}}},onDestroy:function(){clearTimeout(this.autoEditTimer);Ext.tree.TreeEditor.superclass.onDestroy.call(this);var a=this.tree;a.un(\"beforeclick\",this.beforeNodeClick,this);a.un(\"dblclick\",this.onNodeDblClick,this)}});\n 17297  /* SWFObject v2.2 <http://code.google.com/p/swfobject/> \n 17298      is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> \n 17299  */\n 17300: var swfobject=function(){var E=\"undefined\",s=\"object\",T=\"Shockwave Flash\",X=\"ShockwaveFlash.ShockwaveFlash\",r=\"application/x-shockwave-flash\",S=\"SWFObjectExprInst\",y=\"onreadystatechange\",P=window,k=document,u=navigator,U=false,V=[i],p=[],O=[],J=[],m,R,F,C,K=false,a=false,o,H,n=true,N=function(){var ab=typeof k.getElementById!=E&&typeof k.getElementsByTagName!=E&&typeof k.createElement!=E,ai=u.userAgent.toLowerCase(),Z=u.platform.toLowerCase(),af=Z?(/win/).test(Z):/win/.test(ai),ad=Z?(/mac/).test(Z):/mac/.test(ai),ag=/webkit/.test(ai)?parseFloat(ai.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/,\"$1\")):false,Y=!+\"\\v1\",ah=[0,0,0],ac=null;if(typeof u.plugins!=E&&typeof u.plugins[T]==s){ac=u.plugins[T].description;if(ac&&!(typeof u.mimeTypes!=E&&u.mimeTypes[r]&&!u.mimeTypes[r].enabledPlugin)){U=true;Y=false;ac=ac.replace(/^.*\\s+(\\S+\\s+\\S+$)/,\"$1\");ah[0]=parseInt(ac.replace(/^(.*)\\..*$/,\"$1\"),10);ah[1]=parseInt(ac.replace(/^.*\\.(.*)\\s.*$/,\"$1\"),10);ah[2]=/[a-zA-Z]/.test(ac)?parseInt(ac.replace(/^.*[a-zA-Z]+(.*)$/,\"$1\"),10):0}}else{if(typeof P.ActiveXObject!=E){try{var ae=new ActiveXObject(X);if(ae){ac=ae.GetVariable(\"$version\");if(ac){Y=true;ac=ac.split(\" \")[1].split(\",\");ah=[parseInt(ac[0],10),parseInt(ac[1],10),parseInt(ac[2],10)]}}}catch(aa){}}}return{w3:ab,pv:ah,wk:ag,ie:Y,win:af,mac:ad}}(),l=function(){if(!N.w3){return}if((typeof k.readyState!=E&&k.readyState==\"complete\")||(typeof k.readyState==E&&(k.getElementsByTagName(\"body\")[0]||k.body))){g()}if(!K){if(typeof k.addEventListener!=E){k.addEventListener(\"DOMContentLoaded\",g,false)}if(N.ie&&N.win){k.attachEvent(y,function(){if(k.readyState==\"complete\"){k.detachEvent(y,arguments.callee);g()}});if(P==top){(function(){if(K){return}try{k.documentElement.doScroll(\"left\")}catch(Y){setTimeout(arguments.callee,0);return}g()})()}}if(N.wk){(function(){if(K){return}if(!(/loaded|complete/).test(k.readyState)){setTimeout(arguments.callee,0);return}g()})()}t(g)}}();function g(){if(K){return}try{var aa=k.getElementsByTagName(\"body\")[0].appendChild(D(\"span\"));aa.parentNode.removeChild(aa)}catch(ab){return}K=true;var Y=V.length;for(var Z=0;Z<Y;Z++){V[Z]()}}function L(Y){if(K){Y()}else{V[V.length]=Y}}function t(Z){if(typeof P.addEventListener!=E){P.addEventListener(\"load\",Z,false)}else{if(typeof k.addEventListener!=E){k.addEventListener(\"load\",Z,false)}else{if(typeof P.attachEvent!=E){j(P,\"onload\",Z)}else{if(typeof P.onload==\"function\"){var Y=P.onload;P.onload=function(){Y();Z()}}else{P.onload=Z}}}}}function i(){if(U){W()}else{I()}}function W(){var Y=k.getElementsByTagName(\"body\")[0];var ab=D(s);ab.setAttribute(\"type\",r);var aa=Y.appendChild(ab);if(aa){var Z=0;(function(){if(typeof aa.GetVariable!=E){var ac=aa.GetVariable(\"$version\");if(ac){ac=ac.split(\" \")[1].split(\",\");N.pv=[parseInt(ac[0],10),parseInt(ac[1],10),parseInt(ac[2],10)]}}else{if(Z<10){Z++;setTimeout(arguments.callee,10);return}}Y.removeChild(ab);aa=null;I()})()}else{I()}}function I(){var ah=p.length;if(ah>0){for(var ag=0;ag<ah;ag++){var Z=p[ag].id;var ac=p[ag].callbackFn;var ab={success:false,id:Z};if(N.pv[0]>0){var af=c(Z);if(af){if(G(p[ag].swfVersion)&&!(N.wk&&N.wk<312)){x(Z,true);if(ac){ab.success=true;ab.ref=A(Z);ac(ab)}}else{if(p[ag].expressInstall&&B()){var aj={};aj.data=p[ag].expressInstall;aj.width=af.getAttribute(\"width\")||\"0\";aj.height=af.getAttribute(\"height\")||\"0\";if(af.getAttribute(\"class\")){aj.styleclass=af.getAttribute(\"class\")}if(af.getAttribute(\"align\")){aj.align=af.getAttribute(\"align\")}var ai={};var Y=af.getElementsByTagName(\"param\");var ad=Y.length;for(var ae=0;ae<ad;ae++){if(Y[ae].getAttribute(\"name\").toLowerCase()!=\"movie\"){ai[Y[ae].getAttribute(\"name\")]=Y[ae].getAttribute(\"value\")}}Q(aj,ai,Z,ac)}else{q(af);if(ac){ac(ab)}}}}}else{x(Z,true);if(ac){var aa=A(Z);if(aa&&typeof aa.SetVariable!=E){ab.success=true;ab.ref=aa}ac(ab)}}}}}function A(ab){var Y=null;var Z=c(ab);if(Z&&Z.nodeName==\"OBJECT\"){if(typeof Z.SetVariable!=E){Y=Z}else{var aa=Z.getElementsByTagName(s)[0];if(aa){Y=aa}}}return Y}function B(){return !a&&G(\"6.0.65\")&&(N.win||N.mac)&&!(N.wk&&N.wk<312)}function Q(ab,ac,Y,aa){a=true;F=aa||null;C={success:false,id:Y};var af=c(Y);if(af){if(af.nodeName==\"OBJECT\"){m=h(af);R=null}else{m=af;R=Y}ab.id=S;if(typeof ab.width==E||(!(/%$/).test(ab.width)&&parseInt(ab.width,10)<310)){ab.width=\"310\"}if(typeof ab.height==E||(!(/%$/).test(ab.height)&&parseInt(ab.height,10)<137)){ab.height=\"137\"}k.title=k.title.slice(0,47)+\" - Flash Player Installation\";var ae=N.ie&&N.win?\"ActiveX\":\"PlugIn\",ad=\"MMredirectURL=\"+P.location.toString().replace(/&/g,\"%26\")+\"&MMplayerType=\"+ae+\"&MMdoctitle=\"+k.title;if(typeof ac.flashvars!=E){ac.flashvars+=\"&\"+ad}else{ac.flashvars=ad}if(N.ie&&N.win&&af.readyState!=4){var Z=D(\"div\");Y+=\"SWFObjectNew\";Z.setAttribute(\"id\",Y);af.parentNode.insertBefore(Z,af);af.style.display=\"none\";(function(){if(af.readyState==4){af.parentNode.removeChild(af)}else{setTimeout(arguments.callee,10)}})()}v(ab,ac,Y)}}function q(Z){if(N.ie&&N.win&&Z.readyState!=4){var Y=D(\"div\");Z.parentNode.insertBefore(Y,Z);Y.parentNode.replaceChild(h(Z),Y);Z.style.display=\"none\";(function(){if(Z.readyState==4){Z.parentNode.removeChild(Z)}else{setTimeout(arguments.callee,10)}})()}else{Z.parentNode.replaceChild(h(Z),Z)}}function h(ad){var ab=D(\"div\");if(N.win&&N.ie){ab.innerHTML=ad.innerHTML}else{var Z=ad.getElementsByTagName(s)[0];if(Z){var ae=Z.childNodes;if(ae){var Y=ae.length;for(var aa=0;aa<Y;aa++){if(!(ae[aa].nodeType==1&&ae[aa].nodeName==\"PARAM\")&&!(ae[aa].nodeType==8)){ab.appendChild(ae[aa].cloneNode(true))}}}}}return ab}function v(aj,ah,Z){var Y,ab=c(Z);if(N.wk&&N.wk<312){return Y}if(ab){if(typeof aj.id==E){aj.id=Z}if(N.ie&&N.win){var ai=\"\";for(var af in aj){if(aj[af]!=Object.prototype[af]){if(af.toLowerCase()==\"data\"){ah.movie=aj[af]}else{if(af.toLowerCase()==\"styleclass\"){ai+=' class=\"'+aj[af]+'\"'}else{if(af.toLowerCase()!=\"classid\"){ai+=\" \"+af+'=\"'+aj[af]+'\"'}}}}}var ag=\"\";for(var ae in ah){if(ah[ae]!=Object.prototype[ae]){ag+='<param name=\"'+ae+'\" value=\"'+ah[ae]+'\" />'}}ab.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"'+ai+\">\"+ag+\"</object>\";O[O.length]=aj.id;Y=c(aj.id)}else{var aa=D(s);aa.setAttribute(\"type\",r);for(var ad in aj){if(aj[ad]!=Object.prototype[ad]){if(ad.toLowerCase()==\"styleclass\"){aa.setAttribute(\"class\",aj[ad])}else{if(ad.toLowerCase()!=\"classid\"){aa.setAttribute(ad,aj[ad])}}}}for(var ac in ah){if(ah[ac]!=Object.prototype[ac]&&ac.toLowerCase()!=\"movie\"){e(aa,ac,ah[ac])}}ab.parentNode.replaceChild(aa,ab);Y=aa}}return Y}function e(aa,Y,Z){var ab=D(\"param\");ab.setAttribute(\"name\",Y);ab.setAttribute(\"value\",Z);aa.appendChild(ab)}function z(Z){var Y=c(Z);if(Y&&Y.nodeName==\"OBJECT\"){if(N.ie&&N.win){Y.style.display=\"none\";(function(){if(Y.readyState==4){b(Z)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.removeChild(Y)}}}function b(aa){var Z=c(aa);if(Z){for(var Y in Z){if(typeof Z[Y]==\"function\"){Z[Y]=null}}Z.parentNode.removeChild(Z)}}function c(aa){var Y=null;try{Y=k.getElementById(aa)}catch(Z){}return Y}function D(Y){return k.createElement(Y)}function j(aa,Y,Z){aa.attachEvent(Y,Z);J[J.length]=[aa,Y,Z]}function G(aa){var Z=N.pv,Y=aa.split(\".\");Y[0]=parseInt(Y[0],10);Y[1]=parseInt(Y[1],10)||0;Y[2]=parseInt(Y[2],10)||0;return(Z[0]>Y[0]||(Z[0]==Y[0]&&Z[1]>Y[1])||(Z[0]==Y[0]&&Z[1]==Y[1]&&Z[2]>=Y[2]))?true:false}function w(ad,Z,ae,ac){if(N.ie&&N.mac){return}var ab=k.getElementsByTagName(\"head\")[0];if(!ab){return}var Y=(ae&&typeof ae==\"string\")?ae:\"screen\";if(ac){o=null;H=null}if(!o||H!=Y){var aa=D(\"style\");aa.setAttribute(\"type\",\"text/css\");aa.setAttribute(\"media\",Y);o=ab.appendChild(aa);if(N.ie&&N.win&&typeof k.styleSheets!=E&&k.styleSheets.length>0){o=k.styleSheets[k.styleSheets.length-1]}H=Y}if(N.ie&&N.win){if(o&&typeof o.addRule==s){o.addRule(ad,Z)}}else{if(o&&typeof k.createTextNode!=E){o.appendChild(k.createTextNode(ad+\" {\"+Z+\"}\"))}}}function x(aa,Y){if(!n){return}var Z=Y?\"visible\":\"hidden\";if(K&&c(aa)){c(aa).style.visibility=Z}else{w(\"#\"+aa,\"visibility:\"+Z)}}function M(Z){var aa=/[\\\\\\\"<>\\.;]/;var Y=aa.exec(Z)!=null;return Y&&typeof encodeURIComponent!=E?encodeURIComponent(Z):Z}var d=function(){if(N.ie&&N.win){window.attachEvent(\"onunload\",function(){var ad=J.length;for(var ac=0;ac<ad;ac++){J[ac][0].detachEvent(J[ac][1],J[ac][2])}var aa=O.length;for(var ab=0;ab<aa;ab++){z(O[ab])}for(var Z in N){N[Z]=null}N=null;for(var Y in swfobject){swfobject[Y]=null}swfobject=null;window.detachEvent(\"onunload\",arguments.callee)})}}();return{registerObject:function(ac,Y,ab,aa){if(N.w3&&ac&&Y){var Z={};Z.id=ac;Z.swfVersion=Y;Z.expressInstall=ab;Z.callbackFn=aa;p[p.length]=Z;x(ac,false)}else{if(aa){aa({success:false,id:ac})}}},getObjectById:function(Y){if(N.w3){return A(Y)}},embedSWF:function(ac,ai,af,ah,Z,ab,aa,ae,ag,ad){var Y={success:false,id:ai};if(N.w3&&!(N.wk&&N.wk<312)&&ac&&ai&&af&&ah&&Z){x(ai,false);L(function(){af+=\"\";ah+=\"\";var ak={};if(ag&&typeof ag===s){for(var am in ag){ak[am]=ag[am]}}ak.data=ac;ak.width=af;ak.height=ah;var an={};if(ae&&typeof ae===s){for(var al in ae){an[al]=ae[al]}}if(aa&&typeof aa===s){for(var aj in aa){if(typeof an.flashvars!=E){an.flashvars+=\"&\"+aj+\"=\"+aa[aj]}else{an.flashvars=aj+\"=\"+aa[aj]}}}if(G(Z)){var ao=v(ak,an,ai);if(ak.id==ai){x(ai,true)}Y.success=true;Y.ref=ao}else{if(ab&&B()){ak.data=ab;Q(ak,an,ai,ad);return}else{x(ai,true)}}if(ad){ad(Y)}})}else{if(ad){ad(Y)}}},switchOffAutoHideShow:function(){n=false},ua:N,getFlashPlayerVersion:function(){return{major:N.pv[0],minor:N.pv[1],release:N.pv[2]}},hasFlashPlayerVersion:G,createSWF:function(aa,Z,Y){if(N.w3){return v(aa,Z,Y)}else{return undefined}},showExpressInstall:function(aa,ab,Y,Z){if(N.w3&&B()){Q(aa,ab,Y,Z)}},removeSWF:function(Y){if(N.w3){z(Y)}},createCSS:function(ab,aa,Z,Y){if(N.w3){w(ab,aa,Z,Y)}},addDomLoadEvent:L,addLoadEvent:t,getQueryParamValue:function(ab){var aa=k.location.search||k.location.hash;if(aa){if(/\\?/.test(aa)){aa=aa.split(\"?\")[1]}if(ab==null){return M(aa)}var Z=aa.split(\"&\");for(var Y=0;Y<Z.length;Y++){if(Z[Y].substring(0,Z[Y].indexOf(\"=\"))==ab){return M(Z[Y].substring((Z[Y].indexOf(\"=\")+1)))}}}return\"\"},expressInstallCallback:function(){if(a){var Y=c(S);if(Y&&m){Y.parentNode.replaceChild(m,Y);if(R){x(R,true);if(N.ie&&N.win){m.style.display=\"block\"}}if(F){F(C)}}a=false}}}}();Ext.FlashComponent=Ext.extend(Ext.BoxComponent,{flashVersion:\"9.0.115\",backgroundColor:\"#ffffff\",wmode:\"opaque\",flashVars:undefined,flashParams:undefined,url:undefined,swfId:undefined,swfWidth:\"100%\",swfHeight:\"100%\",expressInstall:false,initComponent:function(){Ext.FlashComponent.superclass.initComponent.call(this);this.addEvents(\"initialize\")},onRender:function(){Ext.FlashComponent.superclass.onRender.apply(this,arguments);var b=Ext.apply({allowScriptAccess:\"always\",bgcolor:this.backgroundColor,wmode:this.wmode},this.flashParams),a=Ext.apply({allowedDomain:document.location.hostname,YUISwfId:this.getId(),YUIBridgeCallback:\"Ext.FlashEventProxy.onEvent\"},this.flashVars);new swfobject.embedSWF(this.url,this.id,this.swfWidth,this.swfHeight,this.flashVersion,this.expressInstall?Ext.FlashComponent.EXPRESS_INSTALL_URL:undefined,a,b);this.swf=Ext.getDom(this.id);this.el=Ext.get(this.swf)},getSwfId:function(){return this.swfId||(this.swfId=\"extswf\"+(++Ext.Component.AUTO_ID))},getId:function(){return this.id||(this.id=\"extflashcmp\"+(++Ext.Component.AUTO_ID))},onFlashEvent:function(a){switch(a.type){case\"swfReady\":this.initSwf();return;case\"log\":return}a.component=this;this.fireEvent(a.type.toLowerCase().replace(/event$/,\"\"),a)},initSwf:function(){this.onSwfReady(!!this.isInitialized);this.isInitialized=true;this.fireEvent(\"initialize\",this)},beforeDestroy:function(){if(this.rendered){swfobject.removeSWF(this.swf.id)}Ext.FlashComponent.superclass.beforeDestroy.call(this)},onSwfReady:Ext.emptyFn});Ext.FlashComponent.EXPRESS_INSTALL_URL=\"http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf\";Ext.reg(\"flash\",Ext.FlashComponent);Ext.FlashEventProxy={onEvent:function(c,b){var a=Ext.getCmp(c);if(a){a.onFlashEvent(b)}else{arguments.callee.defer(10,this,[c,b])}}};Ext.chart.Chart=Ext.extend(Ext.FlashComponent,{refreshBuffer:100,chartStyle:{padding:10,animationEnabled:true,font:{name:\"Tahoma\",color:4473924,size:11},dataTip:{padding:5,border:{color:10075112,size:1},background:{color:14346230,alpha:0.9},font:{name:\"Tahoma\",color:1393291,size:10,bold:true}}},extraStyle:null,seriesStyles:null,disableCaching:Ext.isIE||Ext.isOpera,disableCacheParam:\"_dc\",initComponent:function(){Ext.chart.Chart.superclass.initComponent.call(this);if(!this.url){this.url=Ext.chart.Chart.CHART_URL}if(this.disableCaching){this.url=Ext.urlAppend(this.url,String.format(\"{0}={1}\",this.disableCacheParam,new Date().getTime()))}this.addEvents(\"itemmouseover\",\"itemmouseout\",\"itemclick\",\"itemdoubleclick\",\"itemdragstart\",\"itemdrag\",\"itemdragend\",\"beforerefresh\",\"refresh\");this.store=Ext.StoreMgr.lookup(this.store)},setStyle:function(a,b){this.swf.setStyle(a,Ext.encode(b))},setStyles:function(a){this.swf.setStyles(Ext.encode(a))},setSeriesStyles:function(b){this.seriesStyles=b;var a=[];Ext.each(b,function(c){a.push(Ext.encode(c))});this.swf.setSeriesStyles(a)},setCategoryNames:function(a){this.swf.setCategoryNames(a)},setLegendRenderer:function(c,b){var a=this;b=b||a;a.removeFnProxy(a.legendFnName);a.legendFnName=a.createFnProxy(function(d){return c.call(b,d)});a.swf.setLegendLabelFunction(a.legendFnName)},setTipRenderer:function(c,b){var a=this;b=b||a;a.removeFnProxy(a.tipFnName);a.tipFnName=a.createFnProxy(function(h,e,g){var d=a.store.getAt(e);return c.call(b,a,d,e,g)});a.swf.setDataTipFunction(a.tipFnName)},setSeries:function(a){this.series=a;this.refresh()},bindStore:function(a,b){if(!b&&this.store){if(a!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un(\"datachanged\",this.refresh,this);this.store.un(\"add\",this.delayRefresh,this);this.store.un(\"remove\",this.delayRefresh,this);this.store.un(\"update\",this.delayRefresh,this);this.store.un(\"clear\",this.refresh,this)}}if(a){a=Ext.StoreMgr.lookup(a);a.on({scope:this,datachanged:this.refresh,add:this.delayRefresh,remove:this.delayRefresh,update:this.delayRefresh,clear:this.refresh})}this.store=a;if(a&&!b){this.refresh()}},onSwfReady:function(b){Ext.chart.Chart.superclass.onSwfReady.call(this,b);var a;this.swf.setType(this.type);if(this.chartStyle){this.setStyles(Ext.apply({},this.extraStyle,this.chartStyle))}if(this.categoryNames){this.setCategoryNames(this.categoryNames)}if(this.tipRenderer){a=this.getFunctionRef(this.tipRenderer);this.setTipRenderer(a.fn,a.scope)}if(this.legendRenderer){a=this.getFunctionRef(this.legendRenderer);this.setLegendRenderer(a.fn,a.scope)}if(!b){this.bindStore(this.store,true)}this.refresh.defer(10,this)},delayRefresh:function(){if(!this.refreshTask){this.refreshTask=new Ext.util.DelayedTask(this.refresh,this)}this.refreshTask.delay(this.refreshBuffer)},refresh:function(){if(this.fireEvent(\"beforerefresh\",this)!==false){var m=false;var k=[],c=this.store.data.items;for(var g=0,l=c.length;g<l;g++){k[g]=c[g].data}var e=[];var d=0;var n=null;var h=0;if(this.series){d=this.series.length;for(h=0;h<d;h++){n=this.series[h];var b={};for(var a in n){if(a==\"style\"&&n.style!==null){b.style=Ext.encode(n.style);m=true}else{b[a]=n[a]}}e.push(b)}}if(d>0){for(h=0;h<d;h++){n=e[h];if(!n.type){n.type=this.type}n.dataProvider=k}}else{e.push({type:this.type,dataProvider:k})}this.swf.setDataProvider(e);if(this.seriesStyles){this.setSeriesStyles(this.seriesStyles)}this.fireEvent(\"refresh\",this)}},createFnProxy:function(a){var b=\"extFnProxy\"+(++Ext.chart.Chart.PROXY_FN_ID);Ext.chart.Chart.proxyFunction[b]=a;return\"Ext.chart.Chart.proxyFunction.\"+b},removeFnProxy:function(a){if(!Ext.isEmpty(a)){a=a.replace(\"Ext.chart.Chart.proxyFunction.\",\"\");delete Ext.chart.Chart.proxyFunction[a]}},getFunctionRef:function(a){if(Ext.isFunction(a)){return{fn:a,scope:this}}else{return{fn:a.fn,scope:a.scope||this}}},onDestroy:function(){if(this.refreshTask&&this.refreshTask.cancel){this.refreshTask.cancel()}Ext.chart.Chart.superclass.onDestroy.call(this);this.bindStore(null);this.removeFnProxy(this.tipFnName);this.removeFnProxy(this.legendFnName)}});Ext.reg(\"chart\",Ext.chart.Chart);Ext.chart.Chart.PROXY_FN_ID=0;Ext.chart.Chart.proxyFunction={};Ext.chart.Chart.CHART_URL=\"http://yui.yahooapis.com/2.8.2/build/charts/assets/charts.swf\";Ext.chart.PieChart=Ext.extend(Ext.chart.Chart,{type:\"pie\",onSwfReady:function(a){Ext.chart.PieChart.superclass.onSwfReady.call(this,a);this.setDataField(this.dataField);this.setCategoryField(this.categoryField)},setDataField:function(a){this.dataField=a;this.swf.setDataField(a)},setCategoryField:function(a){this.categoryField=a;this.swf.setCategoryField(a)}});Ext.reg(\"piechart\",Ext.chart.PieChart);Ext.chart.CartesianChart=Ext.extend(Ext.chart.Chart,{onSwfReady:function(a){Ext.chart.CartesianChart.superclass.onSwfReady.call(this,a);this.labelFn=[];if(this.xField){this.setXField(this.xField)}if(this.yField){this.setYField(this.yField)}if(this.xAxis){this.setXAxis(this.xAxis)}if(this.xAxes){this.setXAxes(this.xAxes)}if(this.yAxis){this.setYAxis(this.yAxis)}if(this.yAxes){this.setYAxes(this.yAxes)}if(Ext.isDefined(this.constrainViewport)){this.swf.setConstrainViewport(this.constrainViewport)}},setXField:function(a){this.xField=a;this.swf.setHorizontalField(a)},setYField:function(a){this.yField=a;this.swf.setVerticalField(a)},setXAxis:function(a){this.xAxis=this.createAxis(\"xAxis\",a);this.swf.setHorizontalAxis(this.xAxis)},setXAxes:function(c){var b;for(var a=0;a<c.length;a++){b=this.createAxis(\"xAxis\"+a,c[a]);this.swf.setHorizontalAxis(b)}},setYAxis:function(a){this.yAxis=this.createAxis(\"yAxis\",a);this.swf.setVerticalAxis(this.yAxis)},setYAxes:function(c){var b;for(var a=0;a<c.length;a++){b=this.createAxis(\"yAxis\"+a,c[a]);this.swf.setVerticalAxis(b)}},createAxis:function(b,d){var e=Ext.apply({},d),c,a;if(this[b]){a=this[b].labelFunction;this.removeFnProxy(a);this.labelFn.remove(a)}if(e.labelRenderer){c=this.getFunctionRef(e.labelRenderer);e.labelFunction=this.createFnProxy(function(g){return c.fn.call(c.scope,g)});delete e.labelRenderer;this.labelFn.push(e.labelFunction)}if(b.indexOf(\"xAxis\")>-1&&e.position==\"left\"){e.position=\"bottom\"}return e},onDestroy:function(){Ext.chart.CartesianChart.superclass.onDestroy.call(this);Ext.each(this.labelFn,function(a){this.removeFnProxy(a)},this)}});Ext.reg(\"cartesianchart\",Ext.chart.CartesianChart);Ext.chart.LineChart=Ext.extend(Ext.chart.CartesianChart,{type:\"line\"});Ext.reg(\"linechart\",Ext.chart.LineChart);Ext.chart.ColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:\"column\"});Ext.reg(\"columnchart\",Ext.chart.ColumnChart);Ext.chart.StackedColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:\"stackcolumn\"});Ext.reg(\"stackedcolumnchart\",Ext.chart.StackedColumnChart);Ext.chart.BarChart=Ext.extend(Ext.chart.CartesianChart,{type:\"bar\"});Ext.reg(\"barchart\",Ext.chart.BarChart);Ext.chart.StackedBarChart=Ext.extend(Ext.chart.CartesianChart,{type:\"stackbar\"});Ext.reg(\"stackedbarchart\",Ext.chart.StackedBarChart);Ext.chart.Axis=function(a){Ext.apply(this,a)};Ext.chart.Axis.prototype={type:null,orientation:\"horizontal\",reverse:false,labelFunction:null,hideOverlappingLabels:true,labelSpacing:2};Ext.chart.NumericAxis=Ext.extend(Ext.chart.Axis,{type:\"numeric\",minimum:NaN,maximum:NaN,majorUnit:NaN,minorUnit:NaN,snapToUnits:true,alwaysShowZero:true,scale:\"linear\",roundMajorUnit:true,calculateByLabelSize:true,position:\"left\",adjustMaximumByMajorUnit:true,adjustMinimumByMajorUnit:true});Ext.chart.TimeAxis=Ext.extend(Ext.chart.Axis,{type:\"time\",minimum:null,maximum:null,majorUnit:NaN,majorTimeUnit:null,minorUnit:NaN,minorTimeUnit:null,snapToUnits:true,stackingEnabled:false,calculateByLabelSize:true});Ext.chart.CategoryAxis=Ext.extend(Ext.chart.Axis,{type:\"category\",categoryNames:null,calculateCategoryCount:false});Ext.chart.Series=function(a){Ext.apply(this,a)};Ext.chart.Series.prototype={type:null,displayName:null};Ext.chart.CartesianSeries=Ext.extend(Ext.chart.Series,{xField:null,yField:null,showInLegend:true,axis:\"primary\"});Ext.chart.ColumnSeries=Ext.extend(Ext.chart.CartesianSeries,{type:\"column\"});Ext.chart.LineSeries=Ext.extend(Ext.chart.CartesianSeries,{type:\"line\"});Ext.chart.BarSeries=Ext.extend(Ext.chart.CartesianSeries,{type:\"bar\"});Ext.chart.PieSeries=Ext.extend(Ext.chart.Series,{type:\"pie\",dataField:null,categoryField:null});Ext.menu.Menu=Ext.extend(Ext.Container,{minWidth:120,shadow:\"sides\",subMenuAlign:\"tl-tr?\",defaultAlign:\"tl-bl?\",allowOtherMenus:false,ignoreParentClicks:false,enableScrolling:true,maxHeight:null,scrollIncrement:24,showSeparator:true,defaultOffsets:[0,0],plain:false,floating:true,zIndex:15000,hidden:true,layout:\"menu\",hideMode:\"offsets\",scrollerHeight:8,autoLayout:true,defaultType:\"menuitem\",bufferResize:false,initComponent:function(){if(Ext.isArray(this.initialConfig)){Ext.apply(this,{items:this.initialConfig})}this.addEvents(\"click\",\"mouseover\",\"mouseout\",\"itemclick\");Ext.menu.MenuMgr.register(this);if(this.floating){Ext.EventManager.onWindowResize(this.hide,this)}else{if(this.initialConfig.hidden!==false){this.hidden=false}this.internalDefaults={hideOnClick:false}}Ext.menu.Menu.superclass.initComponent.call(this);if(this.autoLayout){var a=this.doLayout.createDelegate(this,[]);this.on({add:a,remove:a})}},getLayoutTarget:function(){return this.ul},onRender:function(b,a){if(!b){b=Ext.getBody()}var c={id:this.getId(),cls:\"x-menu \"+((this.floating)?\"x-menu-floating x-layer \":\"\")+(this.cls||\"\")+(this.plain?\" x-menu-plain\":\"\")+(this.showSeparator?\"\":\" x-menu-nosep\"),style:this.style,cn:[{tag:\"a\",cls:\"x-menu-focus\",href:\"#\",onclick:\"return false;\",tabIndex:\"-1\"},{tag:\"ul\",cls:\"x-menu-list\"}]};if(this.floating){this.el=new Ext.Layer({shadow:this.shadow,dh:c,constrain:false,parentEl:b,zindex:this.zIndex})}else{this.el=b.createChild(c)}Ext.menu.Menu.superclass.onRender.call(this,b,a);if(!this.keyNav){this.keyNav=new Ext.menu.MenuNav(this)}this.focusEl=this.el.child(\"a.x-menu-focus\");this.ul=this.el.child(\"ul.x-menu-list\");this.mon(this.ul,{scope:this,click:this.onClick,mouseover:this.onMouseOver,mouseout:this.onMouseOut});if(this.enableScrolling){this.mon(this.el,{scope:this,delegate:\".x-menu-scroller\",click:this.onScroll,mouseover:this.deactivateActive})}},findTargetItem:function(b){var a=b.getTarget(\".x-menu-list-item\",this.ul,true);if(a&&a.menuItemId){return this.items.get(a.menuItemId)}},onClick:function(b){var a=this.findTargetItem(b);if(a){if(a.isFormField){this.setActiveItem(a)}else{if(a instanceof Ext.menu.BaseItem){if(a.menu&&this.ignoreParentClicks){a.expandMenu();b.preventDefault()}else{if(a.onClick){a.onClick(b);this.fireEvent(\"click\",this,a,b)}}}}}},setActiveItem:function(a,b){if(a!=this.activeItem){this.deactivateActive();if((this.activeItem=a).isFormField){a.focus()}else{a.activate(b)}}else{if(b){a.expandMenu()}}},deactivateActive:function(){var b=this.activeItem;if(b){if(b.isFormField){if(b.collapse){b.collapse()}}else{b.deactivate()}delete this.activeItem}},tryActivate:function(g,e){var b=this.items;for(var c=g,a=b.length;c>=0&&c<a;c+=e){var d=b.get(c);if(d.isVisible()&&!d.disabled&&(d.canActivate||d.isFormField)){this.setActiveItem(d,false);return d}}return false},onMouseOver:function(b){var a=this.findTargetItem(b);if(a){if(a.canActivate&&!a.disabled){this.setActiveItem(a,true)}}this.over=true;this.fireEvent(\"mouseover\",this,b,a)},onMouseOut:function(b){var a=this.findTargetItem(b);if(a){if(a==this.activeItem&&a.shouldDeactivate&&a.shouldDeactivate(b)){this.activeItem.deactivate();delete this.activeItem}}this.over=false;this.fireEvent(\"mouseout\",this,b,a)},onScroll:function(d,b){if(d){d.stopEvent()}var a=this.ul.dom,c=Ext.fly(b).is(\".x-menu-scroller-top\");a.scrollTop+=this.scrollIncrement*(c?-1:1);if(c?a.scrollTop<=0:a.scrollTop+this.activeMax>=a.scrollHeight){this.onScrollerOut(null,b)}},onScrollerIn:function(d,b){var a=this.ul.dom,c=Ext.fly(b).is(\".x-menu-scroller-top\");if(c?a.scrollTop>0:a.scrollTop+this.activeMax<a.scrollHeight){Ext.fly(b).addClass([\"x-menu-item-active\",\"x-menu-scroller-active\"])}},onScrollerOut:function(b,a){Ext.fly(a).removeClass([\"x-menu-item-active\",\"x-menu-scroller-active\"])},show:function(b,c,a){if(this.floating){this.parentMenu=a;if(!this.el){this.render();this.doLayout(false,true)}this.showAt(this.el.getAlignToXY(b,c||this.defaultAlign,this.defaultOffsets),a)}else{Ext.menu.Menu.superclass.show.call(this)}},showAt:function(b,a){if(this.fireEvent(\"beforeshow\",this)!==false){this.parentMenu=a;if(!this.el){this.render()}if(this.enableScrolling){this.el.setXY(b);b[1]=this.constrainScroll(b[1]);b=[this.el.adjustForConstraints(b)[0],b[1]]}else{b=this.el.adjustForConstraints(b)}this.el.setXY(b);this.el.show();Ext.menu.Menu.superclass.onShow.call(this);if(Ext.isIE){this.fireEvent(\"autosize\",this);if(!Ext.isIE8){this.el.repaint()}}this.hidden=false;this.focus();this.fireEvent(\"show\",this)}},constrainScroll:function(i){var b,d=this.ul.setHeight(\"auto\").getHeight(),a=i,h,e,g,c;if(this.floating){e=Ext.fly(this.el.dom.parentNode);g=e.getScroll().top;c=e.getViewSize().height;h=i-g;b=this.maxHeight?this.maxHeight:c-h;if(d>c){b=c;a=i-h}else{if(b<d){a=i-(d-b);b=d}}}else{b=this.getHeight()}if(this.maxHeight){b=Math.min(this.maxHeight,b)}if(d>b&&b>0){this.activeMax=b-this.scrollerHeight*2-this.el.getFrameWidth(\"tb\")-Ext.num(this.el.shadowOffset,0);this.ul.setHeight(this.activeMax);this.createScrollers();this.el.select(\".x-menu-scroller\").setDisplayed(\"\")}else{this.ul.setHeight(d);this.el.select(\".x-menu-scroller\").setDisplayed(\"none\")}this.ul.dom.scrollTop=0;return a},createScrollers:function(){if(!this.scroller){this.scroller={pos:0,top:this.el.insertFirst({tag:\"div\",cls:\"x-menu-scroller x-menu-scroller-top\",html:\"&#160;\"}),bottom:this.el.createChild({tag:\"div\",cls:\"x-menu-scroller x-menu-scroller-bottom\",html:\"&#160;\"})};this.scroller.top.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.topRepeater=new Ext.util.ClickRepeater(this.scroller.top,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.top],false)}});this.scroller.bottom.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.bottomRepeater=new Ext.util.ClickRepeater(this.scroller.bottom,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.bottom],false)}})}},onLayout:function(){if(this.isVisible()){if(this.enableScrolling){this.constrainScroll(this.el.getTop())}if(this.floating){this.el.sync()}}},focus:function(){if(!this.hidden){this.doFocus.defer(50,this)}},doFocus:function(){if(!this.hidden){this.focusEl.focus()}},hide:function(a){if(!this.isDestroyed){this.deepHide=a;Ext.menu.Menu.superclass.hide.call(this);delete this.deepHide}},onHide:function(){Ext.menu.Menu.superclass.onHide.call(this);this.deactivateActive();if(this.el&&this.floating){this.el.hide()}var a=this.parentMenu;if(this.deepHide===true&&a){if(a.floating){a.hide(true)}else{a.deactivateActive()}}},lookupComponent:function(a){if(Ext.isString(a)){a=(a==\"separator\"||a==\"-\")?new Ext.menu.Separator():new Ext.menu.TextItem(a);this.applyDefaults(a)}else{if(Ext.isObject(a)){a=this.getMenuItem(a)}else{if(a.tagName||a.el){a=new Ext.BoxComponent({el:a})}}}return a},applyDefaults:function(b){if(!Ext.isString(b)){b=Ext.menu.Menu.superclass.applyDefaults.call(this,b);var a=this.internalDefaults;if(a){if(b.events){Ext.applyIf(b.initialConfig,a);Ext.apply(b,a)}else{Ext.applyIf(b,a)}}}return b},getMenuItem:function(a){a.ownerCt=this;if(!a.isXType){if(!a.xtype&&Ext.isBoolean(a.checked)){return new Ext.menu.CheckItem(a)}return Ext.create(a,this.defaultType)}return a},addSeparator:function(){return this.add(new Ext.menu.Separator())},addElement:function(a){return this.add(new Ext.menu.BaseItem({el:a}))},addItem:function(a){return this.add(a)},addMenuItem:function(a){return this.add(this.getMenuItem(a))},addText:function(a){return this.add(new Ext.menu.TextItem(a))},onDestroy:function(){Ext.EventManager.removeResizeListener(this.hide,this);var a=this.parentMenu;if(a&&a.activeChild==this){delete a.activeChild}delete this.parentMenu;Ext.menu.Menu.superclass.onDestroy.call(this);Ext.menu.MenuMgr.unregister(this);if(this.keyNav){this.keyNav.disable()}var b=this.scroller;if(b){Ext.destroy(b.topRepeater,b.bottomRepeater,b.top,b.bottom)}Ext.destroy(this.el,this.focusEl,this.ul)}});Ext.reg(\"menu\",Ext.menu.Menu);Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function a(d,c){if(!c.tryActivate(c.items.indexOf(c.activeItem)-1,-1)){c.tryActivate(c.items.length-1,-1)}}function b(d,c){if(!c.tryActivate(c.items.indexOf(c.activeItem)+1,1)){c.tryActivate(0,1)}}return{constructor:function(c){Ext.menu.MenuNav.superclass.constructor.call(this,c.el);this.scope=this.menu=c},doRelay:function(g,d){var c=g.getKey();if(this.menu.activeItem&&this.menu.activeItem.isFormField&&c!=g.TAB){return false}if(!this.menu.activeItem&&g.isNavKeyPress()&&c!=g.SPACE&&c!=g.RETURN){this.menu.tryActivate(0,1);return false}return d.call(this.scope||this,g,this.menu)},tab:function(d,c){d.stopEvent();if(d.shiftKey){a(d,c)}else{b(d,c)}},up:a,down:b,right:function(d,c){if(c.activeItem){c.activeItem.expandMenu(true)}},left:function(d,c){c.hide();if(c.parentMenu&&c.parentMenu.activeItem){c.parentMenu.activeItem.activate()}},enter:function(d,c){if(c.activeItem){d.stopPropagation();c.activeItem.onClick(d);c.fireEvent(\"click\",this,c.activeItem);return true}}}}());Ext.menu.MenuMgr=function(){var h,e,b,d={},a=false,l=new Date();function n(){h={};e=new Ext.util.MixedCollection();b=Ext.getDoc().addKeyListener(27,j);b.disable()}function j(){if(e&&e.length>0){var o=e.clone();o.each(function(p){p.hide()});return true}return false}function g(o){e.remove(o);if(e.length<1){b.disable();Ext.getDoc().un(\"mousedown\",m);a=false}}function k(o){var p=e.last();l=new Date();e.add(o);if(!a){b.enable();Ext.getDoc().on(\"mousedown\",m);a=true}if(o.parentMenu){o.getEl().setZIndex(parseInt(o.parentMenu.getEl().getStyle(\"z-index\"),10)+3);o.parentMenu.activeChild=o}else{if(p&&!p.isDestroyed&&p.isVisible()){o.getEl().setZIndex(parseInt(p.getEl().getStyle(\"z-index\"),10)+3)}}}function c(o){if(o.activeChild){o.activeChild.hide()}if(o.autoHideTimer){clearTimeout(o.autoHideTimer);delete o.autoHideTimer}}function i(o){var p=o.parentMenu;if(!p&&!o.allowOtherMenus){j()}else{if(p&&p.activeChild){p.activeChild.hide()}}}function m(o){if(l.getElapsed()>50&&e.length>0&&!o.getTarget(\".x-menu\")){j()}}return{hideAll:function(){return j()},register:function(o){if(!h){n()}h[o.id]=o;o.on({beforehide:c,hide:g,beforeshow:i,show:k})},get:function(o){if(typeof o==\"string\"){if(!h){return null}return h[o]}else{if(o.events){return o}else{if(typeof o.length==\"number\"){return new Ext.menu.Menu({items:o})}else{return Ext.create(o,\"menu\")}}}},unregister:function(o){delete h[o.id];o.un(\"beforehide\",c);o.un(\"hide\",g);o.un(\"beforeshow\",i);o.un(\"show\",k)},registerCheckable:function(o){var p=o.group;if(p){if(!d[p]){d[p]=[]}d[p].push(o)}},unregisterCheckable:function(o){var p=o.group;if(p){d[p].remove(o)}},onCheckChange:function(q,r){if(q.group&&r){var t=d[q.group],p=0,o=t.length,s;for(;p<o;p++){s=t[p];if(s!=q){s.setChecked(false)}}}},getCheckedItem:function(q){var r=d[q];if(r){for(var p=0,o=r.length;p<o;p++){if(r[p].checked){return r[p]}}}return null},setCheckedItem:function(q,s){var r=d[q];if(r){for(var p=0,o=r.length;p<o;p++){if(r[p].id==s){r[p].setChecked(true)}}}return null}}}();Ext.menu.BaseItem=Ext.extend(Ext.Component,{canActivate:false,activeClass:\"x-menu-item-active\",hideOnClick:true,clickHideDelay:1,ctype:\"Ext.menu.BaseItem\",actionMode:\"container\",initComponent:function(){Ext.menu.BaseItem.superclass.initComponent.call(this);this.addEvents(\"click\",\"activate\",\"deactivate\");if(this.handler){this.on(\"click\",this.handler,this.scope)}},onRender:function(b,a){Ext.menu.BaseItem.superclass.onRender.apply(this,arguments);if(this.ownerCt&&this.ownerCt instanceof Ext.menu.Menu){this.parentMenu=this.ownerCt}else{this.container.addClass(\"x-menu-list-item\");this.mon(this.el,{scope:this,click:this.onClick,mouseenter:this.activate,mouseleave:this.deactivate})}},setHandler:function(b,a){if(this.handler){this.un(\"click\",this.handler,this.scope)}this.on(\"click\",this.handler=b,this.scope=a)},onClick:function(a){if(!this.disabled&&this.fireEvent(\"click\",this,a)!==false&&(this.parentMenu&&this.parentMenu.fireEvent(\"itemclick\",this,a)!==false)){this.handleClick(a)}else{a.stopEvent()}},activate:function(){if(this.disabled){return false}var a=this.container;a.addClass(this.activeClass);this.region=a.getRegion().adjust(2,2,-2,-2);this.fireEvent(\"activate\",this);return true},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent(\"deactivate\",this)},shouldDeactivate:function(a){return !this.region||!this.region.contains(a.getPoint())},handleClick:function(b){var a=this.parentMenu;if(this.hideOnClick){if(a.floating){this.clickHideDelayTimer=a.hide.defer(this.clickHideDelay,a,[true])}else{a.deactivateActive()}}},beforeDestroy:function(){clearTimeout(this.clickHideDelayTimer);Ext.menu.BaseItem.superclass.beforeDestroy.call(this)},expandMenu:Ext.emptyFn,hideMenu:Ext.emptyFn});Ext.reg(\"menubaseitem\",Ext.menu.BaseItem);Ext.menu.TextItem=Ext.extend(Ext.menu.BaseItem,{hideOnClick:false,itemCls:\"x-menu-text\",constructor:function(a){if(typeof a==\"string\"){a={text:a}}Ext.menu.TextItem.superclass.constructor.call(this,a)},onRender:function(){var a=document.createElement(\"span\");a.className=this.itemCls;a.innerHTML=this.text;this.el=a;Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}});Ext.reg(\"menutextitem\",Ext.menu.TextItem);Ext.menu.Separator=Ext.extend(Ext.menu.BaseItem,{itemCls:\"x-menu-sep\",hideOnClick:false,activeClass:\"\",onRender:function(a){var b=document.createElement(\"span\");b.className=this.itemCls;b.innerHTML=\"&#160;\";this.el=b;a.addClass(\"x-menu-sep-li\");Ext.menu.Separator.superclass.onRender.apply(this,arguments)}});Ext.reg(\"menuseparator\",Ext.menu.Separator);Ext.menu.Item=Ext.extend(Ext.menu.BaseItem,{itemCls:\"x-menu-item\",canActivate:true,showDelay:200,altText:\"\",hideDelay:200,ctype:\"Ext.menu.Item\",initComponent:function(){Ext.menu.Item.superclass.initComponent.call(this);if(this.menu){if(Ext.isArray(this.menu)){this.menu={items:this.menu}}if(Ext.isObject(this.menu)){this.menu.ownerCt=this}this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=undefined}},onRender:function(d,b){if(!this.itemTpl){this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id=\"{id}\" class=\"{cls}\" hidefocus=\"true\" unselectable=\"on\" href=\"{href}\"','<tpl if=\"hrefTarget\">',' target=\"{hrefTarget}\"',\"</tpl>\",\">\",'<img alt=\"{altText}\" src=\"{icon}\" class=\"x-menu-item-icon {iconCls}\"/>','<span class=\"x-menu-item-text\">{text}</span>',\"</a>\")}var c=this.getTemplateArgs();this.el=b?this.itemTpl.insertBefore(b,c,true):this.itemTpl.append(d,c,true);this.iconEl=this.el.child(\"img.x-menu-item-icon\");this.textEl=this.el.child(\".x-menu-item-text\");if(!this.href){this.mon(this.el,\"click\",Ext.emptyFn,null,{preventDefault:true})}Ext.menu.Item.superclass.onRender.call(this,d,b)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?\" x-menu-item-arrow\":\"\")+(this.cls?\" \"+this.cls:\"\"),href:this.href||\"#\",hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||\"\",text:this.itemText||this.text||\"&#160;\",altText:this.altText||\"\"}},setText:function(a){this.text=a||\"&#160;\";if(this.rendered){this.textEl.update(this.text);this.parentMenu.layout.doAutoSize()}},setIconClass:function(a){var b=this.iconCls;this.iconCls=a;if(this.rendered){this.iconEl.replaceClass(b,this.iconCls)}},beforeDestroy:function(){clearTimeout(this.showTimer);clearTimeout(this.hideTimer);if(this.menu){delete this.menu.ownerCt;this.menu.destroy()}Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(a){if(!this.href){a.stopEvent()}Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(a){if(Ext.menu.Item.superclass.activate.apply(this,arguments)){this.focus();if(a){this.expandMenu()}}return true},shouldDeactivate:function(a){if(Ext.menu.Item.superclass.shouldDeactivate.call(this,a)){if(this.menu&&this.menu.isVisible()){return !this.menu.getEl().getRegion().contains(a.getPoint())}return true}return false},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu()},expandMenu:function(a){if(!this.disabled&&this.menu){clearTimeout(this.hideTimer);delete this.hideTimer;if(!this.menu.isVisible()&&!this.showTimer){this.showTimer=this.deferExpand.defer(this.showDelay,this,[a])}else{if(this.menu.isVisible()&&a){this.menu.tryActivate(0,1)}}}},deferExpand:function(a){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||\"tl-tr?\",this.parentMenu);if(a){this.menu.tryActivate(0,1)}},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;if(!this.hideTimer&&this.menu&&this.menu.isVisible()){this.hideTimer=this.deferHide.defer(this.hideDelay,this)}},deferHide:function(){delete this.hideTimer;if(this.menu.over){this.parentMenu.setActiveItem(this,false)}else{this.menu.hide()}}});Ext.reg(\"menuitem\",Ext.menu.Item);Ext.menu.CheckItem=Ext.extend(Ext.menu.Item,{itemCls:\"x-menu-item x-menu-check-item\",groupClass:\"x-menu-group-item\",checked:false,ctype:\"Ext.menu.CheckItem\",initComponent:function(){Ext.menu.CheckItem.superclass.initComponent.call(this);this.addEvents(\"beforecheckchange\",\"checkchange\");if(this.checkHandler){this.on(\"checkchange\",this.checkHandler,this.scope)}Ext.menu.MenuMgr.registerCheckable(this)},onRender:function(a){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments);if(this.group){this.el.addClass(this.groupClass)}if(this.checked){this.checked=false;this.setChecked(true,true)}},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this);Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(b,a){var c=a===true;if(this.checked!=b&&(c||this.fireEvent(\"beforecheckchange\",this,b)!==false)){Ext.menu.MenuMgr.onCheckChange(this,b);if(this.container){this.container[b?\"addClass\":\"removeClass\"](\"x-menu-item-checked\")}this.checked=b;if(!c){this.fireEvent(\"checkchange\",this,b)}}},handleClick:function(a){if(!this.disabled&&!(this.checked&&this.group)){this.setChecked(!this.checked)}Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}});Ext.reg(\"menucheckitem\",Ext.menu.CheckItem);Ext.menu.DateMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:false,hideOnClick:true,pickerId:null,cls:\"x-date-menu\",initComponent:function(){this.on(\"beforeshow\",this.onBeforeShow,this);if(this.strict=(Ext.isIE7&&Ext.isStrict)){this.on(\"show\",this.onShow,this,{single:true,delay:20})}Ext.apply(this,{plain:true,showSeparator:false,items:this.picker=new Ext.DatePicker(Ext.applyIf({internalRender:this.strict||!Ext.isIE,ctCls:\"x-menu-date-item\",id:this.pickerId},this.initialConfig))});this.picker.purgeListeners();Ext.menu.DateMenu.superclass.initComponent.call(this);this.relayEvents(this.picker,[\"select\"]);this.on(\"show\",this.picker.focus,this.picker);this.on(\"select\",this.menuHide,this);if(this.handler){this.on(\"select\",this.handler,this.scope||this)}},menuHide:function(){if(this.hideOnClick){this.hide(true)}},onBeforeShow:function(){if(this.picker){this.picker.hideMonthPicker(true)}},onShow:function(){var a=this.picker.getEl();a.setWidth(a.getWidth())}});Ext.reg(\"datemenu\",Ext.menu.DateMenu);Ext.menu.ColorMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:false,hideOnClick:true,cls:\"x-color-menu\",paletteId:null,initComponent:function(){Ext.apply(this,{plain:true,showSeparator:false,items:this.palette=new Ext.ColorPalette(Ext.applyIf({id:this.paletteId},this.initialConfig))});this.palette.purgeListeners();Ext.menu.ColorMenu.superclass.initComponent.call(this);this.relayEvents(this.palette,[\"select\"]);this.on(\"select\",this.menuHide,this);if(this.handler){this.on(\"select\",this.handler,this.scope||this)}},menuHide:function(){if(this.hideOnClick){this.hide(true)}}});Ext.reg(\"colormenu\",Ext.menu.ColorMenu);Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:\"x-form-invalid\",invalidText:\"The value in this field is invalid\",focusClass:\"x-form-focus\",validationEvent:\"keyup\",validateOnBlur:true,validationDelay:250,defaultAutoCreate:{tag:\"input\",type:\"text\",size:\"20\",autocomplete:\"off\"},fieldClass:\"x-form-field\",msgTarget:\"qtip\",msgFx:\"normal\",readOnly:false,disabled:false,submitValue:true,isFormField:true,msgDisplay:\"\",hasFocus:false,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents(\"focus\",\"blur\",\"specialkey\",\"change\",\"invalid\",\"valid\")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||\"\"},onRender:function(c,a){if(!this.el){var b=this.getAutoCreate();if(!b.name){b.name=this.name||this.id}if(this.inputType){b.type=this.inputType}this.autoEl=b}Ext.form.Field.superclass.onRender.call(this,c,a);if(this.submitValue===false){this.el.dom.removeAttribute(\"name\")}var d=this.el.dom.type;if(d){if(d==\"password\"){d=\"text\"}this.el.addClass(\"x-form-\"+d)}if(this.readOnly){this.setReadOnly(true)}if(this.tabIndex!==undefined){this.el.dom.setAttribute(\"tabIndex\",this.tabIndex)}this.el.addClass([this.fieldClass,this.cls])},getItemCt:function(){return this.itemCt},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{if(!Ext.isEmpty(this.el.dom.value)&&this.el.dom.value!=this.emptyText){this.setValue(this.el.dom.value)}}this.originalValue=this.getValue()},isDirty:function(){if(this.disabled||!this.rendered){return false}return String(this.getValue())!==String(this.originalValue)},setReadOnly:function(a){if(this.rendered){this.el.dom.readOnly=a}this.readOnly=a},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents();this.initValue()},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent(\"specialkey\",this,a)}},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this);this.mon(this.el,\"focus\",this.onFocus,this);this.mon(this.el,\"blur\",this.onBlur,this,this.inEditor?{buffer:10}:null)},preFocus:Ext.emptyFn,onFocus:function(){this.preFocus();if(this.focusClass){this.el.addClass(this.focusClass)}if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent(\"focus\",this)}},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();if(this.focusClass){this.el.removeClass(this.focusClass)}this.hasFocus=false;if(this.validationEvent!==false&&(this.validateOnBlur||this.validationEvent==\"blur\")){this.validate()}var a=this.getValue();if(String(a)!==String(this.startValue)){this.fireEvent(\"change\",this,a,this.startValue)}this.fireEvent(\"blur\",this);this.postBlur()},postBlur:Ext.emptyFn,isValid:function(a){if(this.disabled){return true}var c=this.preventMark;this.preventMark=a===true;var b=this.validateValue(this.processValue(this.getRawValue()),a);this.preventMark=c;return b},validate:function(){if(this.disabled||this.validateValue(this.processValue(this.getRawValue()))){this.clearInvalid();return true}return false},processValue:function(a){return a},validateValue:function(b){var a=this.getErrors(b)[0];if(a==undefined){return true}else{this.markInvalid(a);return false}},getErrors:function(){return[]},getActiveError:function(){return this.activeError||\"\"},markInvalid:function(c){if(this.rendered&&!this.preventMark){c=c||this.invalidText;var a=this.getMessageHandler();if(a){a.mark(this,c)}else{if(this.msgTarget){this.el.addClass(this.invalidClass);var b=Ext.getDom(this.msgTarget);if(b){b.innerHTML=c;b.style.display=this.msgDisplay}}}}this.setActiveError(c)},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.el.removeClass(this.invalidClass);var a=this.getMessageHandler();if(a){a.clear(this)}else{if(this.msgTarget){this.el.removeClass(this.invalidClass);var b=Ext.getDom(this.msgTarget);if(b){b.innerHTML=\"\";b.style.display=\"none\"}}}}this.unsetActiveError()},setActiveError:function(b,a){this.activeError=b;if(a!==true){this.fireEvent(\"invalid\",this,b)}},unsetActiveError:function(a){delete this.activeError;if(a!==true){this.fireEvent(\"valid\",this)}},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget]},getErrorCt:function(){return this.el.findParent(\".x-form-element\",5,true)||this.el.findParent(\".x-form-field-wrap\",5,true)},alignErrorEl:function(){this.errorEl.setWidth(this.getErrorCt().getWidth(true)-20)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,\"tl-tr\",[2,0])},getRawValue:function(){var a=this.rendered?this.el.getValue():Ext.value(this.value,\"\");if(a===this.emptyText){a=\"\"}return a},getValue:function(){if(!this.rendered){return this.value}var a=this.el.getValue();if(a===this.emptyText||a===undefined){a=\"\"}return a},setRawValue:function(a){return this.rendered?(this.el.dom.value=(Ext.isEmpty(a)?\"\":a)):\"\"},setValue:function(a){this.value=a;if(this.rendered){this.el.dom.value=(Ext.isEmpty(a)?\"\":a);this.validate()}return this},append:function(a){this.setValue([this.getValue(),a].join(\"\"))}});Ext.form.MessageTargets={qtip:{mark:function(a,b){a.el.addClass(a.invalidClass);a.el.dom.qtip=b;a.el.dom.qclass=\"x-form-invalid-tip\";if(Ext.QuickTips){Ext.QuickTips.enable()}},clear:function(a){a.el.removeClass(a.invalidClass);a.el.dom.qtip=\"\"}},title:{mark:function(a,b){a.el.addClass(a.invalidClass);a.el.dom.title=b},clear:function(a){a.el.dom.title=\"\"}},under:{mark:function(b,c){b.el.addClass(b.invalidClass);if(!b.errorEl){var a=b.getErrorCt();if(!a){b.el.dom.title=c;return}b.errorEl=a.createChild({cls:\"x-form-invalid-msg\"});b.on(\"resize\",b.alignErrorEl,b);b.on(\"destroy\",function(){Ext.destroy(this.errorEl)},b)}b.alignErrorEl();b.errorEl.update(c);Ext.form.Field.msgFx[b.msgFx].show(b.errorEl,b)},clear:function(a){a.el.removeClass(a.invalidClass);if(a.errorEl){Ext.form.Field.msgFx[a.msgFx].hide(a.errorEl,a)}else{a.el.dom.title=\"\"}}},side:{mark:function(b,c){b.el.addClass(b.invalidClass);if(!b.errorIcon){var a=b.getErrorCt();if(!a){b.el.dom.title=c;return}b.errorIcon=a.createChild({cls:\"x-form-invalid-icon\"});if(b.ownerCt){b.ownerCt.on(\"afterlayout\",b.alignErrorIcon,b);b.ownerCt.on(\"expand\",b.alignErrorIcon,b)}b.on(\"resize\",b.alignErrorIcon,b);b.on(\"destroy\",function(){Ext.destroy(this.errorIcon)},b)}b.alignErrorIcon();b.errorIcon.dom.qtip=c;b.errorIcon.dom.qclass=\"x-form-invalid-tip\";b.errorIcon.show()},clear:function(a){a.el.removeClass(a.invalidClass);if(a.errorIcon){a.errorIcon.dom.qtip=\"\";a.errorIcon.hide()}else{a.el.dom.title=\"\"}}}};Ext.form.Field.msgFx={normal:{show:function(a,b){a.setDisplayed(\"block\")},hide:function(a,b){a.setDisplayed(false).update(\"\")}},slide:{show:function(a,b){a.slideIn(\"t\",{stopFx:true})},hide:function(a,b){a.slideOut(\"t\",{stopFx:true,useDisplay:true})}},slideRight:{show:function(a,b){a.fixDisplay();a.alignTo(b.el,\"tl-tr\");a.slideIn(\"l\",{stopFx:true})},hide:function(a,b){a.slideOut(\"l\",{stopFx:true,useDisplay:true})}}};Ext.reg(\"field\",Ext.form.Field);Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:false,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:false,allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:\"The minimum length for this field is {0}\",maxLengthText:\"The maximum length for this field is {0}\",selectOnFocus:false,blankText:\"This field is required\",validator:null,regex:null,regexText:\"\",emptyText:null,emptyClass:\"x-form-empty-field\",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents(\"autosize\",\"keydown\",\"keyup\",\"keypress\")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this);if(this.validationEvent==\"keyup\"){this.validationTask=new Ext.util.DelayedTask(this.validate,this);this.mon(this.el,\"keyup\",this.filterValidation,this)}else{if(this.validationEvent!==false&&this.validationEvent!=\"blur\"){this.mon(this.el,this.validationEvent,this.validate,this,{buffer:this.validationDelay})}}if(this.selectOnFocus||this.emptyText){this.mon(this.el,\"mousedown\",this.onMouseDown,this);if(this.emptyText){this.applyEmptyText()}}if(this.maskRe||(this.vtype&&this.disableKeyFilter!==true&&(this.maskRe=Ext.form.VTypes[this.vtype+\"Mask\"]))){this.mon(this.el,\"keypress\",this.filterKeys,this)}if(this.grow){this.mon(this.el,\"keyup\",this.onKeyUpBuffered,this,{buffer:50});this.mon(this.el,\"click\",this.autoSize,this)}if(this.enableKeyEvents){this.mon(this.el,{scope:this,keyup:this.onKeyUp,keydown:this.onKeyDown,keypress:this.onKeyPress})}},onMouseDown:function(a){if(!this.hasFocus){this.mon(this.el,\"mouseup\",Ext.emptyFn,this,{single:true,preventDefault:true})}},processValue:function(a){if(this.stripCharsRe){var b=a.replace(this.stripCharsRe,\"\");if(b!==a){this.setRawValue(b);return b}}return a},filterValidation:function(a){if(!a.isNavKeyPress()){this.validationTask.delay(this.validationDelay)}},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this);if(Ext.isIE){this.el.dom.unselectable=\"on\"}},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this);if(Ext.isIE){this.el.dom.unselectable=\"\"}},onKeyUpBuffered:function(a){if(this.doAutoSize(a)){this.autoSize()}},doAutoSize:function(a){return !a.isNavKeyPress()},onKeyUp:function(a){this.fireEvent(\"keyup\",this,a)},onKeyDown:function(a){this.fireEvent(\"keydown\",this,a)},onKeyPress:function(a){this.fireEvent(\"keypress\",this,a)},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){if(this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}},preFocus:function(){var a=this.el,b;if(this.emptyText){if(a.dom.value==this.emptyText){this.setRawValue(\"\");b=true}a.removeClass(this.emptyClass)}if(this.selectOnFocus||b){a.dom.select()}},postBlur:function(){this.applyEmptyText()},filterKeys:function(b){if(b.ctrlKey){return}var a=b.getKey();if(Ext.isGecko&&(b.isNavKeyPress()||a==b.BACKSPACE||(a==b.DELETE&&b.button==-1))){return}var c=String.fromCharCode(b.getCharCode());if(!Ext.isGecko&&b.isSpecialKey()&&!c){return}if(!this.maskRe.test(c)){b.stopEvent()}},setValue:function(a){if(this.emptyText&&this.el&&!Ext.isEmpty(a)){this.el.removeClass(this.emptyClass)}Ext.form.TextField.superclass.setValue.apply(this,arguments);this.applyEmptyText();this.autoSize();return this},getErrors:function(a){var d=Ext.form.TextField.superclass.getErrors.apply(this,arguments);a=Ext.isDefined(a)?a:this.processValue(this.getRawValue());if(Ext.isFunction(this.validator)){var c=this.validator(a);if(c!==true){d.push(c)}}if(a.length<1||a===this.emptyText){if(this.allowBlank){return d}else{d.push(this.blankText)}}if(!this.allowBlank&&(a.length<1||a===this.emptyText)){d.push(this.blankText)}if(a.length<this.minLength){d.push(String.format(this.minLengthText,this.minLength))}if(a.length>this.maxLength){d.push(String.format(this.maxLengthText,this.maxLength))}if(this.vtype){var b=Ext.form.VTypes;if(!b[this.vtype](a,this)){d.push(this.vtypeText||b[this.vtype+\"Text\"])}}if(this.regex&&!this.regex.test(a)){d.push(this.regexText)}return d},selectText:function(h,a){var c=this.getRawValue();var e=false;if(c.length>0){h=h===undefined?0:h;a=a===undefined?c.length:a;var g=this.el.dom;if(g.setSelectionRange){g.setSelectionRange(h,a)}else{if(g.createTextRange){var b=g.createTextRange();b.moveStart(\"character\",h);b.moveEnd(\"character\",a-c.length);b.select()}}e=Ext.isGecko||Ext.isOpera}else{e=true}if(e){this.focus()}},autoSize:function(){if(!this.grow||!this.rendered){return}if(!this.metrics){this.metrics=Ext.util.TextMetrics.createInstance(this.el)}var c=this.el;var b=c.dom.value;var e=document.createElement(\"div\");e.appendChild(document.createTextNode(b));b=e.innerHTML;Ext.removeNode(e);e=null;b+=\"&#160;\";var a=Math.min(this.growMax,Math.max(this.metrics.getWidth(b)+10,this.growMin));this.el.setWidth(a);this.fireEvent(\"autosize\",this,a)},onDestroy:function(){if(this.validationTask){this.validationTask.cancel();this.validationTask=null}Ext.form.TextField.superclass.onDestroy.call(this)}});Ext.reg(\"textfield\",Ext.form.TextField);Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:\"input\",type:\"text\",size:\"16\",autocomplete:\"off\"},hideTrigger:false,editable:true,readOnly:false,wrapFocusClass:\"x-trigger-wrap-focus\",autoSize:Ext.emptyFn,monitorTab:true,deferHeight:true,mimicing:false,actionMode:\"wrap\",defaultTriggerWidth:17,onResize:function(a,c){Ext.form.TriggerField.superclass.onResize.call(this,a,c);var b=this.getTriggerWidth();if(Ext.isNumber(a)){this.el.setWidth(a-b)}this.wrap.setWidth(this.el.getWidth()+b)},getTriggerWidth:function(){var a=this.trigger.getWidth();if(!this.hideTrigger&&!this.readOnly&&a===0){a=this.defaultTriggerWidth}return a},alignErrorIcon:function(){if(this.wrap){this.errorIcon.alignTo(this.wrap,\"tl-tr\",[2,0])}},onRender:function(b,a){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc();Ext.form.TriggerField.superclass.onRender.call(this,b,a);this.wrap=this.el.wrap({cls:\"x-form-field-wrap x-form-field-trigger-wrap\"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:\"img\",src:Ext.BLANK_IMAGE_URL,alt:\"\",cls:\"x-form-trigger \"+this.triggerClass});this.initTrigger();if(!this.width){this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())}this.resizeEl=this.positionEl=this.wrap},getWidth:function(){return(this.el.getWidth()+this.trigger.getWidth())},updateEditState:function(){if(this.rendered){if(this.readOnly){this.el.dom.readOnly=true;this.el.addClass(\"x-trigger-noedit\");this.mun(this.el,\"click\",this.onTriggerClick,this);this.trigger.setDisplayed(false)}else{if(!this.editable){this.el.dom.readOnly=true;this.el.addClass(\"x-trigger-noedit\");this.mon(this.el,\"click\",this.onTriggerClick,this)}else{this.el.dom.readOnly=false;this.el.removeClass(\"x-trigger-noedit\");this.mun(this.el,\"click\",this.onTriggerClick,this)}this.trigger.setDisplayed(!this.hideTrigger)}this.onResize(this.width||this.wrap.getWidth())}},setHideTrigger:function(a){if(a!=this.hideTrigger){this.hideTrigger=a;this.updateEditState()}},setEditable:function(a){if(a!=this.editable){this.editable=a;this.updateEditState()}},setReadOnly:function(a){if(a!=this.readOnly){this.readOnly=a;this.updateEditState()}},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this);this.updateEditState()},initTrigger:function(){this.mon(this.trigger,\"click\",this.onTriggerClick,this,{preventDefault:true});this.trigger.addClassOnOver(\"x-form-trigger-over\");this.trigger.addClassOnClick(\"x-form-trigger-click\")},onDestroy:function(){Ext.destroy(this.trigger,this.wrap);if(this.mimicing){this.doc.un(\"mousedown\",this.mimicBlur,this)}delete this.doc;Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this);if(!this.mimicing){this.wrap.addClass(this.wrapFocusClass);this.mimicing=true;this.doc.on(\"mousedown\",this.mimicBlur,this,{delay:10});if(this.monitorTab){this.on(\"specialkey\",this.checkTab,this)}}},checkTab:function(a,b){if(b.getKey()==b.TAB){this.triggerBlur()}},onBlur:Ext.emptyFn,mimicBlur:function(a){if(!this.isDestroyed&&!this.wrap.contains(a.target)&&this.validateBlur(a)){this.triggerBlur()}},triggerBlur:function(){this.mimicing=false;this.doc.un(\"mousedown\",this.mimicBlur,this);if(this.monitorTab&&this.el){this.un(\"specialkey\",this.checkTab,this)}Ext.form.TriggerField.superclass.onBlur.call(this);if(this.wrap){this.wrap.removeClass(this.wrapFocusClass)}},beforeBlur:Ext.emptyFn,validateBlur:function(a){return true},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:\"span\",cls:\"x-form-twin-triggers\",cn:[{tag:\"img\",src:Ext.BLANK_IMAGE_URL,alt:\"\",cls:\"x-form-trigger \"+this.trigger1Class},{tag:\"img\",src:Ext.BLANK_IMAGE_URL,alt:\"\",cls:\"x-form-trigger \"+this.trigger2Class}]}},getTrigger:function(a){return this.triggers[a]},afterRender:function(){Ext.form.TwinTriggerField.superclass.afterRender.call(this);var c=this.triggers,b=0,a=c.length;for(;b<a;++b){if(this[\"hideTrigger\"+(b+1)]){c[b].hide()}}},initTrigger:function(){var a=this.trigger.select(\".x-form-trigger\",true),b=this;a.each(function(d,g,c){var e=\"Trigger\"+(c+1);d.hide=function(){var h=b.wrap.getWidth();this.dom.style.display=\"none\";b.el.setWidth(h-b.trigger.getWidth());b[\"hidden\"+e]=true};d.show=function(){var h=b.wrap.getWidth();this.dom.style.display=\"\";b.el.setWidth(h-b.trigger.getWidth());b[\"hidden\"+e]=false};this.mon(d,\"click\",this[\"on\"+e+\"Click\"],this,{preventDefault:true});d.addClassOnOver(\"x-form-trigger-over\");d.addClassOnClick(\"x-form-trigger-click\")},this);this.triggers=a.elements},getTriggerWidth:function(){var a=0;Ext.each(this.triggers,function(d,c){var e=\"Trigger\"+(c+1),b=d.getWidth();if(b===0&&!this[\"hidden\"+e]){a+=this.defaultTriggerWidth}else{a+=b}},this);return a},onDestroy:function(){Ext.destroy(this.triggers);Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg(\"trigger\",Ext.form.TriggerField);Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1000,growAppend:\"&#160;\\n&#160;\",enterIsSpecial:false,preventScrollbars:false,onRender:function(b,a){if(!this.el){this.defaultAutoCreate={tag:\"textarea\",style:\"width:100px;height:60px;\",autocomplete:\"off\"}}Ext.form.TextArea.superclass.onRender.call(this,b,a);if(this.grow){this.textSizeEl=Ext.DomHelper.append(document.body,{tag:\"pre\",cls:\"x-form-grow-sizer\"});if(this.preventScrollbars){this.el.setStyle(\"overflow\",\"hidden\")}this.el.setHeight(this.growMin)}},onDestroy:function(){Ext.removeNode(this.textSizeEl);Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(a){if(a.isSpecialKey()&&(this.enterIsSpecial||(a.getKey()!=a.ENTER||a.hasModifier()))){this.fireEvent(\"specialkey\",this,a)}},doAutoSize:function(a){return !a.isNavKeyPress()||a.getKey()==a.ENTER},filterValidation:function(a){if(!a.isNavKeyPress()||(!this.enterIsSpecial&&a.keyCode==a.ENTER)){this.validationTask.delay(this.validationDelay)}},autoSize:function(){if(!this.grow||!this.textSizeEl){return}var c=this.el,a=Ext.util.Format.htmlEncode(c.dom.value),d=this.textSizeEl,b;Ext.fly(d).setWidth(this.el.getWidth());if(a.length<1){a=\"&#160;&#160;\"}else{a+=this.growAppend;if(Ext.isIE){a=a.replace(/\\n/g,\"&#160;<br />\")}}d.innerHTML=a;b=Math.min(this.growMax,Math.max(d.offsetHeight,this.growMin));if(b!=this.lastHeight){this.lastHeight=b;this.el.setHeight(b);this.fireEvent(\"autosize\",this,b)}}});Ext.reg(\"textarea\",Ext.form.TextArea);Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:\"x-form-field x-form-num-field\",allowDecimals:true,decimalSeparator:\".\",decimalPrecision:2,allowNegative:true,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:\"The minimum value for this field is {0}\",maxText:\"The maximum value for this field is {0}\",nanText:\"{0} is not a valid number\",baseChars:\"0123456789\",autoStripChars:false,initEvents:function(){var a=this.baseChars+\"\";if(this.allowDecimals){a+=this.decimalSeparator}if(this.allowNegative){a+=\"-\"}a=Ext.escapeRe(a);this.maskRe=new RegExp(\"[\"+a+\"]\");if(this.autoStripChars){this.stripCharsRe=new RegExp(\"[^\"+a+\"]\",\"gi\")}Ext.form.NumberField.superclass.initEvents.call(this)},getErrors:function(b){var c=Ext.form.NumberField.superclass.getErrors.apply(this,arguments);b=Ext.isDefined(b)?b:this.processValue(this.getRawValue());if(b.length<1){return c}b=String(b).replace(this.decimalSeparator,\".\");if(isNaN(b)){c.push(String.format(this.nanText,b))}var a=this.parseValue(b);if(a<this.minValue){c.push(String.format(this.minText,this.minValue))}if(a>this.maxValue){c.push(String.format(this.maxText,this.maxValue))}return c},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(a){a=Ext.isNumber(a)?a:parseFloat(String(a).replace(this.decimalSeparator,\".\"));a=this.fixPrecision(a);a=isNaN(a)?\"\":String(a).replace(\".\",this.decimalSeparator);return Ext.form.NumberField.superclass.setValue.call(this,a)},setMinValue:function(a){this.minValue=Ext.num(a,Number.NEGATIVE_INFINITY)},setMaxValue:function(a){this.maxValue=Ext.num(a,Number.MAX_VALUE)},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,\".\"));return isNaN(a)?\"\":a},fixPrecision:function(b){var a=isNaN(b);if(!this.allowDecimals||this.decimalPrecision==-1||a||!b){return a?\"\":b}return parseFloat(parseFloat(b).toFixed(this.decimalPrecision))},beforeBlur:function(){var a=this.parseValue(this.getRawValue());if(!Ext.isEmpty(a)){this.setValue(a)}}});Ext.reg(\"numberfield\",Ext.form.NumberField);Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:\"m/d/Y\",altFormats:\"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j\",disabledDaysText:\"Disabled\",disabledDatesText:\"Disabled\",minText:\"The date in this field must be equal to or after {0}\",maxText:\"The date in this field must be equal to or before {0}\",invalidText:\"{0} is not a valid date - it must be in the format {1}\",triggerClass:\"x-form-date-trigger\",showToday:true,startDay:0,defaultAutoCreate:{tag:\"input\",type:\"text\",size:\"10\",autocomplete:\"off\"},initTime:\"12\",initTimeFormat:\"H\",safeParse:function(b,c){if(Date.formatContainsHourInfo(c)){return Date.parseDate(b,c)}else{var a=Date.parseDate(b+\" \"+this.initTime,c+\" \"+this.initTimeFormat);if(a){return a.clearTime()}}},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this);this.addEvents(\"select\");if(Ext.isString(this.minValue)){this.minValue=this.parseDate(this.minValue)}if(Ext.isString(this.maxValue)){this.maxValue=this.parseDate(this.maxValue)}this.disabledDatesRE=null;this.initDisabledDays()},initEvents:function(){Ext.form.DateField.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{down:function(a){this.onTriggerClick()},scope:this,forceKeyDown:true})},initDisabledDays:function(){if(this.disabledDates){var b=this.disabledDates,a=b.length-1,c=\"(?:\";Ext.each(b,function(g,e){c+=Ext.isDate(g)?\"^\"+Ext.escapeRe(g.dateFormat(this.format))+\"$\":b[e];if(e!=a){c+=\"|\"}},this);this.disabledDatesRE=new RegExp(c+\")\")}},setDisabledDates:function(a){this.disabledDates=a;this.initDisabledDays();if(this.menu){this.menu.picker.setDisabledDates(this.disabledDatesRE)}},setDisabledDays:function(a){this.disabledDays=a;if(this.menu){this.menu.picker.setDisabledDays(a)}},setMinValue:function(a){this.minValue=(Ext.isString(a)?this.parseDate(a):a);if(this.menu){this.menu.picker.setMinDate(this.minValue)}},setMaxValue:function(a){this.maxValue=(Ext.isString(a)?this.parseDate(a):a);if(this.menu){this.menu.picker.setMaxDate(this.maxValue)}},getErrors:function(e){var h=Ext.form.DateField.superclass.getErrors.apply(this,arguments);e=this.formatDate(e||this.processValue(this.getRawValue()));if(e.length<1){return h}var c=e;e=this.parseDate(e);if(!e){h.push(String.format(this.invalidText,c,this.format));return h}var g=e.getTime();if(this.minValue&&g<this.minValue.clearTime().getTime()){h.push(String.format(this.minText,this.formatDate(this.minValue)))}if(this.maxValue&&g>this.maxValue.clearTime().getTime()){h.push(String.format(this.maxText,this.formatDate(this.maxValue)))}if(this.disabledDays){var a=e.getDay();for(var b=0;b<this.disabledDays.length;b++){if(a===this.disabledDays[b]){h.push(this.disabledDaysText);break}}}var d=this.formatDate(e);if(this.disabledDatesRE&&this.disabledDatesRE.test(d)){h.push(String.format(this.disabledDatesText,d))}return h},validateBlur:function(){return !this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||\"\"},setValue:function(a){return Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},parseDate:function(g){if(!g||Ext.isDate(g)){return g}var b=this.safeParse(g,this.format),c=this.altFormats,e=this.altFormatsArray;if(!b&&c){e=e||c.split(\"|\");for(var d=0,a=e.length;d<a&&!b;d++){b=this.safeParse(g,e[d])}}return b},onDestroy:function(){Ext.destroy(this.menu,this.keyNav);Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(a){return Ext.isDate(a)?a.dateFormat(this.format):a},onTriggerClick:function(){if(this.disabled){return}if(this.menu==null){this.menu=new Ext.menu.DateMenu({hideOnClick:false,focusOnSelect:false})}this.onFocus();Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,startDay:this.startDay,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))});this.menu.picker.setValue(this.getValue()||new Date());this.menu.show(this.el,\"tl-bl?\");this.menuEvents(\"on\")},menuEvents:function(a){this.menu[a](\"select\",this.onSelect,this);this.menu[a](\"hide\",this.onMenuHide,this);this.menu[a](\"show\",this.onFocus,this)},onSelect:function(a,b){this.setValue(b);this.fireEvent(\"select\",this,b);this.menu.hide()},onMenuHide:function(){this.focus(false,60);this.menuEvents(\"un\")},beforeBlur:function(){var a=this.parseDate(this.getRawValue());if(a){this.setValue(a)}}});Ext.reg(\"datefield\",Ext.form.DateField);Ext.form.DisplayField=Ext.extend(Ext.form.Field,{validationEvent:false,validateOnBlur:false,defaultAutoCreate:{tag:\"div\"},fieldClass:\"x-form-display-field\",htmlEncode:false,initEvents:Ext.emptyFn,isValid:function(){return true},validate:function(){return true},getRawValue:function(){var a=this.rendered?this.el.dom.innerHTML:Ext.value(this.value,\"\");if(a===this.emptyText){a=\"\"}if(this.htmlEncode){a=Ext.util.Format.htmlDecode(a)}return a},getValue:function(){return this.getRawValue()},getName:function(){return this.name},setRawValue:function(a){if(this.htmlEncode){a=Ext.util.Format.htmlEncode(a)}return this.rendered?(this.el.dom.innerHTML=(Ext.isEmpty(a)?\"\":a)):(this.value=a)},setValue:function(a){this.setRawValue(a);return this}});Ext.reg(\"displayfield\",Ext.form.DisplayField);Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:\"input\",type:\"text\",size:\"24\",autocomplete:\"off\"},listClass:\"\",selectedClass:\"x-combo-selected\",listEmptyText:\"\",triggerClass:\"x-form-arrow-trigger\",shadow:\"sides\",listAlign:\"tl-bl?\",maxHeight:300,minHeight:90,triggerAction:\"query\",minChars:4,autoSelect:true,typeAhead:false,queryDelay:500,pageSize:0,selectOnFocus:false,queryParam:\"query\",loadingText:\"Loading...\",resizable:false,handleHeight:8,allQuery:\"\",mode:\"remote\",minListWidth:70,forceSelection:false,typeAheadDelay:250,lazyInit:true,clearFilterOnReset:true,submitValue:undefined,initComponent:function(){Ext.form.ComboBox.superclass.initComponent.call(this);this.addEvents(\"expand\",\"collapse\",\"beforeselect\",\"select\",\"beforequery\");if(this.transform){var c=Ext.getDom(this.transform);if(!this.hiddenName){this.hiddenName=c.name}if(!this.store){this.mode=\"local\";var j=[],e=c.options;for(var b=0,a=e.length;b<a;b++){var h=e[b],g=(h.hasAttribute?h.hasAttribute(\"value\"):h.getAttributeNode(\"value\").specified)?h.value:h.text;if(h.selected&&Ext.isEmpty(this.value,true)){this.value=g}j.push([g,h.text])}this.store=new Ext.data.ArrayStore({idIndex:0,fields:[\"value\",\"text\"],data:j,autoDestroy:true});this.valueField=\"value\";this.displayField=\"text\"}c.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(c,this.autoCreate||this.defaultAutoCreate);this.render(this.el.parentNode,c)}Ext.removeNode(c)}else{if(this.store){this.store=Ext.StoreMgr.lookup(this.store);if(this.store.autoCreated){this.displayField=this.valueField=\"field1\";if(!this.store.expandData){this.displayField=\"field2\"}this.mode=\"local\"}}}this.selectedIndex=-1;if(this.mode==\"local\"){if(!Ext.isDefined(this.initialConfig.queryDelay)){this.queryDelay=10}if(!Ext.isDefined(this.initialConfig.minChars)){this.minChars=0}}},onRender:function(b,a){if(this.hiddenName&&!Ext.isDefined(this.submitValue)){this.submitValue=false}Ext.form.ComboBox.superclass.onRender.call(this,b,a);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:\"input\",type:\"hidden\",name:this.hiddenName,id:(this.hiddenId||Ext.id())},\"before\",true)}if(Ext.isGecko){this.el.dom.setAttribute(\"autocomplete\",\"off\")}if(!this.lazyInit){this.initList()}else{this.on(\"focus\",this.initList,this,{single:true})}},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this);if(this.hiddenField){this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,\"\")}},getParentZIndex:function(){var a;if(this.ownerCt){this.findParentBy(function(b){a=parseInt(b.getPositionEl().getStyle(\"z-index\"),10);return !!a})}return a},getZIndex:function(b){b=b||Ext.getDom(this.getListParent()||Ext.getBody());var a=parseInt(Ext.fly(b).getStyle(\"z-index\"),10);if(!a){a=this.getParentZIndex()}return(a||12000)+5},initList:function(){if(!this.list){var a=\"x-combo-list\",c=Ext.getDom(this.getListParent()||Ext.getBody());this.list=new Ext.Layer({parentEl:c,shadow:this.shadow,cls:[a,this.listClass].join(\" \"),constrain:false,zindex:this.getZIndex(c)});var b=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setSize(b,0);this.list.swallowEvent(\"mousewheel\");this.assetHeight=0;if(this.syncFont!==false){this.list.setStyle(\"font-size\",this.el.getStyle(\"font-size\"))}if(this.title){this.header=this.list.createChild({cls:a+\"-hd\",html:this.title});this.assetHeight+=this.header.getHeight()}this.innerList=this.list.createChild({cls:a+\"-inner\"});this.mon(this.innerList,\"mouseover\",this.onViewOver,this);this.mon(this.innerList,\"mousemove\",this.onViewMove,this);this.innerList.setWidth(b-this.list.getFrameWidth(\"lr\"));if(this.pageSize){this.footer=this.list.createChild({cls:a+\"-ft\"});this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer});this.assetHeight+=this.footer.getHeight()}if(!this.tpl){this.tpl='<tpl for=\".\"><div class=\"'+a+'-item\">{'+this.displayField+\"}</div></tpl>\"}this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:true,selectedClass:this.selectedClass,itemSelector:this.itemSelector||\".\"+a+\"-item\",emptyText:this.listEmptyText,deferEmptyText:false});this.mon(this.view,{containerclick:this.onViewClick,click:this.onViewClick,scope:this});this.bindStore(this.store,true);if(this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:true,handles:\"se\"});this.mon(this.resizer,\"resize\",function(g,d,e){this.maxHeight=e-this.handleHeight-this.list.getFrameWidth(\"tb\")-this.assetHeight;this.listWidth=d;this.innerList.setWidth(d-this.list.getFrameWidth(\"lr\"));this.restrictHeight()},this);this[this.pageSize?\"footer\":\"innerList\"].setStyle(\"margin-bottom\",this.handleHeight+\"px\")}}},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(a,b){if(this.store&&!b){if(this.store!==a&&this.store.autoDestroy){this.store.destroy()}else{this.store.un(\"beforeload\",this.onBeforeLoad,this);this.store.un(\"load\",this.onLoad,this);this.store.un(\"exception\",this.collapse,this)}if(!a){this.store=null;if(this.view){this.view.bindStore(null)}if(this.pageTb){this.pageTb.bindStore(null)}}}if(a){if(!b){this.lastQuery=null;if(this.pageTb){this.pageTb.bindStore(a)}}this.store=Ext.StoreMgr.lookup(a);this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse});if(this.view){this.view.bindStore(a)}}},reset:function(){if(this.clearFilterOnReset&&this.mode==\"local\"){this.store.clearFilter()}Ext.form.ComboBox.superclass.reset.call(this)},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{up:function(a){this.inKeyMode=true;this.selectPrev()},down:function(a){if(!this.isExpanded()){this.onTriggerClick()}else{this.inKeyMode=true;this.selectNext()}},enter:function(a){this.onViewClick()},esc:function(a){this.collapse()},tab:function(a){if(this.forceSelection===true){this.collapse()}else{this.onViewClick(false)}return true},scope:this,doRelay:function(c,b,a){if(a==\"down\"||this.scope.isExpanded()){var d=Ext.KeyNav.prototype.doRelay.apply(this,arguments);if(!Ext.isIE&&Ext.EventManager.useKeydown){this.scope.fireKey(c)}return d}return true},forceKeyDown:true,defaultEventAction:\"stopEvent\"});this.queryDelay=Math.max(this.queryDelay||10,this.mode==\"local\"?10:250);this.dqTask=new Ext.util.DelayedTask(this.initQuery,this);if(this.typeAhead){this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)}if(!this.enableKeyEvents){this.mon(this.el,\"keyup\",this.onKeyUp,this)}},onDestroy:function(){if(this.dqTask){this.dqTask.cancel();this.dqTask=null}this.bindStore(null);Ext.destroy(this.resizer,this.view,this.pageTb,this.list);Ext.destroyMembers(this,\"hiddenField\");Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(a){if(!this.isExpanded()){Ext.form.ComboBox.superclass.fireKey.call(this,a)}},onResize:function(a,b){Ext.form.ComboBox.superclass.onResize.apply(this,arguments);if(!isNaN(a)&&this.isVisible()&&this.list){this.doResize(a)}else{this.bufferSize=a}},doResize:function(a){if(!Ext.isDefined(this.listWidth)){var b=Math.max(a,this.minListWidth);this.list.setWidth(b);this.innerList.setWidth(b-this.list.getFrameWidth(\"lr\"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=false}},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=true}},onBeforeLoad:function(){if(!this.hasFocus){return}this.innerList.update(this.loadingText?'<div class=\"loading-indicator\">'+this.loadingText+\"</div>\":\"\");this.restrictHeight();this.selectedIndex=-1},onLoad:function(){if(!this.hasFocus){return}if(this.store.getCount()>0||this.listEmptyText){this.expand();this.restrictHeight();if(this.lastQuery==this.allQuery){if(this.editable){this.el.dom.select()}if(this.autoSelect!==false&&!this.selectByValue(this.value,true)){this.select(0,true)}}else{if(this.autoSelect!==false){this.selectNext()}if(this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.taTask.delay(this.typeAheadDelay)}}}else{this.collapse()}},onTypeAhead:function(){if(this.store.getCount()>0){var b=this.store.getAt(0);var c=b.data[this.displayField];var a=c.length;var d=this.getRawValue().length;if(d!=a){this.setRawValue(c);this.selectText(d,c.length)}}},assertValue:function(){var b=this.getRawValue(),a;if(this.valueField&&Ext.isDefined(this.value)){a=this.findRecord(this.valueField,this.value)}if(!a||a.get(this.displayField)!=b){a=this.findRecord(this.displayField,b)}if(!a&&this.forceSelection){if(b.length>0&&b!=this.emptyText){this.el.dom.value=Ext.value(this.lastSelectionText,\"\");this.applyEmptyText()}else{this.clearValue()}}else{if(a&&this.valueField){if(this.value==b){return}b=a.get(this.valueField||this.displayField)}this.setValue(b)}},onSelect:function(a,b){if(this.fireEvent(\"beforeselect\",this,a,b)!==false){this.setValue(a.data[this.valueField||this.displayField]);this.collapse();this.fireEvent(\"select\",this,a,b)}},getName:function(){var a=this.hiddenField;return a&&a.name?a.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){if(this.valueField){return Ext.isDefined(this.value)?this.value:\"\"}else{return Ext.form.ComboBox.superclass.getValue.call(this)}},clearValue:function(){if(this.hiddenField){this.hiddenField.value=\"\"}this.setRawValue(\"\");this.lastSelectionText=\"\";this.applyEmptyText();this.value=\"\"},setValue:function(a){var c=a;if(this.valueField){var b=this.findRecord(this.valueField,a);if(b){c=b.data[this.displayField]}else{if(Ext.isDefined(this.valueNotFoundText)){c=this.valueNotFoundText}}}this.lastSelectionText=c;if(this.hiddenField){this.hiddenField.value=Ext.value(a,\"\")}Ext.form.ComboBox.superclass.setValue.call(this,c);this.value=a;return this},findRecord:function(c,b){var a;if(this.store.getCount()>0){this.store.each(function(d){if(d.data[c]==b){a=d;return false}})}return a},onViewMove:function(b,a){this.inKeyMode=false},onViewOver:function(d,b){if(this.inKeyMode){return}var c=this.view.findItemFromChild(b);if(c){var a=this.view.indexOf(c);this.select(a,false)}},onViewClick:function(b){var a=this.view.getSelectedIndexes()[0],c=this.store,d=c.getAt(a);if(d){this.onSelect(d,a)}else{this.collapse()}if(b!==false){this.el.focus()}},restrictHeight:function(){this.innerList.dom.style.height=\"\";var b=this.innerList.dom,e=this.list.getFrameWidth(\"tb\")+(this.resizable?this.handleHeight:0)+this.assetHeight,c=Math.max(b.clientHeight,b.offsetHeight,b.scrollHeight),a=this.getPosition()[1]-Ext.getBody().getScroll().top,g=Ext.lib.Dom.getViewHeight()-a-this.getSize().height,d=Math.max(a,g,this.minHeight||0)-this.list.shadowOffset-e-5;c=Math.min(c,d,this.maxHeight);this.innerList.setHeight(c);this.list.beginUpdate();this.list.setHeight(c+e);this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(a,c){if(!Ext.isEmpty(a,true)){var b=this.findRecord(this.valueField||this.displayField,a);if(b){this.select(this.store.indexOf(b),c);return true}}return false},select:function(a,c){this.selectedIndex=a;this.view.select(a);if(c!==false){var b=this.view.getNode(a);if(b){this.innerList.scrollChildIntoView(b,false)}}},selectNext:function(){var a=this.store.getCount();if(a>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex<a-1){this.select(this.selectedIndex+1)}}}},selectPrev:function(){var a=this.store.getCount();if(a>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex!==0){this.select(this.selectedIndex-1)}}}},onKeyUp:function(b){var a=b.getKey();if(this.editable!==false&&this.readOnly!==true&&(a==b.BACKSPACE||!b.isSpecialKey())){this.lastKey=a;this.dqTask.delay(this.queryDelay)}Ext.form.ComboBox.superclass.onKeyUp.call(this,b)},validateBlur:function(){return !this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.form.ComboBox.superclass.postBlur.call(this);this.collapse();this.inKeyMode=false},doQuery:function(c,b){c=Ext.isEmpty(c)?\"\":c;var a={query:c,forceAll:b,combo:this,cancel:false};if(this.fireEvent(\"beforequery\",a)===false||a.cancel){return false}c=a.query;b=a.forceAll;if(b===true||(c.length>=this.minChars)){if(this.lastQuery!==c){this.lastQuery=c;if(this.mode==\"local\"){this.selectedIndex=-1;if(b){this.store.clearFilter()}else{this.store.filter(this.displayField,c)}this.onLoad()}else{this.store.baseParams[this.queryParam]=c;this.store.load({params:this.getParams(c)});this.expand()}}else{this.selectedIndex=-1;this.onLoad()}}},getParams:function(a){var b={},c=this.store.paramNames;if(this.pageSize){b[c.start]=0;b[c.limit]=this.pageSize}return b},collapse:function(){if(!this.isExpanded()){return}this.list.hide();Ext.getDoc().un(\"mousewheel\",this.collapseIf,this);Ext.getDoc().un(\"mousedown\",this.collapseIf,this);this.fireEvent(\"collapse\",this)},collapseIf:function(a){if(!this.isDestroyed&&!a.within(this.wrap)&&!a.within(this.list)){this.collapse()}},expand:function(){if(this.isExpanded()||!this.hasFocus){return}if(this.title||this.pageSize){this.assetHeight=0;if(this.title){this.assetHeight+=this.header.getHeight()}if(this.pageSize){this.assetHeight+=this.footer.getHeight()}}if(this.bufferSize){this.doResize(this.bufferSize);delete this.bufferSize}this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.setZIndex(this.getZIndex());this.list.show();if(Ext.isGecko2){this.innerList.setOverflow(\"auto\")}this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf});this.fireEvent(\"expand\",this)},onTriggerClick:function(){if(this.readOnly||this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}else{this.onFocus({});if(this.triggerAction==\"all\"){this.doQuery(this.allQuery,true)}else{this.doQuery(this.getRawValue())}this.el.focus()}}});Ext.reg(\"combo\",Ext.form.ComboBox);Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:undefined,fieldClass:\"x-form-field\",checked:false,boxLabel:\"&#160;\",defaultAutoCreate:{tag:\"input\",type:\"checkbox\",autocomplete:\"off\"},actionMode:\"wrap\",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents(\"check\")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel){this.el.alignTo(this.wrap,\"c-c\")}},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.mon(this.el,{scope:this,click:this.onClick,change:this.onClick})},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(b,a){Ext.form.Checkbox.superclass.onRender.call(this,b,a);if(this.inputValue!==undefined){this.el.dom.value=this.inputValue}this.wrap=this.el.wrap({cls:\"x-form-check-wrap\"});if(this.boxLabel){this.wrap.createChild({tag:\"label\",htmlFor:this.el.id,cls:\"x-form-cb-label\",html:this.boxLabel})}if(this.checked){this.setValue(true)}else{this.checked=this.el.dom.checked}if(Ext.isIE&&!Ext.isStrict){this.wrap.repaint()}this.resizeEl=this.positionEl=this.wrap},onDestroy:function(){Ext.destroy(this.wrap);Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:function(){this.originalValue=this.getValue()},getValue:function(){if(this.rendered){return this.el.dom.checked}return this.checked},onClick:function(){if(this.el.dom.checked!=this.checked){this.setValue(this.el.dom.checked)}},setValue:function(a){var c=this.checked,b=this.inputValue;if(a===false){this.checked=false}else{this.checked=(a===true||a===\"true\"||a==\"1\"||(b?a==b:String(a).toLowerCase()==\"on\"))}if(this.rendered){this.el.dom.checked=this.checked;this.el.dom.defaultChecked=this.checked}if(c!=this.checked){this.fireEvent(\"check\",this,this.checked);if(this.handler){this.handler.call(this.scope||this,this,this.checked)}}return this}});Ext.reg(\"checkbox\",Ext.form.Checkbox);Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:\"auto\",vertical:false,allowBlank:true,blankText:\"You must select at least one item in this group\",defaultType:\"checkbox\",groupCls:\"x-form-check-group\",initComponent:function(){this.addEvents(\"change\");this.on(\"change\",this.validate,this);Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(j,g){if(!this.el){var p={autoEl:{id:this.id},cls:this.groupCls,layout:\"column\",renderTo:j,bufferResize:false};var a={xtype:\"container\",defaultType:this.defaultType,layout:\"form\",defaults:{hideLabel:true,anchor:\"100%\"}};if(this.items[0].items){Ext.apply(p,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var e=0,m=this.items.length;e<m;e++){Ext.applyIf(this.items[e],a)}}else{var d,n=[];if(typeof this.columns==\"string\"){this.columns=this.items.length}if(!Ext.isArray(this.columns)){var k=[];for(var e=0;e<this.columns;e++){k.push((100/this.columns)*0.01)}this.columns=k}d=this.columns.length;for(var e=0;e<d;e++){var b=Ext.apply({items:[]},a);b[this.columns[e]<=1?\"columnWidth\":\"width\"]=this.columns[e];if(this.defaults){b.defaults=Ext.apply(b.defaults||{},this.defaults)}n.push(b)}if(this.vertical){var r=Math.ceil(this.items.length/d),o=0;for(var e=0,m=this.items.length;e<m;e++){if(e>0&&e%r==0){o++}if(this.items[e].fieldLabel){this.items[e].hideLabel=false}n[o].items.push(this.items[e])}}else{for(var e=0,m=this.items.length;e<m;e++){var q=e%d;if(this.items[e].fieldLabel){this.items[e].hideLabel=false}n[q].items.push(this.items[e])}}Ext.apply(p,{layoutConfig:{columns:d},items:n})}this.panel=new Ext.Container(p);this.panel.ownerCt=this;this.el=this.panel.getEl();if(this.forId&&this.itemCls){var c=this.el.up(this.itemCls).child(\"label\",true);if(c){c.setAttribute(\"htmlFor\",this.forId)}}var h=this.panel.findBy(function(i){return i.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(h)}Ext.form.CheckboxGroup.superclass.onRender.call(this,j,g)},initValue:function(){if(this.value){this.setValue.apply(this,this.buffered?this.value:[this.value]);delete this.buffered;delete this.value}},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this);this.eachItem(function(a){a.on(\"check\",this.fireChecked,this);a.inGroup=true})},doLayout:function(){if(this.rendered){this.panel.forceLayout=this.ownerCt.forceLayout;this.panel.doLayout()}},fireChecked:function(){var a=[];this.eachItem(function(b){if(b.checked){a.push(b)}});this.fireEvent(\"change\",this,a)},getErrors:function(){var b=Ext.form.CheckboxGroup.superclass.getErrors.apply(this,arguments);if(!this.allowBlank){var a=true;this.eachItem(function(c){if(c.checked){return(a=false)}});if(a){b.push(this.blankText)}}return b},isDirty:function(){if(this.disabled||!this.rendered){return false}var a=false;this.eachItem(function(b){if(b.isDirty()){a=true;return false}});return a},setReadOnly:function(a){if(this.rendered){this.eachItem(function(b){b.setReadOnly(a)})}this.readOnly=a},onDisable:function(){this.eachItem(function(a){a.disable()})},onEnable:function(){this.eachItem(function(a){a.enable()})},onResize:function(a,b){this.panel.setSize(a,b);this.panel.doLayout()},reset:function(){if(this.originalValue){this.eachItem(function(a){if(a.setValue){a.setValue(false);a.originalValue=a.getValue()}});this.resetOriginal=true;this.setValue(this.originalValue);delete this.resetOriginal}else{this.eachItem(function(a){if(a.reset){a.reset()}})}(function(){this.clearInvalid()}).defer(50,this)},setValue:function(){if(this.rendered){this.onSetValue.apply(this,arguments)}else{this.buffered=true;this.value=arguments}return this},onSetValue:function(d,c){if(arguments.length==1){if(Ext.isArray(d)){Ext.each(d,function(h,e){if(Ext.isObject(h)&&h.setValue){h.setValue(true);if(this.resetOriginal===true){h.originalValue=h.getValue()}}else{var g=this.items.itemAt(e);if(g){g.setValue(h)}}},this)}else{if(Ext.isObject(d)){for(var a in d){var b=this.getBox(a);if(b){b.setValue(d[a])}}}else{this.setValueForItem(d)}}}else{var b=this.getBox(d);if(b){b.setValue(c)}}},beforeDestroy:function(){Ext.destroy(this.panel);if(!this.rendered){Ext.destroy(this.items)}Ext.form.CheckboxGroup.superclass.beforeDestroy.call(this)},setValueForItem:function(a){a=String(a).split(\",\");this.eachItem(function(b){if(a.indexOf(b.inputValue)>-1){b.setValue(true)}})},getBox:function(b){var a=null;this.eachItem(function(c){if(b==c||c.dataIndex==b||c.id==b||c.getName()==b){a=c;return false}});return a},getValue:function(){var a=[];this.eachItem(function(b){if(b.checked){a.push(b)}});return a},eachItem:function(b,a){if(this.items&&this.items.each){this.items.each(b,a||this)}},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn});Ext.reg(\"checkboxgroup\",Ext.form.CheckboxGroup);Ext.form.CompositeField=Ext.extend(Ext.form.Field,{defaultMargins:\"0 5 0 0\",skipLastItemMargin:true,isComposite:true,combineErrors:true,labelConnector:\", \",initComponent:function(){var g=[],b=this.items,e;for(var d=0,c=b.length;d<c;d++){e=b[d];if(!Ext.isEmpty(e.ref)){e.ref=\"../\"+e.ref}g.push(e.fieldLabel);Ext.applyIf(e,this.defaults);if(!(d==c-1&&this.skipLastItemMargin)){Ext.applyIf(e,{margins:this.defaultMargins})}}this.fieldLabel=this.fieldLabel||this.buildLabel(g);this.fieldErrors=new Ext.util.MixedCollection(true,function(h){return h.field});this.fieldErrors.on({scope:this,add:this.updateInvalidMark,remove:this.updateInvalidMark,replace:this.updateInvalidMark});Ext.form.CompositeField.superclass.initComponent.apply(this,arguments);this.innerCt=new Ext.Container({layout:\"hbox\",items:this.items,cls:\"x-form-composite\",defaultMargins:\"0 3 0 0\",ownerCt:this});this.innerCt.ownerCt=undefined;var a=this.innerCt.findBy(function(h){return h.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(a)},onRender:function(c,a){if(!this.el){var d=this.innerCt;d.render(c);this.el=d.getEl();if(this.combineErrors){this.eachItem(function(e){Ext.apply(e,{markInvalid:this.onFieldMarkInvalid.createDelegate(this,[e],0),clearInvalid:this.onFieldClearInvalid.createDelegate(this,[e],0)})})}var b=this.el.parent().parent().child(\"label\",true);if(b){b.setAttribute(\"for\",this.items.items[0].id)}}Ext.form.CompositeField.superclass.onRender.apply(this,arguments)},onFieldMarkInvalid:function(d,c){var b=d.getName(),a={field:b,errorName:d.fieldLabel||b,error:c};this.fieldErrors.replace(b,a);if(!d.preventMark){d.el.addClass(d.invalidClass)}},onFieldClearInvalid:function(a){this.fieldErrors.removeKey(a.getName());a.el.removeClass(a.invalidClass)},updateInvalidMark:function(){var a=Ext.isIE6&&Ext.isStrict;if(this.fieldErrors.length==0){this.clearInvalid();if(a){this.clearInvalid.defer(50,this)}}else{var b=this.buildCombinedErrorMessage(this.fieldErrors.items);this.sortErrors();this.markInvalid(b);if(a){this.markInvalid(b)}}},validateValue:function(c,a){var b=true;this.eachItem(function(d){if(!d.isValid(a)){b=false}});return b},buildCombinedErrorMessage:function(e){var d=[],b;for(var c=0,a=e.length;c<a;c++){b=e[c];d.push(String.format(\"{0}: {1}\",b.errorName,b.error))}return d.join(\"<br />\")},sortErrors:function(){var a=this.items;this.fieldErrors.sort(\"ASC\",function(g,d){var c=function(b){return function(i){return i.getName()==b}};var h=a.findIndexBy(c(g.field)),e=a.findIndexBy(c(d.field));return h<e?-1:1})},reset:function(){this.eachItem(function(a){a.reset()});(function(){this.clearInvalid()}).defer(50,this)},clearInvalidChildren:function(){this.eachItem(function(a){a.clearInvalid()})},buildLabel:function(a){return Ext.clean(a).join(this.labelConnector)},isDirty:function(){if(this.disabled||!this.rendered){return false}var a=false;this.eachItem(function(b){if(b.isDirty()){a=true;return false}});return a},eachItem:function(b,a){if(this.items&&this.items.each){this.items.each(b,a||this)}},onResize:function(e,c,a,d){var b=this.innerCt;if(this.rendered&&b.rendered){b.setSize(e,c)}Ext.form.CompositeField.superclass.onResize.apply(this,arguments)},doLayout:function(c,b){if(this.rendered){var a=this.innerCt;a.forceLayout=this.ownerCt.forceLayout;a.doLayout(c,b)}},beforeDestroy:function(){Ext.destroy(this.innerCt);Ext.form.CompositeField.superclass.beforeDestroy.call(this)},setReadOnly:function(a){if(a==undefined){a=true}a=!!a;if(this.rendered){this.eachItem(function(b){b.setReadOnly(a)})}this.readOnly=a},onShow:function(){Ext.form.CompositeField.superclass.onShow.call(this);this.doLayout()},onDisable:function(){this.eachItem(function(a){a.disable()})},onEnable:function(){this.eachItem(function(a){a.enable()})}});Ext.reg(\"compositefield\",Ext.form.CompositeField);Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:\"radio\",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var a=this.el.up(\"form\")||Ext.getBody();var b=a.child('input[name=\"'+this.el.dom.name+'\"]:checked',true);return b?b.value:null},setValue:function(b){var a,d,c;if(typeof b==\"boolean\"){Ext.form.Radio.superclass.setValue.call(this,b)}else{if(this.rendered){a=this.getCheckEl();c=a.child('input[name=\"'+this.el.dom.name+'\"][value=\"'+b+'\"]',true);if(c){Ext.getCmp(c.id).setValue(true)}}}if(this.rendered&&this.checked){a=a||this.getCheckEl();d=this.getCheckEl().select('input[name=\"'+this.el.dom.name+'\"]');d.each(function(e){if(e.dom.id!=this.id){Ext.getCmp(e.dom.id).setValue(false)}},this)}return this},getCheckEl:function(){if(this.inGroup){return this.el.up(\".x-form-radio-group\")}return this.el.up(\"form\")||Ext.getBody()}});Ext.reg(\"radio\",Ext.form.Radio);Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:true,blankText:\"You must select one item in this group\",defaultType:\"radio\",groupCls:\"x-form-radio-group\",getValue:function(){var a=null;this.eachItem(function(b){if(b.checked){a=b;return false}});return a},onSetValue:function(c,b){if(arguments.length>1){var a=this.getBox(c);if(a){a.setValue(b);if(a.checked){this.eachItem(function(d){if(d!==a){d.setValue(false)}})}}}else{this.setValueForItem(c)}},setValueForItem:function(a){a=String(a).split(\",\")[0];this.eachItem(function(b){b.setValue(a==b.inputValue)})},fireChecked:function(){if(!this.checkTask){this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)}this.checkTask.delay(10)},bufferChecked:function(){var a=null;this.eachItem(function(b){if(b.checked){a=b;return false}});this.fireEvent(\"change\",this,a)},onDestroy:function(){if(this.checkTask){this.checkTask.cancel();this.checkTask=null}Ext.form.RadioGroup.superclass.onDestroy.call(this)}});Ext.reg(\"radiogroup\",Ext.form.RadioGroup);Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:\"hidden\",shouldLayout:false,onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg(\"hidden\",Ext.form.Hidden);Ext.form.BasicForm=Ext.extend(Ext.util.Observable,{constructor:function(b,a){Ext.apply(this,a);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\\s,|]/)}this.items=new Ext.util.MixedCollection(false,function(c){return c.getItemId()});this.addEvents(\"beforeaction\",\"actionfailed\",\"actioncomplete\");if(b){this.initEl(b)}Ext.form.BasicForm.superclass.constructor.call(this)},timeout:30,paramOrder:undefined,paramsAsHash:false,waitTitle:\"Please Wait...\",activeAction:null,trackResetOnLoad:false,initEl:function(a){this.el=Ext.get(a);this.id=this.el.id||Ext.id();if(!this.standardSubmit){this.el.on(\"submit\",this.onSubmit,this)}this.el.addClass(\"x-form\")},getEl:function(){return this.el},onSubmit:function(a){a.stopEvent()},destroy:function(a){if(a!==true){this.items.each(function(b){Ext.destroy(b)});Ext.destroy(this.el)}this.items.clear();this.purgeListeners()},isValid:function(){var a=true;this.items.each(function(b){if(!b.validate()){a=false}});return a},isDirty:function(){var a=false;this.items.each(function(b){if(b.isDirty()){a=true;return false}});return a},doAction:function(b,a){if(Ext.isString(b)){b=new Ext.form.Action.ACTION_TYPES[b](this,a)}if(this.fireEvent(\"beforeaction\",this,b)!==false){this.beforeAction(b);b.run.defer(100,b)}return this},submit:function(b){b=b||{};if(this.standardSubmit){var a=b.clientValidation===false||this.isValid();if(a){var c=this.el.dom;if(this.url&&Ext.isEmpty(c.action)){c.action=this.url}c.submit()}return a}var d=String.format(\"{0}submit\",this.api?\"direct\":\"\");this.doAction(d,b);return this},load:function(a){var b=String.format(\"{0}load\",this.api?\"direct\":\"\");this.doAction(b,a);return this},updateRecord:function(b){b.beginEdit();var a=b.fields,d,c;a.each(function(e){d=this.findField(e.name);if(d){c=d.getValue();if(Ext.type(c)!==false&&c.getGroupValue){c=c.getGroupValue()}else{if(d.eachItem){c=[];d.eachItem(function(g){c.push(g.getValue())})}}b.set(e.name,c)}},this);b.endEdit();return this},loadRecord:function(a){this.setValues(a.data);return this},beforeAction:function(a){this.items.each(function(c){if(c.isFormField&&c.syncValue){c.syncValue()}});var b=a.options;if(b.waitMsg){if(this.waitMsgTarget===true){this.el.mask(b.waitMsg,\"x-mask-loading\")}else{if(this.waitMsgTarget){this.waitMsgTarget=Ext.get(this.waitMsgTarget);this.waitMsgTarget.mask(b.waitMsg,\"x-mask-loading\")}else{Ext.MessageBox.wait(b.waitMsg,b.waitTitle||this.waitTitle)}}}},afterAction:function(a,c){this.activeAction=null;var b=a.options;if(b.waitMsg){if(this.waitMsgTarget===true){this.el.unmask()}else{if(this.waitMsgTarget){this.waitMsgTarget.unmask()}else{Ext.MessageBox.updateProgress(1);Ext.MessageBox.hide()}}}if(c){if(b.reset){this.reset()}Ext.callback(b.success,b.scope,[this,a]);this.fireEvent(\"actioncomplete\",this,a)}else{Ext.callback(b.failure,b.scope,[this,a]);this.fireEvent(\"actionfailed\",this,a)}},findField:function(c){var b=this.items.get(c);if(!Ext.isObject(b)){var a=function(d){if(d.isFormField){if(d.dataIndex==c||d.id==c||d.getName()==c){b=d;return false}else{if(d.isComposite){return d.items.each(a)}else{if(d instanceof Ext.form.CheckboxGroup&&d.rendered){return d.eachItem(a)}}}}};this.items.each(a)}return b||null},markInvalid:function(h){if(Ext.isArray(h)){for(var c=0,a=h.length;c<a;c++){var b=h[c];var d=this.findField(b.id);if(d){d.markInvalid(b.msg)}}}else{var e,g;for(g in h){if(!Ext.isFunction(h[g])&&(e=this.findField(g))){e.markInvalid(h[g])}}}return this},setValues:function(c){if(Ext.isArray(c)){for(var d=0,a=c.length;d<a;d++){var b=c[d];var e=this.findField(b.id);if(e){e.setValue(b.value);if(this.trackResetOnLoad){e.originalValue=e.getValue()}}}}else{var g,h;for(h in c){if(!Ext.isFunction(c[h])&&(g=this.findField(h))){g.setValue(c[h]);if(this.trackResetOnLoad){g.originalValue=g.getValue()}}}}return this},getValues:function(b){var a=Ext.lib.Ajax.serializeForm(this.el.dom);if(b===true){return a}return Ext.urlDecode(a)},getFieldValues:function(a){var d={},e,b,c;this.items.each(function(g){if(!g.disabled&&(a!==true||g.isDirty())){e=g.getName();b=d[e];c=g.getValue();if(Ext.isDefined(b)){if(Ext.isArray(b)){d[e].push(c)}else{d[e]=[b,c]}}else{d[e]=c}}});return d},clearInvalid:function(){this.items.each(function(a){a.clearInvalid()});return this},reset:function(){this.items.each(function(a){a.reset()});return this},add:function(){this.items.addAll(Array.prototype.slice.call(arguments,0));return this},remove:function(a){this.items.remove(a);return this},cleanDestroyed:function(){this.items.filterBy(function(a){return !!a.isDestroyed}).each(this.remove,this)},render:function(){this.items.each(function(a){if(a.isFormField&&!a.rendered&&document.getElementById(a.id)){a.applyToMarkup(a.id)}});return this},applyToFields:function(a){this.items.each(function(b){Ext.apply(b,a)});return this},applyIfToFields:function(a){this.items.each(function(b){Ext.applyIf(b,a)});return this},callFieldMethod:function(b,a){a=a||[];this.items.each(function(c){if(Ext.isFunction(c[b])){c[b].apply(c,a)}});return this}});Ext.BasicForm=Ext.form.BasicForm;Ext.FormPanel=Ext.extend(Ext.Panel,{minButtonWidth:75,labelAlign:\"left\",monitorValid:false,monitorPoll:200,layout:\"form\",initComponent:function(){this.form=this.createForm();Ext.FormPanel.superclass.initComponent.call(this);this.bodyCfg={tag:\"form\",cls:this.baseCls+\"-body\",method:this.method||\"POST\",id:this.formId||Ext.id()};if(this.fileUpload){this.bodyCfg.enctype=\"multipart/form-data\"}this.initItems();this.addEvents(\"clientvalidation\");this.relayEvents(this.form,[\"beforeaction\",\"actionfailed\",\"actioncomplete\"])},createForm:function(){var a=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,a)},initFields:function(){var c=this.form;var a=this;var b=function(d){if(a.isField(d)){c.add(d)}else{if(d.findBy&&d!=a){a.applySettings(d);if(d.items&&d.items.each){d.items.each(b,this)}}}};this.items.each(b,this)},applySettings:function(b){var a=b.ownerCt;Ext.applyIf(b,{labelAlign:a.labelAlign,labelWidth:a.labelWidth,itemCls:a.itemCls})},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(b,a){this.initFields();Ext.FormPanel.superclass.onRender.call(this,b,a);this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring();this.form.destroy(true);Ext.FormPanel.superclass.beforeDestroy.call(this)},isField:function(a){return !!a.setValue&&!!a.getValue&&!!a.markInvalid&&!!a.clearInvalid},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this);this.on({scope:this,add:this.onAddEvent,remove:this.onRemoveEvent});if(this.monitorValid){this.startMonitoring()}},onAdd:function(a){Ext.FormPanel.superclass.onAdd.call(this,a);this.processAdd(a)},onAddEvent:function(a,b){if(a!==this){this.processAdd(b)}},processAdd:function(a){if(this.isField(a)){this.form.add(a)}else{if(a.findBy){this.applySettings(a);this.form.add.apply(this.form,a.findBy(this.isField))}}},onRemove:function(a){Ext.FormPanel.superclass.onRemove.call(this,a);this.processRemove(a)},onRemoveEvent:function(a,b){if(a!==this){this.processRemove(b)}},processRemove:function(a){if(!this.destroying){if(this.isField(a)){this.form.remove(a)}else{if(a.findBy){Ext.each(a.findBy(this.isField),this.form.remove,this.form);this.form.cleanDestroyed()}}}},startMonitoring:function(){if(!this.validTask){this.validTask=new Ext.util.TaskRunner();this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this})}},stopMonitoring:function(){if(this.validTask){this.validTask.stopAll();this.validTask=null}},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this);if(this.form){this.form.items.each(function(){this.disable()})}},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this);if(this.form){this.form.items.each(function(){this.enable()})}},bindHandler:function(){var e=true;this.form.items.each(function(g){if(!g.isValid(true)){e=false;return false}});if(this.fbar){var b=this.fbar.items.items;for(var d=0,a=b.length;d<a;d++){var c=b[d];if(c.formBind===true&&c.disabled===e){c.setDisabled(!e)}}}this.fireEvent(\"clientvalidation\",this,e)}});Ext.reg(\"form\",Ext.FormPanel);Ext.form.FormPanel=Ext.FormPanel;Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:\"x-fieldset\",layout:\"form\",animCollapse:false,onRender:function(b,a){if(!this.el){this.el=document.createElement(\"fieldset\");this.el.id=this.id;if(this.title||this.header||this.checkboxToggle){this.el.appendChild(document.createElement(\"legend\")).className=this.baseCls+\"-header\"}}Ext.form.FieldSet.superclass.onRender.call(this,b,a);if(this.checkboxToggle){var c=typeof this.checkboxToggle==\"object\"?this.checkboxToggle:{tag:\"input\",type:\"checkbox\",name:this.checkboxName||this.id+\"-checkbox\"};this.checkbox=this.header.insertFirst(c);this.checkbox.dom.checked=!this.collapsed;this.mon(this.checkbox,\"click\",this.onCheckClick,this)}},onCollapse:function(a,b){if(this.checkbox){this.checkbox.dom.checked=false}Ext.form.FieldSet.superclass.onCollapse.call(this,a,b)},onExpand:function(a,b){if(this.checkbox){this.checkbox.dom.checked=true}Ext.form.FieldSet.superclass.onExpand.call(this,a,b)},onCheckClick:function(){this[this.checkbox.dom.checked?\"expand\":\"collapse\"]()}});Ext.reg(\"fieldset\",Ext.form.FieldSet);Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:\"Please enter the URL for the link:\",defaultLinkValue:\"http://\",fontFamilies:[\"Arial\",\"Courier New\",\"Tahoma\",\"Times New Roman\",\"Verdana\"],defaultFont:\"tahoma\",defaultValue:(Ext.isOpera||Ext.isIE6)?\"&#160;\":\"&#8203;\",actionMode:\"wrap\",validationEvent:false,deferHeight:true,initialized:false,activated:false,sourceEditMode:false,onFocus:Ext.emptyFn,iframePad:3,hideMode:\"offsets\",defaultAutoCreate:{tag:\"textarea\",style:\"width:500px;height:300px;\",autocomplete:\"off\"},initComponent:function(){this.addEvents(\"initialize\",\"activate\",\"beforesync\",\"beforepush\",\"sync\",\"push\",\"editmodechange\");Ext.form.HtmlEditor.superclass.initComponent.call(this)},createFontOptions:function(){var d=[],b=this.fontFamilies,c,g;for(var e=0,a=b.length;e<a;e++){c=b[e];g=c.toLowerCase();d.push('<option value=\"',g,'\" style=\"font-family:',c,';\"',(this.defaultFont==g?' selected=\"true\">':\">\"),c,\"</option>\")}return d.join(\"\")},createToolbar:function(e){var c=[];var a=Ext.QuickTips&&Ext.QuickTips.isEnabled();function d(j,h,i){return{itemId:j,cls:\"x-btn-icon\",iconCls:\"x-edit-\"+j,enableToggle:h!==false,scope:e,handler:i||e.relayBtnCmd,clickEvent:\"mousedown\",tooltip:a?e.buttonTips[j]||undefined:undefined,overflowText:e.buttonTips[j].title||undefined,tabIndex:-1}}if(this.enableFont&&!Ext.isSafari2){var g=new Ext.Toolbar.Item({autoEl:{tag:\"select\",cls:\"x-font-select\",html:this.createFontOptions()}});c.push(g,\"-\")}if(this.enableFormat){c.push(d(\"bold\"),d(\"italic\"),d(\"underline\"))}if(this.enableFontSize){c.push(\"-\",d(\"increasefontsize\",false,this.adjustFont),d(\"decreasefontsize\",false,this.adjustFont))}if(this.enableColors){c.push(\"-\",{itemId:\"forecolor\",cls:\"x-btn-icon\",iconCls:\"x-edit-forecolor\",clickEvent:\"mousedown\",tooltip:a?e.buttonTips.forecolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:true,focus:Ext.emptyFn,value:\"000000\",plain:true,listeners:{scope:this,select:function(i,h){this.execCmd(\"forecolor\",Ext.isWebKit||Ext.isIE?\"#\"+h:h);this.deferFocus()}},clickEvent:\"mousedown\"})},{itemId:\"backcolor\",cls:\"x-btn-icon\",iconCls:\"x-edit-backcolor\",clickEvent:\"mousedown\",tooltip:a?e.buttonTips.backcolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:\"FFFFFF\",plain:true,allowReselect:true,listeners:{scope:this,select:function(i,h){if(Ext.isGecko){this.execCmd(\"useCSS\",false);this.execCmd(\"hilitecolor\",h);this.execCmd(\"useCSS\",true);this.deferFocus()}else{this.execCmd(Ext.isOpera?\"hilitecolor\":\"backcolor\",Ext.isWebKit||Ext.isIE?\"#\"+h:h);this.deferFocus()}}},clickEvent:\"mousedown\"})})}if(this.enableAlignments){c.push(\"-\",d(\"justifyleft\"),d(\"justifycenter\"),d(\"justifyright\"))}if(!Ext.isSafari2){if(this.enableLinks){c.push(\"-\",d(\"createlink\",false,this.createLink))}if(this.enableLists){c.push(\"-\",d(\"insertorderedlist\"),d(\"insertunorderedlist\"))}if(this.enableSourceEdit){c.push(\"-\",d(\"sourceedit\",true,function(h){this.toggleSourceEdit(!this.sourceEditMode)}))}}var b=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild,items:c});if(g){this.fontSelect=g.el;this.mon(this.fontSelect,\"change\",function(){var h=this.fontSelect.dom.value;this.relayCmd(\"fontname\",h);this.deferFocus()},this)}this.mon(b.el,\"click\",function(h){h.preventDefault()});this.tb=b;this.tb.doLayout()},onDisable:function(){this.wrap.mask();Ext.form.HtmlEditor.superclass.onDisable.call(this)},onEnable:function(){this.wrap.unmask();Ext.form.HtmlEditor.superclass.onEnable.call(this)},setReadOnly:function(b){Ext.form.HtmlEditor.superclass.setReadOnly.call(this,b);if(this.initialized){if(Ext.isIE){this.getEditorBody().contentEditable=!b}else{this.setDesignMode(!b)}var a=this.getEditorBody();if(a){a.style.cursor=this.readOnly?\"default\":\"text\"}this.disableItems(b)}},getDocMarkup:function(){var a=Ext.fly(this.iframe).getHeight()-this.iframePad*2;return String.format('<html><head><style type=\"text/css\">body{border: 0; margin: 0; padding: {0}px; height: {1}px; cursor: text}</style></head><body></body></html>',this.iframePad,a)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:(this.iframe.contentDocument||this.getWin().document)},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(b,a){Ext.form.HtmlEditor.superclass.onRender.call(this,b,a);this.el.dom.style.border=\"0 none\";this.el.dom.setAttribute(\"tabIndex\",-1);this.el.addClass(\"x-hidden\");if(Ext.isIE){this.el.applyStyles(\"margin-top:-1px;margin-bottom:-1px;\")}this.wrap=this.el.wrap({cls:\"x-html-editor-wrap\",cn:{cls:\"x-html-editor-tb\"}});this.createToolbar(this);this.disableItems(true);this.tb.doLayout();this.createIFrame();if(!this.width){var c=this.el.getSize();this.setSize(c.width,this.height||c.height)}this.resizeEl=this.positionEl=this.wrap},createIFrame:function(){var a=document.createElement(\"iframe\");a.name=Ext.id();a.frameBorder=\"0\";a.style.overflow=\"auto\";a.src=Ext.SSL_SECURE_URL;this.wrap.dom.appendChild(a);this.iframe=a;this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100})},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);var b=this.getDoc();this.win=this.getWin();b.open();b.write(this.getDocMarkup());b.close();var a={run:function(){var c=this.getDoc();if(c.body||c.readyState==\"complete\"){Ext.TaskMgr.stop(a);this.setDesignMode(true);this.initEditor.defer(10,this)}},interval:10,duration:10000,scope:this};Ext.TaskMgr.start(a)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var a=this.getDoc();if(!a){return}if(!a.editorInitialized||this.getDesignMode()!=\"on\"){this.initFrame()}}},setDesignMode:function(b){var a=this.getDoc();if(a){if(this.readOnly){b=false}a.designMode=(/on|true/i).test(String(b).toLowerCase())?\"on\":\"off\"}},getDesignMode:function(){var a=this.getDoc();if(!a){return\"\"}return String(a.designMode).toLowerCase()},disableItems:function(a){if(this.fontSelect){this.fontSelect.dom.disabled=a}this.tb.items.each(function(b){if(b.getItemId()!=\"sourceedit\"){b.setDisabled(a)}})},onResize:function(b,c){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(Ext.isNumber(b)){var e=b-this.wrap.getFrameWidth(\"lr\");this.el.setWidth(e);this.tb.setWidth(e);this.iframe.style.width=Math.max(e,0)+\"px\"}if(Ext.isNumber(c)){var a=c-this.wrap.getFrameWidth(\"tb\")-this.tb.el.getHeight();this.el.setHeight(a);this.iframe.style.height=Math.max(a,0)+\"px\";var d=this.getEditorBody();if(d){d.style.height=Math.max((a-(this.iframePad*2)),0)+\"px\"}}}},toggleSourceEdit:function(b){var d,a;if(b===undefined){b=!this.sourceEditMode}this.sourceEditMode=b===true;var c=this.tb.getComponent(\"sourceedit\");if(c.pressed!==this.sourceEditMode){c.toggle(this.sourceEditMode);if(!c.xtbHidden){return}}if(this.sourceEditMode){this.previousSize=this.getSize();d=Ext.get(this.iframe).getHeight();this.disableItems(true);this.syncValue();this.iframe.className=\"x-hidden\";this.el.removeClass(\"x-hidden\");this.el.dom.removeAttribute(\"tabIndex\");this.el.focus();this.el.dom.style.height=d+\"px\"}else{a=parseInt(this.el.dom.style.height,10);if(this.initialized){this.disableItems(this.readOnly)}this.pushValue();this.iframe.className=\"\";this.el.addClass(\"x-hidden\");this.el.dom.setAttribute(\"tabIndex\",-1);this.deferFocus();this.setSize(this.previousSize);delete this.previousSize;this.iframe.style.height=a+\"px\"}this.fireEvent(\"editmodechange\",this,this.sourceEditMode)},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);if(a&&a!=\"http://\"){this.relayCmd(\"createlink\",a)}},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(a){Ext.form.HtmlEditor.superclass.setValue.call(this,a);this.pushValue();return this},cleanHtml:function(a){a=String(a);if(Ext.isWebKit){a=a.replace(/\\sclass=\"(?:Apple-style-span|khtml-block-placeholder)\"/gi,\"\")}if(a.charCodeAt(0)==this.defaultValue.replace(/\\D/g,\"\")){a=a.substring(1)}return a},syncValue:function(){if(this.initialized){var d=this.getEditorBody();var c=d.innerHTML;if(Ext.isWebKit){var b=d.getAttribute(\"style\");var a=b.match(/text-align:(.*?);/i);if(a&&a[1]){c='<div style=\"'+a[0]+'\">'+c+\"</div>\"}}c=this.cleanHtml(c);if(this.fireEvent(\"beforesync\",this,c)!==false){this.el.dom.value=c;this.fireEvent(\"sync\",this,c)}}},getValue:function(){this[this.sourceEditMode?\"pushValue\":\"syncValue\"]();return Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var a=this.el.dom.value;if(!this.activated&&a.length<1){a=this.defaultValue}if(this.fireEvent(\"beforepush\",this,a)!==false){this.getEditorBody().innerHTML=a;if(Ext.isGecko){this.setDesignMode(false);this.setDesignMode(true)}this.fireEvent(\"push\",this,a)}}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){if(this.win&&!this.sourceEditMode){this.win.focus()}else{this.el.focus()}},initEditor:function(){try{var c=this.getEditorBody(),a=this.el.getStyles(\"font-size\",\"font-family\",\"background-image\",\"background-repeat\",\"background-color\",\"color\"),g,b;a[\"background-attachment\"]=\"fixed\";c.bgProperties=\"fixed\";Ext.DomHelper.applyStyles(c,a);g=this.getDoc();if(g){try{Ext.EventManager.removeAll(g)}catch(d){}}b=this.onEditorEvent.createDelegate(this);Ext.EventManager.on(g,{mousedown:b,dblclick:b,click:b,keyup:b,buffer:100});if(Ext.isGecko){Ext.EventManager.on(g,\"keypress\",this.applyCommand,this)}if(Ext.isIE||Ext.isWebKit||Ext.isOpera){Ext.EventManager.on(g,\"keydown\",this.fixKeys,this)}g.editorInitialized=true;this.initialized=true;this.pushValue();this.setReadOnly(this.readOnly);this.fireEvent(\"initialize\",this)}catch(d){}},beforeDestroy:function(){if(this.monitorTask){Ext.TaskMgr.stop(this.monitorTask)}if(this.rendered){Ext.destroy(this.tb);var b=this.getDoc();if(b){try{Ext.EventManager.removeAll(b);for(var c in b){delete b[c]}}catch(a){}}if(this.wrap){this.wrap.dom.innerHTML=\"\";this.wrap.remove()}}Ext.form.HtmlEditor.superclass.beforeDestroy.call(this)},onFirstFocus:function(){this.activated=true;this.disableItems(this.readOnly);if(Ext.isGecko){this.win.focus();var a=this.win.getSelection();if(!a.focusNode||a.focusNode.nodeType!=3){var b=a.getRangeAt(0);b.selectNodeContents(this.getEditorBody());b.collapse(true);this.deferFocus()}try{this.execCmd(\"useCSS\",true);this.execCmd(\"styleWithCSS\",false)}catch(c){}}this.fireEvent(\"activate\",this)},adjustFont:function(b){var d=b.getItemId()==\"increasefontsize\"?1:-1,c=this.getDoc(),a=parseInt(c.queryCommandValue(\"FontSize\")||2,10);if((Ext.isSafari&&!Ext.isSafari2)||Ext.isChrome||Ext.isAir){if(a<=10){a=1+d}else{if(a<=13){a=2+d}else{if(a<=16){a=3+d}else{if(a<=18){a=4+d}else{if(a<=24){a=5+d}else{a=6+d}}}}}a=a.constrain(1,6)}else{if(Ext.isSafari){d*=2}a=Math.max(1,a+d)+(Ext.isSafari?\"px\":0)}this.execCmd(\"FontSize\",a)},onEditorEvent:function(a){this.updateToolbar()},updateToolbar:function(){if(this.readOnly){return}if(!this.activated){this.onFirstFocus();return}var b=this.tb.items.map,c=this.getDoc();if(this.enableFont&&!Ext.isSafari2){var a=(c.queryCommandValue(\"FontName\")||this.defaultFont).toLowerCase();if(a!=this.fontSelect.dom.value){this.fontSelect.dom.value=a}}if(this.enableFormat){b.bold.toggle(c.queryCommandState(\"bold\"));b.italic.toggle(c.queryCommandState(\"italic\"));b.underline.toggle(c.queryCommandState(\"underline\"))}if(this.enableAlignments){b.justifyleft.toggle(c.queryCommandState(\"justifyleft\"));b.justifycenter.toggle(c.queryCommandState(\"justifycenter\"));b.justifyright.toggle(c.queryCommandState(\"justifyright\"))}if(!Ext.isSafari2&&this.enableLists){b.insertorderedlist.toggle(c.queryCommandState(\"insertorderedlist\"));b.insertunorderedlist.toggle(c.queryCommandState(\"insertunorderedlist\"))}Ext.menu.MenuMgr.hideAll();this.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(b,a){(function(){this.focus();this.execCmd(b,a);this.updateToolbar()}).defer(10,this)},execCmd:function(b,a){var c=this.getDoc();c.execCommand(b,false,a===undefined?null:a);this.syncValue()},applyCommand:function(b){if(b.ctrlKey){var d=b.getCharCode(),a;if(d>0){d=String.fromCharCode(d);switch(d){case\"b\":a=\"bold\";break;case\"i\":a=\"italic\";break;case\"u\":a=\"underline\";break}if(a){this.win.focus();this.execCmd(a);this.deferFocus();b.preventDefault()}}}},insertAtCursor:function(c){if(!this.activated){return}if(Ext.isIE){this.win.focus();var b=this.getDoc(),a=b.selection.createRange();if(a){a.pasteHTML(c);this.syncValue();this.deferFocus()}}else{this.win.focus();this.execCmd(\"InsertHTML\",c);this.deferFocus()}},fixKeys:function(){if(Ext.isIE){return function(g){var a=g.getKey(),d=this.getDoc(),b;if(a==g.TAB){g.stopEvent();b=d.selection.createRange();if(b){b.collapse(true);b.pasteHTML(\"&nbsp;&nbsp;&nbsp;&nbsp;\");this.deferFocus()}}else{if(a==g.ENTER){b=d.selection.createRange();if(b){var c=b.parentElement();if(!c||c.tagName.toLowerCase()!=\"li\"){g.stopEvent();b.pasteHTML(\"<br />\");b.collapse(false);b.select()}}}}}}else{if(Ext.isOpera){return function(b){var a=b.getKey();if(a==b.TAB){b.stopEvent();this.win.focus();this.execCmd(\"InsertHTML\",\"&nbsp;&nbsp;&nbsp;&nbsp;\");this.deferFocus()}}}else{if(Ext.isWebKit){return function(b){var a=b.getKey();if(a==b.TAB){b.stopEvent();this.execCmd(\"InsertText\",\"\\t\");this.deferFocus()}else{if(a==b.ENTER){b.stopEvent();this.execCmd(\"InsertHtml\",\"<br /><br />\");this.deferFocus()}}}}}}}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:\"Bold (Ctrl+B)\",text:\"Make the selected text bold.\",cls:\"x-html-editor-tip\"},italic:{title:\"Italic (Ctrl+I)\",text:\"Make the selected text italic.\",cls:\"x-html-editor-tip\"},underline:{title:\"Underline (Ctrl+U)\",text:\"Underline the selected text.\",cls:\"x-html-editor-tip\"},increasefontsize:{title:\"Grow Text\",text:\"Increase the font size.\",cls:\"x-html-editor-tip\"},decreasefontsize:{title:\"Shrink Text\",text:\"Decrease the font size.\",cls:\"x-html-editor-tip\"},backcolor:{title:\"Text Highlight Color\",text:\"Change the background color of the selected text.\",cls:\"x-html-editor-tip\"},forecolor:{title:\"Font Color\",text:\"Change the color of the selected text.\",cls:\"x-html-editor-tip\"},justifyleft:{title:\"Align Text Left\",text:\"Align text to the left.\",cls:\"x-html-editor-tip\"},justifycenter:{title:\"Center Text\",text:\"Center text in the editor.\",cls:\"x-html-editor-tip\"},justifyright:{title:\"Align Text Right\",text:\"Align text to the right.\",cls:\"x-html-editor-tip\"},insertunorderedlist:{title:\"Bullet List\",text:\"Start a bulleted list.\",cls:\"x-html-editor-tip\"},insertorderedlist:{title:\"Numbered List\",text:\"Start a numbered list.\",cls:\"x-html-editor-tip\"},createlink:{title:\"Hyperlink\",text:\"Make the selected text a hyperlink.\",cls:\"x-html-editor-tip\"},sourceedit:{title:\"Source Edit\",text:\"Switch to source editing mode.\",cls:\"x-html-editor-tip\"}}});Ext.reg(\"htmleditor\",Ext.form.HtmlEditor);Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:undefined,maxValue:undefined,minText:\"The time in this field must be equal to or after {0}\",maxText:\"The time in this field must be equal to or before {0}\",invalidText:\"{0} is not a valid time\",format:\"g:i A\",altFormats:\"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A\",increment:15,mode:\"local\",triggerAction:\"all\",typeAhead:false,initDate:\"1/1/2008\",initDateFormat:\"j/n/Y\",initComponent:function(){if(Ext.isDefined(this.minValue)){this.setMinValue(this.minValue,true)}if(Ext.isDefined(this.maxValue)){this.setMaxValue(this.maxValue,true)}if(!this.store){this.generateStore(true)}Ext.form.TimeField.superclass.initComponent.call(this)},setMinValue:function(b,a){this.setLimit(b,true,a);return this},setMaxValue:function(b,a){this.setLimit(b,false,a);return this},generateStore:function(b){var c=this.minValue||new Date(this.initDate).clearTime(),a=this.maxValue||new Date(this.initDate).clearTime().add(\"mi\",(24*60)-1),d=[];while(c<=a){d.push(c.dateFormat(this.format));c=c.add(\"mi\",this.increment)}this.bindStore(d,b)},setLimit:function(b,g,a){var e;if(Ext.isString(b)){e=this.parseDate(b)}else{if(Ext.isDate(b)){e=b}}if(e){var c=new Date(this.initDate).clearTime();c.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());this[g?\"minValue\":\"maxValue\"]=c;if(!a){this.generateStore()}}},getValue:function(){var a=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(a))||\"\"},setValue:function(a){return Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},validateValue:Ext.form.DateField.prototype.validateValue,formatDate:Ext.form.DateField.prototype.formatDate,parseDate:function(h){if(!h||Ext.isDate(h)){return h}var j=this.initDate+\" \",g=this.initDateFormat+\" \",b=Date.parseDate(j+h,g+this.format),c=this.altFormats;if(!b&&c){if(!this.altFormatsArray){this.altFormatsArray=c.split(\"|\")}for(var e=0,d=this.altFormatsArray,a=d.length;e<a&&!b;e++){b=Date.parseDate(j+h,g+d[e])}}return b}});Ext.reg(\"timefield\",Ext.form.TimeField);Ext.form.SliderField=Ext.extend(Ext.form.Field,{useTips:true,tipText:null,actionMode:\"wrap\",initComponent:function(){var b=Ext.copyTo({id:this.id+\"-slider\"},this.initialConfig,[\"vertical\",\"minValue\",\"maxValue\",\"decimalPrecision\",\"keyIncrement\",\"increment\",\"clickToChange\",\"animate\"]);if(this.useTips){var a=this.tipText?{getText:this.tipText}:{};b.plugins=[new Ext.slider.Tip(a)]}this.slider=new Ext.Slider(b);Ext.form.SliderField.superclass.initComponent.call(this)},onRender:function(b,a){this.autoCreate={id:this.id,name:this.name,type:\"hidden\",tag:\"input\"};Ext.form.SliderField.superclass.onRender.call(this,b,a);this.wrap=this.el.wrap({cls:\"x-form-field-wrap\"});this.resizeEl=this.positionEl=this.wrap;this.slider.render(this.wrap)},onResize:function(b,c,d,a){Ext.form.SliderField.superclass.onResize.call(this,b,c,d,a);this.slider.setSize(b,c)},initEvents:function(){Ext.form.SliderField.superclass.initEvents.call(this);this.slider.on(\"change\",this.onChange,this)},onChange:function(b,a){this.setValue(a,undefined,true)},onEnable:function(){Ext.form.SliderField.superclass.onEnable.call(this);this.slider.enable()},onDisable:function(){Ext.form.SliderField.superclass.onDisable.call(this);this.slider.disable()},beforeDestroy:function(){Ext.destroy(this.slider);Ext.form.SliderField.superclass.beforeDestroy.call(this)},alignErrorIcon:function(){this.errorIcon.alignTo(this.slider.el,\"tl-tr\",[2,0])},setMinValue:function(a){this.slider.setMinValue(a);return this},setMaxValue:function(a){this.slider.setMaxValue(a);return this},setValue:function(c,b,a){if(!a){this.slider.setValue(c,b)}return Ext.form.SliderField.superclass.setValue.call(this,this.slider.getValue())},getValue:function(){return this.slider.getValue()}});Ext.reg(\"sliderfield\",Ext.form.SliderField);Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(b,a){if(!this.el){this.el=document.createElement(\"label\");this.el.id=this.getId();this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):(this.html||\"\");if(this.forId){this.el.setAttribute(\"for\",this.forId)}}Ext.form.Label.superclass.onRender.call(this,b,a)},setText:function(a,b){var c=b===false;this[!c?\"text\":\"html\"]=a;delete this[c?\"text\":\"html\"];if(this.rendered){this.el.dom.innerHTML=b!==false?Ext.util.Format.htmlEncode(a):a}return this}});Ext.reg(\"label\",Ext.form.Label);Ext.form.Action=function(b,a){this.form=b;this.options=a||{}};Ext.form.Action.CLIENT_INVALID=\"client\";Ext.form.Action.SERVER_INVALID=\"server\";Ext.form.Action.CONNECT_FAILURE=\"connect\";Ext.form.Action.LOAD_FAILURE=\"load\";Ext.form.Action.prototype={type:\"default\",run:function(a){},success:function(a){},handleResponse:function(a){},failure:function(a){this.response=a;this.failureType=Ext.form.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}this.result=this.handleResponse(a);return this.result},decodeResponse:function(a){try{return Ext.decode(a.responseText)}catch(b){return false}},getUrl:function(c){var a=this.options.url||this.form.url||this.form.el.dom.action;if(c){var b=this.getParams();if(b){a=Ext.urlAppend(a,b)}}return a},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||\"POST\").toUpperCase()},getParams:function(){var a=this.form.baseParams;var b=this.options.params;if(b){if(typeof b==\"object\"){b=Ext.urlEncode(Ext.applyIf(b,a))}else{if(typeof b==\"string\"&&a){b+=\"&\"+Ext.urlEncode(a)}}}else{if(a){b=Ext.urlEncode(a)}}return b},createCallback:function(a){var a=a||{};return{success:this.success,failure:this.failure,scope:this,timeout:(a.timeout*1000)||(this.form.timeout*1000),upload:this.form.fileUpload?this.success:undefined}}};Ext.form.Action.Submit=function(b,a){Ext.form.Action.Submit.superclass.constructor.call(this,b,a)};Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:\"submit\",run:function(){var e=this.options,g=this.getMethod(),d=g==\"GET\";if(e.clientValidation===false||this.form.isValid()){if(e.submitEmptyText===false){var a=this.form.items,c=[],b=function(h){if(h.el.getValue()==h.emptyText){c.push(h);h.el.dom.value=\"\"}if(h.isComposite&&h.rendered){h.items.each(b)}};a.each(b)}Ext.Ajax.request(Ext.apply(this.createCallback(e),{form:this.form.el.dom,url:this.getUrl(d),method:g,headers:e.headers,params:!d?this.getParams():null,isUpload:this.form.fileUpload}));if(e.submitEmptyText===false){Ext.each(c,function(h){if(h.applyEmptyText){h.applyEmptyText()}})}}else{if(e.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},success:function(b){var a=this.processResponse(b);if(a===true||a.success){this.form.afterAction(this,true);return}if(a.errors){this.form.markInvalid(a.errors)}this.failureType=Ext.form.Action.SERVER_INVALID;this.form.afterAction(this,false)},handleResponse:function(c){if(this.form.errorReader){var b=this.form.errorReader.read(c);var g=[];if(b.records){for(var d=0,a=b.records.length;d<a;d++){var e=b.records[d];g[d]=e.data}}if(g.length<1){g=null}return{success:b.success,errors:g}}return this.decodeResponse(c)}});Ext.form.Action.Load=function(b,a){Ext.form.Action.Load.superclass.constructor.call(this,b,a);this.reader=this.form.reader};Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:\"load\",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(false),headers:this.options.headers,params:this.getParams()}))},success:function(b){var a=this.processResponse(b);if(a===true||!a.success||!a.data){this.failureType=Ext.form.Action.LOAD_FAILURE;this.form.afterAction(this,false);return}this.form.clearInvalid();this.form.setValues(a.data);this.form.afterAction(this,true)},handleResponse:function(b){if(this.form.reader){var a=this.form.reader.read(b);var c=a.records&&a.records[0]?a.records[0].data:null;return{success:a.success,data:c}}return this.decodeResponse(b)}});Ext.form.Action.DirectLoad=Ext.extend(Ext.form.Action.Load,{constructor:function(b,a){Ext.form.Action.DirectLoad.superclass.constructor.call(this,b,a)},type:\"directload\",run:function(){var a=this.getParams();a.push(this.success,this);this.form.api.load.apply(window,a)},getParams:function(){var c=[],h={};var e=this.form.baseParams;var g=this.options.params;Ext.apply(h,g,e);var b=this.form.paramOrder;if(b){for(var d=0,a=b.length;d<a;d++){c.push(h[b[d]])}}else{if(this.form.paramsAsHash){c.push(h)}}return c},processResponse:function(a){this.result=a;return a},success:function(a,b){if(b.type==Ext.Direct.exceptions.SERVER){a={}}Ext.form.Action.DirectLoad.superclass.success.call(this,a)}});Ext.form.Action.DirectSubmit=Ext.extend(Ext.form.Action.Submit,{constructor:function(b,a){Ext.form.Action.DirectSubmit.superclass.constructor.call(this,b,a)},type:\"directsubmit\",run:function(){var a=this.options;if(a.clientValidation===false||this.form.isValid()){this.success.params=this.getParams();this.form.api.submit(this.form.el.dom,this.success,this)}else{if(a.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},getParams:function(){var c={};var a=this.form.baseParams;var b=this.options.params;Ext.apply(c,b,a);return c},processResponse:function(a){this.result=a;return a},success:function(a,b){if(b.type==Ext.Direct.exceptions.SERVER){a={}}Ext.form.Action.DirectSubmit.superclass.success.call(this,a)}});Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit,directload:Ext.form.Action.DirectLoad,directsubmit:Ext.form.Action.DirectSubmit};Ext.form.VTypes=function(){var c=/^[a-zA-Z_]+$/,d=/^[a-zA-Z0-9_]+$/,b=/^(\\w+)([\\-+.\\'][\\w]+)*@(\\w[\\-\\w]*\\.){1,5}([A-Za-z]){2,6}$/,a=/(((^https?)|(^ftp)):\\/\\/([\\-\\w]+\\.)+\\w{2,3}(\\/[%\\-\\w]+(\\.\\w{2,})?)*(([\\w\\-\\.\\?\\\\\\/+@&#;`~=%!]*)(\\.\\w{2,})?)*\\/?)/i;return{email:function(e){return b.test(e)},emailText:'This field should be an e-mail address in the format \"user@example.com\"',emailMask:/[a-z0-9_\\.\\-\\+\\'@]/i,url:function(e){return a.test(e)},urlText:'This field should be a URL in the format \"http://www.example.com\"',alpha:function(e){return c.test(e)},alphaText:\"This field should only contain letters and _\",alphaMask:/[a-z_]/i,alphanum:function(e){return d.test(e)},alphanumText:\"This field should only contain letters, numbers and _\",alphanumMask:/[a-z0-9_]/i}}();Ext.grid.GridPanel=Ext.extend(Ext.Panel,{autoExpandColumn:false,autoExpandMax:1000,autoExpandMin:50,columnLines:false,ddText:\"{0} selected row{1}\",deferRowRender:true,enableColumnHide:true,enableColumnMove:true,enableDragDrop:false,enableHdMenu:true,loadMask:false,minColumnWidth:25,stripeRows:false,trackMouseOver:true,stateEvents:[\"columnmove\",\"columnresize\",\"sortchange\",\"groupchange\"],view:null,bubbleEvents:[],rendered:false,viewReady:false,initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this);if(this.columnLines){this.cls=(this.cls||\"\")+\" x-grid-with-col-lines\"}this.autoScroll=false;this.autoWidth=false;if(Ext.isArray(this.columns)){this.colModel=new Ext.grid.ColumnModel(this.columns);delete this.columns}if(this.ds){this.store=this.ds;delete this.ds}if(this.cm){this.colModel=this.cm;delete this.cm}if(this.sm){this.selModel=this.sm;delete this.sm}this.store=Ext.StoreMgr.lookup(this.store);this.addEvents(\"click\",\"dblclick\",\"contextmenu\",\"mousedown\",\"mouseup\",\"mouseover\",\"mouseout\",\"keypress\",\"keydown\",\"cellmousedown\",\"rowmousedown\",\"headermousedown\",\"groupmousedown\",\"rowbodymousedown\",\"containermousedown\",\"cellclick\",\"celldblclick\",\"rowclick\",\"rowdblclick\",\"headerclick\",\"headerdblclick\",\"groupclick\",\"groupdblclick\",\"containerclick\",\"containerdblclick\",\"rowbodyclick\",\"rowbodydblclick\",\"rowcontextmenu\",\"cellcontextmenu\",\"headercontextmenu\",\"groupcontextmenu\",\"containercontextmenu\",\"rowbodycontextmenu\",\"bodyscroll\",\"columnresize\",\"columnmove\",\"sortchange\",\"groupchange\",\"reconfigure\",\"viewready\")},onRender:function(d,a){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var e=this.getGridEl();this.el.addClass(\"x-grid-panel\");this.mon(e,{scope:this,mousedown:this.onMouseDown,click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu});this.relayEvents(e,[\"mousedown\",\"mouseup\",\"mouseover\",\"mouseout\",\"keypress\",\"keydown\"]);var b=this.getView();b.init(this);b.render();this.getSelectionModel().init(this)},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this);if(this.loadMask){this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask))}},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this);this.mon(this.colModel,\"hiddenchange\",this.saveState,this,{delay:100})},applyState:function(a){var k=this.colModel,g=a.columns,j=this.store,m,h,l;if(g){for(var d=0,e=g.length;d<e;d++){m=g[d];h=k.getColumnById(m.id);if(h){l=k.getIndexById(m.id);k.setState(l,{hidden:m.hidden,width:m.width,sortable:m.sortable});if(l!=d){k.moveColumn(l,d)}}}}if(j){m=a.sort;if(m){j[j.remoteSort?\"setDefaultSort\":\"sort\"](m.field,m.direction)}m=a.group;if(j.groupBy){if(m){j.groupBy(m)}else{j.clearGrouping()}}}var b=Ext.apply({},a);delete b.columns;delete b.sort;Ext.grid.GridPanel.superclass.applyState.call(this,b)},getState:function(){var g={columns:[]},b=this.store,e,a;for(var d=0,h;(h=this.colModel.config[d]);d++){g.columns[d]={id:h.id,width:h.width};if(h.hidden){g.columns[d].hidden=true}if(h.sortable){g.columns[d].sortable=true}}if(b){e=b.getSortState();if(e){g.sort=e}if(b.getGroupState){a=b.getGroupState();if(a){g.group=a}}}return g},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);var a=this.view;this.on(\"bodyresize\",a.layout,a);a.layout(true);if(this.deferRowRender){if(!this.deferRowRenderTask){this.deferRowRenderTask=new Ext.util.DelayedTask(a.afterRender,this.view)}this.deferRowRenderTask.delay(10)}else{a.afterRender()}this.viewReady=true},reconfigure:function(a,b){var c=this.rendered;if(c){if(this.loadMask){this.loadMask.destroy();this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:a},this.initialConfig.loadMask))}}if(this.view){this.view.initData(a,b)}this.store=a;this.colModel=b;if(c){this.view.refresh(true)}this.fireEvent(\"reconfigure\",this,a,b)},onDestroy:function(){if(this.deferRowRenderTask&&this.deferRowRenderTask.cancel){this.deferRowRenderTask.cancel()}if(this.rendered){Ext.destroy(this.view,this.loadMask)}else{if(this.store&&this.store.autoDestroy){this.store.destroy()}}Ext.destroy(this.colModel,this.selModel);this.store=this.selModel=this.colModel=this.view=this.loadMask=null;Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(a,b){this.view.processEvent(a,b)},onClick:function(a){this.processEvent(\"click\",a)},onMouseDown:function(a){this.processEvent(\"mousedown\",a)},onContextMenu:function(b,a){this.processEvent(\"contextmenu\",b)},onDblClick:function(a){this.processEvent(\"dblclick\",a)},walkCells:function(k,c,b,e,j){var i=this.colModel,g=i.getColumnCount(),a=this.store,h=a.getCount(),d=true;if(b<0){if(c<0){k--;d=false}while(k>=0){if(!d){c=g-1}d=false;while(c>=0){if(e.call(j||this,k,c,i)===true){return[k,c]}c--}k--}}else{if(c>=g){k++;d=false}while(k<h){if(!d){c=0}d=false;while(c<g){if(e.call(j||this,k,c,i)===true){return[k,c]}c++}k++}}return null},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)}return this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){if(!this.view){this.view=new Ext.grid.GridView(this.viewConfig)}return this.view},getDragDropText:function(){var a=this.selModel.getCount();return String.format(this.ddText,a,a==1?\"\":\"s\")}});Ext.reg(\"grid\",Ext.grid.GridPanel);Ext.grid.PivotGrid=Ext.extend(Ext.grid.GridPanel,{aggregator:\"sum\",renderer:undefined,initComponent:function(){Ext.grid.PivotGrid.superclass.initComponent.apply(this,arguments);this.initAxes();this.enableColumnResize=false;this.viewConfig=Ext.apply(this.viewConfig||{},{forceFit:true});this.colModel=new Ext.grid.ColumnModel({})},getAggregator:function(){if(typeof this.aggregator==\"string\"){return Ext.grid.PivotAggregatorMgr.types[this.aggregator]}else{return this.aggregator}},setAggregator:function(a){this.aggregator=a},setMeasure:function(a){this.measure=a},setLeftAxis:function(b,a){this.leftAxis=b;if(a){this.view.refresh()}},setTopAxis:function(b,a){this.topAxis=b;if(a){this.view.refresh()}},initAxes:function(){var a=Ext.grid.PivotAxis;if(!(this.leftAxis instanceof a)){this.setLeftAxis(new a({orientation:\"vertical\",dimensions:this.leftAxis||[],store:this.store}))}if(!(this.topAxis instanceof a)){this.setTopAxis(new a({orientation:\"horizontal\",dimensions:this.topAxis||[],store:this.store}))}},extractData:function(){var c=this.store.data.items,s=c.length,q=[],h,g,e,d;if(s==0){return[]}var l=this.leftAxis.getTuples(),o=l.length,m=this.topAxis.getTuples(),a=m.length,b=this.getAggregator();for(g=0;g<s;g++){h=c[g];for(e=0;e<o;e++){q[e]=q[e]||[];if(l[e].matcher(h)===true){for(d=0;d<a;d++){q[e][d]=q[e][d]||[];if(m[d].matcher(h)){q[e][d].push(h)}}}}}var n=q.length,p,r;for(g=0;g<n;g++){r=q[g];p=r.length;for(e=0;e<p;e++){q[g][e]=b(q[g][e],this.measure)}}return q},getView:function(){if(!this.view){this.view=new Ext.grid.PivotGridView(this.viewConfig)}return this.view}});Ext.reg(\"pivotgrid\",Ext.grid.PivotGrid);Ext.grid.PivotAggregatorMgr=new Ext.AbstractManager();Ext.grid.PivotAggregatorMgr.registerType(\"sum\",function(a,c){var e=a.length,d=0,b;for(b=0;b<e;b++){d+=a[b].get(c)}return d});Ext.grid.PivotAggregatorMgr.registerType(\"avg\",function(a,c){var e=a.length,d=0,b;for(b=0;b<e;b++){d+=a[b].get(c)}return(d/e)||\"n/a\"});Ext.grid.PivotAggregatorMgr.registerType(\"min\",function(a,c){var e=[],d=a.length,b;for(b=0;b<d;b++){e.push(a[b].get(c))}return Math.min.apply(this,e)||\"n/a\"});Ext.grid.PivotAggregatorMgr.registerType(\"max\",function(a,c){var e=[],d=a.length,b;for(b=0;b<d;b++){e.push(a[b].get(c))}return Math.max.apply(this,e)||\"n/a\"});Ext.grid.PivotAggregatorMgr.registerType(\"count\",function(a,b){return a.length});Ext.grid.GridView=Ext.extend(Ext.util.Observable,{deferEmptyText:true,scrollOffset:undefined,autoFill:false,forceFit:false,sortClasses:[\"sort-asc\",\"sort-desc\"],sortAscText:\"Sort Ascending\",sortDescText:\"Sort Descending\",columnsText:\"Columns\",selectedRowClass:\"x-grid3-row-selected\",borderWidth:2,tdClass:\"x-grid3-cell\",hdCls:\"x-grid3-hd\",markDirty:true,cellSelectorDepth:4,rowSelectorDepth:10,rowBodySelectorDepth:10,cellSelector:\"td.x-grid3-cell\",rowSelector:\"div.x-grid3-row\",rowBodySelector:\"div.x-grid3-row-body\",firstRowCls:\"x-grid3-row-first\",lastRowCls:\"x-grid3-row-last\",rowClsRe:/(?:^|\\s+)x-grid3-row-(first|last|alt)(?:\\s+|$)/g,headerMenuOpenCls:\"x-grid3-hd-menu-open\",rowOverCls:\"x-grid3-row-over\",constructor:function(a){Ext.apply(this,a);this.addEvents(\"beforerowremoved\",\"beforerowsinserted\",\"beforerefresh\",\"rowremoved\",\"rowsinserted\",\"rowupdated\",\"refresh\");Ext.grid.GridView.superclass.constructor.call(this)},masterTpl:new Ext.Template('<div class=\"x-grid3\" hidefocus=\"true\">','<div class=\"x-grid3-viewport\">','<div class=\"x-grid3-header\">','<div class=\"x-grid3-header-inner\">','<div class=\"x-grid3-header-offset\" style=\"{ostyle}\">{header}</div>',\"</div>\",'<div class=\"x-clear\"></div>',\"</div>\",'<div class=\"x-grid3-scroller\">','<div class=\"x-grid3-body\" style=\"{bstyle}\">{body}</div>','<a href=\"#\" class=\"x-grid3-focus\" tabIndex=\"-1\"></a>',\"</div>\",\"</div>\",'<div class=\"x-grid3-resize-marker\">&#160;</div>','<div class=\"x-grid3-resize-proxy\">&#160;</div>',\"</div>\"),headerTpl:new Ext.Template('<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"{tstyle}\">',\"<thead>\",'<tr class=\"x-grid3-hd-row\">{cells}</tr>',\"</thead>\",\"</table>\"),bodyTpl:new Ext.Template(\"{rows}\"),cellTpl:new Ext.Template('<td class=\"x-grid3-col x-grid3-cell x-grid3-td-{id} {css}\" style=\"{style}\" tabIndex=\"0\" {cellAttr}>','<div class=\"x-grid3-cell-inner x-grid3-col-{id}\" unselectable=\"on\" {attr}>{value}</div>',\"</td>\"),initTemplates:function(){var c=this.templates||{},d,b,g=new Ext.Template('<td class=\"x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}\" style=\"{style}\">','<div {tooltip} {attr} class=\"x-grid3-hd-inner x-grid3-hd-{id}\" unselectable=\"on\" style=\"{istyle}\">',this.grid.enableHdMenu?'<a class=\"x-grid3-hd-btn\" href=\"#\"></a>':\"\",\"{value}\",'<img alt=\"\" class=\"x-grid3-sort-icon\" src=\"',Ext.BLANK_IMAGE_URL,'\" />',\"</div>\",\"</td>\"),a=['<tr class=\"x-grid3-row-body-tr\" style=\"{bodyStyle}\">','<td colspan=\"{cols}\" class=\"x-grid3-body-cell\" tabIndex=\"0\" hidefocus=\"on\">','<div class=\"x-grid3-row-body\">{body}</div>',\"</td>\",\"</tr>\"].join(\"\"),e=['<table class=\"x-grid3-row-table\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"{tstyle}\">',\"<tbody>\",\"<tr>{cells}</tr>\",this.enableRowBody?a:\"\",\"</tbody>\",\"</table>\"].join(\"\");Ext.applyIf(c,{hcell:g,cell:this.cellTpl,body:this.bodyTpl,header:this.headerTpl,master:this.masterTpl,row:new Ext.Template('<div class=\"x-grid3-row {alt}\" style=\"{tstyle}\">'+e+\"</div>\"),rowInner:new Ext.Template(e)});for(b in c){d=c[b];if(d&&Ext.isFunction(d.compile)&&!d.compiled){d.disableFormats=true;d.compile()}}this.templates=c;this.colRe=new RegExp(\"x-grid3-td-([^\\\\s]+)\",\"\")},fly:function(a){if(!this._flyweight){this._flyweight=new Ext.Element.Flyweight(document.body)}this._flyweight.dom=a;return this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var b=Ext.Element,d=Ext.get(this.grid.getGridEl().dom.firstChild),e=new b(d.child(\"div.x-grid3-viewport\")),c=new b(e.child(\"div.x-grid3-header\")),a=new b(e.child(\"div.x-grid3-scroller\"));if(this.grid.hideHeaders){c.setDisplayed(false)}if(this.forceFit){a.setStyle(\"overflow-x\",\"hidden\")}Ext.apply(this,{el:d,mainWrap:e,scroller:a,mainHd:c,innerHd:c.child(\"div.x-grid3-header-inner\").dom,mainBody:new b(b.fly(a).child(\"div.x-grid3-body\")),focusEl:new b(b.fly(a).child(\"a\")),resizeMarker:new b(d.child(\"div.x-grid3-resize-marker\")),resizeProxy:new b(d.child(\"div.x-grid3-resize-proxy\"))});this.focusEl.swallowEvent(\"click\",true)},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(a){if(!a){return false}return this.fly(a).findParent(this.cellSelector,this.cellSelectorDepth)},findCellIndex:function(d,c){var b=this.findCell(d),a;if(b){a=this.fly(b).hasClass(c);if(!c||a){return this.getCellIndex(b)}}return false},getCellIndex:function(b){if(b){var a=b.className.match(this.colRe);if(a&&a[1]){return this.cm.getIndexById(a[1])}}return false},findHeaderCell:function(b){var a=this.findCell(b);return a&&this.fly(a).hasClass(this.hdCls)?a:null},findHeaderIndex:function(a){return this.findCellIndex(a,this.hdCls)},findRow:function(a){if(!a){return false}return this.fly(a).findParent(this.rowSelector,this.rowSelectorDepth)},findRowIndex:function(a){var b=this.findRow(a);return b?b.rowIndex:false},findRowBody:function(a){if(!a){return false}return this.fly(a).findParent(this.rowBodySelector,this.rowBodySelectorDepth)},getRow:function(a){return this.getRows()[a]},getCell:function(b,a){return Ext.fly(this.getRow(b)).query(this.cellSelector)[a]},getHeaderCell:function(a){return this.mainHd.dom.getElementsByTagName(\"td\")[a]},addRowClass:function(b,a){var c=this.getRow(b);if(c){this.fly(c).addClass(a)}},removeRowClass:function(c,a){var b=this.getRow(c);if(b){this.fly(b).removeClass(a)}},removeRow:function(a){Ext.removeNode(this.getRow(a));this.syncFocusEl(a)},removeRows:function(c,a){var b=this.mainBody.dom,d;for(d=c;d<=a;d++){Ext.removeNode(b.childNodes[c])}this.syncFocusEl(c)},getScrollState:function(){var a=this.scroller.dom;return{left:a.scrollLeft,top:a.scrollTop}},restoreScroll:function(a){var b=this.scroller.dom;b.scrollLeft=a.left;b.scrollTop=a.top},scrollToTop:function(){var a=this.scroller.dom;a.scrollTop=0;a.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var a=this.scroller.dom;this.grid.fireEvent(\"bodyscroll\",a.scrollLeft,a.scrollTop)},syncHeaderScroll:function(){var a=this.innerHd,b=this.scroller.dom.scrollLeft;a.scrollLeft=b;a.scrollLeft=b},updateSortIcon:function(d,c){var a=this.sortClasses,b=a[c==\"DESC\"?1:0],e=this.mainHd.select(\"td\").removeClass(a);e.item(d).addClass(b)},updateAllColumnWidths:function(){var e=this.getTotalWidth(),k=this.cm.getColumnCount(),m=this.getRows(),g=m.length,b=[],l,a,h,d,c;for(d=0;d<k;d++){b[d]=this.getColumnWidth(d);this.getHeaderCell(d).style.width=b[d]}this.updateHeaderWidth();for(d=0;d<g;d++){l=m[d];l.style.width=e;a=l.firstChild;if(a){a.style.width=e;h=a.rows[0];for(c=0;c<k;c++){h.childNodes[c].style.width=b[c]}}}this.onAllColumnWidthsUpdated(b,e)},updateColumnWidth:function(d,b){var c=this.getColumnWidth(d),j=this.getTotalWidth(),h=this.getHeaderCell(d),a=this.getRows(),e=a.length,l,g,k;this.updateHeaderWidth();h.style.width=c;for(g=0;g<e;g++){l=a[g];k=l.firstChild;l.style.width=j;if(k){k.style.width=j;k.rows[0].childNodes[d].style.width=c}}this.onColumnWidthUpdated(d,c,j)},updateColumnHidden:function(b,j){var h=this.getTotalWidth(),k=j?\"none\":\"\",g=this.getHeaderCell(b),a=this.getRows(),d=a.length,l,c,e;this.updateHeaderWidth();g.style.display=k;for(e=0;e<d;e++){l=a[e];l.style.width=h;c=l.firstChild;if(c){c.style.width=h;c.rows[0].childNodes[b].style.display=k}}this.onColumnHiddenUpdated(b,j,h);delete this.lastViewWidth;this.layout()},doRender:function(d,v,m,a,r,t){var h=this.templates,c=h.cell,y=h.row,o=r-1,b=\"width:\"+this.getTotalWidth()+\";\",k=[],l=[],n={tstyle:b},q={},w=v.length,x,g,e,u,s,p;for(s=0;s<w;s++){e=v[s];l=[];p=s+a;for(u=0;u<r;u++){g=d[u];q.id=g.id;q.css=u===0?\"x-grid3-cell-first \":(u==o?\"x-grid3-cell-last \":\"\");q.attr=q.cellAttr=\"\";q.style=g.style;q.value=g.renderer.call(g.scope,e.data[g.name],q,e,p,u,m);if(Ext.isEmpty(q.value)){q.value=\"&#160;\"}if(this.markDirty&&e.dirty&&typeof e.modified[g.name]!=\"undefined\"){q.css+=\" x-grid3-dirty-cell\"}l[l.length]=c.apply(q)}x=[];if(t&&((p+1)%2===0)){x[0]=\"x-grid3-row-alt\"}if(e.dirty){x[1]=\" x-grid3-dirty-row\"}n.cols=r;if(this.getRowClass){x[2]=this.getRowClass(e,p,n,m)}n.alt=x.join(\" \");n.cells=l.join(\"\");k[k.length]=y.apply(n)}return k.join(\"\")},processRows:function(a,g){if(!this.ds||this.ds.getCount()<1){return}var d=this.getRows(),c=d.length,e,b;g=g||!this.grid.stripeRows;a=a||0;for(b=0;b<c;b++){e=d[b];if(e){e.rowIndex=b;if(!g){e.className=e.className.replace(this.rowClsRe,\" \");if((b+1)%2===0){e.className+=\" x-grid3-row-alt\"}}}}if(a===0){Ext.fly(d[0]).addClass(this.firstRowCls)}Ext.fly(d[c-1]).addClass(this.lastRowCls)},afterRender:function(){if(!this.ds||!this.cm){return}this.mainBody.dom.innerHTML=this.renderBody()||\"&#160;\";this.processRows(0,true);if(this.deferEmptyText!==true){this.applyEmptyText()}this.grid.fireEvent(\"viewready\",this.grid)},afterRenderUI:function(){var a=this.grid;this.initElements();Ext.fly(this.innerHd).on(\"click\",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on(\"scroll\",this.syncScroll,this);if(a.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(a,this.mainHd.dom)}if(a.enableColumnMove){this.columnDrag=new Ext.grid.GridView.ColumnDragZone(a,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(a,this.mainHd.dom)}if(a.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:a.id+\"-hctx\"});this.hmenu.add({itemId:\"asc\",text:this.sortAscText,cls:\"xg-hmenu-sort-asc\"},{itemId:\"desc\",text:this.sortDescText,cls:\"xg-hmenu-sort-desc\"});if(a.enableColumnHide!==false){this.colMenu=new Ext.menu.Menu({id:a.id+\"-hcols-menu\"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick});this.hmenu.add(\"-\",{itemId:\"columns\",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:\"x-cols-icon\"})}this.hmenu.on(\"itemclick\",this.handleHdMenuClick,this)}if(a.trackMouseOver){this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut})}if(a.enableDragDrop||a.enableDrag){this.dragZone=new Ext.grid.GridDragZone(a,{ddGroup:a.ddGroup||\"GridDD\"})}this.updateHeaderSortState()},renderUI:function(){var a=this.templates;return a.master.apply({body:a.body.apply({rows:\"&#160;\"}),header:this.renderHeaders(),ostyle:\"width:\"+this.getOffsetWidth()+\";\",bstyle:\"width:\"+this.getTotalWidth()+\";\"})},processEvent:function(b,h){var i=h.getTarget(),a=this.grid,d=this.findHeaderIndex(i),k,j,c,g;a.fireEvent(b,h);if(d!==false){a.fireEvent(\"header\"+b,a,d,h)}else{k=this.findRowIndex(i);if(k!==false){j=this.findCellIndex(i);if(j!==false){c=a.colModel.getColumnAt(j);if(a.fireEvent(\"cell\"+b,a,k,j,h)!==false){if(!c||(c.processEvent&&(c.processEvent(b,h,a,k,j)!==false))){a.fireEvent(\"row\"+b,a,k,h)}}}else{if(a.fireEvent(\"row\"+b,a,k,h)!==false){(g=this.findRowBody(i))&&a.fireEvent(\"rowbody\"+b,a,k,h)}}}else{a.fireEvent(\"container\"+b,a,h)}}},layout:function(j){if(!this.mainBody){return}var a=this.grid,d=a.getGridEl(),c=d.getSize(true),i=c.width,b=c.height,h=this.scroller,g,e,k;if(i<20||b<20){return}if(a.autoHeight){g=h.dom.style;g.overflow=\"visible\";if(Ext.isWebKit){g.position=\"static\"}}else{this.el.setSize(i,b);e=this.mainHd.getHeight();k=b-e;h.setSize(i,k);if(this.innerHd){this.innerHd.style.width=(i)+\"px\"}}if(this.forceFit||(j===true&&this.autoFill)){if(this.lastViewWidth!=i){this.fitColumns(false,false);this.lastViewWidth=i}}else{this.autoExpand();this.syncHeaderScroll()}this.onLayout(i,k)},onLayout:function(a,b){},onColumnWidthUpdated:function(c,a,b){},onAllColumnWidthsUpdated:function(a,b){},onColumnHiddenUpdated:function(b,c,a){},updateColumnText:function(a,b){},afterMove:function(a){},init:function(a){this.grid=a;this.initTemplates();this.initData(a.store,a.colModel);this.initUI(a)},getColumnId:function(a){return this.cm.getColumnId(a)},getOffsetWidth:function(){return(this.cm.getTotalWidth()+this.getScrollOffset())+\"px\"},getScrollOffset:function(){return Ext.num(this.scrollOffset,Ext.getScrollBarWidth())},renderHeaders:function(){var e=this.cm,g=this.templates,a=g.hcell,d={},h=e.getColumnCount(),j=h-1,k=[],c,b;for(c=0;c<h;c++){if(c==0){b=\"x-grid3-cell-first \"}else{b=c==j?\"x-grid3-cell-last \":\"\"}d={id:e.getColumnId(c),value:e.getColumnHeader(c)||\"\",style:this.getColumnStyle(c,true),css:b,tooltip:this.getColumnTooltip(c)};if(e.config[c].align==\"right\"){d.istyle=\"padding-right: 16px;\"}else{delete d.istyle}k[c]=a.apply(d)}return g.header.apply({cells:k.join(\"\"),tstyle:String.format(\"width: {0};\",this.getTotalWidth())})},getColumnTooltip:function(a){var b=this.cm.getColumnTooltip(a);if(b){if(Ext.QuickTips.isEnabled()){return'ext:qtip=\"'+b+'\"'}else{return'title=\"'+b+'\"'}}return\"\"},beforeUpdate:function(){this.grid.stopEditing(true)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders();this.updateHeaderWidth(false)},updateHeaderWidth:function(c){var b=this.innerHd.firstChild,a=this.getTotalWidth();b.style.width=this.getOffsetWidth();b.firstChild.style.width=a;if(c!==false){this.mainBody.dom.style.width=a}},focusRow:function(a){this.focusCell(a,0,false)},focusCell:function(d,b,c){this.syncFocusEl(this.ensureVisible(d,b,c));var a=this.focusEl;if(Ext.isGecko){a.focus()}else{a.focus.defer(1,a)}},resolveCell:function(h,d,g){if(!Ext.isNumber(h)){h=h.rowIndex}if(!this.ds){return null}if(h<0||h>=this.ds.getCount()){return null}d=(d!==undefined?d:0);var c=this.getRow(h),b=this.cm,e=b.getColumnCount(),a;if(!(g===false&&d===0)){while(d<e&&b.isHidden(d)){d++}a=this.getCell(h,d)}return{row:c,cell:a}},getResolvedXY:function(b){if(!b){return null}var a=b.cell,c=b.row;if(a){return Ext.fly(a).getXY()}else{return[this.el.getX(),Ext.fly(c).getY()]}},syncFocusEl:function(d,a,c){var b=d;if(!Ext.isArray(b)){d=Math.min(d,Math.max(0,this.getRows().length-1));if(isNaN(d)){return}b=this.getResolvedXY(this.resolveCell(d,a,c))}this.focusEl.setXY(b||this.scroller.getXY())},ensureVisible:function(t,g,e){var r=this.resolveCell(t,g,e);if(!r||!r.row){return null}var k=r.row,h=r.cell,n=this.scroller.dom,d=k,s=0,o=this.el.dom;while(d&&d!=o){s+=d.offsetTop;d=d.offsetParent}s-=this.mainHd.dom.offsetHeight;o=parseInt(n.scrollTop,10);var q=s+k.offsetHeight,a=n.clientHeight,m=o+a;if(s<o){n.scrollTop=s}else{if(q>m){n.scrollTop=q-a}}if(e!==false){var l=parseInt(h.offsetLeft,10),j=l+h.offsetWidth,i=parseInt(n.scrollLeft,10),b=i+n.clientWidth;if(l<i){n.scrollLeft=l}else{if(j>b){n.scrollLeft=j-n.clientWidth}}}return this.getResolvedXY(r)},insertRows:function(a,i,e,h){var d=a.getCount()-1;if(!h&&i===0&&e>=d){this.fireEvent(\"beforerowsinserted\",this,i,e);this.refresh();this.fireEvent(\"rowsinserted\",this,i,e)}else{if(!h){this.fireEvent(\"beforerowsinserted\",this,i,e)}var b=this.renderRows(i,e),g=this.getRow(i);if(g){if(i===0){Ext.fly(this.getRow(0)).removeClass(this.firstRowCls)}Ext.DomHelper.insertHtml(\"beforeBegin\",g,b)}else{var c=this.getRow(d-1);if(c){Ext.fly(c).removeClass(this.lastRowCls)}Ext.DomHelper.insertHtml(\"beforeEnd\",this.mainBody.dom,b)}if(!h){this.processRows(i);this.fireEvent(\"rowsinserted\",this,i,e)}else{if(i===0||i>=d){Ext.fly(this.getRow(i)).addClass(i===0?this.firstRowCls:this.lastRowCls)}}}this.syncFocusEl(i)},deleteRows:function(a,c,b){if(a.getRowCount()<1){this.refresh()}else{this.fireEvent(\"beforerowsdeleted\",this,c,b);this.removeRows(c,b);this.processRows(c);this.fireEvent(\"rowsdeleted\",this,c,b)}},getColumnStyle:function(b,d){var a=this.cm,g=a.config,c=d?\"\":g[b].css||\"\",e=g[b].align;c+=String.format(\"width: {0};\",this.getColumnWidth(b));if(a.isHidden(b)){c+=\"display: none; \"}if(e){c+=String.format(\"text-align: {0};\",e)}return c},getColumnWidth:function(b){var c=this.cm.getColumnWidth(b),a=this.borderWidth;if(Ext.isNumber(c)){if(Ext.isBorderBox||(Ext.isWebKit&&!Ext.isSafari2)){return c+\"px\"}else{return Math.max(c-a,0)+\"px\"}}else{return c}},getTotalWidth:function(){return this.cm.getTotalWidth()+\"px\"},fitColumns:function(g,j,h){var a=this.grid,l=this.cm,s=l.getTotalWidth(false),q=this.getGridInnerWidth(),r=q-s,c=[],o=0,n=0,u,d,p;if(q<20||r===0){return false}var e=l.getColumnCount(true),m=l.getColumnCount(false),b=e-(Ext.isNumber(h)?1:0);if(b===0){b=1;h=undefined}for(p=0;p<m;p++){if(!l.isFixed(p)&&p!==h){u=l.getColumnWidth(p);c.push(p,u);if(!l.isHidden(p)){o=p;n+=u}}}d=(q-l.getTotalWidth())/n;while(c.length){u=c.pop();p=c.pop();l.setColumnWidth(p,Math.max(a.minColumnWidth,Math.floor(u+u*d)),true)}s=l.getTotalWidth(false);if(s>q){var t=(b==e)?o:h,k=Math.max(1,l.getColumnWidth(t)-(s-q));l.setColumnWidth(t,k,true)}if(g!==true){this.updateAllColumnWidths()}return true},autoExpand:function(k){var a=this.grid,i=this.cm,e=this.getGridInnerWidth(),c=i.getTotalWidth(false),g=a.autoExpandColumn;if(!this.userResized&&g){if(e!=c){var j=i.getIndexById(g),b=i.getColumnWidth(j),h=e-c+b,d=Math.min(Math.max(h,a.autoExpandMin),a.autoExpandMax);if(b!=d){i.setColumnWidth(j,d,true);if(k!==true){this.updateColumnWidth(j,d)}}}}},getGridInnerWidth:function(){return this.grid.getGridEl().getWidth(true)-this.getScrollOffset()},getColumnData:function(){var e=[],c=this.cm,g=c.getColumnCount(),a=this.ds.fields,d,b;for(d=0;d<g;d++){b=c.getDataIndex(d);e[d]={name:Ext.isDefined(b)?b:(a.get(d)?a.get(d).name:undefined),renderer:c.getRenderer(d),scope:c.getRendererScope(d),id:c.getColumnId(d),style:this.getColumnStyle(d)}}return e},renderRows:function(i,c){var a=this.grid,g=a.store,j=a.stripeRows,e=a.colModel,h=e.getColumnCount(),d=g.getCount(),b;if(d<1){return\"\"}i=i||0;c=Ext.isDefined(c)?c:d-1;b=g.getRange(i,c);return this.doRender(this.getColumnData(),b,g,i,h,j)},renderBody:function(){var a=this.renderRows()||\"&#160;\";return this.templates.body.apply({rows:a})},refreshRow:function(g){var l=this.ds,m=this.cm.getColumnCount(),c=this.getColumnData(),n=m-1,p=[\"x-grid3-row\"],e={tstyle:String.format(\"width: {0};\",this.getTotalWidth())},a=[],k=this.templates.cell,j,q,b,o,h,d;if(Ext.isNumber(g)){j=g;g=l.getAt(j)}else{j=l.indexOf(g)}if(!g||j<0){return}for(d=0;d<m;d++){b=c[d];if(d==0){h=\"x-grid3-cell-first\"}else{h=(d==n)?\"x-grid3-cell-last \":\"\"}o={id:b.id,style:b.style,css:h,attr:\"\",cellAttr:\"\"};o.value=b.renderer.call(b.scope,g.data[b.name],o,g,j,d,l);if(Ext.isEmpty(o.value)){o.value=\"&#160;\"}if(this.markDirty&&g.dirty&&typeof g.modified[b.name]!=\"undefined\"){o.css+=\" x-grid3-dirty-cell\"}a[d]=k.apply(o)}q=this.getRow(j);q.className=\"\";if(this.grid.stripeRows&&((j+1)%2===0)){p.push(\"x-grid3-row-alt\")}if(this.getRowClass){e.cols=m;p.push(this.getRowClass(g,j,e,l))}this.fly(q).addClass(p).setStyle(e.tstyle);e.cells=a.join(\"\");q.innerHTML=this.templates.rowInner.apply(e);this.fireEvent(\"rowupdated\",this,j,g)},refresh:function(b){this.fireEvent(\"beforerefresh\",this);this.grid.stopEditing(true);var a=this.renderBody();this.mainBody.update(a).setWidth(this.getTotalWidth());if(b===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent(\"refresh\",this)},applyEmptyText:function(){if(this.emptyText&&!this.hasRows()){this.mainBody.update('<div class=\"x-grid-empty\">'+this.emptyText+\"</div>\")}},updateHeaderSortState:function(){var b=this.ds.getSortState();if(!b){return}if(!this.sortState||(this.sortState.field!=b.field||this.sortState.direction!=b.direction)){this.grid.fireEvent(\"sortchange\",this.grid,b)}this.sortState=b;var c=this.cm.findColumnIndex(b.field);if(c!=-1){var a=b.direction;this.updateSortIcon(c,a)}},clearHeaderSortState:function(){if(!this.sortState){return}this.grid.fireEvent(\"sortchange\",this.grid,null);this.mainHd.select(\"td\").removeClass(this.sortClasses);delete this.sortState},destroy:function(){var j=this,a=j.grid,d=a.getGridEl(),i=j.dragZone,g=j.splitZone,h=j.columnDrag,e=j.columnDrop,k=j.scrollToTopTask,c,b;if(k&&k.cancel){k.cancel()}Ext.destroyMembers(j,\"colMenu\",\"hmenu\");j.initData(null,null);j.purgeListeners();Ext.fly(j.innerHd).un(\"click\",j.handleHdDown,j);if(a.enableColumnMove){c=h.dragData;b=h.proxy;Ext.destroy(h.el,b.ghost,b.el,e.el,e.proxyTop,e.proxyBottom,c.ddel,c.header);if(b.anim){Ext.destroy(b.anim)}delete b.ghost;delete c.ddel;delete c.header;h.destroy();delete Ext.dd.DDM.locationCache[h.id];delete h._domRef;delete e.proxyTop;delete e.proxyBottom;e.destroy();delete Ext.dd.DDM.locationCache[\"gridHeader\"+d.id];delete e._domRef;delete Ext.dd.DDM.ids[e.ddGroup]}if(g){g.destroy();delete g._domRef;delete Ext.dd.DDM.ids[\"gridSplitters\"+d.id]}Ext.fly(j.innerHd).removeAllListeners();Ext.removeNode(j.innerHd);delete j.innerHd;Ext.destroy(j.el,j.mainWrap,j.mainHd,j.scroller,j.mainBody,j.focusEl,j.resizeMarker,j.resizeProxy,j.activeHdBtn,j._flyweight,i,g);delete a.container;if(i){i.destroy()}Ext.dd.DDM.currentTarget=null;delete Ext.dd.DDM.locationCache[d.id];Ext.EventManager.removeResizeListener(j.onWindowResize,j)},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var a=this.grid.ownerCt;if(a&&a.getLayout()){a.on(\"afterlayout\",function(){this.fitColumns(true,true);this.updateHeaders();this.updateHeaderSortState()},this,{single:true})}}else{if(this.forceFit){this.fitColumns(true,false)}else{if(this.grid.autoExpandColumn){this.autoExpand(true)}}}this.grid.getGridEl().dom.innerHTML=this.renderUI();this.afterRenderUI()},initData:function(a,e){var b=this;if(b.ds){var d=b.ds;d.un(\"add\",b.onAdd,b);d.un(\"load\",b.onLoad,b);d.un(\"clear\",b.onClear,b);d.un(\"remove\",b.onRemove,b);d.un(\"update\",b.onUpdate,b);d.un(\"datachanged\",b.onDataChange,b);if(d!==a&&d.autoDestroy){d.destroy()}}if(a){a.on({scope:b,load:b.onLoad,add:b.onAdd,remove:b.onRemove,update:b.onUpdate,clear:b.onClear,datachanged:b.onDataChange})}if(b.cm){var c=b.cm;c.un(\"configchange\",b.onColConfigChange,b);c.un(\"widthchange\",b.onColWidthChange,b);c.un(\"headerchange\",b.onHeaderChange,b);c.un(\"hiddenchange\",b.onHiddenChange,b);c.un(\"columnmoved\",b.onColumnMove,b)}if(e){delete b.lastViewWidth;e.on({scope:b,configchange:b.onColConfigChange,widthchange:b.onColWidthChange,headerchange:b.onHeaderChange,hiddenchange:b.onHiddenChange,columnmoved:b.onColumnMove})}b.ds=a;b.cm=e},onDataChange:function(){this.refresh(true);this.updateHeaderSortState();this.syncFocusEl(0)},onClear:function(){this.refresh();this.syncFocusEl(0)},onUpdate:function(b,a){this.refreshRow(a)},onAdd:function(b,a,c){this.insertRows(b,c,c+(a.length-1))},onRemove:function(b,a,c,d){if(d!==true){this.fireEvent(\"beforerowremoved\",this,c,a)}this.removeRow(c);if(d!==true){this.processRows(c);this.applyEmptyText();this.fireEvent(\"rowremoved\",this,c,a)}},onLoad:function(){if(Ext.isGecko){if(!this.scrollToTopTask){this.scrollToTopTask=new Ext.util.DelayedTask(this.scrollToTop,this)}this.scrollToTopTask.delay(1)}else{this.scrollToTop()}},onColWidthChange:function(a,b,c){this.updateColumnWidth(b,c)},onHeaderChange:function(a,b,c){this.updateHeaders()},onHiddenChange:function(a,b,c){this.updateColumnHidden(b,c)},onColumnMove:function(a,c,b){this.indexMap=null;this.refresh(true);this.restoreScroll(this.getScrollState());this.afterMove(b);this.grid.fireEvent(\"columnmove\",c,b)},onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(true)},initUI:function(a){a.on(\"headerclick\",this.onHeaderClick,this)},initEvents:Ext.emptyFn,onHeaderClick:function(b,a){if(this.headersDisabled||!this.cm.isSortable(a)){return}b.stopEditing(true);b.store.sort(this.cm.getDataIndex(a))},onRowOver:function(b,a){var c=this.findRowIndex(a);if(c!==false){this.addRowClass(c,this.rowOverCls)}},onRowOut:function(b,a){var c=this.findRowIndex(a);if(c!==false&&!b.within(this.getRow(c),true)){this.removeRowClass(c,this.rowOverCls)}},onRowSelect:function(a){this.addRowClass(a,this.selectedRowClass)},onRowDeselect:function(a){this.removeRowClass(a,this.selectedRowClass)},onCellSelect:function(c,b){var a=this.getCell(c,b);if(a){this.fly(a).addClass(\"x-grid3-cell-selected\")}},onCellDeselect:function(c,b){var a=this.getCell(c,b);if(a){this.fly(a).removeClass(\"x-grid3-cell-selected\")}},handleWheel:function(a){a.stopPropagation()},onColumnSplitterMoved:function(a,b){this.userResized=true;this.grid.colModel.setColumnWidth(a,b,true);if(this.forceFit){this.fitColumns(true,false,a);this.updateAllColumnWidths()}else{this.updateColumnWidth(a,b);this.syncHeaderScroll()}this.grid.fireEvent(\"columnresize\",a,b)},beforeColMenuShow:function(){var b=this.cm,d=b.getColumnCount(),a=this.colMenu,c;a.removeAll();for(c=0;c<d;c++){if(b.config[c].hideable!==false){a.add(new Ext.menu.CheckItem({text:b.getColumnHeader(c),itemId:\"col-\"+b.getColumnId(c),checked:!b.isHidden(c),disabled:b.config[c].hideable===false,hideOnClick:false}))}}},handleHdMenuClick:function(c){var a=this.ds,b=this.cm.getDataIndex(this.hdCtxIndex);switch(c.getItemId()){case\"asc\":a.sort(b,\"ASC\");break;case\"desc\":a.sort(b,\"DESC\");break;default:this.handleHdMenuClickDefault(c)}return true},handleHdMenuClickDefault:function(c){var b=this.cm,d=c.getItemId(),a=b.getIndexById(d.substr(4));if(a!=-1){if(c.checked&&b.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return}b.setHidden(a,c.checked)}},handleHdDown:function(i,j){if(Ext.fly(j).hasClass(\"x-grid3-hd-btn\")){i.stopEvent();var k=this.cm,g=this.findHeaderCell(j),h=this.getCellIndex(g),d=k.isSortable(h),c=this.hmenu,b=c.items,a=this.headerMenuOpenCls;this.hdCtxIndex=h;Ext.fly(g).addClass(a);b.get(\"asc\").setDisabled(!d);b.get(\"desc\").setDisabled(!d);c.on(\"hide\",function(){Ext.fly(g).removeClass(a)},this,{single:true});c.show(j,\"tl-bl?\")}},handleHdMove:function(k){var i=this.findHeaderCell(this.activeHdRef);if(i&&!this.headersDisabled){var l=this.splitHandleWidth||5,j=this.activeHdRegion,p=i.style,m=this.cm,o=\"\",g=k.getPageX();if(this.grid.enableColumnResize!==false){var a=this.activeHdIndex,b=this.getPreviousVisible(a),n=m.isResizable(a),c=b&&m.isResizable(b),d=g-j.left<=l,h=j.right-g<=(!this.activeHdBtn?l:2);if(d&&c){o=Ext.isAir?\"move\":Ext.isWebKit?\"e-resize\":\"col-resize\"}else{if(h&&n){o=Ext.isAir?\"move\":Ext.isWebKit?\"w-resize\":\"col-resize\"}}}p.cursor=o}},getPreviousVisible:function(a){while(a>0){if(!this.cm.isHidden(a-1)){return a}a--}return undefined},handleHdOver:function(c,b){var d=this.findHeaderCell(b);if(d&&!this.headersDisabled){var a=this.fly(d);this.activeHdRef=b;this.activeHdIndex=this.getCellIndex(d);this.activeHdRegion=a.getRegion();if(!this.isMenuDisabled(this.activeHdIndex,a)){a.addClass(\"x-grid3-hd-over\");this.activeHdBtn=a.child(\".x-grid3-hd-btn\");if(this.activeHdBtn){this.activeHdBtn.dom.style.height=(d.firstChild.offsetHeight-1)+\"px\"}}}},handleHdOut:function(b,a){var c=this.findHeaderCell(a);if(c&&(!Ext.isIE||!b.within(c,true))){this.activeHdRef=null;this.fly(c).removeClass(\"x-grid3-hd-over\");c.style.cursor=\"\"}},isMenuDisabled:function(a,b){return this.cm.isMenuDisabled(a)},hasRows:function(){var a=this.mainBody.dom.firstChild;return a&&a.nodeType==1&&a.className!=\"x-grid-empty\"},isHideableColumn:function(a){return !a.hidden},bind:function(a,b){this.initData(a,b)}});Ext.grid.GridView.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{constructor:function(a,b){this.grid=a;this.view=a.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,b,\"gridSplitters\"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.scroll=false;this.hw=this.view.splitHandleWidth||5},b4StartDrag:function(a,e){this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=true;var d=this.view.mainWrap.getHeight();this.marker.setHeight(d);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),\"tl-tl\",[-2,0]);this.proxy.setHeight(d);var b=this.cm.getColumnWidth(this.cellIndex),c=Math.max(b-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(c,1000);this.setYConstraint(0,0);this.minX=a-c;this.maxX=a+1000;this.startPos=a;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,e)},allowHeaderDrag:function(a){return true},handleMouseDown:function(a){var h=this.view.findHeaderCell(a.getTarget());if(h&&this.allowHeaderDrag(a)){var k=this.view.fly(h).getXY(),c=k[0],i=a.getXY(),b=i[0],g=h.offsetWidth,d=false;if((b-c)<=this.hw){d=-1}else{if((c+g)-b<=this.hw){d=0}}if(d!==false){this.cm=this.grid.colModel;var j=this.view.getCellIndex(h);if(d==-1){if(j+d<0){return}while(this.cm.isHidden(j+d)){--d;if(j+d<0){return}}}this.cellIndex=j+d;this.split=h.dom;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}else{if(this.view.columnDrag){this.view.columnDrag.callHandleMouseDown(a)}}}},endDrag:function(g){this.marker.hide();var a=this.view,c=Math.max(this.minX,g.getPageX()),d=c-this.startPos,b=this.dragHeadersDisabled;a.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+d);setTimeout(function(){a.headersDisabled=b},50)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.PivotGridView=Ext.extend(Ext.grid.GridView,{colHeaderCellCls:\"grid-hd-group-cell\",title:\"\",getColumnHeaders:function(){return this.grid.topAxis.buildHeaders()},getRowHeaders:function(){return this.grid.leftAxis.buildHeaders()},renderRows:function(a,t){var b=this.grid,o=b.extractData(),p=o.length,g=this.templates,s=b.renderer,h=typeof s==\"function\",w=this.getCellCls,n=typeof w==\"function\",d=g.cell,x=g.row,k=[],q={},c=\"width:\"+this.getGridInnerWidth()+\"px;\",l,r,e,v,m;a=a||0;t=Ext.isDefined(t)?t:p-1;for(v=0;v<p;v++){m=o[v];r=m.length;l=[];for(var u=0;u<r;u++){q.id=v+\"-\"+u;q.css=u===0?\"x-grid3-cell-first \":(u==(r-1)?\"x-grid3-cell-last \":\"\");q.attr=q.cellAttr=\"\";q.value=m[u];if(Ext.isEmpty(q.value)){q.value=\"&#160;\"}if(h){q.value=s(q.value)}if(n){q.css+=w(q.value)+\" \"}l[l.length]=d.apply(q)}k[k.length]=x.apply({tstyle:c,cols:r,cells:l.join(\"\"),alt:\"\"})}return k.join(\"\")},masterTpl:new Ext.Template('<div class=\"x-grid3 x-pivotgrid\" hidefocus=\"true\">','<div class=\"x-grid3-viewport\">','<div class=\"x-grid3-header\">','<div class=\"x-grid3-header-title\"><span>{title}</span></div>','<div class=\"x-grid3-header-inner\">','<div class=\"x-grid3-header-offset\" style=\"{ostyle}\"></div>',\"</div>\",'<div class=\"x-clear\"></div>',\"</div>\",'<div class=\"x-grid3-scroller\">','<div class=\"x-grid3-row-headers\"></div>','<div class=\"x-grid3-body\" style=\"{bstyle}\">{body}</div>','<a href=\"#\" class=\"x-grid3-focus\" tabIndex=\"-1\"></a>',\"</div>\",\"</div>\",'<div class=\"x-grid3-resize-marker\">&#160;</div>','<div class=\"x-grid3-resize-proxy\">&#160;</div>',\"</div>\"),initTemplates:function(){Ext.grid.PivotGridView.superclass.initTemplates.apply(this,arguments);var a=this.templates||{};if(!a.gcell){a.gcell=new Ext.XTemplate('<td class=\"x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} '+this.colHeaderCellCls+'\" style=\"{style}\">','<div {tooltip} class=\"x-grid3-hd-inner x-grid3-hd-{id}\" unselectable=\"on\" style=\"{istyle}\">',this.grid.enableHdMenu?'<a class=\"x-grid3-hd-btn\" href=\"#\"></a>':\"\",\"{value}\",\"</div>\",\"</td>\")}this.templates=a;this.hrowRe=new RegExp(\"ux-grid-hd-group-row-(\\\\d+)\",\"\")},initElements:function(){Ext.grid.PivotGridView.superclass.initElements.apply(this,arguments);this.rowHeadersEl=new Ext.Element(this.scroller.child(\"div.x-grid3-row-headers\"));this.headerTitleEl=new Ext.Element(this.mainHd.child(\"div.x-grid3-header-title\"))},getGridInnerWidth:function(){var a=Ext.grid.PivotGridView.superclass.getGridInnerWidth.apply(this,arguments);return a-this.getTotalRowHeaderWidth()},getTotalRowHeaderWidth:function(){var d=this.getRowHeaders(),c=d.length,b=0,a;for(a=0;a<c;a++){b+=d[a].width}return b},getTotalColumnHeaderHeight:function(){return this.getColumnHeaders().length*21},getCellIndex:function(b){if(b){var a=b.className.match(this.colRe),c;if(a&&(c=a[1])){return parseInt(c.split(\"-\")[1],10)}}return false},renderUI:function(){var b=this.templates,a=this.getGridInnerWidth();return b.master.apply({body:b.body.apply({rows:\"&#160;\"}),ostyle:\"width:\"+a+\"px\",bstyle:\"width:\"+a+\"px\"})},onLayout:function(b,a){Ext.grid.PivotGridView.superclass.onLayout.apply(this,arguments);var b=this.getGridInnerWidth();this.resizeColumnHeaders(b);this.resizeAllRows(b)},refresh:function(b){this.fireEvent(\"beforerefresh\",this);this.grid.stopEditing(true);var a=this.renderBody();this.mainBody.update(a).setWidth(this.getGridInnerWidth());if(b===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent(\"refresh\",this)},renderHeaders:Ext.emptyFn,fitColumns:Ext.emptyFn,resizeColumnHeaders:function(b){var a=this.grid.topAxis;if(a.rendered){a.el.setWidth(b)}},resizeRowHeaders:function(){var a=this.getTotalRowHeaderWidth(),b=String.format(\"margin-left: {0}px;\",a);this.rowHeadersEl.setWidth(a);this.mainBody.applyStyles(b);Ext.fly(this.innerHd).applyStyles(b);this.headerTitleEl.setWidth(a);this.headerTitleEl.setHeight(this.getTotalColumnHeaderHeight())},resizeAllRows:function(b){var d=this.getRows(),c=d.length,a;for(a=0;a<c;a++){Ext.fly(d[a]).setWidth(b);Ext.fly(d[a]).child(\"table\").setWidth(b)}},updateHeaders:function(){this.renderGroupRowHeaders();this.renderGroupColumnHeaders()},renderGroupRowHeaders:function(){var a=this.grid.leftAxis;this.resizeRowHeaders();a.rendered=false;a.render(this.rowHeadersEl);this.setTitle(this.title)},setTitle:function(a){this.headerTitleEl.child(\"span\").dom.innerHTML=a},renderGroupColumnHeaders:function(){var a=this.grid.topAxis;a.rendered=false;a.render(this.innerHd.firstChild)},isMenuDisabled:function(a,b){return true}});Ext.grid.PivotAxis=Ext.extend(Ext.Component,{orientation:\"horizontal\",defaultHeaderWidth:80,paddingWidth:7,setDimensions:function(a){this.dimensions=a},onRender:function(b,a){var c=this.orientation==\"horizontal\"?this.renderHorizontalRows():this.renderVerticalRows();this.el=Ext.DomHelper.overwrite(b.dom,{tag:\"table\",cn:c},true)},renderHorizontalRows:function(){var k=this.buildHeaders(),a=k.length,g=[],c,h,e,d,b;for(d=0;d<a;d++){c=[];h=k[d].items;e=h.length;for(b=0;b<e;b++){c.push({tag:\"td\",html:h[b].header,colspan:h[b].span})}g[d]={tag:\"tr\",cn:c}}return g},renderVerticalRows:function(){var b=this.buildHeaders(),k=b.length,a=[],m=[],h,c,l,g,e,d;for(e=0;e<k;e++){c=b[e];g=c.width||80;h=c.items.length;for(d=0;d<h;d++){l=c.items[d];a[l.start]=a[l.start]||[];a[l.start].push({tag:\"td\",html:l.header,rowspan:l.span,width:Ext.isBorderBox?g:g-this.paddingWidth})}}h=a.length;for(e=0;e<h;e++){m[e]={tag:\"tr\",cn:a[e]}}return m},getTuples:function(){var b=new Ext.data.Store({});b.data=this.store.data.clone();b.fields=this.store.fields;var l=[],a=this.dimensions,c=a.length,j;for(j=0;j<c;j++){l.push({field:a[j].dataIndex,direction:a[j].direction||\"ASC\"})}b.sort(l);var e=b.data.items,n=[],k=[],o,h,d,g,m;c=e.length;for(j=0;j<c;j++){d=this.getRecordInfo(e[j]);g=d.data;h=\"\";for(m in g){h+=g[m]+\"---\"}if(n.indexOf(h)==-1){n.push(h);k.push(d)}}b.destroy();return k},getRecordInfo:function(a){var e=this.dimensions,d=e.length,h={},j,c,b;for(b=0;b<d;b++){j=e[b];c=j.dataIndex;h[c]=a.get(c)}var g=function(i){return function(k){for(var l in i){if(k.get(l)!=i[l]){return false}}return true}};return{data:h,matcher:g(h)}},buildHeaders:function(){var l=this.getTuples(),m=l.length,a=this.dimensions,e,r=a.length,c=[],o,s,n,q,p,b,k,h,g,d;for(g=0;g<r;g++){e=a[g];s=[];p=0;b=0;for(d=0;d<m;d++){o=l[d];k=d==(m-1);n=o.data[e.dataIndex];h=q!=undefined&&q!=n;if(g>0&&d>0){h=h||o.data[a[g-1].dataIndex]!=l[d-1].data[a[g-1].dataIndex]}if(h){s.push({header:q,span:p,start:b});b+=p;p=0}if(k){s.push({header:n,span:p+1,start:b});b+=p;p=0}q=n;p++}c.push({items:s,width:e.width||this.defaultHeaderWidth});q=undefined}return c}});Ext.grid.HeaderDragZone=Ext.extend(Ext.dd.DragZone,{maxDragWidth:120,constructor:function(a,c,b){this.grid=a;this.view=a.getView();this.ddGroup=\"gridHeader\"+this.grid.getGridEl().id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,c);if(b){this.setHandleElId(Ext.id(c));this.setOuterHandleElId(Ext.id(b))}this.scroll=false},getDragData:function(c){var a=Ext.lib.Event.getTarget(c),b=this.view.findHeaderCell(a);if(b){return{ddel:b.firstChild,header:b}}return false},onInitDrag:function(a){this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=true;var b=this.dragData.ddel.cloneNode(true);b.id=Ext.id();b.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+\"px\";this.proxy.update(b);return true},afterValidDrop:function(){this.completeDrop()},afterInvalidDrop:function(){this.completeDrop()},completeDrop:function(){var a=this.view,b=this.dragHeadersDisabled;setTimeout(function(){a.headersDisabled=b},50)}});Ext.grid.HeaderDropZone=Ext.extend(Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,constructor:function(a,c,b){this.grid=a;this.view=a.getView();this.proxyTop=Ext.DomHelper.append(document.body,{cls:\"col-move-top\",html:\"&#160;\"},true);this.proxyBottom=Ext.DomHelper.append(document.body,{cls:\"col-move-bottom\",html:\"&#160;\"},true);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle(\"visibility\",\"hidden\")};this.ddGroup=\"gridHeader\"+this.grid.getGridEl().id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,a.getGridEl().dom)},getTargetFromEvent:function(c){var a=Ext.lib.Event.getTarget(c),b=this.view.findCellIndex(a);if(b!==false){return this.view.getHeaderCell(b)}},nextVisible:function(c){var b=this.view,a=this.grid.colModel;c=c.nextSibling;while(c){if(!a.isHidden(b.getCellIndex(c))){return c}c=c.nextSibling}return null},prevVisible:function(c){var b=this.view,a=this.grid.colModel;c=c.prevSibling;while(c){if(!a.isHidden(b.getCellIndex(c))){return c}c=c.prevSibling}return null},positionIndicator:function(d,k,j){var a=Ext.lib.Event.getPageX(j),g=Ext.lib.Dom.getRegion(k.firstChild),c,i,b=g.top+this.proxyOffsets[1];if((g.right-a)<=(g.right-g.left)/2){c=g.right+this.view.borderWidth;i=\"after\"}else{c=g.left;i=\"before\"}if(this.grid.colModel.isFixed(this.view.getCellIndex(k))){return false}c+=this.proxyOffsets[0];this.proxyTop.setLeftTop(c,b);this.proxyTop.show();if(!this.bottomOffset){this.bottomOffset=this.view.mainHd.getHeight()}this.proxyBottom.setLeftTop(c,b+this.proxyTop.dom.offsetHeight+this.bottomOffset);this.proxyBottom.show();return i},onNodeEnter:function(d,a,c,b){if(b.header!=d){this.positionIndicator(b.header,d,c)}},onNodeOver:function(g,b,d,c){var a=false;if(c.header!=g){a=this.positionIndicator(c.header,g,d)}if(!a){this.proxyTop.hide();this.proxyBottom.hide()}return a?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(d,a,c,b){this.proxyTop.hide();this.proxyBottom.hide()},onNodeDrop:function(b,m,g,c){var d=c.header;if(d!=b){var k=this.grid.colModel,j=Ext.lib.Event.getPageX(g),a=Ext.lib.Dom.getRegion(b.firstChild),o=(a.right-j)<=((a.right-a.left)/2)?\"after\":\"before\",i=this.view.getCellIndex(d),l=this.view.getCellIndex(b);if(o==\"after\"){l++}if(i<l){l--}k.moveColumn(i,l);return true}return false}});Ext.grid.GridView.ColumnDragZone=Ext.extend(Ext.grid.HeaderDragZone,{constructor:function(a,b){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,a,b,null);this.proxy.el.addClass(\"x-grid3-col-dd\")},handleMouseDown:function(a){},callHandleMouseDown:function(a){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,a)}});Ext.grid.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{fly:Ext.Element.fly,constructor:function(a,c,b){this.grid=a;this.view=a.getView();this.proxy=this.view.resizeProxy;Ext.grid.SplitDragZone.superclass.constructor.call(this,c,\"gridSplitters\"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.setHandleElId(Ext.id(c));this.setOuterHandleElId(Ext.id(b));this.scroll=false},b4StartDrag:function(a,d){this.view.headersDisabled=true;this.proxy.setHeight(this.view.mainWrap.getHeight());var b=this.cm.getColumnWidth(this.cellIndex);var c=Math.max(b-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(c,1000);this.setYConstraint(0,0);this.minX=a-c;this.maxX=a+1000;this.startPos=a;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,d)},handleMouseDown:function(c){var b=Ext.EventObject.setEvent(c);var a=this.fly(b.getTarget());if(a.hasClass(\"x-grid-split\")){this.cellIndex=this.view.getCellIndex(a.dom);this.split=a.dom;this.cm=this.grid.colModel;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}},endDrag:function(c){this.view.headersDisabled=false;var a=Math.max(this.minX,Ext.lib.Event.getPageX(c));var b=a-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+b)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GridDragZone=function(b,a){this.view=b.getView();Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,a);this.scroll=false;this.grid=b;this.ddel=document.createElement(\"div\");this.ddel.className=\"x-grid-dd-wrap\"};Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:\"GridDD\",getDragData:function(b){var a=Ext.lib.Event.getTarget(b);var d=this.view.findRowIndex(a);if(d!==false){var c=this.grid.selModel;if(!c.isSelected(d)||b.hasModifier()){c.handleMouseDown(this.grid,d,b)}return{grid:this.grid,ddel:this.ddel,rowIndex:d,selections:c.getSelections()}}return false},onInitDrag:function(b){var a=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=false},getRepairXY:function(b,a){return false},onEndDrag:function(a,b){},onValidDrop:function(a,b,c){this.hideProxy()},beforeInvalidDrop:function(a,b){}});Ext.grid.ColumnModel=Ext.extend(Ext.util.Observable,{defaultWidth:100,defaultSortable:false,constructor:function(a){if(a.columns){Ext.apply(this,a);this.setConfig(a.columns,true)}else{this.setConfig(a,true)}this.addEvents(\"widthchange\",\"headerchange\",\"hiddenchange\",\"columnmoved\",\"configchange\");Ext.grid.ColumnModel.superclass.constructor.call(this)},getColumnId:function(a){return this.config[a].id},getColumnAt:function(a){return this.config[a]},setConfig:function(d,b){var e,h,a;if(!b){delete this.totalWidth;for(e=0,a=this.config.length;e<a;e++){h=this.config[e];if(h.setEditor){h.setEditor(null)}}}this.defaults=Ext.apply({width:this.defaultWidth,sortable:this.defaultSortable},this.defaults);this.config=d;this.lookup={};for(e=0,a=d.length;e<a;e++){h=Ext.applyIf(d[e],this.defaults);if(Ext.isEmpty(h.id)){h.id=e}if(!h.isColumn){var g=Ext.grid.Column.types[h.xtype||\"gridcolumn\"];h=new g(h);d[e]=h}this.lookup[h.id]=h}if(!b){this.fireEvent(\"configchange\",this)}},getColumnById:function(a){return this.lookup[a]},getIndexById:function(c){for(var b=0,a=this.config.length;b<a;b++){if(this.config[b].id==c){return b}}return -1},moveColumn:function(e,b){var a=this.config,d=a[e];a.splice(e,1);a.splice(b,0,d);this.dataMap=null;this.fireEvent(\"columnmoved\",this,e,b)},getColumnCount:function(b){var d=this.config.length,e=0,a;if(b===true){for(a=0;a<d;a++){if(!this.isHidden(a)){e++}}return e}return d},getColumnsBy:function(g,e){var b=this.config,h=b.length,a=[],d,j;for(d=0;d<h;d++){j=b[d];if(g.call(e||this,j,d)===true){a[a.length]=j}}return a},isSortable:function(a){return !!this.config[a].sortable},isMenuDisabled:function(a){return !!this.config[a].menuDisabled},getRenderer:function(a){return this.config[a].renderer||Ext.grid.ColumnModel.defaultRenderer},getRendererScope:function(a){return this.config[a].scope},setRenderer:function(a,b){this.config[a].renderer=b},getColumnWidth:function(a){var b=this.config[a].width;if(typeof b!=\"number\"){b=this.defaultWidth}return b},setColumnWidth:function(b,c,a){this.config[b].width=c;this.totalWidth=null;if(!a){this.fireEvent(\"widthchange\",this,b,c)}},getTotalWidth:function(b){if(!this.totalWidth){this.totalWidth=0;for(var c=0,a=this.config.length;c<a;c++){if(b||!this.isHidden(c)){this.totalWidth+=this.getColumnWidth(c)}}}return this.totalWidth},getColumnHeader:function(a){return this.config[a].header},setColumnHeader:function(a,b){this.config[a].header=b;this.fireEvent(\"headerchange\",this,a,b)},getColumnTooltip:function(a){return this.config[a].tooltip},setColumnTooltip:function(a,b){this.config[a].tooltip=b},getDataIndex:function(a){return this.config[a].dataIndex},setDataIndex:function(a,b){this.config[a].dataIndex=b},findColumnIndex:function(d){var e=this.config;for(var b=0,a=e.length;b<a;b++){if(e[b].dataIndex==d){return b}}return -1},isCellEditable:function(b,e){var d=this.config[b],a=d.editable;return !!(a||(!Ext.isDefined(a)&&d.editor))},getCellEditor:function(a,b){return this.config[a].getCellEditor(b)},setEditable:function(a,b){this.config[a].editable=b},isHidden:function(a){return !!this.config[a].hidden},isFixed:function(a){return !!this.config[a].fixed},isResizable:function(a){return a>=0&&this.config[a].resizable!==false&&this.config[a].fixed!==true},setHidden:function(a,b){var d=this.config[a];if(d.hidden!==b){d.hidden=b;this.totalWidth=null;this.fireEvent(\"hiddenchange\",this,a,b)}},setEditor:function(a,b){this.config[a].setEditor(b)},destroy:function(){var b=this.config.length,a=0;for(;a<b;a++){this.config[a].destroy()}delete this.config;delete this.lookup;this.purgeListeners()},setState:function(a,b){b=Ext.applyIf(b,this.defaults);Ext.apply(this.config[a],b)}});Ext.grid.ColumnModel.defaultRenderer=function(a){if(typeof a==\"string\"&&a.length<1){return\"&#160;\"}return a};Ext.grid.AbstractSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(){this.locked=false;Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)},init:function(a){this.grid=a;if(this.lockOnInit){delete this.lockOnInit;this.locked=false;this.lock()}this.initEvents()},lock:function(){if(!this.locked){this.locked=true;var a=this.grid;if(a){a.getView().on({scope:this,beforerefresh:this.sortUnLock,refresh:this.sortLock})}else{this.lockOnInit=true}}},sortLock:function(){this.locked=true},sortUnLock:function(){this.locked=false},unlock:function(){if(this.locked){this.locked=false;var a=this.grid,b;if(a){b=a.getView();b.un(\"beforerefresh\",this.sortUnLock,this);b.un(\"refresh\",this.sortLock,this)}else{delete this.lockOnInit}}},isLocked:function(){return this.locked},destroy:function(){this.unlock();this.purgeListeners()}});Ext.grid.RowSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{singleSelect:false,constructor:function(a){Ext.apply(this,a);this.selections=new Ext.util.MixedCollection(false,function(b){return b.id});this.last=false;this.lastActive=false;this.addEvents(\"selectionchange\",\"beforerowselect\",\"rowselect\",\"rowdeselect\");Ext.grid.RowSelectionModel.superclass.constructor.call(this)},initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag){this.grid.on(\"rowmousedown\",this.handleMouseDown,this)}this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:this.onKeyPress,down:this.onKeyPress,scope:this});this.grid.getView().on({scope:this,refresh:this.onRefresh,rowupdated:this.onRowUpdated,rowremoved:this.onRemove})},onKeyPress:function(g,b){var a=b==\"up\",h=a?\"selectPrevious\":\"selectNext\",d=a?-1:1,c;if(!g.shiftKey||this.singleSelect){this[h](false)}else{if(this.last!==false&&this.lastActive!==false){c=this.last;this.selectRange(this.last,this.lastActive+d);this.grid.getView().focusRow(this.lastActive);if(c!==false){this.last=c}}else{this.selectFirstRow()}}},onRefresh:function(){var g=this.grid.store,d=this.getSelections(),c=0,a=d.length,b,e;this.silent=true;this.clearSelections(true);for(;c<a;c++){e=d[c];if((b=g.indexOfId(e.id))!=-1){this.selectRow(b,true)}}if(d.length!=this.selections.getCount()){this.fireEvent(\"selectionchange\",this)}this.silent=false},onRemove:function(a,b,c){if(this.selections.remove(c)!==false){this.fireEvent(\"selectionchange\",this)}},onRowUpdated:function(a,b,c){if(this.isSelected(c)){a.onRowSelect(b)}},selectRecords:function(b,e){if(!e){this.clearSelections()}var d=this.grid.store,c=0,a=b.length;for(;c<a;c++){this.selectRow(d.indexOf(b[c]),true)}},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(a){this.selectRow(this.grid.store.getCount()-1,a)},selectNext:function(a){if(this.hasNext()){this.selectRow(this.last+1,a);this.grid.getView().focusRow(this.last);return true}return false},selectPrevious:function(a){if(this.hasPrevious()){this.selectRow(this.last-1,a);this.grid.getView().focusRow(this.last);return true}return false},hasNext:function(){return this.last!==false&&(this.last+1)<this.grid.store.getCount()},hasPrevious:function(){return !!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(e,d){var c=this.getSelections(),b=0,a=c.length;for(;b<a;b++){if(e.call(d||this,c[b],b)===false){return false}}return true},clearSelections:function(a){if(this.isLocked()){return}if(a!==true){var c=this.grid.store,b=this.selections;b.each(function(d){this.deselectRow(c.indexOfId(d.id))},this);b.clear()}else{this.selections.clear()}this.last=false},selectAll:function(){if(this.isLocked()){return}this.selections.clear();for(var b=0,a=this.grid.store.getCount();b<a;b++){this.selectRow(b,true)}},hasSelection:function(){return this.selections.length>0},isSelected:function(a){var b=Ext.isNumber(a)?this.grid.store.getAt(a):a;return(b&&this.selections.key(b.id)?true:false)},isIdSelected:function(a){return(this.selections.key(a)?true:false)},handleMouseDown:function(d,i,h){if(h.button!==0||this.isLocked()){return}var a=this.grid.getView();if(h.shiftKey&&!this.singleSelect&&this.last!==false){var c=this.last;this.selectRange(c,i,h.ctrlKey);this.last=c;a.focusRow(i)}else{var b=this.isSelected(i);if(h.ctrlKey&&b){this.deselectRow(i)}else{if(!b||this.getCount()>1){this.selectRow(i,h.ctrlKey||h.shiftKey);a.focusRow(i)}}}},selectRows:function(c,d){if(!d){this.clearSelections()}for(var b=0,a=c.length;b<a;b++){this.selectRow(c[b],true)}},selectRange:function(b,a,d){var c;if(this.isLocked()){return}if(!d){this.clearSelections()}if(b<=a){for(c=b;c<=a;c++){this.selectRow(c,true)}}else{for(c=b;c>=a;c--){this.selectRow(c,true)}}},deselectRange:function(c,b,a){if(this.isLocked()){return}for(var d=c;d<=b;d++){this.deselectRow(d,a)}},selectRow:function(b,d,a){if(this.isLocked()||(b<0||b>=this.grid.store.getCount())||(d&&this.isSelected(b))){return}var c=this.grid.store.getAt(b);if(c&&this.fireEvent(\"beforerowselect\",this,b,d,c)!==false){if(!d||this.singleSelect){this.clearSelections()}this.selections.add(c);this.last=this.lastActive=b;if(!a){this.grid.getView().onRowSelect(b)}if(!this.silent){this.fireEvent(\"rowselect\",this,b,c);this.fireEvent(\"selectionchange\",this)}}},deselectRow:function(b,a){if(this.isLocked()){return}if(this.last==b){this.last=false}if(this.lastActive==b){this.lastActive=false}var c=this.grid.store.getAt(b);if(c){this.selections.remove(c);if(!a){this.grid.getView().onRowDeselect(b)}this.fireEvent(\"rowdeselect\",this,b,c);this.fireEvent(\"selectionchange\",this)}},acceptsNav:function(c,b,a){return !a.isHidden(b)&&a.isCellEditable(b,c)},onEditorKey:function(n,l){var d=l.getKey(),h,i=this.grid,p=i.lastEdit,j=i.activeEditor,b=l.shiftKey,o,p,a,m;if(d==l.TAB){l.stopEvent();j.completeEdit();if(b){h=i.walkCells(j.row,j.col-1,-1,this.acceptsNav,this)}else{h=i.walkCells(j.row,j.col+1,1,this.acceptsNav,this)}}else{if(d==l.ENTER){if(this.moveEditorOnEnter!==false){if(b){h=i.walkCells(p.row-1,p.col,-1,this.acceptsNav,this)}else{h=i.walkCells(p.row+1,p.col,1,this.acceptsNav,this)}}}}if(h){a=h[0];m=h[1];this.onEditorSelect(a,p.row);if(i.isEditor&&i.editing){o=i.activeEditor;if(o&&o.field.triggerBlur){o.field.triggerBlur()}}i.startEditing(a,m)}},onEditorSelect:function(b,a){if(a!=b){this.selectRow(b)}},destroy:function(){Ext.destroy(this.rowNav);this.rowNav=null;Ext.grid.RowSelectionModel.superclass.destroy.call(this)}});Ext.grid.Column=Ext.extend(Ext.util.Observable,{isColumn:true,constructor:function(b){Ext.apply(this,b);if(Ext.isString(this.renderer)){this.renderer=Ext.util.Format[this.renderer]}else{if(Ext.isObject(this.renderer)){this.scope=this.renderer.scope;this.renderer=this.renderer.fn}}if(!this.scope){this.scope=this}var a=this.editor;delete this.editor;this.setEditor(a);this.addEvents(\"click\",\"contextmenu\",\"dblclick\",\"mousedown\");Ext.grid.Column.superclass.constructor.call(this)},processEvent:function(b,d,c,g,a){return this.fireEvent(b,this,c,g,d)},destroy:function(){if(this.setEditor){this.setEditor(null)}this.purgeListeners()},renderer:function(a){return a},getEditor:function(a){return this.editable!==false?this.editor:null},setEditor:function(b){var a=this.editor;if(a){if(a.gridEditor){a.gridEditor.destroy();delete a.gridEditor}else{a.destroy()}}this.editor=null;if(b){if(!b.isXType){b=Ext.create(b,\"textfield\")}this.editor=b}},getCellEditor:function(b){var a=this.getEditor(b);if(a){if(!a.startEdit){if(!a.gridEditor){a.gridEditor=new Ext.grid.GridEditor(a)}a=a.gridEditor}}return a}});Ext.grid.BooleanColumn=Ext.extend(Ext.grid.Column,{trueText:\"true\",falseText:\"false\",undefinedText:\"&#160;\",constructor:function(a){Ext.grid.BooleanColumn.superclass.constructor.call(this,a);var c=this.trueText,d=this.falseText,b=this.undefinedText;this.renderer=function(e){if(e===undefined){return b}if(!e||e===\"false\"){return d}return c}}});Ext.grid.NumberColumn=Ext.extend(Ext.grid.Column,{format:\"0,000.00\",constructor:function(a){Ext.grid.NumberColumn.superclass.constructor.call(this,a);this.renderer=Ext.util.Format.numberRenderer(this.format)}});Ext.grid.DateColumn=Ext.extend(Ext.grid.Column,{format:\"m/d/Y\",constructor:function(a){Ext.grid.DateColumn.superclass.constructor.call(this,a);this.renderer=Ext.util.Format.dateRenderer(this.format)}});Ext.grid.TemplateColumn=Ext.extend(Ext.grid.Column,{constructor:function(a){Ext.grid.TemplateColumn.superclass.constructor.call(this,a);var b=(!Ext.isPrimitive(this.tpl)&&this.tpl.compile)?this.tpl:new Ext.XTemplate(this.tpl);this.renderer=function(d,e,c){return b.apply(c.data)};this.tpl=b}});Ext.grid.ActionColumn=Ext.extend(Ext.grid.Column,{header:\"&#160;\",actionIdRe:/x-action-col-(\\d+)/,altText:\"\",constructor:function(b){var g=this,c=b.items||(g.items=[g]),a=c.length,d,e;Ext.grid.ActionColumn.superclass.constructor.call(g,b);g.renderer=function(h,i){h=Ext.isFunction(b.renderer)?b.renderer.apply(this,arguments)||\"\":\"\";i.css+=\" x-action-col-cell\";for(d=0;d<a;d++){e=c[d];h+='<img alt=\"'+(e.altText||g.altText)+'\" src=\"'+(e.icon||Ext.BLANK_IMAGE_URL)+'\" class=\"x-action-col-icon x-action-col-'+String(d)+\" \"+(e.iconCls||\"\")+\" \"+(Ext.isFunction(e.getClass)?e.getClass.apply(e.scope||this.scope||this,arguments):\"\")+'\"'+((e.tooltip)?' ext:qtip=\"'+e.tooltip+'\"':\"\")+\" />\"}return h}},destroy:function(){delete this.items;delete this.renderer;return Ext.grid.ActionColumn.superclass.destroy.apply(this,arguments)},processEvent:function(c,i,d,j,b){var a=i.getTarget().className.match(this.actionIdRe),h,g;if(a&&(h=this.items[parseInt(a[1],10)])){if(c==\"click\"){(g=h.handler||this.handler)&&g.call(h.scope||this.scope||this,d,j,b,h,i)}else{if((c==\"mousedown\")&&(h.stopSelection!==false)){return false}}}return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)}});Ext.grid.Column.types={gridcolumn:Ext.grid.Column,booleancolumn:Ext.grid.BooleanColumn,numbercolumn:Ext.grid.NumberColumn,datecolumn:Ext.grid.DateColumn,templatecolumn:Ext.grid.TemplateColumn,actioncolumn:Ext.grid.ActionColumn};Ext.grid.RowNumberer=Ext.extend(Object,{header:\"\",width:23,sortable:false,constructor:function(a){Ext.apply(this,a);if(this.rowspan){this.renderer=this.renderer.createDelegate(this)}},fixed:true,hideable:false,menuDisabled:true,dataIndex:\"\",id:\"numberer\",rowspan:undefined,renderer:function(b,c,a,d){if(this.rowspan){c.cellAttr='rowspan=\"'+this.rowspan+'\"'}return d+1}});Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class=\"x-grid3-hd-checker\">&#160;</div>',width:20,sortable:false,menuDisabled:true,fixed:true,hideable:false,dataIndex:\"\",id:\"checker\",isColumn:true,constructor:function(){Ext.grid.CheckboxSelectionModel.superclass.constructor.apply(this,arguments);if(this.checkOnly){this.handleMouseDown=Ext.emptyFn}},initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this);this.grid.on(\"render\",function(){Ext.fly(this.grid.getView().innerHd).on(\"mousedown\",this.onHdMouseDown,this)},this)},processEvent:function(b,d,c,g,a){if(b==\"mousedown\"){this.onMouseDown(d,d.getTarget());return false}else{return Ext.grid.Column.prototype.processEvent.apply(this,arguments)}},onMouseDown:function(c,b){if(c.button===0&&b.className==\"x-grid3-row-checker\"){c.stopEvent();var d=c.getTarget(\".x-grid3-row\");if(d){var a=d.rowIndex;if(this.isSelected(a)){this.deselectRow(a)}else{this.selectRow(a,true);this.grid.getView().focusRow(a)}}}},onHdMouseDown:function(c,a){if(a.className==\"x-grid3-hd-checker\"){c.stopEvent();var b=Ext.fly(a.parentNode);var d=b.hasClass(\"x-grid3-hd-checker-on\");if(d){b.removeClass(\"x-grid3-hd-checker-on\");this.clearSelections()}else{b.addClass(\"x-grid3-hd-checker-on\");this.selectAll()}}},renderer:function(b,c,a){return'<div class=\"x-grid3-row-checker\">&#160;</div>'},onEditorSelect:function(b,a){if(a!=b&&!this.checkOnly){this.selectRow(b)}}});Ext.grid.CellSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{constructor:function(a){Ext.apply(this,a);this.selection=null;this.addEvents(\"beforecellselect\",\"cellselect\",\"selectionchange\");Ext.grid.CellSelectionModel.superclass.constructor.call(this)},initEvents:function(){this.grid.on(\"cellmousedown\",this.handleMouseDown,this);this.grid.on(Ext.EventManager.getKeyEvent(),this.handleKeyDown,this);this.grid.getView().on({scope:this,refresh:this.onViewChange,rowupdated:this.onRowUpdated,beforerowremoved:this.clearSelections,beforerowsinserted:this.clearSelections});if(this.grid.isEditor){this.grid.on(\"beforeedit\",this.beforeEdit,this)}},beforeEdit:function(a){this.select(a.row,a.column,false,true,a.record)},onRowUpdated:function(a,b,c){if(this.selection&&this.selection.record==c){a.onCellSelect(b,this.selection.cell[1])}},onViewChange:function(){this.clearSelections(true)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(b){var a=this.selection;if(a){if(b!==true){this.grid.view.onCellDeselect(a.cell[0],a.cell[1])}this.selection=null;this.fireEvent(\"selectionchange\",this,null)}},hasSelection:function(){return this.selection?true:false},handleMouseDown:function(b,d,a,c){if(c.button!==0||this.isLocked()){return}this.select(d,a)},select:function(g,c,b,e,d){if(this.fireEvent(\"beforecellselect\",this,g,c)!==false){this.clearSelections();d=d||this.grid.store.getAt(g);this.selection={record:d,cell:[g,c]};if(!b){var a=this.grid.getView();a.onCellSelect(g,c);if(e!==true){a.focusCell(g,c)}}this.fireEvent(\"cellselect\",this,g,c);this.fireEvent(\"selectionchange\",this,this.selection)}},isSelectable:function(c,b,a){return !a.isHidden(b)},onEditorKey:function(b,a){if(a.getKey()==a.TAB){this.handleKeyDown(a)}},handleKeyDown:function(j){if(!j.isNavKeyPress()){return}var d=j.getKey(),i=this.grid,p=this.selection,b=this,m=function(g,c,e){return i.walkCells(g,c,e,i.isEditor&&i.editing?b.acceptsNav:b.isSelectable,b)},o,h,a,l,n;switch(d){case j.ESC:case j.PAGE_UP:case j.PAGE_DOWN:break;default:j.stopEvent();break}if(!p){o=m(0,0,1);if(o){this.select(o[0],o[1])}return}o=p.cell;a=o[0];l=o[1];switch(d){case j.TAB:if(j.shiftKey){h=m(a,l-1,-1)}else{h=m(a,l+1,1)}break;case j.DOWN:h=m(a+1,l,1);break;case j.UP:h=m(a-1,l,-1);break;case j.RIGHT:h=m(a,l+1,1);break;case j.LEFT:h=m(a,l-1,-1);break;case j.ENTER:if(i.isEditor&&!i.editing){i.startEditing(a,l);return}break}if(h){a=h[0];l=h[1];this.select(a,l);if(i.isEditor&&i.editing){n=i.activeEditor;if(n&&n.field.triggerBlur){n.field.triggerBlur()}i.startEditing(a,l)}}},acceptsNav:function(c,b,a){return !a.isHidden(b)&&a.isCellEditable(b,c)}});Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,forceValidation:false,isEditor:true,detectEdit:false,autoEncode:false,trackMouseOver:false,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this);if(!this.selModel){this.selModel=new Ext.grid.CellSelectionModel()}this.activeEditor=null;this.addEvents(\"beforeedit\",\"afteredit\",\"validateedit\")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this);this.getGridEl().on(\"mousewheel\",this.stopEditing.createDelegate(this,[true]),this);this.on(\"columnresize\",this.stopEditing,this,[true]);if(this.clicksToEdit==1){this.on(\"cellclick\",this.onCellDblClick,this)}else{var a=this.getView();if(this.clicksToEdit==\"auto\"&&a.mainBody){a.mainBody.on(\"mousedown\",this.onAutoEditClick,this)}this.on(\"celldblclick\",this.onCellDblClick,this)}},onResize:function(){Ext.grid.EditorGridPanel.superclass.onResize.apply(this,arguments);var a=this.activeEditor;if(this.editing&&a){a.realign(true)}},onCellDblClick:function(b,c,a){this.startEditing(c,a)},onAutoEditClick:function(c,b){if(c.button!==0){return}var g=this.view.findRowIndex(b),a=this.view.findCellIndex(b);if(g!==false&&a!==false){this.stopEditing();if(this.selModel.getSelectedCell){var d=this.selModel.getSelectedCell();if(d&&d[0]===g&&d[1]===a){this.startEditing(g,a)}}else{if(this.selModel.isSelected(g)){this.startEditing(g,a)}}}},onEditComplete:function(b,d,a){this.editing=false;this.lastActiveEditor=this.activeEditor;this.activeEditor=null;var c=b.record,h=this.colModel.getDataIndex(b.col);d=this.postEditValue(d,a,c,h);if(this.forceValidation===true||String(d)!==String(a)){var g={grid:this,record:c,field:h,originalValue:a,value:d,row:b.row,column:b.col,cancel:false};if(this.fireEvent(\"validateedit\",g)!==false&&!g.cancel&&String(d)!==String(a)){c.set(h,g.value);delete g.cancel;this.fireEvent(\"afteredit\",g)}}this.view.focusCell(b.row,b.col)},startEditing:function(i,c){this.stopEditing();if(this.colModel.isCellEditable(c,i)){this.view.ensureVisible(i,c,true);var d=this.store.getAt(i),h=this.colModel.getDataIndex(c),g={grid:this,record:d,field:h,value:d.data[h],row:i,column:c,cancel:false};if(this.fireEvent(\"beforeedit\",g)!==false&&!g.cancel){this.editing=true;var b=this.colModel.getCellEditor(c,i);if(!b){return}if(!b.rendered){b.parentEl=this.view.getEditorParent(b);b.on({scope:this,render:{fn:function(e){e.field.focus(false,true)},single:true,scope:this},specialkey:function(k,j){this.getSelectionModel().onEditorKey(k,j)},complete:this.onEditComplete,canceledit:this.stopEditing.createDelegate(this,[true])})}Ext.apply(b,{row:i,col:c,record:d});this.lastEdit={row:i,col:c};this.activeEditor=b;b.selectSameEditor=(this.activeEditor==this.lastActiveEditor);var a=this.preEditValue(d,h);b.startEdit(this.view.getCell(i,c).firstChild,Ext.isDefined(a)?a:\"\");(function(){delete b.selectSameEditor}).defer(50)}}},preEditValue:function(a,c){var b=a.data[c];return this.autoEncode&&Ext.isString(b)?Ext.util.Format.htmlDecode(b):b},postEditValue:function(c,a,b,d){return this.autoEncode&&Ext.isString(c)?Ext.util.Format.htmlEncode(c):c},stopEditing:function(b){if(this.editing){var a=this.lastActiveEditor=this.activeEditor;if(a){a[b===true?\"cancelEdit\":\"completeEdit\"]();this.view.focusCell(a.row,a.col)}this.activeEditor=null}this.editing=false}});Ext.reg(\"editorgrid\",Ext.grid.EditorGridPanel);Ext.grid.GridEditor=function(b,a){Ext.grid.GridEditor.superclass.constructor.call(this,b,a);b.monitorTab=false};Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:\"tl-tl\",autoSize:\"width\",hideEl:false,cls:\"x-small-editor x-grid-editor\",shim:false,shadow:false});Ext.grid.PropertyRecord=Ext.data.Record.create([{name:\"name\",type:\"string\"},\"value\"]);Ext.grid.PropertyStore=Ext.extend(Ext.util.Observable,{constructor:function(a,b){this.grid=a;this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord});this.store.on(\"update\",this.onUpdate,this);if(b){this.setSource(b)}Ext.grid.PropertyStore.superclass.constructor.call(this)},setSource:function(c){this.source=c;this.store.removeAll();var b=[];for(var a in c){if(this.isEditableValue(c[a])){b.push(new Ext.grid.PropertyRecord({name:a,value:c[a]},a))}}this.store.loadRecords({records:b},{},true)},onUpdate:function(e,a,d){if(d==Ext.data.Record.EDIT){var b=a.data.value;var c=a.modified.value;if(this.grid.fireEvent(\"beforepropertychange\",this.source,a.id,b,c)!==false){this.source[a.id]=b;a.commit();this.grid.fireEvent(\"propertychange\",this.source,a.id,b,c)}else{a.reject()}}},getProperty:function(a){return this.store.getAt(a)},isEditableValue:function(a){return Ext.isPrimitive(a)||Ext.isDate(a)},setValue:function(d,c,a){var b=this.getRec(d);if(b){b.set(\"value\",c);this.source[d]=c}else{if(a){this.source[d]=c;b=new Ext.grid.PropertyRecord({name:d,value:c},d);this.store.add(b)}}},remove:function(b){var a=this.getRec(b);if(a){this.store.remove(a);delete this.source[b]}},getRec:function(a){return this.store.getById(a)},getSource:function(){return this.source}});Ext.grid.PropertyColumnModel=Ext.extend(Ext.grid.ColumnModel,{nameText:\"Name\",valueText:\"Value\",dateFormat:\"m/j/Y\",trueText:\"true\",falseText:\"false\",constructor:function(c,b){var d=Ext.grid,e=Ext.form;this.grid=c;d.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:true,dataIndex:\"name\",id:\"name\",menuDisabled:true},{header:this.valueText,width:50,resizable:false,dataIndex:\"value\",id:\"value\",menuDisabled:true}]);this.store=b;var a=new e.Field({autoCreate:{tag:\"select\",children:[{tag:\"option\",value:\"true\",html:this.trueText},{tag:\"option\",value:\"false\",html:this.falseText}]},getValue:function(){return this.el.dom.value==\"true\"}});this.editors={date:new d.GridEditor(new e.DateField({selectOnFocus:true})),string:new d.GridEditor(new e.TextField({selectOnFocus:true})),number:new d.GridEditor(new e.NumberField({selectOnFocus:true,style:\"text-align:left;\"})),\"boolean\":new d.GridEditor(a,{autoSize:\"both\"})};this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)},renderDate:function(a){return a.dateFormat(this.dateFormat)},renderBool:function(a){return this[a?\"trueText\":\"falseText\"]},isCellEditable:function(a,b){return a==1},getRenderer:function(a){return a==1?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(a){return this.getPropertyName(a)},renderCell:function(d,b,c){var a=this.grid.customRenderers[c.get(\"name\")];if(a){return a.apply(this,arguments)}var e=d;if(Ext.isDate(d)){e=this.renderDate(d)}else{if(typeof d==\"boolean\"){e=this.renderBool(d)}}return Ext.util.Format.htmlEncode(e)},getPropertyName:function(b){var a=this.grid.propertyNames;return a&&a[b]?a[b]:b},getCellEditor:function(a,e){var b=this.store.getProperty(e),d=b.data.name,c=b.data.value;if(this.grid.customEditors[d]){return this.grid.customEditors[d]}if(Ext.isDate(c)){return this.editors.date}else{if(typeof c==\"number\"){return this.editors.number}else{if(typeof c==\"boolean\"){return this.editors[\"boolean\"]}else{return this.editors.string}}}},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this);this.destroyEditors(this.editors);this.destroyEditors(this.grid.customEditors)},destroyEditors:function(b){for(var a in b){Ext.destroy(b[a])}}});Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,viewConfig:{forceFit:true},initComponent:function(){this.customRenderers=this.customRenderers||{};this.customEditors=this.customEditors||{};this.lastEditRow=null;var b=new Ext.grid.PropertyStore(this);this.propStore=b;var a=new Ext.grid.PropertyColumnModel(this,b);b.store.sort(\"name\",\"ASC\");this.addEvents(\"beforepropertychange\",\"propertychange\");this.cm=a;this.ds=b.store;Ext.grid.PropertyGrid.superclass.initComponent.call(this);this.mon(this.selModel,\"beforecellselect\",function(e,d,c){if(c===0){this.startEditing.defer(200,this,[d,1]);return false}},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass(\"x-props-grid\")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments);if(this.source){this.setSource(this.source)}},setSource:function(a){this.propStore.setSource(a)},getSource:function(){return this.propStore.getSource()},setProperty:function(c,b,a){this.propStore.setValue(c,b,a)},removeProperty:function(a){this.propStore.remove(a)}});Ext.reg(\"propertygrid\",Ext.grid.PropertyGrid);Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{groupByText:\"Group By This Field\",showGroupsText:\"Show in Groups\",hideGroupedColumn:false,showGroupName:true,startCollapsed:false,enableGrouping:true,enableGroupingMenu:true,enableNoGroups:true,emptyGroupText:\"(None)\",ignoreAdd:false,groupTextTpl:\"{text}\",groupMode:\"value\",cancelEditOnToggle:true,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this);this.state={};var a=this.grid.getSelectionModel();a.on(a.selectRow?\"beforerowselect\":\"beforecellselect\",this.onBeforeRowSelect,this);if(!this.startGroup){this.startGroup=new Ext.XTemplate('<div id=\"{groupId}\" class=\"x-grid-group {cls}\">','<div id=\"{groupId}-hd\" class=\"x-grid-group-hd\" style=\"{style}\"><div class=\"x-grid-group-title\">',this.groupTextTpl,\"</div></div>\",'<div id=\"{groupId}-bd\" class=\"x-grid-group-body\">')}this.startGroup.compile();if(!this.endGroup){this.endGroup=\"</div></div>\"}},findGroup:function(a){return Ext.fly(a).up(\".x-grid-group\",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(d,a,b){if(this.canGroup()&&!this.ignoreAdd){var c=this.getScrollState();this.fireEvent(\"beforerowsinserted\",d,b,b+(a.length-1));this.refresh();this.restoreScroll(c);this.fireEvent(\"rowsinserted\",d,b,b+(a.length-1))}else{if(!this.canGroup()){Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)}}},onRemove:function(e,a,b,d){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var c=document.getElementById(a._groupId);if(c&&c.childNodes[1].childNodes.length<1){Ext.removeNode(c)}this.applyEmptyText()},refreshRow:function(a){if(this.ds.getCount()==1){this.refresh()}else{this.isUpdating=true;Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments);this.isUpdating=false}},beforeMenuShow:function(){var c,a=this.hmenu.items,b=this.cm.config[this.hdCtxIndex].groupable===false;if((c=a.get(\"groupBy\"))){c.setDisabled(b)}if((c=a.get(\"showGroups\"))){c.setDisabled(b);c.setChecked(this.canGroup(),true)}},renderUI:function(){var a=Ext.grid.GroupingView.superclass.renderUI.call(this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add(\"-\",{itemId:\"groupBy\",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:\"x-group-by-icon\"});if(this.enableNoGroups){this.hmenu.add({itemId:\"showGroups\",text:this.showGroupsText,checked:true,checkHandler:this.onShowGroupsClick,scope:this})}this.hmenu.on(\"beforeshow\",this.beforeMenuShow,this)}return a},processEvent:function(b,i){Ext.grid.GroupingView.superclass.processEvent.call(this,b,i);var h=i.getTarget(\".x-grid-group-hd\",this.mainBody);if(h){var g=this.getGroupField(),d=this.getPrefix(g),a=h.id.substring(d.length),c=new RegExp(\"gp-\"+Ext.escapeRe(g)+\"--hd\");a=a.substr(0,a.length-3);if(a||c.test(h.id)){this.grid.fireEvent(\"group\"+b,this.grid,g,a,i)}if(b==\"mousedown\"&&i.button==0){this.toggleGroup(h.parentNode)}}},onGroupByClick:function(){var a=this.grid;this.enableGrouping=true;a.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex));a.fireEvent(\"groupchange\",a,a.store.getGroupState());this.beforeMenuShow();this.refresh()},onShowGroupsClick:function(a,b){this.enableGrouping=b;if(b){this.onGroupByClick()}else{this.grid.store.clearGrouping();this.grid.fireEvent(\"groupchange\",this,null)}},toggleRowIndex:function(c,a){if(!this.canGroup()){return}var b=this.getRow(c);if(b){this.toggleGroup(this.findGroup(b),a)}},toggleGroup:function(c,b){var a=Ext.get(c),d=Ext.util.Format.htmlEncode(a.id);b=Ext.isDefined(b)?b:a.hasClass(\"x-grid-group-collapsed\");if(this.state[d]!==b){if(this.cancelEditOnToggle!==false){this.grid.stopEditing(true)}this.state[d]=b;a[b?\"removeClass\":\"addClass\"](\"x-grid-group-collapsed\")}},toggleAllGroups:function(c){var b=this.getGroups();for(var d=0,a=b.length;d<a;d++){this.toggleGroup(b[d],c)}},expandAllGroups:function(){this.toggleAllGroups(true)},collapseAllGroups:function(){this.toggleAllGroups(false)},getGroup:function(a,e,i,j,b,h){var c=this.cm.config[b],d=i?i.call(c.scope,a,{},e,j,b,h):String(a);if(d===\"\"||d===\"&#160;\"){d=c.emptyGroupText||this.emptyGroupText}return d},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){if(!this.ds||!this.cm){return}Ext.grid.GroupingView.superclass.afterRender.call(this);if(this.grid.deferRowRender){this.updateGroupWidths()}},afterRenderUI:function(){Ext.grid.GroupingView.superclass.afterRenderUI.call(this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add(\"-\",{itemId:\"groupBy\",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:\"x-group-by-icon\"});if(this.enableNoGroups){this.hmenu.add({itemId:\"showGroups\",text:this.showGroupsText,checked:true,checkHandler:this.onShowGroupsClick,scope:this})}this.hmenu.on(\"beforeshow\",this.beforeMenuShow,this)}},renderRows:function(){var a=this.getGroupField();var e=!!a;if(this.hideGroupedColumn){var b=this.cm.findColumnIndex(a),d=Ext.isDefined(this.lastGroupField);if(!e&&d){this.mainBody.update(\"\");this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),false);delete this.lastGroupField}else{if(e&&!d){this.lastGroupField=a;this.cm.setHidden(b,true)}else{if(e&&d&&a!==this.lastGroupField){this.mainBody.update(\"\");var c=this.cm.findColumnIndex(this.lastGroupField);this.cm.setHidden(c,false);this.lastGroupField=a;this.cm.setHidden(b,true)}}}}return Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(c,h,q,a,p,s){if(h.length<1){return\"\"}if(!this.canGroup()||this.isUpdating){return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments)}var z=this.getGroupField(),o=this.cm.findColumnIndex(z),w,j=\"width:\"+this.getTotalWidth()+\";\",e=this.cm.config[o],b=e.groupRenderer||e.renderer,t=this.showGroupName?(e.groupName||e.header)+\": \":\"\",y=[],l,u,v,n;for(u=0,v=h.length;u<v;u++){var k=a+u,m=h[u],d=m.data[z];w=this.getGroup(d,m,b,k,o,q);if(!l||l.group!=w){n=this.constructId(d,z,o);this.state[n]=!(Ext.isDefined(this.state[n])?!this.state[n]:this.startCollapsed);l={group:w,gvalue:d,text:t+w,groupId:n,startRow:k,rs:[m],cls:this.state[n]?\"\":\"x-grid-group-collapsed\",style:j};y.push(l)}else{l.rs.push(m)}m._groupId=n}var x=[];for(u=0,v=y.length;u<v;u++){w=y[u];this.doGroupStart(x,w,c,q,p);x[x.length]=Ext.grid.GroupingView.superclass.doRender.call(this,c,w.rs,q,w.startRow,p,s);this.doGroupEnd(x,w,c,q,p)}return x.join(\"\")},getGroupId:function(a){var b=this.getGroupField();return this.constructId(a,b,this.cm.findColumnIndex(b))},constructId:function(c,e,a){var b=this.cm.config[a],d=b.groupRenderer||b.renderer,g=(this.groupMode==\"value\")?c:this.getGroup(c,{data:{}},d,0,a,this.ds);return this.getPrefix(e)+Ext.util.Format.htmlEncode(g)},canGroup:function(){return this.enableGrouping&&!!this.getGroupField()},getPrefix:function(a){return this.grid.getGridEl().id+\"-gp-\"+a+\"-\"},doGroupStart:function(a,d,b,e,c){a[a.length]=this.startGroup.apply(d)},doGroupEnd:function(a,d,b,e,c){a[a.length]=this.endGroup},getRows:function(){if(!this.canGroup()){return Ext.grid.GroupingView.superclass.getRows.call(this)}var k=[],c=this.getGroups(),h,e=0,a=c.length,d,b;for(;e<a;++e){h=c[e].childNodes[1];if(h){h=h.childNodes;for(d=0,b=h.length;d<b;++d){k[k.length]=h[d]}}}return k},updateGroupWidths:function(){if(!this.canGroup()||!this.hasRows()){return}var c=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.getScrollOffset())+\"px\";var b=this.getGroups();for(var d=0,a=b.length;d<a;d++){b[d].firstChild.style.width=c}},onColumnWidthUpdated:function(c,a,b){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,c,a,b);this.updateGroupWidths()},onAllColumnWidthsUpdated:function(a,b){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,a,b);this.updateGroupWidths()},onColumnHiddenUpdated:function(b,c,a){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,b,c,a);this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(b,a){this.toggleRowIndex(a,true)}});Ext.grid.GroupingView.GROUP_ID=1000;\n 17301  </script>\n 17302  \n .....\n 20880   *  More information: http://sizzlejs.com/\n 20881   */\n 20882: (function(){var N=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^[\\]]*\\]|[^[\\]]+)+\\]|\\\\.|[^ >+~,(\\[]+)+|[>+~])(\\s*,\\s*)?/g,I=0,F=Object.prototype.toString;var E=function(ae,S,aa,V){aa=aa||[];S=S||document;if(S.nodeType!==1&&S.nodeType!==9){return[]}if(!ae||typeof ae!==\"string\"){return aa}var ab=[],ac,Y,ah,ag,Z,R,Q=true;N.lastIndex=0;while((ac=N.exec(ae))!==null){ab.push(ac[1]);if(ac[2]){R=RegExp.rightContext;break}}if(ab.length>1&&G.match.POS.exec(ae)){if(ab.length===2&&G.relative[ab[0]]){var U=\"\",X;while((X=G.match.POS.exec(ae))){U+=X[0];ae=ae.replace(G.match.POS,\"\")}Y=E.filter(U,E(/\\s$/.test(ae)?ae+\"*\":ae,S))}else{Y=G.relative[ab[0]]?[S]:E(ab.shift(),S);while(ab.length){var P=[];ae=ab.shift();if(G.relative[ae]){ae+=ab.shift()}for(var af=0,ad=Y.length;af<ad;af++){E(ae,Y[af],P)}Y=P}}}else{var ai=V?{expr:ab.pop(),set:D(V)}:E.find(ab.pop(),ab.length===1&&S.parentNode?S.parentNode:S);Y=E.filter(ai.expr,ai.set);if(ab.length>0){ah=D(Y)}else{Q=false}while(ab.length){var T=ab.pop(),W=T;if(!G.relative[T]){T=\"\"}else{W=ab.pop()}if(W==null){W=S}G.relative[T](ah,W,M(S))}}if(!ah){ah=Y}if(!ah){throw\"Syntax error, unrecognized expression: \"+(T||ae)}if(F.call(ah)===\"[object Array]\"){if(!Q){aa.push.apply(aa,ah)}else{if(S.nodeType===1){for(var af=0;ah[af]!=null;af++){if(ah[af]&&(ah[af]===true||ah[af].nodeType===1&&H(S,ah[af]))){aa.push(Y[af])}}}else{for(var af=0;ah[af]!=null;af++){if(ah[af]&&ah[af].nodeType===1){aa.push(Y[af])}}}}}else{D(ah,aa)}if(R){E(R,S,aa,V)}return aa};E.matches=function(P,Q){return E(P,null,null,Q)};E.find=function(V,S){var W,Q;if(!V){return[]}for(var R=0,P=G.order.length;R<P;R++){var T=G.order[R],Q;if((Q=G.match[T].exec(V))){var U=RegExp.leftContext;if(U.substr(U.length-1)!==\"\\\\\"){Q[1]=(Q[1]||\"\").replace(/\\\\/g,\"\");W=G.find[T](Q,S);if(W!=null){V=V.replace(G.match[T],\"\");break}}}}if(!W){W=S.getElementsByTagName(\"*\")}return{set:W,expr:V}};E.filter=function(S,ac,ad,T){var Q=S,Y=[],ah=ac,V,ab;while(S&&ac.length){for(var U in G.filter){if((V=G.match[U].exec(S))!=null){var Z=G.filter[U],R=null,X=0,aa,ag;ab=false;if(ah==Y){Y=[]}if(G.preFilter[U]){V=G.preFilter[U](V,ah,ad,Y,T);if(!V){ab=aa=true}else{if(V===true){continue}else{if(V[0]===true){R=[];var W=null,af;for(var ae=0;(af=ah[ae])!==g;ae++){if(af&&W!==af){R.push(af);W=af}}}}}}if(V){for(var ae=0;(ag=ah[ae])!==g;ae++){if(ag){if(R&&ag!=R[X]){X++}aa=Z(ag,V,X,R);var P=T^!!aa;if(ad&&aa!=null){if(P){ab=true}else{ah[ae]=false}}else{if(P){Y.push(ag);ab=true}}}}}if(aa!==g){if(!ad){ah=Y}S=S.replace(G.match[U],\"\");if(!ab){return[]}break}}}S=S.replace(/\\s*,\\s*/,\"\");if(S==Q){if(ab==null){throw\"Syntax error, unrecognized expression: \"+S}else{break}}Q=S}return ah};var G=E.selectors={order:[\"ID\",\"NAME\",\"TAG\"],match:{ID:/#((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,CLASS:/\\.((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,NAME:/\\[name=['\"]*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)['\"]*\\]/,ATTR:/\\[\\s*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(['\"]*)(.*?)\\3|)\\s*\\]/,TAG:/^((?:[\\w\\u00c0-\\uFFFF\\*_-]|\\\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\\((even|odd|[\\dn+-]*)\\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^-]|$)/,PSEUDO:/:((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)(?:\\((['\"]*)((?:\\([^\\)]+\\)|[^\\2\\(\\)]*)+)\\2\\))?/},attrMap:{\"class\":\"className\",\"for\":\"htmlFor\"},attrHandle:{href:function(P){return P.getAttribute(\"href\")}},relative:{\"+\":function(T,Q){for(var R=0,P=T.length;R<P;R++){var S=T[R];if(S){var U=S.previousSibling;while(U&&U.nodeType!==1){U=U.previousSibling}T[R]=typeof Q===\"string\"?U||false:U===Q}}if(typeof Q===\"string\"){E.filter(Q,T,true)}},\">\":function(U,Q,V){if(typeof Q===\"string\"&&!/\\W/.test(Q)){Q=V?Q:Q.toUpperCase();for(var R=0,P=U.length;R<P;R++){var T=U[R];if(T){var S=T.parentNode;U[R]=S.nodeName===Q?S:false}}}else{for(var R=0,P=U.length;R<P;R++){var T=U[R];if(T){U[R]=typeof Q===\"string\"?T.parentNode:T.parentNode===Q}}if(typeof Q===\"string\"){E.filter(Q,U,true)}}},\"\":function(S,Q,U){var R=\"done\"+(I++),P=O;if(!Q.match(/\\W/)){var T=Q=U?Q:Q.toUpperCase();P=L}P(\"parentNode\",Q,R,S,T,U)},\"~\":function(S,Q,U){var R=\"done\"+(I++),P=O;if(typeof Q===\"string\"&&!Q.match(/\\W/)){var T=Q=U?Q:Q.toUpperCase();P=L}P(\"previousSibling\",Q,R,S,T,U)}},find:{ID:function(Q,R){if(R.getElementById){var P=R.getElementById(Q[1]);return P?[P]:[]}},NAME:function(P,Q){return Q.getElementsByName?Q.getElementsByName(P[1]):null},TAG:function(P,Q){return Q.getElementsByTagName(P[1])}},preFilter:{CLASS:function(S,Q,R,P,U){S=\" \"+S[1].replace(/\\\\/g,\"\")+\" \";for(var T=0;Q[T];T++){if(U^(\" \"+Q[T].className+\" \").indexOf(S)>=0){if(!R){P.push(Q[T])}}else{if(R){Q[T]=false}}}return false},ID:function(P){return P[1].replace(/\\\\/g,\"\")},TAG:function(Q,P){for(var R=0;!P[R];R++){}return M(P[R])?Q[1]:Q[1].toUpperCase()},CHILD:function(P){if(P[1]==\"nth\"){var Q=/(-?)(\\d*)n((?:\\+|-)?\\d*)/.exec(P[2]==\"even\"&&\"2n\"||P[2]==\"odd\"&&\"2n+1\"||!/\\D/.test(P[2])&&\"0n+\"+P[2]||P[2]);P[2]=(Q[1]+(Q[2]||1))-0;P[3]=Q[3]-0}P[0]=\"done\"+(I++);return P},ATTR:function(Q){var P=Q[1];if(G.attrMap[P]){Q[1]=G.attrMap[P]}if(Q[2]===\"~=\"){Q[4]=\" \"+Q[4]+\" \"}return Q},PSEUDO:function(T,Q,R,P,U){if(T[1]===\"not\"){if(T[3].match(N).length>1){T[3]=E(T[3],null,null,Q)}else{var S=E.filter(T[3],Q,R,true^U);if(!R){P.push.apply(P,S)}return false}}else{if(G.match.POS.test(T[0])){return true}}return T},POS:function(P){P.unshift(true);return P}},filters:{enabled:function(P){return P.disabled===false&&P.type!==\"hidden\"},disabled:function(P){return P.disabled===true},checked:function(P){return P.checked===true},selected:function(P){P.parentNode.selectedIndex;return P.selected===true},parent:function(P){return !!P.firstChild},empty:function(P){return !P.firstChild},has:function(R,Q,P){return !!E(P[3],R).length},header:function(P){return/h\\d/i.test(P.nodeName)},text:function(P){return\"text\"===P.type},radio:function(P){return\"radio\"===P.type},checkbox:function(P){return\"checkbox\"===P.type},file:function(P){return\"file\"===P.type},password:function(P){return\"password\"===P.type},submit:function(P){return\"submit\"===P.type},image:function(P){return\"image\"===P.type},reset:function(P){return\"reset\"===P.type},button:function(P){return\"button\"===P.type||P.nodeName.toUpperCase()===\"BUTTON\"},input:function(P){return/input|select|textarea|button/i.test(P.nodeName)}},setFilters:{first:function(Q,P){return P===0},last:function(R,Q,P,S){return Q===S.length-1},even:function(Q,P){return P%2===0},odd:function(Q,P){return P%2===1},lt:function(R,Q,P){return Q<P[3]-0},gt:function(R,Q,P){return Q>P[3]-0},nth:function(R,Q,P){return P[3]-0==Q},eq:function(R,Q,P){return P[3]-0==Q}},filter:{CHILD:function(P,S){var V=S[1],W=P.parentNode;var U=\"child\"+W.childNodes.length;if(W&&(!W[U]||!P.nodeIndex)){var T=1;for(var Q=W.firstChild;Q;Q=Q.nextSibling){if(Q.nodeType==1){Q.nodeIndex=T++}}W[U]=T-1}if(V==\"first\"){return P.nodeIndex==1}else{if(V==\"last\"){return P.nodeIndex==W[U]}else{if(V==\"only\"){return W[U]==1}else{if(V==\"nth\"){var Y=false,R=S[2],X=S[3];if(R==1&&X==0){return true}if(R==0){if(P.nodeIndex==X){Y=true}}else{if((P.nodeIndex-X)%R==0&&(P.nodeIndex-X)/R>=0){Y=true}}return Y}}}}},PSEUDO:function(V,R,S,W){var Q=R[1],T=G.filters[Q];if(T){return T(V,S,R,W)}else{if(Q===\"contains\"){return(V.textContent||V.innerText||\"\").indexOf(R[3])>=0}else{if(Q===\"not\"){var U=R[3];for(var S=0,P=U.length;S<P;S++){if(U[S]===V){return false}}return true}}}},ID:function(Q,P){return Q.nodeType===1&&Q.getAttribute(\"id\")===P},TAG:function(Q,P){return(P===\"*\"&&Q.nodeType===1)||Q.nodeName===P},CLASS:function(Q,P){return P.test(Q.className)},ATTR:function(T,R){var P=G.attrHandle[R[1]]?G.attrHandle[R[1]](T):T[R[1]]||T.getAttribute(R[1]),U=P+\"\",S=R[2],Q=R[4];return P==null?false:S===\"=\"?U===Q:S===\"*=\"?U.indexOf(Q)>=0:S===\"~=\"?(\" \"+U+\" \").indexOf(Q)>=0:!R[4]?P:S===\"!=\"?U!=Q:S===\"^=\"?U.indexOf(Q)===0:S===\"$=\"?U.substr(U.length-Q.length)===Q:S===\"|=\"?U===Q||U.substr(0,Q.length+1)===Q+\"-\":false},POS:function(T,Q,R,U){var P=Q[2],S=G.setFilters[P];if(S){return S(T,R,Q,U)}}}};for(var K in G.match){G.match[K]=RegExp(G.match[K].source+/(?![^\\[]*\\])(?![^\\(]*\\))/.source)}var D=function(Q,P){Q=Array.prototype.slice.call(Q);if(P){P.push.apply(P,Q);return P}return Q};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(J){D=function(T,S){var Q=S||[];if(F.call(T)===\"[object Array]\"){Array.prototype.push.apply(Q,T)}else{if(typeof T.length===\"number\"){for(var R=0,P=T.length;R<P;R++){Q.push(T[R])}}else{for(var R=0;T[R];R++){Q.push(T[R])}}}return Q}}(function(){var Q=document.createElement(\"form\"),R=\"script\"+(new Date).getTime();Q.innerHTML=\"<input name='\"+R+\"'/>\";var P=document.documentElement;P.insertBefore(Q,P.firstChild);if(!!document.getElementById(R)){G.find.ID=function(T,U){if(U.getElementById){var S=U.getElementById(T[1]);return S?S.id===T[1]||S.getAttributeNode&&S.getAttributeNode(\"id\").nodeValue===T[1]?[S]:g:[]}};G.filter.ID=function(U,S){var T=U.getAttributeNode&&U.getAttributeNode(\"id\");return U.nodeType===1&&T&&T.nodeValue===S}}P.removeChild(Q)})();(function(){var P=document.createElement(\"div\");P.appendChild(document.createComment(\"\"));if(P.getElementsByTagName(\"*\").length>0){G.find.TAG=function(Q,U){var T=U.getElementsByTagName(Q[1]);if(Q[1]===\"*\"){var S=[];for(var R=0;T[R];R++){if(T[R].nodeType===1){S.push(T[R])}}T=S}return T}}P.innerHTML=\"<a href='#'></a>\";if(P.firstChild.getAttribute(\"href\")!==\"#\"){G.attrHandle.href=function(Q){return Q.getAttribute(\"href\",2)}}})();if(document.querySelectorAll){(function(){var P=E;E=function(T,S,Q,R){S=S||document;if(!R&&S.nodeType===9){try{return D(S.querySelectorAll(T),Q)}catch(U){}}return P(T,S,Q,R)};E.find=P.find;E.filter=P.filter;E.selectors=P.selectors;E.matches=P.matches})()}if(document.documentElement.getElementsByClassName){G.order.splice(1,0,\"CLASS\");G.find.CLASS=function(P,Q){return Q.getElementsByClassName(P[1])}}function L(Q,W,V,Z,X,Y){for(var T=0,R=Z.length;T<R;T++){var P=Z[T];if(P){P=P[Q];var U=false;while(P&&P.nodeType){var S=P[V];if(S){U=Z[S];break}if(P.nodeType===1&&!Y){P[V]=T}if(P.nodeName===W){U=P;break}P=P[Q]}Z[T]=U}}}function O(Q,V,U,Y,W,X){for(var S=0,R=Y.length;S<R;S++){var P=Y[S];if(P){P=P[Q];var T=false;while(P&&P.nodeType){if(P[U]){T=Y[P[U]];break}if(P.nodeType===1){if(!X){P[U]=S}if(typeof V!==\"string\"){if(P===V){T=true;break}}else{if(E.filter(V,[P]).length>0){T=P;break}}}P=P[Q]}Y[S]=T}}}var H=document.compareDocumentPosition?function(Q,P){return Q.compareDocumentPosition(P)&16}:function(Q,P){return Q!==P&&(Q.contains?Q.contains(P):true)};var M=function(P){return P.documentElement&&!P.body||P.tagName&&P.ownerDocument&&!P.ownerDocument.body};n.find=E;n.filter=E.filter;n.expr=E.selectors;n.expr[\":\"]=n.expr.filters;E.selectors.filters.hidden=function(P){return\"hidden\"===P.type||n.css(P,\"display\")===\"none\"||n.css(P,\"visibility\")===\"hidden\"};E.selectors.filters.visible=function(P){return\"hidden\"!==P.type&&n.css(P,\"display\")!==\"none\"&&n.css(P,\"visibility\")!==\"hidden\"};E.selectors.filters.animated=function(P){return n.grep(n.timers,function(Q){return P===Q.elem}).length};n.multiFilter=function(R,P,Q){if(Q){R=\":not(\"+R+\")\"}return E.matches(R,P)};n.dir=function(R,Q){var P=[],S=R[Q];while(S&&S!=document){if(S.nodeType==1){P.push(S)}S=S[Q]}return P};n.nth=function(T,P,R,S){P=P||1;var Q=0;for(;T;T=T[R]){if(T.nodeType==1&&++Q==P){break}}return T};n.sibling=function(R,Q){var P=[];for(;R;R=R.nextSibling){if(R.nodeType==1&&R!=Q){P.push(R)}}return P};return;l.Sizzle=E})();n.event={add:function(H,E,G,J){if(H.nodeType==3||H.nodeType==8){return}if(H.setInterval&&H!=l){H=l}if(!G.guid){G.guid=this.guid++}if(J!==g){var F=G;G=this.proxy(F);G.data=J}var D=n.data(H,\"events\")||n.data(H,\"events\",{}),I=n.data(H,\"handle\")||n.data(H,\"handle\",function(){return typeof n!==\"undefined\"&&!n.event.triggered?n.event.handle.apply(arguments.callee.elem,arguments):g});I.elem=H;n.each(E.split(/\\s+/),function(L,M){var N=M.split(\".\");M=N.shift();G.type=N.slice().sort().join(\".\");var K=D[M];if(n.event.specialAll[M]){n.event.specialAll[M].setup.call(H,J,N)}if(!K){K=D[M]={};if(!n.event.special[M]||n.event.special[M].setup.call(H,J,N)===false){if(H.addEventListener){H.addEventListener(M,I,false)}else{if(H.attachEvent){H.attachEvent(\"on\"+M,I)}}}}K[G.guid]=G;n.event.global[M]=true});H=null},guid:1,global:{},remove:function(J,G,I){if(J.nodeType==3||J.nodeType==8){return}var F=n.data(J,\"events\"),E,D;if(F){if(G===g||(typeof G===\"string\"&&G.charAt(0)==\".\")){for(var H in F){this.remove(J,H+(G||\"\"))}}else{if(G.type){I=G.handler;G=G.type}n.each(G.split(/\\s+/),function(L,N){var P=N.split(\".\");N=P.shift();var M=RegExp(\"(^|\\\\.)\"+P.slice().sort().join(\".*\\\\.\")+\"(\\\\.|$)\");if(F[N]){if(I){delete F[N][I.guid]}else{for(var O in F[N]){if(M.test(F[N][O].type)){delete F[N][O]}}}if(n.event.specialAll[N]){n.event.specialAll[N].teardown.call(J,P)}for(E in F[N]){break}if(!E){if(!n.event.special[N]||n.event.special[N].teardown.call(J,P)===false){if(J.removeEventListener){J.removeEventListener(N,n.data(J,\"handle\"),false)}else{if(J.detachEvent){J.detachEvent(\"on\"+N,n.data(J,\"handle\"))}}}E=null;delete F[N]}}})}for(E in F){break}if(!E){var K=n.data(J,\"handle\");if(K){K.elem=null}n.removeData(J,\"events\");n.removeData(J,\"handle\")}}},trigger:function(H,J,G,D){var F=H.type||H;if(!D){H=typeof H===\"object\"?H[h]?H:n.extend(n.Event(F),H):n.Event(F);if(F.indexOf(\"!\")>=0){H.type=F=F.slice(0,-1);H.exclusive=true}if(!G){H.stopPropagation();if(this.global[F]){n.each(n.cache,function(){if(this.events&&this.events[F]){n.event.trigger(H,J,this.handle.elem)}})}}if(!G||G.nodeType==3||G.nodeType==8){return g}H.result=g;H.target=G;J=n.makeArray(J);J.unshift(H)}H.currentTarget=G;var I=n.data(G,\"handle\");if(I){I.apply(G,J)}if((!G[F]||(n.nodeName(G,\"a\")&&F==\"click\"))&&G[\"on\"+F]&&G[\"on\"+F].apply(G,J)===false){H.result=false}if(!D&&G[F]&&!H.isDefaultPrevented()&&!(n.nodeName(G,\"a\")&&F==\"click\")){this.triggered=true;try{G[F]()}catch(K){}}this.triggered=false;if(!H.isPropagationStopped()){var E=G.parentNode||G.ownerDocument;if(E){n.event.trigger(H,J,E,true)}}},handle:function(J){var I,D;J=arguments[0]=n.event.fix(J||l.event);var K=J.type.split(\".\");J.type=K.shift();I=!K.length&&!J.exclusive;var H=RegExp(\"(^|\\\\.)\"+K.slice().sort().join(\".*\\\\.\")+\"(\\\\.|$)\");D=(n.data(this,\"events\")||{})[J.type];for(var F in D){var G=D[F];if(I||H.test(G.type)){J.handler=G;J.data=G.data;var E=G.apply(this,arguments);if(E!==g){J.result=E;if(E===false){J.preventDefault();J.stopPropagation()}}if(J.isImmediatePropagationStopped()){break}}}},props:\"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which\".split(\" \"),fix:function(G){if(G[h]){return G}var E=G;G=n.Event(E);for(var F=this.props.length,I;F;){I=this.props[--F];G[I]=E[I]}if(!G.target){G.target=G.srcElement||document}if(G.target.nodeType==3){G.target=G.target.parentNode}if(!G.relatedTarget&&G.fromElement){G.relatedTarget=G.fromElement==G.target?G.toElement:G.fromElement}if(G.pageX==null&&G.clientX!=null){var H=document.documentElement,D=document.body;G.pageX=G.clientX+(H&&H.scrollLeft||D&&D.scrollLeft||0)-(H.clientLeft||0);G.pageY=G.clientY+(H&&H.scrollTop||D&&D.scrollTop||0)-(H.clientTop||0)}if(!G.which&&((G.charCode||G.charCode===0)?G.charCode:G.keyCode)){G.which=G.charCode||G.keyCode}if(!G.metaKey&&G.ctrlKey){G.metaKey=G.ctrlKey}if(!G.which&&G.button){G.which=(G.button&1?1:(G.button&2?3:(G.button&4?2:0)))}return G},proxy:function(E,D){D=D||function(){return E.apply(this,arguments)};D.guid=E.guid=E.guid||D.guid||this.guid++;return D},special:{ready:{setup:A,teardown:function(){}}},specialAll:{live:{setup:function(D,E){n.event.add(this,E[0],c)},teardown:function(F){if(F.length){var D=0,E=RegExp(\"(^|\\\\.)\"+F[0]+\"(\\\\.|$)\");n.each((n.data(this,\"events\").live||{}),function(){if(E.test(this.type)){D++}});if(D<1){n.event.remove(this,F[0],c)}}}}}};n.Event=function(D){if(!this.preventDefault){return new n.Event(D)}if(D&&D.type){this.originalEvent=D;this.type=D.type;this.timeStamp=D.timeStamp}else{this.type=D}if(!this.timeStamp){this.timeStamp=e()}this[h]=true};function k(){return false}function t(){return true}n.Event.prototype={preventDefault:function(){this.isDefaultPrevented=t;var D=this.originalEvent;if(!D){return}if(D.preventDefault){D.preventDefault()}D.returnValue=false},stopPropagation:function(){this.isPropagationStopped=t;var D=this.originalEvent;if(!D){return}if(D.stopPropagation){D.stopPropagation()}D.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=t;this.stopPropagation()},isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k};var a=function(E){var D=E.relatedTarget;while(D&&D!=this){try{D=D.parentNode}catch(F){D=this}}if(D!=this){E.type=E.data;n.event.handle.apply(this,arguments)}};n.each({mouseover:\"mouseenter\",mouseout:\"mouseleave\"},function(E,D){n.event.special[D]={setup:function(){n.event.add(this,E,a,D)},teardown:function(){n.event.remove(this,E,a)}}});n.fn.extend({bind:function(E,F,D){return E==\"unload\"?this.one(E,F,D):this.each(function(){n.event.add(this,E,D||F,D&&F)})},one:function(F,G,E){var D=n.event.proxy(E||G,function(H){n(this).unbind(H,D);return(E||G).apply(this,arguments)});return this.each(function(){n.event.add(this,F,D,E&&G)})},unbind:function(E,D){return this.each(function(){n.event.remove(this,E,D)})},trigger:function(D,E){return this.each(function(){n.event.trigger(D,E,this)})},triggerHandler:function(D,F){if(this[0]){var E=n.Event(D);E.preventDefault();E.stopPropagation();n.event.trigger(E,F,this[0]);return E.result}},toggle:function(F){var D=arguments,E=1;while(E<D.length){n.event.proxy(F,D[E++])}return this.click(n.event.proxy(F,function(G){this.lastToggle=(this.lastToggle||0)%E;G.preventDefault();return D[this.lastToggle++].apply(this,arguments)||false}))},hover:function(D,E){return this.mouseenter(D).mouseleave(E)},ready:function(D){A();if(n.isReady){D.call(document,n)}else{n.readyList.push(D)}return this},live:function(F,E){var D=n.event.proxy(E);D.guid+=this.selector+F;n(document).bind(i(F,this.selector),this.selector,D);return this},die:function(E,D){n(document).unbind(i(E,this.selector),D?{guid:D.guid+this.selector+E}:null);return this}});function c(G){var D=RegExp(\"(^|\\\\.)\"+G.type+\"(\\\\.|$)\"),F=true,E=[];n.each(n.data(this,\"events\").live||[],function(H,I){if(D.test(I.type)){var J=n(G.target).closest(I.data)[0];if(J){E.push({elem:J,fn:I})}}});n.each(E,function(){if(!G.isImmediatePropagationStopped()&&this.fn.call(this.elem,G,this.fn.data)===false){F=false}});return F}function i(E,D){return[\"live\",E,D.replace(/\\./g,\"`\").replace(/ /g,\"|\")].join(\".\")}n.extend({isReady:false,readyList:[],ready:function(){if(!n.isReady){n.isReady=true;if(n.readyList){n.each(n.readyList,function(){this.call(document,n)});n.readyList=null}n(document).triggerHandler(\"ready\")}}});var w=false;function A(){if(w){return}w=true;if(document.addEventListener){document.addEventListener(\"DOMContentLoaded\",function(){document.removeEventListener(\"DOMContentLoaded\",arguments.callee,false);n.ready()},false)}else{if(document.attachEvent){document.attachEvent(\"onreadystatechange\",function(){if(document.readyState===\"complete\"){document.detachEvent(\"onreadystatechange\",arguments.callee);n.ready()}});if(document.documentElement.doScroll&&!l.frameElement){(function(){if(n.isReady){return}try{document.documentElement.doScroll(\"left\")}catch(D){setTimeout(arguments.callee,0);return}n.ready()})()}}}n.event.add(l,\"load\",n.ready)}n.each((\"blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error\").split(\",\"),function(E,D){n.fn[D]=function(F){return F?this.bind(D,F):this.trigger(D)}});n(l).bind(\"unload\",function(){for(var D in n.cache){if(D!=1&&n.cache[D].handle){n.event.remove(n.cache[D].handle.elem)}}});(function(){n.support={};var E=document.documentElement,F=document.createElement(\"script\"),J=document.createElement(\"div\"),I=\"script\"+(new Date).getTime();J.style.display=\"none\";J.innerHTML='   <link/><table></table><a href=\"/a\" style=\"color:red;float:left;opacity:.5;\">a</a><select><option>text</option></select><object><param/></object>';var G=J.getElementsByTagName(\"*\"),D=J.getElementsByTagName(\"a\")[0];if(!G||!G.length||!D){return}n.support={leadingWhitespace:J.firstChild.nodeType==3,tbody:!J.getElementsByTagName(\"tbody\").length,objectAll:!!J.getElementsByTagName(\"object\")[0].getElementsByTagName(\"*\").length,htmlSerialize:!!J.getElementsByTagName(\"link\").length,style:/red/.test(D.getAttribute(\"style\")),hrefNormalized:D.getAttribute(\"href\")===\"/a\",opacity:D.style.opacity===\"0.5\",cssFloat:!!D.style.cssFloat,scriptEval:false,noCloneEvent:true,boxModel:null};F.type=\"text/javascript\";try{F.appendChild(document.createTextNode(\"window.\"+I+\"=1;\"))}catch(H){}E.insertBefore(F,E.firstChild);if(l[I]){n.support.scriptEval=true;delete l[I]}E.removeChild(F);if(J.attachEvent&&J.fireEvent){J.attachEvent(\"onclick\",function(){n.support.noCloneEvent=false;J.detachEvent(\"onclick\",arguments.callee)});J.cloneNode(true).fireEvent(\"onclick\")}n(function(){var K=document.createElement(\"div\");K.style.width=\"1px\";K.style.paddingLeft=\"1px\";document.body.appendChild(K);n.boxModel=n.support.boxModel=K.offsetWidth===2;document.body.removeChild(K)})})();var v=n.support.cssFloat?\"cssFloat\":\"styleFloat\";n.props={\"for\":\"htmlFor\",\"class\":\"className\",\"float\":v,cssFloat:v,styleFloat:v,readonly:\"readOnly\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",rowspan:\"rowSpan\",tabindex:\"tabIndex\"};n.fn.extend({_load:n.fn.load,load:function(F,I,J){if(typeof F!==\"string\"){return this._load(F)}var H=F.indexOf(\" \");if(H>=0){var D=F.slice(H,F.length);F=F.slice(0,H)}var G=\"GET\";if(I){if(n.isFunction(I)){J=I;I=null}else{if(typeof I===\"object\"){I=n.param(I);G=\"POST\"}}}var E=this;n.ajax({url:F,type:G,dataType:\"html\",data:I,complete:function(L,K){if(K==\"success\"||K==\"notmodified\"){E.html(D?n(\"<div/>\").append(L.responseText.replace(/<script(.|\\s)*?\\/script>/g,\"\")).find(D):L.responseText)}if(J){E.each(J,[L.responseText,K,L])}}});return this},serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?n.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))}).map(function(D,E){var F=n(this).val();return F==null?null:n.isArray(F)?n.map(F,function(H,G){return{name:E.name,value:H}}):{name:E.name,value:F}}).get()}});n.each(\"ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend\".split(\",\"),function(D,E){n.fn[E]=function(F){return this.bind(E,F)}});var q=e();n.extend({get:function(D,F,G,E){if(n.isFunction(F)){G=F;F=null}return n.ajax({type:\"GET\",url:D,data:F,success:G,dataType:E})},getScript:function(D,E){return n.get(D,null,E,\"script\")},getJSON:function(D,E,F){return n.get(D,E,F,\"json\")},post:function(D,F,G,E){if(n.isFunction(F)){G=F;F={}}return n.ajax({type:\"POST\",url:D,data:F,success:G,dataType:E})},ajaxSetup:function(D){n.extend(n.ajaxSettings,D)},ajaxSettings:{url:location.href,global:true,type:\"GET\",contentType:\"application/x-www-form-urlencoded\",processData:true,async:true,xhr:function(){return l.ActiveXObject?new ActiveXObject(\"Microsoft.XMLHTTP\"):new XMLHttpRequest()},accepts:{xml:\"application/xml, text/xml\",html:\"text/html\",script:\"text/javascript, application/javascript\",json:\"application/json, text/javascript\",text:\"text/plain\",_default:\"*/*\"}},lastModified:{},ajax:function(L){L=n.extend(true,L,n.extend(true,{},n.ajaxSettings,L));var V,E=/=\\?(&|$)/g,Q,U,F=L.type.toUpperCase();if(L.data&&L.processData&&typeof L.data!==\"string\"){L.data=n.param(L.data)}if(L.dataType==\"jsonp\"){if(F==\"GET\"){if(!L.url.match(E)){L.url+=(L.url.match(/\\?/)?\"&\":\"?\")+(L.jsonp||\"callback\")+\"=?\"}}else{if(!L.data||!L.data.match(E)){L.data=(L.data?L.data+\"&\":\"\")+(L.jsonp||\"callback\")+\"=?\"}}L.dataType=\"json\"}if(L.dataType==\"json\"&&(L.data&&L.data.match(E)||L.url.match(E))){V=\"jsonp\"+q++;if(L.data){L.data=(L.data+\"\").replace(E,\"=\"+V+\"$1\")}L.url=L.url.replace(E,\"=\"+V+\"$1\");L.dataType=\"script\";l[V]=function(W){U=W;H();K();l[V]=g;try{delete l[V]}catch(X){}if(G){G.removeChild(S)}}}if(L.dataType==\"script\"&&L.cache==null){L.cache=false}if(L.cache===false&&F==\"GET\"){var D=e();var T=L.url.replace(/(\\?|&)_=.*?(&|$)/,\"$1_=\"+D+\"$2\");L.url=T+((T==L.url)?(L.url.match(/\\?/)?\"&\":\"?\")+\"_=\"+D:\"\")}if(L.data&&F==\"GET\"){L.url+=(L.url.match(/\\?/)?\"&\":\"?\")+L.data;L.data=null}if(L.global&&!n.active++){n.event.trigger(\"ajaxStart\")}var P=/^(\\w+:)?\\/\\/([^\\/?#]+)/.exec(L.url);if(L.dataType==\"script\"&&F==\"GET\"&&P&&(P[1]&&P[1]!=location.protocol||P[2]!=location.host)){var G=document.getElementsByTagName(\"head\")[0];var S=document.createElement(\"script\");S.src=L.url;if(L.scriptCharset){S.charset=L.scriptCharset}if(!V){var N=false;S.onload=S.onreadystatechange=function(){if(!N&&(!this.readyState||this.readyState==\"loaded\"||this.readyState==\"complete\")){N=true;H();K();G.removeChild(S)}}}G.appendChild(S);return g}var J=false;var I=L.xhr();if(L.username){I.open(F,L.url,L.async,L.username,L.password)}else{I.open(F,L.url,L.async)}try{if(L.data){I.setRequestHeader(\"Content-Type\",L.contentType)}if(L.ifModified){I.setRequestHeader(\"If-Modified-Since\",n.lastModified[L.url]||\"Thu, 01 Jan 1970 00:00:00 GMT\")}I.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\");I.setRequestHeader(\"Accept\",L.dataType&&L.accepts[L.dataType]?L.accepts[L.dataType]+\", */*\":L.accepts._default)}catch(R){}if(L.beforeSend&&L.beforeSend(I,L)===false){if(L.global&&!--n.active){n.event.trigger(\"ajaxStop\")}I.abort();return false}if(L.global){n.event.trigger(\"ajaxSend\",[I,L])}var M=function(W){if(I.readyState==0){if(O){clearInterval(O);O=null;if(L.global&&!--n.active){n.event.trigger(\"ajaxStop\")}}}else{if(!J&&I&&(I.readyState==4||W==\"timeout\")){J=true;if(O){clearInterval(O);O=null}Q=W==\"timeout\"?\"timeout\":!n.httpSuccess(I)?\"error\":L.ifModified&&n.httpNotModified(I,L.url)?\"notmodified\":\"success\";if(Q==\"success\"){try{U=n.httpData(I,L.dataType,L)}catch(Y){Q=\"parsererror\"}}if(Q==\"success\"){var X;try{X=I.getResponseHeader(\"Last-Modified\")}catch(Y){}if(L.ifModified&&X){n.lastModified[L.url]=X}if(!V){H()}}else{n.handleError(L,I,Q)}K();if(L.async){I=null}}}};if(L.async){var O=setInterval(M,13);if(L.timeout>0){setTimeout(function(){if(I){if(!J){M(\"timeout\")}if(I){I.abort()}}},L.timeout)}}try{I.send(L.data)}catch(R){n.handleError(L,I,null,R)}if(!L.async){M()}function H(){if(L.success){L.success(U,Q)}if(L.global){n.event.trigger(\"ajaxSuccess\",[I,L])}}function K(){if(L.complete){L.complete(I,Q)}if(L.global){n.event.trigger(\"ajaxComplete\",[I,L])}if(L.global&&!--n.active){n.event.trigger(\"ajaxStop\")}}return I},handleError:function(E,G,D,F){if(E.error){E.error(G,D,F)}if(E.global){n.event.trigger(\"ajaxError\",[G,E,F])}},active:0,httpSuccess:function(E){try{return !E.status&&location.protocol==\"file:\"||(E.status>=200&&E.status<300)||E.status==304||E.status==1223}catch(D){}return false},httpNotModified:function(F,D){try{var G=F.getResponseHeader(\"Last-Modified\");return F.status==304||G==n.lastModified[D]}catch(E){}return false},httpData:function(I,G,F){var E=I.getResponseHeader(\"content-type\"),D=G==\"xml\"||!G&&E&&E.indexOf(\"xml\")>=0,H=D?I.responseXML:I.responseText;if(D&&H.documentElement.tagName==\"parsererror\"){throw\"parsererror\"}if(F&&F.dataFilter){H=F.dataFilter(H,G)}if(typeof H===\"string\"){if(G==\"script\"){n.globalEval(H)}if(G==\"json\"){H=l[\"eval\"](\"(\"+H+\")\")}}return H},param:function(D){var F=[];function G(H,I){F[F.length]=encodeURIComponent(H)+\"=\"+encodeURIComponent(I)}if(n.isArray(D)||D.jquery){n.each(D,function(){G(this.name,this.value)})}else{for(var E in D){if(n.isArray(D[E])){n.each(D[E],function(){G(E,this)})}else{G(E,n.isFunction(D[E])?D[E]():D[E])}}}return F.join(\"&\").replace(/%20/g,\"+\")}});var m={},d=[[\"height\",\"marginTop\",\"marginBottom\",\"paddingTop\",\"paddingBottom\"],[\"width\",\"marginLeft\",\"marginRight\",\"paddingLeft\",\"paddingRight\"],[\"opacity\"]];function s(E,D){var F={};n.each(d.concat.apply([],d.slice(0,D)),function(){F[this]=E});return F}n.fn.extend({show:function(I,K){if(I){return this.animate(s(\"show\",3),I,K)}else{for(var G=0,E=this.length;G<E;G++){var D=n.data(this[G],\"olddisplay\");this[G].style.display=D||\"\";if(n.css(this[G],\"display\")===\"none\"){var F=this[G].tagName,J;if(m[F]){J=m[F]}else{var H=n(\"<\"+F+\" />\").appendTo(\"body\");J=H.css(\"display\");if(J===\"none\"){J=\"block\"}H.remove();m[F]=J}this[G].style.display=n.data(this[G],\"olddisplay\",J)}}return this}},hide:function(G,H){if(G){return this.animate(s(\"hide\",3),G,H)}else{for(var F=0,E=this.length;F<E;F++){var D=n.data(this[F],\"olddisplay\");if(!D&&D!==\"none\"){n.data(this[F],\"olddisplay\",n.css(this[F],\"display\"))}this[F].style.display=\"none\"}return this}},_toggle:n.fn.toggle,toggle:function(F,E){var D=typeof F===\"boolean\";return n.isFunction(F)&&n.isFunction(E)?this._toggle.apply(this,arguments):F==null||D?this.each(function(){var G=D?F:n(this).is(\":hidden\");n(this)[G?\"show\":\"hide\"]()}):this.animate(s(\"toggle\",3),F,E)},fadeTo:function(D,F,E){return this.animate({opacity:F},D,E)},animate:function(H,E,G,F){var D=n.speed(E,G,F);return this[D.queue===false?\"each\":\"queue\"](function(){var J=n.extend({},D),L,K=this.nodeType==1&&n(this).is(\":hidden\"),I=this;for(L in H){if(H[L]==\"hide\"&&K||H[L]==\"show\"&&!K){return J.complete.call(this)}if((L==\"height\"||L==\"width\")&&this.style){J.display=n.css(this,\"display\");J.overflow=this.style.overflow}}if(J.overflow!=null){this.style.overflow=\"hidden\"}J.curAnim=n.extend({},H);n.each(H,function(N,R){var Q=new n.fx(I,J,N);if(/toggle|show|hide/.test(R)){Q[R==\"toggle\"?K?\"show\":\"hide\":R](H)}else{var P=R.toString().match(/^([+-]=)?([\\d+-.]+)(.*)$/),S=Q.cur(true)||0;if(P){var M=parseFloat(P[2]),O=P[3]||\"px\";if(O!=\"px\"){I.style[N]=(M||1)+O;S=((M||1)/Q.cur(true))*S;I.style[N]=S+O}if(P[1]){M=((P[1]==\"-=\"?-1:1)*M)+S}Q.custom(S,M,O)}else{Q.custom(S,R,\"\")}}});return true})},stop:function(E,D){var F=n.timers;if(E){this.queue([])}this.each(function(){for(var G=F.length-1;G>=0;G--){if(F[G].elem==this){if(D){F[G](true)}F.splice(G,1)}}});if(!D){this.dequeue()}return this}});n.each({slideDown:s(\"show\",1),slideUp:s(\"hide\",1),slideToggle:s(\"toggle\",1),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"}},function(D,E){n.fn[D]=function(F,G){return this.animate(E,F,G)}});n.extend({speed:function(F,G,E){var D=typeof F===\"object\"?F:{complete:E||!E&&G||n.isFunction(F)&&F,duration:F,easing:E&&G||G&&!n.isFunction(G)&&G};D.duration=n.fx.off?0:typeof D.duration===\"number\"?D.duration:n.fx.speeds[D.duration]||n.fx.speeds._default;D.old=D.complete;D.complete=function(){if(D.queue!==false){n(this).dequeue()}if(n.isFunction(D.old)){D.old.call(this)}};return D},easing:{linear:function(F,G,D,E){return D+E*F},swing:function(F,G,D,E){return((-Math.cos(F*Math.PI)/2)+0.5)*E+D}},timers:[],timerId:null,fx:function(E,D,F){this.options=D;this.elem=E;this.prop=F;if(!D.orig){D.orig={}}}});n.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(n.fx.step[this.prop]||n.fx.step._default)(this);if((this.prop==\"height\"||this.prop==\"width\")&&this.elem.style){this.elem.style.display=\"block\"}},cur:function(E){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var D=parseFloat(n.css(this.elem,this.prop,E));return D&&D>-10000?D:parseFloat(n.curCSS(this.elem,this.prop))||0},custom:function(H,G,F){this.startTime=e();this.start=H;this.end=G;this.unit=F||this.unit||\"px\";this.now=this.start;this.pos=this.state=0;var D=this;function E(I){return D.step(I)}E.elem=this.elem;n.timers.push(E);if(E()&&n.timerId==null){n.timerId=setInterval(function(){var J=n.timers;for(var I=0;I<J.length;I++){if(!J[I]()){J.splice(I--,1)}}if(!J.length){clearInterval(n.timerId);n.timerId=null}},13)}},show:function(){this.options.orig[this.prop]=n.attr(this.elem.style,this.prop);this.options.show=true;this.custom(this.prop==\"width\"||this.prop==\"height\"?1:0,this.cur());n(this.elem).show()},hide:function(){this.options.orig[this.prop]=n.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(G){var F=e();if(G||F>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var D=true;for(var E in this.options.curAnim){if(this.options.curAnim[E]!==true){D=false}}if(D){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(n.css(this.elem,\"display\")==\"none\"){this.elem.style.display=\"block\"}}if(this.options.hide){n(this.elem).hide()}if(this.options.hide||this.options.show){for(var H in this.options.curAnim){n.attr(this.elem.style,H,this.options.orig[H])}}}if(D){this.options.complete.call(this.elem)}return false}else{var I=F-this.startTime;this.state=I/this.options.duration;this.pos=n.easing[this.options.easing||(n.easing.swing?\"swing\":\"linear\")](this.state,I,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};n.extend(n.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(D){n.attr(D.elem.style,\"opacity\",D.now)},_default:function(D){if(D.elem.style&&D.elem.style[D.prop]!=null){D.elem.style[D.prop]=D.now+D.unit}else{D.elem[D.prop]=D.now}}}});if(document.documentElement.getBoundingClientRect){n.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return n.offset.bodyOffset(this[0])}var F=this[0].getBoundingClientRect(),I=this[0].ownerDocument,E=I.body,D=I.documentElement,K=D.clientTop||E.clientTop||0,J=D.clientLeft||E.clientLeft||0,H=F.top+(self.pageYOffset||n.boxModel&&D.scrollTop||E.scrollTop)-K,G=F.left+(self.pageXOffset||n.boxModel&&D.scrollLeft||E.scrollLeft)-J;return{top:H,left:G}}}else{n.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return n.offset.bodyOffset(this[0])}n.offset.initialized||n.offset.initialize();var I=this[0],F=I.offsetParent,E=I,N=I.ownerDocument,L,G=N.documentElement,J=N.body,K=N.defaultView,D=K.getComputedStyle(I,null),M=I.offsetTop,H=I.offsetLeft;while((I=I.parentNode)&&I!==J&&I!==G){L=K.getComputedStyle(I,null);M-=I.scrollTop,H-=I.scrollLeft;if(I===F){M+=I.offsetTop,H+=I.offsetLeft;if(n.offset.doesNotAddBorder&&!(n.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(I.tagName))){M+=parseInt(L.borderTopWidth,10)||0,H+=parseInt(L.borderLeftWidth,10)||0}E=F,F=I.offsetParent}if(n.offset.subtractsBorderForOverflowNotVisible&&L.overflow!==\"visible\"){M+=parseInt(L.borderTopWidth,10)||0,H+=parseInt(L.borderLeftWidth,10)||0}D=L}if(D.position===\"relative\"||D.position===\"static\"){M+=J.offsetTop,H+=J.offsetLeft}if(D.position===\"fixed\"){M+=Math.max(G.scrollTop,J.scrollTop),H+=Math.max(G.scrollLeft,J.scrollLeft)}return{top:M,left:H}}}n.offset={initialize:function(){if(this.initialized){return}var K=document.body,E=document.createElement(\"div\"),G,F,M,H,L,D,I=K.style.marginTop,J='<div style=\"position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;\"><div></div></div><table style=\"position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;\"cellpadding=\"0\"cellspacing=\"0\"><tr><td></td></tr></table>';L={position:\"absolute\",top:0,left:0,margin:0,border:0,width:\"1px\",height:\"1px\",visibility:\"hidden\"};for(D in L){E.style[D]=L[D]}E.innerHTML=J;K.insertBefore(E,K.firstChild);G=E.firstChild,F=G.firstChild,H=G.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(F.offsetTop!==5);this.doesAddBorderForTableAndCells=(H.offsetTop===5);G.style.overflow=\"hidden\",G.style.position=\"relative\";this.subtractsBorderForOverflowNotVisible=(F.offsetTop===-5);K.style.marginTop=\"1px\";this.doesNotIncludeMarginInBodyOffset=(K.offsetTop===0);K.style.marginTop=I;K.removeChild(E);this.initialized=true},bodyOffset:function(D){n.offset.initialized||n.offset.initialize();var F=D.offsetTop,E=D.offsetLeft;if(n.offset.doesNotIncludeMarginInBodyOffset){F+=parseInt(n.curCSS(D,\"marginTop\",true),10)||0,E+=parseInt(n.curCSS(D,\"marginLeft\",true),10)||0}return{top:F,left:E}}};n.fn.extend({position:function(){var H=0,G=0,E;if(this[0]){var F=this.offsetParent(),I=this.offset(),D=/^body|html$/i.test(F[0].tagName)?{top:0,left:0}:F.offset();I.top-=j(this,\"marginTop\");I.left-=j(this,\"marginLeft\");D.top+=j(F,\"borderTopWidth\");D.left+=j(F,\"borderLeftWidth\");E={top:I.top-D.top,left:I.left-D.left}}return E},offsetParent:function(){var D=this[0].offsetParent||document.body;while(D&&(!/^body|html$/i.test(D.tagName)&&n.css(D,\"position\")==\"static\")){D=D.offsetParent}return n(D)}});n.each([\"Left\",\"Top\"],function(E,D){var F=\"scroll\"+D;n.fn[F]=function(G){if(!this[0]){return null}return G!==g?this.each(function(){this==l||this==document?l.scrollTo(!E?G:n(l).scrollLeft(),E?G:n(l).scrollTop()):this[F]=G}):this[0]==l||this[0]==document?self[E?\"pageYOffset\":\"pageXOffset\"]||n.boxModel&&document.documentElement[F]||document.body[F]:this[0][F]}});n.each([\"Height\",\"Width\"],function(G,E){var D=G?\"Left\":\"Top\",F=G?\"Right\":\"Bottom\";n.fn[\"inner\"+E]=function(){return this[E.toLowerCase()]()+j(this,\"padding\"+D)+j(this,\"padding\"+F)};n.fn[\"outer\"+E]=function(I){return this[\"inner\"+E]()+j(this,\"border\"+D+\"Width\")+j(this,\"border\"+F+\"Width\")+(I?j(this,\"margin\"+D)+j(this,\"margin\"+F):0)};var H=E.toLowerCase();n.fn[H]=function(I){return this[0]==l?document.compatMode==\"CSS1Compat\"&&document.documentElement[\"client\"+E]||document.body[\"client\"+E]:this[0]==document?Math.max(document.documentElement[\"client\"+E],document.body[\"scroll\"+E],document.documentElement[\"scroll\"+E],document.body[\"offset\"+E],document.documentElement[\"offset\"+E]):I===g?(this.length?n.css(this[0],H):null):this.css(H,typeof I===\"string\"?I:I+\"px\")}})})();\n 20883  </script>\n 20884  \n .....\n 31998  fd(f,Na,function(){g.tick(Nc)})}});\n 31999  setTimeout(function(){if(d){b.done();b=i;dd(i)}},\n 32000: 10000)}\n 32001  function Sc(a){var b=[];if(a)if((a=a.zoom_override)&&a.length)for(var c=0;c<a.length;++c)for(var d=b[a[c].maptype]=[],f=a[c].override,g=0;g<f.length;++g){var h=f[g].rect;h=new id(new z(h.lo.lat_e7/10000000,h.lo.lng_e7/10000000),new z(h.hi.lat_e7/10000000,h.hi.lng_e7/10000000));d.push([h,f[g].max_zoom])}return b}\n 32002  function Tc(a){var b=[];if(a)if((a=a.tile_override)&&a.length)for(var c=0;c<a.length;++c){b[a[c].maptype]||(b[a[c].maptype]=[]);b[a[c].maptype].push({minZoom:a[c].min_zoom,maxZoom:a[c].max_zoom,rect:a[c].rect,uris:a[c].uris,mapprintUrl:a[c].mapprint_url})}return b}\n .....\n 32162  md.prototype.getCopyrights=function(a,b){return this.kA(a,b)[0]};\n 32163  md.prototype.$r=function(a,b){a=this.kA(a,b);if(r(a[0])>0||r(a[1])>0)return new tg(this.qR,a[0],a[1]);return i};var ug=\"Status\",vg=\"code\";function wg(){wg.g.apply(this,arguments)}\n 32164: ;var xg=\"_xdc_\";wg.g=function(a,b,c){c=c||{};this.Mb=a;this.lj=b;this.LG=Le(c.timeout,10000);this.EI=Le(c.callback,\"callback\");this.FI=Le(c.suffix,\"\");this.rD=Le(c.neat,j);this.mT=Le(c.locale,j);this.DI=c.callbackNameGenerator||n(this.TJ,this)};\n 32165  var yg=0;\n 32166  wg.prototype.send=function(a,b,c,d,f){f=f||{};var g=this.lj.getElementsByTagName(\"head\")[0];if(g){rg(d,\"xdc0\");var h=this.DI(a);window[xg]||(window[xg]={});var k=this.lj.createElement(\"script\"),o=0;if(this.LG>0){o=zg(h,k,a,c,d);o=window.setTimeout(o,this.LG)}c=\"?\";if(this.Mb&&this.Mb.indexOf(\"?\")!=-1)c=\"&\";a=this.Mb+c+Ag(a,this.rD);if(this.mT){a=a;c=this.rD;var q={};q.hl=window._mHL;q.country=window._mGL;a=a+\"&\"+Ag(q,c)}if(b){b=Bg(h,k,b,o,d);window[xg][h]=b;a+=\"&\"+this.EI+\"=\"+xg+\".\"+h}k.setAttribute(\"type\",\"text/javascript\");\n .....\n 32653  l.nu=function(){A(this,\"newcopyright\")};\n 32654  l.zT=function(a){this.FG=a};\n 32655: l.ZQ=function(a,b,c,d,f){this.FG&&this.FG(a,b,c,d,f)};function Lj(a,b,c){var d=(b.x+2*b.y)%a.length,f=\"Galileo\".substr(0,(b.x*3+b.y)%8),g=\"\";if(b.y>=10000&&b.y<100000)g=\"&s=\";return[a[d],\"x=\",b.x,g,\"&y=\",b.y,\"&z=\",c,\"&s=\",f].join(\"\")}\n 32656  ;function Ed(a,b,c,d){var f={};f.isPng=d;Cj.call(this,b,0,c,f);this.Ec=a;this.Mg=i}\n 32657  p(Ed,Cj);Ed.prototype.getTileUrl=function(a,b){var c=this.Mg&&this.Mg.Yr(a,b)||this.Ec;return Lj(c,a,b)};\n .....\n 33413  l.zM=function(){return this.Ed};\n 33414  l.initialize=function(a){this.M=this.Hy(a.Ya(7),a.Ya(5));this.OB(a,this.M)};\n 33415: l.Hy=function(a,b){var c=new S(-10000,0);a=J(\"div\",a,c);b=J(\"div\",b,c);Qf(a);Qf(b);bg(a);bg(b);b={window:a,shadow:b};a=b.contents=J(\"div\",a,Xg);Wf(a);bg(a);fg(a,10);return b};function jk(a,b){this.f=a;this.So=b;this.Rj=e;this.ww=j;this.Cu=[];this.HB=j;this.Z=[];this.jt=this.JB=j;this.Kh=i}\n 33416  l=jk.prototype;l.XF=function(){this.ww=e};\n 33417  l.bv=function(){this.ww=j;if(this.Cu.length>0){var a=this.Cu.shift();setTimeout(a,0)}};\n .....\n 33624  \n 33625  \n 33626: var Base=new Class({initialize:function(){this.p=pipio;this.registerHandlers();if($defined(this.init)){var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i]);}this.init.run(args,this);}},registerHandlers:function(){if($defined(this.EventHandlers)){for(var i=0;i<this.EventHandlers.length;i++){var event=this.EventHandlers[i];try{this.registerHandler(event,this[event].bind(this));}catch(e){Logger().log(event);}}}},registerHandler:function(eventName,func){this.p.registerHandler(eventName,func);},fireEvent:function(){var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i]);}this.p.dispatchEvent.run(args,this.p);},call:function(app,name,params,callbackSuccess,callbackFail,form){this.p.call(app,name,params,callbackSuccess,callbackFail,form);},getPrivateUser:function(){return this.p.currentUser;},getCurrentLocation:function(){return this.p.currentLocation;},getLocation:function(username){return this.p.getLocation(username);},getLocations:function(){return this.p.locationsByUsername;},getProfile:function(username){return this.p.getProfile(username);},getSession:function(){return this.p.xmpp.clientName;},getGroups:function(){return this.p.groups;},getContacts:function(){return this.p.connsByUsername;},getContactRequests:function(){return this.p.requestsByUsername;},getContactsByGroup:function(group_id){return this.p.getContactsByGroup(group_id);},getContact:function(username){return this.p.getContact(username);},hasContact:function(username){return this.p.connsByUsername.has(username);},getRoom:function(username){return this.p.getRoom(username);},getRooms:function(){return this.p.roomsByUsername;},getGroup:function(group_id){return this.p.connections.getGroup(group_id);},getUser:function(username){if(username==this.p.currentUser.username){return this.p.currentUser;}else{return this.p.getUser(username);}},videoEnabled:function(){if(this.p.videoInUse){return false;}else{return this.p.videoEnabled;}},checkTimestamp:function(time){return this.p.checkTimestamp(time);},getAppById:function(appId){return this.p.getAppById(appId);},isLoggedIn:function(){return this.p.isLoggedIn();},getPageTitle:function(){return this.p.pageTitle;},getConnectionState:function(username){var state=0;if(this.p.connsByUsername.has(username)){state=1;}else{if(this.p.requestsByUsername.has(username)){state=2;}else{if(this.p.requestsOutByUsername.has(username)){state=3;}}}return state;}});var App=new Class({Extends:Base,initialize:function(app){this.parent();this.name=app.name;this.iconOptions=app.iconOptions;this.registerApis();this.displayName=app.displayName;this.appId=app.id;this.autoDock=app.autoDock||false;this.isStarted=false;this.isDocked=false;this.isExpanded=true;this.defaultMenu=undefined;this.defaultContent=undefined;this.menus=$H();this.contents=$H();this.navs=$H();},registerApis:function(){if($defined(this.requests)){this.requests.each(function(request){this.p.registerCall(this.name,request);},this);}},start:function(options){if(!this.isStarted){if($defined(this.parseOptions)&&$defined(options)){this.parseOptions(options);}this.createApp();this.onStart();this.isStarted=true;if(this.autoDock){this.dock();}}else{if(this.isStarted&&this.isDocked){this.switchDefault();}}if(!this.isLoggedIn()){this.dock();}this.switchDefault();},stop:function(){Logger().log(\"stopping app\"+this.appId);if(this.isStarted){this.destroyApp();this.onStop();this.isStarted=false;this.isDocked=false;this.isExpanded=true;}},getDockIcon:function(){var icon=new Icon20(this.iconOptions);var el=new Element(\"div\",{\"class\":\"app_button has_submenu\"}).adopt($(icon),$(this.alert));el.addEvent(\"click\",this.switchDefault.bind(this));return el;},dock:function(){DomUtility.hide(this.navSection);this.undockSep=new Element(\"div\",{\"class\":\"nav_seperator\"});this.undockNav=new Nav({displayName:\"Undock\",onClick:this.undock.bind(this),name:\"undock\"});this.undockSep.inject(this.navWrapper);$(this.undockNav).inject(this.navWrapper);this.dockButton=new Element(\"div\",{\"class\":\"app_button_wrapper\"}).adopt(this.getDockIcon(),this.navWrapper);this.dockButton.inject(\"dock\");this.isDocked=true;},undock:function(){if(!this.isLoggedIn()){this.switchDefault();return;}this.undockSep.destroy();$(this.undockNav).destroy();this.undockNav=null;this.navWrapper.inject(this.navSection);this.dockButton.destroy();DomUtility.show(this.navSection);this.isDocked=false;this.switchDefault();},switchDefault:function(){if($defined(this.defaultContent)){this.fireEvent(\"viewSwitch\",this.appId,this.defaultContent,this.defaultMenu);}},menuAdd:function(menuName,menu){this.fireEvent(\"menuAdd\",this.appId,menuName,menu);if(menu.isDefault){this.defaultMenu=menuName;}this.menus.set(menuName,menu);},menuClose:function(menuName){this.fireEvent(\"menuClose\",this.appId,menuName);this.menus.erase(menuName);},contentAdd:function(contentName,content){this.fireEvent(\"contentAdd\",this.appId,contentName,content);if(content.isDefault){this.defaultContent=contentName;}this.contents.set(contentName,content);},contentClose:function(contentName){this.fireEvent(\"contentClose\",this.appId,contentName);this.contents.erase(contentName);},navAdd:function(nav){var navId=this.appId+\"_\"+nav.name;nav.navId=navId;if($defined(nav.parentName)){nav.parentId=this.appId+\"_\"+nav.parentName;}if(this.navs.has(navId)){Logger().log(navId+\" nav exist, did not add\");return;}if($defined(nav.parentId)){if(!this.navs.has(nav.parentId)){Logger().log(nav.parentId+\" parent does not exist\");return;}var parent=this.navs.get(nav.parentId);if(!parent.hasSubnavs){Logger().log(nav.parentId+\" parent does not allow subnavs\");return;}else{parent.addSubnav(nav);}}else{nav.parentId=this.appId;if(nav.bottom){$(nav).inject(this.bottomNav);}else{$(nav).inject(this.nav);}}this.navs.set(navId,nav);},navDelete:function(navName){var navId=this.appId+\"_\"+navName;if(!this.navs.has(navId)){return;}this.navs.get(navId).destroy();this.navs.erase(navId);},createAppAlert:function(){this.alert=new Alert();this.registerHandler(\"alertAdd\",this.alertAdd.bind(this));this.registerHandler(\"alertClear\",this.alertClear.bind(this));},alertAdd:function(navId){if(navId!=this.appId){return;}this.alert.increment();},alertClear:function(navId,count){if(navId!=this.appId){return;}if(!$defined(count)){var alerts=this.alert.clear();}else{this.alert.decrement(count);}},createApp:function(){this.navSection=new Element(\"div\",{\"class\":\"nav_section\"});this.navHeader=new Element(\"div\",{\"class\":\"nav_header clip2\"}).inject(this.navSection);this.navWrapper=new Element(\"div\",{\"class\":\"app_sub_menu sub_elements\"}).inject(this.navSection);this.nav=new Element(\"div\").inject(this.navWrapper);this.bottomNav=new Element(\"div\").inject(this.navWrapper);this.navSection.inject(\"nav\");this.icon=new Icon20(this.iconOptions);$(this.icon).inject(this.navHeader);this.headerName=new Element(\"div\",{\"class\":\"header_name text12 light\",\"text\":TextUtility.unescapeQuotes(this.displayName)}).inject(this.navHeader);this.closeButton=new Element(\"div\",{\"class\":\"button_nav right\"}).adopt(new Element(\"div\",{\"class\":\"action close\"})).inject(this.navHeader);this.closeButton.addEvent(\"click\",this.stop.bind(this));this.dockButton=new Element(\"div\",{\"class\":\"button_nav right\"}).adopt(new Element(\"div\",{\"class\":\"action dock\"})).inject(this.navHeader);this.dockButton.addEvent(\"click\",this.dock.bind(this));this.createAppAlert();if($defined(this.onCreate)){this.onCreate();}},destroyApp:function(){this.contents.each(function(content,contentName){this.contentClose(contentName);},this);this.contents.empty();this.menus.each(function(menu,menuName){this.menuClose(menuName);},this);this.menus.empty();this.navs.each(function(nav){nav.destroy();});this.navs.empty();this.navHeader.destroy();this.nav.destroy();this.navSection.destroy();if($defined(this.dockButton)){this.dockButton.destroy();}this.fireEvent(\"appClose\",this.appId);if($defined(this.onDestroy)){this.onDestroy();}}});var AppInstance=new Class({Extends:Base,Implements:App,initialize:function(app,options){this.parent();this.appId=options.appId;this.parseOptions(options);this.name=app.name;this.registerApis();this.isStarted=false;this.isDocked=false;this.isExpanded=true;this.autoDock=app.autoDock||false;this.defaultMenu=undefined;this.defaultContent=undefined;this.menus=$H();this.contents=$H();this.navs=$H();},start:function(appId){this.appId=appId;if(!this.isStarted){this.appId=appId;this.createApp();this.onStart();this.isStarted=true;if(this.autoDock){this.dock();}}else{if(this.isStarted&&this.isDocked){this.switchDefault();}}if(!this.isLoggedIn()){this.dock();}this.switchDefault();}});var Content=new Class({Extends:Base,init:function(options){if(!$defined(options)){options={};}if($defined(this.onBeforeInit)){this.onBeforeInit(options);}this.className=$defined(options.className)?options.className:\"\";this.isDefault=options.isDefault||false;this.isOn=true;this.firstShow=true;this.bottomFuncCalled=false;this.atBottom=false;this.createContent();if($defined(this.onInit)){this.onInit();}},checkScroll:function(){var maxY=this.contentWrapper.getScrollSize().y;var bottomY=this.contentWrapper.getScroll().y+this.contentWrapper.getSize().y+300;Logger().log(\"checking scroll \"+bottomY+\"-\"+maxY);if(bottomY>maxY&&!this.bottomFuncCalled&&!this.atBottom){this.bottomFuncCalled=true;this.bottomFunc();}},destroy:function(){if($defined(this.onDestroy)){this.onDestroy();}this.contentWrapper.destroy();},on:function(){this.isOn=true;DomUtility.show(this.contentWrapper);if($defined(this.scrollY)){this.scroll.set(0,this.scrollY);}if($defined(this.onShow)){if(this.firstShow){this.onShow(true);this.firstShow=false;}else{this.onShow(false);}}},off:function(){this.isOn=false;if($defined(this.onHide)){this.onHide();}if($defined(this.contentWrapper)){this.scrollY=this.contentWrapper.getScroll().y;}DomUtility.hide(this.contentWrapper);},createContent:function(){this.contentWrapper=new Element(\"div\",{\"class\":\"content_wrapper\"});this.content=new Element(\"div\",{\"class\":\"content \"+this.className}).inject(this.contentWrapper);if($defined(this.bottomFunc)){this.contentWrapper.addEvent(\"mousewheel\",this.checkScroll.bind(this));}this.scroll=new Fx.Scroll(this.contentWrapper);},toElement:function(){return this.contentWrapper;}});var Album=new Class({initialize:function(options){this.className=options.className||\"\";this.id=options.id||\"\";this.displayName=options.displayName||\"Album\";this.albumPhotos=new $H();},addPhoto:function(id,thumb,src,caption){var photo=new Object();photo.id=id;photo.caption=caption;photo.thumb=thumb;photo.src=src;this.albumPhotos.set(id,photo);},getPhoto:function(id){return this.albumPhotos.get(id);},getAllPhotos:function(){return this.albumPhotos.getValues();},getSize:function(){return this.albumPhotos.getLength();},getNextPrevPhoto:function(id){var allIds=this.albumPhotos.getKeys();var index=allIds.indexOf(id);var photos=this.albumPhotos.getValues();var i=index;if(allIds.length<=index+1){i=-1;}var next=photos[i+1];i=index;if(index==0){i=allIds.length;}var prev=photos[i-1];return{prev:prev,next:next};},getIndex:function(id){var allIds=this.albumPhotos.getKeys();return allIds.indexOf(id);},nextPhoto:function(id){var allIds=this.albumPhotos.getKeys();var index=allIds.indexOf(id);var photos=this.albumPhotos.getValues();if(allIds.length<=index+1){index=-1;}return photos[index+1];},prevPhoto:function(id){var allIds=this.albumPhotos.getKeys();var index=allIds.indexOf(id);var photos=this.albumPhotos.getValues();if(index==0){index=allIds.length;}return photos[index-1];}});var Alert=new Class({initialize:function(){this.alerts=0;this.createAlert();},createAlert:function(){this.alert=new Element(\"div\",{\"class\":\"alert\",\"text\":\"0\",\"style\":\"display: none !important\"});},hasAlerts:function(){return this.alerts>0;},update:function(){if(this.alerts<0){this.alerts=0;}this.alert.set(\"text\",this.alerts);if(this.alerts==0){this.alert.setStyle(\"display\",\"none !important\");}else{this.alert.setStyle(\"display\",\"\");}},increment:function(x){if(!$defined(x)){this.alerts++;}else{this.alerts+=x;}this.update();},decrement:function(x){if(!$defined(x)){this.alerts--;}else{this.alerts-=x;}this.update();},clear:function(){var alerts=this.alerts;this.alerts=0;this.update();return alerts;},toElement:function(){return this.alert;},destroy:function(){this.alert.destroy();}});var ButtonMedium=new Class({initialize:function(options){this.displayName=options.displayName;this.className=options.className||\"\";this.action=options.action||undefined;this.disabled=options.disabled||false;this.createButton();},createButton:function(){this.button=new Element(\"div\",{\"class\":\"button_medium\"});this.button.addClass(this.className);if($defined(this.action)){this.button.addClass(\"has_action\");new Element(\"div\",{\"class\":\"action \"+this.action}).inject(this.button);}this.button.appendText(TextUtility.unescapeQuotes(this.displayName));},showProgress:function(){this.button.addClass(\"progress\");},hideProgress:function(){this.button.removeClass(\"progress\");},toElement:function(){return this.button;}});var ButtonSmall=new Class({initialize:function(options){this.displayName=options.displayName;this.className=options.className||\"\";this.action=options.action||undefined;this.disabled=options.disabled||false;this.createButton();},createButton:function(){this.button=new Element(\"div\",{\"class\":\"button_small\"});this.button.addClass(this.className);if($defined(this.action)){this.button.addClass(\"has_action\");new Element(\"div\",{\"class\":\"action \"+this.action}).inject(this.button);}this.button.appendText(TextUtility.unescapeQuotes(this.displayName));},showProgress:function(){this.button.addClass(\"progress\");},hideProgress:function(){this.button.removeClass(\"progress\");},toElement:function(){return this.button;}});var Icon=new Class({initialize:function(options){this.iconAction=options.iconAction||null;this.isUser=$defined(options.user);if(this.isUser){this.user=options.user;}else{this.iconName=options.iconName;if(this.iconName.contains(\"http://\")){this.isClass=false;}else{this.isClass=true;}}this.createIcon();},createIcon:function(){this.icon=new Element(\"div\",{\"class\":\"icon_wrapper\"});if(!this.isUser){if(this.isClass){this.icon.addClass(\"hasicon on \"+this.iconName);this.icon.adopt(new Element(\"div\",{\"class\":\"icon\"}));}else{this.icon.adopt(new Element(\"img\",{\"src\":this.iconName,\"style\":\"height: 16px; width: 16px;\"}));}}else{this.icon.addClass(\"profile_pic_wrapper_16\");this.icon.adopt(new Element(\"img\",{\"class\":\"profile_pic profile_pic_16_\"+this.user.username,\"src\":this.user[\"profile_pic_16\"]}),new Element(\"div\",{\"class\":\"online_status online_status_\"+this.user.username}));}if($defined(this.iconAction)){this.addAction(this.iconAction);}},toElement:function(){return this.icon;},addAction:function(action){this.iconAction=action;if($defined(this.action)){this.action.destroy();}this.action=new Element(\"div\",{\"class\":\"icon_action \"+this.iconAction}).inject(this.icon);}});var Icon20=new Class({initialize:function(options){this.iconAction=options.iconAction||null;this.isUser=$defined(options.user);if(this.isUser){this.user=options.user;}else{this.iconName=options.iconName;if(this.iconName.contains(\"http://\")){this.isClass=false;}else{this.isClass=true;}}this.createIcon();},createIcon:function(){this.icon=new Element(\"div\",{\"class\":\"icon_wrapper\"});if(!this.isUser){if(this.isClass){this.icon.addClass(\"hasicon on \"+this.iconName);this.icon.adopt(new Element(\"div\",{\"class\":\"icon20\"}));}else{this.icon.adopt(new Element(\"img\",{\"src\":this.iconName,\"style\":\"height: 20px; width: 20px;\"}));}}else{this.icon.addClass(\"profile_pic_wrapper_16a\");this.icon.adopt(new Element(\"img\",{\"class\":\"profile_pic profile_pic_16_\"+this.user.username,\"src\":this.user[\"profile_pic_16\"]}),new Element(\"div\",{\"class\":\"online_status online_status_\"+this.user.username}));}if($defined(this.iconAction)){this.addAction(this.iconAction);}},toElement:function(){return this.icon;},addAction:function(action){this.iconAction=action;if($defined(this.action)){this.action.destroy();}this.action=new Element(\"div\",{\"class\":\"icon_action \"+this.iconAction}).inject(this.icon);}});var InlineImage=new Class({initialize:function(attachment){this.attachment=attachment;this.imageWrapper=new Element(\"div\",{\"class\":\"thumbnail\"});this.progress=new Element(\"div\",{\"class\":\"progress\"}).inject(this.imageWrapper);this.image=new Asset.image(this.attachment.url,{title:this.attachment.filename,onload:this.photoLoaded.bind(this)});},photoLoaded:function(){this.progress.destroy();var imageW=this.image.width;var imageH=this.image.height;if(imageH>100){imageW=(100/imageH)*imageW;imageH=100;}this.image.setStyles({height:imageH+\"px\",width:imageW+\"px\"});this.imageWrapper.setStyle(\"width\",imageW+\"px\");this.image.inject(this.imageWrapper);this.image.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showPhotoPopup\",this.attachment]));},toElement:function(){return this.imageWrapper;}});var ItemLoader=new Class({initialize:function(options){this.items=$H();this.sortValues=$H();this.empty=true;this.highestId=0;this.lowestId=0;this.highestSortValue=0;this.lowestSortValue=0;this.idField=options.idField;this.sortField=options.sortField;this.sortAlpha=options.sortAlpha||false;this.sortAscending=$defined(options.sortAscending)?options.sortAscending:true;this.createElementFunc=options.createElementFunc;this.emptyEl=options.emptyEl||null;this.errorEl=options.errorEl||null;this.loadingEl=options.loadingEl||null;this.createLoader();},remove:function(id){if(!this.items.has(id)){return;}DomUtility.fadeOutDestroy(this.items.get(id));var sortKey=this.sortValues.keyOf(id);this.sortValues.erase(sortKey);this.items.erase(id);if(this.items.getLength()==0){this.empty=true;this.highestId=0;this.lowestId=0;this.highestSortValue=0;this.lowestSortValue=0;this.showEmpty();}},showEmpty:function(){if(!$defined(this.emptyEl)){return;}if(this.empty){DomUtility.show(this.emptyEl);}else{DomUtility.hide(this.emptyEl);}},showError:function(){if(!$defined(this.errorEl)){return;}if($defined(this.emptyEl)){DomUtility.hide(this.emptyEl);}if($defined(this.loadingEl)){DomUtility.hide(this.loadingEl);}DomUtility.show(this.errorEl);},hideError:function(){if($defined(this.errorEl)){DomUtility.hide(this.errorEl);}if(this.empty){this.showEmpty();}},showLoading:function(){if(!$defined(this.loadingEl)||!this.empty){return;}if($defined(this.emptyEl)){DomUtility.hide(this.emptyEl);}if($defined(this.errorEl)){DomUtility.hide(this.errorEl);}DomUtility.show(this.loadingEl);},hideLoading:function(){if($defined(this.loadingEl)){DomUtility.hide(this.loadingEl);}if(this.empty){this.showEmpty();}},process:function(data){var id=data[this.idField];var sortValue=data[this.sortField];if(this.items.has(id)){Logger().log(\"item \"+id+\" exists, do not insert\");return;}var position=this.checkBoundary(sortValue,id);if(!position){position=this.findPosition(data);}if(typeof position==\"object\"){this.insertItem(data,\"before\",position);}else{this.insertItem(data,position);}},findPosition:function(data){var id=data[this.idField];var sortValue=data[this.sortField];if(this.empty){this.highestId=id;this.lowestId=id;this.highestSortValue=sortValue;this.lowestSortValue=sortValue;this.empty=false;return\"top\";}else{var sortValues=this.getSortValues();for(var i=0;i<sortValues.length;i++){if(this.sortAlpha){if(this.sortAscending){if(sortValue.toString()<sortValues[i].toString()){return this.items[this.sortValues[sortValues[i]]];}}else{if(sortValue.toString()>sortValues[i].toString()){return this.items[this.sortValues[sortValues[i]]];}}}else{if(this.sortAscending){if(parseInt(sortValue)<parseInt(sortValues[i])){return this.items[this.sortValues[sortValues[i]]];}}else{if(parseInt(sortValue)>parseInt(sortValues[i])){return this.items[this.sortValues[sortValues[i]]];}}}}}},getSortValues:function(){if(this.sortAlpha){if(this.sortAscending){return this.sortValues.getKeys().sort();}else{return this.sortValues.getKeys().sort().reverse();}}else{if(this.sortAscending){return this.sortValues.getKeys().sort(this.sortIntAsc);}else{return this.sortValues.getKeys().sort(this.sortIntDesc);}}},sortIntAsc:function(a,b){return a-b;},sortIntDesc:function(a,b){return b-a;},checkBoundary:function(sortValue,id){if(this.sortAlpha){if(this.empty){this.highestId=id;this.lowestId=id;this.highestSortValue=sortValue.toString();this.lowestSortValue=sortValue.toString();this.empty=false;return\"top\";}if(sortValue.toString()>this.highestSortValue.toString()){this.highestSortValue=sortValue.toString();this.highestId=id;return(this.sortAscending)?\"bottom\":\"top\";}else{if(sortValue.toString()<this.lowestSortValue.toString()){this.lowestSortValue=sortValue.toString();this.lowestId=id;return(this.sortAscending)?\"top\":\"bottom\";}else{return false;}}}else{if(this.empty){this.highestId=id;this.lowestId=id;this.highestSortValue=sortValue.toString();this.lowestSortValue=sortValue.toString();this.empty=false;return\"top\";}if(parseInt(sortValue)>parseInt(this.highestSortValue)){this.highestSortValue=parseInt(sortValue);this.highestId=id;return(this.sortAscending)?\"bottom\":\"top\";}else{if(parseInt(sortValue)<parseInt(this.lowestSortValue)){this.lowestSortValue=parseInt(sortValue);this.lowestId=id;return(this.sortAscending)?\"top\":\"bottom\";}else{return false;}}}},insertItem:function(data,position,beforeEl){var el=this.createElementFunc(data);var sortValue=data[this.sortField];var id=data[this.idField];this.items.set(id,el);this.sortValues.set(sortValue,id);if(position==\"top\"){el.inject(this.loader,\"top\");}else{if(position==\"before\"){el.inject(beforeEl,\"before\");}else{el.inject(this.loader,\"bottom\");}}this.empty=false;this.showEmpty();this.hideLoading();this.hideError();},createLoader:function(){this.loader=new Element(\"div\",{});if($defined(this.emptyEl)){this.emptyEl.inject(this.loader);}if($defined(this.errorEl)){this.errorEl.inject(this.loader);DomUtility.hide(this.errorEl);}if($defined(this.loadingEl)){this.loadingEl.inject(this.loader);DomUtility.hide(this.loadingEl);}},count:function(){return this.items.getLength();},toElement:function(){return this.loader;}});function MarkerLight(latlng,opts){this.latlng=latlng;var size=26;var smallSize=20;if(!opts){opts={};}this.user_=opts.user;this.size_=opts.size||size;this.height_=opts.size||size;this.width_=opts.size||size;this.image_=UserUtility.getProfilePic(this.user_.user_hash,this.user_.user_id,this.size_);this.imageOver_=opts.imageOver;this.clicked_=0;this.divClass_=\"profile_pic_wrapper_\"+this.size_;this.imgClass_=\"profile_pic profile_pic_\"+this.size_+\"_\"+opts.user.username;this.divStyleClass_=\"online_status online_status_\"+opts.user.username;}MarkerLight.prototype=new GOverlay();MarkerLight.prototype.initialize=function(map){var me=this;var div=document.createElement(\"div\");div.className=me.divClass_;div.style.position=\"absolute\";div.style.paddingLeft=\"0px\";div.style.cursor=\"pointer\";div.style.zIndex=1;var tip=new Element(\"div\",{\"class\":\"tooltip above_right\",\"text\":TextUtility.unescape(me.user_.fullname)}).adopt(new Element(\"div\",{\"class\":\"tip_corner\"}));tip.inject(div);var img=document.createElement(\"img\");img.src=me.image_;img.className=me.imgClass_;img.style.width=me.width_+\"px\";img.style.height=me.height_+\"px\";div.appendChild(img);var styleDiv=document.createElement(\"div\");styleDiv.className=me.divStyleClass_;div.appendChild(styleDiv);GEvent.addDomListener(div,\"click\",function(event){me.clicked_=1;GEvent.trigger(me,\"click\");pipio.dispatchEvent(\"showUser\",me.user_);});map.getPane(G_MAP_MARKER_PANE).appendChild(div);this.map_=map;this.div_=div;};MarkerLight.prototype.remove=function(){if($defined(this.div_.parentNode)){this.div_.parentNode.removeChild(this.div_);}};MarkerLight.prototype.copy=function(){var opts={};opts.color=this.color_;opts.height=this.height_;opts.width=this.width_;opts.image=this.image_;opts.imageOver=this.image_;return new MarkerLight(this.latlng,opts);};MarkerLight.prototype.redraw=function(force){if(!force){return;}var divPixel=this.map_.fromLatLngToDivPixel(this.latlng);this.div_.style.width=this.width_+\"px\";this.div_.style.left=(divPixel.x-Math.round(this.width_/2))+\"px\";this.div_.style.width=this.height_+\"px\";this.div_.style.top=(divPixel.y)-this.height_+\"px\";};MarkerLight.prototype.getZIndex=function(m){return GOverlay.getZIndex(marker.getPoint().lat())-m.clicked*10000;};MarkerLight.prototype.getPoint=function(){return this.latlng;};MarkerLight.prototype.setStyle=function(style){for(s in style){this.div_.style[s]=style[s];}};MarkerLight.prototype.setImage=function(image){this.div_.style.background='url(\"'+image+'\")';};var Menu=new Class({Extends:Base,init:function(options){if($defined(this.onBeforeInit)){options=this.onBeforeInit(options);}this.displayName=options.displayName;this.className=$defined(options.className)?options.className:\"\";this.isDefault=options.isDefault||false;this.closeFunc=$defined(options.closeFunc)?options.closeFunc:null;this.firstShow=true;this.isOn=true;this.createMenu();if($defined(this.onInit)){this.onInit();}},on:function(){DomUtility.show(this.menu);if($defined(this.onShow)){if(this.firstShow){this.onShow(true);this.firstShow=false;}else{this.onShow(false);}}this.isOn=true;},off:function(){if($defined(this.onHide)){this.onHide();}DomUtility.hide(this.menu);this.isOn=false;},destroy:function(){if($defined(this.onDestroy)){this.onDestroy();}this.menu.destroy();},addSection:function(section){section.inject(this.menu);},createMenu:function(){this.title=new Element(\"div\",{\"class\":\"menu_text\",\"text\":TextUtility.unescapeQuotes(this.displayName)});this.menu=new Element(\"div\",{\"class\":\"menu \"+this.className}).adopt(new Element(\"div\",{\"class\":\"menu_title text12 light\"}).adopt(this.title));if($defined(this.closeFunc)){this.menu.addClass(\"closable\");this.closeButton=new Element(\"div\",{\"class\":\"button_nav right\"}).adopt(new Element(\"div\",{\"class\":\"action close\"})).inject(this.title,\"after\");$(this.closeButton).addEvent(\"click\",this.closeFunc);}},toElement:function(){return this.menu;}});var Nav=new Class({Extends:Base,EventHandlers:[\"contentSwitched\",\"alertAdd\",\"alertClear\"],init:function(options){if($defined(this.onBeforeInit)){options=this.onBeforeInit(options);}this.name=options.name;this.iconOptions=$defined(options.iconOptions)?options.iconOptions:null;this.displayName=options.displayName;this.className=$defined(options.className)?options.className:\"\";this.parentName=options.parentName||undefined;if($defined(this.parentName)){this.className+=\" sub1\";}this.bottom=$defined(options.bottom)?options.bottom:false;this.hasSubnavs=$defined(options.hasSubnavs)?options.hasSubnavs:false;this.closable=$defined(options.closable)?options.closable:false;this.onClose=$defined(options.onClose)?options.onClose:undefined;this.defaultClosed=$defined(options.defaultClosed)?options.defaultClosed:false;this.onClick=$defined(options.onClick)?options.onClick:undefined;this.isExpanded=true;this.isOn=false;this.subnavEls=$H();this.createNav();if($defined(this.onInit)){this.onInit();}},alertAdd:function(navId){if(!$defined(this.navId)||!$defined(this.alert)){return;}if(navId!=this.navId){return;}if(this.isOn){return;}this.alert.increment();if($defined(this.parentId)){this.fireEvent(\"alertAdd\",this.parentId);}},alertClear:function(navId,count){if(!$defined(this.navId)||!$defined(this.alert)){return;}if(navId!=this.navId){return;}if(!$defined(count)){var alerts=this.alert.clear();if($defined(this.parentId)){this.fireEvent(\"alertClear\",this.parentId,alerts);}}else{this.alert.decrement(count);if($defined(this.parentId)){this.fireEvent(\"alertClear\",this.parentId,count);}}},contentSwitched:function(navId){if(!$defined(this.navId)){return;}if(navId==this.navId){this.on();this.alertClear(this.navId);}else{if(navId!=this.navId&&this.isOn){this.off();}}},on:function(){this.nav.addClass(\"on\");this.isOn=true;},off:function(){this.nav.removeClass(\"on\");this.isOn=false;},click:function(){if($defined(this.onClick)){this.onClick();}},close:function(e){e.stopPropagation();if($defined(this.onClose)){this.onClose();}this.destroy();},toggleSubnav:function(e){e.stopPropagation();if(!this.isExpanded){this.expand();}else{this.collapse();}},expand:function(){if(!this.isExpanded&&this.hasSubnavs){DomUtility.expand(this.subnavs);this.pivot.removeClass(\"pivot_right\");this.pivot.addClass(\"pivot_down\");this.nav.removeClass(\"collapsed\");this.isExpanded=true;if($defined(this.onExpand)){this.onExpand();}}},collapse:function(){if(this.isExpanded&&this.hasSubnavs){DomUtility.collapse(this.subnavs);this.pivot.removeClass(\"pivot_down\");this.pivot.addClass(\"pivot_right\");this.nav.addClass(\"collapsed\");this.isExpanded=false;if($defined(this.onCollapse)){this.onCollapse();}}},toElement:function(){return this.navWrapper;},addSubnav:function(nav){if(nav.bottom){$(nav).inject(this.subnavBottomItems);}else{$(nav).inject(this.subnavItems);}this.subnavEls.set(nav.name,nav);},deleteSubnav:function(name){if(!this.subnavEls.has(name)){return;}this.subnavEls.get(name).destroy();this.subnavEls.erase(name);},hasSubnav:function(name){return this.subnavEls.has(name);},createNav:function(){this.navWrapper=new Element(\"div\");this.nav=new Element(\"div\",{\"class\":\"nav\"}).inject(this.navWrapper);this.nav.addEvent(\"click\",this.click.bind(this));if(this.hasSubnavs){this.subnavItems=new Element(\"div\");this.subnavBottomItems=new Element(\"div\");this.subnavs=new Element(\"div\",{\"class\":\"sub_elements\"}).adopt(this.subnavItems,this.subnavBottomItems).inject(this.navWrapper);this.nav.addClass(\"has_submenu\");}this.nav.addClass(this.className);this.pivot=new Element(\"div\",{\"class\":\"action pivot_down\"}).inject(this.nav);this.pivot.addEvent(\"click\",this.toggleSubnav.bindWithEvent(this));if($defined(this.iconOptions)){this.icon=new Icon(this.iconOptions);$(this.icon).inject(this.nav);}else{this.nav.addClass(\"noicon\");}this.alert=new Alert();$(this.alert).inject(this.nav);this.navName=new Element(\"div\",{\"class\":\"nav_name text12 light\",\"text\":TextUtility.unescapeQuotes(this.displayName)}).inject(this.nav);if(this.closable){this.closeButton=new Element(\"div\",{\"class\":\"action close\"}).inject(this.nav);this.closeButton.addEvent(\"click\",this.close.bindWithEvent(this));}if(this.defaultClosed){this.collapse();}},destroy:function(){if($defined(this.navWrapper)){this.navWrapper.destroy();}if($defined(this.alert)){this.alert.destroy();this.alert=null;}}});var ScrollBar=new Class({initialize:function(content,wrapper){this.content=$(content);this.wrapper=$(wrapper);this.disabled=false;this.createScrollbar();this.setupHandlers();},disable:function(){this.disabled=true;},enable:function(){this.disabled=false;},createScrollbar:function(){this.scrollbar=new Element(\"div\",{\"class\":\"scrollbar\"});this.scrollbar.inject(this.wrapper);},dragOn:function(){this.wrapper.addClass(\"on\");},dragOff:function(){this.wrapper.removeClass(\"on\");},setupHandlers:function(){this.scrollHandleDrag=new Drag(this.scrollbar,{snap:0,limit:{\"x\":[0,0],\"y\":[0,this.getHandleYMax.bind(this)]},onStart:this.dragOn.bind(this),onDrag:this.handleDragHandler.bind(this),onComplete:this.dragOff.bind(this),onCancel:this.dragOff.bind(this)});this.contentScroller=new Fx.Scroll(this.content,{wheelStops:false});this.content.addEvent(\"mousewheel\",this.scrollHandler.bindWithEvent(this));this.update.periodical(500,this,true);},update:function(){if(this.disabled){return;}var scrollH=this.content.getScrollSize().y;var h=this.content.getSize().y;if(scrollH>h){this.wrapper.addClass(\"scrolling\");var contentScrollRatio=this.content.getScroll().y/this.getContentYMax();if(contentScrollRatio>1){contentScrollRatio=1;this.content.scrollTo(0,this.getContentYMax());}var handleY=this.getHandleYMax()*contentScrollRatio;this.scrollbar.setStyle(\"top\",handleY);}else{this.wrapper.removeClass(\"scrolling\");}},scrollHandler:function(e){if(this.disabled){return;}e=new Event(e);e.stopPropagation();if(e.wheel>0){this.scrollUp(name);}else{if(e.wheel<0){this.scrollDown(name);}}},scrollUp:function(){var scrollY=this.content.getScroll().y;if(scrollY==0){return;}scrollY-=30;if(scrollY<0){scrollY=0;}this.contentScroller.cancel();this.contentScroller.set(0,scrollY);this.update();},scrollDown:function(){var maxY=this.getContentYMax();if(maxY<0){maxY=0;}var scrollY=this.content.getScroll().y;if(scrollY>=maxY){return;}scrollY+=30;if(scrollY>maxY){scrollY=maxY;}this.contentScroller.cancel();this.contentScroller.set(0,scrollY);this.update();},handleDragHandler:function(){var handleY=this.scrollbar.getPosition(this.wrapper).y;var handleYMax=this.getHandleYMax();var contentY=this.getContentYMax()*(handleY/handleYMax);this.content.scrollTo(0,contentY);},getHandleYMax:function(){return this.wrapper.getSize().y-102;},getContentYMax:function(){return this.content.getScrollSize().y-this.content.getSize().y;}});var StreamLoader=new Class({initialize:function(options){this.items=$H();this.timestamps=$H();this.newestTimestamp=0;this.oldestTimestamp=0;this.newestId=0;this.oldestId=0;this.newestTimestampEl=null;this.empty=true;this.createElementFunc=options.createElementFunc;this.alertFunc=options.alertFunc;this.emptyEl=options.emptyEl||null;this.errorEl=options.errorEl||null;this.loadingEl=options.loadingEl||null;this.idField=options.idField||\"item_id\";this.dateField=options.dateField||\"date_created\";this.createLoader();},remove:function(id){if(!this.items.has(id)){return;}var el=this.items.get(id);var prev=el.getPrevious();var next=el.getNext();if(prev.hasClass(\"seperator\")&&next.hasClass(\"seperator\")){prev.destroy();}DomUtility.fadeOutDestroy(el);this.items.erase(id);if(this.items.getLength()==0){this.empty=true;this.showEmpty();}},process:function(data){var position=this.findPosition(data);if(!position){return;}this.insertItem(data,position);},showEmpty:function(){if(!$defined(this.emptyEl)){return;}if(this.empty){DomUtility.show(this.emptyEl);}else{DomUtility.hide(this.emptyEl);}},showError:function(){if(!$defined(this.errorEl)){return;}if($defined(this.emptyEl)){DomUtility.hide(this.emptyEl);}if($defined(this.loadingEl)){DomUtility.hide(this.loadingEl);}DomUtility.show(this.errorEl);},hideError:function(){if($defined(this.errorEl)){DomUtility.hide(this.errorEl);}if(this.empty){this.showEmpty();}},showLoading:function(){if(!$defined(this.loadingEl)||!this.empty){return;}if($defined(this.emptyEl)){DomUtility.hide(this.emptyEl);}if($defined(this.errorEl)){DomUtility.hide(this.errorEl);}DomUtility.show(this.loadingEl);},hideLoading:function(){if($defined(this.loadingEl)){DomUtility.hide(this.loadingEl);}if(this.empty){this.showEmpty();}},insertTimestamp:function(timestamp,position){var el=StreamItemUtility.createDateSeperatorItem(timestamp);el.inject(this.loader,position);if(position==\"top\"){this.newestTimestampEl=el;}},findPosition:function(data){var id=data[this.idField];var timestamp=this.getTimestamp(data[this.dateField]);if(this.empty){this.insertTimestamp(timestamp,\"top\");this.oldestTimestamp=timestamp;this.newestTimestamp=timestamp;this.newestId=id;this.oldestId=id;this.empty=false;return\"top\";}else{if(timestamp>=this.newestTimestamp&&id>this.newestId){if(!this.checkTimestampSameDay(this.newestTimestamp,timestamp)){this.insertTimestamp(timestamp,\"top\");}this.newestTimestamp=timestamp;this.newestId=id;return\"top\";}else{if(timestamp<=this.oldestTimestamp&&id<this.oldestId){if(!this.checkTimestampSameDay(this.oldestTimestamp,timestamp)){this.insertTimestamp(timestamp,\"bottom\");}this.oldestTimestamp=timestamp;this.oldestId=id;return\"bottom\";}else{return false;}}}},checkTimestampSameDay:function(ts1,ts2){var d1=DateUtility.convertFromTimestamp(ts1);var d2=DateUtility.convertFromTimestamp(ts2);return(d1.getDate()==d2.getDate()&&d1.getMonth()==d2.getMonth());},getTimestamp:function(dateValue){if(parseInt(dateValue)==dateValue){return dateValue;}return Date.parse(dateValue)/1000;},insertItem:function(data,position){var el=this.createElementFunc(data);var id=data[this.idField];var date=this.getTimestamp(data[this.dateField]);this.items.set(id,el);this.timestamps.set(id,date);if(position==\"top\"){el.inject(this.newestTimestampEl,\"after\");DomUtility.fadeIn(el,1000);}else{el.inject(this.loader,\"bottom\");}this.empty=false;this.showEmpty();this.hideLoading();this.hideError();if($defined(this.alertFunc)&&pipio.checkTimestamp(date)){this.alertFunc(data);}},createLoader:function(){this.loader=new Element(\"div\",{});if($defined(this.emptyEl)){this.emptyEl.inject(this.loader);}if($defined(this.errorEl)){this.errorEl.inject(this.loader);DomUtility.hide(this.errorEl);}if($defined(this.loadingEl)){this.loadingEl.inject(this.loader);DomUtility.hide(this.loadingEl);}},toElement:function(){return this.loader;}});var Toggle=new Class({initialize:function(on){this.isOn=$defined(on)?on:false;this.toggle=new Element(\"div\",{\"class\":\"toggle\"}).adopt(new Element(\"div\",{\"class\":\"handle\"}),new Element(\"div\",{\"class\":\"toggle_text on\",\"text\":\"on\"}),new Element(\"div\",{\"class\":\"toggle_text off\",\"text\":\"off\"}));this.toggle.addEvent(\"click\",this.switchToggle.bind(this));this.setOn();},switchToggle:function(){this.isOn=!this.isOn;this.setOn();},on:function(){this.isOn=true;this.setOn();},off:function(){this.isOn=false;this.setOn();},set:function(on){if(on){this.on();}else{this.off();}},setOn:function(){if(this.isOn){this.toggle.addClass(\"on\");this.toggle.removeClass(\"off\");}else{this.toggle.removeClass(\"on\");this.toggle.addClass(\"off\");}},toInt:function(){return(this.isOn)?1:0;},toElement:function(){return this.toggle;}});var Popup=new Class({Extends:Base,initialize:function(options){this.parent();var options=$defined(options)?options:{};this.navs=$H();this.contents=$H();this.contentSize=$defined(options.size)?options.size:{x:400,y:300};this.resizable=$defined(options.resizable)?options.resizable:true;this.dockable=$defined(options.dockable)?options.dockable:true;this.closable=$defined(options.closable)?options.closable:true;this.className=$defined(options.className)?options.className:undefined;this.noHide=$defined(options.noHide)?options.noHide:false;this.onClose=$defined(options.onClose)?options.onClose:undefined;this.hasTabs=false;this.isDocked=false;this.createPopup();},toElement:function(){return this.popup;},addContent:function(contentName,nav,content){if(this.contents.has(contentName)){return;}$(nav).inject(this.nav);$(content).inject(this.content);this.navs.set(contentName,nav);this.contents.set(contentName,content);nav.onClick=this.switchContent.bind(this,[contentName]);content.resizePopup=this.resizePopup.bind(this);if(nav.closable){nav.onClose=this.closeContent.bind(this,[contentName]);content.onClose=this.closeContent.bind(this,[contentName]);}this.checkTabs();this.switchContent(contentName);},closeContent:function(contentName){if(!this.contents.has(contentName)){return;}this.navs.get(contentName).destroy();this.contents.get(contentName).off();this.contents.get(contentName).close();this.navs.erase(contentName);this.contents.erase(contentName);if(this.contents.getLength()==0){this.close();return;}if(contentName==this.currentContent){this.currentContent=null;var last=this.contents.getKeys().pop();this.switchContent(last);}this.checkTabs();this.setTitle();},switchContent:function(contentName){if(!this.contents.has(contentName)){return;}if(this.isDocked){this.undock();}if(contentName==this.currentContent){return;}if($defined(this.currentContent)){this.navs.get(this.currentContent).off();this.contents.get(this.currentContent).off();}this.navs.get(contentName).on();this.contents.get(contentName).on();this.currentContent=contentName;this.setTitle();},setTitle:function(){var nav=this.navs.get(this.currentContent);var icon=new Icon20(nav.iconOptions);var titleText=new Element(\"div\",{\"class\":\"title_text\",\"text\":TextUtility.unescapeQuotes(nav.displayName)});this.titleIcon=$(icon).replaces(this.titleIcon);this.titleText=titleText.replaces(this.titleText);},getDockIcon:function(){var nav=this.navs.get(this.currentContent);var icon=new Icon20(nav.iconOptions);var el=new Element(\"div\",{\"class\":\"app_button has_submenu\"}).adopt($(icon));el.addEvent(\"click\",this.undock.bind(this));return el;},checkTabs:function(){if(this.contents.getLength()>1){this.popup.addClass(\"tabbed\");this._checkBounds();this.hasTabs=true;}else{this.popup.removeClass(\"tabbed\");this.hasTabs=false;}},resizePopup:function(x,y){var size={x:x,y:y+24};this.popup.setStyle(\"height\",size.y+\"px\");this.popup.setStyle(\"width\",size.x+\"px\");this._checkBounds();},reCenter:function(){var size={x:this.popup.getSize().x,y:this.popup.getSize().y};var pos={x:window.getSize().x/2-(size.x/2),y:window.getSize().y/2-(size.y/2)};if(pos.y<0){pos.y=0;}this.popup.setStyles({\"top\":pos.y+\"px\",\"left\":pos.x+\"px\"});},createPopup:function(){this.size={x:this.contentSize.x,y:this.contentSize.y+24};var pos={x:window.getSize().x/2-(this.size.x/2),y:window.getSize().y/2-(this.size.y/2)};if(pos.y<0){pos.y=0;}this.popup=new Element(\"div\",{\"class\":\"popup\",\"styles\":{\"height\":this.size.y+\"px\",\"width\":this.size.x+\"px\",\"top\":pos.y+\"px\",\"left\":pos.x+\"px\"}});if($defined(this.className)){this.popup.addClass(this.className);}this.title=new Element(\"div\",{\"class\":\"popup_title text12 light\"}).inject(this.popup);this.nav=new Element(\"div\",{\"class\":\"app_sub_menu popup_tabs\"}).inject(this.popup);this.content=new Element(\"div\",{\"class\":\"popup_content\"}).inject(this.popup);this.dragBorder=new Element(\"div\",{\"class\":\"popup_drag\",\"text\":\"Drag this window to move it\"}).inject(this.popup);this.popup.inject(\"popups\");DomUtility.fadeIn(this.popup);this.titleIcon=new Element(\"div\").inject(this.title);this.titleText=new Element(\"div\").inject(this.title);if(this.closable){this.closeButton=new Element(\"div\",{\"class\":\"button_nav right\"}).adopt(new Element(\"div\",{\"class\":\"action close\"})).inject(this.title);this.closeButton.addEvent(\"click\",this.close.bind(this));}if(this.dockable){this.dockButton=new Element(\"div\",{\"class\":\"button_nav right\"}).adopt(new Element(\"div\",{\"class\":\"action dock\"})).inject(this.title);this.dockButton.addEvent(\"click\",this.dock.bind(this));}this.drag=this.popup.makeDraggable({handle:this.title,onStart:this._startDrag.bind(this),onComplete:this._stopDrag.bind(this),onCancel:this._stopDrag.bind(this)});if(this.resizable){this.resizeHandle=new Element(\"div\",{\"class\":\"resize\"}).inject(this.popup);this.popup.makeResizable({handle:this.resizeHandle,limit:{x:[400,800],y:[300,800]}});}this.popup.addEvent(\"mousedown\",this._select.bind(this));this._select();this._checkBounds();if($defined(this.onCreate)){this.onCreate();}},close:function(){this.contents.each(function(content){content.close();});this.popup.destroy();if($defined(this.onClose)){this.onClose();}delete (this);},dock:function(){this.navs.get(this.currentContent).off();this.contents.get(this.currentContent).off();this.dockButton=new Element(\"div\",{\"class\":\"app_button_wrapper\"}).adopt(this.getDockIcon(),this.nav);this.dockButton.inject(\"dock\");DomUtility.fadeOut(this.popup);this.isDocked=true;},undock:function(){this.nav.inject(this.popup);this.dockButton.destroy();DomUtility.fadeIn(this.popup);this.navs.get(this.currentContent).on();this.contents.get(this.currentContent).on();this.isDocked=false;},_select:function(){this.popup.setStyle(\"z-index\",DomUtility.getZ(\"popup\"));},_startDrag:function(){if(this.noHide){return;}DomUtility.hide(this.nav);DomUtility.show(this.dragBorder);this.contents.get(this.currentContent).off();},_stopDrag:function(){if(!this.noHide){DomUtility.hide(this.dragBorder);DomUtility.show(this.nav);this.nav.set(\"style\",\"\");this.contents.get(this.currentContent).on();}this._checkBounds();},_checkBounds:function(){var pos=this.popup.getPosition();if(pos.x+this.popup.getSize().x>window.getSize().x){this.popup.setStyle(\"left\",window.getSize().x-this.popup.getSize().x);}if(pos.y+this.popup.getSize().y>window.getSize().y){this.popup.setStyle(\"top\",window.getSize().y-this.popup.getSize().y);}pos=this.popup.getPosition();if(pos.x<0){this.popup.setStyle(\"left\",0);}if(pos.y<0){this.popup.setStyle(\"top\",0);}}});var PopupContent=new Class({Extends:Base,init:function(options){if(!$defined(options)){options={};}if($defined(this.onBeforeInit)){options=this.onBeforeInit(options);}this.isOn=false;this.destroy=$defined(options.destroy)?options.destroy:true;this.createContent();if($defined(this.onInit)){this.onInit();}},on:function(){Logger().log(\"turning on content\");DomUtility.show(this.content);if($defined(this.onShow)){this.onShow();}this.isOn=true;},off:function(){if($defined(this.onHide)){this.onHide();}DomUtility.hide(this.content);this.isOn=false;},close:function(destroy){if(this.destroy||destroy){this.content.destroy();}else{this.content.dispose();}},closeContent:function(){if($defined(this.onClose)){this.onClose();}},createContent:function(){this.content=new Element(\"div\",{\"class\":this.className});this.off();},toElement:function(){return this.content;}});var AlertPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.alertMessage=options.alertMessage;return options;},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":TextUtility.unescape(this.alertMessage)}).inject(this.content);this.actionButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.closeContent.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton)).inject(this.content);}});var ConfirmPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.confirmMessage=options.confirmMessage;this.confirmFunc=options.confirmFunc;return options;},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":TextUtility.unescape(this.confirmMessage)}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Confirm\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.confirmFunc);$(this.actionButton).addEvent(\"click\",this.progressClose.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},progressClose:function(){this.actionButton.showProgress();this.closeContent.delay(1500,this);}});var RoomStatusBox=new Class({Extends:Base,EventHandlers:[\"roomMembershipUpdated\",\"roomStatusUpdated\",\"roomStatusCleared\"],init:function(room){this.room=room;this.defaultStatus=\"has no current status\";this.canPost=(this.room.status==1);this.createStatusBox();},createStatusBox:function(){this.box=ItemUtility.createPostBubble(\"post status_message haspic\");ItemUtility.createProfilePic(this.room,32).inject(this.box);var buttonText=\"Write in \"+this.room.room_name;this.writeButton=new Element(\"div\",{\"class\":\"button\",\"text\":TextUtility.unescape(buttonText)}).inject(this.box);this.writeButton.addEvent(\"click\",this.fireEvent.bind(this,[\"roomShareBoxShow\",this.room]));this.setPostButton();this.content=new Element(\"div\",{\"class\":\"post_content\"}).inject(this.box);var header=new Element(\"div\",{\"class\":\"header\"}).inject(this.content);StreamItemUtility.createStreamUserAction(\"status dark\").inject(header);var creator=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescapeQuotes(this.room.room_name)}).inject(header);creator.addEvent(\"click\",this.fireEvent.bind(this,[\"showRoom\",this.room]));this.statusText=new Element(\"span\",{\"class\":\"status\"}).inject(header);this.editButton=new Element(\"span\",{\"class\":\"edit_link\",\"text\":\"update\"});this.editButton.addEvent(\"click\",this.fireEvent.bind(this,[\"showRoomStatusUpdatePopup\",this.room]));this.clearButton=new Element(\"span\",{\"class\":\"edit_link\",\"text\":\"clear\"});this.clearButton.addEvent(\"click\",this.clearStatus.bind(this));this.editSection=new Element(\"span\").adopt($(this.editButton),$(this.clearButton)).inject(header);this.setEditButton();this.footer=StreamItemUtility.createStatusBoxFooter(this.room.status_message).inject(this.content);this.updateStatus();},roomMembershipUpdated:function(data){if(!$defined(data.username)||data.username!=this.room.username){return;}this.room.status=data.status;this.canPost=(this.room.status==1);this.setPostButton();},setEditButton:function(){if(this.canPost){DomUtility.show(this.editSection,\"inline\");}else{DomUtility.hide(this.editSection);}},setPostButton:function(){if(this.canPost){DomUtility.show(this.writeButton);}else{DomUtility.hide(this.writeButton);}},updateStatus:function(){this.isEmpty=(!$defined(this.room.status_message)||this.room.status_message.status.trim()==\"\");if(this.isEmpty){this.statusText.addClass(\"empty\");this.statusText.set(\"text\",\" \"+TextUtility.unescape(this.defaultStatus));DomUtility.hide(this.clearButton);}else{this.statusText.removeClass(\"empty\");this.statusText.set(\"text\",\" \"+TextUtility.unescape(this.room.status_message.status.trim()));DomUtility.show(this.clearButton,\"inline\");}this.footer.destroy();this.footer=StreamItemUtility.createStatusBoxFooter(this.room.status_message).inject(this.content);},clearStatus:function(){var params={username:this.room.username,body:\"\",res:this.getSession()};this.call(\"pipio\",\"publish_roomstatus\",params);this.roomStatusCleared({username:this.room.username});},roomStatusUpdated:function(data){if(!$defined(data.username)||data.username!=this.room.username){return;}this.room=this.getRoom(data.username);this.updateStatus();},roomStatusCleared:function(data){if(!$defined(data.username)||data.username!=this.room.username){return;}this.room.status_message.status=\"\";this.room.status_message.creator=undefined;this.room.status_message.date_created=undefined;this.room.status_message.location=undefined;this.updateStatus();},toElement:function(){return this.box;}});var StatusBox=new Class({Extends:Base,EventHandlers:[\"userStatusUpdated\",\"userStatusCleared\",\"contactAdded\",\"contactDeleted\"],init:function(user){this.user=user;this.isSelf=this.user.user_id==this.getPrivateUser().user_id;this.defaultStatus=\"has no current status\";this.canPost=$defined(this.getContact(this.user.username))||this.isSelf;this.createStatusBox();},createStatusBox:function(){this.box=ItemUtility.createPostBubble(\"post status_message haspic\");ItemUtility.createProfilePic(this.user,32).inject(this.box);var buttonText=this.isSelf?\"Write in Your Stream\":\"Write in \"+this.user.first_name+\"'s Stream\";this.writeButton=new Element(\"div\",{\"class\":\"button\",\"text\":TextUtility.unescape(buttonText)}).inject(this.box);this.writeButton.addEvent(\"click\",this.fireEvent.bind(this,[\"shareBoxShow\",this.user]));this.setPostButton();this.content=new Element(\"div\",{\"class\":\"post_content\"}).inject(this.box);var header=new Element(\"div\",{\"class\":\"header\"}).inject(this.content);StreamItemUtility.createStreamUserAction(\"status dark\").inject(header);var creator=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescapeQuotes(this.user.fullname)}).inject(header);creator.addEvent(\"click\",this.fireEvent.bind(this,[\"showUser\",this.user]));this.status=new Element(\"span\",{\"class\":\"status\"}).inject(header);if(this.isSelf){this.editButton=new Element(\"span\",{\"class\":\"edit_link\",\"text\":\"update\"}).inject(header);this.editButton.addEvent(\"click\",this.fireEvent.bind(this,[\"showStatusUpdatePopup\"]));this.clearButton=new Element(\"span\",{\"class\":\"edit_link\",\"text\":\"clear\"}).inject(header);this.clearButton.addEvent(\"click\",this.clearStatus.bind(this));}this.footer=StreamItemUtility.createStatusBoxFooter(this.user.status_message).inject(this.content);this.updateStatus();},contactAdded:function(user){if(this.user.username!=user.username){return;}this.canPost=true;this.setPostButton();},contactDeleted:function(username){if(this.user.username!=username){return;}this.canPost=false;this.setPostButton();},setPostButton:function(){if(this.canPost){DomUtility.show(this.writeButton);}else{DomUtility.hide(this.writeButton);}},updateStatus:function(){this.isEmpty=this.user.status_message.status.trim()==\"\";if(this.isEmpty){this.status.addClass(\"empty\");this.status.set(\"text\",\" \"+TextUtility.unescape(this.defaultStatus));if(this.isSelf){DomUtility.hide(this.clearButton);}}else{this.status.removeClass(\"empty\");this.status.set(\"text\",\" \"+TextUtility.unescape(this.user.status_message.status.trim()));if(this.isSelf){DomUtility.show(this.clearButton,\"inline\");}}this.footer.destroy();this.footer=StreamItemUtility.createStatusBoxFooter(this.user.status_message).inject(this.content);},clearStatus:function(){var params={body:\"\",res:this.getSession()};this.call(\"pipio\",\"publish_status\",params);this.userStatusCleared({username:this.user.username});},userStatusUpdated:function(data){if(!$defined(data.username)||data.username!=this.user.username){return;}this.user.status_message=data.status_message;this.updateStatus();},userStatusCleared:function(data){if(!$defined(data.username)||data.username!=this.user.username){return;}this.user.status_message.status=\"\";this.user.status_message.date_created=undefined;this.user.status_message.location=undefined;this.updateStatus();},toElement:function(){return this.box;}});var AttachmentUtility={parseLinkAttachment:function(attachment){if($defined(attachment.processed)){return attachment;}attachment.processed=true;attachment.is_video=false;attachment.is_photo=false;if(attachment.url.contains(\"youtube.com\")){var youtubeId=attachment.url.replace(/^[^v]+v.(.{11}).*/,\"$1\");if(youtubeId!=\"\"){attachment.is_video=true;attachment.video_type=\"youtube\";attachment.youtubeId=youtubeId;return attachment;}}else{if(attachment.url.contains(\"collegehumor.com/video:\")){var vimeoId=attachment.url.split(\"collegehumor.com/video:\")[1];if(vimeoId!=\"\"){attachment.is_video=true;attachment.video_type=\"ch\";attachment.vimeoId=vimeoId;return attachment;}}else{if(attachment.url.contains(\"vimeo.com/\")){var vimeoId=attachment.url.split(\"vimeo.com/\")[1];if(vimeoId!=\"\"){attachment.is_video=true;attachment.video_type=\"vimeo\";attachment.vimeoId=vimeoId;return attachment;}}else{if(attachment.url.contains(\"hulu.com\")){attachment.is_video=true;attachment.video_type=\"hulu\";return attachment;}else{if(attachment.url.contains(\"break.com\")){attachment.is_video=true;attachment.video_type=\"break\";return attachment;}else{if(DataUtility.validatePhotoFile(attachment.url)){attachment.is_photo=true;return attachment;}}}}}}return attachment;},parsePhotoAttachment:function(attachment){if($defined(attachment.processed)){return attachment;}attachment.processed=true;attachment.is_photo=true;return attachment;}};var DataUtility={photoExtensions:[\".jpeg\",\".jpg\",\".gif\",\".png\",\".bmp\"],validateUrl:function(url){var v=new RegExp();v.compile(\"^([A-Za-z]+://[A-Za-z0-9-_]+.[A-Za-z0-9-_%&?/.=,+~!:@()]+(#[A-Za-z0-9-_%&?/.=,+~!:@()]+)?)$\");return v.test(url);},validatePhotoFile:function(filename){if(filename.substring(filename.length-5).toLowerCase()==\".jpeg\"){return true;}var ext=filename.substring(filename.length-4).toLowerCase();return DataUtility.photoExtensions.contains(ext);},getGeoString:function(location){if(!$defined(location)){return false;}var locationString=false;var locality=DataUtility.getGeoLocality(location);if(locality){locationString=locality;}var label=DataUtility.getGeoLabel(location);if(label){locationString=label+\", \"+locality;}return locationString;},getGeoLabel:function(location){if($defined(location.label)&&location.label!=\"\"){return location.label;}else{return false;}},getGeoLocality:function(location){var local=\"\";if(location.country_code==\"US\"){if($defined(location.region)&&$defined(location.city)&&location.region!=\"\"&&location.city!=\"\"){local=location.city+\", \"+location.region;}else{return false;}}else{if($defined(location.city)&&location.city!=\"\"){local=location.city+\", \"+location.country;}else{if(location.city==\"\"&&$defined(location.region)&&location.region!=\"\"){local=location.region+\", \"+location.country;}else{if(!$defined(location.city)&&$defined(location.country)){local=location.country;}else{return false;}}}}return local;},getPipioUrl:function(url,hash){if($defined(hash)){return\"/\"+hash;}else{return url;}},getFacebookPhotoUrl:function(url){return url.replace(\"_s.jpg\",\"_n.jpg\");},sortUsers:function(a,b){return a.last_name.toLowerCase()<b.last_name.toLowerCase();},getCookie:function(c_name){if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+\"=\");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(\";\",c_start);if(c_end==-1){c_end=document.cookie.length;}return unescape(document.cookie.substring(c_start,c_end));}}return undefined;},getFileUrl:function(hash,file_id,filename){var serverId=file_id%16;return\"http://files\"+serverId.toString(16)+\".pip.io/\"+hash.substring(0,2)+\"/\"+hash.substring(2,3)+\"/\"+hash.substring(3,5)+\"/\"+hash.substring(5,8)+\"/\"+file_id+\"/\"+filename;}};var DateUtility={convertFromGMT:function(date){var offsetMils=date.getTimezoneOffset()*60*1000;date.setTime(date.getTime()-offsetMils);return date;},getTimestamp:function(ts,format){if(!$defined(format)){format=\"%B %D, %I:%M%p\";}if(new Date().getTime()-ts.getTime()>86400000){return ts.format(format);}else{return ts.timeAgoInWords();}},convertFromTimestamp:function(ts){var date=new Date();date.setTime(ts*1000);return date;}};var DomUtility={toggle:function(id){if($(id).getStyle(\"display\")==\"none\"){DomUtility.show(id);}else{DomUtility.hide(id);}},hide:function(id){if($(id)!=null){$(id).setStyle(\"display\",\"none\");}},show:function(id,display){if(!$defined(display)){display=\"block\";}if($(id)!=null){$(id).setStyle(\"display\",display);}},expand:function(id){var el=$(id);el.get(\"tween\",{duration:150}).start(\"height\",el.getScrollSize().y).chain(function(){el.setStyle(\"height\",\"auto\");});},collapse:function(id){var el=$(id);el.setStyle(\"height\",el.getSize().y);el.get(\"tween\",{duration:150}).start(\"height\",0);},setHeight:function(id,h){var el=$(id);el.get(\"tween\",{duration:150}).start(\"height\",h);},expandFade:function(id,h){var el=$(id);el.setStyle(\"opacity\",0);el.get(\"tween\",{duration:150}).start(\"height\",h).chain(function(){el.get(\"tween\",{duration:800}).start(\"opacity\",1);});},collapseFade:function(id){var el=$(id);el.get(\"tween\",{duration:800}).start(\"opacity\",0).chain(function(){el.get(\"tween\",{duration:150}).start(\"height\",0);});},fadeOut:function(id,destroy){var el=$(id);el.setStyle(\"opacity\",1);el.get(\"tween\",{duration:500}).start(\"opacity\",0).chain(function(){if(destroy){el.destroy();}});},fadeOutDestroy:function(id){DomUtility.fadeOut(id,true);},fadeIn:function(id,duration){var el=$(id);duration=duration||500;el.setStyle(\"opacity\",0);el.get(\"tween\",{duration:duration}).start(\"opacity\",1);},getZ:function(name){var zName=name+\"Z\";if(!$defined(window[zName])){window[zName]=200;}window[zName]++;return window[zName];},textareaAutoSize:function(el,min){min=$defined(min)?min:16;el=$(el);if(el.value.trim().length<30&&el.getSize().y>min){el.setStyle(\"height\",min);return true;}if(el.getScrollSize().y>min&&el.getScrollSize().y>el.getSize().y){el.setStyle(\"height\",el.getScrollSize().y);return true;}return false;}};var ItemUtility={createProfilePic:function(user,size){var picSize=(size==\"16a\")?16:size;if($defined(user.fullname)){var el=new Element(\"div\",{\"class\":\"shadowed profile_pic_wrapper_\"+size}).adopt(new Element(\"img\",{\"class\":\"profile_pic profile_pic_\"+picSize+\"_\"+user.username,\"src\":user[\"profile_pic_\"+picSize],\"title\":TextUtility.unescape(user.fullname)}),new Element(\"div\",{\"class\":\"online_status online_status_\"+user.username,\"title\":TextUtility.unescape(user.fullname)}));return el;}else{if($defined(user.room_name)){var el=new Element(\"div\",{\"class\":\"shadowed profile_pic_wrapper_\"+size}).adopt(new Element(\"img\",{\"class\":\"profile_pic profile_pic_\"+picSize+\"_\"+user.username,\"src\":user[\"profile_pic_\"+picSize],\"title\":TextUtility.unescape(user.room_name)}),new Element(\"div\",{\"class\":\"online_status online_status_\"+user.username,\"title\":TextUtility.unescape(user.room_name)}));return el;}}},createItemPic:function(url,size){var picSize=$defined(size)?size:32;var el=new Element(\"div\",{\"class\":\"shadowed profile_pic_wrapper_\"+picSize}).adopt(new Element(\"img\",{\"class\":\"profile_pic profile_pic_\"+picSize,\"src\":url}),new Element(\"div\",{\"class\":\"online_status\"}));return el;},createChatPostItem:function(msg,user){var el=ItemUtility.createPostBubble(\"post chat haspic\");if(!msg.outbound){user=msg.target;}ItemUtility.createProfilePic(user,20).inject(el);new Element(\"div\",{\"class\":\"post_content\"}).adopt(new Element(\"div\",{\"class\":\"header\",\"html\":TextUtility.replaceUrls(TextUtility.cleanText(msg.msg))})).inject(el);return el;},createChatPostHeading:function(user,date){var el=new Element(\"div\",{\"class\":\"post chat heading\"});var ts=$defined(date)?new Element(\"span\",{\"class\":\"timestamp\",\"text\":DateUtility.getTimestamp(date,\"%B %D, %I:%M%p\"),\"ts\":date,\"ts_format\":\"%B %D, %I:%M%p\"}):new Element(\"span\");new Element(\"div\",{\"class\":\"post_content\"}).adopt(new Element(\"div\",{\"class\":\"header\"}).adopt(new Element(\"span\",{\"class\":\"user_name\",\"text\":TextUtility.unescapeQuotes(user.fullname)}),ts)).inject(el);return el;},createChatTypingHeading:function(user){var el=new Element(\"div\",{\"class\":\"post chat heading\"});new Element(\"div\",{\"class\":\"post_content\"}).adopt(new Element(\"div\",{\"class\":\"header\"}).adopt(new Element(\"span\",{\"class\":\"user_name\",\"text\":TextUtility.unescapeQuotes(user.fullname)}),new Element(\"span\",{\"class\":\"status_text\",\"text\":\"is typing\"}))).inject(el);return el;},createPostBubble:function(className,nocorner){if(nocorner){var el=new Element(\"div\",{\"class\":className}).adopt(new Element(\"div\",{\"class\":\"bubble\"}).adopt(new Element(\"div\",{\"class\":\"bubble_inner\"})));}else{var el=new Element(\"div\",{\"class\":className}).adopt(new Element(\"div\",{\"class\":\"bubble\"}).adopt(new Element(\"div\",{\"class\":\"bubble_inner\"}),new Element(\"div\",{\"class\":\"corner\"})));}return el;}};var Logger=(function(){var LoggerSingleton=new Class({initialize:function(){this._log=new Log();this._log.enableLog();},log:function(val){this._log.log(val);}});var singleton;return function(){return singleton?singleton:singleton=new LoggerSingleton();};})();var TextUtility={unescapeQuotes:function(val){if(!$defined(val)){return\"\";}val=val.toString();val=val.split(\"\\\\\\\\\").join(\"\\\\\");val=val.split(\"\\\\'\").join(\"'\");val=val.split('\\\\\"').join('\"');return val;},unescapeHtml:function(val){if(!$defined(val)){return\"\";}val=val.toString();val=val.split(\"&lt;\").join(\"<\");val=val.split(\"&gt;\").join(\">\");val=val.split(\"&amp;\").join(\"&\");return val;},unescape:function(val){return TextUtility.unescapeQuotes(TextUtility.unescapeHtml(val));},escapeHtml:function(val){if(!$defined(val)){return\"\";}val=val.toString();val=val.split(\"<\").join(\"&lt;\");val=val.split(\">\").join(\"&gt;\");return val;},stripHtml:function(val){if(!$defined(val)){return\"\";}val=val.toString();var re=/<\\S[^><]*>/g;val.replace(re,\"\");return val;},cleanText:function(val){if(!$defined(val)){return\"\";}val=val.toString();val=TextUtility.unescapeQuotes(val);val=TextUtility.escapeHtml(val);return val;},pluralText:function(count,singular,plural){if(count==1){return count+\" \"+singular;}else{return count+\" \"+plural;}},replaceUrls:function(val){if(!$defined(val)){return\"\";}return val.replace(/([A-Za-z]+:\\/\\/[A-Za-z0-9-_]+\\.[A-Za-z0-9-_%&\\?\\/.=,+~!:@()]+(#[A-Za-z0-9-_%&\\?\\/.=,+~!:@()]+)?)/g,'<a href=\"$1\" target=\"_blank\">$1</a>');},convertNewLine:function(val){if(!$defined(val)){return\"\";}val=val.toString();val=val.split(\"\\n\").join(\"<br/>\");return val;}};String.format=function(text){if(arguments.length<=1){return text;}var tokenCount=arguments.length-2;for(var token=0;token<=tokenCount;token++){text=text.replace(new RegExp(\"\\\\{\"+token+\"\\\\}\",\"gi\"),arguments[token+1]);}return text;};var UserUtility={profilePicVersionSet:function(user_id,ver){if(!$defined(window.profilePicVer)){window.profilePicVer=new Hash();}window.profilePicVer.set(user_id,ver);},profilePicVersionGet:function(user_id){if(!$defined(window.profilePicVer)){return 0;}if(!window.profilePicVer.has(user_id)){return 0;}return window.profilePicVer.get(user_id);},getProfilePic:function(hash,user_id,size){if(!$defined(size)){size=26;}var serverId=user_id%16;var version=UserUtility.profilePicVersionGet(user_id);return\"http://profilepics\"+serverId.toString(16)+\".pip.io/\"+hash.substring(0,2)+\"/\"+hash.substring(2,3)+\"/\"+hash.substring(3,5)+\"/\"+user_id+\"/\"+size+\".jpg?\"+version;},processSource:function(source){if($defined(source.user_id)){return UserUtility.processUser(source);}else{if($defined(source.room_id)){return UserUtility.processRoom(source);}}},processRoom:function(room){var proom={};proom.username=room.username.toLowerCase();if($defined(room.about)){pipio.profileUpdated({username:room.username,about:room.about});}if($defined(pipio.getRoom(proom.username))){var existing=pipio.getRoom(proom.username);if($defined(room.about)){pipio.profileUpdated({username:proom.username,about:room.about});}if($defined(room.status_message)&&$defined(room.status_message.status)){if($defined(room.status_message.status)&&existing.status_message.status!=room.status_message.status){pipio.dispatchEvent(\"roomStatusUpdated\",{username:room.username,status_message:room.status_message});existing.status_message=room.status_message;}}if($defined(room.is_public)){existing.is_public=parseInt(room.is_public);}if($defined(room.status)){existing.status=parseInt(room.status);}if($defined(room.subscribed)){existing.status=parseInt(room.subscribed);}return existing;}proom.status_message=$defined(room.status_message)?room.status_message:{status:\"\"};proom.room_id=room.room_id;proom.room_name=room.room_name;proom.room_hash=room.room_hash;proom.date_created=room.date_created;proom.creator_id=$defined(room.creator_id)?room.creator_id:0;proom.creator=$defined(room.creator)?UserUtility.processUser(room.creator):null;proom.is_public=parseInt(room.is_public);proom.status=$defined(room.status)?parseInt(room.status):0;proom.subscribed=$defined(room.subscribed)?parseInt(room.subscribed):0;proom.about=$defined(room.about)?room.about:null;proom.profile_pic_16=UserUtility.getProfilePic(room.room_hash,room.room_id,16);proom.profile_pic_20=UserUtility.getProfilePic(room.room_hash,room.room_id,20);proom.profile_pic_26=UserUtility.getProfilePic(room.room_hash,room.room_id,26);proom.profile_pic_32=UserUtility.getProfilePic(room.room_hash,room.room_id,32);proom.profile_pic_42=UserUtility.getProfilePic(room.room_hash,room.room_id,42);proom.profile_pic_60=UserUtility.getProfilePic(room.room_hash,room.room_id,60);proom.profile_pic_100=UserUtility.getProfilePic(room.room_hash,room.room_id,100);proom.profile_pic_200=UserUtility.getProfilePic(room.room_hash,room.room_id,200);pipio.cacheRoom(proom);return proom;},processUser:function(user){var puser={};if(!$defined(user)||!$defined(user.username)){return;}puser.username=user.username.toLowerCase();if($defined(user.current_location)&&user.current_location!=\"\"){pipio.locationUpdated({username:puser.username,location_enabled:$defined(user.location_enabled)?user.location_enabled:0,location:user.current_location});}if($defined(user.about)){pipio.profileUpdated({username:puser.username,about:user.about});}if($defined(pipio.getUser(puser.username))){var existing=pipio.getUser(puser.username);if($defined(user.status_message)&&$defined(user.status_message.status)){if($defined(user.status_message.status)&&existing.status_message.status!=user.status_message.status){pipio.dispatchEvent(\"userStatusUpdated\",{username:user.username,status_message:user.status_message});existing.status_message=user.status_message;}}if($defined(user.location_enabled)){existing.location_enabled=user.location_enabled;}if($defined(user.is_public)){existing.is_public=user.is_public;}return existing;}puser.status_message=$defined(user.status_message)?user.status_message:{status:\"\"};puser.first_name=user.first_name;puser.last_name=user.last_name;puser.fullname=user.first_name+\" \"+user.last_name;puser.user_hash=user.user_hash;puser.user_id=user.user_id;puser.group_id=$defined(user.group_id)?user.group_id:0;puser.about=$defined(user.about)?user.about:null;puser.is_public=user.is_public;puser.location_enabled=$defined(user.location_enabled)?user.location_enabled:0;puser.online=false;puser.show=\"\";puser.video=false;puser.profile_pic_16=UserUtility.getProfilePic(user.user_hash,user.user_id,16);puser.profile_pic_20=UserUtility.getProfilePic(user.user_hash,user.user_id,20);puser.profile_pic_26=UserUtility.getProfilePic(user.user_hash,user.user_id,26);puser.profile_pic_32=UserUtility.getProfilePic(user.user_hash,user.user_id,32);puser.profile_pic_42=UserUtility.getProfilePic(user.user_hash,user.user_id,42);puser.profile_pic_60=UserUtility.getProfilePic(user.user_hash,user.user_id,60);puser.profile_pic_100=UserUtility.getProfilePic(user.user_hash,user.user_id,100);puser.profile_pic_200=UserUtility.getProfilePic(user.user_hash,user.user_id,200);pipio.cacheUser(puser);return puser;},updateStatusMessage:function(user,status_msg){var msgClass=\".status_msg_\"+user.username;$$(msgClass).each(function(el){el.set(\"text\",TextUtility.unescapeQuotes(status_msg));});},getInstalledApps:function(){var apps=new Array();if($defined(user_data)){user_data.apps.each(function(app){apps[app.app_id]=app.external_user_id;},this);}return apps;}};var AlbumViewer=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"viewAlbum\"],init:function(){this.photos=$H();},userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){},userLoggedOut:function(){},viewAlbum:function(album,photo,aid){var thumbSize=75;var w=600;var h=450;w+=2;h+=thumbSize+34;var albumPopup=new Popup({size:{x:w,y:h},resizable:false,dockable:true,closable:true,className:\"albumViewer\"});var nav=new Nav({iconOptions:{iconName:\"photo\"},displayName:album.displayName,closable:true});var content=new AlbumPopupContent({album:album,photo:photo,aid:aid,width:w,height:h,thumbSize:thumbSize});albumPopup.addContent(\"album\",nav,content);}});var AlbumPopupContent=new Class({Extends:PopupContent,EventHandlers:[\"albumPicView\"],onBeforeInit:function(options){this.album=options.album;this.curPhoto=options.photo;this.aid=options.aid;this.width=options.width;this.height=options.height;this.thumbSize=options.thumbSize;this.imageEls=$H();return options;},onInit:function(){var img=new Asset.image(this.curPhoto.src,{title:this.curPhoto.caption,onload:(function(image){this.picLoaded(image,this.curPhoto);}).bind(this)});this.nextImage;this.nextId;},picLoaded:function(image,photo){this.curImage=this.photoResize(image);var imgArea=new Element(\"div\",{\"class\":\"albumImage\"}).adopt(this.curImage);imgArea.inject(this.content);this.nextLayer=new Element(\"div\",{\"class\":\"nav_image next nextLayer\"});this.prevLayer=new Element(\"div\",{\"class\":\"nav_image previous prevLayer\"});this.nextLayer.inject(imgArea);this.prevLayer.inject(imgArea);var nextL=this.nextLayer;var prevL=this.prevLayer;imgArea.addEvent(\"mouseover\",function(){DomUtility.show(nextL);},this);imgArea.addEvent(\"mouseover\",function(){DomUtility.show(prevL);},this);imgArea.addEvent(\"mouseout\",function(){DomUtility.hide(nextL);},this);imgArea.addEvent(\"mouseout\",function(){DomUtility.hide(prevL);},this);this.addNextPrevEvents(photo.id,this.aid);this.captionBox=new Element(\"div\",{\"class\":\"photoCaption\",\"text\":photo.caption}).inject(this.content);if($defined(photo.caption)&&photo.caption!=\"\"){DomUtility.show(this.captionBox);}else{DomUtility.hide(this.captionBox);}var imgBarWidth=(this.thumbSize+10)*this.album.getSize();this.imageBarOuter=new Element(\"div\",{\"class\":\"imageBarOuter\",\"styles\":{\"width\":this.w-2}});this.imageBarOuter.inject(this.content);var imageBar=new Element(\"div\",{\"class\":\"imageBar\",\"styles\":{\"width\":imgBarWidth}});imageBar.inject(this.imageBarOuter);var curIndex;var photos=this.album.getAllPhotos();var pic,img,imgContainer;for(var i=0;i<this.album.getSize();i++){pic=photos[i];img=new Element(\"img\",{\"src\":pic.thumb,\"alt\":pic.caption,\"title\":pic.caption});imgContainer=new Element(\"div\",{\"class\":\"imageInBar\"}).adopt(img);imgContainer.inject(imageBar);this.imageEls.set(pic.id,imgContainer);if(pic.id==photo.id){imgContainer.addClass(\"photoHightlight\");this.oldPic=pic;}imgContainer.addEvent(\"click\",pipio.dispatchEvent.bind(this,[\"albumPicView\",pic.id,this.aid]));}this.scrollToPic(photo.id);this.loadNextPic(photo.pid);},photoResize:function(image){var w=parseInt(image.get(\"width\"));var h=parseInt(image.get(\"height\"));var ratio=1;if(h>w){if(h>450){ratio=450/h;h=450;w=ratio*w;}}else{if(w>600){ratio=600/w;w=600;h=ratio*h;}}image.setStyle(\"height\",h);image.setStyle(\"width\",w);return image;},addNextPrevEvents:function(id,aid){var photos=this.album.getNextPrevPhoto(id);$(this.nextLayer).addEvent(\"click\",pipio.dispatchEvent.bind(this,[\"albumPicView\",photos.next.id,aid]));$(this.prevLayer).addEvent(\"click\",pipio.dispatchEvent.bind(this,[\"albumPicView\",photos.prev.id,aid]));},scrollToPic:function(id){var width=600;var index=this.album.getIndex(id);var x=index*(this.thumbSize+10);x=x-(600/2)+(this.thumbSize/2)+4;if(x<0){x=0;}var meh=this.imageEls.get(id).scrollLeft;$(this.imageBarOuter).scrollTo(x,0);},loadNextPic:function(pid){var nextPhoto=this.album.nextPhoto(pid);this.nextId=nextPhoto.id;var img=new Asset.image(nextPhoto.src,{onload:(function(image){this.nextImage=image;}).bind(this)});},albumPicView:function(pid){if($defined(pid[1])&&pid[1]==this.aid){pid=pid[0];if(pid==this.nextId){this.albumPicViewLoaded(this.nextImage,pid,this.aid);}else{var photo=this.album.getPhoto(pid);var img=new Asset.image(photo.src,{onload:(function(image){this.albumPicViewLoaded(image,pid,this.aid);}).bind(this)});}}},albumPicViewLoaded:function(image,pid,aid){var photo=this.album.getPhoto(pid);image=this.photoResize(image);var im=image.replaces($(this.curImage));this.curImage=im;this.captionBox.set(\"text\",photo.caption);if($defined(photo.caption)&&photo.caption!=\"\"){DomUtility.show(this.captionBox);}else{DomUtility.hide(this.captionBox);}this.nextLayer.removeEvents(\"click\");this.prevLayer.removeEvents(\"click\");this.addNextPrevEvents(pid,aid);this.imageEls.get(this.oldPic.id).removeClass(\"photoHighlight\");this.imageEls.get(pid).addClass(\"photoHighlight\");this.scrollToPic(pid);this.loadNextPic(pid);}});var Background=new Class({Extends:Base,EventHandlers:[\"userLoggedIn\",\"userLoggedOut\"],init:function(){this.clouds=new Array();this.stars=new Array();this.container=$(\"background\");this.getBounds();this.setupSky();this.sunrise=6;this.sunset=19;this.moonrise=21;this.moonset=4;this.maxStars=30;this.starsStart=19;this.starsEnd=4;for(var i=0;i<6;i++){var cloud=this.createCloud().inject(this.container);this.clouds.push(cloud);}this.run();},setupSky:function(){this.sky=new Element(\"div\",{\"class\":\"sky\"}).inject(this.container);this.sun=new Element(\"div\",{\"class\":\"celestial sun\"}).inject(this.container);this.dusk=new Element(\"div\",{\"class\":\"sky_dusk\"}).inject(this.container);this.moon=new Element(\"div\",{\"class\":\"celestial moon\"}).inject(this.container);this.moveSky();},run:function(){this.step();this.anim=this.step.periodical(20000,this);},stop:function(){$clear(this.anim);},step:function(){this.moveClouds();this.moveSky();},getBounds:function(){this.xMin=-100;this.xMax=this.container.getSize().x;this.yMin=0;this.yMax=this.container.getSize().y-100;},userLoggedIn:function(){},userLoggedOut:function(){},setStars:function(){var time=this.getTime();if((time>this.starsStart||time<this.starsEnd)&&this.stars.length<this.maxStars){var star=this.createStar();star.inject(this.container);star.setStyles({\"top\":$random(1,this.yMax),\"left\":$random(1,this.xMax)});this.stars.push(star);}else{if(((time>this.starsEnd&&time<this.starsStart)&&this.stars.length>0)||this.stars.length==this.maxStars){this.removeStar();}}},removeStar:function(){if(this.stars.length==0){return;}var i=$random(0,this.stars.length-1);this.stars[i].destroy();this.stars.splice(i,1);},moveClouds:function(){var containerSize=this.container.getSize();this.clouds.each(function(item){var pos=item.getPosition();var speed=$random(2,6);if(pos.x+speed>this.xMax){item.setStyle(\"left\",this.xMin);}else{item.get(\"tween\",{duration:1000}).start(\"left\",pos.x+speed);}},this);},createStar:function(){var star=new Element(\"div\",{\"class\":\"celestial stars star\"+$random(1,4)});return star;},createCloud:function(){var cloud=new Element(\"div\",{\"class\":\"cloud cloud\"+$random(1,6)});cloud.setStyle(\"left\",$random(this.xMin,this.xMax));cloud.setStyle(\"top\",$random(this.yMin,this.yMax));return cloud;},moveSky:function(){this.sky.setStyle(\"top\",this.getSkyPosition());this.dusk.setStyle(\"bottom\",this.getDuskPosition());this.moveSun();this.moveMoon();this.setStars();},moveSun:function(){var pos=this.getSunPosition();this.sun.setStyles({\"top\":pos.y+\"%\",\"left\":pos.x+\"%\"});},moveMoon:function(){var pos=this.getMoonPosition();this.moon.setStyles({\"top\":pos.y+\"%\",\"left\":pos.x+\"%\"});},getSkyPosition:function(){var skyMax=3000-this.container.getSize().y;var time=this.getTime();if(time>=1){time+=23;}else{time-=1;}return -Math.sin(((time)/24)*Math.PI)*Math.sin(((time)/24)*Math.PI)*skyMax;},getGroundOpacity:function(){var opacityMax=80;var time=this.getTime();if(time>=1){time+=23;}else{time-=1;}var dark=(1-Math.sin(((time)/24)*Math.PI))*opacityMax;return dark;},getDuskPosition:function(){var time=this.getTime();if(time>this.sunset-1&&time<this.sunset+1){time=(time-(this.sunset-1))/2;return -183+Math.sin((time)*Math.PI)*183;}else{return -183;}},getSunPosition:function(){var pos={x:90,y:100};var time=this.getTime();if(time>this.sunrise&&time<this.sunset){time=(time-this.sunrise)/(this.sunset-this.sunrise);pos.y=100-Math.sin(time*Math.PI)*100;pos.x=90-time*100;}return pos;},getMoonPosition:function(){var pos={x:90,y:100};var time=this.getTime();if(time<this.moonset){time+=24;}if(time>this.moonrise&&time<this.moonset+24){time=Math.abs((time-this.moonrise)/((this.moonset+24)-this.moonrise));pos.y=100-Math.sin(time*Math.PI)*100;pos.x=90-time*100;}return pos;},getTime:function(){var date=new Date();return date.getHours()+date.getMinutes()/60;}});var Chat=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"chatStart\",\"chatMsgReceived\",\"chatTypingReceived\"],init:function(){this.contents=$H();this.lastMsg=$H();},userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){},userLoggedOut:function(){this.resetChatPopup();this.init();},chatStart:function(username,noSwitch){if(!$defined(this.popup)){this.createChatPopup();}var user=this.getContact(username);var content=this.addChatConvo(user);if(!$defined(noSwitch)){this.popup.switchContent(username);}return content;},chatTypingReceived:function(username){if(!this.contents.has(username)){return;}this.contents.get(username).showTyping();},chatMsgReceived:function(msg){var user=msg.target;var content=this.chatStart(user.username,true);if(!this.lastMsg.has(user.username)||this.lastMsg.get(user.username).outbound!=msg.outbound||new Date().getTime()-this.lastMsg.get(user.username).timestamp.getTime()>300000){var ts=msg.timestamp;if(this.lastMsg.has(user.username)&&msg.timestamp.getTime()-this.lastMsg.get(user.username).timestamp.getTime()<300000){ts=null;}var heading=(msg.outbound)?ItemUtility.createChatPostHeading(this.getPrivateUser(),ts):ItemUtility.createChatPostHeading(user,ts);content.insertChatItem(heading);}this.lastMsg.set(user.username,msg);var item=ItemUtility.createChatPostItem(msg,this.getPrivateUser());content.insertChatItem(item);},resetChatPopup:function(){if($defined(this.popup)){this.popup.close();}this.contents.each(function(content,key){content.close(true);this.contents.erase(key);},this);},createChatPopup:function(){this.popup=new ChatPopup({size:{x:400,y:350},resizable:false,className:\"pipioChat\",onClose:this.destroyChatPopup.bind(this)});},destroyChatPopup:function(){this.popup=null;this.isActive=false;},addChatConvo:function(user){if(this.contents.has(user.username)){var nav=new Nav({iconOptions:{user:user},displayName:user.fullname,closable:true});var content=this.contents.get(user.username);this.popup.addContent(user.username,nav,content);content.jumpToBottom();return content;}else{var nav=new Nav({iconOptions:{user:user},displayName:user.fullname,closable:true});var content=new ChatPopupContent({user:user});this.contents.set(user.username,content);this.popup.addContent(user.username,nav,content);return content;}}});Chat.implement({createChatPostItem:function(msg){var item=new Element(\"div\",{\"class\":\"post chat haspic\"});}});var ChatPopup=new Class({Extends:Popup,setTitle:function(){if(this.hasTabs){var icon=new Icon20({iconName:\"rooms\"});var titleText=new Element(\"div\",{\"class\":\"title_text\",\"text\":this.contents.getLength()+\" Chats\"});}else{var nav=this.navs.get(this.currentContent);var icon=new Icon20(nav.iconOptions);var titleText=new Element(\"div\",{\"class\":\"title_text\",\"text\":\"Chat with \"+TextUtility.unescapeQuotes(nav.displayName)});}this.titleIcon=$(icon).replaces(this.titleIcon);this.titleText=titleText.replaces(this.titleText);}});var ChatPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){options.destroy=false;this.user=options.user;return options;},onInit:function(){this.lastOutbound=null;this.typingSent=false;this.chatContent=new Element(\"div\",{\"class\":\"chatContent\"}).inject(this.content);this.chatInput=new Element(\"textarea\",{\"maxlength\":2000});this.chatInput.addEvent(\"keyup\",this.chatInputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"chatInput\"}).adopt(new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.chatInput)).inject(this.content);this.scroll=new Fx.Scroll(this.chatContent);},jumpToBottom:function(){this.scroll.set(0,this.chatContent.getScrollSize().y);},onShow:function(){if($defined(this.scrollY)){this.scroll.set(0,this.scrollY);}this.focus();var msg=this.user.first_name+\" says...\";this.fireEvent(\"titleMessageDelete\",msg);},onHide:function(){if($defined(this.chatContent)){this.scrollY=this.chatContent.getScroll().y;}},focus:function(){this.chatInput.focus.delay(500,this.chatInput);},clearInput:function(){this.chatInput.value=\"\";},chatInputKeyUp:function(e){if(e.key==\"enter\"){var msg=e.target.value.trim();if(msg==\"\"){return;}this.fireEvent(\"sendIM\",this.user,msg);this.resetTypingSent();this.clearInput();this.focus();}else{this.sendTyping();}DomUtility.textareaAutoSize(e.target,16);},insertChatItem:function(el){this.hideTyping();el.inject(this.chatContent);this.scroll.toBottom();if(!this.isOn){var msg=this.user.first_name+\" says...\";this.fireEvent(\"titleMessageAdd\",msg);}},showTyping:function(){if($defined(this.typingHeading)){return;}this.typingHeading=ItemUtility.createChatTypingHeading(this.user);this.typingHeading.inject(this.chatContent);this.scroll.toBottom();this.hideTyping.delay(9000,this);},hideTyping:function(){if($defined(this.typingHeading)){this.typingHeading.destroy();this.typingHeading=null;}},sendTyping:function(){if(this.typingSent||!this.user.online){return;}this.typingSent=true;this.fireEvent(\"sendTyping\",this.user);this.resetTypingSent.delay(6000,this);},resetTypingSent:function(){this.typingSent=false;}});var Invite=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"searchUserShow\",\"searchEmailShow\",\"inviteUserShow\"],userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){},userLoggedOut:function(){},searchUserShow:function(){if($defined(this.searchUserPopup)){this.searchUserPopup._select();return;}this.createSearchUserPopup();},closeSearchUserPopup:function(){if($defined(this.searchUserPopup)){this.searchUserPopup.close();}},createSearchUserPopup:function(){this.searchUserPopup=new Popup({size:{x:350,y:110},resizable:false,dockable:false,className:\"userSearch\",onClose:this.destroySearchUserPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"search\"},displayName:\"Search for Users on Pip.io\",closable:true});var content=new UserSearchPopupContent({});this.searchUserPopup.addContent(\"login\",nav,content);},destroySearchUserPopup:function(){this.searchUserPopup=null;},searchEmailShow:function(){if($defined(this.searchEmailPopup)){this.searchEmailPopup._select();return;}this.createSearchEmailPopup();},closeSearchEmailPopup:function(){if($defined(this.searchEmailPopup)){this.searchEmailPopup.close();}},createSearchEmailPopup:function(){this.searchEmailPopup=new Popup({size:{x:350,y:140},resizable:false,dockable:false,className:\"userSearch\",onClose:this.destroySearchEmailPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"search\"},displayName:\"Search Contacts for Pip.io Users\",closable:true});var content=new EmailSearchPopupContent({});this.searchEmailPopup.addContent(\"login\",nav,content);},destroySearchEmailPopup:function(){this.searchEmailPopup=null;},inviteUserShow:function(email){if($defined(this.inviteUserPopup)){this.inviteUserPopup._select();return;}this.createInviteUserPopup(email);},closeInviteUserPopup:function(){if($defined(this.inviteUserPopup)){this.inviteUserPopup.close();}},createInviteUserPopup:function(email){this.inviteUserPopup=new Popup({size:{x:350,y:160},resizable:false,dockable:false,className:\"userSearch\",onClose:this.destroyInviteUserPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"users\"},displayName:\"Invite Friend to Join Pip.io\",closable:true});var content=new UserInvitePopupContent({email:email});this.inviteUserPopup.addContent(\"login\",nav,content);},destroyInviteUserPopup:function(){this.inviteUserPopup=null;}});var EmailSearchPopupContent=new Class({Extends:PopupContent,strings:{emailLabel:\"Email:\",passwordLabel:\"Password:\",userSearchMessage:\"Search your email contacts for Pip.io users\"},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":this.strings.userSearchMessage}).inject(this.content);this.emailInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\"});this.emailInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section email\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.emailLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.emailInput)).inject(this.content);this.passwordInput=new Element(\"input\",{\"type\":\"password\",\"maxlength\":\"50\"});this.passwordInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section email\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.passwordLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.passwordInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Search\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.search.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.passwordInput.value.trim()!=\"\"&&this.emailInput.value.trim()!=\"\"){this.search();}}},search:function(){var email_address=this.emailInput.value.trim();var password=this.passwordInput.value.trim();var params={email_address:email_address,password:password};this.call(\"contacts\",\"search_email\",params,this.searchSuccess.bind(this),this.searchFail.bind(this));this.actionButton.showProgress();},searchSuccess:function(data){this.actionButton.hideProgress();if(!$defined(data.users)&&!$defined(data.contacts)){return;}if(data.users.length==0&&data.contacts.length==0){var name=\"search_user\";var title=\"No Results\";var message=\"Your search returned no results\";this.fireEvent(\"showAlert\",name,title,message);}else{this.showResultsPopup(data.users,data.contacts);}},searchFail:function(status){this.actionButton.hideProgress();var name=\"search_user\";var title=\"Error\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);},showResultsPopup:function(users,contacts){if($defined(this.resultsPopup)){this.resultsPopup.close();}this.createResultsPopup(users,contacts);},closeResultsPopup:function(){if($defined(this.resultsPopup)){this.resultsPopup.close();}},createResultsPopup:function(users,contacts){this.resultsPopup=new Popup({size:{x:350,y:400},resizable:false,dockable:false,className:\"userSearch\",onClose:this.destroyResultsPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"search\"},displayName:\"Search Results\",closable:true});var content=new UserSearchResultPopupContent({users:users,contacts:contacts});this.resultsPopup.addContent(\"results\",nav,content);},destroyResultsPopup:function(){this.resultsPopup=null;},onShow:function(){this.focus();},focus:function(){this.emailInput.focus.delay(500,this.emailInput);},onClose:function(){this.closeResultsPopup();}});var UserInvitePopupContent=new Class({Extends:PopupContent,strings:{emailLabel:\"Email:\",messageLabel:\"Message:\",defaultMessage:\"Connect with me on Pip.io!\"},onBeforeInit:function(options){this.email=options.email;return options;},onInit:function(){this.emailInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\",\"value\":this.email});new Element(\"div\",{\"class\":\"input_section email\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.emailLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.emailInput)).inject(this.content);this.messageInput=new Element(\"textarea\",{\"value\":TextUtility.unescape(this.strings.defaultMessage)});new Element(\"div\",{\"class\":\"input_section email message\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.messageLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.messageInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Send Invite\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.sendInvite.bind(this));this.message=new Element(\"div\",{\"class\":\"message success\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},sendInvite:function(){var email=this.emailInput.value.trim();var message=this.messageInput.value.trim();if(email==\"\"){var name=\"invite_user\";var title=\"Error\";var message=\"Please enter an email address\";this.fireEvent(\"showAlert\",name,title,message);return;}var params={email:email,message:message};this.call(\"contacts\",\"invite_create\",params,this.sendInviteSuccess.bind(this),this.sendInviteFail.bind(this));this.actionButton.showProgress();this.message.empty();},sendInviteSuccess:function(){this.actionButton.hideProgress();this.emailInput.value=\"\";this.message.set(\"text\",\"Invite sent\");},sendInviteFail:function(status){this.actionButton.hideProgress();var name=\"invite_user\";var title=\"Error\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);}});var UserSearchPopupContent=new Class({Extends:PopupContent,strings:{userSearchMessage:\"You can enter a name or email to search\",errorMessage:\"There was an error creating this group\"},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":this.strings.userSearchMessage}).inject(this.content);this.searchInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\"});this.searchInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.searchInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Search\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.search.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.searchInput.value.trim()!=\"\"){this.search();}}},search:function(){var query=this.searchInput.value.trim();var params={query:query};this.call(\"contacts\",\"search_user\",params,this.searchSuccess.bind(this),this.searchFail.bind(this));this.actionButton.showProgress();},searchSuccess:function(data){this.actionButton.hideProgress();if(!$defined(data.users)&&!$defined(data.contacts)){return;}if(data.users.length==0&&data.contacts.length==0){var name=\"search_user\";var title=\"No Results\";var message=\"Your search returned no results\";this.fireEvent(\"showAlert\",name,title,message);}else{this.showResultsPopup(data.users,data.contacts);}},searchFail:function(status){this.actionButton.hideProgress();var name=\"search_user\";var title=\"Error\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);},showResultsPopup:function(users,contacts){if($defined(this.resultsPopup)){this.resultsPopup.close();}this.createResultsPopup(users,contacts);},closeResultsPopup:function(){if($defined(this.resultsPopup)){this.resultsPopup.close();}},createResultsPopup:function(users,contacts){this.resultsPopup=new Popup({size:{x:350,y:400},resizable:false,dockable:false,className:\"userSearch\",onClose:this.destroyResultsPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"search\"},displayName:\"Search Results\",closable:true});var content=new UserSearchResultPopupContent({users:users,contacts:contacts});this.resultsPopup.addContent(\"results\",nav,content);},destroyResultsPopup:function(){this.resultsPopup=null;},onShow:function(){this.focus();},focus:function(){this.searchInput.focus.delay(500,this.searchInput);},onClose:function(){this.closeResultsPopup();}});var UserSearchResultPopupContent=new Class({Extends:PopupContent,strings:{searchResultMessage:\"Search results\"},onBeforeInit:function(options){this.users=options.users;this.contacts=options.contacts;return options;},onInit:function(){this.list=new Element(\"div\",{\"class\":\"itemList\"}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.closeButton)).inject(this.content);if(this.users.length>0){this.insertUsers();this.insertSeperator();}this.insertContacts();},insertContacts:function(){$H(this.contacts).each(function(name,email){this.insertContact(name,email);},this);},insertContact:function(name,email){var el=UserSearchUtility.createEmailItem(name,email);var button=new ButtonSmall({displayName:\"Send Invite\",className:\"dark\",action:\"check\"});$(button).inject(el);$(button).addEvent(\"click\",this.fireEvent.bind(this,[\"inviteUserShow\",email]));el.inject(this.list);},insertUsers:function(){this.users.each(function(user){user=UserUtility.processUser(user);this.insertUser(user);},this);},insertUser:function(user){var el=UserSearchUtility.createUserItem(user);if(!this.hasContact(user.username)){var button=new ButtonSmall({displayName:\"Add Contact\",className:\"dark\",action:\"check\"});$(button).inject(el);$(button).addEvent(\"click\",this.contactRequest.bindWithEvent(this,[user.username,el]));}else{el.addClass(\"connected\");}el.addEvent(\"click\",this.fireEvent.bind(this,[\"showUser\",user]));el.inject(this.list);},insertSeperator:function(){new Element(\"div\",{\"class\":\"listItem seperator\"}).inject(this.list);},contactRequest:function(e,username,el){e.stopPropagation();this.fireEvent(\"connectionRequestCreate\",username);el.addClass(\"invited\");}});var UserSearchUtility={createUserItem:function(user){var el=new Element(\"div\",{\"class\":\"listItem user\"});ItemUtility.createProfilePic(user,32).inject(el);var name=new Element(\"div\",{\"class\":\"listText text12 light\",\"text\":TextUtility.cleanText(user.fullname+\" (\"+user.username+\")\")}).inject(el);if($defined(user.about)&&$defined(user.about.bio)){new Element(\"div\",{\"class\":\"about_text text11 light3\",\"text\":TextUtility.cleanText(user.about.bio)}).inject(el);}new Element(\"div\",{\"class\":\"invited_text text11 success\",\"text\":\"Request Sent\"}).inject(el);new Element(\"div\",{\"class\":\"connected_text text11 success\",\"text\":\"Connected\"}).inject(el);return el;},createEmailItem:function(name,email){var el=new Element(\"div\",{\"class\":\"listItem\"});var icon=new Icon20({iconName:\"users\"});$(icon).inject(el);new Element(\"div\",{\"class\":\"listText text12 light\",\"text\":TextUtility.cleanText(email)}).inject(el);var button=new ButtonSmall({displayName:\"Invite\",className:\"dark\",action:\"check\"});$(button).inject(el);new Element(\"div\",{\"class\":\"invited_text text11 success\",\"text\":\"Invited\"}).inject(el);return el;}};var Location=new Class({Extends:Base,EventHandlers:[\"showLocationEditPopup\",\"showUsersMapPopup\"],init:function(){},reset:function(){},userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){},userLoggedOut:function(){this.closeLocationEditPopup();},showLocationEditPopup:function(){this.closeLocationEditPopup();this.createLocationEditPopup();},closeLocationEditPopup:function(){if($defined(this.locationEditPopup)){this.locationEditPopup.close();}},createLocationEditPopup:function(){this.locationEditPopup=new Popup({size:{x:350,y:110},resizable:false,dockable:false,closable:true,className:\"locationSearch\",onClose:(function(){this.locationEditPopup=null;}).bind(this)});var nav=new Nav({iconOptions:{iconName:\"global\"},displayName:\"Edit Your Location\",closable:true});var content=new UserLocationEditPopupContent({});content.resizePopup=this.locationEditPopup.resizePopup.bind(this.locationEditPopup);content.reCenter=this.locationEditPopup.reCenter.bind(this.locationEditPopup);this.locationEditPopup.addContent(\"edit_location\",nav,content);},showUsersMapPopup:function(user){this.closeUsersMapPopup();this.createUsersMapPopup(user);},closeUsersMapPopup:function(){if($defined(this.usersMapPopup)){this.usersMapPopup.close();}},createUsersMapPopup:function(user){this.usersMapPopup=new Popup({size:{x:550,y:350},resizable:false,dockable:true,closable:true,className:\"usersMap\"});var nav=new Nav({iconOptions:{iconName:\"location\"},displayName:\"Global Map\",closable:true});var content=new UsersMapPopupContent({user:user,locations:this.getLocations()});this.usersMapPopup.addContent(\"users_maps\",nav,content);}});var GlobalMapMenuSection=new Class({Extends:Base,EventHandlers:[],init:function(options){this.location=options.location;this.createMap();},createMap:function(){this.wrapper=new Element(\"div\");this.updateMap();},updateMap:function(){this.wrapper.empty();if($defined(this.location)){this.mapWrapper=new Element(\"div\",{\"class\":\"gmap_content\"});this.expandButton=new Element(\"div\",{\"class\":\"button_nav show\"}).adopt(new Element(\"div\",{\"class\":\"action dock\"}));var map=new Element(\"div\",{\"class\":\"map_section\"}).adopt(new Element(\"div\",{\"class\":\"gmap\"}).adopt(new Element(\"div\",{\"class\":\"gmap_border\"}),this.mapWrapper));this.gmap=new GMap2(this.mapWrapper,{size:new GSize(156,156)});this.gmap.setCenter(new GLatLng(this.location.lat,this.location.lon),11);map.inject(this.wrapper);}this.updateLabel();},updateLabel:function(){if($defined(this.label)){this.label.destroy();}if($defined(this.location)){var locationLabel=DataUtility.getGeoLabel(this.location);var locationStr=DataUtility.getGeoLocality(this.location);if(locationLabel){locationStr=locationLabel+\", \"+locationStr;}this.label=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Location: \"}),new Element(\"span\",{\"html\":TextUtility.unescape(locationStr)})).inject(this.wrapper,\"top\");}},toElement:function(){return this.wrapper;}});var UserMapMenuSection=new Class({Extends:Base,EventHandlers:[\"userLocationUpdated\"],init:function(options){this.user=options.user;this.isSelf=this.user.user_id==this.getPrivateUser().user_id;this.location=this.getLocation(this.user.username);this.createMap();},createMap:function(){this.wrapper=new Element(\"div\");this.updateMap();},updateMap:function(){this.wrapper.empty();if($defined(this.location)){this.mapWrapper=new Element(\"div\",{\"class\":\"gmap_content\"});this.expandButton=new Element(\"div\",{\"class\":\"button_nav show\"}).adopt(new Element(\"div\",{\"class\":\"action dock\"}));this.expandButton.addEvent(\"click\",this.fireEvent.bind(this,[\"showUsersMapPopup\",this.user]));var map=new Element(\"div\",{\"class\":\"map_section\"}).adopt(new Element(\"div\",{\"class\":\"gmap\"}).adopt(new Element(\"div\",{\"class\":\"gmap_border\"}),this.mapWrapper),this.expandButton);this.gmap=new GMap2(this.mapWrapper,{size:new GSize(156,156)});this.gmap.setCenter(new GLatLng(this.location.lat,this.location.lon),11);this.profilePic=ItemUtility.createProfilePic(this.user,60);this.marker=new Element(\"div\",{\"class\":\"map_marker\"}).adopt(new Element(\"div\",{\"class\":\"profile_pic_wrapper\"}).adopt(this.profilePic),new Element(\"div\",{\"class\":\"point_down\"}),new Element(\"div\",{\"class\":\"spot\"})).inject(map);map.inject(this.wrapper);}else{ItemUtility.createProfilePic(this.user,100).inject(this.wrapper);}this.updateLabel();},userLocationUpdated:function(username,location,location_enabled){if(username!=this.user.username){return;}this.user.location_enabled=location_enabled;this.location=$defined(location)?location:null;this.updateMap();},updateLabel:function(){if($defined(this.label)){this.label.destroy();}if($defined(this.location)){var locationLabel=DataUtility.getGeoLabel(this.location);var locationStr=DataUtility.getGeoLocality(this.location);if(locationLabel){locationStr=locationLabel+\", \"+locationStr;}this.label=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Location: \"}),new Element(\"span\",{\"html\":TextUtility.unescape(locationStr)})).inject(this.wrapper,\"top\");}},toElement:function(){return this.wrapper;}});var LocationSearchResultPopupContent=new Class({Extends:PopupContent,strings:{searchResultMessage:\"Search results\"},onBeforeInit:function(options){this.locations=options.locations;this.locationSetFunc=options.locationSetFunc;return options;},onInit:function(){this.list=new Element(\"div\",{\"class\":\"itemList\"}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.closeButton)).inject(this.content);this.insertLocations();},insertLocations:function(){this.locations.each(function(location){this.insertLocation(location);},this);},insertLocation:function(location){var el=LocationSearchUtility.createLocationItem(location);var button=new ButtonSmall({displayName:\"Set Location\",className:\"dark\",action:\"check\"});$(button).inject(el);$(button).addEvent(\"click\",this.setLocation.bind(this,location));el.inject(this.list);},setLocation:function(location){this.locationSetFunc(location);this.closeContent();}});var UserLocationEditPopupContent=new Class({Extends:PopupContent,strings:{locationSearchMessage:\"Enter any address, city, or zip code\",locationLabelLabel:\"Location Name:\"},onInit:function(){this.geocoder=new GClientGeocoder();this.searchTitle=new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":this.strings.locationSearchMessage}).inject(this.content);this.searchInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\"});this.searchInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));this.searchInputSection=new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.searchInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Search\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.search.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.searchInput.value.trim()!=\"\"){this.search();}}},search:function(){var query=this.searchInput.value.trim();this.geocoder.getLocations(query,this.searchSuccess.bind(this));this.actionButton.showProgress();},searchSuccess:function(data){this.actionButton.hideProgress();if(data.Status.code==200){this.places=[];data.Placemark.each(function(place){this.places.push(this.parseLocation(place));},this);this.createResultsPopup();}else{var name=\"search_location\";var title=\"No Results\";var message=\"Your search returned no results\";this.fireEvent(\"showAlert\",name,title,message);}},parseLocation:function(location){var place={};place.name=location.address;place.country_code=location.AddressDetails.Country.CountryNameCode;place.country=location.AddressDetails.Country.CountryName;place.region=$defined(location.AddressDetails.Country.AdministrativeArea)?location.AddressDetails.Country.AdministrativeArea.AdministrativeAreaName:null;if($defined(location.AddressDetails.Country.AdministrativeArea)&&$defined(location.AddressDetails.Country.AdministrativeArea.SubAdministrativeArea)&&$defined(location.AddressDetails.Country.AdministrativeArea.SubAdministrativeArea.Locality)){place.city=location.AddressDetails.Country.AdministrativeArea.SubAdministrativeArea.Locality.LocalityName;}else{if($defined(location.AddressDetails.Country.AddressLine)&&$defined(location.AddressDetails.Country.AddressLine[0])){place.city=location.AddressDetails.Country.AddressLine[0];}}if($defined(location.AddressDetails.Country.AdministrativeArea)&&$defined(location.AddressDetails.Country.AdministrativeArea.SubAdministrativeArea)&&$defined(location.AddressDetails.Country.AdministrativeArea.SubAdministrativeArea.Locality)&&$defined(location.AddressDetails.Country.AdministrativeArea.SubAdministrativeArea.Locality.Thoroughfare)){place.address=location.AddressDetails.Country.AdministrativeArea.SubAdministrativeArea.Locality.Thoroughfare.ThoroughfareName;}place.lat=location.Point.coordinates[1];place.lon=location.Point.coordinates[0];place.geohash=GeoHash.encodeGeoHash(place.lat,place.lon);return place;},locationSelect:function(location){DomUtility.hide(this.searchTitle);DomUtility.hide(this.searchInputSection);DomUtility.hide(this.actions);this.searchTitle=new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":TextUtility.unescape(location.name)}).inject(this.content);this.labelInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\"});if($defined(location.address)){this.labelInput.value=location.address;}new Element(\"div\",{\"class\":\"input_section label\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.locationLabelLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.labelInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Save Location\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.locationSave.bind(this,[location]));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},locationSave:function(location){var label=this.labelInput.value.trim();var params={\"label\":label,\"country_code\":location.country_code,\"country\":location.country,\"city\":$defined(location.city)?location.city:\"\",\"region\":$defined(location.region)?location.region:\"\",\"lat\":location.lat,\"lon\":location.lon,\"geohash\":location.geohash};this.call(\"pipio\",\"user_location_save\",params,this.locationSaveSuccess.bind(this),this.locationSaveFail.bind(this));this.actionButton.showProgress();},locationSaveSuccess:function(data){this.closeContent();},locationSaveFail:function(status){this.actionButton.hideProgress();},searchFail:function(status){this.actionButton.hideProgress();var name=\"search_user\";var title=\"Error\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);},showResultsPopup:function(users,contacts){if($defined(this.resultsPopup)){this.resultsPopup.close();}this.createResultsPopup(users,contacts);},closeResultsPopup:function(){if($defined(this.resultsPopup)){this.resultsPopup.close();}},createResultsPopup:function(){this.resultsPopup=new Popup({size:{x:350,y:400},resizable:false,dockable:false,className:\"locationSearch\",onClose:this.destroyResultsPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"global\"},displayName:\"Location Search Results\",closable:true});var content=new LocationSearchResultPopupContent({locations:this.places,locationSetFunc:this.locationSelect.bind(this)});this.resultsPopup.addContent(\"results\",nav,content);},destroyResultsPopup:function(){this.resultsPopup=null;},onShow:function(){this.focus();},focus:function(){this.searchInput.focus.delay(500,this.searchInput);},onClose:function(){this.closeResultsPopup();}});var UsersMapPopupContent=new Class({Extends:PopupContent,EventHandlers:[\"userLocationUpdated\"],onBeforeInit:function(options){this.user=options.user;this.locations=options.locations;this.users=$H();return options;},onInit:function(){this.createMap();this.showUser(this.user.username);this.locations.each(function(location,username){this.showUser(username);},this);},createMap:function(){this.mapWrapper=new Element(\"div\",{\"class\":\"gmap_content\"});var map=new Element(\"div\",{\"class\":\"map_section\"}).adopt(new Element(\"div\",{\"class\":\"gmap\"}).adopt(new Element(\"div\",{\"class\":\"gmap_border\"}),this.mapWrapper));this.gmap=new GMap2(this.mapWrapper,{size:new GSize(526,326)});var location=this.getLocation(this.user.username);this.gmap.setCenter(new GLatLng(location.lat,location.lon),11);this.gmap.enableScrollWheelZoom();this.gmap.enableContinuousZoom();this.gmap.addControl(new GLargeMapControl());this.gmap.addControl(new GMapTypeControl());var mt=this.gmap.getMapTypes();for(var i=0;i<mt.length;i++){mt[i].getMinimumResolution=$lambda(3);mt[i].getMaximumResolution=$lambda(14);}map.inject(this.content);},userLocationUpdated:function(username,location,location_enabled){if($defined(location)){this.showUser(username);}else{this.removeUser(username);}},showUser:function(username){var user=this.getUser(username);var location=this.getLocation(username);if(!$defined(user)||!$defined(location)){return;}if(this.users.has(username)){this.gmap.removeOverlay(this.users.get(username));}var loc=new GLatLng(location.lat,location.lon);var marker=new MarkerLight(loc,{size:26,user:user});this.gmap.addOverlay(marker);this.users.set(username,marker);},removeUser:function(username){if(!this.users.has(username)){return;}this.gmap.removeOverlay(this.users.get(username));}});var LocationSearchUtility={createLocationItem:function(location){var el=new Element(\"div\",{\"class\":\"listItem\"});var icon=new Icon20({iconName:\"location\"});$(icon).inject(el);var name=new Element(\"div\",{\"class\":\"listText text12 light\",\"text\":TextUtility.cleanText(location.name)}).inject(el);return el;}};var Login=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"loginShow\",\"signupShow\",\"logoutShow\",\"passwordResetRequestShow\"],userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){this.closeLoginPopup();this.closePasswordResetRequestPopup();this.closePasswordResetPopup();this.closeSignupPopup();},userLoggedOut:function(){if(!this.checkCookie()){this.loginShow();}},checkCookie:function(){var destination=DataUtility.getCookie(\"destination\");var token=DataUtility.getCookie(\"password_reset_token\");var email=DataUtility.getCookie(\"password_reset_email\");if(!$defined(destination)){return false;}if(destination==\"password_reset\"&&$defined(token)&&$defined(email)){this.passwordResetShow(token,email);return true;}else{if(destination==\"signup\"){var access_key=DataUtility.getCookie(\"invite_access_key\");if(!$defined(access_key)){access_key=\"\";}this.signupShow(access_key);return true;}else{if(destination==\"email_block\"){var token=DataUtility.getCookie(\"email_block_token\");var email=DataUtility.getCookie(\"email_block_email\");this.emailBlockShow(token,email);return true;}}}return false;},loginShow:function(){if($defined(this.loginPopup)){this.loginPopup._select();return;}this.createLoginPopup();},closeLoginPopup:function(){if($defined(this.loginPopup)){this.loginPopup.close();}},createLoginPopup:function(){this.loginPopup=new Popup({size:{x:350,y:226},resizable:false,dockable:false,className:\"login\",onClose:this.destroyLoginPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"power\"},displayName:\"Log In to Pip.io\",closable:true});var content=new LoginPopupContent({});this.loginPopup.addContent(\"login\",nav,content);},destroyLoginPopup:function(){this.loginPopup=null;},logoutShow:function(){if($defined(this.logoutPopup)){this.logoutPopup._select();return;}this.createLogoutPopup();},closeLogoutPopup:function(){if($defined(this.logoutPopup)){this.logoutPopup.close();}},createLogoutPopup:function(){this.logoutPopup=new Popup({size:{x:350,y:70},resizable:false,dockable:false,onClose:this.destroyLogoutPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"power\"},displayName:\"Log Out \"+TextUtility.unescapeQuotes(this.getPrivateUser().fullname),closable:true});var content=new LogoutPopupContent({});this.logoutPopup.addContent(\"logout\",nav,content);},destroyLogoutPopup:function(){this.logoutPopup=null;},passwordResetRequestShow:function(){if($defined(this.passwordResetRequestPopup)){this.passwordResetRequestPopup.close();}this.createPasswordResetRequestPopup();},closePasswordResetRequestPopup:function(){if($defined(this.passwordResetRequestPopup)){this.passwordResetRequestPopup.close();}},createPasswordResetRequestPopup:function(){this.passwordResetRequestPopup=new Popup({size:{x:350,y:112},resizable:false,dockable:false,className:\"login\",onClose:this.destroyPasswordResetRequestPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"pipio\"},displayName:\"Password Reset\",closable:true});var content=new PasswordResetRequestPopupContent({});this.passwordResetRequestPopup.addContent(\"login\",nav,content);},destroyPasswordResetRequestPopup:function(){this.passwordResetRequestPopup=null;},passwordResetShow:function(token,email){if($defined(this.passwordResetPopup)){this.passwordResetPopup.close();}this.createPasswordResetPopup(token,email);},closePasswordResetPopup:function(){if($defined(this.passwordResetPopup)){this.passwordResetPopup.close();}},createPasswordResetPopup:function(token,email){this.passwordResetPopup=new Popup({size:{x:350,y:142},resizable:false,dockable:false,className:\"login\",onClose:this.destroyPasswordResetPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"pipio\"},displayName:\"Password Reset\",closable:true});var content=new PasswordResetPopupContent({token:token,email:email});this.passwordResetPopup.addContent(\"login\",nav,content);},destroyPasswordResetPopup:function(){this.passwordResetPopup=null;},signupShow:function(access_key){if($defined(this.signupPopup)){this.signupPopup._select();return;}this.createSignupPopup(access_key);},closeSignupPopup:function(){if($defined(this.signupPopup)){this.signupPopup.close();}},createSignupPopup:function(access_key){this.signupPopup=new Popup({size:{x:350,y:366},resizable:false,dockable:false,className:\"login\",onClose:this.destroySignupPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"pipio\"},displayName:\"Sign Up for Pip.io\",closable:true});if(!$defined(access_key)){access_key=\"\";}var content=new SignupPopupContent({access_key:access_key});this.signupPopup.addContent(\"signup\",nav,content);},destroySignupPopup:function(){this.signupPopup=null;},emailBlockShow:function(token,email){if($defined(this.emailBlockPopup)){this.emailBlockPopup.close();}this.createEmailBlockPopup(token,email);},closeEmailBlockPopup:function(){if($defined(this.signupPopup)){this.emailBlockPopup.close();}},createEmailBlockPopup:function(token,email){this.emailBlockPopup=new Popup({size:{x:350,y:110},resizable:false,dockable:false,className:\"login\",onClose:this.destroyEmailBlockPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"pipio\"},displayName:\"Email Settings\",closable:true});var content=new EmailBlockPopupContent({token:token,email:email});this.emailBlockPopup.addContent(\"emailblock\",nav,content);},destroyEmailBlockPopup:function(){this.emailBlockPopup=null;}});var EmailBlockPopupContent=new Class({Extends:PopupContent,strings:{emailBlockMessage:\"Stop all Pip.io emails for:\"},onBeforeInit:function(options){this.token=options.token;this.email=options.email;return options;},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":TextUtility.unescape(this.strings.emailBlockMessage)}).inject(this.content);new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":TextUtility.unescape(this.email)}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Confirm\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.blockEmail.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},blockEmail:function(){var params={\"token\":this.token,\"email\":this.email};this.call(\"pipio\",\"email_block\",params,this.resetRequestSuccess.bind(this),this.resetRequestFail.bind(this));this.actionButton.showProgress();},resetRequestSuccess:function(data){var name=\"email_block\";var title=\"Email Block Successful\";var message=\"You will no longer receive emails from Pip.io\";this.fireEvent(\"showAlert\",name,title,message);this.actionButton.hideProgress();this.closeContent();},resetRequestFail:function(){var name=\"email_block\";var title=\"Email Block Failed\";var message=\"There was an error processing your request.  Please contact support@pip.io\";this.fireEvent(\"showAlert\",name,title,message);this.actionButton.hideProgress();}});var LoginPopupContent=new Class({Extends:PopupContent,strings:{loginMessage:\"Log in to Pip.io\",signupMessage:\"Don't have an account?   Sign up now!\",usernameLabel:\"Username or email:\",passwordLabel:\"Password:\",rememberMeLabel:\"Remember me:\",errorMessage:\"Incorrect login\",forgotPasswordMessage:\"Forgot your password?\"},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":this.strings.loginMessage}).inject(this.content);var signupMsg=new Element(\"div\",{\"class\":\"text_section centered short text11 light3 clickable\",\"text\":this.strings.signupMessage}).inject(this.content);signupMsg.addEvent(\"click\",this.fireEvent.bind(this,[\"signupShow\"]));this.usernameInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"32\"});this.usernameInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.usernameLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.usernameInput)).inject(this.content);this.passwordInput=new Element(\"input\",{\"type\":\"password\",\"maxlength\":\"32\"});this.passwordInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.passwordLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.passwordInput)).inject(this.content);this.rememberToggle=new Toggle(true);new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.rememberMeLabel}),$(this.rememberToggle)).inject(this.content);var forgotPasswordMsg=new Element(\"div\",{\"class\":\"text_section centered short text11 light3 clickable\",\"text\":this.strings.forgotPasswordMessage}).inject(this.content);forgotPasswordMsg.addEvent(\"click\",this.fireEvent.bind(this,[\"passwordResetRequestShow\"]));this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Log In\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.login.bind(this));this.message=new Element(\"div\",{\"class\":\"message error\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},login:function(){var username=this.usernameInput.value.trim();var password=this.passwordInput.value.trim();var remember_me=this.rememberToggle.toInt();var params={\"username\":username,\"password\":password,\"remember_me\":remember_me};this.call(\"pipio\",\"user_login\",params,this.loginSuccess.bind(this),this.loginFail.bind(this));this.actionButton.showProgress();this.message.empty();},loginSuccess:function(data){this.fireEvent(\"userDataInit\",data);this.actionButton.hideProgress();this.closeContent();},loginFail:function(){this.actionButton.hideProgress();this.message.set(\"text\",this.strings.errorMessage);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.usernameInput.value.trim()!=\"\"&&this.passwordInput.value.trim()!=\"\"){this.login();}}},onShow:function(){this.focus();},focus:function(){this.usernameInput.focus.delay(500,this.usernameInput);}});var LogoutPopupContent=new Class({Extends:PopupContent,strings:{logoutMessage:\"Are you sure you want to log out?\"},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":this.strings.logoutMessage}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Log Out\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.logout.bind(this));this.message=new Element(\"div\",{\"class\":\"message\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},logout:function(){this.call(\"pipio\",\"user_logout\",null,this.logoutSuccess.bind(this),this.logoutFail.bind(this));this.actionButton.showProgress();},logoutSuccess:function(data){this.fireEvent(\"userDataInit\",data);this.actionButton.hideProgress();this.closeContent();},logoutFail:function(){this.actionButton.hideProgress();this.closeContent();}});var PasswordResetPopupContent=new Class({Extends:PopupContent,strings:{passwordResetMessage:\"Reset Pip.io password for {0}\",passwordLabel:\"New password:\",verifyPasswordLabel:\"Verify password\"},onBeforeInit:function(options){this.token=options.token;this.email=options.email;return options;},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":String.format(this.strings.passwordResetMessage,TextUtility.unescape(this.email))}).inject(this.content);this.passwordInput=new Element(\"input\",{\"type\":\"password\",\"maxlength\":\"32\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.passwordLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.passwordInput)).inject(this.content);this.verifyPasswordInput=new Element(\"input\",{\"type\":\"password\",\"maxlength\":\"32\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.verifyPasswordLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.verifyPasswordInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Set New Password\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.resetRequest.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},resetRequest:function(){var new_password=this.passwordInput.value.trim();var verify_password=this.verifyPasswordInput.value.trim();if(new_password==\"\"||verify_password==\"\"){var name=\"reset_request\";var title=\"Password Reset Request Failed\";var message=\"Please enter a new password\";this.fireEvent(\"showAlert\",name,title,message);return;}if(new_password!=verify_password){var name=\"reset_request\";var title=\"Password Reset Request Failed\";var message=\"The passwords you entered do not match\";this.fireEvent(\"showAlert\",name,title,message);return;}var params={\"token\":this.token,\"email\":this.email,\"new_password\":new_password,\"verify_password\":verify_password};this.call(\"pipio\",\"user_password_reset\",params,this.resetRequestSuccess.bind(this),this.resetRequestFail.bind(this));this.actionButton.showProgress();},resetRequestSuccess:function(data){var name=\"reset_request\";var title=\"Password Reset Successful\";var message=\"Your Pip.io password has been successfully reset\";this.fireEvent(\"loginShow\");this.fireEvent(\"showAlert\",name,title,message);this.actionButton.hideProgress();this.closeContent();},resetRequestFail:function(){var name=\"reset_request\";var title=\"Password Reset Failed\";var message=\"There was an error resetting your password.  Please contact support@pip.io\";this.fireEvent(\"showAlert\",name,title,message);this.actionButton.hideProgress();},onShow:function(){this.focus();},focus:function(){this.passwordInput.focus.delay(500,this.passwordInput);}});var PasswordResetRequestPopupContent=new Class({Extends:PopupContent,strings:{passwordResetMessage:\"Forgot your password to Pip.io?\",usernameLabel:\"Username or email:\",forgotPasswordMessage:\"Forgot your password?\"},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":this.strings.passwordResetMessage}).inject(this.content);this.usernameInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"32\"});this.usernameInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.usernameLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.usernameInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Request Reset\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.resetRequest.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},resetRequest:function(){var username=this.usernameInput.value.trim();if(username==\"\"){var name=\"reset_request\";var title=\"Password Reset Request Failed\";var message=\"Please enter your username or email\";this.fireEvent(\"showAlert\",name,title,message);return;}var params={\"username\":username};this.call(\"pipio\",\"user_password_resetrequest\",params,this.resetRequestSuccess.bind(this),this.resetRequestFail.bind(this));this.actionButton.showProgress();},resetRequestSuccess:function(data){var name=\"reset_request\";var title=\"Password Reset Request Sent\";var message=\"Please check your email for directions to reset your password\";this.fireEvent(\"showAlert\",name,title,message);this.actionButton.hideProgress();this.closeContent();},resetRequestFail:function(){var name=\"reset_request\";var title=\"Password Reset Request Failed\";var message=\"We could not locate your account, please make sure the username or email you entered is correct\";this.fireEvent(\"showAlert\",name,title,message);this.actionButton.hideProgress();},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.usernameInput.value.trim()!=\"\"){this.resetRequest();}}},onShow:function(){this.focus();},focus:function(){this.usernameInput.focus.delay(500,this.usernameInput);}});var SignupPopupContent=new Class({Extends:PopupContent,strings:{signUpMessage:\"Sign up for Pip.io\",signUpDetailMessage:\"It only takes a few seconds to create an account!\",usernameLabel:\"Username:\",passwordLabel:\"Password:\",firstNameLabel:\"First Name:\",lastNameLabel:\"Last Name:\",emailLabel:\"Email:\",dobLabel:\"Date of Birth:\",inviteCodeLabel:\"Invite Code:\",inviteCodeMessage:\"Leave this field blank if you do not have an invite code\"},onBeforeInit:function(options){this.access_key=options.access_key;return options;},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":this.strings.signUpMessage}).inject(this.content);new Element(\"div\",{\"class\":\"text_section centered light short text11 light3\",\"text\":this.strings.signUpDetailMessage}).inject(this.content);this.firstNameInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.firstNameLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.firstNameInput)).inject(this.content);this.lastNameInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.lastNameLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.lastNameInput)).inject(this.content);this.emailInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"32\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.emailLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.emailInput)).inject(this.content);this.usernameInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"32\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.usernameLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.usernameInput)).inject(this.content);this.passwordInput=new Element(\"input\",{\"type\":\"password\",\"maxlength\":\"32\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.passwordLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.passwordInput)).inject(this.content);this.monthInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"2\",\"value\":\"MM\"});this.dayInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"2\",\"value\":\"DD\"});this.yearInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"4\",\"value\":\"YYYY\"});this.monthInput.addEvent(\"click\",this.clearField.bind(this,[this.monthInput,\"MM\"]));this.dayInput.addEvent(\"click\",this.clearField.bind(this,[this.dayInput,\"DD\"]));this.yearInput.addEvent(\"click\",this.clearField.bind(this,[this.yearInput,\"YYYY\"]));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.dobLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper month\"}).adopt(this.monthInput),new Element(\"div\",{\"class\":\"textarea_wrapper day\"}).adopt(this.dayInput),new Element(\"div\",{\"class\":\"textarea_wrapper year\"}).adopt(this.yearInput)).inject(this.content);this.inviteCodeInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"10\",\"value\":this.access_key});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.inviteCodeLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.inviteCodeInput)).inject(this.content);new Element(\"div\",{\"class\":\"text_section centered light short text11 light3\",\"text\":this.strings.inviteCodeMessage}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Sign Up\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.signup.bind(this));this.message=new Element(\"div\",{\"class\":\"message success\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},clearField:function(el,def){if(el.value==def){el.value=\"\";}},signup:function(){var first_name=this.firstNameInput.value.trim();var last_name=this.lastNameInput.value.trim();var username=this.usernameInput.value.trim();var password=this.passwordInput.value.trim();var email=this.emailInput.value.trim();var dob_month=this.monthInput.value.trim();var dob_day=this.dayInput.value.trim();var dob_year=this.yearInput.value.trim();var access_key=this.inviteCodeInput.value.trim();if(first_name==\"\"||last_name==\"\"){this.signupFail({message:\"Please enter your name\"});return;}if(email==\"\"){this.signupFail({message:\"Please enter your email\"});return;}if(username==\"\"){this.signupFail({message:\"Please enter a username\"});return;}if(password==\"\"){this.signupFail({message:\"Please enter a password\"});return;}if(dob_month!=parseInt(dob_month)||dob_month<1||dob_month>12){this.signupFail({message:\"Please enter a valid month\"});return;}if(dob_day!=parseInt(dob_day)||dob_day<1||dob_day>31){this.signupFail({message:\"Please enter a valid day\"});return;}if(dob_year!=parseInt(dob_year)||dob_year<1900||dob_year>2010){this.signupFail({message:\"Please enter a valid year\"});return;}var params={\"first_name\":first_name,\"last_name\":last_name,\"username\":username,\"password\":password,\"email\":email,\"dob_month\":dob_month,\"dob_day\":dob_day,\"dob_year\":dob_year,\"access_key\":access_key};this.call(\"pipio\",\"user_register\",params,this.signupSuccess.bind(this),this.signupFail.bind(this));this.actionButton.showProgress();this.message.set(\"text\",\"please wait...\");},signupSuccess:function(data){this.fireEvent(\"userDataInit\",data);this.actionButton.hideProgress();this.closeContent();this.message.set(\"success!\");},signupFail:function(status){this.actionButton.hideProgress();var name=\"user_register\";var title=\"Error\";var message=status.message;this.message.empty();this.fireEvent(\"showAlert\",name,title,message);},onShow:function(){this.focus();},focus:function(){this.firstNameInput.focus.delay(500,this.firstNameInput);}});var Notifications=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"notificationAdd\",\"titleMessageAdd\",\"titleMessageDelete\"],init:function(){this.notifications=$H();this.timers=$H();this.messages=[];this.messageTimer=0;this.createNotifications();},titleMessageAdd:function(message){if(this.messages.contains(message)){return;}this.messages.push(message);this.titleMessageCheck();},titleMessageDelete:function(message){if(this.messages.contains(message)){this.messages.erase(message);}this.titleMessageCheck();},titleMessageCheck:function(){if(this.messages.length>0&&this.messageTimer==0){this.messageTimer=this.titleMessageRotate.periodical(2000,this);}else{if(this.messages.length==0&&this.messageTimer!=0){$clear(this.messageTimer);document.title=this.getPageTitle();}}},titleMessageRotate:function(){if(this.messages.length==0){return;}if(!$defined(this.currentTitle)){this.currentTitle=this.getPageTitle();}if(this.getPageTitle()==this.currentTitle){var msg=this.messages.shift();this.messages.push(msg);document.title=msg;this.currentTitle=msg;}else{document.title=this.getPageTitle();this.currentTitle=this.getPageTitle();}},userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){this.notifications=$H();},userLoggedOut:function(){this.closeAll();this.notifications=$H();},closeAll:function(){this.notifications.getKeys().each(function(name){this.close(name);},this);},close:function(name){if(!this.notifications.has(name)){return;}var notif=this.notifications.get(name);DomUtility.fadeOutDestroy($(notif));this.notifications.erase(name);$clear(this.timers.get(name));this.timers.erase(name);delete (notif);this.checkShow();},notificationAdd:function(name,notif){if(this.notifications.has(name)){return;}$(notif).inject(this.menu);DomUtility.fadeIn($(notif),1000);this.notifications.set(name,notif);notif.onClose=this.close.bind(this,name);var timer=this.close.delay(notif.timeout,this,[name]);this.timers.set(name,timer);this.checkShow();},checkShow:function(){if(this.notifications.getLength()>0){DomUtility.show(this.menu);}else{DomUtility.hide(this.menu);}},createNotifications:function(){this.menu=new Element(\"div\",{\"class\":\"menu flattop\"});this.menu.inject(\"notifications\");this.checkShow();}});var Notification=new Class({Extends:Base,init:function(options){if($defined(this.onBeforeInit)){options=this.onBeforeInit(options);}this.iconOptions=options.iconOptions;this.timeout=options.timeout||5000;this.hasActions=options.hasActions||false;this.createNotification();if($defined(this.onInit)){this.onInit();}},createNotification:function(){this.notif=new Element(\"div\",{\"class\":\"notification\"});this.icon=new Icon20(this.iconOptions);$(this.icon).inject(this.notif);this.closeButton=new Element(\"div\",{\"class\":\"button_nav show\"}).adopt(new Element(\"div\",{\"class\":\"action close\"})).inject(this.notif);this.closeButton.addEvent(\"click\",this.closeNotification.bind(this));this.getText().inject(this.notif);if(this.hasActions){this.actions=new Element(\"div\",{\"class\":\"actions\"}).inject(this.notif);}},getText:function(){return new Element(\"div\",{\"class\":\"notification_text text11 light1\"});},closeNotification:function(){if($defined(this.onClose)){this.onClose();}},toElement:function(){return this.notif;}});var Settings=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"showSettings\"],userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){},userLoggedOut:function(){this.closeSettings();},showSettings:function(){this.closeSettings();this.settingsPopup=new Popup({size:{x:350,y:368},resizable:false,dockable:false,className:\"settings\",onClose:this.destroySettings.bind(this)});var nav=new Nav({iconOptions:{iconName:\"settings\"},displayName:\"Pip.io Settings\",closable:true});var content=new PipioSettingsPopupContent();this.settingsPopup.addContent(\"pipio_settings\",nav,content);},closeSettings:function(){if($defined(this.settingsPopup)){this.settingsPopup.close();}},destroySettings:function(){this.settingsPopup=null;}});var EmailChangePopupContent=new Class({Extends:PopupContent,strings:{emailLabel:\"Email:\"},onInit:function(){this.emailInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"200\"});this.emailInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.emailLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.emailInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Update Email\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.changeEmail.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.emailInput.value.trim()!=\"\"){this.changeEmail();}}},changeEmail:function(){var email=this.emailInput.value.trim();var params={email:email};this.call(\"pipio\",\"user_email_change\",params,this.changeEmailSuccess.bind(this),this.changeEmailFail.bind(this));this.actionButton.showProgress();},changeEmailSuccess:function(){this.actionButton.hideProgress();this.closeContent();},changeEmailFail:function(status){this.actionButton.hideProgress();var name=\"email_change\";var title=\"Error Updating Email\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);},onShow:function(){this.focus();},focus:function(){this.emailInput.focus.delay(500,this.emailInput);}});var PasswordChangePopupContent=new Class({Extends:PopupContent,strings:{passwordLabel:\"Current Password:\",newPasswordLabel:\"New Password:\",verifyPasswordLabel:\"Verify Password:\"},onInit:function(){this.passwordInput=new Element(\"input\",{\"type\":\"password\",\"maxlength\":\"50\"});new Element(\"div\",{\"class\":\"input_section passwordChange\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.passwordLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.passwordInput)).inject(this.content);this.newPasswordInput=new Element(\"input\",{\"type\":\"password\",\"maxlength\":\"50\"});new Element(\"div\",{\"class\":\"input_section passwordChange\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.newPasswordLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.newPasswordInput)).inject(this.content);this.verifyPasswordInput=new Element(\"input\",{\"type\":\"password\",\"maxlength\":\"50\"});new Element(\"div\",{\"class\":\"input_section passwordChange\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.verifyPasswordLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.verifyPasswordInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Change Password\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.changePassword.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},changePassword:function(){var password=this.passwordInput.value.trim();var newPassword=this.newPasswordInput.value.trim();var verifyPassword=this.verifyPasswordInput.value.trim();var params={password:password,new_password:newPassword,verify_password:verifyPassword};this.call(\"pipio\",\"user_password_change\",params,this.changePasswordSuccess.bind(this),this.changePasswordFail.bind(this));this.actionButton.showProgress();},changePasswordSuccess:function(){this.actionButton.hideProgress();var name=\"email_change\";var title=\"Password Changed\";var message=\"Your Pip.io password has been updated\";this.fireEvent(\"showAlert\",name,title,message);this.closeContent();},changePasswordFail:function(status){this.actionButton.hideProgress();var name=\"email_change\";var title=\"Error Updating Email\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);},onShow:function(){this.focus();},focus:function(){this.passwordInput.focus.delay(500,this.passwordInput);}});var PipioSettingsPopupContent=new Class({Extends:PopupContent,EventHandlers:[\"emailBlockUpdated\",\"userEmailUpdated\"],strings:{settingsMessage:\"Change your Pip.io settings\",accountSectionLabel:\"Account Settings\",emailSectionLabel:\"Email Settings\",generalEmailLabel:\"Pip.io service updates:\",postReplyEmailLabel:\"Reply notifications:\",targetedPostEmailLabel:\"Targeted post notifications:\",contactRequestEmailLabel:\"Contact request notifications:\",roomInviteEmailLabel:\"Room invite notifications:\"},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":this.strings.settingsMessage}).inject(this.content);new Element(\"div\",{\"class\":\"text_section light\",\"text\":this.strings.accountSectionLabel}).inject(this.content);var emailChangeButton=new ButtonSmall({displayName:\"Update Email\",className:\"dark\",action:\"edit\"});$(emailChangeButton).addEvent(\"click\",this.showEmailChangePopup.bind(this));this.emailLabel=new Element(\"div\",{\"class\":\"label light2\",\"text\":this.getPrivateUser().email});new Element(\"div\",{\"class\":\"input_section\"}).adopt(this.emailLabel,$(emailChangeButton)).inject(this.content);var passwordChangeButton=new ButtonSmall({displayName:\"Change Password\",className:\"dark\",action:\"lock\"});$(passwordChangeButton).addEvent(\"click\",this.showPasswordChangePopup.bind(this));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light2\",\"text\":\"**********\"}),$(passwordChangeButton)).inject(this.content);new Element(\"div\",{\"class\":\"text_section light\",\"text\":this.strings.emailSectionLabel}).inject(this.content);this.generalEmailToggle=new Toggle(true);$(this.generalEmailToggle).addEvent(\"click\",this.updateBlock.bind(this,[18,this.generalEmailToggle]));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light2\",\"text\":this.strings.generalEmailLabel}),$(this.generalEmailToggle)).inject(this.content);this.postReplyEmailToggle=new Toggle(true);$(this.postReplyEmailToggle).addEvent(\"click\",this.updateBlock.bind(this,[9,this.postReplyEmailToggle]));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light2\",\"text\":this.strings.postReplyEmailLabel}),$(this.postReplyEmailToggle)).inject(this.content);this.targetedPostEmailToggle=new Toggle(true);$(this.targetedPostEmailToggle).addEvent(\"click\",this.updateBlock.bind(this,[14,this.targetedPostEmailToggle]));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light2\",\"text\":this.strings.targetedPostEmailLabel}),$(this.targetedPostEmailToggle)).inject(this.content);this.contactRequestEmailToggle=new Toggle(true);$(this.contactRequestEmailToggle).addEvent(\"click\",this.updateBlock.bind(this,[5,this.contactRequestEmailToggle]));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light2\",\"text\":this.strings.contactRequestEmailLabel}),$(this.contactRequestEmailToggle)).inject(this.content);this.roomInviteEmailToggle=new Toggle(true);$(this.roomInviteEmailToggle).addEvent(\"click\",this.updateBlock.bind(this,[11,this.roomInviteEmailToggle]));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light2\",\"text\":this.strings.roomInviteEmailLabel}),$(this.roomInviteEmailToggle)).inject(this.content);this.actionButton=new ButtonMedium({displayName:\"Done\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.closeContent.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton)).inject(this.content);this.loadBlocks();},userEmailUpdated:function(data){if(!$defined(data.email)){return;}this.emailLabel.set(\"text\",data.email);},loadBlocks:function(){this.call(\"pipio\",\"emailblock_load\",null,this.loadBlocksSuccess.bind(this));},loadBlocksSuccess:function(data){if(!$defined(data.blocks)){return;}data.blocks.each(function(block){this.updateBlockToggle(block.email_type,block.blocked);},this);},emailBlockUpdated:function(data){if(!$defined(data.email_type)||!$defined(data.blocked)){return;}this.updateBlockToggle(data.email_type,data.blocked);},updateBlockToggle:function(email_type,blocked){switch(email_type){case 5:this.contactRequestEmailToggle.set(blocked==0);break;case 9:this.postReplyEmailToggle.set(blocked==0);break;case 11:this.roomInviteEmailToggle.set(blocked==0);break;case 14:this.targetedPostEmailToggle.set(blocked==0);break;case 18:this.generalEmailToggle.set(blocked==0);break;}},updateBlock:function(email_type,toggle){var enabled=toggle.toInt();var blocked=(enabled==1)?0:1;var params={email_type:email_type,blocked:blocked};this.call(\"pipio\",\"emailblock_update\",params);},onClose:function(){this.closeEmailChangePopup();},showEmailChangePopup:function(){this.closeEmailChangePopup();this.emailChangePopup=new Popup({size:{x:350,y:74},resizable:false,dockable:false,className:\"settings\",onClose:this.destroyEmailChangePopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"settings\"},displayName:\"Update Your Email\",closable:true});var content=new EmailChangePopupContent();this.emailChangePopup.addContent(\"pipio_settings\",nav,content);},closeEmailChangePopup:function(){if($defined(this.emailChangePopup)){this.emailChangePopup.close();}},destroyEmailChangePopup:function(){this.emailChangePopup=null;},showPasswordChangePopup:function(){this.closePasswordChangePopup();this.passwordChangePopup=new Popup({size:{x:350,y:142},resizable:false,dockable:false,className:\"settings\",onClose:this.destroyPasswordChangePopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"settings\"},displayName:\"Change Your Password\",closable:true});var content=new PasswordChangePopupContent();this.passwordChangePopup.addContent(\"pipio_settings\",nav,content);},closePasswordChangePopup:function(){if($defined(this.passwordChangePopup)){this.passwordChangePopup.close();}},destroyPasswordChangePopup:function(){this.passwordChangePopup=null;}});var ShareBox=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"shareBoxShow\",\"replyShareBoxShow\",\"forwardShareBoxShow\",\"roomShareBoxShow\"],init:function(){this.shareboxes=$H();},userSwitched:function(){if(!this.isLoggedIn()){this.userLoggedOut();}},userLoggedOut:function(){this.shareboxes.each(function(sharebox,key){sharebox.close();this.shareboxes.erase(key);},this);this.shareboxes=$H();},forwardShareBoxShow:function(forward_id,username,forward_body){if($defined(this.sharebox)){this.sharebox.close();}this.createForwardShareBox(forward_id,username,forward_body);},createForwardShareBox:function(forward_id,username,forward_body){this.sharebox=new Popup({size:{x:500,y:160},resizable:false,dockable:false,className:\"sharebox\",onClose:this.destroyShareBox.bind(this)});var displayName=\"Forward a Post\";var nav=new Nav({iconOptions:{user:this.getPrivateUser()},displayName:displayName,closable:true});var forward_user=this.getUser(username);if(!$defined(forward_user)){forward_user=this.getRoom(username);}var content=new ShareBoxPopupContent({user:this.getPrivateUser(),forward_id:forward_id,forward_user:forward_user,forward_body:forward_body});this.sharebox.addContent(\"sharebox\",nav,content);},replyShareBoxShow:function(reply_id){if($defined(this.sharebox)){this.sharebox.close();}this.createReplyShareBox(reply_id);},createReplyShareBox:function(reply_id){this.sharebox=new Popup({size:{x:500,y:160},resizable:false,dockable:false,className:\"sharebox\",onClose:this.destroyShareBox.bind(this)});var displayName=\"Reply to a Post\";var nav=new Nav({iconOptions:{user:this.getPrivateUser()},displayName:displayName,closable:true});var content=new ShareBoxPopupContent({user:this.getPrivateUser(),reply_id:reply_id});this.sharebox.addContent(\"sharebox\",nav,content);},shareBoxShow:function(user){if($defined(this.sharebox)){this.sharebox.close();}this.createShareBox(user);},createShareBox:function(user){this.sharebox=new Popup({size:{x:500,y:160},resizable:false,dockable:false,className:\"sharebox\",onClose:this.destroyShareBox.bind(this)});var displayName=(user.user_id==this.getPrivateUser().user_id)?\"Write in Your Stream\":\"Write in \"+user.first_name+\"'s Stream\";var nav=new Nav({iconOptions:{user:user},displayName:displayName,closable:true});var content=new ShareBoxPopupContent({user:user});this.sharebox.addContent(\"sharebox\",nav,content);},destroyShareBox:function(name){this.sharebox=null;},roomShareBoxShow:function(room){if($defined(this.sharebox)){this.sharebox.close();}this.createRoomShareBox(room);},createRoomShareBox:function(room){this.sharebox=new Popup({size:{x:500,y:160},resizable:false,dockable:false,className:\"sharebox\",onClose:this.destroyShareBox.bind(this)});var displayName=\"Write in \"+room.room_name+\"'s Stream\";var nav=new Nav({iconOptions:{user:room},displayName:displayName,closable:true});var content=new ShareBoxPopupContent({room:room});this.sharebox.addContent(\"sharebox\",nav,content);}});var AttachLinkPopupContent=new Class({Extends:PopupContent,defaultText:\"Please enter the URL below\",errorText:\"The URL you entered is invalid\",validText:\"Click attach to add this link to your post\",onBeforeInit:function(options){this.attachFunc=options.attachFunc;return options;},onInit:function(){this.valid=false;this.url=\"\";this.text=new Element(\"div\",{\"class\":\"help_text light\",\"text\":this.defaultText}).inject(this.content);this.input=new Element(\"input\",{\"type\":\"text\",\"value\":\"http://\",\"maxlength\":200});this.input.addEvent(\"change\",this.validate.bind(this));this.input.addEvent(\"keyup\",this.validate.bindWithEvent(this));new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.input).inject(this.content);this.attachButton=new ButtonMedium({displayName:\"Attach\",className:\"dark\",action:\"check\"});$(this.attachButton).addEvent(\"click\",this.attach.bind(this));$(this.attachButton).inject(this.content);},onShow:function(){this.focus();},focus:function(){this.input.focus.delay(500,this.input);},validate:function(e){if(e&&e.key==\"enter\"){this.attach();return;}this.url=this.input.value.trim();if(DataUtility.validateUrl(this.url)){this.text.removeClass(\"error\");this.text.addClass(\"success\");this.text.set(\"text\",this.validText);this.valid=true;}else{this.text.removeClass(\"success\");this.text.addClass(\"error\");this.text.set(\"text\",this.errorText);this.valid=false;}},attach:function(){if(!this.valid){return;}var attachment={type:AttachmentType.Link,text:this.url,url:this.url};this.attachFunc(attachment);this.closeContent();}});var AttachPhotoPopupContent=new Class({Extends:PopupContent,defaultText:\"Please choose a photo\",errorText:\"The file you selected is not a photo\",validText:\"Click attach to add this photo to your post\",onBeforeInit:function(options){this.attachFunc=options.attachFunc;return options;},onInit:function(){this.valid=false;this.url=\"\";this.text=new Element(\"div\",{\"class\":\"help_text light\",\"text\":this.defaultText}).inject(this.content);this.input=new Element(\"input\",{\"type\":\"text\",\"value\":\"click to choose a file\"});this.fileInput=new Element(\"input\",{\"type\":\"file\",\"name\":\"file\"});this.form=new Element(\"form\").adopt(this.fileInput);this.fileInput.addEvent(\"change\",this.validate.bind(this));new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.input,this.form).inject(this.content);this.attachButton=new ButtonMedium({displayName:\"Attach\",className:\"dark\",action:\"check\"});$(this.attachButton).addEvent(\"click\",this.attach.bind(this));$(this.attachButton).inject(this.content);},validate:function(){Logger().log(\"validating file\");if(DataUtility.validatePhotoFile(this.fileInput.value)){this.text.removeClass(\"error\");this.text.addClass(\"success\");this.text.set(\"text\",this.validText);this.input.value=this.fileInput.value;this.valid=true;}else{this.text.removeClass(\"success\");this.text.addClass(\"error\");this.text.set(\"text\",this.errorText);this.input.value=\"click to choose a file\";this.valid=false;}},attach:function(){if(!this.valid){return;}this.form.inject(\"hidden\");var attachment={type:AttachmentType.Photo,text:this.fileInput.value};this.attachFunc(attachment,this.form);this.closeContent();}});var AttachmentType={None:0,Photo:1,Link:2};var ShareBoxPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){if($defined(options.user)){this.user=options.user;this.isRoom=false;this.source_id=this.user.user_id;}else{this.user=options.room;this.isRoom=true;this.source_id=this.user.room_id;}this.reply_id=options.reply_id||0;this.source_type=(this.isRoom)?3:1;this.forward_id=options.forward_id||0;this.forward_user=options.forward_user;this.forward_body=options.forward_body;if(this.source_id!=this.getPrivateUser().user_id||!$defined(this.forward_user)){this.forward_id=0;}this.is_forward=this.forward_id!=0;this.is_reply=this.reply_id!=0;this.is_direct=this.source_id!=this.getPrivateUser().user_id;return options;},reset:function(){Logger().log(\"resetting\");this.closeContactPickerPopup();this.closeAttachmentPopup();this.content.empty();this.onInit();},onInit:function(){this.targetContacts=$H();this.targetGroups=$H();this.targetContactEls=$H();this.targetGroupEls=$H();this.targetAllContacts=false;this.allContactsEl=null;this.formEl=null;this.isPublic=true;this.readyToPost=false;this.attachment={type:AttachmentType.None};this.channel_id=0;this.res=this.getSession();if(!this.is_direct&&!this.is_reply){this.privateButton=new ButtonSmall({displayName:\"Private\",className:\"privacy red\",action:\"lock dark\"});$(this.privateButton).addEvent(\"click\",this.togglePrivacy.bind(this));$(this.privateButton).inject(this.content);this.publicButton=new ButtonSmall({displayName:\"Public\",className:\"privacy green\",action:\"broadcast dark\"});$(this.publicButton).addEvent(\"click\",this.togglePrivacy.bind(this));$(this.publicButton).inject(this.content);this.addRecipientButton=new ButtonSmall({displayName:\"Add Recipient\",className:\"dark\",action:\"status dark\"});$(this.addRecipientButton).addEvent(\"click\",this.showContactPickerPopup.bind(this));var selfRecip=new Element(\"div\",{\"class\":\"target self\"});var icon=new Icon20({user:this.getPrivateUser()});$(icon).inject(selfRecip);selfRecip.adopt(new Element(\"div\",{\"class\":\"target_text text11 light\",\"text\":\"Yourself\"}));this.norecipients=new Element(\"div\",{\"class\":\"recipients\",\"text\":\"Everyone can view this post\"}).inject(this.content);this.recipients=new Element(\"div\",{\"class\":\"recipients\"}).adopt(new Element(\"div\",{\"class\":\"target\",\"text\":\"To: \"}),selfRecip,$(this.addRecipientButton),new Element(\"div\",{\"style\":\"clear: both\"})).inject(this.content);this.setPrivacyView();}else{if(this.is_direct){this.norecipients=new Element(\"div\",{\"class\":\"recipients\",\"text\":\"Everyone can view this post\"}).inject(this.content);}else{this.norecipients=new Element(\"div\",{\"class\":\"recipients\",\"text\":\"All recipients of the original can view this post\"}).inject(this.content);}}this.input=new Element(\"textarea\",{\"maxlength\":2000});this.input.addEvent(\"keydown\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.input).inject(this.content);this.linkButton=new ButtonSmall({displayName:\"Link\",className:\"dark\",action:\"link\"});$(this.linkButton).addEvent(\"click\",this.showAttachmentPopup.bind(this,[\"link\"]));this.photoButton=new ButtonSmall({displayName:\"Photo\",className:\"dark\",action:\"photo\"});$(this.photoButton).addEvent(\"click\",this.showAttachmentPopup.bind(this,[\"photo\"]));this.fileButton=new ButtonSmall({displayName:\"File\",className:\"dark\",action:\"file\"});this.attachments=new Element(\"div\",{\"class\":\"attachments\"}).inject(this.content);this.attachmentSelect=new Element(\"div\").adopt(new Element(\"div\",{\"class\":\"attachment_text light\",\"text\":\"Attach:\"}),$(this.linkButton),$(this.photoButton)).inject(this.attachments);this.attachmentItems=new Element(\"div\").inject(this.attachments);this.cancelButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"cross\"});$(this.cancelButton).addEvent(\"click\",this.closeContent.bind(this));this.updateButton=new ButtonMedium({displayName:\"Post\",className:\"dark\",action:\"check\"});$(this.updateButton).addEvent(\"click\",this.post.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.updateButton),$(this.cancelButton)).inject(this.content);this.focus();if(this.forward_id!=0){this.attachForward();}},setPrivacyView:function(){if(this.isPublic){DomUtility.show(this.publicButton);DomUtility.hide(this.privateButton);DomUtility.show(this.norecipients);DomUtility.hide(this.recipients);}else{DomUtility.hide(this.publicButton);DomUtility.show(this.privateButton);DomUtility.hide(this.norecipients);DomUtility.show(this.recipients);}},togglePrivacy:function(){if(this.isPublic){this.showContactPickerPopup();}else{this.closeContactPickerPopup();}this.isPublic=!this.isPublic;this.setPrivacyView();},inputKeyUp:function(e){if(e.shift&&e.key==\"enter\"){e.preventDefault();this.post();}if(DomUtility.textareaAutoSize(e.target,40)){this.updateSize();}},updateSize:function(){var h=(this.isPublic)?this.norecipients.getSize().y:this.recipients.getSize().y;h+=this.input.getSize().y+10;h+=this.attachments.getSize().y+20;h+=this.actions.getSize().y+30;this.resizePopup(500,h);},parseTargets:function(){if(this.isPublic){return\"\";}var targets=[this.getPrivateUser().user_id];if(this.targetAllContacts){this.getContacts().each(function(user){targets.include(user.user_id);},this);return targets.join(\",\");}this.targetGroups.each(function(group){var contacts=this.getContactsByGroup(group.group_id);contacts.each(function(user){targets.include(user.user_id);},this);},this);this.targetContacts.each(function(user){targets.include(user.user_id);},this);return targets.join(\",\");},post:function(){var targets=this.parseTargets();var body=this.input.value.trim();var is_public=(this.isPublic)?1:0;Logger().log(targets);Logger().log(body);if(this.forward_id==0){if(body==\"\"&&this.attachment.type==AttachmentType.None){this.fireEvent(\"showAlert\",\"empty_post\",\"Problem Posting\",\"Please enter some content to post.\");return;}var params={\"body\":body,\"targets\":targets,\"source_id\":this.source_id,\"source_type\":this.source_type,\"reply_id\":this.reply_id,\"channel_id\":this.channel_id,\"is_public\":is_public,\"res\":this.res,\"attachment\":JSON.encode(this.attachment)};this.call(\"home\",\"publish\",params,this.postSuccess.bind(this),this.postFail.bind(this),this.formEl);}else{var params={\"body\":body,\"targets\":targets,\"source_id\":this.source_id,\"source_type\":this.source_type,\"forward_id\":this.forward_id,\"channel_id\":this.channel_id,\"is_public\":is_public,\"res\":this.res};this.call(\"home\",\"forward\",params,this.postSuccess.bind(this),this.postFail.bind(this));}this.updateButton.showProgress();},postSuccess:function(){this.updateButton.hideProgress();this.closeContent();},postFail:function(){this.updateButton.hideProgress();},addAllContacts:function(){if(this.isPublic||$defined(this.allContactsEl)){return;}var el=ShareBoxUtility.createAllContactsItem();el.addEvent(\"click\",this.removeAllContacts.bind(this));el.inject($(this.addRecipientButton),\"before\");this.allContactsEl=el;this.targetAllContacts=true;this.updateSize();},removeAllContacts:function(){if(!$defined(this.allContactsEl)){return;}this.allContactsEl.destroy();this.targetAllContacts=false;this.updateSize();},addTargetGroup:function(group){if(this.isPublic||this.targetGroupEls.has(group.group_id)){return;}var el=ShareBoxUtility.createGroupItem(group);el.addEvent(\"click\",this.removeTargetGroup.bind(this,[group.group_id]));el.inject($(this.addRecipientButton),\"before\");this.targetGroupEls.set(group.group_id,el);this.targetGroups.set(group.group_id,group);this.updateSize();},removeTargetGroup:function(group_id){if(!this.targetGroupEls.has(group_id)){return;}this.targetGroupEls.get(group_id).destroy();this.targetGroupEls.erase(group_id);this.targetGroups.erase(group_id);this.updateSize();},addTargetContact:function(user){if(this.isPublic||this.targetContactEls.has(user.username)){return;}var el=ShareBoxUtility.createContactItem(user);el.addEvent(\"click\",this.removeTargetContact.bind(this,[user.username]));el.inject($(this.addRecipientButton),\"before\");this.targetContactEls.set(user.username,el);this.targetContacts.set(user.username,user);this.updateSize();},removeTargetContact:function(username){if(!this.targetContactEls.has(username)){return;}this.targetContactEls.get(username).destroy();this.targetContactEls.erase(username);this.targetContacts.erase(username);this.updateSize();},showContactPickerPopup:function(){if($defined(this.contactPicker)){this.contactPicker._select();return;}this.createContactPickerPopup();},closeContactPickerPopup:function(){if($defined(this.contactPicker)){this.contactPicker.close();}},createContactPickerPopup:function(){this.contactPicker=new Popup({size:{x:200,y:350},resizable:false,dockable:false,className:\"contactPicker\",onClose:this.destroyContactPickerPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"users\"},displayName:\"Select Recipients\",closable:true});var content=new ContactPickerPopupContent({groups:this.getGroups(),contacts:this.getContacts(),groupAddFunc:this.addTargetGroup.bind(this),contactAddFunc:this.addTargetContact.bind(this),allContactsAddFunc:this.addAllContacts.bind(this)});this.contactPicker.addContent(\"contactPicker\",nav,content);},destroyContactPickerPopup:function(){this.contactPicker=null;},showAttachmentPopup:function(type){if($defined(this.attachmentPopup)){if(this.attachmentPopupType==type){this.attachmentPopup._select();return;}else{this.closeAttachmentPopup();}}this.createAttachmentPopup(type);},closeAttachmentPopup:function(){if($defined(this.attachmentPopup)){this.attachmentPopup.close();}},createAttachmentPopup:function(type){var popupClass;var typeName;switch(type){case\"link\":popupClass=AttachLinkPopupContent;typeName=\"Link\";break;case\"photo\":popupClass=AttachPhotoPopupContent;typeName=\"Photo\";break;}this.attachmentPopup=new Popup({size:{x:400,y:74},resizable:false,dockable:false,className:\"attachments\",onClose:this.destroyAttachmentPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:type},displayName:\"Attach \"+typeName,closable:true});var content=new popupClass({attachFunc:this.attachContent.bind(this)});this.attachmentPopupType=type;this.attachmentPopup.addContent(\"attachment\",nav,content);},destroyAttachmentPopup:function(){this.attachmentPopup=null;this.attachmentPopupType=null;},attachForward:function(){DomUtility.show(this.attachmentItems);DomUtility.hide(this.attachmentSelect);var attachElement=ShareBoxUtility.createForwardAttachmentItem(this.forward_user,this.forward_body);attachElement.inject(this.attachmentItems);},attachContent:function(attachment,formEl){this.attachment=attachment;if($defined(formEl)){this.formEl=formEl;}Logger().log(\"attached \"+this.formEl);DomUtility.show(this.attachmentItems);DomUtility.hide(this.attachmentSelect);var attachElement=ShareBoxUtility.createAttachmentItem(attachment);var removeButton=new ButtonSmall({displayName:\"Remove\",className:\"dark\",action:\"cross\"});$(removeButton).addEvent(\"click\",this.removeAttachment.bind(this));$(removeButton).inject(attachElement);attachElement.inject(this.attachmentItems);},removeAttachment:function(){this.attachment=null;this.attachmentItems.empty();if($defined(this.formEl)){this.formEl.destroy();}this.formEl=null;DomUtility.hide(this.attachmentItems);DomUtility.show(this.attachmentSelect);this.forward_id=0;},onShow:function(){this.focus();},focus:function(){this.input.focus.delay(500,this.input);}});var ShareBoxUtility={createContactRoomInviteItem:function(user){var el=new Element(\"div\",{\"class\":\"listItem\"});var icon=new Icon20({user:user});$(icon).inject(el);new Element(\"div\",{\"class\":\"listText text12 light\",\"text\":TextUtility.cleanText(user.fullname)}).inject(el);el.set(\"val1\",user.fullname.toLowerCase());el.set(\"val2\",user.last_name.toLowerCase());var button=new ButtonSmall({displayName:\"Invite\",className:\"dark\",action:\"check\"});$(button).inject(el);new Element(\"div\",{\"class\":\"invited_text text11 success\",\"text\":\"Invited\"}).inject(el);return el;},createContactPickerItem:function(user){var el=new Element(\"div\",{\"class\":\"listItem\"});var icon=new Icon20({user:user});$(icon).inject(el);new Element(\"div\",{\"class\":\"listText text12 light\",\"text\":TextUtility.cleanText(user.fullname)}).inject(el);el.set(\"val1\",user.fullname.toLowerCase());el.set(\"val2\",user.last_name.toLowerCase());return el;},createGroupPickerItem:function(group){var el=new Element(\"div\",{\"class\":\"listItem\"});var icon=new Icon20({iconName:\"group\"});$(icon).inject(el);new Element(\"div\",{\"class\":\"listText text12 light\",\"text\":TextUtility.cleanText(group.name)}).inject(el);el.set(\"val1\",group.name.toLowerCase());return el;},createAllContactsPickerItem:function(){var el=new Element(\"div\",{\"class\":\"listItem\"});var icon=new Icon20({iconName:\"contacts\"});$(icon).inject(el);new Element(\"div\",{\"class\":\"listText text12 light\",\"text\":\"All Contacts\"}).inject(el);el.set(\"val1\",\"all contacts\");return el;},createContactItem:function(user){var el=new Element(\"div\",{\"class\":\"target\"});var icon=new Icon20({user:user});$(icon).inject(el);el.adopt(new Element(\"div\",{\"class\":\"target_text text11 light\",\"text\":TextUtility.cleanText(user.first_name)}),new Element(\"div\",{\"class\":\"action cross\"}));return el;},createGroupItem:function(group){var el=new Element(\"div\",{\"class\":\"target\"});var icon=new Icon20({iconName:\"group\"});$(icon).inject(el);el.adopt(new Element(\"div\",{\"class\":\"target_text text11 light\",\"text\":TextUtility.cleanText(group.name)}),new Element(\"div\",{\"class\":\"action cross\"}));return el;},createAllContactsItem:function(){var el=new Element(\"div\",{\"class\":\"target\"});var icon=new Icon20({iconName:\"contacts\"});$(icon).inject(el);el.adopt(new Element(\"div\",{\"class\":\"target_text text11 light\",\"text\":\"All Contacts\"}),new Element(\"div\",{\"class\":\"action cross\"}));return el;},createForwardAttachmentItem:function(forward_user,forward_body){var el=new Element(\"div\",{\"class\":\"attachment\"});var name=($defined(forward_user.user_id))?forward_user.fullname:forward_user.room_name;el.adopt(new Element(\"span\",{\"class\":\"indicator\",\"html\":\"&raquo;\"}),new Element(\"span\",{\"class\":\"attachment_title light2\"}).adopt(new Element(\"span\",{\"text\":\"Forwarding: \"}),new Element(\"span\",{\"class\":\"user_name\",\"text\":TextUtility.unescape(name)}),new Element(\"span\",{\"text\":\" \"+TextUtility.unescape(forward_body)})));return el;},createAttachmentItem:function(attachment){var el=new Element(\"div\",{\"class\":\"attachment\"});el.adopt(new Element(\"span\",{\"class\":\"indicator\",\"html\":\"&raquo;\"}),new Element(\"span\",{\"class\":\"attachment_title light2\",\"text\":attachment.text}));return el;}};var UI=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"viewSwitch\",\"menuAdd\",\"contentAdd\",\"menuClose\",\"contentClose\",\"appClose\",\"showUser\",\"showRoom\",\"showConvo\",\"showGlobal\",\"showConfirmation\",\"showAlert\",\"showVideoPopup\",\"showPhotoPopup\",\"showPipioUpdatePopup\",\"showSearchRoomPopup\"],init:function(){this.historyManager=new HistoryManager();this.historyManager.addEvent(\"onHistoryChange\",this.historyChanged.bind(this));this.history=$H();this.navScrollBar=new ScrollBar(\"nav\",\"nav_wrapper\");this.idleTimeout=10*60*1000;this.updateTimestamps.periodical(1000*90,this);this.menus=$H();this.contents=$H();this.confirms=$H();this.alerts=$H();this.reset();},reset:function(){this.currentMenu=null;this.currentContent=null;},userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){this.reset();this.setCurrentUser();this.toggleHeader(true);},userLoggedOut:function(){this.reset();this.resetCurrentUser();this.toggleHeader(false);},appClose:function(app){this.contents.each(function(content,key){var appId=key.split(\"_\",1)[0];if(appId==app){this.contentCloseKey(key);}},this);this.menus.each(function(menu,key){var appId=key.split(\"_\",1)[0];if(appId==app){this.menuCloseKey(key);}},this);},viewSwitch:function(appId,contentName,menuName){var menuKey=appId+\"_\"+menuName;var contentKey=appId+\"_\"+contentName;if(!this.contents.has(contentKey)){Logger().log(\"content \"+contentName+\" not found!\");return false;}if($defined(menuName)&&!this.menus.has(menuKey)){Logger().log(\"menu \"+menuName+\" not found!\");return false;}if($defined(menuName)){this.contentSwitch(contentKey);this.menuSwitch(menuKey);$(\"content\").addClass(\"hasmenu\");}else{this.contentSwitch(contentKey);$(\"content\").removeClass(\"hasmenu\");}this.historyChange(appId,contentName,menuName);return true;},historyChange:function(appId,contentName,menuName){if(parseInt(appId)==appId){var app=this.getAppById(appId);if(!app){return;}var hash=app.name+\"/\"+contentName;this.history.set(hash,{appId:appId,contentName:contentName,menuName:menuName});this.historyManager.addState(hash);}else{var appParts=appId.split(\"_\");var appName=appParts[0];var appParam=appParts[1];var hash=appName+\"/\"+appParam+\"/\"+contentName;this.history.set(hash,{appId:appId,contentName:contentName,menuName:menuName});this.historyManager.addState(hash);}},historyChanged:function(hash){Logger().log(\"historyChanged - \"+hash);if(this.history.has(hash)){var state=this.history.get(hash);var found=this.viewSwitch(state.appId,state.contentName,state.menuName);if(!found){window.history.back();}}},menuAdd:function(appId,menuName,menu){var menuKey=appId+\"_\"+menuName;Logger().log(\"adding menu \"+menuKey);if(this.menus.has(menuKey)){return;}$(menu).inject(\"menu_wrapper\");menu.off();this.menus.set(menuKey,menu);},menuClose:function(appId,menuName){var menuKey=appId+\"_\"+menuName;this.menuCloseKey(menuKey);},menuCloseKey:function(key){if(!this.menus.has(key)){return;}if(key==this.currentMenu){this.currentMenu=null;}var menu=this.menus.get(key);menu.destroy();this.menus.erase(key);delete (menu);},contentAdd:function(appId,contentName,content){var contentKey=appId+\"_\"+contentName;Logger().log(\"adding content \"+contentKey);if(this.contents.has(contentKey)){return;}$(content).inject(\"content_wrapper\");content.off();this.contents.set(contentKey,content);},contentClose:function(appId,contentName){var contentKey=appId+\"_\"+contentName;this.contentCloseKey(contentKey);if(!$defined(this.currentContent)){window.history.back();}},contentCloseKey:function(key){Logger().log(key);if(!this.contents.has(key)){return;}if(key==this.currentContent){this.currentContent=null;}var content=this.contents.get(key);content.destroy();this.contents.erase(key);delete (content);},menuSwitch:function(menuKey){if(!this.menus.has(menuKey)){return;}if(menuKey==this.currentMenu){return;}if($defined(this.currentMenu)){this.menus.get(this.currentMenu).off();}this.menus.get(menuKey).on();this.currentMenu=menuKey;},contentSwitch:function(contentKey){if(!this.contents.has(contentKey)){return;}if(contentKey==this.currentContent){return;}if($defined(this.currentContent)){this.contents.get(this.currentContent).off();}this.contents.get(contentKey).on();this.fireEvent(\"contentSwitched\",contentKey);this.currentContent=contentKey;},toggleHeader:function(loggedIn){if(loggedIn){DomUtility.show(\"self\");$(\"header\").get(\"tween\").start(\"left\",201).chain(function(){$(\"self\").setStyle(\"z-index\",6);$(\"header_loggedOut\").get(\"tween\").start(\"top\",-36).chain(function(){$(\"header_loggedIn\").get(\"tween\").start(\"top\",0);});});$(\"nav_wrapper\").get(\"tween\").start(\"left\",0);$(\"content\").get(\"tween\").start(\"left\",201);$(\"dock\").inject(\"dock_loggedIn\");}else{$(\"self\").setStyle(\"z-index\",4);$(\"header\").get(\"tween\").start(\"left\",0).chain(function(){DomUtility.hide(\"self\");$(\"header_loggedIn\").get(\"tween\").start(\"top\",-36).chain(function(){$(\"header_loggedOut\").get(\"tween\").start(\"top\",0);});});$(\"nav_wrapper\").get(\"tween\").start(\"left\",-210);$(\"content\").get(\"tween\").start(\"left\",0);$(\"dock\").inject(\"dock_loggedOut\");}},setCurrentUser:function(){$(\"self_name\").set(\"text\",this.getPrivateUser().fullname);$(\"self_profile_pic_26\").set(\"src\",this.getPrivateUser().profile_pic_26);$(\"self_profile_pic_26\").addClass(\"profile_pic_26_\"+this.getPrivateUser().username);$(\"self_online_status\").addClass(\"online_status_\"+this.getPrivateUser().username);},resetCurrentUser:function(){$(\"self_name\").set(\"text\",\"\");$(\"self_profile_pic_26\").set(\"src\",\"\");$(\"self_profile_pic_26\").set(\"class\",\"profile_pic\");$(\"self_online_status\").set(\"class\",\"online_status\");},showUser:function(user){var options={user:user};this.fireEvent(\"startAppInstance\",\"user\",user.username,options);},showRoom:function(room){var options={room:room};this.fireEvent(\"startAppInstance\",\"room\",room.username,options);},showGlobal:function(location){var options={location:location};var geohash=location.geohash.substring(0,6);this.fireEvent(\"startAppInstance\",\"global\",geohash,options);},showConvo:function(){},showConfirmation:function(name,title,message,confirmFunc){if(this.confirms.has(name)){this.confirms.get(name)._select();return;}this.createConfirmation(name,title,message,confirmFunc);},createConfirmation:function(name,title,message,confirmFunc){var popup=new Popup({size:{x:350,y:100},resizable:false,dockable:false,className:\"confirm\",onClose:this.destroyConfirmation.bind(this,[name])});var nav=new Nav({iconOptions:{iconName:\"info\"},displayName:title,closable:true});var content=new ConfirmPopupContent({confirmMessage:message,confirmFunc:confirmFunc});popup.addContent(\"confirm\",nav,content);this.confirms.set(name,popup);},destroyConfirmation:function(name){this.confirms.erase(name);},showAlert:function(name,title,message){if(this.alerts.has(name)){this.alerts.get(name)._select();return;}this.createAlert(name,title,message);},createAlert:function(name,title,message){var popup=new Popup({size:{x:350,y:100},resizable:false,dockable:false,className:\"confirm\",onClose:this.destroyAlert.bind(this,[name])});var nav=new Nav({iconOptions:{iconName:\"info\"},displayName:title,closable:true});var content=new AlertPopupContent({alertMessage:message});popup.addContent(\"confirm\",nav,content);this.alerts.set(name,popup);},destroyAlert:function(name){this.alerts.erase(name);},updateTimestamps:function(){$$(\".timestamp\").each(function(el){if($defined(el.get(\"ts\"))){var ts=new Date(el.get(\"ts\"));var format=el.get(\"ts_format\");var timeStr=DateUtility.getTimestamp(ts,format);el.set(\"text\",timeStr);}});}});UI.implement({showVideoPopup:function(attachment){switch(attachment.video_type){case\"youtube\":this.createYoutubePopup(attachment);break;case\"vimeo\":this.createVimeoPopup(attachment);break;case\"ch\":this.createChPopup(attachment);break;case\"hulu\":this.createHuluPopup(attachment);break;case\"break\":this.createBreakPopup(attachment);break;}},showPhotoPopup:function(attachment){this.createPhotoPopup(attachment);},createPhotoPopup:function(attachment){var popup=new Popup({size:{x:300,y:100},resizable:false,dockable:false,closable:true,className:\"photoViewer\"});var displayName=attachment.filename;var nav=new Nav({iconOptions:{iconName:\"photo\"},displayName:displayName,closable:true});var content=new PhotoPopupContent({attachment:attachment});content.resizePopup=popup.resizePopup.bind(popup);content.reCenter=popup.reCenter.bind(popup);popup.addContent(\"photo\",nav,content);},createYoutubePopup:function(attachment){var popup=new Popup({size:{x:425,y:350},resizable:false,dockable:false,noHide:true,closable:true,className:\"videoPlayer\"});var displayName=\"Youtube Video\";var nav=new Nav({iconOptions:{iconName:\"youtube\"},displayName:displayName,closable:true});var content=new YoutubePopupContent({attachment:attachment});popup.addContent(\"video\",nav,content);},createVimeoPopup:function(attachment){var popup=new Popup({size:{x:425,y:350},resizable:false,dockable:false,noHide:true,closable:true,className:\"videoPlayer\"});var displayName=\"Vimeo Video\";var nav=new Nav({iconOptions:{iconName:\"tv\"},displayName:displayName,closable:true});var content=new VimeoPopupContent({attachment:attachment});popup.addContent(\"video\",nav,content);},createChPopup:function(attachment){var popup=new Popup({size:{x:425,y:350},resizable:false,dockable:false,noHide:true,closable:true,className:\"videoPlayer\"});var displayName=\"College Humor Video\";var nav=new Nav({iconOptions:{iconName:\"tv\"},displayName:displayName,closable:true});var content=new ChPopupContent({attachment:attachment});popup.addContent(\"video\",nav,content);},createBreakPopup:function(attachment){var popup=new Popup({size:{x:425,y:350},resizable:false,dockable:false,noHide:true,closable:true,className:\"videoPlayer\"});var displayName=\"Break.com Video\";var nav=new Nav({iconOptions:{iconName:\"tv\"},displayName:displayName,closable:true});var content=new BreakPopupContent({attachment:attachment});popup.addContent(\"video\",nav,content);},createHuluPopup:function(attachment){var popup=new Popup({size:{x:512,y:296},resizable:false,dockable:false,noHide:true,closable:true,className:\"videoPlayer\"});var displayName=\"Hulu Video\";var nav=new Nav({iconOptions:{iconName:\"tv\"},displayName:displayName,closable:true});var content=new HuluPopupContent({attachment:attachment});popup.addContent(\"video\",nav,content);},showPipioUpdatePopup:function(version){if($defined(this.updatePopup)){return;}this.updatePopup=popup=new Popup({size:{x:350,y:70},resizable:false,dockable:false,closable:false,className:\"login\"});var nav=new Nav({iconOptions:{iconName:\"pipio\"},displayName:\"Pip.io Updated\",closable:true});var content=new PipioUpdatePopupContent({version:version});this.updatePopup.addContent(\"update\",nav,content);},showSearchRoomPopup:function(){this.closeSearchRoomPopup();this.createSearchRoomPopup();},closeSearchRoomPopup:function(){if($defined(this.searchRoomPopup)){this.searchRoomPopup.close();}},createSearchRoomPopup:function(){this.searchRoomPopup=new Popup({size:{x:350,y:110},resizable:false,dockable:false,className:\"roomSearch\",onClose:this.destroySearchRoomPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"search\"},displayName:\"Search for Rooms on Pip.io\",closable:true});var content=new RoomSearchPopupContent({});this.searchRoomPopup.addContent(\"roomSearch\",nav,content);},destroySearchRoomPopup:function(){this.searchRoomPopup=null;}});var BreakPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.attachment=options.attachment;return options;},onInit:function(){this.call(\"home\",\"parse_break_url\",{url:this.attachment.url},this.parseSuccess.bind(this),this.parseFail.bind(this));},parseSuccess:function(data){var swf=\"http://embed.break.com/\"+data.id;var vid=new Swiff(swf,{id:swf,width:425,height:350,params:{movie:swf,allowfullscreen:true}});vid.inject(this.content);},parseFail:function(){this.closeContent();}});var ChPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.attachment=options.attachment;return options;},onInit:function(){var swf=\"http://www.collegehumor.com/moogaloop/moogaloop.swf?clip_id=\"+this.attachment.vimeoId+\"&autoplay=1&fullscreen=1\";var vid=new Swiff(swf,{id:swf,width:425,height:350,params:{movie:swf,allowfullscreen:true}});vid.inject(this.content);}});var HuluPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.attachment=options.attachment;return options;},onInit:function(){this.call(\"home\",\"parse_hulu_url\",{url:this.attachment.url},this.parseSuccess.bind(this),this.parseFail.bind(this));},parseSuccess:function(data){var swf=\"http://www.hulu.com/embed/\"+data.id;var vid=new Swiff(swf,{id:swf,width:512,height:296,params:{movie:swf,allowfullscreen:true}});vid.inject(this.content);},parseFail:function(){this.closeContent();}});var PhotoPopupContent=new Class({Extends:PopupContent,strings:{loadingMessage:\"Photo loading...\"},onBeforeInit:function(options){this.attachment=options.attachment;return options;},onInit:function(){this.loadingMsg=new Element(\"div\",{\"class\":\"loading_message\"}).adopt(new Element(\"div\",{\"class\":\"loading_text light\",\"text\":this.strings.loadingMessage}),new Element(\"div\",{\"class\":\"progress\"})).inject(this.content);Logger().log(this.attachment.url);this.image=new Asset.image(this.attachment.url,{title:this.attachment.filename,onload:this.photoLoaded.bind(this)});},photoLoaded:function(){var imageW=this.image.width;var imageH=this.image.height;if(imageW>=imageH&&imageW>1000){imageH=(1000/imageW)*imageH;imageW=1000;}else{if(imageW<imageH&&imageH>1000){imageW=(1000/imageH)*imageW;imageH=1000;}}var w=imageW+20;var h=imageH+20;DomUtility.hide(this.loadingMsg);this.image.inject(this.content);this.resizePopup(w,h);this.reCenter();}});var PipioUpdatePopupContent=new Class({Extends:PopupContent,strings:{updateMessage:\"A new version of Pip.io (v{0}) is available\"},onBeforeInit:function(options){this.version=options.version;return options;},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":String.format(this.strings.updateMessage,this.version)}).inject(this.content);this.actionButton=new ButtonMedium({displayName:\"Reload\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.reload.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton)).inject(this.content);},reload:function(){this.actionButton.showProgress();window.location=\"/\";}});var VimeoPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.attachment=options.attachment;return options;},onInit:function(){var swf=\"http://vimeo.com/moogaloop.swf?clip_id=\"+this.attachment.vimeoId+\"&autoplay=1&fullscreen=1\";Logger().log(swf);var vid=new Swiff(swf,{id:swf,width:425,height:350,params:{movie:swf,allowfullscreen:true}});vid.inject(this.content);}});var YoutubePopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.attachment=options.attachment;return options;},onInit:function(){var swf=\"http://www.youtube.com/v/\"+this.attachment.youtubeId+\"&rel=1&autoplay=1\";var vid=new Swiff(swf,{id:swf,width:425,height:350,params:{movie:swf,allowfullscreen:true}});vid.inject(this.content);}});var VideoChat=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"videoChatStart\",\"videoChatReset\",\"videoChatEnd\",\"videoChatRequestReceived\",\"videoChatRequestAccepted\",\"videoChatAccept\"],init:function(){window.sim=new VideoChatInterface();this.callTimeout=0;this.createVideoChatPopup();},userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){window.sim.ChatReady();},userLoggedOut:function(){window.sim.ChatNotReady();},videoChatStart:function(user){if(!this.videoEnabled()){var name=\"video_chat\";var title=\"Unable to Start Video Conference\";var message=\"Your system does not support video conferencing\";this.fireEvent(\"showAlert\",name,title,message);return;}if(window.sim.SwfState==window.sim.SwfReady){this.fireEvent(\"sendVideoChatInvite\",user);window.sim.CallInitiate(this.getPrivateUser().username,user.username);this.callTimeout=this.videoChatEnd.delay(20000,this);this.showVideoChatPopup(user);}},videoChatAccept:function(user,stratusId){this.showVideoChatPopup(user);window.sim.CallAccept(stratusId,this.getPrivateUser().username,user.username);this.fireEvent(\"sendVideoChatAccept\",user);},videoChatReset:function(){Logger().log(\"reset video chat\");this.popup.close();this.fireEvent(\"videoChatEnable\",true);this.fireEvent(\"videoInUse\",false);this.fireEvent(\"selfPresenceUpdate\");$clear(this.callTimeout);},videoChatEnd:function(){Logger().log(\"reset video chat\");window.sim.CallEnd();this.popup.close();this.fireEvent(\"videoChatEnable\",true);this.fireEvent(\"videoInUse\",false);this.fireEvent(\"selfPresenceUpdate\");$clear(this.callTimeout);},videoChatRequestAccepted:function(username,stratusId){$clear(this.callTimeout);window.sim.CallAccepted(stratusId,username);},videoChatRequestReceived:function(username,stratusId){var user=this.getContact(username);var notif=new VideoChatNotification({user:user,stratusId:stratusId});this.fireEvent(\"notificationAdd\",\"videoChat_request_\"+username,notif);window.sim.CallReceived(username);},showVideoChatPopup:function(user){this.popup.show(user);},createVideoChatPopup:function(){this.popup=new VideoChatPopup({size:{x:400,y:340},resizable:false,dockable:false,noHide:true,closable:false,className:\"pipioVideoChat\"});var nav=new Nav({iconOptions:{iconName:\"video_chat\"},displayName:\"Video Conference\",closable:true});var content=new VideoChatPopupContent({});this.popup.addContent(\"video_chat\",nav,content);}});var VideoChatInterface=new Class({Extends:Base,EventHandlers:[],init:function(){this.flexApp=null;this.SwfState=null;this.SwfError=-1;this.SwfNotLoaded=0;this.SwfLoaded=1;this.SwfNotReady=2;this.SwfReady=3;this.SwfCalling=4;this.SwfRinging=5;this.SwfConnecting=6;this.SwfConnected=7;this.SwfDisconnecting=8;},CallInitiate:function(nearUsername,farUsername){if(this.SwfState==this.SwfReady){this.flexApp.AttachOutgoingStream(nearUsername);this.SwfState=this.SwfCalling;}},CallReceived:function(farUsername){if(this.SwfState==this.SwfReady){this.SwfState=this.SwfRinging;}},CallAccept:function(farID,nearUsername,farUsername){if(this.SwfState==this.SwfRinging){this.SwfState=this.SwfConnecting;this.flexApp.AttachIncomingStream(farID,farUsername);this.flexApp.AttachOutgoingStream(nearUsername);this.SwfState=this.SwfConnected;}},CallReject:function(farUsername){if(this.SwfState==this.SwfRinging){this.SwfState=this.SwfDisconnecting;this.SwfState=this.SwfReady;}},CallAccepted:function(farID,farUsername){if(this.SwfState==this.SwfCalling){this.SwfState=this.SwfConnecting;this.flexApp.AttachIncomingStream(farID,farUsername);this.SwfState=this.SwfConnected;}},CallRejected:function(farID,farUsername){if(this.SwfState==this.SwfCalling){this.SwfState=this.SwfReady;}},CallEnd:function(farUsername){if((this.SwfState==this.SwfCalling)||(this.SwfState==this.SwfConnected)||(this.SwfState==this.SwfConnecting)){this.SwfState=this.SwfDisconnecting;this.flexApp.ClientReset();this.SwfState=this.SwfReady;}},ClientReset:function(){if(this.SwfState>=this.SwfReady){this.CallEnd();}this.flexApp.ClientReset();},GetLog:function(logging){if(this.SwfState>=this.SwfLoaded){if(logging==null){logging=true;}return this.flexApp.GetLog(logging);}},GetFarID:function(){id=\"\";if(this.SwfState>=this.SwfLoaded){id=this.flexApp.GetFarID();}return id;},GetNearID:function(){id=\"\";if(this.SwfState>=this.SwfLoaded){id=this.flexApp.GetNearID();}return id;},SetSpeakerVolume:function(volume){if(this.SwfState!=this.SwfError){if(volume<0){volume=0;}else{if(volume>1){volume=1;}}this.flexApp.SetSpeakerVolume(volume);}},SetMicGain:function(gain){if(this.SwfState!=this.SwfError){if(gain<0){gain=0;}else{if(gain>100){gain=100;}}this.flexApp.SetMicGain(gain);}},AudioMute:function(){if(this.SwfState==this.SwfConnected){this.flexApp.AudioMute();}},AudioStart:function(){if(this.SwfState==this.SwfConnected){this.flexApp.AudioStart();}},AudioToggle:function(){if(this.SwfState==this.SwfConnected){this.flexApp.AudioToggle();}},VideoPause:function(){if(this.SwfState==this.SwfConnected){this.flexApp.VideoPause();}},VideoStart:function(){if(this.SwfState==this.SwfConnected){this.flexApp.VideoStart();}},VideoToggle:function(){if(this.SwfState==this.SwfConnected){this.flexApp.VideoToggle();}},LoginError:function(){this.SwfState=this.SwfError;Logger().log(\"LoginError()\");},LoginNotConnected:function(){this.SwfState=this.SwfNotReady;Logger().log(\"LoginNotConnected()\");},LoginConnecting:function(){this.SwfState=this.SwfNotReady;Logger().log(\"LoginConnecting()\");},LoginConnected:function(){this.SwfState=this.SwfReady;Logger().log(\"LoginConnected()\");Logger().log(\"Got Stratus ID of \"+this.GetNearID());},LoginDisconnecting:function(){this.SwfState=this.SwfNotReady;$(\"loginstate\").fireEvent(\"burn\",\"LoginDisconnecting()\");},ChatError:function(){this.SwfState=this.SwfError;Logger().log(\"ChatError()\");},ChatNotReady:function(){this.SwfState=this.SwfNotReady;Logger().log(\"ChatNotReady()\");},ChatReady:function(){this.SwfState=this.SwfReady;Logger().log(\"ChatReady()\");},ChatInitiated:function(){this.SwfState=this.SwfCalling;Logger().log(\"ChatInitiated()\");},ChatEstablished:function(){this.SwfState=this.SwfConnected;Logger().log(\"ChatEstablished()\");},AudioError:function(){this.SwfState=this.SwfError;Logger().log(\"AudioError()\");},AudioNotReady:function(){this.SwfState=this.SwfNotReady;Logger().log(\"AudioNotReady()\");},AudioReady:function(){Logger().log(\"AudioReady()\");},AudioTransmitting:function(){Logger().log(\"AudioTransmitting()\");},AudioPaused:function(){Logger().log(\"AudioPaused()\");},VideoError:function(){this.SwfState=this.SwfError;Logger().log(\"VideoError()\");},VideoNotReady:function(){this.SwfState=this.SwfNotReady;Logger().log(\"VideoNotReady()\");},VideoReady:function(){Logger().log(\"VideoReady()\");Logger().log(\"Camera found.\");this.fireEvent(\"videoChatReset\");},VideoTransmitting:function(){Logger().log(\"VideoTransmitting()\");},VideoPaused:function(){Logger().log(\"VideoPaused()\");},LogChanged:function(){},VideoChatLoaded:function(){this.SwfState=this.SwfLoaded;this.flexApp=$(\"videochat\");},SpeakerVolumeChanged:function(){},MicGainChanged:function(){}});var VideoChatNotification=new Class({Extends:Notification,onBeforeInit:function(options){this.user=options.user;this.stratusId=options.stratusId;options.iconOptions={user:this.user};options.timeout=15000;options.hasActions=true;return options;},onInit:function(){this.acceptButton=new ButtonSmall({displayName:\"Accept\",className:\"dark\",action:\"check\"});this.ignoreButton=new ButtonSmall({displayName:\"Ignore\",className:\"dark\",action:\"cross\"});$(this.ignoreButton).addEvent(\"click\",this.closeNotification.bind(this));$(this.acceptButton).addEvent(\"click\",this.fireEvent.bind(this,[\"videoChatAccept\",this.user,this.stratusId]));$(this.acceptButton).addEvent(\"click\",this.closeNotification.bind(this));$(this.acceptButton).inject(this.actions);$(this.ignoreButton).inject(this.actions);},getText:function(){var el=new Element(\"div\",{\"class\":\"notification_text text11 light1\"}).adopt(new Element(\"span\",{\"text\":this.user.fullname})).appendText(\" invited you to a video conference.\");return el;}});var VideoChatPopup=new Class({Extends:Popup,onCreate:function(){this.shown=true;this.close();},close:function(){if(!this.shown){return;}this.left=this.popup.getStyle(\"left\");this.popup.setStyle(\"left\",\"-5000px\");this.shown=false;},show:function(user){if(this.shown){return;}this.setTitleCustom(user);this.popup.setStyle(\"left\",this.left);this.shown=true;this._select();},setTitleCustom:function(user){var nav=this.navs.get(this.currentContent);var icon=new Icon20({user:user});var titleText=new Element(\"div\",{\"class\":\"title_text\",\"text\":TextUtility.unescapeQuotes(\"Video Conference with \"+user.fullname)});this.titleIcon=$(icon).replaces(this.titleIcon);this.titleText=titleText.replaces(this.titleText);},resetSwf:function(){this.contents.get(this.currentContent).resetSwf();}});var VideoChatPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){options.destroy=false;return options;},onInit:function(){this.videochatWrapper=new Element(\"div\",{\"id\":\"videochatWrapper\"}).inject(this.content);this.actions=new Element(\"div\",{\"class\":\"actions\"}).inject(this.content);this.endButton=new ButtonMedium({displayName:\"End Conference\",className:\"dark\",action:\"cross\"});$(this.endButton).inject(this.actions);$(this.endButton).addEvent(\"click\",this.fireEvent.bind(this,[\"videoChatEnd\"]));},onShow:function(){this.resetSwf();},resetSwf:function(){var flashvars={bridgeName:\"videochat\"};var params={menu:\"false\",allowscriptaccess:\"always\",play:\"true\",quality:\"high\",flashvars:\"bridgeName=videochat\",allowFullScreen:\"true\",wmode:\"window\"};var attributes={id:\"videochat\",name:\"videochat\"};swfobject.embedSWF(\"/swf/VideoChat.swf\",\"videochatWrapper\",\"400\",\"300\",\"10.0.0\",\"expressInstall.swf\",flashvars,params,attributes);},onHide:function(){}});var Appstore=new Class({Extends:App,onStart:function(){this.setupNav();},onStop:function(){},userLoggedIn:function(){},userLoggedOut:function(){this.stop();}});Appstore.implement({requests:[{name:\"apps_get_all\",url:\"/api/apps/app/get_all\"},{name:\"app_create\",params:[\"name\",\"type\",\"likes\",\"state\"],url:\"/api/apps/app/create\"},{name:\"app_update\",params:[\"app_id\",\"name\",\"type\",\"likes\",\"state\"],url:\"/api/apps/app/update\"},{name:\"app_likes_increment\",params:[\"app_id\"],url:\"/api/apps/app/increment\"},{name:\"app_likes_decrement\",params:[\"app_id\"],url:\"/api/apps/app/decrement\"}]});Appstore.implement({setupNav:function(){this.navAdd(new Nav({iconOptions:{iconName:\"updates\"},displayName:\"All Applications\",name:\"apps\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"apps\",\"apps\"])}));var menu=new AppstoreMenu({isDefault:true,closeFunc:this.stop.bind(this)});this.menuAdd(\"apps\",menu);var content=new AppstoreContent({isDefault:true});this.contentAdd(\"apps\",content);}});var AppstoreContent=new Class({Extends:Content,EventHandlers:[\"appInstalled\",\"appUninstalled\"],onBeforeInit:function(options){return options;},onInit:function(){this.loaded=false;this.loader=new ItemLoader({idField:\"app_id\",sortField:\"name\",sortAlpha:true,createElementFunc:AppstoreItemUtility.createAppstoreItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"There are no apps to install\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Applications loading...\"})});$(this.loader).inject(this.content);this.appsInstalled=UserUtility.getInstalledApps();},onShow:function(first){if(first){this.call(\"appstore\",\"apps_get_all\",null,this.loadAppsSuccess.bind(this),null);}this.loader.showLoading();},onHide:function(){},loadAppsSuccess:function(data){this.loader.hideLoading();if(!$defined(data.apps)||data.apps.length==0){}data.apps.each(function(app){if($defined(this.appsInstalled[app.app_id])){app.installed=true;}else{app.installed=false;}this.loader.process(app);},this);},appInstalled:function(data){if(!$defined(data.app_id)){return;}if($defined($(\"appstore_item_\"+data.app_id))){$(\"appstore_item_\"+data.app_id).addClass(\"installed\");$(\"appstore_item_\"+data.app_id).removeClass(\"uninstalled\");}},appUninstalled:function(data){if(!$defined(data.app_id)){return;}if($defined($(\"appstore_item_\"+data.app_id))){$(\"appstore_item_\"+data.app_id).removeClass(\"installed\");$(\"appstore_item_\"+data.app_id).addClass(\"uninstalled\");}}});var AppstoreMenu=new Class({Extends:Menu,EventHandlers:[],onBeforeInit:function(options){options.displayName=\"Pip.io App Store\";return options;},onInit:function(){var appstoreText=\"You can install apps on your Pip.io account to add additional features.  More apps are coming very soon!\";var appstoreText2=\"If you're a developer and interested in creating an app for the Pip.io platform, please contact developers@pip.io\";new Element(\"div\",{\"class\":\"text_section light1\",\"text\":TextUtility.unescape(appstoreText)}).inject(this.menu);new Element(\"div\",{\"class\":\"text_section light1 text11\",\"text\":TextUtility.unescape(appstoreText2)}).inject(this.menu);}});var AppstoreItemUtility={createAppstoreItem:function(app){var el=ItemUtility.createPostBubble(\"post app\",true);el.set(\"id\",\"appstore_item_\"+app.app_id);var installMethod=app.name+\"Install\";var uninstallMethod=app.name+\"Uninstall\";new Element(\"img\",{\"class\":\"app_icon\",\"src\":app.info.icon}).inject(el);new Element(\"div\",{\"class\":\"description\",\"text\":TextUtility.unescape(app.info.description)}).inject(el);var appname=new Element(\"div\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(app.display_name)}).inject(el);if(app.type==3){var installButton=new ButtonMedium({displayName:\"Coming Soon!\",action:\"goto dark\"});new Element(\"div\",{\"class\":\"actions\"}).adopt($(installButton)).inject(el);}else{var uninstallButton=new ButtonMedium({className:\"uninstall\",displayName:\"Uninstall Application\",action:\"goto dark\"});$(uninstallButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[uninstallMethod,app]));var installButton=new ButtonMedium({className:\"install\",displayName:\"Install Application\",action:\"goto dark\"});$(installButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[installMethod,app]));if(app.installed){el.addClass(\"installed\");}else{el.addClass(\"uninstalled\");}new Element(\"div\",{\"class\":\"actions\"}).adopt($(installButton),$(uninstallButton)).inject(el);}return el;}};var Contacts=new Class({Extends:App,EventHandlers:[\"userSwitched\",\"userStatusUpdated\",\"userStatusCleared\",\"userOnline\",\"userOffline\",\"userPresenceReceived\",\"selfPresenceReceived\",\"selfPresenceUpdate\",\"userVideoEnabled\",\"showStatusUpdatePopup\",\"userProfilePicUpdated\",\"xmppConnected\",\"xmppConnecting\",\"xmppDisconnected\",\"contactAdded\",\"contactGroupAdded\",\"contactDeleted\",\"contactGroupDeleted\",\"contactGroupMoved\",\"contactRequestAdded\",\"contactRequestDeleted\",\"connectionRequestAccept\",\"connectionRequestDelete\",\"connectionRequestCreate\",\"connectionDelete\",\"userSubscribe\",\"userUnsubscribe\",\"showGroupPickerPopup\",\"showCreateGroupPopup\"],onStart:function(){this.setupNav();},onStop:function(){},userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){this.start();this.initBuddylist();},userLoggedOut:function(){this.stop();},onCreate:function(){this.minButtonAction=new Element(\"div\",{\"class\":\"action pivot_up\"});this.minButton=new Element(\"div\",{\"class\":\"button_nav\"}).adopt(this.minButtonAction).inject(\"self\");this.minButton.addEvent(\"click\",this.toggleNav.bind(this));this.navHeader.destroy();this.connecting=new Element(\"div\",{\"class\":\"connect_state\"}).adopt(new Element(\"div\",{\"class\":\"connect_text light2\",\"text\":\"Connecting to Pip.io...\"}),new Element(\"div\",{\"class\":\"progress\"})).inject(\"nav\");DomUtility.hide(this.navSection);},onDestroy:function(){this.connecting.destroy();},toggleNav:function(){if(!this.isExpanded){this.expand();}else{this.collapse();}},expand:function(){if(!this.isExpanded){DomUtility.expand(this.navWrapper);this.minButtonAction.addClass(\"pivot_up\");this.minButtonAction.removeClass(\"pivot_down\");this.isExpanded=true;}},collapse:function(){if(this.isExpanded){DomUtility.collapse(this.navWrapper);this.minButtonAction.addClass(\"pivot_down\");this.minButtonAction.removeClass(\"pivot_up\");this.isExpanded=false;}},xmppConnected:function(){DomUtility.show(this.navSection);DomUtility.hide(this.connecting);},xmppDisconnected:function(){DomUtility.show(this.connecting);DomUtility.hide(this.navSection);},xmppConnecting:function(){DomUtility.show(this.connecting);DomUtility.hide(this.navSection);},connectionDelete:function(username){this.call(\"contacts\",\"connection_delete\",{username:username},null,null);},connectionRequestCreate:function(username){this.call(\"contacts\",\"connection_request_create\",{username:username},null,null);},connectionRequestAccept:function(username){this.call(\"contacts\",\"connection_request_accept\",{username:username},null,null);},connectionRequestDelete:function(username){this.call(\"contacts\",\"connection_request_delete\",{username:username},null,null);},userSubscribe:function(username){this.call(\"contacts\",\"user_subscribe\",{username:username},null,null);},userUnsubscribe:function(username){this.call(\"contacts\",\"user_unsubscribe\",{username:username},null,null);},userProfilePicUpdated:function(data){if(!$defined(data.username)){return;}var user=this.getUser(data.username);var user_id=user.user_id;var username=user.username;var version=UserUtility.profilePicVersionGet(user_id);version++;UserUtility.profilePicVersionSet(user_id,version);user.profile_pic_16=user.profile_pic_16.split(\"?\")[0]+\"?\"+version;user.profile_pic_20=user.profile_pic_20.split(\"?\")[0]+\"?\"+version;user.profile_pic_26=user.profile_pic_26.split(\"?\")[0]+\"?\"+version;user.profile_pic_32=user.profile_pic_32.split(\"?\")[0]+\"?\"+version;user.profile_pic_42=user.profile_pic_42.split(\"?\")[0]+\"?\"+version;user.profile_pic_60=user.profile_pic_60.split(\"?\")[0]+\"?\"+version;user.profile_pic_100=user.profile_pic_100.split(\"?\")[0]+\"?\"+version;user.profile_pic_200=user.profile_pic_200.split(\"?\")[0]+\"?\"+version;$$(\".profile_pic_16_\"+username).each(function(el){el.set(\"src\",user.profile_pic_16);});$$(\".profile_pic_20_\"+username).each(function(el){el.set(\"src\",user.profile_pic_20);});$$(\".profile_pic_60_\"+username).each(function(el){el.set(\"src\",user.profile_pic_60);});$$(\".profile_pic_26_\"+username).each(function(el){el.set(\"src\",user.profile_pic_26);});$$(\".profile_pic_32_\"+username).each(function(el){el.set(\"src\",user.profile_pic_32);});$$(\".profile_pic_42_\"+username).each(function(el){el.set(\"src\",user.profile_pic_42);});$$(\".profile_pic_100_\"+username).each(function(el){el.set(\"src\",user.profile_pic_100);});$$(\".profile_pic_200_\"+username).each(function(el){el.set(\"src\",user.profile_pic_200);});},destroyApp:function(){this.contents.each(function(content){content.destroy();});this.contents.empty();this.menus.each(function(menu){menu.destroy();});this.menus.empty();this.navs.each(function(nav){nav.destroy();});this.navs.empty();this.navHeader.destroy();this.nav.destroy();this.navSection.destroy();this.fireEvent(\"appClose\",this.appId);if($defined(this.onDestroy)){this.onDestroy();}}});Contacts.implement({initBuddylist:function(){this.contacts=$H();this.contactRequests=$H();this.groups=$H();this.css=new CSS();this.getGroups().each(function(group){this.groupAdd(group);},this);this.getContacts().each(function(user){this.contactAdd(user);},this);this.getContactRequests().each(function(user){this.contactRequestAdd(user);},this);},contactAdded:function(user){if(this.contacts.has(user.username)){return;}this.contactAdd(user);},contactDeleted:function(username){this.contactDelete(username);},contactRequestAdded:function(user){if(this.contactRequests.has(user.username)){return;}this.contactRequestAdd(user);},contactRequestDeleted:function(username){if(!this.contactRequests.has(username)){return;}this.contactRequestDelete(username);},contactGroupAdded:function(group){if(this.groups.has(group.group_id)){return;}this.groupAdd(group);},contactGroupDeleted:function(group){if(!this.groups.has(group.group_id)){return;}this.groupDelete(group);},contactGroupMoved:function(user){this.contactDelete(user.username);Logger().log(\"contactGroupMoved \"+user.username+\" group_id \"+user.group_id);this.contactAdd(user);},selfPresenceUpdate:function(show){if($defined(show)&&this.getPrivateUser().show==show){return;}if($defined(show)){this.getPrivateUser().show=show;}this.p.xmpp.updateSelfPresence(this.getPrivateUser().show,true);},userVideoEnabled:function(username,videoEnabled){if(this.contacts.has(username)){this.contacts.get(username).videoEnabled(videoEnabled);}},userStatusUpdated:function(data){if($defined(this.contacts)&&this.contacts.has(data.username)){this.contacts.get(data.username).statusMsgUpdated(data.status_message.status);}},userStatusCleared:function(data){if($defined(this.contacts)&&this.contacts.has(data.username)){this.contacts.get(data.username).statusMsgUpdated(\"\");}},userOnline:function(username){if(this.contacts.has(username)){var user=this.getContact(username);if(user.status_message.status==\"\"){this.contacts.get(username).online(false);}else{this.contacts.get(username).online(true);}if(!user.online){user.online=true;}}},userOffline:function(username){if(this.contacts.has(username)){this.contacts.get(username).offline();var user=this.getContact(username);if(user.online){user.online=false;}}},userPresenceReceived:function(username,show,online){if(online){this.userOnline(username);if(show==\"\"){this.setUserOnlineClass(username);}else{if(show==\"away\"){this.setUserAwayClass(username);}else{if(show==\"xa\"){this.setUserIdleClass(username);}else{if(show==\"dnd\"){this.userOffline(username);this.setUserOfflineClass(username);}}}}}else{this.userOffline(username);this.setUserOfflineClass(username);}this.getContact(username).show=show;},selfPresenceReceived:function(show,online){if(online){if(show==\"\"){this.setUserOnlineClass(this.getPrivateUser().username);}else{if(show==\"away\"){this.setUserAwayClass(this.getPrivateUser().username);}else{if(show==\"xa\"){this.setUserIdleClass(this.getPrivateUser().username);}else{if(show==\"dnd\"){this.setUserOfflineClass(this.getPrivateUser().username);}}}}}else{this.setUserOfflineClass(this.getPrivateUser().username);}},setUserOnlineClass:function(username){this.css.add_rule(\".online_status_\"+username,{\"border-color\":\"#42a409 !important\"}).refresh();},setUserIdleClass:function(username){this.css.add_rule(\".online_status_\"+username,{\"border-color\":\"#cc8513 !important\"}).refresh();},setUserAwayClass:function(username){this.css.add_rule(\".online_status_\"+username,{\"border-color\":\"#b0191f !important\"}).refresh();},setUserOfflineClass:function(username){this.css.remove_rule(\".online_status_\"+username);this.css.refresh();}});Contacts.implement({requests:[{name:\"connection_group_create\",params:[\"name\"],url:\"/api/user/connection/group/create\"},{name:\"connection_group_delete\",params:[\"group_id\"],url:\"/api/user/connection/group/delete\"},{name:\"connection_group_move\",params:[\"username\",\"group_id\"],url:\"/api/user/connection/group/move\"},{name:\"connection_delete\",params:[\"username\"],url:\"/api/user/connection/delete\"},{name:\"connection_request_create\",params:[\"username\"],url:\"/api/user/connection/request/create\"},{name:\"connection_request_accept\",params:[\"username\"],url:\"/api/user/connection/request/accept\"},{name:\"connection_request_delete\",params:[\"username\"],url:\"/api/user/connection/request/delete\"},{name:\"user_subscribe\",params:[\"username\"],url:\"/api/user/stream/subscribe\"},{name:\"user_unsubscribe\",params:[\"username\"],url:\"/api/user/stream/unsubscribe\"},{name:\"search_user\",params:[\"query\"],url:\"/api/user/search/user\"},{name:\"search_email\",params:[\"email_address\",\"password\"],url:\"/api/user/search/email\"},{name:\"invite_create\",params:[\"email\",\"message\"],url:\"/api/user/invite/create\"}]});Contacts.implement({setupNav:function(){this.navAdd(new Nav({iconOptions:{iconName:\"contacts\",iconAction:\"add\"},hasSubnavs:true,onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"contact_requests\",\"contact_requests\"]),displayName:\"Contact Requests\",defaultClosed:true,name:\"requests\"}));var contactRequestsMenu=new ContactRequestsMenu({displayName:\"Contact Requests\"});this.menuAdd(\"contact_requests\",contactRequestsMenu);var content=new ContactRequestsContent();this.contentAdd(\"contact_requests\",content);this.navAdd(new Nav({iconOptions:{iconName:\"search\"},displayName:\"Search Users...\",onClick:this.fireEvent.bind(this,[\"searchUserShow\"]),name:\"search_user\",bottom:true}));this.navAdd(new Nav({iconOptions:{iconName:\"contacts\",iconAction:\"add\"},displayName:\"Create New Group...\",onClick:this.fireEvent.bind(this,[\"showCreateGroupPopup\"]),name:\"new_group\",bottom:true}));},groupAdd:function(group){var groupNav=new GroupNav({group:group,onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"group_\"+group.group_id,\"menu_\"+group.group_id])});this.navAdd(groupNav);this.groups.set(group.group_id,groupNav);if(group.group_id!=0){var groupMenu=new GroupMenu({displayName:group.name,group:group});}else{var groupMenu=new GroupMenu({displayName:group.name,group:group,unsorted:true});}this.menuAdd(\"menu_\"+group.group_id,groupMenu);var content=new GroupContent({group:group});this.contentAdd(\"group_\"+group.group_id,content);},groupDelete:function(group){this.navDelete(\"group_\"+group.group_id);this.menuClose(\"menu_\"+group.group_id);this.contentClose(\"group_\"+group.group_id);},contactAdd:function(user){var contactNav=new ContactNav({user:user});this.navAdd(contactNav);this.contacts.set(user.username,contactNav);},contactDelete:function(username){if(!this.contacts.has(username)){return;}this.contacts.get(username).destroy();this.navDelete(\"contact_\"+username);this.contacts.erase(username);},contactRequestAdd:function(user){var contactNav=new ContactRequestNav({user:user});this.navAdd(contactNav);this.contactRequests.set(user.username,contactNav);this.fireEvent(\"alertAdd\",\"1_requests\");},contactRequestDelete:function(username){if(!this.contactRequests.has(username)){return;}Logger().log(\"deleting contact request nav \"+username);this.contactRequests.get(username).destroy();this.contactRequests.erase(username);this.navDelete(\"contact_request_\"+username);this.fireEvent(\"alertClear\",\"1_requests\",1);},showStatusUpdatePopup:function(){if($defined(this.statusUpdatePopup)){this.statusUpdatePopup.close();}this.createStatusUpdatePopup();},createStatusUpdatePopup:function(){this.statusUpdatePopup=new Popup({size:{x:350,y:100},resizable:false,dockable:false,className:\"statusUpdate\",onClose:this.destroyStatusUpdatePopup.bind(this)});var nav=new Nav({iconOptions:{user:this.getPrivateUser()},displayName:\"Update Your Status\",closable:true});var content=new StatusUpdatePopupContent({user:this.getPrivateUser()});this.statusUpdatePopup.addContent(\"status_update\",nav,content);},destroyStatusUpdatePopup:function(){this.statusUpdatePopup=null;},showGroupPickerPopup:function(user){if($defined(this.groupPickerPopup)){this.groupPickerPopup.close();}this.createGroupPickerPopup(user);},createGroupPickerPopup:function(user){this.groupPickerPopup=new Popup({size:{x:200,y:250},resizable:false,dockable:false,className:\"groupPicker\",onClose:this.destroyGroupPickerPopup.bind(this)});var nav=new Nav({iconOptions:{user:user},displayName:\"Edit \"+TextUtility.unescape(user.fullname),closable:true});var content=new GroupPickerPopupContent({user:user});this.groupPickerPopup.addContent(\"group_picker\",nav,content);},destroyGroupPickerPopup:function(){this.groupPickerPopup=null;},showCreateGroupPopup:function(){if($defined(this.createGroupPopup)){this.createGroupPopup.close();}this.createCreateGroupPopup();},createCreateGroupPopup:function(){this.createGroupPopup=new Popup({size:{x:350,y:74},resizable:false,dockable:false,className:\"createGroup\",onClose:this.destroyCreateGroupPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"contacts\",iconAction:\"add\"},displayName:\"Create New Group\",closable:true});var content=new CreateGroupPopupContent({});this.createGroupPopup.addContent(\"create_group\",nav,content);},destroyCreateGroupPopup:function(){this.createGroupPopup=null;}});var ContactRequestsContent=new Class({Extends:Content,EventHandlers:[\"contactRequestAdded\",\"contactRequestDeleted\"],onInit:function(){this.loaded=false;this.loader=new ItemLoader({idField:\"username\",sortField:\"last_name\",sortAlpha:true,createElementFunc:ContactItemUtility.createContactRequestItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"You do not have any contact requests\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.populateContacts();}},onHide:function(){},populateContacts:function(){var contacts=this.getContactRequests();contacts.each(function(user){this.loader.process(user);},this);this.loaded=true;},contactRequestAdded:function(user){this.loader.process(user);},contactRequestDeleted:function(username){this.loader.remove(username);}});var GroupContent=new Class({Extends:Content,EventHandlers:[\"contactAdded\",\"contactDeleted\",\"contactGroupMoved\"],onBeforeInit:function(options){this.group=options.group;return options;},onInit:function(){this.loaded=false;this.loader=new ItemLoader({idField:\"user_id\",sortField:\"last_name\",sortAlpha:true,createElementFunc:ContactItemUtility.createContactItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"There are no contacts in this group\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.populateContacts();}},onHide:function(){},populateContacts:function(){var contacts=this.group.users;contacts.each(function(user){this.loader.process(user);},this);this.loaded=true;},contactAdded:function(user){if(!this.loaded||user.group_id!=this.group.group_id){return;}this.loader.process(user);},contactDeleted:function(username,group_id){if(!this.loaded||group_id!=this.group.group_id){return;}var user=this.getUser(username);this.loader.remove(user.user_id);},contactGroupMoved:function(user){if(user.group_id==this.group.group_id){this.loader.process(user);}else{this.loader.remove(user.user_id);}}});var ContactRequestsMenu=new Class({Extends:Menu,strings:{contactRequestsText:\"These users requested to add you as their contact\"},onInit:function(){new Element(\"div\",{\"class\":\"text_section light1\",\"text\":this.strings.contactRequestsText}).inject(this.menu);}});var GroupMenu=new Class({Extends:Menu,strings:{groupMenuText:'These are contacts in your group \"{0}\"',unsortedGroupMenuText:\"These are contacts that have not been added to a group\"},onBeforeInit:function(options){this.group=options.group;this.unsorted=options.unsorted||false;return options;},onInit:function(){if(this.unsorted){new Element(\"div\",{\"class\":\"text_section light1\",\"text\":String.format(this.strings.unsortedGroupMenuText)}).inject(this.menu);}else{new Element(\"div\",{\"class\":\"text_section light1\",\"text\":String.format(this.strings.groupMenuText,TextUtility.unescape(this.group.name))}).inject(this.menu);}if(!this.unsorted){this.deleteButton=new ButtonMedium({displayName:\"Delete Group\",className:\"dark\",action:\"cross\"});var name=\"groupDelete_\"+this.group.group_id;var title=\"Delete \"+this.group.name;var message=\"Are you sure you want to delete the group \"+this.group.name+\"?\";var func=this.deleteGroup.bind(this);$(this.deleteButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showConfirmation\",name,title,message,func]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.deleteButton)).inject(this.menu);}},deleteGroup:function(){var params={group_id:this.group.group_id};this.call(\"contacts\",\"connection_group_delete\",params,this.deleteGroupSuccess.bind(this),this.deleteGroupFail.bind(this));this.deleteButton.showProgress();},deleteGroupSuccess:function(data){this.deleteButton.hideProgress();},deleteGroupFail:function(){this.deleteButton.hideProgress();}});var ContactNav=new Class({Extends:Nav,onBeforeInit:function(options){this.user=options.user;this.isOnline=false;options.name=\"contact_\"+this.user.username;options.iconOptions={user:this.user};options.onClick=this.fireEvent.bind(this,[\"chatStart\",this.user.username]);options.displayName=this.user.fullname;options.className=\"contact\";options.parentName=\"group_\"+this.user.group_id;return options;},onInit:function(){$(this.icon).destroy();this.icon=new Icon20(this.iconOptions);$(this.icon).inject(this.nav);$(this.icon).addEvent(\"click\",this.openUser.bindWithEvent(this));this.videoChatIcon=new Icon({iconName:\"video_chat\"});$(this.videoChatIcon).inject(this.nav);$(this.videoChatIcon).addEvent(\"click\",this.videoChatStart.bindWithEvent(this));var statusMsg=($defined(this.user.status_message)&&$defined(this.user.status_message.status))?this.user.status_message.status:\"\";this.statusMsg=new Element(\"div\",{\"class\":\"status_msg status_msg_\"+this.user.username,\"text\":TextUtility.unescape(statusMsg)}).inject(this.nav);if(this.user.online){if(statusMsg==\"\"){this.online(false);}else{this.online(true);}}},statusMsgUpdated:function(statusMsg){this.statusMsg.set(\"text\",TextUtility.unescape(statusMsg));if(this.isOnline){if(statusMsg==\"\"){DomUtility.setHeight(this.nav,22);}else{DomUtility.setHeight(this.nav,36);}}},online:function(hasStatus){if(hasStatus){DomUtility.expandFade(this.nav,36);}else{DomUtility.expandFade(this.nav,22);}this.navWrapper.addClass(\"online\");this.isOnline=true;},offline:function(){DomUtility.collapseFade(this.nav);this.navWrapper.removeClass(\"online\");this.isOnline=false;},videoEnabled:function(enabled){if(enabled){this.nav.addClass(\"videoEnabled\");}else{this.nav.removeClass(\"videoEnabled\");}},openUser:function(e){e.stopPropagation();this.fireEvent(\"showUser\",this.user);},videoChatStart:function(e){e.stopPropagation();this.fireEvent(\"videoChatStart\",this.user);}});var ContactRequestNav=new Class({Extends:Nav,onBeforeInit:function(options){this.user=options.user;options.name=\"contact_request_\"+this.user.username;options.iconOptions={user:this.user};options.onClick=this.fireEvent.bind(this,[\"showUser\",this.user]);options.displayName=this.user.fullname;options.className=\"contact request\";options.parentName=\"requests\";return options;},onInit:function(){$(this.icon).destroy();this.icon=new Icon20(this.iconOptions);$(this.icon).inject(this.nav);}});var GroupNav=new Class({Extends:Nav,onBeforeInit:function(options){this.group=options.group;options.name=\"group_\"+this.group.group_id;options.iconOptions={iconName:\"contacts\"};options.displayName=this.group.name;options.className=\"group_nav\";options.hasSubnavs=true;return options;},onInit:function(){this.onlineCount=new Element(\"div\",{\"class\":\"online_count text11 light2\"}).inject(this.nav);DomUtility.hide(this.onlineCount);},onExpand:function(){this.hideOnlineCount();},onCollapse:function(){this.showOnlineCount();},showOnlineCount:function(){this.onlineCount.set(\"text\",this.getOnlineCount());DomUtility.show(this.onlineCount);},hideOnlineCount:function(){DomUtility.hide(this.onlineCount);},getOnlineCount:function(){return this.subnavItems.getChildren(\".online\").length+\"/\"+this.subnavItems.getChildren().length;}});var SubscribersNav=new Class({Extends:Nav,onBeforeInit:function(options){this.users=$H();options.name=\"subscribers\";options.iconOptions={iconName:\"broadcast\"};options.displayName=\"Subscribers\";options.className=\"subscribers_nav\";options.hasSubnavs=true;return options;},onInit:function(){this.clear=new Element(\"div\",{\"style\":\"clear: both\"});this.list=new Element(\"div\",{\"class\":\"menu_list\"}).adopt(this.clear).inject(this.subnavs);},addUsers:function(users){$splat(users).each(function(user){user=UserUtility.processUser(user);if(!this.users.has(user.username)){var pic=ItemUtility.createProfilePic(user,\"16a\");pic.addEvent(\"click\",this.fireEvent.bind(this,[\"showUser\",user]));pic.inject(this.clear,\"before\");this.users.set(user.username,pic);}},this);},removeUser:function(username){if(!this.users.has(username)){return;}this.users.get(username).destroy();this.users.erase(username);}});var SubscriptionsNav=new Class({Extends:Nav,onBeforeInit:function(options){this.users=$H();options.name=\"subscriptions\";options.iconOptions={iconName:\"broadcast\"};options.displayName=\"Subscriptions\";options.className=\"subscribers_nav\";options.hasSubnavs=true;return options;},onInit:function(){this.clear=new Element(\"div\",{\"style\":\"clear: both\"});this.list=new Element(\"div\",{\"class\":\"menu_list\"}).adopt(this.clear).inject(this.subnavs);},addUsers:function(users){$splat(users).each(function(user){user=UserUtility.processSource(user);if(!this.users.has(user.username)){var pic=ItemUtility.createProfilePic(user,\"16a\");if($defined(user.user_id)){pic.addEvent(\"click\",this.fireEvent.bind(this,[\"showUser\",user]));}else{if($defined(user.room_id)){pic.addEvent(\"click\",this.fireEvent.bind(this,[\"showRoom\",user]));}}pic.inject(this.clear,\"before\");this.users.set(user.username,pic);}},this);},removeUser:function(username){if(!this.users.has(username)){return;}this.users.get(username).destroy();this.users.erase(username);}});var ContactPickerPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.contacts=options.contacts;this.contactAddFunc=options.contactAddFunc;this.hasGroups=options.hasGroups||true;if(this.hasGroups){this.groups=options.groups;this.groupAddFunc=options.groupAddFunc;}this.hasAllContacts=options.hasAllContacts||true;if(this.hasAllContacts){this.allContactsAddFunc=options.allContactsAddFunc;}return options;},onInit:function(){this.css=new CSS();this.input=new Element(\"input\",{\"type\":\"text\",\"maxlength\":50});this.input.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.input).inject(this.content);this.list=new Element(\"div\",{\"class\":\"itemList\"}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"cross\"});new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.closeButton)).inject(this.content);$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.insertContacts();this.scroll=new Fx.Scroll(this.list);},insertContacts:function(){if(this.hasAllContacts){var el=ShareBoxUtility.createAllContactsPickerItem();el.addEvent(\"click\",this.addAllContacts.bind(this,[el]));el.inject(this.list);this.insertSeperator();}if(this.hasGroups){this.groups.each(function(group){var el=ShareBoxUtility.createGroupPickerItem(group);el.addEvent(\"click\",this.addGroup.bind(this,[group,el]));el.inject(this.list);},this);this.insertSeperator();}this.contacts.getValues().sort(DataUtility.sortUsers).each(function(user){var el=ShareBoxUtility.createContactPickerItem(user);el.addEvent(\"click\",this.addContact.bind(this,[user,el]));el.inject(this.list);},this);},insertSeperator:function(){new Element(\"div\",{\"class\":\"listItem seperator\"}).inject(this.list);},addAllContacts:function(el){this.allContactsAddFunc();el.destroy();this.closeContent();},addContact:function(user,el){this.contactAddFunc(user);el.destroy();},addGroup:function(group,el){this.groupAddFunc(group);el.destroy();},inputKeyUp:function(e){if(e.key==\"esc\"){e.target.value=\"\";}var val=e.target.value.trim().toLowerCase();if(val.length<2){this.list.removeClass(\"search\");return;}this.list.addClass(\"search\");if($defined(this.lastSelector)){this.css.remove_rule(this.lastSelector);}var selector=\".listItem[val1^='\"+val+\"'], .listItem[val2^='\"+val+\"']\";this.css.add_rule(selector,{\"display\":\"block !important\"}).refresh();this.lastSelector=selector;},focus:function(){this.input.focus.delay(500,this.input);},onClose:function(){if($defined(this.lastSelector)){this.css.remove_rule(this.lastSelector).refresh();}},onShow:function(){if($defined(this.scrollY)){this.scroll.set(0,this.scrollY);}this.focus();},onHide:function(){if($defined(this.list)){this.scrollY=this.list.getScroll().y;}}});var CreateGroupPopupContent=new Class({Extends:PopupContent,strings:{groupNameLabel:\"Group Name:\",errorMessage:\"There was an error creating this group\"},onInit:function(){this.groupNameInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"32\"});this.groupNameInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.groupNameLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.groupNameInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Create Group\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.createGroup.bind(this));this.message=new Element(\"div\",{\"class\":\"message error\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.groupNameInput.value.trim()!=\"\"){this.createGroup();}}},createGroup:function(){var name=this.groupNameInput.value.trim();var params={name:name};this.call(\"contacts\",\"connection_group_create\",params,this.createGroupSuccess.bind(this),this.createGroupFail.bind(this));this.actionButton.showProgress();},createGroupSuccess:function(){this.actionButton.hideProgress();this.closeContent();},createGroupFail:function(){this.actionButton.hideProgress();this.closeContent();},onShow:function(){this.focus();},focus:function(){this.groupNameInput.focus.delay(500,this.groupNameInput);}});var GroupPickerPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.user=options.user;return options;},onInit:function(){this.list=new Element(\"div\",{\"class\":\"itemList\"}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"cross\"});new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.closeButton)).inject(this.content);$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.insertGroups();},insertGroups:function(){var groups=this.getGroups();groups.each(function(group){var el=ShareBoxUtility.createGroupPickerItem(group);if(this.user.group_id==group.group_id){el.addClass(\"on\");this.selectedEl=el;}else{el.addEvent(\"click\",this.groupMove.bind(this,[group,el]));}el.inject(this.list);},this);},groupMove:function(group,el){var params={username:this.user.username,group_id:group.group_id};this.call(\"contacts\",\"connection_group_move\",params,this.groupMoveSucess.bind(this),this.groupMoveFail.bind(this));this.selectedEl.removeClass(\"on\");new Element(\"div\",{\"class\":\"progress\"}).inject(el);},groupMoveSucess:function(data){this.closeContent();},groupMoveFail:function(){this.closeContent();}});var StatusUpdatePopupContent=new Class({Extends:PopupContent,onInit:function(){this.statusInput=new Element(\"textarea\",{\"maxlength\":500});this.statusInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.statusInput).inject(this.content);this.cancelButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.cancelButton).addEvent(\"click\",this.closeContent.bind(this));this.updateButton=new ButtonMedium({displayName:\"Update Status\",className:\"dark\",action:\"check\"});$(this.updateButton).addEvent(\"click\",this.updateStatus.bind(this));new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.updateButton),$(this.cancelButton)).inject(this.content);},onShow:function(){this.focus();},focus:function(){this.statusInput.focus.delay(500,this.statusInput);},inputKeyUp:function(e){if(e.key==\"enter\"){var msg=e.target.value.trim();if(msg==\"\"){return;}this.updateStatus();}},updateStatus:function(){var params={username:\"\",body:this.statusInput.value.trim(),res:this.getSession()};this.call(\"pipio\",\"publish_status\",params,this.updateStatusSuccess.bind(this),this.updateStatusFail.bind(this));this.updateButton.showProgress();},updateStatusSuccess:function(){this.closeContent();},updateStatusFail:function(){alert(\"There was an error updating your status!\");}});var ContactItemUtility={createContactItem:function(user){var el=ItemUtility.createPostBubble(\"post contact\",true);ItemUtility.createProfilePic(user,60).inject(el);var header=new Element(\"div\",{\"class\":\"heading\"}).inject(el);var username=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(user.fullname)}).inject(header);username.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));var status=new Element(\"span\",{\"class\":\"status status_msg_\"+user.username}).inject(header);if(user.status_message.status.trim()!=\"\"){status.set(\"text\",\" \"+TextUtility.unescape(user.status_message.status.trim()));}var viewButton=new ButtonMedium({displayName:\"View Profile\",action:\"goto dark\"});$(viewButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));var editButton=new ButtonMedium({displayName:\"Edit Group\",action:\"status dark\"});$(editButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showGroupPickerPopup\",user]));var deleteButton=new ButtonMedium({displayName:\"Delete Contact\",action:\"cross\"});var name=\"contactDelete_\"+user.username;var title=\"Delete \"+user.fullname;var message=\"Are you sure you want to delete \"+user.fullname+\" from your contacts?\";var func=pipio.dispatchEvent.bind(pipio,[\"connectionDelete\",user.username]);$(deleteButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showConfirmation\",name,title,message,func]));new Element(\"div\",{\"class\":\"actions\"}).adopt($(viewButton),$(editButton),$(deleteButton)).inject(el);return el;},createContactRequestItem:function(user){var el=ItemUtility.createPostBubble(\"post contact\",true);ItemUtility.createProfilePic(user,60).inject(el);var header=new Element(\"div\",{\"class\":\"heading\"}).inject(el);var username=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(user.fullname)}).inject(header);username.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));var status=new Element(\"span\",{\"class\":\"status status_msg_\"+user.username}).inject(header);if(user.status_message.status.trim()!=\"\"){status.set(\"text\",\" \"+TextUtility.unescape(user.status_message.status.trim()));}var viewButton=new ButtonMedium({displayName:\"View Profile\",action:\"goto dark\"});$(viewButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));var acceptButton=new ButtonMedium({displayName:\"Accept Request\",action:\"check\"});$(acceptButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"connectionRequestAccept\",user.username]));var deleteButton=new ButtonMedium({displayName:\"Delete Request\",action:\"cross\"});$(deleteButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"connectionRequestDelete\",user.username]));new Element(\"div\",{\"class\":\"actions\"}).adopt($(viewButton),$(acceptButton),$(deleteButton)).inject(el);return el;},createRoomMemberItemFactory:function(room,isAdmin){return function(user){return ContactItemUtility.createRoomMemberItem.run([user,room,isAdmin]);};},createRoomMemberItem:function(user,room,isAdmin){var el=ItemUtility.createPostBubble(\"post contact\",true);ItemUtility.createProfilePic(user,60).inject(el);var header=new Element(\"div\",{\"class\":\"heading\"}).inject(el);var username=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(user.fullname)}).inject(header);username.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));var status=new Element(\"span\",{\"class\":\"status status_msg_\"+user.username}).inject(header);if(user.status_message.status.trim()!=\"\"){status.set(\"text\",\" \"+TextUtility.unescape(user.status_message.status.trim()));}if(isAdmin&&user.user_id!=pipio.currentUser.user_id){var viewButton=new ButtonMedium({displayName:\"View Profile\",action:\"goto dark\"});$(viewButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));var removeButton=new ButtonMedium({displayName:\"Remove Member\",action:\"cross\"});$(removeButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"feedRoomKick\",user.username,room.username]));new Element(\"div\",{\"class\":\"actions\"}).adopt($(viewButton),$(removeButton)).inject(el);}else{var viewButton=new ButtonMedium({displayName:\"View Profile\",action:\"goto dark\"});$(viewButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));new Element(\"div\",{\"class\":\"actions\"}).adopt($(viewButton)).inject(el);}return el;},createRoomSubscriberItem:function(user){var el=ItemUtility.createPostBubble(\"post contact\",true);ItemUtility.createProfilePic(user,60).inject(el);var header=new Element(\"div\",{\"class\":\"heading\"}).inject(el);var username=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(user.fullname)}).inject(header);username.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));var status=new Element(\"span\",{\"class\":\"status status_msg_\"+user.username}).inject(header);if(user.status_message.status.trim()!=\"\"){status.set(\"text\",\" \"+TextUtility.unescape(user.status_message.status.trim()));}var viewButton=new ButtonMedium({displayName:\"View Profile\",action:\"goto dark\"});$(viewButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));new Element(\"div\",{\"class\":\"actions\"}).adopt($(viewButton)).inject(el);return el;},createRoomRequestItemFactory:function(room){return function(user){return ContactItemUtility.createRoomRequestItem.run([user,room]);};},createRoomRequestItem:function(user,room){var el=ItemUtility.createPostBubble(\"post contact\",true);ItemUtility.createProfilePic(user,60).inject(el);var header=new Element(\"div\",{\"class\":\"heading\"}).inject(el);var username=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(user.fullname)}).inject(header);username.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));var status=new Element(\"span\",{\"class\":\"status status_msg_\"+user.username}).inject(header);if(user.status_message.status.trim()!=\"\"){status.set(\"text\",\" \"+TextUtility.unescape(user.status_message.status.trim()));}var viewButton=new ButtonMedium({displayName:\"View Profile\",action:\"goto dark\"});$(viewButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));var removeButton=new ButtonMedium({displayName:\"Reject Member\",action:\"cross\"});$(removeButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"feedRoomRequestDelete\",user.username,room.username]));var acceptButton=new ButtonMedium({displayName:\"Accept Member\",action:\"check\"});$(acceptButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"feedRoomRequestAccept\",user.username,room.username]));new Element(\"div\",{\"class\":\"actions\"}).adopt($(viewButton),$(removeButton),$(acceptButton)).inject(el);return el;}};var Facebook=new Class({Extends:App,EventHandlers:[\"facebookInstall\",\"facebookUninstall\",\"facebookShowUserFeed\",\"facebookShowUserAlbums\",\"facebookTaggedPhotos\",\"userSwitched\"],parseOptions:function(options){this.settings=options.settings;},userSwitched:function(){if(!this.isLoggedIn()){this.userLoggedOut();}},userLoggedOut:function(){FB.Connect.logout();this.stop();},onStart:function(){this.appId=5;FB_RequireFeatures([\"Connect\"],function(){FB.Facebook.init(\"d29a9328a49d798da896066499c0d9d8\",\"/xd_receiver.htm\",{\"forceBrowserPopupForLogin\":true,\"doNotUseCachedConnectState\":true});});this.appsInstalled=UserUtility.getInstalledApps();if($defined(this.appsInstalled[this.appId])){this.external_user_id=this.appsInstalled[this.appId];}this.setupNav();this.albums=$H();},onStop:function(){},userLoggedIn:function(){},userLoggedOut:function(){this.stop();},facebookInstall:function(){this.facebookInstallPopup=new Popup({size:{x:350,y:80},resizable:false,dockable:false,className:\"appInstall\",onClose:this.destroyFacebookInstallPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"facebook\"},displayName:\"Install Facebook\",closable:true});var content=new FacebookInstallPopupContent({});this.facebookInstallPopup.addContent(\"facebook_install\",nav,content);},destroyFacebookInstallPopup:function(){this.facebookInstallPopup=null;},facebookUninstall:function(app){this.call(\"facebook\",\"facebook_disable\",null,this.facebookUninstallSuccess.bind(this),null);},facebookUninstallSuccess:function(data){this.stop();},facebookShowUserFeed:function(user){this.userAdd(user);},facebookShowUserAlbums:function(user){this.userAlbumsAdd(user);},facebookTaggedPhotos:function(uid){var newAlbum=new Album({id:uid});this.albums.set(uid,newAlbum);var params={user_id:uid,aid:\"\"};this.call(\"facebook\",\"facebook_photos\",params,this.facebookTaggedPhotosSuccess.bind(this),this.facebookTaggedPhotosFail.bind(this));},facebookTaggedPhotosSuccess:function(data){if(!$defined(data.photos)){return;}var album=this.albums.get(data.uid);data.photos.each(function(photo){album.addPhoto(photo.pid,photo.src,photo.src_big,photo.caption);photo.auid=photo.uid;},this);var photo=album.getPhoto(data.photos[0].pid);this.fireEvent(\"viewAlbum\",album,photo,data.uid);},facebookTaggedPhotosFail:function(data){}});Facebook.implement({requests:[{name:\"facebook_enable\",params:[\"sync_posts\",\"session_key\",\"uid\"],url:\"/api/app/facebook/account/enable\"},{name:\"facebook_disable\",url:\"/api/app/facebook/account/disable\"},{name:\"facebook_friends_info\",params:[\"uid\",\"limit\",\"sort_field\",\"number\"],url:\"/api/app/facebook/friends/info\"},{name:\"facebook_newsfeed_load\",params:[\"start_time\",\"end_time\"],url:\"/api/app/facebook/newsfeed/load\"},{name:\"facebook_user_show\",params:[\"user_id\"],url:\"/api/app/facebook/user/profile_load\"},{name:\"facebook_user_feed\",params:[\"user_id\",\"start_time\",\"end_time\"],url:\"/api/app/facebook/user/newsfeed_load\"},{name:\"facebook_settings_update\",params:[\"key\",\"value\"],url:\"/api/app/facebook/settings/update\"},{name:\"facebook_albums\",params:[\"user_id\",\"num_photos\"],url:\"/api/app/facebook/albums/get\"},{name:\"facebook_photos\",params:[\"user_id\",\"aid\"],url:\"/api/app/facebook/photos/get\"},{name:\"facebook_notification_send\",params:[\"user_id\",\"message\"],url:\"/api/app/facebook/notification/send\"},{name:\"facebook_post_text\",params:[\"body\",\"post_id\",\"target_id\"],url:\"/api/app/facebook/text/item_create\"},{name:\"facebook_post_link\",params:[\"body\",\"url\",\"post_id\",\"target_id\"],url:\"/api/app/facebook/link/item_create\"},{name:\"facebook_post_photo\",params:[\"body\",\"photo\",\"post_id\",\"target_id\"],url:\"/api/app/facebook/photo/item_create\",multipart:true},{name:\"facebook_comments\",params:[\"post_id\"],url:\"/api/app/facebook/comments/get\"},{name:\"facebook_feed_delete\",params:[\"post_id\",\"created_time\"],url:\"/api/app/facebook/item/delete\"},{name:\"facebook_settings_get\",url:\"/api/app/facebook/settings/get\"},{name:\"facebook_contacts_list\",params:[\"uid\",\"limit\",\"sort_field\",\"number\"],url:\"/api/app/facebook/friends/info\"},{name:\"facebook_post_like\",params:[\"post_id\",\"like_count\"],url:\"/api/app/facebook/like\"},{name:\"facebook_post_unlike\",params:[\"post_id\",\"like_count\"],url:\"/api/app/facebook/unlike\"}]});Facebook.implement({setupNav:function(){this.users=$H();this.fb_albums=$H();this.navAdd(new Nav({iconOptions:{iconName:\"updates\"},displayName:\"News Feed\",name:\"updates\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"updates\",\"fb_self_menu\"])}));this.navAdd(new Nav({iconOptions:{iconName:\"profile_pic\"},displayName:\"My Wall\",name:\"wall\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"wall\",\"fb_self_menu\"])}));this.navAdd(new Nav({iconOptions:{iconName:\"profile_pic\"},displayName:\"Friends\",name:\"friends\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"friends\",\"fb_self_menu\"])}));this.navAdd(new Nav({iconOptions:{iconName:\"photo\"},displayName:\"My Albums\",name:\"albums\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"albums\",\"fb_self_menu\"])}));var user=this.getPrivateUser();var fbSelfMenu=new FacebookSelfMenu({user:user,isDefault:true,uid:this.settings.uid,closeFunc:this.stop.bind(this)});this.menuAdd(\"fb_self_menu\",fbSelfMenu);var content=new FacebookFeedContent({isDefault:true});this.contentAdd(\"updates\",content);var friendsContent=new FacebookFriendContent({user:user,uid:this.settings.uid});this.contentAdd(\"friends\",friendsContent);var wallContent=new FacebookWallContent({user:user,uid:this.settings.uid});this.contentAdd(\"wall\",wallContent);var albumsContent=new FacebookAlbumContent({uid:this.settings.uid});this.contentAdd(\"albums\",albumsContent);},userClose:function(uid){if(!this.users.has(uid)){return;}this.users.get(uid).destroy();this.navDelete(uid);this.users.erase(uid);this.menuClose(uid);this.contentClose(uid);if(this.users.getLength()==0){this.navDelete(\"users\");this.usersNav=null;}},userAdd:function(user){if(!$defined(this.usersNav)){this.usersNav=new Nav({iconOptions:{iconName:\"users\"},hasSubnavs:true,displayName:\"Users\",name:\"users\"});this.navAdd(this.usersNav);}var nav=new Nav({iconOptions:{iconName:user.pic},displayName:user.username,closable:true,name:user.uid,parentName:\"users\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,user.uid,user.uid])});this.navAdd(nav);this.users.set(user.uid,nav);var userContent=new FacebookUserContent({uid:user.uid});this.contentAdd(user.uid,userContent);var fbUserMenu=new FacebookUserMenu({user:user,uid:user.uid,closeFunc:this.userClose.bind(this,[user.uid])});this.menuAdd(user.uid,fbUserMenu);this.fireEvent(\"viewSwitch\",this.appId,user.uid,user.uid);},albumClose:function(uid){if(!this.fb_albums.has(uid)){return;}this.fb_albums.get(uid).destroy();this.navDelete(uid+\"_albums\");this.fb_albums.erase(uid);this.menuClose(uid+\"_albums\");this.contentClose(uid+\"_albums\");if(this.fb_albums.getLength()==0){this.navDelete(\"albums\");this.userAlbumNav=null;}},userAlbumsAdd:function(user){if(!$defined(this.userAlbumNav)){this.usersAlbumNav=new Nav({iconOptions:{iconName:\"photo\"},hasSubnavs:true,displayName:\"Albums\",name:\"fb_albums\"});this.navAdd(this.usersAlbumNav);}var nav=new Nav({iconOptions:{iconName:user.pic_square},displayName:user.name,closable:true,name:user.uid+\"_albums\",parentName:\"fb_albums\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,user.uid+\"_albums\",user.uid])});this.navAdd(nav);this.fb_albums.set(user.uid,nav);var userAlbumContent=new FacebookAlbumContent({uid:user.uid});this.contentAdd(user.uid+\"_albums\",userAlbumContent);var fbUserMenu=new FacebookUserMenu({user:user,uid:user.uid,closeFunc:this.albumClose.bind(this,[user.uid])});this.menuAdd(user.uid+\"_albums\",fbUserMenu);this.fireEvent(\"viewSwitch\",this.appId,user.uid+\"_albums\",user.uid);}});var FacebookAlbumContent=new Class({Extends:Content,EventHandlers:[\"facebookAlbumView\"],onBeforeInit:function(options){this.uid=options.uid;options.displayName=\"Facebook Albums\";return options;},onInit:function(){this.albums=$H();this.albumsLoader=new ItemLoader({idField:\"aid\",sortField:\"modified_major\",createElementFunc:FacebookAlbumUtility.createFacebookAlbumItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"There are no albums here\"}),errorEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"You are not able to view these albums\"})});$(this.albumsLoader).inject(this.content);},onShow:function(first){if(first){this.getFacebookAlbums();}},onHide:function(){},getFacebookAlbums:function(){var params={user_id:this.uid};this.call(\"facebook\",\"facebook_albums\",params,this.facebookGetAlbumsSuccess.bind(this),this.facebookGetAlbumsFail.bind(this));},facebookGetAlbumsSuccess:function(data){if($defined(data.albums)){data.albums.albums.each(function(album){var pid=album.cover_pid;album.coverSrc=data.albums.sources[pid];this.albumsLoader.process(album);},this);}},facebookGetAlbumsFail:function(data){this.albumsLoader.showError();},facebookAlbumView:function(album){var newAlbum=new Album({id:album.aid});this.albums.set(album.aid,newAlbum);var params={user_id:\"\",aid:album.aid};this.call(\"facebook\",\"facebook_photos\",params,this.facebookAlbumViewSuccess.bind(this),null);},facebookAlbumViewSuccess:function(data){if(!$defined(data.photos)){return;}var album=this.albums.get(data.aid);data.photos.each(function(photo){album.addPhoto(photo.pid,photo.src,photo.src_big,photo.caption);photo.auid=photo.aid;},this);var photo=album.getPhoto(data.photos[0].pid);this.fireEvent(\"viewAlbum\",album,photo,data.aid);}});var FacebookFeedContent=new Class({Extends:Content,EventHandlers:[\"facebookItemDelete\",\"facebookItemLike\",\"facebookCommentsShow\",\"facebookSelfData\",\"facebookCommentsUpdated\",\"facebookFeed\"],onInit:function(){this.loader=new ItemLoader({idField:\"post_id\",sortField:\"created_time\",sortAscending:false,createElementFunc:FacebookFeedItemUtility.createFacebookFeedItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"You have no updates\"})});$(this.loader).inject(this.content);this.comments=new Hash();this.commentLoaders=new Hash();this.posts=new Hash();},onShow:function(first){if(first){this.startPoll();}},onHide:function(){},facebookSelfData:function(user){this.statusBox=new FacebookStatusBox(user,true);$(this.statusBox).inject(this.content,\"top\");},startPoll:function(){if(!$defined(this.pollTimer)){this.pollTimer=this.facebookFeed.periodical(55*1000,this);this.facebookFeed();}},facebookFeed:function(){var startTime=this.loader.lowestSortValue;var params={start_time:startTime,end_time:0};this.call(\"facebook\",\"facebook_newsfeed_load\",params,this.loadMoreSuccess.bind(this),null);},loadMore:function(){var endTime=this.loader.lowestSortValue;var startTime=parseInt(endTime)-259200;var params={start_time:startTime,end_time:endTime};this.call(\"facebook\",\"facebook_newsfeed_load\",params,this.loadMoreSuccess.bind(this),null);},loadMoreSuccess:function(data){if(!$defined(data)||data.length==0){this.atBottom=true;return;}data.each(function(item){this.loader.process(item);this.processComments(item);},this);this.bottomFuncCalled=false;},processComments:function(item){if(this.posts.has(item.post_id)){if(this.posts.get(item.post_id)!=item.comment_count){$$(\".comments_\"+item.post_id).each(function(el){var commentText=TextUtility.pluralText(item.comment_count,\"Comment\",\"Comments\");el.set(\"comments\",item.comment_count);el.empty();el.adopt(new Element(\"div\",{\"class\":\"action convo\"}));el.appendText(commentText);});}var likePost=$$(\".likes_\"+item.post_id);if($defined(likePost[0])){var likesCount=parseInt(likePost[0].get(\"likes\"));if(likesCount!=parseInt(item.like_count)){this.facebookItemLikeSuccess({post_id:item.post_id,liked:item.user_likes,like_count:item.like_count});}}}else{this.posts.set(item.post_id,item.comment_count);}},bottomFunc:function(){Logger().log(\"facebook content bottom\");this.loadMore();},facebookItemDelete:function(post_id,created_time){var params={\"post_id\":post_id,\"created_time\":created_time};this.call(\"facebook\",\"facebook_feed_delete\",params,this.facebookItemDeleteSuccess.bind(this),null);},facebookItemDeleteSuccess:function(data){if(!$defined(data.post_id)){return;}this.loader.remove(data.post_id);},facebookItemLike:function(post_id,likeEl){var user_likes=parseInt(likeEl.get(\"is_liked\"));var like_count=parseInt(likeEl.get(\"likes\"));var params={\"post_id\":post_id,\"like_count\":like_count};if(parseInt(user_likes)==0){this.call(\"facebook\",\"facebook_post_like\",params,this.facebookItemLikeSuccess.bind(this),null);}else{this.call(\"facebook\",\"facebook_post_unlike\",params,this.facebookItemLikeSuccess.bind(this),null);}},facebookItemLikeSuccess:function(data){if(!$defined(data.post_id)){return;}$$(\".likes_\"+data.post_id).each(function(el){el.set(\"likes\",data.like_count);if(data.liked!=-1){el.set(\"is_liked\",data.liked);}el.empty();new Element(\"div\",{\"class\":\"text grey text11\",\"text\":data.like_count,\"likes\":data.like_count}).inject(el);if(data.like_count>0){el.addClass(\"other_liked\");}else{el.removeClass(\"other_liked\");}if(data.liked!=-1){if(data.liked==1){el.addClass(\"on\");}else{el.removeClass(\"on\");}}});},facebookCommentsShow:function(el,post_id){if(this.comments.has(post_id)){this.facebookCommentsHide(post_id);}else{this.comments.set(post_id,el);var commentsLoader=new ItemLoader({idField:\"id\",sortField:\"time\",sortAscending:true,createElementFunc:FacebookCommentItemUtility.createFacebookCommentItem});$(commentsLoader).inject(el,\"after\");this.commentLoaders.set(post_id,commentsLoader);var params={\"post_id\":post_id};this.call(\"facebook\",\"facebook_comments\",params,this.facebookCommentsSuccess.bind(this),null);}},facebookCommentsUpdated:function(post_id){var params={\"post_id\":post_id};this.call(\"facebook\",\"facebook_comments\",params,this.facebookCommentsSuccess.bind(this),null);},facebookCommentsHide:function(post_id){var loader=this.commentLoaders.get(post_id);loader.items.each(function(value,key){loader.remove(key);},this);this.commentLoaders.erase(post_id);this.comments.erase(post_id);},facebookCommentsSuccess:function(data){if(!$defined(data.post_id)){return;}var loader=this.commentLoaders.get(data.post_id);if(!$defined(data.comment_list)||data.comment_list.length==0){this.atBottom=true;return;}data.comment_list.each(function(item){loader.process(item);},this);this.bottomFuncCalled=false;}});var FacebookFriendContent=new Class({Extends:Content,EventHandlers:[],onBeforeInit:function(options){this.user=options.user;this.uid=options.uid;},onInit:function(){this.loader=new ItemLoader({idField:\"uid\",sortField:\"last_name\",createElementFunc:FacebookFriendItemUtility.createFacebookFriendItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"You have no friends!\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){var params={\"uid\":this.uid,\"limit\":50,\"sort_field\":\"last_name\",\"number\":\"\"};this.call(\"facebook\",\"facebook_friends_info\",params,this.facebookFriendsSuccess.bind(this),null);}},onHide:function(){},facebookFriendsSuccess:function(data){if(!$defined(data)||data.length==0){return;}data.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},bottomFunc:function(){var curBatch=this.loader.count();var nextBatch=curBatch+50;var params={\"uid\":this.uid,\"limit\":curBatch+\",\"+nextBatch,\"sort_field\":\"last_name\",\"number\":\"\"};this.call(\"facebook\",\"facebook_friends_info\",params,this.facebookFriendsSuccess.bind(this),null);}});var FacebookUserContent=new Class({Extends:Content,EventHandlers:[\"facebookUserData\"],onBeforeInit:function(options){this.uid=options.uid;this.name=options.username;options.displayName=options.username;return options;},onInit:function(){this.loader=new ItemLoader({idField:\"post_id\",sortField:\"created_time\",sortAscending:false,createElementFunc:FacebookFeedItemUtility.createFacebookFeedItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"This user has no updates\"})});$(this.loader).inject(this.content);if($defined(this.uid)){this.startPoll();}},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},startPoll:function(){if(!$defined(this.userPollTimer)){this.userPollTimer=this.fbUserFeed.periodical(55*1000,this);this.fbUserFeed();}},fbUserFeed:function(){var startTime=this.loader.lowestSortValue;var params={user_id:this.uid,start_time:startTime,end_time:0};this.call(\"facebook\",\"facebook_user_feed\",params,this.loadMoreSuccess.bind(this),null);},facebookUserData:function(user){if((user.uid!=this.uid)||($defined(this.statusBox))){return;}this.statusBox=new FacebookStatusBox(user,false);$(this.statusBox).inject(this.content,\"top\");},loadMore:function(){var endTime=this.loader.lowestSortValue;var startTime=parseInt(endTime)-259200;var params={user_id:this.uid,start_time:startTime,end_time:endTime};this.call(\"facebook\",\"facebook_user_feed\",params,this.loadMoreSuccess.bind(this),null);},loadMoreSuccess:function(data){if(!$defined(data.feed)||data.feed.length==0){this.atBottom=true;return;}data.feed.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},bottomFunc:function(){Logger().log(\"facebook content bottom\");this.loadMore();}});var FacebookWallContent=new Class({Extends:Content,EventHandlers:[\"facebookSelfData\"],onBeforeInit:function(options){this.uid=options.uid;options.displayName=options.username;return options;},onInit:function(){this.loader=new ItemLoader({idField:\"post_id\",sortField:\"created_time\",sortAscending:false,createElementFunc:FacebookFeedItemUtility.createFacebookFeedItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"You have no updates\"})});$(this.loader).inject(this.content);if($defined(this.uid)){this.startPoll();}},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},startPoll:function(){if(!$defined(this.wallPollTimer)){this.wallPollTimer=this.fbUserFeed.periodical(55*1000,this);this.fbUserFeed();}},fbUserFeed:function(){var startTime=this.loader.lowestSortValue;var params={user_id:this.uid,start_time:startTime,end_time:0};this.call(\"facebook\",\"facebook_user_feed\",params,this.loadMoreSuccess.bind(this),null);},facebookSelfData:function(user){if($defined(this.statusBox)){return;}this.statusBox=new FacebookStatusBox(user,true);$(this.statusBox).inject(this.content,\"top\");},loadMore:function(){var endTime=this.loader.lowestSortValue;var startTime=parseInt(endTime)-259200;var params={user_id:this.uid,start_time:startTime,end_time:endTime};this.call(\"facebook\",\"facebook_user_feed\",params,this.loadMoreSuccess.bind(this),null);},loadMoreSuccess:function(data){if(!$defined(data.feed)||data.feed.length==0){this.atBottom=true;return;}data.feed.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},bottomFunc:function(){Logger().log(\"facebook content bottom\");this.loadMore();}});var FacebookShareBox=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"facebookShareBoxShow\",\"facebookCommentBoxShow\"],init:function(){this.shareboxes=$H();},userSwitched:function(){if(!this.isLoggedIn()){this.userLoggedOut();}},userLoggedOut:function(){this.shareboxes.each(function(sharebox,key){sharebox.close();this.shareboxes.erase(key);},this);this.shareboxes=$H();},facebookShareBoxShow:function(user,isSelf){if($defined(this.sharebox)){this.sharebox.close();}this.createShareBox(user,isSelf);},createShareBox:function(user,isSelf){this.sharebox=new Popup({size:{x:500,y:100},resizable:false,dockable:false,className:\"facebook sharebox\",onClose:this.destroyShareBox.bind(this)});var displayName=(isSelf)?\"Write in Your Facebook Feed\":\"Write on \"+user.first_name+\"'s Wall\";var nav=new Nav({iconOptions:{iconName:user.pic_square},displayName:displayName,closable:true});var content=new FacebookShareBoxPopupContent({user:user,is_self:isSelf});this.sharebox.addContent(\"sharebox\",nav,content);},facebookCommentBoxShow:function(post_id){if($defined(this.commentbox)){this.commentbox.close();}this.createCommentBox(post_id);},createCommentBox:function(post_id){this.sharebox=new Popup({size:{x:500,y:100},resizable:false,dockable:false,className:\"facebook sharebox\",onClose:this.destroyShareBox.bind(this)});var displayName=\"Comment on a post\";var nav=new Nav({iconOptions:{iconName:\"updates\"},displayName:displayName,closable:true});var content=new FacebookShareBoxPopupContent({post_id:post_id,is_self:true});this.sharebox.addContent(\"sharebox\",nav,content);},destroyShareBox:function(name){this.sharebox=null;}});var FacebookShareBoxPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.user=options.user;this.post_id=options.post_id;if(!options.is_self){this.target_id=this.user.uid;}return options;},reset:function(){Logger().log(\"resetting\");this.closeAttachmentPopup();this.content.empty();this.onInit();},onInit:function(){this.formEl=null;this.isPublic=true;this.readyToPost=false;this.input=new Element(\"textarea\",{\"maxlength\":2000});this.input.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.input).inject(this.content);this.cancelButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"cross\"});$(this.cancelButton).addEvent(\"click\",this.closeContent.bind(this));this.updateButton=new ButtonMedium({displayName:\"Post\",className:\"dark\",action:\"check\"});$(this.updateButton).addEvent(\"click\",this.post.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.updateButton),$(this.cancelButton)).inject(this.content);this.focus();},inputKeyUp:function(e){if(e.shift&&e.key==\"enter\"){e.preventDefault();this.post();}if(DomUtility.textareaAutoSize(e.target,40)){this.updateSize();}},updateSize:function(){var h=this.input.getSize().y+10;h+=this.actions.getSize().y+30;this.resizePopup(500,h);},post:function(){var body=this.input.value.trim();Logger().log(body);if(body==\"\"&&this.attachment.type==AttachmentType.None){this.fireEvent(\"showAlert\",\"empty_post\",\"Problem Posting\",\"Please enter some content to post.\");return;}if(!$defined(this.post_id)){this.post_id=\"\";}if(!$defined(this.target_id)){this.target_id=0;}var params={\"body\":body,\"post_id\":this.post_id,\"target_id\":this.target_id};this.call(\"facebook\",\"facebook_post_text\",params,this.postSuccess.bind(this),this.postFail.bind(this),this.formEl);this.updateButton.showProgress();},postSuccess:function(){this.updateButton.hideProgress();this.closeContent();if($defined(this.post_id)){this.fireEvent(\"facebookCommentsUpdated\",this.post_id);}this.fireEvent(\"facebookFeed\");},postFail:function(){this.updateButton.hideProgress();},onShow:function(){this.focus();},focus:function(){this.input.focus.delay(500,this.input);}});var FacebookStatusBox=new Class({Extends:Base,EventHandlers:[],init:function(user,isSelf){this.user=user;this.isSelf=isSelf;this.defaultStatus=\"has no current status\";this.createStatusBox();},createStatusBox:function(){this.box=ItemUtility.createPostBubble(\"post status_message haspic\");ItemUtility.createItemPic(this.user.pic_square).inject(this.box);var buttonText=this.isSelf?\"Write in Your Feed\":\"Write on \"+this.user.first_name+\"'s Wall\";this.writeButton=new Element(\"div\",{\"class\":\"button\",\"text\":TextUtility.unescape(buttonText)}).inject(this.box);this.writeButton.addEvent(\"click\",this.fireEvent.bind(this,[\"facebookShareBoxShow\",this.user,this.isSelf]));this.content=new Element(\"div\",{\"class\":\"post_content\"}).inject(this.box);var header=new Element(\"div\",{\"class\":\"header\"}).inject(this.content);var creator=new Element(\"span\",{\"class\":\"user_name\",\"text\":TextUtility.unescapeQuotes(this.user.name)}).inject(header);this.status=new Element(\"span\",{\"class\":\"status\"}).inject(header);this.updateStatus();},updateStatus:function(){if($defined(this.user.status.message)&&this.user.status.message!=\"\"){this.status.removeClass(\"empty\");this.status.set(\"text\",\" \"+TextUtility.unescape(this.user.status.message.trim()));}else{this.status.addClass(\"empty\");this.status.set(\"text\",\" \"+TextUtility.unescape(this.defaultStatus));}},toElement:function(){return this.box;}});var FacebookUserMenu=new Class({Extends:Menu,onBeforeInit:function(options){this.uid=options.user.uid;this.name=options.user.username;options.displayName=this.name;options.className=\"facebook\";this.pic=options.user.pic;this.user=options.user;return options;},onInit:function(){this.aboutSection=new Element(\"div\",{\"class\":\"text_section light1\"}).inject(this.menu);this.call(\"facebook\",\"facebook_user_show\",{user_id:this.uid},this.profileShowSuccess.bind(this),null);},profileShowSuccess:function(data){if(!$defined(data)||data==\"\"){return;}this.user=data;if(data.pic_square==\"\"){data.pic_square;}this.pic=new Element(\"div\",{\"class\":\"user_pic\"}).inject(this.menu);ItemUtility.createItemPic(data.pic_square).inject(this.pic);var location=\"\";if($defined(data.current_location.city)){location=data.current_location.city;if($defined(data.current_location.state)){location=location+\", \"+data.current_location.state;}}else{if($defined(data.current_location.state)){location=data.current_location.state;}else{if($defined(data.current_location.country)){location+=\" \"+data.current_location.country;}}}if(location!=\"\"){this.locSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Location: \"}),new Element(\"span\",{\"text\":location})).inject(this.menu);}if($defined(data.affiliations)&&data.affiliations.length>0){var networks=\"\";for(var i=0;i<data.affiliations.length-1;i++){networks+=data.affiliations[i].name+\", \";}networks+=data.affiliations[i].name;this.networksSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Networks: \"}),new Element(\"span\",{\"text\":networks})).inject(this.menu);}if($defined(data.sex)&&data.sex!=\"\"){this.genderSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Gender: \"}),new Element(\"span\",{\"text\":data.sex})).inject(this.menu);}if($defined(data.birthday)&&data.birthday!=\"\"){this.genderSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Birthday: \"}),new Element(\"span\",{\"text\":data.birthday})).inject(this.menu);}if($defined(data.relationship_status)&&data.relationship_status!=\"\"){this.relationSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Relationship Status: \"}),new Element(\"span\",{\"text\":data.relationship_status})).inject(this.menu);}this.fireEvent(\"facebookUserData\",data);}});var FacebookSelfMenu=new Class({Extends:Menu,onBeforeInit:function(options){this.appId=5;this.user=options.user;options.displayName=this.user.fullname;options.className=\"facebook\";this.fb_uid=options.uid;return options;},onInit:function(){this.aboutSection=new Element(\"div\",{\"class\":\"text_section light1\"}).inject(this.menu);this.call(\"facebook\",\"facebook_user_show\",{user_id:this.fb_uid},this.profileShowSuccess.bind(this),null);},profileShowSuccess:function(data){if(!$defined(data)||data==\"\"){return;}this.user=data;if(data.pic_square==\"\"){data.pic_square;}this.pic=new Element(\"div\",{\"class\":\"user_pic\"}).inject(this.menu);ItemUtility.createItemPic(data.pic_square).inject(this.pic);var location=\"\";if($defined(data.current_location.city)){location=data.current_location.city;if($defined(data.current_location.state)){location=location+\", \"+data.current_location.state;}}else{if($defined(data.current_location.state)){location=data.current_location.state;}else{if($defined(data.current_location.country)){location+=\" \"+data.current_location.country;}}}if(location!=\"\"){this.locSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Location: \"}),new Element(\"span\",{\"text\":location})).inject(this.menu);}if($defined(data.affiliations)&&data.affiliations.length>0){var networks=\"\";for(var i=0;i<data.affiliations.length-1;i++){networks+=data.affiliations[i].name+\", \";}networks+=data.affiliations[i].name;this.networksSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Networks: \"}),new Element(\"span\",{\"text\":networks})).inject(this.menu);}if($defined(data.sex)&&data.sex!=\"\"){this.genderSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Gender: \"}),new Element(\"span\",{\"text\":data.sex})).inject(this.menu);}if($defined(data.birthday)&&data.birthday!=\"\"){this.genderSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Birthday: \"}),new Element(\"span\",{\"text\":data.birthday})).inject(this.menu);}if($defined(data.relationship_status)&&data.relationship_status!=\"\"){this.relationSection=new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Relationship Status: \"}),new Element(\"span\",{\"text\":data.relationship_status})).inject(this.menu);}this.call(\"facebook\",\"facebook_settings_get\",{},this.settingsGetSuccess.bind(this),null);this.fireEvent(\"facebookSelfData\",data);},settingsGetSuccess:function(data){if(!$defined(data.settings.sync_posts)){return;}this.sync_posts=data.settings.sync_posts;new Element(\"div\",{\"class\":\"nav_seperator\"}).inject(this.menu);this.syncPosts=new Toggle(this.sync_posts==1);$(this.syncPosts).addEvent(\"click\",this.syncToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Sync Posts:\"}),$(this.syncPosts)).inject(this.menu);},syncToggle:function(){var params={key:\"sync_posts\",value:this.syncPosts.toInt()};this.call(\"facebook\",\"facebook_settings_update\",params);}});var FacebookInstallPopupContent=new Class({Extends:PopupContent,strings:{postSyncLabel:\"Sync posts to Facebook:\",errorMessage:\"There was an error connecting to Facebook\"},onInit:function(){this.appId=5;FB_RequireFeatures([\"Connect\"],function(){FB.Facebook.init(\"d29a9328a49d798da896066499c0d9d8\",\"/xd_receiver.htm\",{\"forceBrowserPopupForLogin\":true,\"doNotUseCachedConnectState\":true});});this.syncPostsToggle=new Toggle(true);new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.postSyncLabel}),$(this.syncPostsToggle)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Install Facebook\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.facebookConnect.bind(this));this.message=new Element(\"div\",{\"class\":\"message error\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},facebookConnect:function(){FB.Connect.requireSession(this.facebookGetPermission.bind(this),this.facebookConnectFail.bind(this));},facebookGetPermission:function(){FB.Connect.showPermissionDialog(\"offline_access,publish_stream,read_stream,status_update,email,xmpp_login\",this.facebookEnable.bind(this));},facebookEnable:function(){this.fb_session=FB.Facebook.apiClient.get_session();var sync=this.syncPostsToggle.toInt();var params={sync_posts:this.syncPostsToggle.toInt(),session_key:this.fb_session.session_key,uid:this.fb_session.uid};this.call(\"facebook\",\"facebook_enable\",params,this.facebookEnableSuccess.bind(this),null);},facebookEnableSuccess:function(){this.closeContent();},facebookConnectFail:function(){var name=\"facebook_connect\";var title=\"Error Connecting to Facebook\";var message=this.strings.errorMessage;this.fireEvent(\"showAlert\",name,title,message);}});var FacebookAlbumUtility={createFacebookAlbumItem:function(album){var el=ItemUtility.createPostBubble(\"post album\",true);var thumb=new Element(\"div\",{\"class\":\"cover\"}).adopt(new Element(\"img\",{\"src\":album.coverSrc,\"alt\":album.description,\"title\":album.description})).inject(el);thumb.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookAlbumView\",album]));var title=new Element(\"div\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(album.name)});var header=new Element(\"div\",{\"class\":\"heading\"}).adopt(title).inject(el);title.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookAlbumView\",album]));var size=new Element(\"span\",{\"class\":\"size\",\"text\":TextUtility.pluralText(album.size,\"Photo\",\"Photos\")}).inject(header);var location=new Element(\"span\",{\"class\":\"location\"}).inject(header);if(album.location.trim()!=\"\"){location.set(\"text\",\" | \"+TextUtility.unescape(album.location.trim()));}var description=new Element(\"div\",{\"class\":\"description\"}).inject(el);if(album.description.trim()!=\"\"){description.set(\"text\",\" \"+TextUtility.unescape(album.description.trim()));}var viewButton=new ButtonMedium({displayName:\"View Album\",action:\"goto dark\"});$(viewButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookAlbumView\",album]));new Element(\"div\",{\"class\":\"actions\"}).adopt($(viewButton)).inject(el);return el;}};var FacebookCommentItemUtility={createFacebookCommentItem:function(item){var el=ItemUtility.createPostBubble(\"post haspic fbComment\");ItemUtility.createItemPic(item.profile_pic).inject(el);var content=new Element(\"div\",{\"class\":\"post_content\"}).inject(el);FacebookCommentItemUtility.createFacebookItemHeader(item).inject(content);FacebookCommentItemUtility.createFacebookItemFooter(item).inject(content);return el;},createFacebookItemHeader:function(item){var el=new Element(\"div\",{\"class\":\"header\"});var user={username:item.name,uid:item.fromid,pic:item.profile_pic};var creatorName=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescapeQuotes(item.name)}).inject(el);creatorName.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookShowUserFeed\",user]));if($defined(item.text)&&item.text!=\"\"){new Element(\"span\",{\"html\":\" \"+TextUtility.replaceUrls(TextUtility.stripHtml(TextUtility.unescape(item.text)))}).inject(el);}return el;},createFacebookItemFooter:function(item){var el=new Element(\"div\",{\"class\":\"footer\"});if(!$defined(item.time)){return el;}var date=DateUtility.convertFromTimestamp(item.time);var ts=new Element(\"span\",{\"class\":\"timestamp\",\"text\":DateUtility.getTimestamp(date,\"%B %D at %I:%M%p\"),\"ts\":date,\"ts_format\":\"%B %D at %I:%M%p\"}).inject(el);return el;}};var FacebookFeedItemUtility={createFacebookFeedItem:function(item){var el=ItemUtility.createPostBubble(\"post haspic\");ItemUtility.createItemPic(item.profile_pic).inject(el);var content=new Element(\"div\",{\"class\":\"post_content facebook\"}).inject(el);FacebookFeedItemUtility.createFacebookItemHeader(item).inject(content);FacebookFeedItemUtility.createFacebookItemBody(item).inject(content);FacebookFeedItemUtility.createFacebookItemFooter(item,el).inject(content);FacebookFeedItemUtility.createFacebookItemActions(item).inject(el);return el;},createFacebookItemHeader:function(item){var el=new Element(\"div\",{\"class\":\"header\"});var user={username:item.name,uid:item.actor_id,pic:item.profile_pic};var target={username:item.target_name,uid:item.target_id,pic:\"\"};var creatorName=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescapeQuotes(item.name)}).inject(el);creatorName.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookShowUserFeed\",user]));if(item.target_id>0){StreamItemUtility.createStreamUserAction(\"direct\").inject(el);var targetName=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescapeQuotes(item.target_name)}).inject(el);targetName.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookShowUserFeed\",target]));}if($defined(item.message)&&item.message!=\"\"){new Element(\"span\",{\"html\":\" \"+TextUtility.replaceUrls(TextUtility.stripHtml(TextUtility.unescape(item.message)))}).inject(el);}return el;},createFacebookItemBody:function(item){var el=new Element(\"div\",{\"class\":\"body\"});var fbUrl;if(item.attachment!=\"\"&&$defined(item.attachment.media)&&$defined(item.attachment.media.length)){for(var i=0,n=item.attachment.media.length;i<n;i++){if(item.attachment.media[i].type==\"photo\"){fbUrl=DataUtility.getFacebookPhotoUrl(item.attachment.media[i].src);}else{fbUrl=item.attachment.media[i].src;}var image=new Element(\"img\",{\"src\":item.attachment.media[i].src,\"class\":\"fbPhoto\"}).inject(el);var attachment={url:fbUrl,filename:\"Facebook Photo\"};image.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showPhotoPopup\",attachment]));}new Element(\"br\",{}).inject(el);}if($defined(item.attachment.name)){new Element(\"a\",{\"href\":item.attachment.href,\"target\":\"_blank\",\"text\":item.attachment.name}).inject(el);new Element(\"br\",{}).inject(el);}new Element(\"span\",{\"text\":item.attachment.description}).inject(el);return el;},createFacebookItemFooter:function(item,postElement){var el=new Element(\"div\",{\"class\":\"footer foot_\"+item.post_id});if(!$defined(item.date_created)){return el;}var date=DateUtility.convertFromTimestamp(item.created_time);var ts=new Element(\"span\",{\"class\":\"timestamp\",\"text\":DateUtility.getTimestamp(date,\"%B %D at %I:%M%p\"),\"ts\":date,\"ts_format\":\"%B %D at %I:%M%p\"}).inject(el);FacebookFeedItemUtility.createFacebookFooterActions(item,el,postElement);return el;},createFacebookFooterActions:function(item,el,postElement){var commentsAction=new Element(\"span\",{\"class\":\"footer_action has_action comments_\"+item.post_id,\"comments\":item.comment_count}).adopt(new Element(\"div\",{\"class\":\"action convo\"}));commentsAction.appendText(TextUtility.pluralText(item.comment_count,\"Comment\",\"Comments\"));commentsAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookCommentsShow\",postElement,item.post_id]));commentsAction.inject(el);var replyAction=FacebookFeedItemUtility.createFacebookFooterAction(\"reply\",\"Comment\",true);replyAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookCommentBoxShow\",item.post_id]));replyAction.inject(el);},createFacebookItemActions:function(item){var el=new Element(\"div\",{\"class\":\"post_actions\"});if(item.can_delete){var deleteAction=new Element(\"div\",{\"class\":\"post_action delete\"}).inject(el);deleteAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookItemDelete\",item.post_id,item.created_time]));}var likeAction=new Element(\"div\",{\"class\":\"post_action like likes_\"+item.post_id,\"is_liked\":item.user_likes,\"likes\":item.like_count}).inject(el);likeAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookItemLike\",item.post_id,likeAction]));new Element(\"div\",{\"class\":\"text grey text11\",\"text\":item.like_count,\"likes\":item.like_count}).inject(likeAction);if(item.like_count>0){likeAction.addClass(\"other_liked\");}if(item.user_likes==1){likeAction.addClass(\"on\");}return el;},createFacebookFooterAction:function(actionName,actionText,hide){var el=new Element(\"span\",{\"class\":\"footer_action has_action\"}).adopt(new Element(\"div\",{\"class\":\"action \"+actionName}));el.appendText(actionText);if(hide){el.addClass(\"hide\");}return el;}};var FacebookFriendItemUtility={createFacebookFriendItem:function(user){var el=ItemUtility.createPostBubble(\"post contact\",true);new Element(\"img\",{\"class\":\"profile_pic_wrapper_60 afb_profile_pic\",\"src\":user.pic}).inject(el);var username=new Element(\"div\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(user.username)});new Element(\"div\",{\"class\":\"heading\"}).adopt(username).inject(el);username.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookShowUserFeed\",user]));var viewButton=new ButtonMedium({displayName:\"View Wall\",action:\"goto dark\"});$(viewButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"facebookShowUserFeed\",user]));new Element(\"div\",{\"class\":\"actions\"}).adopt($(viewButton)).inject(el);return el;}};var Global=new Class({Extends:AppInstance,EventHandlers:[\"userSwitched\"],parseOptions:function(options){this.location=options.location;this.displayName=\"global\",this.appId=\"global_\"+this.location.geohash;this.iconOptions={iconName:\"location\"};},userSwitched:function(){this.stop();},onStart:function(){this.setupNav();},onStop:function(){var params={geohashs:this.location.geohash,location:JSON.encode(this.location),zoom:4,subscribe:0};this.call(\"global\",\"global_subscribe_delete\",params);}});Global.implement({requests:[{name:\"global_subscribe_add\",params:[\"geohashs\",\"location\",\"zoom\",\"subscribe\"],url:\"/api/pipio/global/subscribe/add\"},{name:\"global_subscribe_delete\",params:[\"geohashs\",\"location\",\"zoom\",\"subscribe\"],url:\"/api/pipio/global/subscribe/delete\"}]});Global.implement({setupNav:function(){Logger().log(\"global setup\");this.navAdd(new Nav({iconOptions:{iconName:\"global\"},displayName:\"Updates\",name:\"updates\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"updates\",\"global_menu\"])}));var globalMenu=new GlobalMenu({location:this.location,isDefault:true,closeFunc:this.stop.bind(this)});this.menuAdd(\"global_menu\",globalMenu);var content=new GlobalContent({isDefault:true,location:this.location});this.contentAdd(\"updates\",content);}});var GlobalContent=new Class({Extends:Content,EventHandlers:[\"globalItemReceived\"],onBeforeInit:function(options){this.location=options.location;},onInit:function(){this.loader=new StreamLoader({createElementFunc:StreamItemUtility.createUserStreamItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"This location has no updates\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Updates loading...\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},globalItemReceived:function(data){if(data.item.geohash.substring(0,4)==this.location.geohash.substring(0,4)){this.loader.process(data.item);}},loadMore:function(){var params={geohash:this.location.geohash.substring(0,4),date_created:this.loader.oldestTimestamp,item_id:this.loader.oldestId};this.call(\"home\",\"stream_global_load\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(this.loader.empty){var params={geohashs:this.location.geohash,location:JSON.encode(this.location),zoom:4,subscribe:0};this.call(\"global\",\"global_subscribe_add\",params);}if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},loadMoreFail:function(status){this.loader.hideLoading();if(status.code==2002){this.loader.showError();}},bottomFunc:function(){this.loadMore();}});var GlobalMenu=new Class({Extends:Menu,EventHandlers:[],onBeforeInit:function(options){this.location=options.location;var locationLabel=DataUtility.getGeoLabel(this.location);var locationStr=DataUtility.getGeoLocality(this.location);if(locationLabel){locationStr=locationLabel+\", \"+locationStr;}options.displayName=locationStr;return options;},onInit:function(){this.map=new GlobalMapMenuSection({location:this.location});$(this.map).inject(this.menu);new Element(\"div\",{\"class\":\"text_section light1 text11\",\"text\":\"You are viewing updates near this location\"}).inject(this.menu);}});var Home=new Class({Extends:App,EventHandlers:[\"userSwitched\",\"streamItemReplyCountUpdated\",\"streamItemDelete\",\"userStreamItemLiked\",\"streamItemLike\",\"roomProfilePicUpdated\",\"feedRoomKick\",\"feedRoomRequestAccept\",\"feedRoomRequestDelete\",\"feedRoomAdded\",\"feedRoomDeleted\",\"feedRoomDelete\",\"showCreateRoomPopup\",\"showRoomInvitePopup\",\"showRoomStatusUpdatePopup\",\"showEditProfilePopup\",\"showEditRoomProfilePopup\",\"showConvo\"],onStart:function(){this.setupNav();this.initRooms();this.convos=$H();},onStop:function(){},userSwitched:function(){if(this.isLoggedIn()){this.start();}else{this.stop();}},onCreate:function(){this.closeButton.destroy();$(\"app_button_2\").addEvent(\"click\",this.switchDefault.bind(this));},dock:function(){DomUtility.hide(this.navSection);$(this.alert).inject(\"app_button_2\");$(\"app_button_2\").addClass(\"has_submenu\");this.navWrapper.inject(\"app_button_2\",\"after\");$(\"app_button_2\").removeEvents(\"click\");$(\"app_button_2\").addEvent(\"click\",this.undock.bind(this));this.isDocked=true;},undock:function(){this.navWrapper.inject(this.navSection);$(\"app_button_2\").removeClass(\"has_submenu\");$(\"app_button_2\").removeEvents(\"click\");$(\"app_button_2\").addEvent(\"click\",this.switchDefault.bind(this));DomUtility.show(this.navSection);this.isDocked=false;if($defined(this.defaultContent)){this.fireEvent(\"viewSwitch\",this.appId,this.defaultContent,this.defaultMenu);}},streamItemReplyCountUpdated:function(data){if(!$defined(data.item_id)||!$defined(data.count)){return;}StreamItemUtility.updateReplyCount(data.item_id,data.count);},userStreamItemLiked:function(data){if(!$defined(data.item)||!$defined(data.username)){return;}if(data.username==this.getPrivateUser().username){StreamItemUtility.updateItemLiked(data.item.item_id,data.likes,data.is_liked);}else{StreamItemUtility.updateItemLiked(data.item.item_id,data.likes,-1);}},streamItemLike:function(item_id,el){this.call(\"home\",\"stream_item_like\",{item_id:item_id},null,null);var is_liked=parseInt(el.get(\"is_liked\"));var likes=parseInt(el.get(\"likes\"));if(is_liked==1){StreamItemUtility.updateItemLiked(item_id,likes-1,0);}else{StreamItemUtility.updateItemLiked(item_id,likes+1,1);}},streamItemDelete:function(item_id){var name=\"stream_item_delete\";var title=\"Delete Post\";var message=\"Are you sure you want to delete this post?\";var func=this.streamItemDeleteCall.bind(this,[item_id]);this.fireEvent(\"showConfirmation\",name,title,message,func);},streamItemDeleteCall:function(item_id){var params={item_id:item_id};this.call(\"home\",\"delete\",params,null,null);},showRoom:function(room){if(this.rooms.has(room.username)){this.fireEvent(\"viewSwitch\",this.appId,\"room_\"+room.username,\"room_\"+room.username);}else{var options={room:room};this.fireEvent(\"startAppInstance\",\"room\",room.username,options);}},roomProfilePicUpdated:function(data){if(!$defined(data.username)){return;}var room=this.getRoom(data.username);var room_id=room.room_id;var username=room.username;var version=UserUtility.profilePicVersionGet(room_id);version++;UserUtility.profilePicVersionSet(room_id,version);room.profile_pic_16=room.profile_pic_16.split(\"?\")[0]+\"?\"+version;room.profile_pic_20=room.profile_pic_20.split(\"?\")[0]+\"?\"+version;room.profile_pic_26=room.profile_pic_26.split(\"?\")[0]+\"?\"+version;room.profile_pic_32=room.profile_pic_32.split(\"?\")[0]+\"?\"+version;room.profile_pic_42=room.profile_pic_42.split(\"?\")[0]+\"?\"+version;room.profile_pic_60=room.profile_pic_60.split(\"?\")[0]+\"?\"+version;room.profile_pic_100=room.profile_pic_100.split(\"?\")[0]+\"?\"+version;room.profile_pic_200=room.profile_pic_200.split(\"?\")[0]+\"?\"+version;$$(\".profile_pic_16_\"+username).each(function(el){el.set(\"src\",room.profile_pic_16);});$$(\".profile_pic_20_\"+username).each(function(el){el.set(\"src\",room.profile_pic_20);});$$(\".profile_pic_60_\"+username).each(function(el){el.set(\"src\",room.profile_pic_60);});$$(\".profile_pic_26_\"+username).each(function(el){el.set(\"src\",room.profile_pic_26);});$$(\".profile_pic_32_\"+username).each(function(el){el.set(\"src\",room.profile_pic_32);});$$(\".profile_pic_42_\"+username).each(function(el){el.set(\"src\",room.profile_pic_42);});$$(\".profile_pic_100_\"+username).each(function(el){el.set(\"src\",room.profile_pic_100);});$$(\".profile_pic_200_\"+username).each(function(el){el.set(\"src\",room.profile_pic_200);});}});Home.implement({requests:[{name:\"stream_in_load\",params:[\"date_created\",\"item_id\"],url:\"/api/pipio/stream/in/load\"},{name:\"stream_user_load\",params:[\"username\",\"date_created\",\"item_id\"],url:\"/api/pipio/stream/user/load\"},{name:\"public_stream_user_load\",params:[\"username\",\"date_created\",\"item_id\"],url:\"/api/public/stream/user/load\"},{name:\"stream_room_load\",params:[\"username\",\"date_created\",\"item_id\"],url:\"/api/pipio/stream/room/load\"},{name:\"public_stream_room_load\",params:[\"username\",\"date_created\",\"item_id\"],url:\"/api/public/stream/room/load\"},{name:\"stream_convo_load\",params:[\"convo_id\",\"date_created\",\"item_id\"],url:\"/api/pipio/stream/convo/load\"},{name:\"stream_likes_load\",params:[\"username\",\"date_created\",\"item_id\"],url:\"/api/pipio/stream/likes/load\"},{name:\"stream_global_load\",params:[\"geohash\",\"date_created\",\"item_id\"],url:\"/api/pipio/stream/global/load\"},{name:\"stream_item_like\",params:[\"item_id\"],url:\"/api/pipio/stream/like\"},{name:\"publish\",url:\"/api/pipio/stream/publish\",params:[\"body\",\"targets\",\"source_id\",\"source_type\",\"reply_id\",\"channel_id\",\"is_public\",\"res\",\"attachment\"]},{name:\"forward\",url:\"/api/pipio/stream/forward\",params:[\"body\",\"targets\",\"source_id\",\"source_type\",\"forward_id\",\"channel_id\",\"is_public\",\"res\"]},{name:\"delete\",url:\"/api/pipio/stream/delete\",params:[\"item_id\"]},{name:\"parse_hulu_url\",url:\"/api/pipio/link/parse/hulu\",params:[\"url\"]},{name:\"parse_break_url\",url:\"/api/pipio/link/parse/break\",params:[\"url\"]},{name:\"room_create\",url:\"/api/pipio/room/create\",params:[\"username\",\"room_name\",\"room_description\",\"is_public\"]},{name:\"room_delete\",url:\"/api/pipio/room/delete\",params:[\"username\"]},{name:\"room_leave\",url:\"/api/pipio/room/leave\",params:[\"username\"]},{name:\"room_kick\",url:\"/api/pipio/room/kick\",params:[\"username\",\"room_username\"]},{name:\"room_subscribe\",url:\"/api/pipio/room/subscribe\",params:[\"username\"]},{name:\"room_unsubscribe\",url:\"/api/pipio/room/unsubscribe\",params:[\"username\"]},{name:\"room_request_create\",url:\"/api/pipio/room/request/create\",params:[\"username\"]},{name:\"room_request_delete\",url:\"/api/pipio/room/request/delete\",params:[\"username\",\"room_username\"]},{name:\"room_request_accept\",url:\"/api/pipio/room/request/accept\",params:[\"username\",\"room_username\"]},{name:\"room_invite_create\",url:\"/api/pipio/room/invite/create\",params:[\"username\",\"room_username\"]},{name:\"room_invite_accept\",url:\"/api/pipio/room/invite/accept\",params:[\"username\"]},{name:\"room_invite_delete\",url:\"/api/pipio/room/invite/delete\",params:[\"username\",\"room_username\"]},{name:\"room_info_load\",url:\"/api/pipio/room/info/load\",params:[\"username\"]},{name:\"public_room_info_load\",url:\"/api/public/room/info/load\",params:[\"username\"]},{name:\"public_user_info_load\",url:\"/api/public/user/info/load\",params:[\"username\"]},{name:\"room_privacy_set\",url:\"/api/pipio/room/privacy/set\",params:[\"username\",\"is_public\"]},{name:\"room_profile_update\",url:\"/api/pipio/room/profile/update\",params:[\"username\",\"bio\",\"url\"]},{name:\"room_search\",url:\"/api/pipio/room/search\",params:[\"query\"]}]});Home.implement({initRooms:function(){this.rooms=$H();this.roomInvites=$H();this.getRooms().each(function(room){this.roomAdd(room);},this);},feedRoomAdded:function(room){if(!this.rooms.has(room.username)){this.roomAdd(room);}},feedRoomKick:function(username,room_username){this.call(\"home\",\"room_kick\",{username:username,room_username:room_username},null,null);},feedRoomRequestAccept:function(username,room_username){this.call(\"home\",\"room_request_accept\",{username:username,room_username:room_username},null,null);},feedRoomRequestDelete:function(username,room_username){this.call(\"home\",\"room_request_delete\",{username:username,room_username:room_username},null,null);},feedRoomDelete:function(username){this.call(\"home\",\"room_delete\",{username:username},null,null);},feedRoomDeleted:function(username){if(!this.rooms.has(username)){return;}this.roomDelete(username);},showCreateRoomPopup:function(){if($defined(this.createRoomPopup)){this.createRoomPopup.close();}this.createCreateRoomPopup();},createCreateRoomPopup:function(){this.createRoomPopup=new Popup({size:{x:350,y:176},resizable:false,dockable:false,className:\"createRoom\",onClose:this.destroyCreateRoomPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"rooms\",iconAction:\"add\"},displayName:\"Create New Room\",closable:true});var content=new CreateRoomPopupContent({});this.createRoomPopup.addContent(\"create_room\",nav,content);},destroyCreateRoomPopup:function(){this.createRoomPopup=null;}});Home.implement({setupNav:function(){Logger().log(\"home setup\");var homeNav=new Nav({iconOptions:{iconName:\"updates\"},displayName:\"Updates\",name:\"updates\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"updates\",\"self_menu\"])});this.navAdd(homeNav);this.navAdd(new Nav({iconOptions:{iconName:\"star\"},displayName:\"Favorites\",name:\"likes\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"likes\",\"likes_menu\"])}));this.navAdd(new Nav({iconOptions:{iconName:\"rooms\"},hasSubnavs:true,displayName:\"Rooms\",name:\"rooms\"}));this.navAdd(new Nav({iconOptions:{iconName:\"search\"},displayName:\"Search Rooms...\",onClick:this.fireEvent.bind(this,[\"showSearchRoomPopup\"]),name:\"find_room\",parentName:\"rooms\",bottom:true}));this.navAdd(new Nav({iconOptions:{iconName:\"rooms\",iconAction:\"add\"},displayName:\"Create New Room...\",onClick:this.fireEvent.bind(this,[\"showCreateRoomPopup\"]),name:\"new_room\",parentName:\"rooms\",bottom:true}));var selfMenu=new SelfMenu({user:this.getPrivateUser(),isDefault:true});this.menuAdd(\"self_menu\",selfMenu);var content=new HomeContent({isDefault:true,navId:homeNav.navId});this.contentAdd(\"updates\",content);var likesMenu=new LikesMenu({user:this.getPrivateUser()});this.menuAdd(\"likes_menu\",likesMenu);var likesContent=new LikesContent({user:this.getPrivateUser()});this.contentAdd(\"likes\",likesContent);},roomAdd:function(room){var nav=new Nav({iconOptions:{user:room},displayName:room.room_name,name:\"room_\"+room.username,parentName:\"rooms\",onClick:this.fireEvent.bind(this,[\"showRoom\",room])});this.navAdd(nav);this.rooms.set(room.username,nav);},roomDelete:function(username){if(!this.rooms.has(username)){return;}this.rooms.get(username).destroy();this.navDelete(\"room_\"+username);this.rooms.erase(username);this.menuClose(\"room_\"+username);this.contentClose(\"room_\"+username);},showRoomInvitePopup:function(room){if($defined(this.roomInvitePopup)){this.roomInvitePopup.close();}this.createRoomInvitePopup(room);},createRoomInvitePopup:function(room){this.roomInvitePopup=new Popup({size:{x:250,y:350},resizable:false,dockable:false,className:\"roomInvite\",onClose:this.destroyCreateRoomPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"rooms\",iconAction:\"add\"},displayName:\"Invite Users to \"+room.room_name,closable:true});var content=new RoomInvitePopupContent({contacts:this.getContacts(),room:room});this.roomInvitePopup.addContent(\"create_room\",nav,content);},destroyRoomInvitePopup:function(){this.roomInvitePopup=null;},showRoomStatusUpdatePopup:function(room){if($defined(this.roomStatusUpdatePopup)){this.roomStatusUpdatePopup.close();}this.createRoomStatusUpdatePopup(room);},createRoomStatusUpdatePopup:function(room){this.roomStatusUpdatePopup=new Popup({size:{x:350,y:100},resizable:false,dockable:false,className:\"statusUpdate\",onClose:this.destroyRoomStatusUpdatePopup.bind(this)});var nav=new Nav({iconOptions:{user:room},displayName:\"Update Status for \"+room.room_name,closable:true});var content=new RoomStatusUpdatePopupContent({room:room});this.roomStatusUpdatePopup.addContent(\"status_update\",nav,content);},destroyRoomStatusUpdatePopup:function(){this.roomStatusUpdatePopup=null;},showConvo:function(convo_id){if(this.convos.has(convo_id)){this.convos.get(convo_id)._select();return;}this.createConvoPopup(convo_id);},createConvoPopup:function(convo_id){var popup=new Popup({size:{x:500,y:400},resizable:false,dockable:true,className:\"convoViewer\",onClose:this.destroyConvoPopup.bind(this,[convo_id])});var nav=new Nav({iconOptions:{iconName:\"convo\"},displayName:\"View Conversation\",closable:true});var content=new ConvoPopupContent({convo_id:convo_id});popup.addContent(\"convo\",nav,content);this.convos.set(convo_id,popup);},destroyConvoPopup:function(convo_id){this.convos.erase(convo_id);},showEditProfilePopup:function(){if($defined(this.editProfilePopup)){this.editProfilePopup.close();}this.createEditProfilePopup();},createEditProfilePopup:function(room){this.editProfilePopup=new Popup({size:{x:350,y:200},resizable:false,dockable:false,className:\"editProfile\",onClose:this.destroyEditProfilePopup.bind(this)});var nav=new Nav({iconOptions:{user:this.getPrivateUser()},displayName:\"Edit Your Profile\",closable:true});var content=new EditProfilePopupContent({user:this.getPrivateUser()});this.editProfilePopup.addContent(\"edit_profile\",nav,content);},destroyEditProfilePopup:function(){this.editProfilePopup=null;},showEditRoomProfilePopup:function(room){if($defined(this.editRoomProfilePopup)){this.editRoomProfilePopup.close();}this.createEditRoomProfilePopup(room);},createEditRoomProfilePopup:function(room){this.editRoomProfilePopup=new Popup({size:{x:350,y:140},resizable:false,dockable:false,className:\"editProfile\",onClose:this.destroyEditRoomProfilePopup.bind(this)});var nav=new Nav({iconOptions:{user:room},displayName:\"Edit Room Profile\",closable:true});var content=new RoomEditProfilePopupContent({room:room});this.editRoomProfilePopup.addContent(\"edit_room_profile\",nav,content);},destroyEditRoomProfilePopup:function(){this.editRoomProfilePopup=null;}});var HomeContent=new Class({Extends:Content,EventHandlers:[\"streamItemReceived\",\"streamItemDeleted\"],onBeforeInit:function(options){this.navId=options.navId;return options;},onInit:function(){this.statusBox=new StatusBox(this.getPrivateUser());$(this.statusBox).inject(this.content);this.loader=new StreamLoader({createElementFunc:StreamItemUtility.createInStreamItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"You have no updates\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Your updates loading...\"}),alertFunc:this.alertCheck.bind(this)});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},streamItemReceived:function(data){if($defined(data.item)){this.loader.process(data.item);}Logger().log(JSON.encode(data.item.item_id));if(data.item.source_id!=this.getPrivateUser().user_id&&data.item.source_type==3){data.username=data.item.source.username;this.fireEvent(\"roomStreamItemReceived\",data);}},alertCheck:function(item){if(item.creator_id!=this.getPrivateUser().user_id){this.fireEvent(\"alertAdd\",this.navId);}},streamItemDeleted:function(data){if(!$defined(data.item_id)){return;}this.loader.remove(data.item_id);if($defined(data.source_id)&&data.source_id!=this.getPrivateUser().user_id){if(data.source_type==1){this.fireEvent(\"userStreamItemDeleted\",data);}else{if(data.source_type==3){this.fireEvent(\"roomStreamItemDeleted\",data);}}}},loadMore:function(){var params={date_created:this.loader.oldestTimestamp,item_id:this.loader.oldestId};this.call(\"home\",\"stream_in_load\",params,this.loadMoreSuccess.bind(this),null);this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},bottomFunc:function(){Logger().log(\"home content bottom\");this.loadMore();}});var LikesContent=new Class({Extends:Content,EventHandlers:[\"userStreamItemLiked\",\"streamItemLike\"],onBeforeInit:function(options){this.user=options.user;},onInit:function(){var createFunc=StreamItemUtility.createLikesStreamItem;if(this.user.user_id==this.getPrivateUser().user_id){createFunc=StreamItemUtility.createSelfLikesStreamItem;}this.loader=new ItemLoader({createElementFunc:createFunc,idField:\"item_id\",sortField:\"date_created\",sortAscending:false,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":TextUtility.unescape(this.user.fullname)+\" has no favorites\"}),emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":TextUtility.unescape(this.user.fullname)+\"'s favorites loading...\"}),errorEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":TextUtility.unescape(this.user.fullname)+\"'s stream is private\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},userStreamItemLiked:function(data){if($defined(data.item)&&data.username==this.user.username){if(data.is_liked==1){this.loader.process(data.item);}else{this.loader.remove(data.item.item_id);}}},streamItemLike:function(item_id,likes,is_liked){if(is_liked==1){this.loader.remove(item_id);}},loadMore:function(){var params={username:this.user.username,date_created:this.loader.oldestTimestamp,item_id:this.loader.oldestId};this.call(\"home\",\"stream_likes_load\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},loadMoreFail:function(status){this.loader.hideLoading();if(status.code==2002){this.loader.showError();}},bottomFunc:function(){this.loadMore();}});var ConvoPopupContent=new Class({Extends:PopupContent,EventHandlers:[],onBeforeInit:function(options){this.convo_id=options.convo_id;return options;},onInit:function(){this.convoWrapper=new Element(\"div\",{\"class\":\"convoWrapper\"}).inject(this.content);this.loader=new ItemLoader({idField:\"item_id\",sortField:\"date_created\",createElementFunc:StreamItemUtility.createConvoStreamItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"This conversation is empty\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Conversation loading...\"})});this.convoWrapper.addEvent(\"mousewheel\",this.checkScroll.bind(this));$(this.loader).inject(this.convoWrapper);this.scroll=new Fx.Scroll(this.convoWrapper);this.loadMore();},onShow:function(){if($defined(this.scrollY)){this.scroll.set(0,this.scrollY);}},onHide:function(){if($defined(this.convoWrapper)){this.scrollY=this.convoWrapper.getScroll().y;}},loadMore:function(){var params={convo_id:this.convo_id,date_created:this.loader.highestSortValue,item_id:this.loader.highestId};this.call(\"home\",\"stream_convo_load\",params,this.loadMoreSuccess.bind(this),null);this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},bottomFunc:function(){Logger().log(\"home content bottom\");this.loadMore();},checkScroll:function(){var maxY=this.convoWrapper.getScrollSize().y;var bottomY=this.convoWrapper.getScroll().y+this.convoWrapper.getSize().y+100;if(bottomY>maxY&&!this.bottomFuncCalled&&!this.atBottom){this.bottomFuncCalled=true;this.bottomFunc();}}});var CreateRoomPopupContent=new Class({Extends:PopupContent,strings:{roomUsernameLabel:\"Nickname:\",roomNameLabel:\"Room Name:\",roomDescriptionLabel:\"Description:\",publicLabel:\"Public:\",errorMessage:\"There was an error creating this room\"},onInit:function(){this.roomUsernameInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"32\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.roomUsernameLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.roomUsernameInput)).inject(this.content);this.roomNameInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"32\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.roomNameLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.roomNameInput)).inject(this.content);this.roomDescriptionInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"32\"});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.roomDescriptionLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.roomDescriptionInput)).inject(this.content);this.publicToggle=new Toggle(true);new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.publicLabel}),$(this.publicToggle)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Create Room\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.createRoom.bind(this));this.message=new Element(\"div\",{\"class\":\"message error\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},createRoom:function(){var username=this.roomUsernameInput.value.trim();var room_name=this.roomNameInput.value.trim();var room_description=this.roomDescriptionInput.value.trim();var is_public=this.publicToggle.toInt();var params={username:username,room_name:room_name,room_description:room_description,is_public:is_public};this.call(\"home\",\"room_create\",params,this.createRoomSuccess.bind(this),this.createRoomFail.bind(this));this.actionButton.showProgress();},createRoomSuccess:function(){this.actionButton.hideProgress();this.closeContent();},createRoomFail:function(status){this.actionButton.hideProgress();var name=\"create_room\";var title=\"Error Creating Room\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);},onShow:function(){this.focus();},focus:function(){this.roomUsernameInput.focus.delay(500,this.roomUsernameInput);}});var EditProfilePopupContent=new Class({Extends:PopupContent,strings:{bioLabel:\"Bio:\",interestsLabel:\"Interests:\",urlLabel:\"Website:\"},onBeforeInit:function(options){this.user=options.user;return options;},onInit:function(){this.bioInput=new Element(\"textarea\",{\"maxlength\":500});new Element(\"div\",{\"class\":\"input_section bio\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.bioLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.bioInput)).inject(this.content);this.interestsInput=new Element(\"textarea\",{\"maxlength\":500});new Element(\"div\",{\"class\":\"input_section bio\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.interestsLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.interestsInput)).inject(this.content);this.urlInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":200});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.urlLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.urlInput)).inject(this.content);var about=this.getProfile(this.user.username);if($defined(about)){if($defined(about.bio)){this.bioInput.set(\"text\",about.bio);}if($defined(about.interests)){this.interestsInput.set(\"text\",about.interests);}if($defined(about.url)){this.urlInput.value=about.url;}}this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Update\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.updateProfile.bind(this));this.message=new Element(\"div\",{\"class\":\"message error\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},updateProfile:function(){var bio=this.bioInput.value.trim();var url=this.urlInput.value.trim();var interests=this.interestsInput.value.trim();var params={bio:bio,url:url,interests:interests};this.call(\"pipio\",\"user_profile_update\",params,this.updateProfileSuccess.bind(this),this.updateProfileFail.bind(this));this.actionButton.showProgress();this.message.empty();},updateProfileSuccess:function(data){this.actionButton.hideProgress();this.closeContent();},updateProfileFail:function(){this.actionButton.hideProgress();this.message.set(\"text\",this.strings.errorMessage);},onShow:function(){this.focus();},focus:function(){this.bioInput.focus.delay(500,this.bioInput);}});var RoomInvitePopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.contacts=options.contacts;this.room=options.room;return options;},onInit:function(){this.css=new CSS();this.input=new Element(\"input\",{\"type\":\"text\",\"maxlength\":50});this.input.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.input).inject(this.content);this.list=new Element(\"div\",{\"class\":\"itemList\"}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"cross\"});new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.closeButton)).inject(this.content);$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.insertContacts();this.scroll=new Fx.Scroll(this.list);},insertContacts:function(){this.contacts.each(function(user){var el=ShareBoxUtility.createContactRoomInviteItem(user);el.addEvent(\"click\",this.inviteUser.bind(this,[user,el]));el.inject(this.list);},this);},insertSeperator:function(){new Element(\"div\",{\"class\":\"listItem seperator\"}).inject(this.list);},inviteUser:function(user,el){var params={username:user.username,room_username:this.room.username};this.call(\"home\",\"room_invite_create\",params,null,null);el.addClass(\"invited\");},inputKeyUp:function(e){if(e.key==\"esc\"){e.target.value=\"\";}var val=e.target.value.trim().toLowerCase();if(val.length<2){this.list.removeClass(\"search\");return;}this.list.addClass(\"search\");if($defined(this.lastSelector)){this.css.remove_rule(this.lastSelector);}var selector=\".listItem[val1^='\"+val+\"'], .listItem[val2^='\"+val+\"']\";this.css.add_rule(selector,{\"display\":\"block !important\"}).refresh();this.lastSelector=selector;},focus:function(){this.input.focus.delay(500,this.input);},onClose:function(){if($defined(this.lastSelector)){this.css.remove_rule(this.lastSelector).refresh();}},onShow:function(){if($defined(this.scrollY)){this.scroll.set(0,this.scrollY);}this.focus();},onHide:function(){if($defined(this.list)){this.scrollY=this.list.getScroll().y;}}});var RoomStatusUpdatePopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.room=options.room;return options;},onInit:function(){this.statusInput=new Element(\"textarea\",{\"maxlength\":500});this.statusInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.statusInput).inject(this.content);this.cancelButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.cancelButton).addEvent(\"click\",this.closeContent.bind(this));this.updateButton=new ButtonMedium({displayName:\"Update Status\",className:\"dark\",action:\"check\"});$(this.updateButton).addEvent(\"click\",this.updateStatus.bind(this));new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.updateButton),$(this.cancelButton)).inject(this.content);},onShow:function(){this.focus();},focus:function(){this.statusInput.focus.delay(500,this.statusInput);},inputKeyUp:function(e){if(e.key==\"enter\"){var msg=e.target.value.trim();if(msg==\"\"){return;}this.updateStatus();}},updateStatus:function(){var params={username:this.room.username,body:this.statusInput.value.trim(),res:this.getSession()};this.call(\"pipio\",\"publish_roomstatus\",params,this.updateStatusSuccess.bind(this),this.updateStatusFail.bind(this));this.updateButton.showProgress();},updateStatusSuccess:function(){this.closeContent();},updateStatusFail:function(){alert(\"There was an error updating your status!\");}});var LikesMenu=new Class({Extends:Menu,EventHandlers:[],onBeforeInit:function(options){this.user=options.user;options.displayName=this.user.first_name+\"'s Favorites\";return options;},onInit:function(){this.aboutText=new Element(\"span\");var likesText=\"These are posts \"+this.user.first_name+\" likes\";this.aboutSection=new Element(\"div\",{\"class\":\"text_section light1\",\"text\":TextUtility.unescape(likesText)}).inject(this.menu);}});var SelfMenu=new Class({Extends:Menu,EventHandlers:[\"userLocationUpdated\"],onBeforeInit:function(options){this.user=options.user;options.displayName=this.user.fullname;return options;},onInit:function(){this.map=new UserMapMenuSection({user:this.user});$(this.map).inject(this.menu);this.aboutSection=new UserProfileMenuSection({user:this.user});$(this.aboutSection).inject(this.menu);new Element(\"div\",{\"class\":\"nav_seperator\"}).inject(this.menu);this.locationEnabled=new Toggle(this.user.location_enabled==1);$(this.locationEnabled).addEvent(\"click\",this.locationToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Location:\"}),$(this.locationEnabled)).inject(this.menu);this.privacy=new Toggle(this.user.is_public==1);$(this.privacy).addEvent(\"click\",this.privacyToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Public:\"}),$(this.privacy)).inject(this.menu);this.profilePicUploadButton=new ButtonMedium({displayName:\"Change Picture\",className:\"dark\",action:\"photo\"});this.fileInput=new Element(\"input\",{\"type\":\"file\",\"name\":\"file\"});this.form=new Element(\"form\").adopt(this.fileInput);this.fileInput.addEvent(\"change\",this.profilePicUpload.bind(this));this.profilePicUploadSection=new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.profilePicUploadButton).adopt(this.form)).inject(this.menu);var editProfileButton=new ButtonMedium({displayName:\"Edit Profile\",className:\"dark\",action:\"edit\"});$(editProfileButton).addEvent(\"click\",this.fireEvent.bind(this,[\"showEditProfilePopup\"]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(editProfileButton)).inject(this.menu);var editLocationButton=new ButtonMedium({displayName:\"Edit Location\",className:\"dark\",action:\"global\"});$(editLocationButton).addEvent(\"click\",this.fireEvent.bind(this,[\"showLocationEditPopup\"]));this.editLocationSection=new Element(\"div\",{\"class\":\"button_section\"}).adopt($(editLocationButton)).inject(this.menu);if(this.user.location_enabled==0){DomUtility.hide(this.editLocationSection);}var searchUserButton=new ButtonMedium({displayName:\"Find Friends\",className:\"dark\",action:\"search\"});$(searchUserButton).addEvent(\"click\",this.fireEvent.bind(this,[\"searchUserShow\"]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(searchUserButton)).inject(this.menu);var inviteUserButton=new ButtonMedium({displayName:\"Invite Friends\",className:\"dark\",action:\"forward\"});$(inviteUserButton).addEvent(\"click\",this.fireEvent.bind(this,[\"inviteUserShow\"]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(inviteUserButton)).inject(this.menu);var searchContactButton=new ButtonMedium({displayName:\"Search Contacts\",className:\"dark\",action:\"status\"});$(searchContactButton).addEvent(\"click\",this.fireEvent.bind(this,[\"searchEmailShow\"]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(searchContactButton)).inject(this.menu);},privacyToggle:function(){this.call(\"pipio\",\"user_privacy_set\",{is_public:this.privacy.toInt()});},userLocationUpdated:function(username,location,location_enabled){if(username!=this.user.username){return;}if(location_enabled==1){DomUtility.show(this.editLocationSection);}else{DomUtility.hide(this.editLocationSection);}},locationToggle:function(){this.call(\"pipio\",\"user_location_enabled\",{location_enabled:this.locationEnabled.toInt()});},resetForm:function(){this.profilePicUploadSection.empty();this.profilePicUploadButton=new ButtonMedium({displayName:\"Change Picture\",className:\"dark\",action:\"photo\"});this.fileInput=new Element(\"input\",{\"type\":\"file\",\"name\":\"file\"});this.form=new Element(\"form\").adopt(this.fileInput);this.fileInput.addEvent(\"change\",this.profilePicUpload.bind(this));this.profilePicUploadSection.adopt($(this.profilePicUploadButton).adopt(this.form));},profilePicUpload:function(){if(DataUtility.validatePhotoFile(this.fileInput.value)){this.call(\"pipio\",\"user_profilepic_upload\",{},this.profilePicUploadSuccess.bind(this),this.profilePicUploadFail.bind(this),this.form);this.profilePicUploadButton.showProgress();}},profilePicUploadSuccess:function(){this.profilePicUploadButton.hideProgress();this.resetForm();},profilePicUploadFail:function(){this.profilePicUploadButton.hideProgress();this.resetForm();}});var MemberRequestsNav=new Class({Extends:Nav,EventHandlers:[],onBeforeInit:function(options){this.room=options.room;this.users=$H();options.name=\"member_requests_\"+this.room.username;options.iconOptions={iconName:\"contacts\",iconAction:\"add\"};options.displayName=\"Member Requests\";options.className=\"members_nav\";options.hasSubnavs=true;return options;},onInit:function(){this.clear=new Element(\"div\",{\"style\":\"clear: both\"});this.list=new Element(\"div\",{\"class\":\"menu_list\"}).adopt(this.clear).inject(this.subnavs);},addUsers:function(users){$splat(users).each(function(user){user=UserUtility.processUser(user);if(!this.users.has(user.username)){var pic=ItemUtility.createProfilePic(user,\"16a\");pic.addEvent(\"click\",this.fireEvent.bind(this,[\"showUser\",user]));pic.inject(this.clear,\"before\");this.users.set(user.username,pic);}},this);},removeUser:function(username){if(!this.users.has(username)){return;}this.users.get(username).destroy();this.users.erase(username);}});var MembersNav=new Class({Extends:Nav,onBeforeInit:function(options){this.room=options.room;this.users=$H();options.name=\"members_\"+this.room.username;options.iconOptions={iconName:\"contacts\"};options.displayName=\"Members\";options.className=\"members_nav\";options.hasSubnavs=true;return options;},onInit:function(){this.clear=new Element(\"div\",{\"style\":\"clear: both\"});this.list=new Element(\"div\",{\"class\":\"menu_list\"}).adopt(this.clear).inject(this.subnavs);},addUsers:function(users){$splat(users).each(function(user){user=UserUtility.processUser(user);if(!this.users.has(user.username)){var pic=ItemUtility.createProfilePic(user,\"16a\");pic.addEvent(\"click\",this.fireEvent.bind(this,[\"showUser\",user]));pic.inject(this.clear,\"before\");this.users.set(user.username,pic);}},this);},removeUser:function(username){if(!this.users.has(username)){return;}this.users.get(username).destroy();this.users.erase(username);}});var StreamItemUtility={createDateSeperatorItem:function(ts){var date=DateUtility.convertFromTimestamp(ts);var timetext=date.format(\"%B %D\");var el=new Element(\"div\",{\"class\":\"post seperator\",\"ts\":ts}).adopt(new Element(\"div\",{\"class\":\"seperator_text\",\"text\":timetext}));return el;},createSeperatorItem:function(str){var el=new Element(\"div\",{\"class\":\"post seperator\"}).adopt(new Element(\"div\",{\"class\":\"seperator_text\",\"text\":TextUtility.unescape(str)}));return el;},createInStreamItem:function(item){return StreamItemUtility.createStreamItem(item,true,false);},createUserStreamItem:function(item){return StreamItemUtility.createStreamItem(item,false,false);},createSelfLikesStreamItem:function(item){return StreamItemUtility.createStreamItem(item,true,true);},createLikesStreamItem:function(item){return StreamItemUtility.createStreamItem(item,false,true);},createStreamItem:function(item,inbound,likes_stream){var el=ItemUtility.createPostBubble(\"post haspic\");item.creator=UserUtility.processSource(item.creator);item.source=UserUtility.processSource(item.source);if($defined(item.post.reply_user)){item.post.reply_user=UserUtility.processSource(item.post.reply_user);}if($defined(item.post.convo_user)){item.post.convo_user=UserUtility.processSource(item.post.convo_user);}if($defined(item.post.forward_user)){item.post.forward_user=UserUtility.processSource(item.post.forward_user);}item.can_delete=false;if(!$defined(item.private_replies)){item.private_replies=0;}var user_id=pipio.currentUser.user_id;if(inbound){item.can_delete=true;}else{if(item.creator_id==user_id){item.can_delete=true;}}if(likes_stream){item.can_delete=false;}if(inbound){item.can_like=true;}else{item.can_like=false;}ItemUtility.createProfilePic(item.creator,32).inject(el);if(item.reply_id!=item.item_id&&$defined(item.post.reply_user)){ItemUtility.createProfilePic(item.post.reply_user,20).inject(el);el.addClass(\"reply\");}if(item.source_id!=item.creator_id){ItemUtility.createProfilePic(item.source,20).inject(el);}var content=new Element(\"div\",{\"class\":\"post_content\"}).inject(el);StreamItemUtility.createStreamItemPostActions(item).inject(el);StreamItemUtility.createStreamItemHeader(item).inject(content);var attachments=StreamItemUtility.createStreamItemAttachments(item);if(attachments){attachments.inject(content);}StreamItemUtility.createStreamItemFooter(item).inject(content);return el;},createConvoStreamItem:function(item){var el=ItemUtility.createPostBubble(\"post haspic\");item.creator=UserUtility.processSource(item.creator);item.source=UserUtility.processSource(item.source);if($defined(item.post.reply_user)){item.post.reply_user=UserUtility.processSource(item.post.reply_user);}if($defined(item.post.convo_user)){item.post.convo_user=UserUtility.processSource(item.post.convo_user);}if($defined(item.post.forward_user)){item.post.forward_user=UserUtility.processSource(item.post.forward_user);}item.can_delete=false;ItemUtility.createProfilePic(item.creator,32).inject(el);if(item.reply_id!=item.item_id&&$defined(item.post.reply_user)){ItemUtility.createProfilePic(item.post.reply_user,20).inject(el);el.addClass(\"reply\");}if(item.source_id!=item.creator_id){ItemUtility.createProfilePic(item.source,20).inject(el);}var content=new Element(\"div\",{\"class\":\"post_content\"}).inject(el);StreamItemUtility.createStreamItemPostActions(item).inject(el);StreamItemUtility.createStreamItemHeader(item).inject(content);var attachments=StreamItemUtility.createStreamItemAttachments(item);if(attachments){attachments.inject(content);}StreamItemUtility.createConvoStreamItemFooter(item).inject(content);return el;},createStreamMemberRoomItem:function(item){return StreamItemUtility.createStreamRoomItem(item,true);},createStreamPublicRoomItem:function(item){return StreamItemUtility.createStreamRoomItem(item,false);},createStreamRoomItem:function(item,is_member){var el=ItemUtility.createPostBubble(\"post haspic\");item.creator=UserUtility.processSource(item.creator);item.source=UserUtility.processSource(item.source);if($defined(item.post.reply_user)){item.post.reply_user=UserUtility.processSource(item.post.reply_user);}if($defined(item.post.convo_user)){item.post.convo_user=UserUtility.processSource(item.post.convo_user);}if($defined(item.post.forward_user)){item.post.forward_user=UserUtility.processSource(item.post.forward_user);}item.can_delete=false;if(!$defined(item.private_replies)){item.private_replies=0;}var user_id=pipio.currentUser.user_id;if(item.creator_id==user_id){item.can_delete=true;}if(is_member&&item.source_id==item.creator_id){item.can_delete=true;}ItemUtility.createProfilePic(item.creator,32).inject(el);if(item.reply_id!=item.item_id&&$defined(item.post.reply_user)){ItemUtility.createProfilePic(item.post.reply_user,20).inject(el);el.addClass(\"reply\");}var content=new Element(\"div\",{\"class\":\"post_content\"}).inject(el);StreamItemUtility.createStreamItemPostActions(item).inject(el);StreamItemUtility.createStreamRoomItemHeader(item).inject(content);var attachments=StreamItemUtility.createStreamItemAttachments(item);if(attachments){attachments.inject(content);}StreamItemUtility.createStreamItemFooter(item).inject(content);return el;},createStreamItemPostActions:function(item){var el=new Element(\"div\",{\"class\":\"post_actions\"});if(item.can_delete){var deleteAction=new Element(\"div\",{\"class\":\"post_action delete\"}).inject(el);deleteAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"streamItemDelete\",item.item_id]));}if(item.can_like){var likeAction=new Element(\"div\",{\"class\":\"post_action like likes_\"+item.item_id,\"is_liked\":item.is_liked,\"likes\":item.likes}).inject(el);likeAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"streamItemLike\",item.item_id,likeAction]));new Element(\"div\",{\"class\":\"text grey text11\",\"text\":item.likes,\"likes\":item.likes}).inject(likeAction);if(item.likes>0){likeAction.addClass(\"other_liked\");}if(item.is_liked==1){likeAction.addClass(\"on\");}}return el;},createStreamRoomItemHeader:function(item){var el=new Element(\"div\",{\"class\":\"header\"});var is_question=false;var creator_action=\"broadcast dark\";if(item.is_public==0){creator_action=\"lock dark\";}else{if(item.post_type==4){creator_action=\"status dark\";}else{if(item.post_type==5){creator_action=\"question dark\";is_question=true;}}}StreamItemUtility.createStreamUserAction(creator_action).inject(el);StreamItemUtility.createUsernameElement(item.creator).inject(el);if(is_question){new Element(\"span\",{\"class\":\"grey2\",\"text\":\" asks \"}).inject(el);}if(item.post_type==3){StreamItemUtility.createStreamUserAction(\"forward\").inject(el);StreamItemUtility.createUsernameElement(item.post.forward_user).inject(el);}if(item.reply_id!=item.item_id){StreamItemUtility.createStreamUserAction(\"reply\").inject(el);StreamItemUtility.createUsernameElement(item.post.reply_user).inject(el);}var body=new Element(\"span\",{\"html\":\" \"+TextUtility.replaceUrls(TextUtility.convertNewLine(TextUtility.unescapeQuotes(item.post.body)))}).inject(el);if($defined(item.post.forward_body)&&item.post.forward_body!=\"\"){body.appendText(\" - \"+TextUtility.replaceUrls(TextUtility.convertNewLine(TextUtility.unescape(item.post.forward_body))));}return el;},createUsernameElement:function(user){if($defined(user.user_id)){var el=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescapeQuotes(user.fullname)});el.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showUser\",user]));return el;}else{if($defined(user.room_id)){var el=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescapeQuotes(user.room_name)});el.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showRoom\",user]));return el;}}},createStreamItemHeader:function(item){var el=new Element(\"div\",{\"class\":\"header\"});var is_question=false;var creator_action=\"broadcast dark\";if(item.is_public==0){creator_action=\"lock dark\";}else{if(item.post_type==4){creator_action=\"status dark\";}else{if(item.post_type==5){creator_action=\"question dark\";is_question=true;}}}StreamItemUtility.createStreamUserAction(creator_action).inject(el);if($defined(item.source.room_id)){StreamItemUtility.createUsernameElement(item.source).inject(el);new Element(\"span\",{\"class\":\"dark\",\"text\":\": \"}).inject(el);}StreamItemUtility.createUsernameElement(item.creator).inject(el);if(is_question){new Element(\"span\",{\"class\":\"dark\",\"text\":\" asks \"}).inject(el);}if(item.post_type==3){StreamItemUtility.createStreamUserAction(\"forward\").inject(el);StreamItemUtility.createUsernameElement(item.post.forward_user).inject(el);}if(item.reply_id!=item.item_id){StreamItemUtility.createStreamUserAction(\"reply\").inject(el);StreamItemUtility.createUsernameElement(item.post.reply_user).inject(el);}else{if(item.creator_id!=item.source_id&&!$defined(item.source.room_id)){StreamItemUtility.createStreamUserAction(\"direct\").inject(el);StreamItemUtility.createUsernameElement(item.source).inject(el);}}var body=new Element(\"span\",{\"html\":\" \"+TextUtility.replaceUrls(TextUtility.convertNewLine(TextUtility.unescapeQuotes(item.post.body)))}).inject(el);if($defined(item.post.forward_body)&&item.post.forward_body!=\"\"){body.appendText(\" - \"+TextUtility.replaceUrls(TextUtility.convertNewLine(TextUtility.unescape(item.post.forward_body))));}return el;},createStreamItemAttachments:function(item){if(item.attachment_type==0){return false;}var el=new Element(\"div\",{\"class\":\"attachment\"}).adopt(new Element(\"span\",{\"class\":\"indicator\",\"html\":\"&raquo;\"}));switch(item.attachment_type){case 1:var pipioUrl=DataUtility.getPipioUrl(null,item.attachment[0].hash);item.attachment[0]=AttachmentUtility.parsePhotoAttachment(item.attachment[0]);item.attachment[0].url=pipioUrl;new Element(\"a\",{\"target\":\"_blank\",\"href\":pipioUrl,\"text\":TextUtility.unescape(item.attachment[0].filename)}).inject(el);if(item.attachment[0].is_photo){el.addClass(\"has_thumbnail\");var playButton=new ButtonSmall({displayName:\"View Photo\",action:\"photo\"});$(playButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showPhotoPopup\",item.attachment[0]]));$(playButton).inject(el);var thumb=new InlineImage(item.attachment[0]);$(thumb).inject(el);}break;case 2:var pipioUrl=DataUtility.getPipioUrl(item.attachment[0].url,item.attachment[0].hash);item.attachment[0]=AttachmentUtility.parseLinkAttachment(item.attachment[0]);new Element(\"a\",{\"target\":\"_blank\",\"href\":pipioUrl,\"text\":TextUtility.unescape(item.attachment[0].url)}).inject(el);if(item.attachment[0].is_video){var playButton=new ButtonSmall({displayName:\"Play Video\",action:\"pivot_right dark\"});$(playButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showVideoPopup\",item.attachment[0]]));$(playButton).inject(el);}else{if(item.attachment[0].is_photo){el.addClass(\"has_thumbnail\");var playButton=new ButtonSmall({displayName:\"View Photo\",action:\"photo\"});$(playButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showPhotoPopup\",{filename:\"Photo\",url:item.attachment[0].url}]));$(playButton).inject(el);var thumb=new InlineImage({filename:\"Photo\",url:item.attachment[0].url});$(thumb).inject(el);}}break;}return new Element(\"div\",{\"class\":\"attachments\"}).adopt(el);},createStreamItemFooter:function(item){var el=new Element(\"div\",{\"class\":\"footer\"});if(!$defined(item.date_created)){return el;}var date=DateUtility.convertFromTimestamp(item.date_created);var ts=new Element(\"span\",{\"class\":\"timestamp\",\"text\":DateUtility.getTimestamp(date,\"%B %D at %I:%M%p\"),\"ts\":date,\"ts_format\":\"%B %D at %I:%M%p\"}).inject(el);if($defined(item.location)&&$defined(item.geohash)&&item.geohash!=\"\"){var loc=DataUtility.getGeoString(item.location);if(loc){el.appendText(\" from \");var location=new Element(\"span\",{\"class\":\"clickable\",\"text\":TextUtility.unescape(loc)}).inject(el);location.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showGlobal\",item.location]));}}StreamItemUtility.createFooterActions(item,el);return el;},createConvoStreamItemFooter:function(item){var el=new Element(\"div\",{\"class\":\"footer\"});if(!$defined(item.date_created)){return el;}var date=DateUtility.convertFromTimestamp(item.date_created);var ts=new Element(\"span\",{\"class\":\"timestamp\",\"text\":DateUtility.getTimestamp(date,\"%B %D at %I:%M%p\"),\"ts\":date,\"ts_format\":\"%B %D at %I:%M%p\"}).inject(el);if($defined(item.location)&&$defined(item.geohash)&&item.geohash!=\"\"){var loc=DataUtility.getGeoString(item.location);if(loc){el.appendText(\" from \");var location=new Element(\"span\",{\"class\":\"clickable\",\"text\":TextUtility.unescape(loc)}).inject(el);location.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showGlobal\",item.location]));}}StreamItemUtility.createConvoFooterActions(item,el);return el;},createFooterActions:function(item,el){if(!pipio.isLoggedIn()){return;}if(item.convo_id!=item.item_id){var convoAction=StreamItemUtility.createFooterAction(\"convo\",\"View Conversation\",true);convoAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showConvo\",item.convo_id]));convoAction.inject(el);}else{var convoAction=StreamItemUtility.createRepliesAction(item);convoAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showConvo\",item.convo_id]));convoAction.inject(el);}var replyAction=StreamItemUtility.createFooterAction(\"reply\",\"Reply\",true);replyAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"replyShareBoxShow\",item.item_id]));replyAction.inject(el);if(item.is_public==1){var forward_id=(item.post_type==3&&item.forward_id!=0)?item.forward_id:item.item_id;var forwardAction=StreamItemUtility.createFooterAction(\"forward\",\"Forward\",true).inject(el);forwardAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"forwardShareBoxShow\",forward_id,item.creator.username,item.post.body]));}},createConvoFooterActions:function(item,el){var replyAction=StreamItemUtility.createFooterAction(\"reply\",\"Reply\",true);replyAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"replyShareBoxShow\",item.item_id]));replyAction.inject(el);if(item.is_public==1){var forward_id=(item.forward_id!=0)?item.forward_id:item.item_id;var forwardAction=StreamItemUtility.createFooterAction(\"forward\",\"Forward\",true).inject(el);forwardAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"forwardShareBoxShow\",forward_id,item.creator.username,item.post.body]));}},createRepliesAction:function(item){var repliesClass=\"replies_\"+item.item_id;var replies=item.replies+item.private_replies;var el=new Element(\"span\",{\"class\":\"footer_action has_action \"+repliesClass,\"replies\":replies}).adopt(new Element(\"div\",{\"class\":\"action convo\"}));el.appendText(TextUtility.pluralText(replies,\"Reply\",\"Replies\"));return el;},updateReplyCount:function(item_id,count){$$(\".replies_\"+item_id).each(function(el){var replies=parseInt(el.get(\"replies\"))+count;el.set(\"replies\",replies);el.empty();el.adopt(new Element(\"div\",{\"class\":\"action convo\"}));el.appendText(TextUtility.pluralText(replies,\"Reply\",\"Replies\"));});},updateItemLiked:function(item_id,likes,is_liked){Logger().log(item_id+\"-\"+likes+\"-\"+is_liked);$$(\".likes_\"+item_id).each(function(el){el.set(\"likes\",likes);if(is_liked!=-1){el.set(\"is_liked\",is_liked);}el.empty();new Element(\"div\",{\"class\":\"text grey text11\",\"text\":likes,\"likes\":likes}).inject(el);if(likes>0){el.addClass(\"other_liked\");}else{el.removeClass(\"other_liked\");}if(is_liked!=-1){if(is_liked==1){el.addClass(\"on\");}else{el.removeClass(\"on\");}}});},createFooterAction:function(actionName,actionText,hide){var el=new Element(\"span\",{\"class\":\"footer_action has_action\"}).adopt(new Element(\"div\",{\"class\":\"action \"+actionName}));el.appendText(actionText);if(hide){el.addClass(\"hide\");}return el;},createStreamUserAction:function(user_action){var el=new Element(\"span\",{\"class\":\"user_action\"}).adopt(new Element(\"div\",{\"class\":\"action \"+user_action}));return el;},createStatusBoxFooter:function(status_message){var el=new Element(\"div\",{\"class\":\"footer\"});if(!$defined(status_message)){return el;}if(!$defined(status_message.date_created)){return el;}var date=DateUtility.convertFromTimestamp(status_message.date_created);var ts=new Element(\"span\",{\"class\":\"timestamp\",\"text\":DateUtility.getTimestamp(date,\"%B %D at %I:%M%p\"),\"ts\":date,\"ts_format\":\"%B %D at %I:%M%p\"}).inject(el);if($defined(status_message.location)&&$defined(status_message.location.geohash)&&status_message.location.geohash!=\"\"){var loc=DataUtility.getGeoString(status_message.location);if(loc){el.appendText(\" from \");new Element(\"span\",{\"text\":TextUtility.unescape(loc)}).inject(el);}}return el;}};var Room=new Class({Extends:AppInstance,EventHandlers:[\"roomClosed\",\"userSwitched\"],parseOptions:function(options){this.room=options.room;this.displayName=this.room.room_name;this.appId=\"room_\"+this.room.username;this.iconOptions={user:this.room};},userSwitched:function(){this.stop();},onStart:function(){this.setupNav();},onStop:function(){},roomClosed:function(data){if(!$defined(data.username)||data.username!=this.room.username){return;}this.stop();}});Room.implement({setupNav:function(){Logger().log(\"home setup\");this.navAdd(new Nav({iconOptions:{iconName:\"updates\"},displayName:\"Updates\",name:\"updates\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"updates\",\"room_menu\"])}));var roomMenu=new RoomMenu({displayName:this.room.room_name,room:this.room,appId:this.appId,isDefault:true,closeFunc:this.stop.bind(this)});this.menuAdd(\"room_menu\",roomMenu);var content=new RoomContent({isDefault:true,room:this.room});this.contentAdd(\"updates\",content);var membersContent=new RoomMembersContent({room:this.room});this.contentAdd(\"room_members\",membersContent);var subscribersContent=new RoomSubscribersContent({room:this.room});this.contentAdd(\"room_subscribers\",subscribersContent);var requestsContent=new RoomRequestsContent({room:this.room});this.contentAdd(\"room_requests\",requestsContent);}});var RoomContent=new Class({Extends:Content,EventHandlers:[\"streamItemReceived\",\"roomStreamItemDeleted\"],onBeforeInit:function(options){this.room=options.room;},onInit:function(){this.statusBox=new RoomStatusBox(this.room);$(this.statusBox).inject(this.content);this.loader=new StreamLoader({createElementFunc:StreamItemUtility.createStreamMemberRoomItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"This room has no updates\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Room updates loading...\"}),errorEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"This room is private\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},roomStreamItemReceived:function(data){if(!$defined(data.item)||!$defined(data.username)||data.username!=this.room.username){return;}Logger().log(\"roomItemRecevied, processing\");this.loader.process(data.item);},streamItemReceived:function(data){if($defined(data.item)&&data.item.source.username==this.room.username){this.loader.process(data.item);}},roomStreamItemDeleted:function(data){if(!$defined(data.username)||data.username!=this.room.username){return;}this.loader.remove(data.item_id);},alertCheck:function(item){if(item.creator_id!=this.getPrivateUser().user_id){this.fireEvent(\"alertAdd\",\"2_room_\"+this.room.username);}},loadMore:function(){var params={username:this.room.username,date_created:this.loader.oldestTimestamp,item_id:this.loader.oldestId};if(this.isLoggedIn()){this.call(\"home\",\"stream_room_load\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));}else{this.call(\"home\",\"public_stream_room_load\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));}this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},loadMoreFail:function(status){if(status.code==2002){this.loader.showError();}},bottomFunc:function(){this.loadMore();}});var RoomMembersContent=new Class({Extends:Content,EventHandlers:[\"roomMemberAdded\",\"roomMemberDeleted\"],onBeforeInit:function(options){this.room=options.room;this.isCreator=this.room.creator_id==this.getPrivateUser().user_id;return options;},onInit:function(){this.statusBox=new RoomStatusBox(this.room);$(this.statusBox).inject(this.content);StreamItemUtility.createSeperatorItem(\"Members\").inject(this.content);this.loader=new ItemLoader({idField:\"user_id\",sortField:\"date_created\",sortAscending:false,createElementFunc:ContactItemUtility.createRoomMemberItemFactory(this.room,this.isCreator),emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"There are no members in this room\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Room members loading...\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},loadMore:function(){var params={username:this.room.username,date_created:this.loader.lowestSortValue};this.call(\"pipio\",\"room_members\",params,this.loadMoreSuccess.bind(this),null);this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.members)||data.members.length==0){this.atBottom=true;return;}data.members.each(function(user){var user_copy=UserUtility.processUser(user);user_copy.date_created=user.date_created;this.loader.process(user_copy);},this);this.bottomFuncCalled=false;},bottomFunc:function(){this.loadMore();},roomMemberAdded:function(data){if(!$defined(data.room_username)||!$defined(data.user)||data.room_username!=this.room.username){return;}var user=UserUtility.processUser(data.user);user.date_created=new Date().getTime()/1000;this.loader.process(user);},roomMemberDeleted:function(data){if(!$defined(data.username)||!$defined(data.room_username)||data.room_username!=this.room.username){return;}if(!$defined(this.getUser(data.username))){return;}var user=this.getUser(data.username);this.loader.remove(user.user_id);}});var RoomRequestsContent=new Class({Extends:Content,EventHandlers:[\"roomMemberRequestDeleted\",\"roomMemberRequestAdded\",\"roomMemberAdded\"],onBeforeInit:function(options){this.room=options.room;return options;},onInit:function(){this.statusBox=new RoomStatusBox(this.room);$(this.statusBox).inject(this.content);StreamItemUtility.createSeperatorItem(\"Membership Requests\").inject(this.content);this.loader=new ItemLoader({idField:\"user_id\",sortField:\"date_created\",sortAscending:false,createElementFunc:ContactItemUtility.createRoomRequestItemFactory(this.room),emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"There are no membership requests to this room\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Room member requests loading...\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},loadMore:function(){var params={username:this.room.username,date_created:this.loader.lowestSortValue};this.call(\"pipio\",\"room_requests\",params,this.loadMoreSuccess.bind(this),null);this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.requests)||data.requests.length==0){this.atBottom=true;return;}data.requests.each(function(user){var user_copy=UserUtility.processUser(user);user_copy.date_created=user.date_created;this.loader.process(user_copy);},this);this.bottomFuncCalled=false;},bottomFunc:function(){this.loadMore();},roomMemberAdded:function(data){if(!$defined(data.room_username)||!$defined(data.user)||data.room_username!=this.room.username){return;}this.loader.remove(data.user.user_id);},roomMemberRequestDeleted:function(data){if(!$defined(data.room_username)||!$defined(data.username)||data.room_username!=this.room.username){return;}if(!$defined(this.getUser(data.username))){return;}var user=this.getUser(data.username);this.loader.remove(user.user_id);},roomMemberRequestAdded:function(data){if(!$defined(data.room_username)||!$defined(data.user)||data.room_username!=this.room.username){return;}var user=UserUtility.processUser(data.user);user.date_created=new Date().getTime()/1000;this.loader.process(user);}});var RoomSubscribersContent=new Class({Extends:Content,EventHandlers:[\"roomSubscriberAdded\",\"roomSubscriberDeleted\"],onBeforeInit:function(options){this.room=options.room;return options;},onInit:function(){this.statusBox=new RoomStatusBox(this.room);$(this.statusBox).inject(this.content);StreamItemUtility.createSeperatorItem(\"Subscribers\").inject(this.content);this.loader=new ItemLoader({idField:\"user_id\",sortField:\"date_created\",sortAscending:false,createElementFunc:ContactItemUtility.createRoomSubscriberItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"There are no subscribers to this room\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Room subscribers loading...\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},roomSubscriberAdded:function(data){if(!$defined(data.username)||!$defined(data.user)||data.username!=this.room.username){return;}var user=UserUtility.processUser(data.user);user.date_created=new Date().getTime()/1000;this.loader.process(user);},roomSubscriberDeleted:function(data){if(!$defined(data.username)||!$defined(data.room_username)||data.room_username!=this.room.username){return;}if(!$defined(this.getUser(data.username))){return;}var user=this.getUser(data.username);this.loader.remove(user.user_id);},loadMore:function(){var params={username:this.room.username,date_created:this.loader.lowestSortValue};this.call(\"pipio\",\"room_subscribers\",params,this.loadMoreSuccess.bind(this),null);this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.subscribers)||data.subscribers.length==0){this.atBottom=true;return;}data.subscribers.each(function(user){var user_copy=UserUtility.processUser(user);user_copy.date_created=user.date_created;this.loader.process(user_copy);},this);this.bottomFuncCalled=false;},bottomFunc:function(){this.loadMore();}});var RoomEditProfilePopupContent=new Class({Extends:PopupContent,strings:{bioLabel:\"About:\",urlLabel:\"Website:\"},onBeforeInit:function(options){this.room=options.room;return options;},onInit:function(){this.bioInput=new Element(\"textarea\",{\"maxlength\":500});new Element(\"div\",{\"class\":\"input_section bio\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.bioLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.bioInput)).inject(this.content);this.urlInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":200});new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.urlLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.urlInput)).inject(this.content);var about=this.getProfile(this.room.username);if($defined(about)){if($defined(about.bio)){this.bioInput.set(\"text\",about.bio);}if($defined(about.url)){this.urlInput.value=about.url;}}this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Update\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.updateProfile.bind(this));this.message=new Element(\"div\",{\"class\":\"message error\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},updateProfile:function(){var bio=this.bioInput.value.trim();var url=this.urlInput.value.trim();var params={username:this.room.username,bio:bio,url:url};this.call(\"home\",\"room_profile_update\",params,this.updateProfileSuccess.bind(this),this.updateProfileFail.bind(this));this.actionButton.showProgress();this.message.empty();},updateProfileSuccess:function(data){this.actionButton.hideProgress();this.closeContent();},updateProfileFail:function(){this.actionButton.hideProgress();this.message.set(\"text\",this.strings.errorMessage);},onShow:function(){this.focus();},focus:function(){this.bioInput.focus.delay(500,this.bioInput);}});var RoomSearchPopupContent=new Class({Extends:PopupContent,strings:{roomSearchMessage:\"Enter any terms to search for a room\",errorMessage:\"There was an error creating this group\"},onInit:function(){new Element(\"div\",{\"class\":\"text_section centered light\",\"text\":this.strings.roomSearchMessage}).inject(this.content);this.searchInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\"});this.searchInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.searchInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Search\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.search.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.searchInput.value.trim()!=\"\"){this.search();}}},search:function(){var query=this.searchInput.value.trim();var params={query:query};this.call(\"home\",\"room_search\",params,this.searchSuccess.bind(this),this.searchFail.bind(this));this.actionButton.showProgress();},searchSuccess:function(data){this.actionButton.hideProgress();if(!$defined(data.rooms)){return;}if(data.rooms.length==0){var name=\"room_search\";var title=\"No Results\";var message=\"Your search returned no results\";this.fireEvent(\"showAlert\",name,title,message);}else{this.showResultsPopup(data.rooms);}},searchFail:function(status){this.actionButton.hideProgress();var name=\"search_user\";var title=\"Error\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);},showResultsPopup:function(rooms){if($defined(this.resultsPopup)){this.resultsPopup.close();}this.createResultsPopup(rooms);},closeResultsPopup:function(){if($defined(this.resultsPopup)){this.resultsPopup.close();}},createResultsPopup:function(rooms){this.resultsPopup=new Popup({size:{x:350,y:400},resizable:false,dockable:false,className:\"roomSearch\",onClose:this.destroyResultsPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"search\"},displayName:\"Search Results\",closable:true});var content=new RoomSearchResultPopupContent({rooms:rooms});this.resultsPopup.addContent(\"results\",nav,content);},destroyResultsPopup:function(){this.resultsPopup=null;},onShow:function(){this.focus();},focus:function(){this.searchInput.focus.delay(500,this.searchInput);},onClose:function(){this.closeResultsPopup();}});var RoomSearchResultPopupContent=new Class({Extends:PopupContent,strings:{searchResultMessage:\"Search results\"},onBeforeInit:function(options){this.rooms=options.rooms;return options;},onInit:function(){this.list=new Element(\"div\",{\"class\":\"itemList\"}).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.closeButton)).inject(this.content);this.insertRooms();},insertRooms:function(){this.rooms.each(function(room){room=UserUtility.processRoom(room);this.insertRoom(room);},this);},insertRoom:function(room){var el=RoomItemUtility.createRoomItem(room);el.addEvent(\"click\",this.fireEvent.bind(this,[\"showRoom\",room]));el.inject(this.list);}});var RoomItemUtility={createRoomItem:function(room){var el=new Element(\"div\",{\"class\":\"listItem\"});ItemUtility.createProfilePic(room,32).inject(el);new Element(\"div\",{\"class\":\"listText text12 light\",\"text\":TextUtility.cleanText(room.room_name+\" (\"+room.username+\")\")}).inject(el);if($defined(room.about)&&$defined(room.about.bio)){new Element(\"div\",{\"class\":\"about_text text11 light3\",\"text\":TextUtility.cleanText(room.about.bio)}).inject(el);}return el;}};var RoomConnectionMenuSection=new Class({Extends:Base,EventHandlers:[\"roomStreamSubscriptionAdded\",\"roomStreamSubscriptionDeleted\",\"roomMembershipUpdated\"],init:function(options){this.room=this.getRoom(options.room.username);this.subscribed=parseInt(this.room.subscribed)==1;this.isCreator=this.room.creator_id==this.getPrivateUser().user_id;this.createSection();},createSection:function(){this.wrapper=new Element(\"div\");this.generateSection();},setRoom:function(room){this.room=room;this.generateSection();},generateSection:function(){this.wrapper.empty();this.generateSubscriptionSection();if(this.isCreator){this.generatePrivacySection();new Element(\"div\",{\"class\":\"text_section light centered text11\",\"text\":\"You are the creator\"}).inject(this.wrapper);this.button=new ButtonMedium({displayName:\"Close Room\",className:\"dark\",action:\"cross\"});var name=\"roomDelete_\"+this.room.username;var title=\"Close \"+this.room.room_name;var message=\"Are you sure you want to close the room \"+this.room.room_name+\"?\";var func=pipio.dispatchEvent.bind(pipio,[\"feedRoomDelete\",this.room.username]);$(this.button).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showConfirmation\",name,title,message,func]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.button)).inject(this.wrapper);}else{switch(parseInt(this.room.status)){case 1:this.createConnectedSection();break;case 2:this.createRequestSection();break;case 3:this.createRequestOutSection();break;default:this.createNotConnectedSection();break;}}},createNotConnectedSection:function(){this.button=new ButtonMedium({displayName:\"Join Room\",className:\"dark\",action:\"check\"});var name=\"roomRequest_\"+this.room.username;var title=\"Join \"+this.room.room_name;var message=\"Send membership request to \"+this.room.room_name+\"?\";var func=this.roomRequestCreate.bind(this);$(this.button).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showConfirmation\",name,title,message,func]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.button)).inject(this.wrapper);},createConnectedSection:function(){new Element(\"div\",{\"class\":\"text_section light centered text11\",\"text\":\"You are a member\"}).inject(this.wrapper);this.button=new ButtonMedium({displayName:\"Leave Room\",className:\"dark\",action:\"cross\"});var name=\"roomLeave_\"+this.room.username;var title=\"Leave \"+this.room.room_name;var message=\"Are you sure you want to leave \"+this.room.room_name+\"?\";var func=this.roomMembershipDelete.bind(this);$(this.button).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showConfirmation\",name,title,message,func]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.button)).inject(this.wrapper);},createRequestSection:function(){this.button=new ButtonMedium({displayName:\"Accept Membership\",className:\"dark\",action:\"check\"});$(this.button).addEvent(\"click\",this.roomInviteAccept.bind(this));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.button)).inject(this.wrapper);this.button2=new ButtonMedium({displayName:\"Reject Membership\",className:\"dark\",action:\"cross\"});$(this.button2).addEvent(\"click\",this.roomInviteDelete.bind(this));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.button2)).inject(this.wrapper);},roomInviteAccept:function(){this.call(\"home\",\"room_invite_accept\",{username:this.room.username},null,null);this.button.showProgress();},roomInviteDelete:function(){var params={username:this.getPrivateUser().username,room_username:this.room.username};this.call(\"home\",\"room_invite_delete\",params,null,null);this.button2.showProgress();},createRequestOutSection:function(){new Element(\"div\",{\"class\":\"text_section light centered text11\",\"text\":\"Membership request pending\"}).inject(this.wrapper);},roomRequestCreate:function(){this.call(\"home\",\"room_request_create\",{username:this.room.username},null,null);this.button.showProgress();},roomMembershipDelete:function(){this.call(\"home\",\"room_leave\",{username:this.room.username},null,null);this.button.showProgress();},generateSubscriptionSection:function(){this.subscription=new Toggle(this.subscribed);$(this.subscription).addEvent(\"click\",this.subscriptionToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Subscribe:\"}),$(this.subscription)).inject(this.wrapper);},generatePrivacySection:function(){this.privacy=new Toggle(this.room.is_public==1);$(this.privacy).addEvent(\"click\",this.privacyToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Public:\"}),$(this.privacy)).inject(this.wrapper);},privacyToggle:function(){this.call(\"home\",\"room_privacy_set\",{username:this.room.username,is_public:this.privacy.toInt()});},subscriptionToggle:function(){Logger().log(this.subscribed);if(this.subscribed){this.streamUnsubscribe();}else{this.streamSubscribe();}},streamUnsubscribe:function(){this.subscription.off();this.call(\"home\",\"room_unsubscribe\",{username:this.room.username});},streamSubscribe:function(){this.subscription.on();this.call(\"home\",\"room_subscribe\",{username:this.room.username},null,this.streamSubscribeFail.bind(this));},streamSubscribeFail:function(status){if(status.code==2002){this.subscription.off();var name=\"subscription\";var title=\"Error\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);}},roomPrivacyUpdated:function(data){if(!$defined(data.username)||data.username!=this.room.username,!$defined(data.is_public)){return;}if(data.is_public==1){this.privacy.on();}else{this.privacy.off();}},roomStreamSubscriptionAdded:function(data){if(!$defined(data.room)||data.room.username!=this.room.username){return;}this.subscribed=true;this.generateSection();},roomStreamSubscriptionDeleted:function(data){if(!$defined(data.username)||data.username!=this.room.username){return;}this.subscribed=false;this.generateSection();},roomMembershipUpdated:function(data){if(!$defined(data.username)||data.username!=this.room.username){return;}this.room.status=parseInt(data.status);this.generateSection();},toElement:function(){return this.wrapper;}});var RoomMenu=new Class({Extends:Menu,EventHandlers:[\"roomMemberAdded\",\"roomMemberDeleted\",\"roomSubscriberAdded\",\"roomSubscriberDeleted\",\"roomMemberRequestDeleted\",\"roomMemberRequestAdded\"],strings:{groupMenuText:'These are contacts in your group \"{0}\"',unsortedGroupMenuText:\"These are contacts that have not been added to a group\"},onBeforeInit:function(options){this.room=options.room;this.appId=options.appId;this.isCreator=this.room.creator_id==this.getPrivateUser().user_id;return options;},onInit:function(){ItemUtility.createProfilePic(this.room,100).inject(this.menu);this.aboutSection=new RoomProfileMenuSection({room:this.room});$(this.aboutSection).inject(this.menu);if(this.isLoggedIn()){this.connect=new RoomConnectionMenuSection({room:this.room});$(this.connect).inject(this.menu);if(this.isCreator){this.profilePicUploadButton=new ButtonMedium({displayName:\"Change Picture\",className:\"dark\",action:\"photo\"});this.fileInput=new Element(\"input\",{\"type\":\"file\",\"name\":\"file\"});this.form=new Element(\"form\").adopt(this.fileInput);this.fileInput.addEvent(\"change\",this.profilePicUpload.bind(this));this.profilePicUploadSection=new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.profilePicUploadButton).adopt(this.form)).inject(this.menu);var editProfileButton=new ButtonMedium({displayName:\"Edit Profile\",className:\"dark\",action:\"edit\"});$(editProfileButton).addEvent(\"click\",this.fireEvent.bind(this,[\"showEditRoomProfilePopup\",this.room]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(editProfileButton)).inject(this.menu);this.inviteButton=new ButtonMedium({displayName:\"Invite Members\",className:\"dark\",action:\"forward\"});$(this.inviteButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showRoomInvitePopup\",this.room]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.inviteButton)).inject(this.menu);}}new Element(\"div\",{\"class\":\"nav_seperator\"}).inject(this.menu);this.members=new MembersNav({room:this.room,appId:this.appId,onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"room_members\",\"room_menu\"])});$(this.members).inject(this.menu);this.subscribers=new SubscribersNav({user:this.room,appId:this.appId,onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"room_subscribers\",\"room_menu\"])});$(this.subscribers).inject(this.menu);if(this.isCreator){this.requests=new MemberRequestsNav({room:this.room,appId:this.appId,onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"room_requests\",\"room_menu\"])});$(this.requests).inject(this.menu);}},onShow:function(first){if(first){this.roomInfoLoad();}},roomInfoLoad:function(){if(this.isLoggedIn()){this.call(\"home\",\"room_info_load\",{username:this.room.username},this.roomInfoLoadSuccess.bind(this),null);}else{this.call(\"home\",\"public_room_info_load\",{username:this.room.username},this.roomInfoLoadSuccess.bind(this),null);}},roomMemberAdded:function(data){if(!$defined(data.room_username)||!$defined(data.user)||data.room_username!=this.room.username){return;}this.members.addUsers(data.user);this.requests.removeUser(data.user.username);},roomMemberDeleted:function(data){if(!$defined(data.username)||!$defined(data.room_username)||data.room_username!=this.room.username){return;}this.members.removeUser(data.username);},roomSubscriberAdded:function(data){if(!$defined(data.username)||!$defined(data.user)||data.username!=this.room.username){return;}this.subscribers.addUsers(data.user);},roomSubscriberDeleted:function(data){if(!$defined(data.username)||!$defined(data.room_username)||data.room_username!=this.room.username){return;}this.subscribers.removeUser(data.username);},roomMemberRequestDeleted:function(data){if(!$defined(data.room_username)||!$defined(data.username)||data.room_username!=this.room.username){return;}this.requests.removeUser(data.username);},roomMemberRequestAdded:function(data){if(!$defined(data.room_username)||!$defined(data.user)||data.room_username!=this.room.username){return;}this.requests.addUsers(data.user);},roomInfoLoadSuccess:function(data){if(!$defined(data.room)){return;}var room=UserUtility.processRoom(data.room);this.subscribers.addUsers(data.subscribers);this.members.addUsers(data.members);if($defined(data.requests)&&$defined(this.requests)){this.requests.addUsers(data.requests);}},profilePicUpload:function(){if(DataUtility.validatePhotoFile(this.fileInput.value)){this.call(\"pipio\",\"room_profilepic_upload\",{username:this.room.username},this.profilePicUploadSuccess.bind(this),this.profilePicUploadFail.bind(this),this.form);this.profilePicUploadButton.showProgress();}},profilePicUploadSuccess:function(){this.profilePicUploadButton.hideProgress();this.resetForm();},profilePicUploadFail:function(){this.profilePicUploadButton.hideProgress();this.resetForm();},resetForm:function(){this.profilePicUploadSection.empty();this.profilePicUploadButton=new ButtonMedium({displayName:\"Change Picture\",className:\"dark\",action:\"photo\"});this.fileInput=new Element(\"input\",{\"type\":\"file\",\"name\":\"file\"});this.form=new Element(\"form\").adopt(this.fileInput);this.fileInput.addEvent(\"change\",this.profilePicUpload.bind(this));this.profilePicUploadSection.adopt($(this.profilePicUploadButton).adopt(this.form));}});var RoomProfileMenuSection=new Class({Extends:Base,EventHandlers:[\"roomProfileUpdated\"],init:function(options){this.room=options.room;this.createSection();},createSection:function(){this.wrapper=new Element(\"div\");this.bioText=new Element(\"span\");this.bioSection=new Element(\"div\",{\"class\":\"text_section light1 text11 edit_option\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"About: \"}),this.bioText).inject(this.wrapper);this.urlText=new Element(\"a\",{\"target\":\"_blank\"});this.urlSection=new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap edit_option\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Web: \"}),this.urlText).inject(this.wrapper);this.roomProfileUpdated(this.room.username,this.getProfile(this.room.username));},roomProfileUpdated:function(username,about){if(username!=this.room.username){return;}if(!$defined(about)){DomUtility.hide(this.bioSection);DomUtility.hide(this.urlSection);return;}if(!$defined(about.bio)||about.bio==\"\"){DomUtility.hide(this.bioSection);}else{this.bioText.set(\"text\",TextUtility.unescape(about.bio));DomUtility.show(this.bioSection);}if(!$defined(about.url)||about.url==\"\"){DomUtility.hide(this.urlSection);}else{this.urlText.set(\"text\",TextUtility.unescape(about.url));this.urlText.set(\"href\",about.url);DomUtility.show(this.urlSection);}},toElement:function(){return this.wrapper;}});var Rss=new Class({Extends:App,EventHandlers:[\"userSwitched\",\"rssInstall\",\"rssUninstall\",\"rssFeedSubscribed\",\"rssFeedUnsubscribed\",\"showAddRssFeedPopup\"],onStart:function(){this.setupNav();this.feeds=$H();this.loadSubscriptions();},onStop:function(){},userSwitched:function(){if(!this.isLoggedIn()){this.stop();}},loadSubscriptions:function(){this.call(\"rss\",\"rss_subscriptions\",null,this.loadSubscriptionsSuccess.bind(this),null);},loadSubscriptionsSuccess:function(data){if(!$defined(data.subscriptions)){return;}data.subscriptions.each(function(subscription){this.rssFeedAdd(subscription);},this);},rssFeedSubscribed:function(data){if(!$defined(data.subscription)){return;}this.rssFeedAdd(data.subscription);},rssFeedUnsubscribed:function(data){if(!$defined(data.atom_id)){return;}this.rssFeedDelete(data.atom_id);},rssUninstall:function(){this.call(\"rss\",\"rss_uninstall\",null,this.rssUninstallSuccess.bind(this),null);},rssUninstallSuccess:function(){this.stop();},rssInstall:function(){this.call(\"rss\",\"rss_install\",null,this.rssInstallSuccess.bind(this),null);},rssInstallSuccess:function(){this.start();}});Rss.implement({requests:[{name:\"rss_subscriptions\",url:\"/api/app/rss/subscriptions\"},{name:\"rss_subscriptions_add\",params:[\"feed_url\"],url:\"/api/app/rss/subscriptions/add\"},{name:\"rss_subscriptions_delete\",params:[\"subscription_id\"],url:\"/api/app/rss/subscriptions/delete\"},{name:\"rss_feed\",params:[\"atom_id\",\"item_id\"],url:\"/api/app/rss/feed\"},{name:\"rss_feed_all\",url:\"/api/app/rss/feed/all\"},{name:\"rss_feed_subscribers\",params:[\"atom_id\"],url:\"/api/app/rss/feed/subscribers\"},{name:\"rss_install\",params:[],url:\"/api/app/rss/install\"},{name:\"rss_uninstall\",params:[],url:\"/api/app/rss/uninstall\"}]});Rss.implement({setupNav:function(){var homeNav=new Nav({iconOptions:{iconName:\"updates\"},displayName:\"All News Updates\",name:\"updates\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"updates\",\"rss_menu\"])});this.navAdd(homeNav);this.navAdd(new Nav({iconOptions:{iconName:\"rss\"},hasSubnavs:true,displayName:\"Feeds\",name:\"feeds\"}));this.navAdd(new Nav({iconOptions:{iconName:\"broadcast\",iconAction:\"add\"},displayName:\"Add New Feed...\",onClick:this.showAddRssFeedPopup.bind(this),name:\"new_feed\",parentName:\"feeds\",bottom:true}));var rssMenu=new RssMenu({isDefault:true,closeFunc:this.stop.bind(this),navId:homeNav.navId});this.menuAdd(\"rss_menu\",rssMenu);var content=new RssContent({isDefault:true});this.contentAdd(\"updates\",content);},rssFeedAdd:function(feed){if(this.feeds.has(feed.atom_id)){return;}var nav=new Nav({iconOptions:{\"iconName\":\"rss\"},displayName:feed.title,name:\"rss_\"+feed.atom_id,parentName:\"feeds\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"rss_\"+feed.atom_id,\"rss_\"+feed.atom_id])});this.navAdd(nav);this.feeds.set(feed.atom_id,nav);var feedMenu=new RssFeedMenu({displayName:feed.title,feed:feed});this.menuAdd(\"rss_\"+feed.atom_id,feedMenu);var content=new RssFeedContent({feed:feed});this.contentAdd(\"rss_\"+feed.atom_id,content);},rssFeedDelete:function(atom_id){if(!this.feeds.has(atom_id)){return;}this.feeds.get(atom_id).destroy();this.navDelete(\"rss_\"+atom_id);this.feeds.erase(atom_id);this.menuClose(\"rss_\"+atom_id);this.contentClose(\"rss_\"+atom_id);},showAddRssFeedPopup:function(){if($defined(this.addFeedPopup)){this.addFeedPopup.close();}this.createAddRssFeedPopup();},createAddRssFeedPopup:function(){this.addFeedPopup=new Popup({size:{x:350,y:94},resizable:false,dockable:false,className:\"addFeed\",onClose:this.destroyAddRssFeedPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"rss\",iconAction:\"add\"},displayName:\"Subscribe to a Feed\",closable:true});var content=new AddRssFeedPopupContent({});this.addFeedPopup.addContent(\"add_feed\",nav,content);},destroyAddRssFeedPopup:function(){this.addFeedPopup=null;}});var RssContent=new Class({Extends:Content,EventHandlers:[\"rssItemReceived\"],onBeforeInit:function(options){this.feed=options.feed;this.sessionTimestamp=(new Date().getTime())/1000;return options;},onInit:function(){this.loader=new ItemLoader({createElementFunc:RssItemUtility.createRssAllItem,idField:\"atom_item_id\",sortField:\"date_created\",sortAscending:false,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"This feed has no items\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Feed loading...\"}),alertFunc:this.alertCheck.bind(this)});$(this.loader).inject(this.content);},alertCheck:function(item){if(item.date_created>this.sessionTimestamp){this.fireEvent(\"alertAdd\",this.navId);}},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},rssItemReceived:function(data){if($defined(data.item)){this.loader.process(data.item);}},loadMore:function(){var params={date_created:this.loader.lowestSortValue};this.call(\"rss\",\"rss_feed_all\",params,this.loadMoreSuccess.bind(this),null);this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){item.feed=this.feed;this.loader.process(item);},this);this.bottomFuncCalled=false;},bottomFunc:function(){this.loadMore();}});var RssFeedContent=new Class({Extends:Content,EventHandlers:[\"rssItemReceived\"],onBeforeInit:function(options){this.feed=options.feed;return options;},onInit:function(){this.loader=new ItemLoader({createElementFunc:RssItemUtility.createRssFeedItem,idField:\"atom_item_id\",sortField:\"date_created\",sortAscending:false,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"This feed has no items\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Feed loading...\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},rssItemReceived:function(data){if($defined(data.item)&&data.item.atom_id==this.feed.atom_id){this.loader.process(data.item);}},loadMore:function(){var params={atom_id:this.feed.atom_id,date_created:this.loader.oldestTimestamp};this.call(\"rss\",\"rss_feed\",params,this.loadMoreSuccess.bind(this),null);this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){item.feed=this.feed;this.loader.process(item);},this);this.bottomFuncCalled=false;},bottomFunc:function(){Logger().log(\"rss content bottom\");}});var RssFeedMenu=new Class({Extends:Menu,onBeforeInit:function(options){this.feed=options.feed;return options;},onInit:function(){this.urlText=new Element(\"a\",{\"target\":\"_blank\",\"href\":this.feed.link,\"text\":TextUtility.unescape(this.feed.link)});new Element(\"div\",{\"class\":\"text_section nowrap text11 light1\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Web: \"}),this.urlText).inject(this.menu);new Element(\"div\",{\"class\":\"text_section light1\",\"text\":TextUtility.unescape(this.feed.description)}).inject(this.menu);this.deleteButton=new ButtonMedium({displayName:\"Unsubscribe\",className:\"dark\",action:\"cross\"});var name=\"rssFeedUnsubscribe_\"+this.feed.atom_id;var title=\"Unsubscribe \"+this.feed.title;var message=\"Are you sure you want to unsubscribe from the feed \"+this.feed.title+\"?\";var func=this.rssUnsubscribe.bind(this);$(this.deleteButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showConfirmation\",name,title,message,func]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.deleteButton)).inject(this.menu);new Element(\"div\",{\"class\":\"nav_seperator\"}).inject(this.menu);this.subscribers=new SubscribersNav({user:this.feed});$(this.subscribers).inject(this.menu);},onShow:function(first){if(first){this.subscribersLoad();}},subscribersLoad:function(){this.call(\"rss\",\"rss_feed_subscribers\",{atom_id:this.feed.atom_id},this.subscribersLoadSuccess.bind(this),null);},subscribersLoadSuccess:function(data){if(!$defined(data.subscribers)){return;}this.subscribers.addUsers(data.subscribers);},rssUnsubscribe:function(){var params={subscription_id:this.feed.subscription_id};this.call(\"rss\",\"rss_subscriptions_delete\",params,this.rssUnsubscribeSuccess.bind(this),this.rssUnsubscribeFail.bind(this));this.deleteButton.showProgress();},rssUnsubscribeSuccess:function(data){this.deleteButton.hideProgress();},rssUnsubscribeFail:function(){this.deleteButton.hideProgress();}});var RssMenu=new Class({Extends:Menu,onBeforeInit:function(options){options.displayName=\"News Reader\";return options;},onInit:function(){new Element(\"div\",{\"class\":\"text_section light1\",\"text\":TextUtility.unescape(\"All updates from your subscriptions will be visible here\")}).inject(this.menu);}});var AddRssFeedPopupContent=new Class({Extends:PopupContent,strings:{feedUrlLabel:\"Feed URL:\",errorMessage:\"There was an error subscribing to this feed\"},onInit:function(){this.feedUrlInput=new Element(\"textarea\",{\"maxlength\":200});this.feedUrlInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.feedUrlLabel}),new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.feedUrlInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Subscribe\",className:\"dark\",action:\"check\"});$(this.actionButton).addEvent(\"click\",this.feedSubscribe.bind(this));this.message=new Element(\"div\",{\"class\":\"message success\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.feedUrlInput.value.trim()!=\"\"){this.feedSubscribe();}}},feedSubscribe:function(){var url=this.feedUrlInput.value.trim();var params={feed_url:url};this.call(\"rss\",\"rss_subscriptions_add\",params,this.feedSubscribeSuccess.bind(this),this.feedSubscribeFail.bind(this));this.actionButton.showProgress();this.message.set(\"text\",\"please wait...\");},feedSubscribeSuccess:function(){this.actionButton.hideProgress();this.closeContent();},feedSubscribeFail:function(status){this.actionButton.hideProgress();var name=\"feed_subscribe\";var title=\"Error Subscribing to Feed\";var message=status.message;this.message.empty();this.fireEvent(\"showAlert\",name,title,message);},onShow:function(){this.focus();},focus:function(){this.feedUrlInput.focus.delay(500,this.feedUrlInput);}});var RssItemUtility={createRssFeedItem:function(item){return RssItemUtility.createRssItem(item,false);},createRssAllItem:function(item){return RssItemUtility.createRssItem(item,true);},createRssItem:function(item,showFeed){var el=ItemUtility.createPostBubble(\"post haspic\");ItemUtility.createItemPic(\"/images/v5/apps/rss/feed_icon.png\").inject(el);var content=new Element(\"div\",{\"class\":\"post_content\"}).inject(el);RssItemUtility.createRssItemHeader(item,showFeed).inject(content);RssItemUtility.createRssItemFooter(item,showFeed).inject(content);return el;},createRssItemHeader:function(item,showFeed){var el=new Element(\"div\",{\"class\":\"header\"});new Element(\"span\",{}).adopt(new Element(\"a\",{\"href\":item.link,\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(item.title),\"target\":\"_blank\"})).inject(el);if($defined(item.summary)&&item.summary!=\"\"){new Element(\"span\",{\"html\":\" \"+TextUtility.replaceUrls(TextUtility.stripHtml(TextUtility.unescape(item.summary)))}).inject(el);}return el;},createRssItemFooter:function(item){var el=new Element(\"div\",{\"class\":\"footer\"});if(!$defined(item.date_created)){return el;}var date=DateUtility.convertFromTimestamp(item.date_created);var ts=new Element(\"span\",{\"class\":\"timestamp\",\"text\":DateUtility.getTimestamp(date,\"%B %D at %I:%M%p\"),\"ts\":date,\"ts_format\":\"%B %D at %I:%M%p\"}).inject(el);return el;}};var Twitter=new Class({Extends:App,EventHandlers:[\"userSwitched\",\"twitterInstall\",\"twitterUninstall\",\"showTwitterUser\",\"twitterShowFollowing\",\"twitterShowFollowers\",\"showTwitterList\",\"twitterListSubscribed\",\"twitterListUnsubscribed\",\"twitterListsLoaded\",\"showTwitterSearchPopup\",\"twitterSearch\",\"twitterRetweet\",\"twitterDelete\",\"twitterSavedSearchesLoaded\",\"twitterSavedSearchAdd\",\"twitterSavedSearchDelete\"],parseOptions:function(options){this.settings=options.settings;},onStart:function(){this.setupNav();},onStop:function(){},userSwitched:function(){if(!this.isLoggedIn()){this.userLoggedOut();}},userLoggedOut:function(){this.stop();},twitterInstall:function(){this.installPopup=new Popup({size:{x:350,y:80},resizable:false,dockable:false,className:\"appInstall\",onClose:this.destroyTwitterInstallPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"twitter\"},displayName:\"Install Twitter\",closable:true});var content=new TwitterInstallPopupContent({});this.installPopup.addContent(\"install\",nav,content);},destroyTwitterInstallPopup:function(){this.installPopup=null;},twitterUninstall:function(){this.call(\"twitter\",\"twitter_uninstall\",null,this.twitterUninstallSuccess.bind(this));},twitterUninstallSuccess:function(){this.stop();},twitterRetweet:function(id){var name=\"twitterRetweet_\"+id;var title=\"Retweet an Update\";var message=\"Retweet this update?\";var func=this.twitterRetweetCall.bind(this,[id]);this.fireEvent(\"showConfirmation\",name,title,message,func);},twitterRetweetCall:function(id){this.call(\"twitter\",\"twitter_retweet\",{id:id},this.twitterRetweetSuccess.bind(this));},twitterRetweetSuccess:function(data){},twitterDelete:function(id){var name=\"twitterDelete_\"+id;var title=\"Delete Update\";var message=\"Delete this update?\";var func=this.twitterDeleteCall.bind(this,[id]);this.fireEvent(\"showConfirmation\",name,title,message,func);},twitterDeleteCall:function(id){this.call(\"twitter\",\"twitter_item_delete\",{id:id},this.twitterDeleteSuccess.bind(this));},twitterDeleteSuccess:function(data){if(!$defined(data.id)){return;}TwitterItemUtility.deleteTwitterItem(data.id);}});Twitter.implement({requests:[{name:\"twitter_auth_request\",url:\"/api/app/twitter/auth/request\"},{name:\"twitter_install\",params:[\"sync_posts\"],url:\"/api/app/twitter/install\"},{name:\"twitter_uninstall\",url:\"/api/app/twitter/uninstall\"},{name:\"twitter_user_show\",params:[\"screen_name\"],url:\"/api/app/twitter/user/show\"},{name:\"twitter_list_show\",params:[\"screen_name\",\"slug\"],url:\"/api/app/twitter/list/show\"},{name:\"twitter_self_show\",params:[\"screen_name\"],url:\"/api/app/twitter/self/show\"},{name:\"twitter_home_timeline\",params:[\"since_id\",\"max_id\"],url:\"/api/app/twitter/home/timeline\"},{name:\"twitter_user_timeline\",params:[\"username\",\"since_id\",\"max_id\"],url:\"/api/app/twitter/user/timeline\"},{name:\"twitter_lists_timeline\",params:[\"screen_name\",\"list_id\",\"since_id\",\"max_id\"],url:\"/api/app/twitter/lists/timeline\"},{name:\"twitter_mentions\",params:[\"since_id\",\"max_id\",\"count\",\"page\"],url:\"/api/app/twitter/mentions\"},{name:\"twitter_settings_update\",params:[\"key\",\"value\"],url:\"/api/app/twitter/settings/update\"},{name:\"twitter_follow\",params:[\"screen_name\"],url:\"/api/app/twitter/follow\"},{name:\"twitter_unfollow\",params:[\"screen_name\"],url:\"/api/app/twitter/unfollow\"},{name:\"twitter_settings_set\",params:[\"key\",\"value\"],url:\"/api/app/twitter/settings/update\"},{name:\"twitter_friends\",params:[\"username\",\"page\"],url:\"/api/app/twitter/friends\"},{name:\"twitter_followers\",params:[\"username\",\"page\"],url:\"/api/app/twitter/followers\"},{name:\"twitter_block\",params:[\"screen_name\"],url:\"/api/app/twitter/block\"},{name:\"twitter_post_text\",params:[\"body\",\"post_id\"],url:\"/api/app/twitter/text/item_create\"},{name:\"twitter_search\",params:[\"q\",\"page\"],url:\"/api/app/twitter/search\"},{name:\"twitter_searches_create\",params:[\"query\"],url:\"/api/app/twitter/searches/create\"},{name:\"twitter_searches_delete\",params:[\"id\"],url:\"/api/app/twitter/searches/delete\"},{name:\"twitter_retweet\",params:[\"id\"],url:\"/api/app/twitter/retweet\"},{name:\"twitter_item_delete\",params:[\"id\"],url:\"/api/app/twitter/item/delete\"},{name:\"twitter_dm_inbox\",url:\"/api/app/twitter/dm/inbox\"},{name:\"twitter_dm_all\",url:\"/api/app/twitter/dm/all\"},{name:\"twitter_dm_delete\",params:[\"id\"],url:\"/api/app/twitter/dm/delete\"},{name:\"twitter_dm_send\",params:[\"recipient\",\"message\"],url:\"/api/app/twitter/dm/send\"},{name:\"twitter_searches_saved\",url:\"/api/app/twitter/searches/saved\"},{name:\"twitter_trends\",url:\"/api/app/twitter/trends\"},{name:\"twitter_favorites\",url:\"/api/app/twitter/favorites\"},{name:\"twitter_favorites_create\",params:[\"id\",\"element_id\"],url:\"/api/app/twitter/favorites/create\"},{name:\"twitter_favorites_delete\",params:[\"id\",\"element_id\"],url:\"/api/app/twitter/favorites/delete\"},{name:\"twitter_lists\",params:[\"screen_name\"],url:\"/api/app/twitter/lists\"},{name:\"twitter_lists_members\",url:\"/api/app/twitter/lists/members\"},{name:\"twitter_lists_create\",params:[\"name\",\"mode\",\"description\"],url:\"/api/app/twitter/lists/create\"},{name:\"twitter_lists_delete\",params:[\"list_id\"],url:\"/api/app/twitter/lists/delete\"},{name:\"twitter_lists_statuses\",params:[\"screen_name\",\"list_id\",\"cursor\",\"page\"],url:\"/api/app/twitter/lists/statuses\"},{name:\"twitter_lists_add_user\",params:[\"list_id\",\"id\"],url:\"/api/app/twitter/lists/add_user\"},{name:\"twitter_lists_get_users\",params:[\"screen_name\",\"list_id\"],url:\"/api/app/twitter/lists/get_users\"},{name:\"twitter_lists_delete_user\",params:[\"list_id\",\"id\"],url:\"/api/app/twitter/lists/delete_user\"},{name:\"twitter_lists_subscribe\",params:[\"screen_name\",\"list_id\"],url:\"/api/app/twitter/lists/subscribe\"},{name:\"twitter_lists_subscribers\",params:[\"screen_name\",\"list_id\"],url:\"/api/app/twitter/lists/subscribers\"},{name:\"twitter_lists_unsubscribe\",params:[\"screen_name\",\"list_id\"],url:\"/api/app/twitter/lists/unsubscribe\"},{name:\"twitter_lists_subscriptions\",params:[\"screen_name\"],url:\"/api/app/twitter/lists/subscriptions\"},{name:\"twitter_lists_memberships\",params:[\"screen_name\"],url:\"/api/app/twitter/lists/memberships\"},{name:\"twitter_post_link\",params:[\"body\",\"url\",\"post_id\"],url:\"/api/app/twitter/link/item_create\"},{name:\"twitter_post_photo\",params:[\"body\",\"photo\",\"post_id\"],url:\"/api/app/twitter/photo/item_create\",multipart:true},]});Twitter.implement({twitterSavedSearchesLoaded:function(searches){this.saved_searches=$H();searches.each(function(search){this.saved_searches.set(search.id,search);},this);},twitterSavedSearchAdd:function(search){this.saved_searches.set(search.id,search);},twitterSavedSearchDelete:function(id){this.saved_searches.erase(id);},twitterSearch:function(query,search_id){if(!$defined(search_id)){search_id=0;}var search={query:query,id:search_id};if(this.searches.has(query)){this.fireEvent(\"viewSwitch\",this.appId,\"search_\"+query,\"search_\"+query);return;}this.searchAdd(search);},searchAdd:function(search){if(!$defined(this.searchNav)){this.searchNav=new Nav({iconOptions:{iconName:\"search\"},hasSubnavs:true,displayName:\"Searches\",name:\"searches\"});this.navAdd(this.searchNav);}var nav=new Nav({displayName:search.query,closable:true,name:\"search_\"+search.query,parentName:\"searches\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"search_\"+search.query,\"search_\"+search.query])});this.navAdd(nav);this.searches.set(search.query,search);var content=new TwitterSearchContent({search:search,navId:nav.navId});this.contentAdd(\"search_\"+search.query,content);var menu=new TwitterSearchMenu({search:search,searches:this.saved_searches,closable:true,closeFunc:this.searchClose.bind(this,search)});this.menuAdd(\"search_\"+search.query,menu);this.fireEvent(\"viewSwitch\",this.appId,\"search_\"+search.query,\"search_\"+search.query);},searchClose:function(search){Logger().log(\"attempting to close \"+search.query);if(!this.searches.has(search.query)){return;}this.navDelete(\"search_\"+search.query);this.menuClose(\"search_\"+search.query);this.contentClose(\"search_\"+search.query);this.searches.erase(search.query);if(this.searches.getLength()==0){this.navDelete(\"searches\");this.searchNav=null;}}});Twitter.implement({setupNav:function(){this.searches=$H();this.users=$H();this.lists=$H();this.listSubs=$H();var homeNav=new Nav({iconOptions:{iconName:\"updates\"},displayName:\"Home\",name:\"updates\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"updates\",\"self_menu\"])});this.navAdd(homeNav);var mentionsNav=new Nav({iconOptions:{iconName:\"at\"},displayName:this.settings.screen_name,name:\"mentions\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"mentions\",\"self_menu\"])});this.navAdd(mentionsNav);var selfMenu=new TwitterSelfMenu({settings:this.settings,isDefault:true,closeFunc:this.stop.bind(this)});this.menuAdd(\"self_menu\",selfMenu);var content=new TwitterHomeContent({settings:this.settings,isDefault:true,navId:homeNav.navId});this.contentAdd(\"updates\",content);var mentionsContent=new TwitterMentionsContent({settings:this.settings,navId:mentionsNav.navId});this.contentAdd(\"mentions\",mentionsContent);},showTwitterUser:function(screen_name){if(this.users.has(screen_name)){this.fireEvent(\"viewSwitch\",this.appId,screen_name,screen_name);}else{this.call(\"twitter\",\"twitter_user_show\",{screen_name:screen_name},this.userLoaded.bind(this),null);return;}},showTwitterList:function(list_id){if(this.lists.has(list_id)){this.fireEvent(\"viewSwitch\",this.appId,list_id,list_id);}else{var parts=list_id.split(\"/\");this.call(\"twitter\",\"twitter_list_show\",{screen_name:parts[0],slug:parts[1]},this.listLoaded.bind(this),null);return;}},listLoaded:function(data){if(!$defined(data.list)){return;}data.list.following=false;this.listAdd(data.list);},userLoaded:function(data){this.userAdd(data);},twitterListSubscribed:function(list){list.following=true;if(list.following){if(!$defined(this.listsNav)){this.listsNav=new Nav({iconOptions:{iconName:\"contacts\"},hasSubnavs:true,displayName:\"Lists\",name:\"lists\"});this.navAdd(this.listsNav);}var nav=new Nav({iconOptions:{iconName:list.user.profile_image_url},displayName:list.user.screen_name+\"/\"+list.slug,closable:true,name:list.id,parentName:\"lists\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,list.id,list.id]),onClose:this.listClose.bind(this,[list.id])});this.navAdd(nav);this.lists.set(list.id,nav);this.listSubs.set(list.id,list);}},twitterListUnsubscribed:function(list){if(this.listSubs.has(list.id)){this.lists.get(list.id).destroy();this.navDelete(list.id);this.lists.erase(list.id);this.listSubs.erase(list.id);}},twitterListsLoaded:function(data){data.lists.lists.each(function(list){list.following=true;this.listAdd(list);},this);data.list_subscriptions.lists.each(function(list){list.following=true;this.listAdd(list);},this);},userClose:function(screen_name){if(!this.users.has(screen_name)){return;}this.users.get(screen_name).destroy();this.navDelete(screen_name);this.users.erase(screen_name);this.menuClose(screen_name);this.contentClose(screen_name);if(this.users.getLength()==0){this.navDelete(\"users\");this.usersNav=null;}},userAdd:function(user){if(!$defined(this.usersNav)){this.usersNav=new Nav({iconOptions:{iconName:\"users\"},hasSubnavs:true,displayName:\"Users\",name:\"users\"});this.navAdd(this.usersNav);}var nav=new Nav({iconOptions:{iconName:user.profile_image_url},displayName:user.screen_name,closable:true,name:user.screen_name,parentName:\"users\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,user.screen_name,user.screen_name]),onClose:this.userClose.bind(this,[user.screen_name])});this.navAdd(nav);this.users.set(user.screen_name,nav);var content=new TwitterUserContent({screen_name:user.screen_name,navId:nav.navId});this.contentAdd(user.screen_name,content);var menu=new TwitterUserMenu({user:user,closable:true,closeFunc:this.userClose.bind(this,user.screen_name)});this.menuAdd(user.screen_name,menu);this.fireEvent(\"viewSwitch\",this.appId,user.screen_name,user.screen_name);},twitterShowFollowing:function(screen_name){var content=new TwitterFollowingContent({screen_name:screen_name});this.contentAdd(screen_name+\"_following\",content);if(screen_name==this.settings.screen_name){this.fireEvent(\"viewSwitch\",this.appId,screen_name+\"_following\",\"self_menu\");}else{this.fireEvent(\"viewSwitch\",this.appId,screen_name+\"_following\",screen_name);}},twitterShowFollowers:function(screen_name){var content=new TwitterFollowersContent({screen_name:screen_name});this.contentAdd(screen_name+\"_followers\",content);if(screen_name==this.settings.screen_name){this.fireEvent(\"viewSwitch\",this.appId,screen_name+\"_followers\",\"self_menu\");}else{this.fireEvent(\"viewSwitch\",this.appId,screen_name+\"_followers\",screen_name);}},listAdd:function(list){if(list.following){if(!$defined(this.listsNav)){this.listsNav=new Nav({iconOptions:{iconName:\"contacts\"},hasSubnavs:true,displayName:\"Lists\",name:\"lists\"});this.navAdd(this.listsNav);}var nav=new Nav({iconOptions:{iconName:list.user.profile_image_url},displayName:list.user.screen_name+\"/\"+list.slug,closable:true,name:list.id,parentName:\"lists\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,list.id,list.id]),onClose:this.listClose.bind(this,[list.id])});this.navAdd(nav);this.lists.set(list.id,nav);this.listSubs.set(list.id,list);}var content=new TwitterListContent({list:list,navId:nav.navId});this.contentAdd(list.id,content);var menu=new TwitterListMenu({list:list,closable:true,closeFunc:this.listClose.bind(this,list.id)});this.menuAdd(list.id,menu);if(!list.following){this.fireEvent(\"viewSwitch\",this.appId,list.id,list.id);}},listClose:function(list_id){if(!this.listSubs.has(list_id)){this.menuClose(list_id);this.contentClose(list_id);}else{this.switchDefault();}},showTwitterSearchPopup:function(){if($defined(this.twitterSearchPopup)){this.twitterSearchPopup.close();}this.createTwitterSearchPopup();},createTwitterSearchPopup:function(){this.twitterSearchPopup=new Popup({size:{x:350,y:74},resizable:false,dockable:false,className:\"twitterSearch\",onClose:this.destroyTwitterSearchPopup.bind(this)});var nav=new Nav({iconOptions:{iconName:\"twitter\"},displayName:\"Search Twitter\",closable:true});var content=new TwitterSearchPopupContent({});this.twitterSearchPopup.addContent(\"twitter_search\",nav,content);},destroyTwitterSearchPopup:function(){this.twitterSearchPopup=null;}});var TwitterFollowersContent=new Class({Extends:Content,EventHandlers:[\"twitterFollow\",\"twitterUnfollow\",\"twitterBlock\"],onBeforeInit:function(options){this.screen_name=options.screen_name;},onInit:function(){this.loader=new ItemLoader({idField:\"id\",sortField:\"name\",createElementFunc:TwitterFollowsItemUtility.createTwitterFollowItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":this.screen_name+\" has no followers\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":this.screen_name+\"'s followers loading...\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){var params={\"username\":this.screen_name,\"page\":-1};this.call(\"twitter\",\"twitter_followers\",params,this.twitterFollowersSuccess.bind(this),null);this.loader.showLoading();}},onHide:function(){},twitterFollowersSuccess:function(data){this.loader.hideLoading();if(!$defined(data.users)||data.users.length==0){return;}this.nextCursor=data.next_cursor;data.users.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},bottomFunc:function(){var params={\"username\":this.screen_name,\"page\":this.nextCursor};this.call(\"twitter\",\"twitter_followers\",params,this.twitterFollowersSuccess.bind(this),null);},twitterFollow:function(screen_name){var params={screen_name:screen_name};this.call(\"twitter\",\"twitter_follow\",params,this.twitterFollowSuccess.bind(this),null);},twitterFollowSuccess:function(data){if(!$defined(data)){return;}},twitterUnfollow:function(screen_name){var params={screen_name:screen_name};this.call(\"twitter\",\"twitter_unfollow\",params,this.twitterUnfollowSuccess.bind(this),null);},twitterUnfollowSuccess:function(data){if(!$defined(data)){return;}this.loader.remove(data.id);},twitterBlock:function(screen_name){var answer=confirm(\"Blocking will prevent this user from following you. And you won't see their tweets in your timeline. Are you sure you want to block?\");if(!answer){return;}var params={screen_name:screen_name};this.call(\"twitter\",\"twitter_block\",params,this.twitterBlockSuccess.bind(this),null);},twitterBlockSuccess:function(data){if(!$defined(data)){return;}this.loader.remove(data.id);}});var TwitterFollowingContent=new Class({Extends:Content,EventHandlers:[\"twitterFollow\",\"twitterUnfollow\",\"twitterBlock\"],onBeforeInit:function(options){this.screen_name=options.screen_name;},onInit:function(){this.loader=new ItemLoader({idField:\"id\",sortField:\"name\",createElementFunc:TwitterFollowsItemUtility.createTwitterFollowItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":this.screen_name+\" has no friends\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":this.screen_name+\"'s friends loading...\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){var params={\"username\":this.screen_name,\"page\":-1};this.call(\"twitter\",\"twitter_friends\",params,this.twitterFollowingSuccess.bind(this),null);this.loader.showLoading();}},onHide:function(){},twitterFollowingSuccess:function(data){this.loader.hideLoading();if(!$defined(data.users)||data.users.length==0){return;}this.nextCursor=data.next_cursor;data.users.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},bottomFunc:function(){var params={\"username\":this.screen_name,\"page\":this.nextCursor};this.call(\"twitter\",\"twitter_friends\",params,this.twitterFollowingSuccess.bind(this),null);},twitterUnfollow:function(screen_name){var params={screen_name:screen_name};this.call(\"twitter\",\"twitter_unfollow\",params,this.twitterUnfollowSuccess.bind(this),null);},twitterUnfollowSuccess:function(data){if(!$defined(data)){return;}this.loader.remove(data.id);},twitterBlock:function(screen_name){var answer=confirm(\"Blocking will prevent this user from following you. And you won't see their tweets in your timeline. Are you sure you want to block?\");if(!answer){return;}var params={screen_name:screen_name};this.call(\"twitter\",\"twitter_block\",params,this.twitterBlockSuccess.bind(this),null);},twitterBlockSuccess:function(data){if(!$defined(data)){return;}this.loader.remove(data.id);}});var TwitterHomeContent=new Class({Extends:Content,EventHandlers:[\"twitterUserLoaded\",\"twitterHomeReload\"],onBeforeInit:function(options){this.settings=options.settings;this.navId=options.navId;this.sessionTimestamp=(new Date().getTime())/1000;this.screen_name=options.settings.screen_name;return options;},onInit:function(){this.slowTimerDuration=60*1000*3;this.fastTimerDuration=60*1000*1;this.loader=new StreamLoader({idField:\"id\",dateField:\"created_at\",createElementFunc:TwitterItemUtility.createTwitterItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"You have no updates\"}),alertFunc:this.alertCheck.bind(this)});$(this.loader).inject(this.content);},alertCheck:function(item){var ts=Date.parse(item.created_at)/1000;if(ts>this.sessionTimestamp){this.fireEvent(\"alertAdd\",this.navId);}},onShow:function(first){if(first){this.loadMore();}this.updatePoll();},onHide:function(){this.updatePoll();},onDestroy:function(){$clear(this.pollTimer);},twitterHomeReload:function(){this.loadNew();},twitterUserLoaded:function(user){if($defined(this.statusBox)){return;}this.statusBox=new TwitterStatusBox(user,true);$(this.statusBox).inject(this.content,\"top\");},updatePoll:function(){if($defined(this.pollTimer)){$clear(this.pollTimer);}if(this.isOn){this.pollTimer=this.loadNew.periodical(this.fastTimerDuration,this);Logger().log(\"home on fast timer\");}else{this.pollTimer=this.loadNew.periodical(this.slowTimerDuration,this);Logger().log(\"home on slow timer\");}},loadNew:function(){var params={since_id:this.loader.newestId};this.call(\"twitter\",\"twitter_home_timeline\",params,this.loadNewSuccess.bind(this),this.loadMoreFail.bind(this));},loadMore:function(){var params={since_id:\"\"};if(this.loader.oldestId!=0){params.max_id=this.loader.oldestId;}this.call(\"twitter\",\"twitter_home_timeline\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));},loadNewSuccess:function(data){if(!$defined(data.items)||data.items.length==0){return;}data.items.each(function(item){this.loader.process(item);},this);},loadMoreSuccess:function(data){if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.reverse().each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},loadMoreFail:function(status){},bottomFunc:function(){this.loadMore();}});var TwitterListContent=new Class({Extends:Content,EventHandlers:[],onBeforeInit:function(options){this.list=options.list;this.navId=options.navId;this.sessionTimestamp=(new Date().getTime())/1000;return options;},onInit:function(){this.slowTimerDuration=60*1000*5;this.fastTimerDuration=60*1000*2;this.loader=new StreamLoader({idField:\"id\",dateField:\"created_at\",createElementFunc:TwitterItemUtility.createTwitterItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"This list has no updates\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Updates loading...\"}),alertFunc:this.alertCheck.bind(this)});$(this.loader).inject(this.content);},alertCheck:function(item){var ts=Date.parse(item.created_at)/1000;if(ts>this.sessionTimestamp){this.fireEvent(\"alertAdd\",this.navId);}},onShow:function(first){if(first){this.loadMore();}this.updatePoll();},onHide:function(){this.updatePoll();},onDestroy:function(){$clear(this.pollTimer);},updatePoll:function(){if($defined(this.pollTimer)){$clear(this.pollTimer);}if(this.isOn){this.pollTimer=this.loadNew.periodical(this.fastTimerDuration,this);}else{this.pollTimer=this.loadNew.periodical(this.slowTimerDuration,this);}},loadNew:function(){var params={screen_name:this.list.user.screen_name,list_id:this.list.id,since_id:this.loader.newestId};this.call(\"twitter\",\"twitter_lists_timeline\",params,this.loadNewSuccess.bind(this),this.loadMoreFail.bind(this));},loadMore:function(){var params={screen_name:this.list.user.screen_name,list_id:this.list.id,since_id:\"\"};if(this.loader.oldestId!=0){params.max_id=this.loader.oldestId;}this.call(\"twitter\",\"twitter_lists_timeline\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));this.loader.showLoading();},loadNewSuccess:function(data){if(!$defined(data.items)||data.items.length==0){return;}data.items.reverse().each(function(item){this.loader.process(item);},this);},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},loadMoreFail:function(status){this.loader.hideLoading();},bottomFunc:function(){this.loadMore();}});var TwitterMentionsContent=new Class({Extends:Content,EventHandlers:[],onBeforeInit:function(options){this.settings=options.settings;this.navId=options.navId;this.screen_name=options.screen_name;this.sessionTimestamp=(new Date().getTime())/1000;return options;},onInit:function(){this.slowTimerDuration=60*1000*5;this.fastTimerDuration=60*1000*2;this.loader=new StreamLoader({idField:\"id\",dateField:\"created_at\",createElementFunc:TwitterItemUtility.createTwitterItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"You have no mentions\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Mentions loading...\"}),alertFunc:this.alertCheck.bind(this)});$(this.loader).inject(this.content);},alertCheck:function(item){var ts=Date.parse(item.created_at)/1000;if(ts>this.sessionTimestamp){this.fireEvent(\"alertAdd\",this.navId);}},onShow:function(first){if(first){this.loadMore();}this.updatePoll();},onHide:function(){this.updatePoll();},onDestroy:function(){$clear(this.pollTimer);},updatePoll:function(){if($defined(this.pollTimer)){$clear(this.pollTimer);}if(this.isOn){this.pollTimer=this.loadNew.periodical(this.fastTimerDuration,this);}else{this.pollTimer=this.loadNew.periodical(this.slowTimerDuration,this);}},loadNew:function(){var params={since_id:this.loader.newestId};this.call(\"twitter\",\"twitter_mentions\",params,this.loadNewSuccess.bind(this),this.loadMoreFail.bind(this));},loadMore:function(){var params={since_id:\"\"};if(this.loader.oldestId!=0){params.max_id=this.loader.oldestId;}this.call(\"twitter\",\"twitter_mentions\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));this.loader.showLoading();},loadNewSuccess:function(data){if(!$defined(data.items)||data.items.length==0){return;}data.items.each(function(item){this.loader.process(item);},this);},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.reverse().each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},loadMoreFail:function(status){this.loader.hideLoading();},bottomFunc:function(){this.loadMore();}});var TwitterSearchContent=new Class({Extends:Content,EventHandlers:[],onBeforeInit:function(options){this.search=options.search;this.navId=options.navId;this.sessionTimestamp=(new Date().getTime())/1000;return options;},onInit:function(){this.slowTimerDuration=60*1000*2;this.fastTimerDuration=30*1000;this.loader=new StreamLoader({idField:\"id\",dateField:\"created_at\",createElementFunc:TwitterItemUtility.createTwitterSearchItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"No search results\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"Search results loading...\"}),alertFunc:this.alertCheck.bind(this)});$(this.loader).inject(this.content);this.page=1;},alertCheck:function(item){var ts=Date.parse(item.created_at)/1000;if(ts>this.sessionTimestamp){this.fireEvent(\"alertAdd\",this.navId);}},onShow:function(first){if(first){this.loadMore();}this.updatePoll();},onHide:function(){this.updatePoll();},onDestroy:function(){$clear(this.pollTimer);},updatePoll:function(){if($defined(this.pollTimer)){$clear(this.pollTimer);}if(this.isOn){this.pollTimer=this.loadNew.periodical(this.fastTimerDuration,this);}else{this.pollTimer=this.loadNew.periodical(this.slowTimerDuration,this);}},loadNew:function(){var params={since_id:this.loader.newestId,q:this.search.query};this.call(\"twitter\",\"twitter_search\",params,this.loadNewSuccess.bind(this),this.loadMoreFail.bind(this));},loadMore:function(){var params={since_id:\"\",q:this.search.query};if(this.loader.oldestId!=0){params.page=this.page++;}this.call(\"twitter\",\"twitter_search\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));this.loader.showLoading();},loadNewSuccess:function(data){if(!$defined(data.items)||data.items.length==0){return;}data.items.reverse().each(function(item){this.loader.process(item);},this);},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},loadMoreFail:function(status){this.loader.hideLoading();},bottomFunc:function(){this.loadMore();}});var TwitterUserContent=new Class({Extends:Content,EventHandlers:[\"twitterUserLoaded\"],onBeforeInit:function(options){this.navId=options.navId;this.screen_name=options.screen_name;this.sessionTimestamp=(new Date().getTime())/1000;},onInit:function(){this.slowTimerDuration=60*1000*5;this.fastTimerDuration=60*1000*2;this.loader=new StreamLoader({idField:\"id\",dateField:\"created_at\",createElementFunc:TwitterItemUtility.createTwitterItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":TextUtility.unescape(this.screen_name)+\" has no updates\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":TextUtility.unescape(this.screen_name)+\"'s updates loading...\"}),alertFunc:this.alertCheck.bind(this)});$(this.loader).inject(this.content);},alertCheck:function(item){var ts=Date.parse(item.created_at)/1000;if(ts>this.sessionTimestamp){this.fireEvent(\"alertAdd\",this.navId);}},onShow:function(first){if(first){this.loadMore();}this.updatePoll();},onHide:function(){this.updatePoll();},onDestroy:function(){$clear(this.pollTimer);},twitterUserLoaded:function(user){if($defined(this.statusBox)){return;}this.statusBox=new TwitterStatusBox(user,false);$(this.statusBox).inject(this.content,\"top\");},updatePoll:function(){if($defined(this.pollTimer)){$clear(this.pollTimer);}if(this.isOn){this.pollTimer=this.loadNew.periodical(this.fastTimerDuration,this);}else{this.pollTimer=this.loadNew.periodical(this.slowTimerDuration,this);}},loadNew:function(){var params={username:this.screen_name,since_id:this.loader.newestId};this.call(\"twitter\",\"twitter_user_timeline\",params,this.loadNewSuccess.bind(this),this.loadMoreFail.bind(this));},loadMore:function(){var params={username:this.screen_name,since_id:\"\"};if(this.loader.oldestId!=0){params.max_id=this.loader.oldestId;}this.call(\"twitter\",\"twitter_user_timeline\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));this.loader.showLoading();},loadNewSuccess:function(data){if(!$defined(data.items)||data.items.length==0){return;}data.items.each(function(item){this.loader.process(item);},this);},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.reverse().each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},loadMoreFail:function(status){this.loader.hideLoading();},bottomFunc:function(){this.loadMore();}});var TwitterListMenu=new Class({Extends:Menu,EventHandlers:[],onBeforeInit:function(options){this.list=options.list;options.displayName=this.list.user.screen_name+\"/\"+this.list.slug;options.className=\"twitter\";return options;},onInit:function(){this.userShowSuccess(this.list.user);},userShowSuccess:function(data){if(!$defined(data)){return;}this.profile=new Element(\"div\",{\"class\":\"user_profile\"}).inject(this.menu);ItemUtility.createItemPic(data.profile_image_url).inject(this.profile);new Element(\"div\",{\"class\":\"screen_name text12 light\",\"text\":data.screen_name}).inject(this.profile);new Element(\"div\",{\"class\":\"tweets text11 light2\",\"text\":data.statuses_count+\" tweets\"}).inject(this.profile);new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Name: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(data.name)})).inject(this.menu);if($defined(data.location)&&data.location!=\"\"){new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Location: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(data.location)})).inject(this.menu);}if($defined(data.url)&&data.url!=\"\"){new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Web: \"}),new Element(\"a\",{\"target\":\"_blank\",\"href\":data.url,\"text\":data.url})).inject(this.menu);}if($defined(data.description)&&data.description!=\"\"){new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Bio: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(data.description)})).inject(this.menu);}new Element(\"div\",{\"class\":\"nav_seperator\"}).inject(this.menu);this.follow=new Toggle(this.list.following);$(this.follow).addEvent(\"click\",this.followToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Following list:\"}),$(this.follow)).inject(this.menu);},followToggle:function(){if(this.follow.isOn){this.call(\"twitter\",\"twitter_lists_subscribe\",{screen_name:this.list.user.screen_name,list_id:this.list.id},this.subscribeSuccess.bind(this));}else{this.call(\"twitter\",\"twitter_lists_unsubscribe\",{screen_name:this.list.user.screen_name,list_id:this.list.id},this.unsubscribeSuccess.bind(this));}},subscribeSuccess:function(data){if(!$defined(data.list)){return;}this.fireEvent(\"twitterListSubscribed\",this.list);},unsubscribeSuccess:function(data){if(!$defined(data.list)){return;}this.fireEvent(\"twitterListUnsubscribed\",this.list);}});var TwitterSearchMenu=new Class({Extends:Menu,EventHandlers:[\"twitterSavedSearchAdd\",\"twitterSavedSearchDelete\"],onBeforeInit:function(options){this.search=options.search;this.searches=options.searches;options.displayName=this.search.query;options.className=\"twitter\";return options;},onInit:function(){new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Query: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(this.search.query)})).inject(this.menu);new Element(\"div\",{\"class\":\"nav_seperator\"}).inject(this.menu);this.saved=new Toggle(this.search.id!=0);$(this.saved).addEvent(\"click\",this.saveToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Save Search:\"}),$(this.saved)).inject(this.menu);this.searchButton=new ButtonMedium({displayName:\"Search Twitter\",className:\"dark\",action:\"search\"});$(this.searchButton).addEvent(\"click\",this.fireEvent.bind(this,[\"showTwitterSearchPopup\"]));this.searchSection=new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.searchButton)).inject(this.menu);this.savedSearchesNav=new TwitterSavedSearchesNav({});$(this.savedSearchesNav).inject(this.menu);this.searches.each(function(search){this.twitterSavedSearchAdd(search);},this);},twitterSavedSearchAdd:function(search){this.savedSearchesNav.savedSearchAdd(search);},twitterSavedSearchDelete:function(id){this.savedSearchesNav.savedSearchDelete(id);},saveToggle:function(){if(this.saved.isOn){this.searchSave();}else{this.searchDelete();}},searchSave:function(){this.call(\"twitter\",\"twitter_searches_create\",{query:this.search.query},this.searchSaveSuccess.bind(this));},searchSaveSuccess:function(data){if(!$defined(data.id)){return;}var search={query:data.query,id:data.id};this.search.id=data.id;this.fireEvent(\"twitterSavedSearchAdd\",search);},searchDelete:function(){this.call(\"twitter\",\"twitter_searches_delete\",{id:this.search.id},this.searchDeleteSuccess.bind(this));},searchDeleteSuccess:function(data){if(!$defined(data.id)){return;}this.search.id=0;this.fireEvent(\"twitterSavedSearchDelete\",data.id);}});var TwitterSelfMenu=new Class({Extends:Menu,EventHandlers:[\"twitterSavedSearchAdd\",\"twitterSavedSearchDelete\"],onBeforeInit:function(options){this.settings=options.settings;this.screen_name=this.settings.screen_name;this.sync_posts=this.settings.sync_posts;options.displayName=this.settings.screen_name;options.className=\"twitter\";return options;},onInit:function(){this.call(\"twitter\",\"twitter_self_show\",{screen_name:this.settings.screen_name},this.userShowSuccess.bind(this),null);},userShowSuccess:function(data){if(!$defined(data.user)){return;}var user=data.user;this.profile=new Element(\"div\",{\"class\":\"user_profile\"}).inject(this.menu);ItemUtility.createItemPic(user.profile_image_url).inject(this.profile);new Element(\"div\",{\"class\":\"screen_name text12 light\",\"text\":user.screen_name}).inject(this.profile);new Element(\"div\",{\"class\":\"tweets text11 light2\",\"text\":user.statuses_count+\" tweets\"}).inject(this.profile);new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Name: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(user.name)})).inject(this.menu);if($defined(user.location)&&user.location!=\"\"){new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Location: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(user.location)})).inject(this.menu);}if($defined(user.url)&&user.url!=\"\"){new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Web: \"}),new Element(\"a\",{\"target\":\"_blank\",\"href\":user.url,\"text\":user.url})).inject(this.menu);}if($defined(user.description)&&user.description!=\"\"){new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Bio: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(user.description)})).inject(this.menu);}var followers=new Element(\"span\",{\"class\":\"clickable\",\"text\":user.followers_count});followers.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterShowFollowers\",user.screen_name]));new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Followers: \"}),followers).inject(this.menu);var following=new Element(\"span\",{\"class\":\"clickable\",\"text\":user.friends_count});following.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterShowFollowing\",user.screen_name]));new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Following: \"}),following).inject(this.menu);new Element(\"div\",{\"class\":\"nav_seperator\"}).inject(this.menu);this.syncPosts=new Toggle(this.sync_posts==1);$(this.syncPosts).addEvent(\"click\",this.syncToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Sync Posts:\"}),$(this.syncPosts)).inject(this.menu);this.searchButton=new ButtonMedium({displayName:\"Search Twitter\",className:\"dark\",action:\"search\"});$(this.searchButton).addEvent(\"click\",this.fireEvent.bind(this,[\"showTwitterSearchPopup\"]));this.searchSection=new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.searchButton)).inject(this.menu);this.savedSearchesNav=new TwitterSavedSearchesNav({});$(this.savedSearchesNav).inject(this.menu);this.fireEvent(\"twitterUserLoaded\",data.user);this.fireEvent(\"twitterListsLoaded\",data);this.fireEvent(\"twitterSavedSearchesLoaded\",data.saved_searches);data.saved_searches.each(function(search){this.twitterSavedSearchAdd(search);},this);},syncToggle:function(){var params={key:\"sync_posts\",value:this.syncPosts.toInt()};this.call(\"twitter\",\"twitter_settings_update\",params);},twitterSavedSearchAdd:function(search){this.savedSearchesNav.savedSearchAdd(search);},twitterSavedSearchDelete:function(id){this.savedSearchesNav.savedSearchDelete(id);}});var TwitterUserMenu=new Class({Extends:Menu,EventHandlers:[],onBeforeInit:function(options){this.user=options.user;options.displayName=this.user.screen_name;options.className=\"twitter\";return options;},onInit:function(){this.userShowSuccess(this.user);},userShowSuccess:function(data){if(!$defined(data)){return;}this.fireEvent(\"twitterUserLoaded\",data);this.profile=new Element(\"div\",{\"class\":\"user_profile\"}).inject(this.menu);ItemUtility.createItemPic(data.profile_image_url).inject(this.profile);new Element(\"div\",{\"class\":\"screen_name text12 light\",\"text\":data.screen_name}).inject(this.profile);new Element(\"div\",{\"class\":\"tweets text11 light2\",\"text\":data.statuses_count+\" tweets\"}).inject(this.profile);new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Name: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(data.name)})).inject(this.menu);if($defined(data.location)&&data.location!=\"\"){new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Location: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(data.location)})).inject(this.menu);}if($defined(data.url)&&data.url!=\"\"){new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Web: \"}),new Element(\"a\",{\"target\":\"_blank\",\"href\":data.url,\"text\":data.url})).inject(this.menu);}if($defined(data.description)&&data.description!=\"\"){new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Bio: \"}),new Element(\"span\",{\"text\":TextUtility.unescape(data.description)})).inject(this.menu);}var followers=new Element(\"span\",{\"class\":\"clickable\",\"text\":data.followers_count});followers.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterShowFollowers\",data.screen_name]));new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Followers: \"}),followers).inject(this.menu);var following=new Element(\"span\",{\"class\":\"clickable\",\"text\":data.friends_count});following.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterShowFollowing\",data.screen_name]));new Element(\"div\",{\"class\":\"text_section light1 text11\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Following: \"}),following).inject(this.menu);new Element(\"div\",{\"class\":\"nav_seperator\"}).inject(this.menu);this.follow=new Toggle(data.following);$(this.follow).addEvent(\"click\",this.followToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Following:\"}),$(this.follow)).inject(this.menu);},followToggle:function(){if(this.follow.isOn){this.call(\"twitter\",\"twitter_follow\",{screen_name:this.user.screen_name});}else{this.call(\"twitter\",\"twitter_unfollow\",{screen_name:this.user.screen_name});}}});var TwitterSavedSearchesNav=new Class({Extends:Nav,onBeforeInit:function(options){options.name=\"savedSearches\";options.hasSubnavs=true;options.iconOptions={iconName:\"search\"};options.displayName=\"Saved Searches\";return options;},onInit:function(){this.savedSearches=$H();this.updateNav();},savedSearchAdd:function(search){if(this.hasSubnav(search.query)){return;}var nav=new Nav({displayName:search.query,name:search.id,parentName:\"savedSearches\",onClick:this.fireEvent.bind(this,[\"twitterSearch\",search.query,search.id])});this.addSubnav(nav);this.savedSearches.set(search.id,search);this.updateNav();},savedSearchDelete:function(id){this.deleteSubnav(id);this.savedSearches.erase(id);this.updateNav();},updateNav:function(){if(this.savedSearches.getLength()==0){DomUtility.hide(this.navWrapper);}else{DomUtility.show(this.navWrapper);}}});var TwitterInstallPopupContent=new Class({Extends:PopupContent,EventHandlers:[\"twitterOauthAccess\"],strings:{postSyncLabel:\"Sync posts to Twitter:\",errorMessage:\"There was an error connecting to Twitter\"},onInit:function(){this.appId=5;this.syncPostsToggle=new Toggle(true);new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"label light\",\"text\":this.strings.postSyncLabel}),$(this.syncPostsToggle)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Install Twitter\",className:\"dark\",action:\"check\"});this.message=new Element(\"div\",{\"class\":\"message error\"});this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt(this.message,$(this.actionButton),$(this.closeButton)).inject(this.content);this.authRequest();},authRequest:function(){this.call(\"twitter\",\"twitter_auth_request\",null,this.authRequestSuccess.bind(this));},authRequestSuccess:function(data){if(!$defined(data.authorize_url)){return;}new Element(\"a\",{\"href\":data.authorize_url,\"target\":\"_blank\"}).wraps(this.actionButton);},twitterOauthAccess:function(data){if(data.oauth!=\"success\"){return;}var params={sync_posts:this.syncPostsToggle.toInt()};this.call(\"twitter\",\"twitter_install\",params,this.twitterInstallSuccess.bind(this));},twitterInstallSuccess:function(){this.closeContent();}});var TwitterRetweetPopupContent=new Class({Extends:PopupContent,strings:{},EventHandlers:[],onBeforeInit:function(options){this.post_id=options.post_id;return options;},onInit:function(){this.searchInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\"});this.searchInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));this.searchInputSection=new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.searchInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Search\",className:\"dark\",action:\"search\"});$(this.actionButton).addEvent(\"click\",this.search.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.searchInput.value.trim()!=\"\"){this.search();}}},search:function(){var query=this.searchInput.value.trim();if(query!=\"\"){this.fireEvent(\"twitterSearch\",query);}this.closeContent();},onShow:function(){this.focus();},focus:function(){this.searchInput.focus.delay(500,this.searchInput);}});var TwitterSearchPopupContent=new Class({Extends:PopupContent,strings:{},EventHandlers:[],onInit:function(){this.searchInput=new Element(\"input\",{\"type\":\"text\",\"maxlength\":\"50\"});this.searchInput.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));this.searchInputSection=new Element(\"div\",{\"class\":\"input_section\"}).adopt(new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.searchInput)).inject(this.content);this.closeButton=new ButtonMedium({displayName:\"Cancel\",className:\"dark\",action:\"cross\"});$(this.closeButton).addEvent(\"click\",this.closeContent.bind(this));this.actionButton=new ButtonMedium({displayName:\"Search\",className:\"dark\",action:\"search\"});$(this.actionButton).addEvent(\"click\",this.search.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.actionButton),$(this.closeButton)).inject(this.content);},inputKeyUp:function(e){if(e.key==\"enter\"){if(this.searchInput.value.trim()!=\"\"){this.search();}}},search:function(){var query=this.searchInput.value.trim();if(query!=\"\"){this.fireEvent(\"twitterSearch\",query);}this.closeContent();},onShow:function(){this.focus();},focus:function(){this.searchInput.focus.delay(500,this.searchInput);}});var TwitterShareBox=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"twitterShareBoxShow\"],init:function(){this.shareboxes=$H();},userSwitched:function(){if(!this.isLoggedIn()){this.userLoggedOut();}},userLoggedOut:function(){this.shareboxes.each(function(sharebox,key){sharebox.close();this.shareboxes.erase(key);},this);this.shareboxes=$H();},twitterShareBoxShow:function(user,isSelf,post_id){if($defined(this.sharebox)){this.sharebox.close();}this.createShareBox(user,isSelf,post_id);},createShareBox:function(user,isSelf,post_id){this.sharebox=new Popup({size:{x:500,y:100},resizable:false,dockable:false,className:\"facebook sharebox\",onClose:this.destroyShareBox.bind(this)});var displayName=(isSelf)?\"Tweet\":\"Mention \"+user.screen_name;if($defined(post_id)){displayName=\"Reply to \"+user.screen_name;}var nav=new Nav({iconOptions:{iconName:user.profile_image_url},displayName:displayName,closable:true});var content=new TwitterShareBoxPopupContent({user:user,is_self:isSelf,post_id:post_id});this.sharebox.addContent(\"sharebox\",nav,content);},destroyShareBox:function(name){this.sharebox=null;}});var TwitterShareBoxPopupContent=new Class({Extends:PopupContent,onBeforeInit:function(options){this.user=options.user;options.displayName=this.user.screen_name;this.post_id=($defined(options.post_id))?options.post_id:\"\";this.isSelf=options.is_self;return options;},reset:function(){Logger().log(\"resetting\");this.closeAttachmentPopup();this.content.empty();this.onInit();},onInit:function(){this.formEl=null;this.isPublic=true;this.readyToPost=false;if(this.isSelf){this.input=new Element(\"textarea\",{\"maxlength\":140});}else{this.input=new Element(\"textarea\",{\"maxlength\":140,\"value\":\"@\"+this.user.screen_name+\" \"});}this.input.addEvent(\"keyup\",this.inputKeyUp.bindWithEvent(this));new Element(\"div\",{\"class\":\"textarea_wrapper\"}).adopt(this.input).inject(this.content);this.cancelButton=new ButtonMedium({displayName:\"Close\",className:\"dark\",action:\"cross\"});$(this.cancelButton).addEvent(\"click\",this.closeContent.bind(this));this.updateButton=new ButtonMedium({displayName:\"Post\",className:\"dark\",action:\"check\"});$(this.updateButton).addEvent(\"click\",this.post.bind(this));this.actions=new Element(\"div\",{\"class\":\"actions\"}).adopt($(this.updateButton),$(this.cancelButton)).inject(this.content);this.focus();},inputKeyUp:function(e){if(e.shift&&e.key==\"enter\"){e.preventDefault();this.post();}if(DomUtility.textareaAutoSize(e.target,40)){this.updateSize();}},updateSize:function(){h+=this.input.getSize().y+10;h+=this.actions.getSize().y+30;this.resizePopup(500,h);},post:function(){var body=this.input.value.trim();if(body==\"\"&&this.attachment.type==AttachmentType.None){this.fireEvent(\"showAlert\",\"empty_post\",\"Problem Posting\",\"Please enter some content to post.\");return;}var params={\"body\":body,\"post_id\":this.post_id};this.call(\"twitter\",\"twitter_post_text\",params,this.postSuccess.bind(this),this.postFail.bind(this),this.formEl);this.updateButton.showProgress();},postSuccess:function(){this.updateButton.hideProgress();this.fireEvent(\"twitterHomeReload\");this.closeContent();},postFail:function(){this.updateButton.hideProgress();},onShow:function(){this.focus();},focus:function(){this.input.focus.delay(500,this.input);}});var TwitterStatusBox=new Class({Extends:Base,EventHandlers:[],init:function(user,isSelf){this.user=user;this.user.status.can_delete=1;this.isSelf=isSelf;this.defaultStatus=\"has no current status\";this.createStatusBox();},createStatusBox:function(){this.box=ItemUtility.createPostBubble(\"post status_message haspic\");ItemUtility.createItemPic(this.user.profile_image_url).inject(this.box);var buttonText=this.isSelf?\"Tweet\":\"Mention \"+this.user.screen_name;this.writeButton=new Element(\"div\",{\"class\":\"button\",\"text\":TextUtility.unescape(buttonText)}).inject(this.box);this.writeButton.addEvent(\"click\",this.fireEvent.bind(this,[\"twitterShareBoxShow\",this.user,this.isSelf]));this.content=new Element(\"div\",{\"class\":\"post_content\"}).inject(this.box);var header=new Element(\"div\",{\"class\":\"header\"}).inject(this.content);var creator=new Element(\"span\",{\"class\":\"user_name\",\"text\":TextUtility.unescapeQuotes(this.user.name)}).inject(header);this.status=new Element(\"span\",{\"class\":\"status\"}).inject(header);TwitterItemUtility.createTwitterItemFooter(this.user.status).inject(this.content);this.updateStatus();},updateStatus:function(){if($defined(this.user.status.text)&&this.user.status.text!=\"\"){this.status.removeClass(\"empty\");this.status.set(\"html\",\" \"+TwitterItemUtility.parseTwitterUsernames(TwitterItemUtility.parseTwitterLists(TextUtility.replaceUrls(TextUtility.convertNewLine(TextUtility.unescapeQuotes(this.user.status.text))))));}else{this.status.addClass(\"empty\");this.status.set(\"text\",\" \"+TextUtility.unescape(this.defaultStatus));}},toElement:function(){return this.box;}});var TwitterFollowsItemUtility={createTwitterFollowItem:function(user){var el=ItemUtility.createPostBubble(\"post contact\",true);new Element(\"img\",{\"class\":\"profile_pic_wrapper_60 afb_profile_pic\",\"src\":user.profile_image_url}).inject(el);var username=new Element(\"div\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescape(user.screen_name)});new Element(\"div\",{\"class\":\"heading\"}).adopt(username).inject(el);username.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showTwitterUser\",user.screen_name]));var viewButton=new ButtonMedium({displayName:\"View \"+user.screen_name,action:\"goto dark\"});$(viewButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showTwitterUser\",user.screen_name]));if(user.following){var unfollowButton=new ButtonMedium({displayName:\"Unfollow \"+user.screen_name,action:\"cross\"});$(unfollowButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterUnfollow\",user.screen_name]));}var blockButton=new ButtonMedium({displayName:\"Block \"+user.screen_name,action:\"goto dark\"});$(blockButton).addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterBlock\",user.screen_name]));var buttons=new Element(\"div\",{\"class\":\"actions\"}).adopt($(viewButton),$(blockButton)).inject(el);if($defined(unfollowButton)){buttons.adopt($(unfollowButton));}return el;}};var TwitterItemUtility={createTwitterSearchItem:function(item){var el=ItemUtility.createPostBubble(\"post haspic\");ItemUtility.createItemPic(item.profile_image_url).inject(el);var content=new Element(\"div\",{\"class\":\"post_content\"}).inject(el);TwitterItemUtility.createTwitterSearchItemHeader(item).inject(content);TwitterItemUtility.createTwitterSearchItemFooter(item).inject(content);TwitterItemUtility.createTwitterItemPostActions(item).inject(el);return el;},createTwitterSearchItemHeader:function(item){var el=new Element(\"div\",{\"class\":\"header\"});TwitterItemUtility.createSearchUsernameElement(item.from_user).inject(el);var body=new Element(\"span\",{\"html\":\" \"+TwitterItemUtility.parseTwitterUsernames(TwitterItemUtility.parseTwitterLists(TextUtility.replaceUrls(TextUtility.convertNewLine(TextUtility.unescapeQuotes(item.text)))))}).inject(el);return el;},createSearchUsernameElement:function(screen_name){var el=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescapeQuotes(screen_name)});el.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showTwitterUser\",screen_name]));return el;},createTwitterSearchItemFooter:function(item){var el=new Element(\"div\",{\"class\":\"footer\"});var date=DateUtility.convertFromTimestamp(Date.parse(item.created_at)/1000);var ts=new Element(\"span\",{\"class\":\"timestamp\",\"text\":DateUtility.getTimestamp(date,\"%B %D at %I:%M%p\"),\"ts\":date,\"ts_format\":\"%B %D at %I:%M%p\"}).inject(el);el.appendText(\" from \");new Element(\"span\",{\"html\":TwitterItemUtility.parseTwitterSource(TextUtility.unescapeHtml(item.source))}).inject(el);if($defined(item.to_user)){el.appendText(\" in reply to \");var userEl=new Element(\"span\",{\"text\":item.to_user});new Element(\"span\").adopt(userEl).inject(el);userEl.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showTwitterUser\",item.to_user]));}var reply=TwitterItemUtility.createFooterAction(\"reply\",\"Reply\",true).inject(el);var user={screen_name:item.from_user,profile_image_url:item.profile_image_url};reply.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterShareBoxShow\",user,false,item.id]));var retweet=TwitterItemUtility.createFooterAction(\"forward\",\"Retweet\",true).inject(el);retweet.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterRetweet\",item.id]));return el;},deleteTwitterItem:function(id){$$(\".twitter_item_\"+id).each(function(el){DomUtility.fadeOutDestroy(el);});},createTwitterItem:function(item){var el=ItemUtility.createPostBubble(\"post haspic twitter_item_\"+item.id);ItemUtility.createItemPic(item.user.profile_image_url).inject(el);var content=new Element(\"div\",{\"class\":\"post_content\"}).inject(el);TwitterItemUtility.createTwitterItemHeader(item).inject(content);TwitterItemUtility.createTwitterItemFooter(item).inject(content);TwitterItemUtility.createTwitterItemPostActions(item).inject(el);return el;},createTwitterItemPostActions:function(item){var el=new Element(\"div\",{\"class\":\"post_actions\"});if($defined(item.can_delete)&&item.can_delete==1){var deleteAction=new Element(\"div\",{\"class\":\"post_action delete\"}).inject(el);deleteAction.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterDelete\",item.id]));}return el;},createTwitterItemHeader:function(item){var el=new Element(\"div\",{\"class\":\"header\"});TwitterItemUtility.createUsernameElement(item.user).inject(el);var body=new Element(\"span\",{\"html\":\" \"+TwitterItemUtility.parseTwitterUsernames(TwitterItemUtility.parseTwitterLists(TextUtility.replaceUrls(TextUtility.convertNewLine(TextUtility.unescapeQuotes(item.text)))))}).inject(el);return el;},createUsernameElement:function(user){var el=new Element(\"span\",{\"class\":\"user_name clickable\",\"text\":TextUtility.unescapeQuotes(user.screen_name)});el.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"showTwitterUser\",user.screen_name]));return el;},createTwitterItemFooter:function(item){var el=new Element(\"div\",{\"class\":\"footer\"});var date=DateUtility.convertFromTimestamp(Date.parse(item.created_at)/1000);var ts=new Element(\"span\",{\"class\":\"timestamp\",\"text\":DateUtility.getTimestamp(date,\"%B %D at %I:%M%p\"),\"ts\":date,\"ts_format\":\"%B %D at %I:%M%p\"}).inject(el);el.appendText(\" from \");new Element(\"span\",{\"html\":TwitterItemUtility.parseTwitterSource(item.source)}).inject(el);if($defined(item.in_reply_to_status_id)){el.appendText(\" in reply to \");new Element(\"span\").adopt(new Element(\"a\",{\"target\":\"_blank\",\"href\":\"http://twitter.com/\"+item.in_reply_to_screen_name+\"/status/\"+item.in_reply_to_status_id,\"text\":item.in_reply_to_screen_name})).inject(el);}var is_self=$defined(item.can_delete)&&item.can_delete==1;if(!is_self){var reply=TwitterItemUtility.createFooterAction(\"reply\",\"Reply\",true).inject(el);reply.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterShareBoxShow\",item.user,is_self,item.id]));var retweet=TwitterItemUtility.createFooterAction(\"forward\",\"Retweet\",true).inject(el);retweet.addEvent(\"click\",pipio.dispatchEvent.bind(pipio,[\"twitterRetweet\",item.id]));}return el;},createFooterAction:function(actionName,actionText,hide){var el=new Element(\"span\",{\"class\":\"footer_action has_action\"}).adopt(new Element(\"div\",{\"class\":\"action \"+actionName}));el.appendText(actionText);if(hide){el.addClass(\"hide\");}return el;},parseTwitterLists:function(content){if(!$defined(content)){return\"\";}content=content.replace(/([^A-Za-z0-9'>\\/_-])@([A-Za-z0-9_-]+\\/[A-Za-z0-9_-]+)/gi,\"$1<a href=\\\"#\\\" onclick=\\\"pipio.dispatchEvent('showTwitterList', '$2');return false;\\\">@$2</a>\");content=content.replace(/^(@[A-Za-z0-9'>\\/_-]+\\/[A-Za-z0-9_-]+)\\s/gi,\"<a href=\\\"#\\\" onclick=\\\"pipio.dispatchEvent('showTwitterList', '$1');return false;\\\">@$1</a> \");return content;},parseTwitterUsernames:function(content){if(!$defined(content)){return\"\";}content=content.replace(/([^A-Za-z0-9'>\\/_-])@([A-Za-z0-9_-]+)/gi,\"$1<a href=\\\"#\\\" onclick=\\\"pipio.dispatchEvent('showTwitterUser', '$2');return false;\\\">@$2</a>\");content=content.replace(/^@([A-Za-z0-9'>\\/_-]+)\\s/gi,\"<a href=\\\"#\\\" onclick=\\\"pipio.dispatchEvent('showTwitterUser', '$1');return false;\\\">@$1</a> \");return content;},replaceTwitterHashes:function(content){if(!$defined(content)){return\"\";}content=content.replace(/([^A-Za-z0-9'>\\/_-])(#[A-Za-z0-9_-]+)/gi,\"$1<a href=\\\"#\\\" onclick=\\\"pipio.dispatchEvent('twitterSearchShow', '$2');\\\">$2</a>\");content=content.replace(/^(#[A-Za-z0-9'>\\/_-]+)\\s/gi,\"<a href=\\\"#\\\" onclick=\\\"pipio.dispatchEvent('twitterSearchShow', '$1');\\\">$1</a> \");return content;},parseTwitterSource:function(source){if(!$defined(source)){return\"\";}return source.replace(/<a href/g,'<a target=\"_blank\" href');},replaceTwitterSearchSource:function(source){if(!$defined(source)){return\"\";}source=DomUtility.unescapeHtml(source);return source.replace(/<a href/g,'<a target=\"_blank\" href');}};var User=new Class({Extends:AppInstance,EventHandlers:[\"userInfoLoaded\",\"userSwitched\"],parseOptions:function(options){this.user=options.user;this.displayName=this.user.fullname;this.appId=\"user_\"+this.user.username;this.iconOptions={user:this.user};},userSwitched:function(){this.stop();},onStart:function(){this.setupNav();},onStop:function(){}});User.implement({requests:[{name:\"info_load\",params:[\"username\"],url:\"api/user/info/load\"}]});User.implement({setupNav:function(){this.hasRooms=false;Logger().log(\"home setup\");this.navAdd(new Nav({iconOptions:{iconName:\"updates\"},displayName:\"Updates\",name:\"updates\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"updates\",\"user_menu\"])}));this.navAdd(new Nav({iconOptions:{iconName:\"star\"},displayName:\"Favorites\",name:\"likes\",onClick:this.fireEvent.bind(this,[\"viewSwitch\",this.appId,\"likes\",\"likes_menu\"])}));var userMenu=new UserMenu({user:this.user,isDefault:true,closeFunc:this.stop.bind(this)});this.menuAdd(\"user_menu\",userMenu);var content=new UserContent({isDefault:true,user:this.user});this.contentAdd(\"updates\",content);var likesMenu=new LikesMenu({user:this.user});this.menuAdd(\"likes_menu\",likesMenu);var likesContent=new LikesContent({user:this.user});this.contentAdd(\"likes\",likesContent);},roomAdd:function(room){if(!this.hasRooms){this.navAdd(new Nav({iconOptions:{iconName:\"rooms\"},hasSubnavs:true,displayName:\"Rooms\",name:\"rooms\"}));this.hasRooms=true;}var nav=new Nav({iconOptions:{iconName:\"rooms\"},displayName:room.room_name,name:\"room_\"+room.username,parentName:\"rooms\",onClick:this.fireEvent.bind(this,[\"showRoom\",room])});this.navAdd(nav);},userInfoLoaded:function(data){if(!$defined(data.user)||data.user.username!=this.user.username){return;}data.rooms.each(function(room){room=UserUtility.processRoom(room);this.roomAdd(room);},this);}});var UserConnectionMenuSection=new Class({Extends:Base,EventHandlers:[\"contactAdded\",\"contactDeleted\",\"contactRequestAdded\",\"contactRequestDeleted\",\"contactRequestOutAdded\",\"contactRequestOutDeleted\",\"streamSubscriptionAdded\",\"streamSubscriptionDeleted\"],init:function(options){this.user=options.user;this.subscribed=false;this.isSelf=this.user.user_id==this.getPrivateUser().user_id;this.createSection();},createSection:function(){this.wrapper=new Element(\"div\");this.generateSection();},contactAdded:function(user){if(this.user.username!=user.username){return;}this.generateSection();},contactDeleted:function(username){if(this.user.username!=username){return;}this.generateSection();},contactRequestAdded:function(user){if(this.user.username!=user.username){return;}this.generateSection();},contactRequestDeleted:function(username){if(this.user.username!=username){return;}this.generateSection();},contactRequestOutAdded:function(user){if(this.user.username!=user.username){return;}this.generateSection();},contactRequestOutDeleted:function(username){if(this.user.username!=username){return;}this.generateSection();},generateSection:function(){this.wrapper.empty();if(this.isSelf){new Element(\"div\",{\"class\":\"text_section light centered text11\",\"text\":\"This is you\"}).inject(this.wrapper);}else{this.generateSubscriptionSection();var connectionState=this.getConnectionState(this.user.username);switch(connectionState){case 0:this.createNotConnectedSection();break;case 1:this.createConnectedSection();break;case 2:this.createRequestSection();break;case 3:this.createRequestOutSection();break;}}},setSubscription:function(subscribed){this.subscribed=subscribed;this.generateSection();},generateSubscriptionSection:function(){this.subscription=new Toggle(this.subscribed);$(this.subscription).addEvent(\"click\",this.subscriptionToggle.bind(this));new Element(\"div\",{\"class\":\"toggle_section\"}).adopt(new Element(\"div\",{\"class\":\"text light\",\"text\":\"Subscribe:\"}),$(this.subscription)).inject(this.wrapper);},subscriptionToggle:function(){if(this.subscribed){this.streamUnsubscribe();}else{this.streamSubscribe();}},streamUnsubscribe:function(){this.subscription.off();this.fireEvent(\"userUnsubscribe\",this.user.username);},streamSubscribe:function(){this.subscription.on();this.call(\"contacts\",\"user_subscribe\",{username:this.user.username},null,this.streamSubscribeFail.bind(this));},streamSubscribeFail:function(status){if(status.code==2002){this.subscription.off();var name=\"subscription\";var title=\"Error\";var message=status.message;this.fireEvent(\"showAlert\",name,title,message);}},streamSubscriptionAdded:function(data){if(!$defined(data.user)||data.user.username!=this.user.username){return;}this.subscribed=true;this.generateSection();},streamSubscriptionDeleted:function(data){if(!$defined(data.username)||data.username!=this.user.username){return;}this.subscribed=false;this.generateSection();},createNotConnectedSection:function(){this.connectButton=new ButtonMedium({displayName:\"Add Contact\",className:\"dark\",action:\"check\"});$(this.connectButton).addEvent(\"click\",this.sendContactRequest.bind(this));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(this.connectButton)).inject(this.wrapper);},createConnectedSection:function(){new Element(\"div\",{\"class\":\"text_section light centered text11\",\"text\":TextUtility.unescape(this.user.first_name)+\" is your contact\"}).inject(this.wrapper);},createRequestOutSection:function(){new Element(\"div\",{\"class\":\"text_section light centered text11\",\"text\":\"Contact request pending\"}).inject(this.wrapper);},createRequestSection:function(){var button=new ButtonMedium({displayName:\"Accept Request\",className:\"dark\",action:\"check\"});$(button).addEvent(\"click\",this.fireEvent.bind(this,[\"connectionRequestAccept\",this.user.username]));new Element(\"div\",{\"class\":\"button_section\"}).adopt($(button)).inject(this.wrapper);},toElement:function(){return this.wrapper;},sendContactRequest:function(){this.fireEvent(\"connectionRequestCreate\",this.user.username);this.connectButton.showProgress();}});var UserContent=new Class({Extends:Content,EventHandlers:[\"streamItemReceived\",\"userStreamItemDeleted\"],onBeforeInit:function(options){this.user=options.user;},onInit:function(){this.statusBox=new StatusBox(this.user);$(this.statusBox).inject(this.content);this.loader=new StreamLoader({createElementFunc:StreamItemUtility.createUserStreamItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":TextUtility.unescape(this.user.fullname)+\" has no updates\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":TextUtility.unescape(this.user.fullname)+\"'s updates loading...\"}),errorEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":TextUtility.unescape(this.user.fullname)+\"'s stream is private\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},streamItemReceived:function(data){if($defined(data.item)&&data.item.source.username==this.user.username&&data.item.is_public==1){this.loader.process(data.item);}},userStreamItemDeleted:function(data){if(!$defined(data.username)||data.username!=this.room.username){return;}this.loader.remove(data.item_id);},loadMore:function(){var params={username:this.user.username,date_created:this.loader.oldestTimestamp,item_id:this.loader.oldestId};if(this.isLoggedIn()){this.call(\"home\",\"stream_user_load\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));}else{this.call(\"home\",\"public_stream_user_load\",params,this.loadMoreSuccess.bind(this),this.loadMoreFail.bind(this));}this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.items)||data.items.length==0){this.atBottom=true;return;}data.items.each(function(item){this.loader.process(item);},this);this.bottomFuncCalled=false;},loadMoreFail:function(status){if(status.code==2002){this.loader.showError();}},bottomFunc:function(){this.loadMore();}});var UserMenu=new Class({Extends:Menu,EventHandlers:[\"userSubscriberAdded\",\"userSubscriberDeleted\",\"userSubscriptionAdded\",\"userSubscriptionDeleted\"],onBeforeInit:function(options){this.user=options.user;options.displayName=this.user.fullname;return options;},onInit:function(){this.map=new UserMapMenuSection({user:this.user});$(this.map).inject(this.menu);this.aboutSection=new UserProfileMenuSection({user:this.user});$(this.aboutSection).inject(this.menu);if(this.isLoggedIn()){this.connect=new UserConnectionMenuSection({user:this.user});$(this.connect).inject(this.menu);}new Element(\"div\",{\"class\":\"nav_seperator\"}).inject(this.menu);this.subscriptions=new SubscriptionsNav({user:this.user});$(this.subscriptions).inject(this.menu);this.subscribers=new SubscribersNav({user:this.user});$(this.subscribers).inject(this.menu);},onShow:function(first){if(first){this.userInfoLoad();}},userInfoLoad:function(){if(this.isLoggedIn()){this.call(\"user\",\"info_load\",{username:this.user.username},this.userInfoLoadSuccess.bind(this),null);}else{this.call(\"home\",\"public_user_info_load\",{username:this.user.username},this.userInfoLoadSuccess.bind(this),null);}},userInfoLoadSuccess:function(data){if(!$defined(data.user)){return;}this.fireEvent(\"userInfoLoaded\",data);Logger().log(\"processing user\");var user=UserUtility.processUser(data.user);this.subscribers.addUsers(data.subscribers);this.subscriptions.addUsers(data.subscriptions);var subscribed=(data.subscription_id!=0);this.connect.setSubscription(subscribed);},userSubscriberAdded:function(data){if(!$defined(data.source_username)||!$defined(data.user)||data.source_username!=this.user.username){return;}this.subscribers.addUsers(data.user);},userSubscriberDeleted:function(data){if(!$defined(data.source_username)||!$defined(data.username)||data.source_username!=this.user.username){return;}this.subscribers.removeUser(data.username);},userSubscriptionAdded:function(data){if(!$defined(data.subscriber)||!$defined(data.user)||data.subscriber!=this.user.username){return;}this.subscriptions.addUsers(data.user);},userSubscriptionDeleted:function(data){if(!$defined(data.subscriber)||!$defined(data.username)||data.subscriber!=this.user.username){return;}this.subscriptions.removeUser(data.username);}});var UserProfileMenuSection=new Class({Extends:Base,EventHandlers:[\"userProfileUpdated\"],init:function(options){this.user=options.user;this.isSelf=this.user.user_id==this.getPrivateUser().user_id;this.createSection();},createSection:function(){this.wrapper=new Element(\"div\");this.bioText=new Element(\"span\");this.bioSection=new Element(\"div\",{\"class\":\"text_section light1 text11 edit_option\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Bio: \"}),this.bioText).inject(this.wrapper);this.interestsText=new Element(\"span\");this.interestsSection=new Element(\"div\",{\"class\":\"text_section light1 text11 edit_option\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Interests: \"}),this.interestsText).inject(this.wrapper);this.urlText=new Element(\"a\",{\"target\":\"_blank\"});this.urlSection=new Element(\"div\",{\"class\":\"text_section light1 text11 nowrap edit_option\"}).adopt(new Element(\"span\",{\"class\":\"bold\",\"text\":\"Web: \"}),this.urlText).inject(this.wrapper);this.userProfileUpdated(this.user.username,this.getProfile(this.user.username));},userProfileUpdated:function(username,about){if(username!=this.user.username){return;}if(!$defined(about)){DomUtility.hide(this.bioSection);DomUtility.hide(this.urlSection);DomUtility.hide(this.interestsSection);return;}if(!$defined(about.bio)||about.bio==\"\"){DomUtility.hide(this.bioSection);}else{this.bioText.set(\"text\",TextUtility.unescape(about.bio));DomUtility.show(this.bioSection);}if(!$defined(about.interests)||about.interests==\"\"){DomUtility.hide(this.interestsSection);}else{this.interestsText.set(\"text\",TextUtility.unescape(about.interests));DomUtility.show(this.interestsSection);}if(!$defined(about.url)||about.url==\"\"){DomUtility.hide(this.urlSection);}else{this.urlText.set(\"text\",TextUtility.unescape(about.url));this.urlText.set(\"href\",about.url);DomUtility.show(this.urlSection);}},toElement:function(){return this.wrapper;}});var UserSubscribersContent=new Class({Extends:Content,EventHandlers:[\"userSubscriberAdded\",\"userSubscriberDeleted\"],onBeforeInit:function(options){this.user=options.user;return options;},onInit:function(){this.statusBox=new StatusBox(this.user);$(this.statusBox).inject(this.content);StreamItemUtility.createSeperatorItem(\"Subscribers\").inject(this.content);this.loader=new ItemLoader({idField:\"user_id\",sortField:\"date_created\",sortAscending:false,createElementFunc:ContactItemUtility.createRoomSubscriberItem,emptyEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"This user has no subscribers\"}),loadingEl:new Element(\"div\",{\"class\":\"post empty\",\"text\":\"User subscribers loading...\"})});$(this.loader).inject(this.content);},onShow:function(first){if(first){this.loadMore();}},onHide:function(){},userSubscriberAdded:function(data){if(!$defined(data.source_username)||!$defined(data.user)||data.source_username!=this.user.username){return;}var user=UserUtility.processUser(data.user);user.date_created=new Date().getTime()/1000;this.loader.process(user);},userSubscriberDeleted:function(data){if(!$defined(data.source_username)||!$defined(data.username)||data.source_username!=this.user.username){return;}if(!$defined(this.getUser(data.username))){return;}var user=this.getUser(data.username);this.loader.remove(user.user_id);},loadMore:function(){var params={username:this.room.username,date_created:this.loader.lowestSortValue};this.call(\"pipio\",\"room_subscribers\",params,this.loadMoreSuccess.bind(this),null);this.loader.showLoading();},loadMoreSuccess:function(data){this.loader.hideLoading();if(!$defined(data.subscribers)||data.subscribers.length==0){this.atBottom=true;return;}data.subscribers.each(function(user){var user_copy=UserUtility.processUser(user);user_copy.date_created=user.date_created;this.loader.process(user_copy);},this);this.bottomFuncCalled=false;},bottomFunc:function(){this.loadMore();}});var Pipio=new Class({Implements:Events,initialize:function(){this.version=pipio_version;this.versionTimer=0;this.initApi();this.initVideo();this.registerApis();this.eventHandlers=new Hash();this.pageTitle=\"Pip.io\";this.loggedIn=false;window.addEvent(\"domready\",this.initCore.bind(this));this.registerHandler(\"userDataInit\",this.userDataInit.bind(this));this.registerHandler(\"videoChatEnable\",this.videoChatEnable.bind(this));this.registerHandler(\"videoInUse\",this.videoChatInUse.bind(this));this.registerHandler(\"startApp\",this.startApp.bind(this));this.registerHandler(\"startAppInstance\",this.startAppInstance.bind(this));this.registerHandler(\"appInstalled\",this.appInstalled.bind(this));this.registerHandler(\"appUninstalled\",this.appUninstalled.bind(this));},initCore:function(){this.xmpp=new Xmpp();this.initProfiles();this.initConnections();this.initConnectionEventHandlers();this.initModules();this.initApps();this.setSessionTimestamp();this.userDataInit();this.checkCookie();},checkCookie:function(){var destination=DataUtility.getCookie(\"destination\");if(destination!=\"room\"&&destination!=\"user\"){return;}var userval=DataUtility.getCookie(\"user\");var user=JSON.decode(userval);if($defined(user)){if(destination==\"user\"){user=UserUtility.processUser(user);this.dispatchEvent(\"showUser\",user);}else{user=UserUtility.processRoom(user);this.dispatchEvent(\"showRoom\",user);}}},initModules:function(){this.modules=new Pipio.modules(this);},initApps:function(){this.apps=new Pipio.apps(this);},setSessionTimestamp:function(){this.sessionTimestamp=new Date();},checkTimestamp:function(time){return time>this.sessionTimestamp.getTime()/1000;},userDataInit:function(data){if($defined(data)){user_data=data;}if(user_data.logged_in==1){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){this.initInstalledApps(user_data.apps);this.initProfiles();this.initLoggedInConnections();this.currentUser=UserUtility.processUser(user_data.user);this.currentUser.email=$defined(user_data.user.email)?user_data.user.email:undefined;this.loggedIn=true;if(!$defined(this.versionTimer)||this.versionTimer==0){$clear(this.versionTimer);}this.versionTimer=this.ping.periodical(1000*60*2,this);this.dispatchEvent(\"userSwitched\");},userLoggedOut:function(){this.initInstalledApps();this.initProfiles();this.initLoggedOutConnections();this.currentUser={user_id:0};this.currentLocation=null;this.loggedIn=false;$clear(this.versionTimer);this.dispatchEvent(\"userSwitched\");},isConnected:function(username){return this.connections.connsByUsername.has(username);},isRequestPending:function(user_id){return this.connections.requestsById.has(user_id)||this.connections.requestsOutById.has(user_id);},isLoggedIn:function(){return this.loggedIn;},dispatchEvent:function(){var eventName=arguments[0];var args=[];for(var i=1;i<arguments.length;i++){args.push(arguments[i]);}Logger().log(\"fired event \"+eventName+\" - \"+args.join(\",\"));this.fireEvent(eventName,args);},registerHandler:function(eventName,func){if(this.eventHandlers.has(eventName)){this.eventHandlers.get(eventName).push(func);this.addEvent(eventName,func);}else{this.eventHandlers.set(eventName,[func]);this.addEvent(eventName,func);}},getSession:function(){return this.xmpp.clientName;},ping:function(){this.call(\"pipio\",\"ping\",{},this.pong.bind(this));},pong:function(data){if(!$defined(data.v)){return;}if(this.version!=data.v){this.dispatchEvent(\"showPipioUpdatePopup\",data.v);}}});Pipio.implement({initApi:function(){this.apiMethods=new Hash();},registerCall:function(app,call){var apiKey=app+\"_\"+call.name;this.apiMethods.set(apiKey,call);},call:function(app,name,params,callbackSuccess,callbackFail,form){var apiKey=app+\"_\"+name;if(!this.apiMethods.has(apiKey)){Logger().log(\"api call not found!\");return;}var call=this.apiMethods.get(apiKey);var paramList=$defined(call.params)?call.params:[];var url=call.url;var method=$defined(call.method)?call.method:\"post\";var multipart=$defined(form);Logger().log(\"multipart \"+multipart);var parsedParams=new Hash();paramList.each(function(paramName){parsedParams.set(paramName,params[paramName]);});if(!multipart){var req=new Request({method:method,url:url,onFailure:function(){var res={status:{code:6000,message:\"request failed\"}};if($defined(callbackFail)){callbackFail(res.status);}},onSuccess:function(response){var res=response;if(res.status==null){try{res=JSON.decode(response);}catch(err){res={status:{code:6000,message:\"request failed\"}};if($defined(callbackFail)){callbackFail(res.status);}}}if($defined(res)&&$defined(res.status)&&res.status.code==0){if($defined(callbackSuccess)){if($defined(res.data)){callbackSuccess(res.data);}else{callbackSuccess();}}}else{if(!$defined(res)||!$defined(res.status)){res={status:{code:6000,message:\"request failed\"}};}if($defined(callbackFail)){callbackFail(res.status);}}}});if(method==\"post\"){req.send(parsedParams.toQueryString());}else{req.send();}}else{var iframeId=\"postIframe\"+$random(10000,99999);form.set(\"target\",iframeId);form.set(\"action\",url);form.set(\"method\",\"post\");form.set(\"enctype\",\"multipart/form-data\");parsedParams.each(function(val,name){new Element(\"input\",{\"type\":\"hidden\",\"name\":name,\"value\":val}).inject(form);},this);var iframe=new IFrame({\"id\":iframeId,\"events\":{load:function(){var response=window.frames[iframeId].document.body.innerHTML;if(response==\"\"){return;}Logger().log(response);var res=JSON.decode(response);if($defined(res)&&$defined(res.status)&&res.status.code==0){if($defined(callbackSuccess)){if($defined(res.data)){callbackSuccess(res.data);}else{callbackSuccess();}}}else{if(!$defined(res)||!$defined(res.status)){res={status:{code:6000,message:\"request failed\"}};}if($defined(callbackSuccess)){callbackFail(res.status);}}}}});iframe.inject(\"hidden\");form.submit();}}});Pipio.implement({moduleList:[{name:\"ui\",classRef:UI},{name:\"login\",classRef:Login},{name:\"background\",classRef:Background},{name:\"chat\",classRef:Chat},{name:\"videochat\",classRef:VideoChat},{name:\"notifications\",classRef:Notifications},{name:\"sharebox\",classRef:ShareBox},{name:\"invite\",classRef:Invite},{name:\"settings\",classRef:Settings},{name:\"albumViewer\",classRef:AlbumViewer},{name:\"facebookSharebox\",classRef:FacebookShareBox},{name:\"twitterSharebox\",classRef:TwitterShareBox},{name:\"location\",classRef:Location}],initModules:function(){this.modules=new Hash();this.moduleList.each(function(module){this.initModule(module.name,module.classRef);},this);},initModule:function(name,classRef){var o=new classRef();this.modules.set(name,o);}});Pipio.implement({initProfiles:function(){this.locationsByUsername=$H();this.profilesByUsername=$H();},locationUpdated:function(data){Logger().log(\"location updated called for \"+data.username);if(!$defined(data.username)||!$defined(data.location_enabled)){return;}if($defined(this.getUser(data.username))){this.getUser(data.username).location_enabled=data.location_enabled;}if($defined(data.location)){this.locationsByUsername.set(data.username,data.location);}this.dispatchEvent(\"userLocationUpdated\",data.username,data.location,data.location_enabled);},locationCleared:function(data){if(!$defined(data.username)){return;}this.locationsByUsername.erase(data.username);this.dispatchEvent(\"userLocationUpdated\",data.username,null,0);},getLocation:function(username){if(this.locationsByUsername.has(username)){return this.locationsByUsername.get(username);}else{return null;}},profileUpdated:function(data){if(!$defined(data.username)||!$defined(data.about)){return;}this.profilesByUsername.set(data.username,data.about);if($defined(this.getUser(data.username))){this.dispatchEvent(\"userProfileUpdated\",data.username,data.about);}else{if($defined(this.getRoom(data.username))){this.dispatchEvent(\"roomProfileUpdated\",data.username,data.about);}}},getProfile:function(username){if(this.profilesByUsername.has(username)){return this.profilesByUsername.get(username);}else{return null;}}});Pipio.implement({initVideo:function(){this.videoEnabled=false;this.videoInUse=false;},videoChatEnable:function(enabled){this.videoEnabled=enabled;},videoChatInUse:function(inUse){if(!this.videoEnabled){return;}this.videoInUse=inUse;}});var Xmpp=new Class({Extends:Base,EventHandlers:[\"userSwitched\",\"sendIM\",\"sendTyping\",\"sendVideoChatInvite\",\"sendVideoChatAccept\"],init:function(){this.newSession();this.domain=\"pip.io\";this.userPresences=new Hash();this.roomsDomain=\"rooms.pip.io\";this.multicastDomain=\"multicast.pip.io\";this.pubsubDomain=\"pubsub.pip.io\";var connArgs={httpbase:\"/pipio-tubes\",timerval:60*20};this.conn=new JSJaCHttpBindingConnection(connArgs);this.setupListeners();this.isConnecting=false;},userSwitched:function(){if(this.isLoggedIn()){this.userLoggedIn();}else{this.userLoggedOut();}},userLoggedIn:function(){this.newSession();this.fireEvent(\"xmppConnecting\");this.connect.delay(1000,this);},userLoggedOut:function(){this.disconnect();},newSession:function(){this.sessionId=$random(1000,9999);this.clientName=\"pipio\"+this.sessionId;},connect:function(){if(this.isConnecting){return;}if($defined(this.connectTimer)){$clear(this.connectTimer);}this.isConnecting=true;this.call(\"pipio\",\"token_get\",{},this.tokenGetSuccess.bind(this),this.tokenGetFail.bind(this));},disconnect:function(){this.isConnecting=false;this.updateSelfPresence(\"\",false);this.conn.disconnect();this.fireEvent(\"xmppDisconnected\");},tokenGetSuccess:function(data){Logger().log(\"xmpp token success - \"+data.token+\", connecting...\");this.username=this.getPrivateUser().username;this.password=data.token;this.isConnecting=false;var args={domain:this.domain,username:this.username,resource:this.clientName,pass:this.password,register:false};this.conn.connect(args);},tokenGetFail:function(){this.isConnecting=false;this.connectTimer=this.connect.delay(10*1000,this);},updateSelfPresence:function(show,online){var pres=new JSJaCPresence();pres.setShow(show);var video=this.videoEnabled();if(video){pres.setPriority(10);}else{pres.setPriority(5);}if(online){pres.setType(\"\");}else{pres.setType(\"unavailable\");}var videoEnabled=(video)?1:0;var pip=pres.getDoc().createElementNS(\"http://pip.io/videochat\",\"pip\");pip.setAttribute(\"video\",videoEnabled);pres.appendNode(pip);this.conn.send(pres);},userPresenceReceived:function(username,show,online,session,video){Logger().log(username+\" \"+show+\" - \"+session);var trueOnline=online;if(online){if(!this.userPresences.has(username)){this.userPresences.set(username,new Hash());}this.userPresences.get(username).set(session,video);}else{if(this.userPresences.has(username)){this.userPresences.get(username).erase(session);}if(this.userPresences.get(username).getLength()==0){this.userPresences.erase(username);}}if(this.userPresences.has(username)){trueOnline=true;}else{trueOnline=false;}Logger().log(\"firing \"+username+\" online-\"+trueOnline+\" show -\"+show);this.fireEvent(\"userPresenceReceived\",username,show,trueOnline);if(trueOnline){var videoEnabled=false;this.userPresences.get(username).each(function(videoExists){if(videoExists){videoEnabled=true;}});this.fireEvent(\"userVideoEnabled\",username,videoEnabled);}},selfPresenceReceived:function(show,online){this.fireEvent(\"selfPresenceReceived\",show,online);},sendVideoChatInvite:function(user){if(!$defined(user)){return;}if(!this.videoEnabled()){return;}var stratusId=sim.GetNearID();var userJID=new JSJaCJID(this.getJID(user));var aMsg=new JSJaCMessage();aMsg.setTo(userJID);aMsg.setBody(stratusId);aMsg.setType(\"videoChat\");var success=this.conn.send(aMsg);this.fireEvent(\"videoInUse\",true);this.fireEvent(\"selfPresenceUpdate\");},sendVideoChatAccept:function(user){if(!$defined(user)){return;}if(!this.videoEnabled()){return;}var stratusId=sim.GetNearID();var userJID=new JSJaCJID(this.getJID(user));var aMsg=new JSJaCMessage();aMsg.setTo(userJID);aMsg.setBody(stratusId);aMsg.setType(\"videoChatAccept\");var success=this.conn.send(aMsg);this.fireEvent(\"videoInUse\",true);this.fireEvent(\"selfPresenceUpdate\");},sendIM:function(user,msg){if(!$defined(user)||!$defined(msg)){return;}var userJID=new JSJaCJID(this.getJID(user));var aMsg=new JSJaCMessage();aMsg.setTo(userJID);aMsg.setBody(msg);aMsg.setType(\"chat\");var success=this.conn.send(aMsg);if(success){var msg=this.buildMessage(user,true,msg,new Date());this.fireEvent(\"chatMsgReceived\",msg);}},sendTyping:function(user){if(!$defined(user)){return;}var userJID=new JSJaCJID(this.getJID(user));var aMsg=new JSJaCMessage();aMsg.setTo(userJID);aMsg.setType(\"typing\");var success=this.conn.send(aMsg);},buildMessage:function(target,outbound,msg,date){return{target:target,outbound:outbound,msg:msg,timestamp:date};},getBody:function(packet){var bodyNode=packet.getChild(\"body\");if(!bodyNode){return\"\";}if(typeof(bodyNode.textContent)!=\"undefined\"){return bodyNode.textContent;}return bodyNode.firstChild.nodeValue;},getItem:function(packet){var itemNode=packet.getChild(\"item\");if(!itemNode){return\"\";}if(typeof(itemNode.textContent)!=\"undefined\"){return itemNode.textContent;}return itemNode.firstChild.nodeValue;},handleMessage:function(packet){if(packet.getType()==\"chat\"){var timestamp=new Date();var x=packet.getChild(\"x\");if($defined(x)){timestamp=DateUtility.convertFromGMT(Date.parse(x.getAttribute(\"stamp\")));}var username=packet.getFromJID().getNode();var user=this.getContact(username);var msg=this.buildMessage(user,false,packet.getBody(),timestamp);this.fireEvent(\"chatMsgReceived\",msg);}else{if(packet.getType()==\"videoChat\"){var username=packet.getFromJID().getNode();var stratusId=packet.getBody();this.fireEvent(\"videoChatRequestReceived\",username,stratusId);}else{if(packet.getType()==\"videoChatAccept\"){var username=packet.getFromJID().getNode();var stratusId=packet.getBody();this.fireEvent(\"videoChatRequestAccepted\",username,stratusId);}else{if(packet.getType()==\"typing\"){var username=packet.getFromJID().getNode();this.fireEvent(\"chatTypingReceived\",username);}else{if(packet.getType()==\"event\"&&packet.getFromJID().getNode()==\"server\"){var msg=this.getBody(packet);var item=JSON.decode(msg);Logger().log(\"unicast/multicast received\");if($defined(item.eventName)&&$defined(item.data)){this.fireEvent(item.eventName,item.data);}else{Logger().log(\"unknown event captured\");}}else{if(packet.getChild(\"event\")!=null){Logger().log(\"broadcast received\");var msg=this.getItem(packet);if(msg!=\"\"){var item=JSON.decode(msg);if($defined(item.eventName)&&$defined(item.data)){this.fireEvent(item.eventName,item.data);}else{Logger().log(\"unknown event captured\");}}}}}}}}},handlePresence:function(packet){var jid=packet.getFromJID();var username=jid.getNode();var session=jid.getResource();if(jid.getDomain()==this.domain){Logger().log(username+\" presence received\");if(!packet.getType()){if(username==this.getPrivateUser().username){var show=packet.getShow();this.selfPresenceReceived(show,true);return;}var show=packet.getShow();var video=false;var pip=packet.getChild(\"pip\",\"*\");if(pip){if(pip.getAttribute(\"video\")==1){video=true;}}this.userPresenceReceived(username,show,true,session,video);}else{if(packet.getType()==\"unavailable\"){var username=jid.getNode();if(username==this.getPrivateUser().username){return;}var session=jid.getResource();this.userPresenceReceived(username,\"\",false,session,false);}}}},handleConnected:function(){Logger().log(\"connected\");this.isConnecting=false;this.fireEvent(\"xmppConnected\");this.updateSelfPresence(\"\",true,false);window.onunload=this.disconnect.bind(this);},handleDisconnected:function(){Logger().log(\"disconnected\");this.isConnecting=false;this.fireEvent(\"xmppDisconnected\");this.connectTimer=this.connect.delay(3000,this);},handleError:function(e){this.reconnect();Logger().log(e.xml());},handleInPacket:function(aJSJaCPacket){Logger().log(\"in\");Logger().log(\"packet:\"+aJSJaCPacket.xml());},handleOutPacket:function(aJSJaCPacket){Logger().log(\"out\");Logger().log(\"packet:\"+aJSJaCPacket.xml());},setupListeners:function(){this.conn.registerHandler(\"message\",this.handleMessage.bind(this));this.conn.registerHandler(\"presence\",this.handlePresence.bind(this));this.conn.registerHandler(\"onconnect\",this.handleConnected.bind(this));this.conn.registerHandler(\"onerror\",this.handleError.bind(this));this.conn.registerHandler(\"ondisconnect\",this.handleDisconnected.bind(this));},getJID:function(user){if($defined(user)){return user.username+\"@\"+this.domain;}else{return this.username+\"@\"+this.domain;}}});Pipio.implement({appList:[{id:1,name:\"contacts\",displayName:\"Contacts\",iconOptions:{iconName:\"pipio\"},classRef:Contacts},{id:2,name:\"home\",displayName:\"Home\",iconOptions:{iconName:\"pipio\"},classRef:Home},{id:3,name:\"appstore\",displayName:\"Pip.io App Store\",iconOptions:{iconName:\"applications\"},classRef:Appstore,autoDock:true},{id:4,name:\"rss\",displayName:\"News Reader\",iconOptions:{iconName:\"rss\"},classRef:Rss,autoDock:true},{id:5,name:\"facebook\",displayName:\"Facebook\",iconOptions:{iconName:\"facebook\"},classRef:Facebook,autoDock:true},{id:6,name:\"twitter\",displayName:\"Twitter\",iconOptions:{iconName:\"twitter\"},classRef:Twitter,autoDock:true}],instanceAppList:{user:{name:\"user\",classRef:User,autoDock:true},room:{name:\"room\",classRef:Room,autoDock:true},global:{name:\"global\",classRef:Global,autoDock:true}},initApps:function(){this.apps=new Hash();this.appsById=$H();this.appInstances=new Hash();this.appList.each(function(app){this.initApp(app);},this);},initInstalledApps:function(apps){this.installedApps=$H();if(!$defined(apps)){return;}apps.each(function(app){this.installedApps.set(app.app_id,{settings:app.settings});},this);this.updateAppsMenu();},appInstalled:function(data){if(!$defined(data.app_id)){return;}this.installedApps.set(data.app_id,data);this.updateAppsMenu();var app=this.getAppById(data.app_id);this.startApp(app.name,{settings:data.settings});},appUninstalled:function(data){if(!$defined(data.app_id)){return;}this.installedApps.erase(data.app_id);this.updateAppsMenu();},updateAppsMenu:function(){DomUtility.hide(\"app_menu_item_4\");DomUtility.hide(\"app_menu_item_5\");DomUtility.hide(\"app_menu_item_6\");DomUtility.show(\"no_apps\");if(this.installedApps.getLength()>0){DomUtility.hide(\"no_apps\");this.installedApps.each(function(app,appId){DomUtility.show(\"app_menu_item_\"+appId);},this);}},getAppById:function(appId){if(this.appsById.has(appId)){return this.appsById.get(appId);}else{return false;}},initApp:function(app){var o=new app.classRef(app);this.apps.set(app.name,o);this.appsById.set(app.id,app);},startApp:function(appName,options){if(!this.apps.has(appName)){return;}var appId=this.apps.get(appName).appId;if(this.installedApps.has(appId)){this.apps.get(appName).start(this.installedApps.get(appId));}else{this.apps.get(appName).start(options);}},startAppInstance:function(appName,instanceName,options){if(!$defined(this.instanceAppList[appName])){return;}var appId=appName+\"_\"+instanceName;if(this.appInstances.has(appId)){this.appInstances.get(appId).start(appId);return;}var app=this.instanceAppList[appName];var o=new app.classRef(app,options);this.appInstances.set(appId,o);o.start(appId);}});Pipio.implement({initConnectionEventHandlers:function(){this.registerHandler(\"connectionGroupAdded\",this.connectionGroupAdded.bind(this));this.registerHandler(\"connectionGroupDeleted\",this.connectionGroupDeleted.bind(this));this.registerHandler(\"connectionGroupMoved\",this.connectionGroupMoved.bind(this));this.registerHandler(\"connectionAdded\",this.connectionAdded.bind(this));this.registerHandler(\"connectionDeleted\",this.connectionDeleted.bind(this));this.registerHandler(\"connectionRequestAdded\",this.connectionRequestAdded.bind(this));this.registerHandler(\"connectionRequestDeleted\",this.connectionRequestDeleted.bind(this));this.registerHandler(\"connectionRequestOutAdded\",this.connectionRequestOutAdded.bind(this));this.registerHandler(\"connectionRequestOutDeleted\",this.connectionRequestOutDeleted.bind(this));this.registerHandler(\"roomAdded\",this.roomAdded.bind(this));this.registerHandler(\"roomDeleted\",this.roomDeleted.bind(this));this.registerHandler(\"roomClosed\",this.roomDeleted.bind(this));this.registerHandler(\"roomMembershipUpdated\",this.roomMembershipUpdated.bind(this));this.registerHandler(\"roomStreamSubscriptionDeleted\",this.roomStreamSubscriptionDeleted.bind(this));this.registerHandler(\"roomStreamSubscriptionAdded\",this.roomStreamSubscriptionAdded.bind(this));this.registerHandler(\"profileUpdated\",this.profileUpdated.bind(this));this.registerHandler(\"locationUpdated\",this.locationUpdated.bind(this));this.registerHandler(\"locationCleared\",this.locationCleared.bind(this));},initConnections:function(){this.connsByUsername=$H();this.userCache=$H();this.groups=$H();this.requestsByUsername=$H();this.requestsOutByUsername=$H();this.roomsByUsername=$H();this.roomCache=$H();},initLoggedInConnections:function(){this.initConnections();this.processConnections();},initLoggedOutConnections:function(){this.initConnections();},userAboutUpdated:function(data){if(!$defined(data.username)){return;}if(this.connsByUsername.has(data.username)){this.connsByUsername.get(data.username).about=data.about;}if(this.userCache.has(data.username)){this.userCache.get(data.username).about=data.about;}},processConnections:function(){Logger().log(\"processing user connections\");user_data.groups.each(function(group){this.processGroup(group);},this);var unsorted={group_id:0,name:\"Unsorted\"};this.processGroup(unsorted);user_data.connections.each(function(user){this.processConnection(user);},this);user_data.connection_requests.each(function(user){this.processConnectionRequest(user);},this);user_data.connection_requests_out.each(function(user){this.processConnectionRequestOut(user);},this);user_data.rooms.each(function(room){this.processRoom(room);},this);},processGroup:function(group){group.users=new Hash();this.groups.set(parseInt(group.group_id),group);return group;},processRoom:function(room){room=UserUtility.processRoom(room);this.roomsByUsername.set(room.username,room);return room;},processConnection:function(user){user=UserUtility.processUser(user);this.connsByUsername.set(user.username,user);var group=this.getGroup(user.group_id);this.addUserToGroup(user,group);return user;},processConnectionRequest:function(user){user=UserUtility.processUser(user);this.requestsByUsername.set(user.username,user);return user;},processConnectionRequestOut:function(user){Logger().log(\"procesing out request \"+user.username);user=UserUtility.processUser(user);this.requestsOutByUsername.set(user.username,user);return user;},roomAdded:function(data){if(!$defined(data.room)){return;}var room=this.processRoom(data.room);this.dispatchEvent(\"feedRoomAdded\",room);},roomDeleted:function(data){if(!$defined(data.username)){return;}this.roomsByUsername.erase(data.username);this.roomCache.erase(data.username);this.dispatchEvent(\"feedRoomDeleted\",data.username);},roomMembershipUpdated:function(data){if(!$defined(data.username)||!this.roomsByUsername.has(data.username)){return;}this.roomsByUsername.get(data.username).status=data.status;},roomStreamSubscriptionAdded:function(data){if(!$defined(data.room)||!this.roomsByUsername.has(data.room.username)){return;}this.roomsByUsername.get(data.room.username).subscribed=1;},roomStreamSubscriptionDeleted:function(data){if(!$defined(data.username)||!this.roomsByUsername.has(data.username)){return;}this.roomsByUsername.get(data.username).subscribed=0;},connectionAdded:function(data){if(!$defined(data.user)){return;}var user=this.processConnection(data.user);this.dispatchEvent(\"contactAdded\",user);if(this.requestsByUsername.has(user.username)){this.requestsByUsername.erase(user.username);this.dispatchEvent(\"contactRequestDeleted\",user.username);}if(this.requestsOutByUsername.has(user.username)){this.requestsOutByUsername.erase(user.username);}},connectionDeleted:function(data){if(!$defined(data.username)){return;}var group=this.getGroup(data.group_id);group.users.erase(data.username);this.connsByUsername.erase(data.username);this.dispatchEvent(\"contactDeleted\",data.username,data.group_id);},connectionRequestAdded:function(data){if(!$defined(data.user)){return;}var user=this.processConnectionRequest(data.user);this.dispatchEvent(\"contactRequestAdded\",user);},connectionRequestDeleted:function(data){if(!$defined(data.username)){return;}this.requestsByUsername.erase(data.username);this.dispatchEvent(\"contactRequestDeleted\",data.username);},connectionRequestOutAdded:function(data){if(!$defined(data.user)){return;}var user=this.processConnectionRequestOut(data.user);this.dispatchEvent(\"contactRequestOutAdded\",user);},connectionRequestOutDeleted:function(data){if(!$defined(data.username)){return;}this.requestsOutByUsername.erase(data.username);this.dispatchEvent(\"contactRequestOutDeleted\",data.username);},connectionGroupAdded:function(data){if(!$defined(data.group)){return;}var group=this.processGroup(data.group);this.fireEvent(\"contactGroupAdded\",group);},connectionGroupDeleted:function(data){if(!$defined(data.group_id)||!this.groups.has(data.group_id)){return;}var group=this.getGroup(data.group_id);group.users.each(function(user){this.connectionGroupMoved({username:user.username,group_id:0,old_group_id:data.group_id});group.users.erase(user.username);},this);this.groups.erase(data.group_id);this.fireEvent(\"contactGroupDeleted\",group);},connectionGroupMoved:function(data){if(!$defined(data.group_id)||!$defined(data.username)||!$defined(data.old_group_id)){return;}var user=this.getContact(data.username);user.group_id=data.group_id;this.fireEvent(\"contactGroupMoved\",user);},addUserToGroup:function(user,group){if(!group.users.has(user.username)){group.users.set(user.username,user);}},getGroup:function(group_id){return this.groups.get(parseInt(group_id));},getContact:function(username){return this.connsByUsername.get(username);},getRoom:function(username){if(this.roomsByUsername.has(username)){return this.roomsByUsername.get(username);}else{if(this.roomCache.has(username)){return this.roomCache.get(username);}else{return null;}}},getContactsByGroup:function(group_id){if(!this.groups.has(group_id)){return;}var group=this.getGroup(group_id);return group.users;},getUser:function(username){if(this.userCache.has(username)){return this.userCache.get(username);}else{return null;}},cacheUser:function(user){this.userCache.set(user.username,user);},cacheRoom:function(room){this.roomCache.set(room.username,room);}});Pipio.implement({registerApis:function(){this.requests.each(function(request){this.registerCall(\"pipio\",request);},this);},requests:[{name:\"user_login\",params:[\"username\",\"password\",\"remember_me\"],url:\"/api/auth/user/login\"},{name:\"user_logout\",url:\"/api/auth/user/logout\"},{name:\"user_register\",params:[\"username\",\"password\",\"first_name\",\"last_name\",\"email\",\"dob_month\",\"dob_year\",\"dob_day\",\"access_key\"],url:\"/api/auth/user/register\"},{name:\"user_password_resetrequest\",params:[\"username\"],url:\"/api/auth/user/password/resetrequest\"},{name:\"user_password_reset\",params:[\"token\",\"new_password\",\"verify_password\",\"email\"],url:\"/api/auth/user/password/reset\"},{name:\"user_privacy_set\",params:[\"is_public\"],url:\"/api/user/privacy/set\"},{name:\"user_password_change\",params:[\"password\",\"new_password\",\"verify_password\"],url:\"/api/user/password/change\"},{name:\"user_email_change\",params:[\"email\"],url:\"/api/user/email/change\"},{name:\"user_location_enabled\",params:[\"location_enabled\"],url:\"/api/user/location/enabled\"},{name:\"user_location_save\",params:[\"label\",\"country_code\",\"country\",\"city\",\"region\",\"lat\",\"lon\",\"geohash\"],url:\"/api/user/location/save\"},{name:\"token_get\",url:\"/api/user/token/get\"},{name:\"publish_status\",url:\"/api/pipio/stream/publish/status\",params:[\"body\",\"res\"]},{name:\"publish_roomstatus\",url:\"/api/pipio/stream/publish/roomstatus\",params:[\"username\",\"body\",\"res\"]},{name:\"user_profilepic_upload\",url:\"/api/user/profilepic/upload\",params:[]},{name:\"room_profilepic_upload\",url:\"/api/pipio/room/profilepic/upload\",params:[\"username\"]},{name:\"room_members\",url:\"/api/pipio/room/members\",params:[\"username\",\"date_created\"]},{name:\"room_subscribers\",url:\"/api/pipio/room/subscribers\",params:[\"username\",\"date_created\"]},{name:\"room_requests\",url:\"/api/pipio/room/requests\",params:[\"username\",\"date_created\"]},{name:\"email_block\",url:\"/api/auth/email/block\",params:[\"token\",\"email\"]},{name:\"user_profile_update\",url:\"/api/user/profile/update\",params:[\"bio\",\"url\",\"interests\"]},{name:\"ping\",params:[],url:\"/api/user/session/ping\"},{name:\"emailblock_load\",url:\"/api/user/emailblock/load\"},{name:\"emailblock_update\",params:[\"email_type\",\"blocked\"],url:\"/api/user/emailblock/update\"}]});\n 33627  \n 33628  \n .....\n 34455          var br = Math.round(b / 100 * 255);\n 34456  \n 34457:         var p = Math.round((b * (100 - s)) / 10000 * 255);\n 34458  \n 34459          var q = Math.round((b * (6000 - s * f)) / 600000 * 255);\n .....\n 37996  function sieve() {\n 37997      for (var i = 1; i <= 3; i++ ) {\n 37998:         var m = (1<<i)*10000;\n 37999          var flags = Array(m+1);\n 38000          nsieve(m, flags);\n .....\n 38096  \n 38097  function primes(isPrime, n) {\n 38098:   var i, count = 0, m = 10000<<n, size = m+31>>5;\n 38099  \n 38100    for (i=0; i<size; i++) isPrime[i] = 0xffffffff;\n .....\n 38110  function sieve() {\n 38111      for (var i = 4; i <= 4; i++) {\n 38112:         var isPrime = new Array((10000<<i)+31>>5);\n 38113          primes(isPrime, i);\n 38114      }\n .....\n 42195   */\n 42196  \n 42197: var decompressedJQuery = function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\\\b'+e(c)+'\\\\b','g'),k[c]);return p}('(G(){9(1m E!=\"W\")H w=E;H E=18.15=G(a,b){I 6 7u E?6.5N(a,b):1u E(a,b)};9(1m $!=\"W\")H D=$;18.$=E;H u=/^[^<]*(<(.|\\\\s)+>)[^>]*$|^#(\\\\w+)$/;E.1b=E.3A={5N:G(c,a){c=c||U;9(1m c==\"1M\"){H m=u.2S(c);9(m&&(m[1]||!a)){9(m[1])c=E.4D([m[1]],a);J{H b=U.3S(m[3]);9(b)9(b.22!=m[3])I E().1Y(c);J{6[0]=b;6.K=1;I 6}J c=[]}}J I 1u E(a).1Y(c)}J 9(E.1n(c))I 1u E(U)[E.1b.2d?\"2d\":\"39\"](c);I 6.6v(c.1c==1B&&c||(c.4c||c.K&&c!=18&&!c.1y&&c[0]!=W&&c[0].1y)&&E.2h(c)||[c])},4c:\"1.2.1\",7Y:G(){I 6.K},K:0,21:G(a){I a==W?E.2h(6):6[a]},2o:G(a){H b=E(a);b.4Y=6;I b},6v:G(a){6.K=0;1B.3A.1a.16(6,a);I 6},N:G(a,b){I E.N(6,a,b)},4I:G(a){H b=-1;6.N(G(i){9(6==a)b=i});I b},1x:G(f,d,e){H c=f;9(f.1c==3X)9(d==W)I 6.K&&E[e||\"1x\"](6[0],f)||W;J{c={};c[f]=d}I 6.N(G(a){L(H b 1i c)E.1x(e?6.R:6,b,E.1e(6,c[b],e,a,b))})},17:G(b,a){I 6.1x(b,a,\"3C\")},2g:G(e){9(1m e!=\"5i\"&&e!=S)I 6.4n().3g(U.6F(e));H t=\"\";E.N(e||6,G(){E.N(6.3j,G(){9(6.1y!=8)t+=6.1y!=1?6.6x:E.1b.2g([6])})});I t},5m:G(b){9(6[0])E(b,6[0].3H).6u().3d(6[0]).1X(G(){H a=6;1W(a.1w)a=a.1w;I a}).3g(6);I 6},8m:G(a){I 6.N(G(){E(6).6q().5m(a)})},8d:G(a){I 6.N(G(){E(6).5m(a)})},3g:G(){I 6.3z(1q,Q,1,G(a){6.58(a)})},6j:G(){I 6.3z(1q,Q,-1,G(a){6.3d(a,6.1w)})},6g:G(){I 6.3z(1q,P,1,G(a){6.12.3d(a,6)})},50:G(){I 6.3z(1q,P,-1,G(a){6.12.3d(a,6.2q)})},2D:G(){I 6.4Y||E([])},1Y:G(t){H b=E.1X(6,G(a){I E.1Y(t,a)});I 6.2o(/[^+>] [^+>]/.14(t)||t.1g(\"..\")>-1?E.4V(b):b)},6u:G(e){H f=6.1X(G(){I 6.67?E(6.67)[0]:6.4R(Q)});H d=f.1Y(\"*\").4O().N(G(){9(6[F]!=W)6[F]=S});9(e===Q)6.1Y(\"*\").4O().N(G(i){H c=E.M(6,\"2P\");L(H a 1i c)L(H b 1i c[a])E.1j.1f(d[i],a,c[a][b],c[a][b].M)});I f},1E:G(t){I 6.2o(E.1n(t)&&E.2W(6,G(b,a){I t.16(b,[a])})||E.3m(t,6))},5V:G(t){I 6.2o(t.1c==3X&&E.3m(t,6,Q)||E.2W(6,G(a){I(t.1c==1B||t.4c)?E.2A(a,t)<0:a!=t}))},1f:G(t){I 6.2o(E.1R(6.21(),t.1c==3X?E(t).21():t.K!=W&&(!t.11||E.11(t,\"2Y\"))?t:[t]))},3t:G(a){I a?E.3m(a,6).K>0:P},7c:G(a){I 6.3t(\".\"+a)},3i:G(b){9(b==W){9(6.K){H c=6[0];9(E.11(c,\"24\")){H e=c.4Z,a=[],Y=c.Y,2G=c.O==\"24-2G\";9(e<0)I S;L(H i=2G?e:0,33=2G?e+1:Y.K;i<33;i++){H d=Y[i];9(d.26){H b=E.V.1h&&!d.9V[\"1Q\"].9L?d.2g:d.1Q;9(2G)I b;a.1a(b)}}I a}J I 6[0].1Q.1p(/\\\\r/g,\"\")}}J I 6.N(G(){9(b.1c==1B&&/4k|5j/.14(6.O))6.2Q=(E.2A(6.1Q,b)>=0||E.2A(6.2H,b)>=0);J 9(E.11(6,\"24\")){H a=b.1c==1B?b:[b];E(\"9h\",6).N(G(){6.26=(E.2A(6.1Q,a)>=0||E.2A(6.2g,a)>=0)});9(!a.K)6.4Z=-1}J 6.1Q=b})},4o:G(a){I a==W?(6.K?6[0].3O:S):6.4n().3g(a)},6H:G(a){I 6.50(a).28()},6E:G(i){I 6.2J(i,i+1)},2J:G(){I 6.2o(1B.3A.2J.16(6,1q))},1X:G(b){I 6.2o(E.1X(6,G(a,i){I b.2O(a,i,a)}))},4O:G(){I 6.1f(6.4Y)},3z:G(f,d,g,e){H c=6.K>1,a;I 6.N(G(){9(!a){a=E.4D(f,6.3H);9(g<0)a.8U()}H b=6;9(d&&E.11(6,\"1I\")&&E.11(a[0],\"4m\"))b=6.4l(\"1K\")[0]||6.58(U.5B(\"1K\"));E.N(a,G(){H a=c?6.4R(Q):6;9(!5A(0,a))e.2O(b,a)})})}};G 5A(i,b){H a=E.11(b,\"1J\");9(a){9(b.3k)E.3G({1d:b.3k,3e:P,1V:\"1J\"});J E.5f(b.2g||b.6s||b.3O||\"\");9(b.12)b.12.3b(b)}J 9(b.1y==1)E(\"1J\",b).N(5A);I a}E.1k=E.1b.1k=G(){H c=1q[0]||{},a=1,2c=1q.K,5e=P;9(c.1c==8o){5e=c;c=1q[1]||{}}9(2c==1){c=6;a=0}H b;L(;a<2c;a++)9((b=1q[a])!=S)L(H i 1i b){9(c==b[i])6r;9(5e&&1m b[i]==\\'5i\\'&&c[i])E.1k(c[i],b[i]);J 9(b[i]!=W)c[i]=b[i]}I c};H F=\"15\"+(1u 3D()).3B(),6p=0,5c={};E.1k({8a:G(a){18.$=D;9(a)18.15=w;I E},1n:G(a){I!!a&&1m a!=\"1M\"&&!a.11&&a.1c!=1B&&/G/i.14(a+\"\")},4a:G(a){I a.2V&&!a.1G||a.37&&a.3H&&!a.3H.1G},5f:G(a){a=E.36(a);9(a){9(18.6l)18.6l(a);J 9(E.V.1N)18.56(a,0);J 3w.2O(18,a)}},11:G(b,a){I b.11&&b.11.27()==a.27()},1L:{},M:G(c,d,b){c=c==18?5c:c;H a=c[F];9(!a)a=c[F]=++6p;9(d&&!E.1L[a])E.1L[a]={};9(b!=W)E.1L[a][d]=b;I d?E.1L[a][d]:a},30:G(c,b){c=c==18?5c:c;H a=c[F];9(b){9(E.1L[a]){2E E.1L[a][b];b=\"\";L(b 1i E.1L[a])1T;9(!b)E.30(c)}}J{2a{2E c[F]}29(e){9(c.53)c.53(F)}2E E.1L[a]}},N:G(a,b,c){9(c){9(a.K==W)L(H i 1i a)b.16(a[i],c);J L(H i=0,48=a.K;i<48;i++)9(b.16(a[i],c)===P)1T}J{9(a.K==W)L(H i 1i a)b.2O(a[i],i,a[i]);J L(H i=0,48=a.K,3i=a[0];i<48&&b.2O(3i,i,3i)!==P;3i=a[++i]){}}I a},1e:G(c,b,d,e,a){9(E.1n(b))b=b.2O(c,[e]);H f=/z-?4I|7T-?7Q|1r|69|7P-?1H/i;I b&&b.1c==4W&&d==\"3C\"&&!f.14(a)?b+\"2T\":b},1o:{1f:G(b,c){E.N((c||\"\").2l(/\\\\s+/),G(i,a){9(!E.1o.3K(b.1o,a))b.1o+=(b.1o?\" \":\"\")+a})},28:G(b,c){b.1o=c!=W?E.2W(b.1o.2l(/\\\\s+/),G(a){I!E.1o.3K(c,a)}).66(\" \"):\"\"},3K:G(t,c){I E.2A(c,(t.1o||t).3s().2l(/\\\\s+/))>-1}},2k:G(e,o,f){L(H i 1i o){e.R[\"3r\"+i]=e.R[i];e.R[i]=o[i]}f.16(e,[]);L(H i 1i o)e.R[i]=e.R[\"3r\"+i]},17:G(e,p){9(p==\"1H\"||p==\"2N\"){H b={},42,41,d=[\"7J\",\"7I\",\"7G\",\"7F\"];E.N(d,G(){b[\"7C\"+6]=0;b[\"7B\"+6+\"5Z\"]=0});E.2k(e,b,G(){9(E(e).3t(\\':3R\\')){42=e.7A;41=e.7w}J{e=E(e.4R(Q)).1Y(\":4k\").5W(\"2Q\").2D().17({4C:\"1P\",2X:\"4F\",19:\"2Z\",7o:\"0\",1S:\"0\"}).5R(e.12)[0];H a=E.17(e.12,\"2X\")||\"3V\";9(a==\"3V\")e.12.R.2X=\"7g\";42=e.7e;41=e.7b;9(a==\"3V\")e.12.R.2X=\"3V\";e.12.3b(e)}});I p==\"1H\"?42:41}I E.3C(e,p)},3C:G(h,j,i){H g,2w=[],2k=[];G 3n(a){9(!E.V.1N)I P;H b=U.3o.3Z(a,S);I!b||b.4y(\"3n\")==\"\"}9(j==\"1r\"&&E.V.1h){g=E.1x(h.R,\"1r\");I g==\"\"?\"1\":g}9(j.1t(/4u/i))j=y;9(!i&&h.R[j])g=h.R[j];J 9(U.3o&&U.3o.3Z){9(j.1t(/4u/i))j=\"4u\";j=j.1p(/([A-Z])/g,\"-$1\").2p();H d=U.3o.3Z(h,S);9(d&&!3n(h))g=d.4y(j);J{L(H a=h;a&&3n(a);a=a.12)2w.4w(a);L(a=0;a<2w.K;a++)9(3n(2w[a])){2k[a]=2w[a].R.19;2w[a].R.19=\"2Z\"}g=j==\"19\"&&2k[2w.K-1]!=S?\"2s\":U.3o.3Z(h,S).4y(j)||\"\";L(a=0;a<2k.K;a++)9(2k[a]!=S)2w[a].R.19=2k[a]}9(j==\"1r\"&&g==\"\")g=\"1\"}J 9(h.3Q){H f=j.1p(/\\\\-(\\\\w)/g,G(m,c){I c.27()});g=h.3Q[j]||h.3Q[f];9(!/^\\\\d+(2T)?$/i.14(g)&&/^\\\\d/.14(g)){H k=h.R.1S;H e=h.4v.1S;h.4v.1S=h.3Q.1S;h.R.1S=g||0;g=h.R.71+\"2T\";h.R.1S=k;h.4v.1S=e}}I g},4D:G(a,e){H r=[];e=e||U;E.N(a,G(i,d){9(!d)I;9(d.1c==4W)d=d.3s();9(1m d==\"1M\"){d=d.1p(/(<(\\\\w+)[^>]*?)\\\\/>/g,G(m,a,b){I b.1t(/^(70|6Z|6Y|9Q|4t|9N|9K|3a|9G|9E)$/i)?m:a+\"></\"+b+\">\"});H s=E.36(d).2p(),1s=e.5B(\"1s\"),2x=[];H c=!s.1g(\"<9y\")&&[1,\"<24>\",\"</24>\"]||!s.1g(\"<9w\")&&[1,\"<6T>\",\"</6T>\"]||s.1t(/^<(9u|1K|9t|9r|9p)/)&&[1,\"<1I>\",\"</1I>\"]||!s.1g(\"<4m\")&&[2,\"<1I><1K>\",\"</1K></1I>\"]||(!s.1g(\"<9m\")||!s.1g(\"<9k\"))&&[3,\"<1I><1K><4m>\",\"</4m></1K></1I>\"]||!s.1g(\"<6Y\")&&[2,\"<1I><1K></1K><6L>\",\"</6L></1I>\"]||E.V.1h&&[1,\"1s<1s>\",\"</1s>\"]||[0,\"\",\"\"];1s.3O=c[1]+d+c[2];1W(c[0]--)1s=1s.5p;9(E.V.1h){9(!s.1g(\"<1I\")&&s.1g(\"<1K\")<0)2x=1s.1w&&1s.1w.3j;J 9(c[1]==\"<1I>\"&&s.1g(\"<1K\")<0)2x=1s.3j;L(H n=2x.K-1;n>=0;--n)9(E.11(2x[n],\"1K\")&&!2x[n].3j.K)2x[n].12.3b(2x[n]);9(/^\\\\s/.14(d))1s.3d(e.6F(d.1t(/^\\\\s*/)[0]),1s.1w)}d=E.2h(1s.3j)}9(0===d.K&&(!E.11(d,\"2Y\")&&!E.11(d,\"24\")))I;9(d[0]==W||E.11(d,\"2Y\")||d.Y)r.1a(d);J r=E.1R(r,d)});I r},1x:G(c,d,a){H e=E.4a(c)?{}:E.5o;9(d==\"26\"&&E.V.1N)c.12.4Z;9(e[d]){9(a!=W)c[e[d]]=a;I c[e[d]]}J 9(E.V.1h&&d==\"R\")I E.1x(c.R,\"9e\",a);J 9(a==W&&E.V.1h&&E.11(c,\"2Y\")&&(d==\"9d\"||d==\"9a\"))I c.97(d).6x;J 9(c.37){9(a!=W){9(d==\"O\"&&E.11(c,\"4t\")&&c.12)6G\"O 94 93\\'t 92 91\";c.90(d,a)}9(E.V.1h&&/6C|3k/.14(d)&&!E.4a(c))I c.4p(d,2);I c.4p(d)}J{9(d==\"1r\"&&E.V.1h){9(a!=W){c.69=1;c.1E=(c.1E||\"\").1p(/6O\\\\([^)]*\\\\)/,\"\")+(3I(a).3s()==\"8S\"?\"\":\"6O(1r=\"+a*6A+\")\")}I c.1E?(3I(c.1E.1t(/1r=([^)]*)/)[1])/6A).3s():\"\"}d=d.1p(/-([a-z])/8Q,G(z,b){I b.27()});9(a!=W)c[d]=a;I c[d]}},36:G(t){I(t||\"\").1p(/^\\\\s+|\\\\s+$/g,\"\")},2h:G(a){H r=[];9(1m a!=\"8P\")L(H i=0,2c=a.K;i<2c;i++)r.1a(a[i]);J r=a.2J(0);I r},2A:G(b,a){L(H i=0,2c=a.K;i<2c;i++)9(a[i]==b)I i;I-1},1R:G(a,b){9(E.V.1h){L(H i=0;b[i];i++)9(b[i].1y!=8)a.1a(b[i])}J L(H i=0;b[i];i++)a.1a(b[i]);I a},4V:G(b){H r=[],2f={};2a{L(H i=0,6y=b.K;i<6y;i++){H a=E.M(b[i]);9(!2f[a]){2f[a]=Q;r.1a(b[i])}}}29(e){r=b}I r},2W:G(b,a,c){9(1m a==\"1M\")a=3w(\"P||G(a,i){I \"+a+\"}\");H d=[];L(H i=0,4g=b.K;i<4g;i++)9(!c&&a(b[i],i)||c&&!a(b[i],i))d.1a(b[i]);I d},1X:G(c,b){9(1m b==\"1M\")b=3w(\"P||G(a){I \"+b+\"}\");H d=[];L(H i=0,4g=c.K;i<4g;i++){H a=b(c[i],i);9(a!==S&&a!=W){9(a.1c!=1B)a=[a];d=d.8M(a)}}I d}});H v=8K.8I.2p();E.V={4s:(v.1t(/.+(?:8F|8E|8C|8B)[\\\\/: ]([\\\\d.]+)/)||[])[1],1N:/6w/.14(v),34:/34/.14(v),1h:/1h/.14(v)&&!/34/.14(v),35:/35/.14(v)&&!/(8z|6w)/.14(v)};H y=E.V.1h?\"4h\":\"5h\";E.1k({5g:!E.V.1h||U.8y==\"8x\",4h:E.V.1h?\"4h\":\"5h\",5o:{\"L\":\"8w\",\"8v\":\"1o\",\"4u\":y,5h:y,4h:y,3O:\"3O\",1o:\"1o\",1Q:\"1Q\",3c:\"3c\",2Q:\"2Q\",8u:\"8t\",26:\"26\",8s:\"8r\"}});E.N({1D:\"a.12\",8q:\"15.4e(a,\\'12\\')\",8p:\"15.2I(a,2,\\'2q\\')\",8n:\"15.2I(a,2,\\'4d\\')\",8l:\"15.4e(a,\\'2q\\')\",8k:\"15.4e(a,\\'4d\\')\",8j:\"15.5d(a.12.1w,a)\",8i:\"15.5d(a.1w)\",6q:\"15.11(a,\\'8h\\')?a.8f||a.8e.U:15.2h(a.3j)\"},G(i,n){E.1b[i]=G(a){H b=E.1X(6,n);9(a&&1m a==\"1M\")b=E.3m(a,b);I 6.2o(E.4V(b))}});E.N({5R:\"3g\",8c:\"6j\",3d:\"6g\",8b:\"50\",89:\"6H\"},G(i,n){E.1b[i]=G(){H a=1q;I 6.N(G(){L(H j=0,2c=a.K;j<2c;j++)E(a[j])[n](6)})}});E.N({5W:G(a){E.1x(6,a,\"\");6.53(a)},88:G(c){E.1o.1f(6,c)},87:G(c){E.1o.28(6,c)},86:G(c){E.1o[E.1o.3K(6,c)?\"28\":\"1f\"](6,c)},28:G(a){9(!a||E.1E(a,[6]).r.K){E.30(6);6.12.3b(6)}},4n:G(){E(\"*\",6).N(G(){E.30(6)});1W(6.1w)6.3b(6.1w)}},G(i,n){E.1b[i]=G(){I 6.N(n,1q)}});E.N([\"85\",\"5Z\"],G(i,a){H n=a.2p();E.1b[n]=G(h){I 6[0]==18?E.V.1N&&3y[\"84\"+a]||E.5g&&38.33(U.2V[\"5a\"+a],U.1G[\"5a\"+a])||U.1G[\"5a\"+a]:6[0]==U?38.33(U.1G[\"6n\"+a],U.1G[\"6m\"+a]):h==W?(6.K?E.17(6[0],n):S):6.17(n,h.1c==3X?h:h+\"2T\")}});H C=E.V.1N&&3x(E.V.4s)<83?\"(?:[\\\\\\\\w*57-]|\\\\\\\\\\\\\\\\.)\":\"(?:[\\\\\\\\w\\\\82-\\\\81*57-]|\\\\\\\\\\\\\\\\.)\",6k=1u 47(\"^>\\\\\\\\s*(\"+C+\"+)\"),6i=1u 47(\"^(\"+C+\"+)(#)(\"+C+\"+)\"),6h=1u 47(\"^([#.]?)(\"+C+\"*)\");E.1k({55:{\"\":\"m[2]==\\'*\\'||15.11(a,m[2])\",\"#\":\"a.4p(\\'22\\')==m[2]\",\":\":{80:\"i<m[3]-0\",7Z:\"i>m[3]-0\",2I:\"m[3]-0==i\",6E:\"m[3]-0==i\",3v:\"i==0\",3u:\"i==r.K-1\",6f:\"i%2==0\",6e:\"i%2\",\"3v-46\":\"a.12.4l(\\'*\\')[0]==a\",\"3u-46\":\"15.2I(a.12.5p,1,\\'4d\\')==a\",\"7X-46\":\"!15.2I(a.12.5p,2,\\'4d\\')\",1D:\"a.1w\",4n:\"!a.1w\",7W:\"(a.6s||a.7V||15(a).2g()||\\'\\').1g(m[3])>=0\",3R:\\'\"1P\"!=a.O&&15.17(a,\"19\")!=\"2s\"&&15.17(a,\"4C\")!=\"1P\"\\',1P:\\'\"1P\"==a.O||15.17(a,\"19\")==\"2s\"||15.17(a,\"4C\")==\"1P\"\\',7U:\"!a.3c\",3c:\"a.3c\",2Q:\"a.2Q\",26:\"a.26||15.1x(a,\\'26\\')\",2g:\"\\'2g\\'==a.O\",4k:\"\\'4k\\'==a.O\",5j:\"\\'5j\\'==a.O\",54:\"\\'54\\'==a.O\",52:\"\\'52\\'==a.O\",51:\"\\'51\\'==a.O\",6d:\"\\'6d\\'==a.O\",6c:\"\\'6c\\'==a.O\",2r:\\'\"2r\"==a.O||15.11(a,\"2r\")\\',4t:\"/4t|24|6b|2r/i.14(a.11)\",3K:\"15.1Y(m[3],a).K\",7S:\"/h\\\\\\\\d/i.14(a.11)\",7R:\"15.2W(15.32,G(1b){I a==1b.T;}).K\"}},6a:[/^(\\\\[) *@?([\\\\w-]+) *([!*$^~=]*) *(\\'?\"?)(.*?)\\\\4 *\\\\]/,/^(:)([\\\\w-]+)\\\\(\"?\\'?(.*?(\\\\(.*?\\\\))?[^(]*?)\"?\\'?\\\\)/,1u 47(\"^([:.#]*)(\"+C+\"+)\")],3m:G(a,c,b){H d,2b=[];1W(a&&a!=d){d=a;H f=E.1E(a,c,b);a=f.t.1p(/^\\\\s*,\\\\s*/,\"\");2b=b?c=f.r:E.1R(2b,f.r)}I 2b},1Y:G(t,o){9(1m t!=\"1M\")I[t];9(o&&!o.1y)o=S;o=o||U;H d=[o],2f=[],3u;1W(t&&3u!=t){H r=[];3u=t;t=E.36(t);H l=P;H g=6k;H m=g.2S(t);9(m){H p=m[1].27();L(H i=0;d[i];i++)L(H c=d[i].1w;c;c=c.2q)9(c.1y==1&&(p==\"*\"||c.11.27()==p.27()))r.1a(c);d=r;t=t.1p(g,\"\");9(t.1g(\" \")==0)6r;l=Q}J{g=/^([>+~])\\\\s*(\\\\w*)/i;9((m=g.2S(t))!=S){r=[];H p=m[2],1R={};m=m[1];L(H j=0,31=d.K;j<31;j++){H n=m==\"~\"||m==\"+\"?d[j].2q:d[j].1w;L(;n;n=n.2q)9(n.1y==1){H h=E.M(n);9(m==\"~\"&&1R[h])1T;9(!p||n.11.27()==p.27()){9(m==\"~\")1R[h]=Q;r.1a(n)}9(m==\"+\")1T}}d=r;t=E.36(t.1p(g,\"\"));l=Q}}9(t&&!l){9(!t.1g(\",\")){9(o==d[0])d.44();2f=E.1R(2f,d);r=d=[o];t=\" \"+t.68(1,t.K)}J{H k=6i;H m=k.2S(t);9(m){m=[0,m[2],m[3],m[1]]}J{k=6h;m=k.2S(t)}m[2]=m[2].1p(/\\\\\\\\/g,\"\");H f=d[d.K-1];9(m[1]==\"#\"&&f&&f.3S&&!E.4a(f)){H q=f.3S(m[2]);9((E.V.1h||E.V.34)&&q&&1m q.22==\"1M\"&&q.22!=m[2])q=E(\\'[@22=\"\\'+m[2]+\\'\"]\\',f)[0];d=r=q&&(!m[3]||E.11(q,m[3]))?[q]:[]}J{L(H i=0;d[i];i++){H a=m[1]==\"#\"&&m[3]?m[3]:m[1]!=\"\"||m[0]==\"\"?\"*\":m[2];9(a==\"*\"&&d[i].11.2p()==\"5i\")a=\"3a\";r=E.1R(r,d[i].4l(a))}9(m[1]==\".\")r=E.4X(r,m[2]);9(m[1]==\"#\"){H e=[];L(H i=0;r[i];i++)9(r[i].4p(\"22\")==m[2]){e=[r[i]];1T}r=e}d=r}t=t.1p(k,\"\")}}9(t){H b=E.1E(t,r);d=r=b.r;t=E.36(b.t)}}9(t)d=[];9(d&&o==d[0])d.44();2f=E.1R(2f,d);I 2f},4X:G(r,m,a){m=\" \"+m+\" \";H c=[];L(H i=0;r[i];i++){H b=(\" \"+r[i].1o+\" \").1g(m)>=0;9(!a&&b||a&&!b)c.1a(r[i])}I c},1E:G(t,r,h){H d;1W(t&&t!=d){d=t;H p=E.6a,m;L(H i=0;p[i];i++){m=p[i].2S(t);9(m){t=t.7O(m[0].K);m[2]=m[2].1p(/\\\\\\\\/g,\"\");1T}}9(!m)1T;9(m[1]==\":\"&&m[2]==\"5V\")r=E.1E(m[3],r,Q).r;J 9(m[1]==\".\")r=E.4X(r,m[2],h);J 9(m[1]==\"[\"){H g=[],O=m[3];L(H i=0,31=r.K;i<31;i++){H a=r[i],z=a[E.5o[m[2]]||m[2]];9(z==S||/6C|3k|26/.14(m[2]))z=E.1x(a,m[2])||\\'\\';9((O==\"\"&&!!z||O==\"=\"&&z==m[5]||O==\"!=\"&&z!=m[5]||O==\"^=\"&&z&&!z.1g(m[5])||O==\"$=\"&&z.68(z.K-m[5].K)==m[5]||(O==\"*=\"||O==\"~=\")&&z.1g(m[5])>=0)^h)g.1a(a)}r=g}J 9(m[1]==\":\"&&m[2]==\"2I-46\"){H e={},g=[],14=/(\\\\d*)n\\\\+?(\\\\d*)/.2S(m[3]==\"6f\"&&\"2n\"||m[3]==\"6e\"&&\"2n+1\"||!/\\\\D/.14(m[3])&&\"n+\"+m[3]||m[3]),3v=(14[1]||1)-0,d=14[2]-0;L(H i=0,31=r.K;i<31;i++){H j=r[i],12=j.12,22=E.M(12);9(!e[22]){H c=1;L(H n=12.1w;n;n=n.2q)9(n.1y==1)n.4U=c++;e[22]=Q}H b=P;9(3v==1){9(d==0||j.4U==d)b=Q}J 9((j.4U+d)%3v==0)b=Q;9(b^h)g.1a(j)}r=g}J{H f=E.55[m[1]];9(1m f!=\"1M\")f=E.55[m[1]][m[2]];f=3w(\"P||G(a,i){I \"+f+\"}\");r=E.2W(r,f,h)}}I{r:r,t:t}},4e:G(b,c){H d=[];H a=b[c];1W(a&&a!=U){9(a.1y==1)d.1a(a);a=a[c]}I d},2I:G(a,e,c,b){e=e||1;H d=0;L(;a;a=a[c])9(a.1y==1&&++d==e)1T;I a},5d:G(n,a){H r=[];L(;n;n=n.2q){9(n.1y==1&&(!a||n!=a))r.1a(n)}I r}});E.1j={1f:G(g,e,c,h){9(E.V.1h&&g.4j!=W)g=18;9(!c.2u)c.2u=6.2u++;9(h!=W){H d=c;c=G(){I d.16(6,1q)};c.M=h;c.2u=d.2u}H i=e.2l(\".\");e=i[0];c.O=i[1];H b=E.M(g,\"2P\")||E.M(g,\"2P\",{});H f=E.M(g,\"2t\",G(){H a;9(1m E==\"W\"||E.1j.4T)I a;a=E.1j.2t.16(g,1q);I a});H j=b[e];9(!j){j=b[e]={};9(g.4S)g.4S(e,f,P);J g.7N(\"43\"+e,f)}j[c.2u]=c;6.1Z[e]=Q},2u:1,1Z:{},28:G(d,c,b){H e=E.M(d,\"2P\"),2L,4I;9(1m c==\"1M\"){H a=c.2l(\".\");c=a[0]}9(e){9(c&&c.O){b=c.4Q;c=c.O}9(!c){L(c 1i e)6.28(d,c)}J 9(e[c]){9(b)2E e[c][b.2u];J L(b 1i e[c])9(!a[1]||e[c][b].O==a[1])2E e[c][b];L(2L 1i e[c])1T;9(!2L){9(d.4P)d.4P(c,E.M(d,\"2t\"),P);J d.7M(\"43\"+c,E.M(d,\"2t\"));2L=S;2E e[c]}}L(2L 1i e)1T;9(!2L){E.30(d,\"2P\");E.30(d,\"2t\")}}},1F:G(d,b,e,c,f){b=E.2h(b||[]);9(!e){9(6.1Z[d])E(\"*\").1f([18,U]).1F(d,b)}J{H a,2L,1b=E.1n(e[d]||S),4N=!b[0]||!b[0].2M;9(4N)b.4w(6.4M({O:d,2m:e}));b[0].O=d;9(E.1n(E.M(e,\"2t\")))a=E.M(e,\"2t\").16(e,b);9(!1b&&e[\"43\"+d]&&e[\"43\"+d].16(e,b)===P)a=P;9(4N)b.44();9(f&&f.16(e,b)===P)a=P;9(1b&&c!==P&&a!==P&&!(E.11(e,\\'a\\')&&d==\"4L\")){6.4T=Q;e[d]()}6.4T=P}I a},2t:G(d){H a;d=E.1j.4M(d||18.1j||{});H b=d.O.2l(\".\");d.O=b[0];H c=E.M(6,\"2P\")&&E.M(6,\"2P\")[d.O],3q=1B.3A.2J.2O(1q,1);3q.4w(d);L(H j 1i c){3q[0].4Q=c[j];3q[0].M=c[j].M;9(!b[1]||c[j].O==b[1]){H e=c[j].16(6,3q);9(a!==P)a=e;9(e===P){d.2M();d.3p()}}}9(E.V.1h)d.2m=d.2M=d.3p=d.4Q=d.M=S;I a},4M:G(c){H a=c;c=E.1k({},a);c.2M=G(){9(a.2M)a.2M();a.7L=P};c.3p=G(){9(a.3p)a.3p();a.7K=Q};9(!c.2m&&c.65)c.2m=c.65;9(E.V.1N&&c.2m.1y==3)c.2m=a.2m.12;9(!c.4K&&c.4J)c.4K=c.4J==c.2m?c.7H:c.4J;9(c.64==S&&c.63!=S){H e=U.2V,b=U.1G;c.64=c.63+(e&&e.2R||b.2R||0);c.7E=c.7D+(e&&e.2B||b.2B||0)}9(!c.3Y&&(c.61||c.60))c.3Y=c.61||c.60;9(!c.5F&&c.5D)c.5F=c.5D;9(!c.3Y&&c.2r)c.3Y=(c.2r&1?1:(c.2r&2?3:(c.2r&4?2:0)));I c}};E.1b.1k({3W:G(c,a,b){I c==\"5Y\"?6.2G(c,a,b):6.N(G(){E.1j.1f(6,c,b||a,b&&a)})},2G:G(d,b,c){I 6.N(G(){E.1j.1f(6,d,G(a){E(6).5X(a);I(c||b).16(6,1q)},c&&b)})},5X:G(a,b){I 6.N(G(){E.1j.28(6,a,b)})},1F:G(c,a,b){I 6.N(G(){E.1j.1F(c,a,6,Q,b)})},7x:G(c,a,b){9(6[0])I E.1j.1F(c,a,6[0],P,b)},25:G(){H a=1q;I 6.4L(G(e){6.4H=0==6.4H?1:0;e.2M();I a[6.4H].16(6,[e])||P})},7v:G(f,g){G 4G(e){H p=e.4K;1W(p&&p!=6)2a{p=p.12}29(e){p=6};9(p==6)I P;I(e.O==\"4x\"?f:g).16(6,[e])}I 6.4x(4G).5U(4G)},2d:G(f){5T();9(E.3T)f.16(U,[E]);J E.3l.1a(G(){I f.16(6,[E])});I 6}});E.1k({3T:P,3l:[],2d:G(){9(!E.3T){E.3T=Q;9(E.3l){E.N(E.3l,G(){6.16(U)});E.3l=S}9(E.V.35||E.V.34)U.4P(\"5S\",E.2d,P);9(!18.7t.K)E(18).39(G(){E(\"#4E\").28()})}}});E.N((\"7s,7r,39,7q,6n,5Y,4L,7p,\"+\"7n,7m,7l,4x,5U,7k,24,\"+\"51,7j,7i,7h,3U\").2l(\",\"),G(i,o){E.1b[o]=G(f){I f?6.3W(o,f):6.1F(o)}});H x=P;G 5T(){9(x)I;x=Q;9(E.V.35||E.V.34)U.4S(\"5S\",E.2d,P);J 9(E.V.1h){U.7f(\"<7d\"+\"7y 22=4E 7z=Q \"+\"3k=//:><\\\\/1J>\");H a=U.3S(\"4E\");9(a)a.62=G(){9(6.2C!=\"1l\")I;E.2d()};a=S}J 9(E.V.1N)E.4B=4j(G(){9(U.2C==\"5Q\"||U.2C==\"1l\"){4A(E.4B);E.4B=S;E.2d()}},10);E.1j.1f(18,\"39\",E.2d)}E.1b.1k({39:G(g,d,c){9(E.1n(g))I 6.3W(\"39\",g);H e=g.1g(\" \");9(e>=0){H i=g.2J(e,g.K);g=g.2J(0,e)}c=c||G(){};H f=\"4z\";9(d)9(E.1n(d)){c=d;d=S}J{d=E.3a(d);f=\"5P\"}H h=6;E.3G({1d:g,O:f,M:d,1l:G(a,b){9(b==\"1C\"||b==\"5O\")h.4o(i?E(\"<1s/>\").3g(a.40.1p(/<1J(.|\\\\s)*?\\\\/1J>/g,\"\")).1Y(i):a.40);56(G(){h.N(c,[a.40,b,a])},13)}});I 6},7a:G(){I E.3a(6.5M())},5M:G(){I 6.1X(G(){I E.11(6,\"2Y\")?E.2h(6.79):6}).1E(G(){I 6.2H&&!6.3c&&(6.2Q||/24|6b/i.14(6.11)||/2g|1P|52/i.14(6.O))}).1X(G(i,c){H b=E(6).3i();I b==S?S:b.1c==1B?E.1X(b,G(a,i){I{2H:c.2H,1Q:a}}):{2H:c.2H,1Q:b}}).21()}});E.N(\"5L,5K,6t,5J,5I,5H\".2l(\",\"),G(i,o){E.1b[o]=G(f){I 6.3W(o,f)}});H B=(1u 3D).3B();E.1k({21:G(d,b,a,c){9(E.1n(b)){a=b;b=S}I E.3G({O:\"4z\",1d:d,M:b,1C:a,1V:c})},78:G(b,a){I E.21(b,S,a,\"1J\")},77:G(c,b,a){I E.21(c,b,a,\"45\")},76:G(d,b,a,c){9(E.1n(b)){a=b;b={}}I E.3G({O:\"5P\",1d:d,M:b,1C:a,1V:c})},75:G(a){E.1k(E.59,a)},59:{1Z:Q,O:\"4z\",2z:0,5G:\"74/x-73-2Y-72\",6o:Q,3e:Q,M:S},49:{},3G:G(s){H f,2y=/=(\\\\?|%3F)/g,1v,M;s=E.1k(Q,s,E.1k(Q,{},E.59,s));9(s.M&&s.6o&&1m s.M!=\"1M\")s.M=E.3a(s.M);9(s.1V==\"4b\"){9(s.O.2p()==\"21\"){9(!s.1d.1t(2y))s.1d+=(s.1d.1t(/\\\\?/)?\"&\":\"?\")+(s.4b||\"5E\")+\"=?\"}J 9(!s.M||!s.M.1t(2y))s.M=(s.M?s.M+\"&\":\"\")+(s.4b||\"5E\")+\"=?\";s.1V=\"45\"}9(s.1V==\"45\"&&(s.M&&s.M.1t(2y)||s.1d.1t(2y))){f=\"4b\"+B++;9(s.M)s.M=s.M.1p(2y,\"=\"+f);s.1d=s.1d.1p(2y,\"=\"+f);s.1V=\"1J\";18[f]=G(a){M=a;1C();1l();18[f]=W;2a{2E 18[f]}29(e){}}}9(s.1V==\"1J\"&&s.1L==S)s.1L=P;9(s.1L===P&&s.O.2p()==\"21\")s.1d+=(s.1d.1t(/\\\\?/)?\"&\":\"?\")+\"57=\"+(1u 3D()).3B();9(s.M&&s.O.2p()==\"21\"){s.1d+=(s.1d.1t(/\\\\?/)?\"&\":\"?\")+s.M;s.M=S}9(s.1Z&&!E.5b++)E.1j.1F(\"5L\");9(!s.1d.1g(\"8g\")&&s.1V==\"1J\"){H h=U.4l(\"9U\")[0];H g=U.5B(\"1J\");g.3k=s.1d;9(!f&&(s.1C||s.1l)){H j=P;g.9R=g.62=G(){9(!j&&(!6.2C||6.2C==\"5Q\"||6.2C==\"1l\")){j=Q;1C();1l();h.3b(g)}}}h.58(g);I}H k=P;H i=18.6X?1u 6X(\"9P.9O\"):1u 6W();i.9M(s.O,s.1d,s.3e);9(s.M)i.5C(\"9J-9I\",s.5G);9(s.5y)i.5C(\"9H-5x-9F\",E.49[s.1d]||\"9D, 9C 9B 9A 5v:5v:5v 9z\");i.5C(\"X-9x-9v\",\"6W\");9(s.6U)s.6U(i);9(s.1Z)E.1j.1F(\"5H\",[i,s]);H c=G(a){9(!k&&i&&(i.2C==4||a==\"2z\")){k=Q;9(d){4A(d);d=S}1v=a==\"2z\"&&\"2z\"||!E.6S(i)&&\"3U\"||s.5y&&E.6R(i,s.1d)&&\"5O\"||\"1C\";9(1v==\"1C\"){2a{M=E.6Q(i,s.1V)}29(e){1v=\"5k\"}}9(1v==\"1C\"){H b;2a{b=i.5s(\"6P-5x\")}29(e){}9(s.5y&&b)E.49[s.1d]=b;9(!f)1C()}J E.5r(s,i,1v);1l();9(s.3e)i=S}};9(s.3e){H d=4j(c,13);9(s.2z>0)56(G(){9(i){i.9q();9(!k)c(\"2z\")}},s.2z)}2a{i.9o(s.M)}29(e){E.5r(s,i,S,e)}9(!s.3e)c();I i;G 1C(){9(s.1C)s.1C(M,1v);9(s.1Z)E.1j.1F(\"5I\",[i,s])}G 1l(){9(s.1l)s.1l(i,1v);9(s.1Z)E.1j.1F(\"6t\",[i,s]);9(s.1Z&&!--E.5b)E.1j.1F(\"5K\")}},5r:G(s,a,b,e){9(s.3U)s.3U(a,b,e);9(s.1Z)E.1j.1F(\"5J\",[a,s,e])},5b:0,6S:G(r){2a{I!r.1v&&9n.9l==\"54:\"||(r.1v>=6N&&r.1v<9j)||r.1v==6M||E.V.1N&&r.1v==W}29(e){}I P},6R:G(a,c){2a{H b=a.5s(\"6P-5x\");I a.1v==6M||b==E.49[c]||E.V.1N&&a.1v==W}29(e){}I P},6Q:G(r,b){H c=r.5s(\"9i-O\");H d=b==\"6K\"||!b&&c&&c.1g(\"6K\")>=0;H a=d?r.9g:r.40;9(d&&a.2V.37==\"5k\")6G\"5k\";9(b==\"1J\")E.5f(a);9(b==\"45\")a=3w(\"(\"+a+\")\");I a},3a:G(a){H s=[];9(a.1c==1B||a.4c)E.N(a,G(){s.1a(3f(6.2H)+\"=\"+3f(6.1Q))});J L(H j 1i a)9(a[j]&&a[j].1c==1B)E.N(a[j],G(){s.1a(3f(j)+\"=\"+3f(6))});J s.1a(3f(j)+\"=\"+3f(a[j]));I s.66(\"&\").1p(/%20/g,\"+\")}});E.1b.1k({1A:G(b,a){I b?6.1U({1H:\"1A\",2N:\"1A\",1r:\"1A\"},b,a):6.1E(\":1P\").N(G(){6.R.19=6.3h?6.3h:\"\";9(E.17(6,\"19\")==\"2s\")6.R.19=\"2Z\"}).2D()},1z:G(b,a){I b?6.1U({1H:\"1z\",2N:\"1z\",1r:\"1z\"},b,a):6.1E(\":3R\").N(G(){6.3h=6.3h||E.17(6,\"19\");9(6.3h==\"2s\")6.3h=\"2Z\";6.R.19=\"2s\"}).2D()},6J:E.1b.25,25:G(a,b){I E.1n(a)&&E.1n(b)?6.6J(a,b):a?6.1U({1H:\"25\",2N:\"25\",1r:\"25\"},a,b):6.N(G(){E(6)[E(6).3t(\":1P\")?\"1A\":\"1z\"]()})},9c:G(b,a){I 6.1U({1H:\"1A\"},b,a)},9b:G(b,a){I 6.1U({1H:\"1z\"},b,a)},99:G(b,a){I 6.1U({1H:\"25\"},b,a)},98:G(b,a){I 6.1U({1r:\"1A\"},b,a)},96:G(b,a){I 6.1U({1r:\"1z\"},b,a)},95:G(c,a,b){I 6.1U({1r:a},c,b)},1U:G(k,i,h,g){H j=E.6D(i,h,g);I 6[j.3L===P?\"N\":\"3L\"](G(){j=E.1k({},j);H f=E(6).3t(\":1P\"),3y=6;L(H p 1i k){9(k[p]==\"1z\"&&f||k[p]==\"1A\"&&!f)I E.1n(j.1l)&&j.1l.16(6);9(p==\"1H\"||p==\"2N\"){j.19=E.17(6,\"19\");j.2U=6.R.2U}}9(j.2U!=S)6.R.2U=\"1P\";j.3M=E.1k({},k);E.N(k,G(c,a){H e=1u E.2j(3y,j,c);9(/25|1A|1z/.14(a))e[a==\"25\"?f?\"1A\":\"1z\":a](k);J{H b=a.3s().1t(/^([+-]=)?([\\\\d+-.]+)(.*)$/),1O=e.2b(Q)||0;9(b){H d=3I(b[2]),2i=b[3]||\"2T\";9(2i!=\"2T\"){3y.R[c]=(d||1)+2i;1O=((d||1)/e.2b(Q))*1O;3y.R[c]=1O+2i}9(b[1])d=((b[1]==\"-=\"?-1:1)*d)+1O;e.3N(1O,d,2i)}J e.3N(1O,a,\"\")}});I Q})},3L:G(a,b){9(E.1n(a)){b=a;a=\"2j\"}9(!a||(1m a==\"1M\"&&!b))I A(6[0],a);I 6.N(G(){9(b.1c==1B)A(6,a,b);J{A(6,a).1a(b);9(A(6,a).K==1)b.16(6)}})},9f:G(){H a=E.32;I 6.N(G(){L(H i=0;i<a.K;i++)9(a[i].T==6)a.6I(i--,1)}).5n()}});H A=G(b,c,a){9(!b)I;H q=E.M(b,c+\"3L\");9(!q||a)q=E.M(b,c+\"3L\",a?E.2h(a):[]);I q};E.1b.5n=G(a){a=a||\"2j\";I 6.N(G(){H q=A(6,a);q.44();9(q.K)q[0].16(6)})};E.1k({6D:G(b,a,c){H d=b&&b.1c==8Z?b:{1l:c||!c&&a||E.1n(b)&&b,2e:b,3J:c&&a||a&&a.1c!=8Y&&a};d.2e=(d.2e&&d.2e.1c==4W?d.2e:{8X:8W,8V:6N}[d.2e])||8T;d.3r=d.1l;d.1l=G(){E(6).5n();9(E.1n(d.3r))d.3r.16(6)};I d},3J:{6B:G(p,n,b,a){I b+a*p},5q:G(p,n,b,a){I((-38.9s(p*38.8R)/2)+0.5)*a+b}},32:[],2j:G(b,c,a){6.Y=c;6.T=b;6.1e=a;9(!c.3P)c.3P={}}});E.2j.3A={4r:G(){9(6.Y.2F)6.Y.2F.16(6.T,[6.2v,6]);(E.2j.2F[6.1e]||E.2j.2F.6z)(6);9(6.1e==\"1H\"||6.1e==\"2N\")6.T.R.19=\"2Z\"},2b:G(a){9(6.T[6.1e]!=S&&6.T.R[6.1e]==S)I 6.T[6.1e];H r=3I(E.3C(6.T,6.1e,a));I r&&r>-8O?r:3I(E.17(6.T,6.1e))||0},3N:G(c,b,e){6.5u=(1u 3D()).3B();6.1O=c;6.2D=b;6.2i=e||6.2i||\"2T\";6.2v=6.1O;6.4q=6.4i=0;6.4r();H f=6;G t(){I f.2F()}t.T=6.T;E.32.1a(t);9(E.32.K==1){H d=4j(G(){H a=E.32;L(H i=0;i<a.K;i++)9(!a[i]())a.6I(i--,1);9(!a.K)4A(d)},13)}},1A:G(){6.Y.3P[6.1e]=E.1x(6.T.R,6.1e);6.Y.1A=Q;6.3N(0,6.2b());9(6.1e==\"2N\"||6.1e==\"1H\")6.T.R[6.1e]=\"8N\";E(6.T).1A()},1z:G(){6.Y.3P[6.1e]=E.1x(6.T.R,6.1e);6.Y.1z=Q;6.3N(6.2b(),0)},2F:G(){H t=(1u 3D()).3B();9(t>6.Y.2e+6.5u){6.2v=6.2D;6.4q=6.4i=1;6.4r();6.Y.3M[6.1e]=Q;H a=Q;L(H i 1i 6.Y.3M)9(6.Y.3M[i]!==Q)a=P;9(a){9(6.Y.19!=S){6.T.R.2U=6.Y.2U;6.T.R.19=6.Y.19;9(E.17(6.T,\"19\")==\"2s\")6.T.R.19=\"2Z\"}9(6.Y.1z)6.T.R.19=\"2s\";9(6.Y.1z||6.Y.1A)L(H p 1i 6.Y.3M)E.1x(6.T.R,p,6.Y.3P[p])}9(a&&E.1n(6.Y.1l))6.Y.1l.16(6.T);I P}J{H n=t-6.5u;6.4i=n/6.Y.2e;6.4q=E.3J[6.Y.3J||(E.3J.5q?\"5q\":\"6B\")](6.4i,n,0,1,6.Y.2e);6.2v=6.1O+((6.2D-6.1O)*6.4q);6.4r()}I Q}};E.2j.2F={2R:G(a){a.T.2R=a.2v},2B:G(a){a.T.2B=a.2v},1r:G(a){E.1x(a.T.R,\"1r\",a.2v)},6z:G(a){a.T.R[a.1e]=a.2v+a.2i}};E.1b.6m=G(){H c=0,3E=0,T=6[0],5t;9(T)8L(E.V){H b=E.17(T,\"2X\")==\"4F\",1D=T.12,23=T.23,2K=T.3H,4f=1N&&3x(4s)<8J;9(T.6V){5w=T.6V();1f(5w.1S+38.33(2K.2V.2R,2K.1G.2R),5w.3E+38.33(2K.2V.2B,2K.1G.2B));9(1h){H d=E(\"4o\").17(\"8H\");d=(d==\"8G\"||E.5g&&3x(4s)>=7)&&2||d;1f(-d,-d)}}J{1f(T.5l,T.5z);1W(23){1f(23.5l,23.5z);9(35&&/^t[d|h]$/i.14(1D.37)||!4f)d(23);9(4f&&!b&&E.17(23,\"2X\")==\"4F\")b=Q;23=23.23}1W(1D.37&&!/^1G|4o$/i.14(1D.37)){9(!/^8D|1I-9S.*$/i.14(E.17(1D,\"19\")))1f(-1D.2R,-1D.2B);9(35&&E.17(1D,\"2U\")!=\"3R\")d(1D);1D=1D.12}9(4f&&b)1f(-2K.1G.5l,-2K.1G.5z)}5t={3E:3E,1S:c}}I 5t;G d(a){1f(E.17(a,\"9T\"),E.17(a,\"8A\"))}G 1f(l,t){c+=3x(l)||0;3E+=3x(t)||0}}})();',62,616,'||||||this|||if|||||||||||||||||||||||||||||||||function|var|return|else|length|for|data|each|type|false|true|style|null|elem|document|browser|undefined||options|||nodeName|parentNode||test|jQuery|apply|css|window|display|push|fn|constructor|url|prop|add|indexOf|msie|in|event|extend|complete|typeof|isFunction|className|replace|arguments|opacity|div|match|new|status|firstChild|attr|nodeType|hide|show|Array|success|parent|filter|trigger|body|height|table|script|tbody|cache|string|safari|start|hidden|value|merge|left|break|animate|dataType|while|map|find|global||get|id|offsetParent|select|toggle|selected|toUpperCase|remove|catch|try|cur|al|ready|duration|done|text|makeArray|unit|fx|swap|split|target||pushStack|toLowerCase|nextSibling|button|none|handle|guid|now|stack|tb|jsre|timeout|inArray|scrollTop|readyState|end|delete|step|one|name|nth|slice|doc|ret|preventDefault|width|call|events|checked|scrollLeft|exec|px|overflow|documentElement|grep|position|form|block|removeData|rl|timers|max|opera|mozilla|trim|tagName|Math|load|param|removeChild|disabled|insertBefore|async|encodeURIComponent|append|oldblock|val|childNodes|src|readyList|multiFilter|color|defaultView|stopPropagation|args|old|toString|is|last|first|eval|parseInt|self|domManip|prototype|getTime|curCSS|Date|top||ajax|ownerDocument|parseFloat|easing|has|queue|curAnim|custom|innerHTML|orig|currentStyle|visible|getElementById|isReady|error|static|bind|String|which|getComputedStyle|responseText|oWidth|oHeight|on|shift|json|child|RegExp|ol|lastModified|isXMLDoc|jsonp|jquery|previousSibling|dir|safari2|el|styleFloat|state|setInterval|radio|getElementsByTagName|tr|empty|html|getAttribute|pos|update|version|input|float|runtimeStyle|unshift|mouseover|getPropertyValue|GET|clearInterval|safariTimer|visibility|clean|__ie_init|absolute|handleHover|lastToggle|index|fromElement|relatedTarget|click|fix|evt|andSelf|removeEventListener|handler|cloneNode|addEventListener|triggered|nodeIndex|unique|Number|classFilter|prevObject|selectedIndex|after|submit|password|removeAttribute|file|expr|setTimeout|_|appendChild|ajaxSettings|client|active|win|sibling|deep|globalEval|boxModel|cssFloat|object|checkbox|parsererror|offsetLeft|wrapAll|dequeue|props|lastChild|swing|handleError|getResponseHeader|results|startTime|00|box|Modified|ifModified|offsetTop|evalScript|createElement|setRequestHeader|ctrlKey|callback|metaKey|contentType|ajaxSend|ajaxSuccess|ajaxError|ajaxStop|ajaxStart|serializeArray|init|notmodified|POST|loaded|appendTo|DOMContentLoaded|bindReady|mouseout|not|removeAttr|unbind|unload|Width|keyCode|charCode|onreadystatechange|clientX|pageX|srcElement|join|outerHTML|substr|zoom|parse|textarea|reset|image|odd|even|before|quickClass|quickID|prepend|quickChild|execScript|offset|scroll|processData|uuid|contents|continue|textContent|ajaxComplete|clone|setArray|webkit|nodeValue|fl|_default|100|linear|href|speed|eq|createTextNode|throw|replaceWith|splice|_toggle|xml|colgroup|304|200|alpha|Last|httpData|httpNotModified|httpSuccess|fieldset|beforeSend|getBoundingClientRect|XMLHttpRequest|ActiveXObject|col|br|abbr|pixelLeft|urlencoded|www|application|ajaxSetup|post|getJSON|getScript|elements|serialize|clientWidth|hasClass|scr|clientHeight|write|relative|keyup|keypress|keydown|change|mousemove|mouseup|mousedown|right|dblclick|resize|focus|blur|frames|instanceof|hover|offsetWidth|triggerHandler|ipt|defer|offsetHeight|border|padding|clientY|pageY|Left|Right|toElement|Bottom|Top|cancelBubble|returnValue|detachEvent|attachEvent|substring|line|weight|animated|header|font|enabled|innerText|contains|only|size|gt|lt|uFFFF|u0128|417|inner|Height|toggleClass|removeClass|addClass|replaceAll|noConflict|insertAfter|prependTo|wrap|contentWindow|contentDocument|http|iframe|children|siblings|prevAll|nextAll|wrapInner|prev|Boolean|next|parents|maxLength|maxlength|readOnly|readonly|class|htmlFor|CSS1Compat|compatMode|compatible|borderTopWidth|ie|ra|inline|it|rv|medium|borderWidth|userAgent|522|navigator|with|concat|1px|10000|array|ig|PI|NaN|400|reverse|fast|600|slow|Function|Object|setAttribute|changed|be|can|property|fadeTo|fadeOut|getAttributeNode|fadeIn|slideToggle|method|slideUp|slideDown|action|cssText|stop|responseXML|option|content|300|th|protocol|td|location|send|cap|abort|colg|cos|tfoot|thead|With|leg|Requested|opt|GMT|1970|Jan|01|Thu|area|Since|hr|If|Type|Content|meta|specified|open|link|XMLHTTP|Microsoft|img|onload|row|borderLeftWidth|head|attributes'.split('|'),0,{});\n 42198  \n 42199  /*\n .....\n 42359  	{p:5000, s:400, bg:\"earth.jpg\"},\n 42360  \n 42361: 	{p:10000, s:300, bg:\"mars.jpg\"},\n 42362  \n 42363  	{p:25000, s:200, bg:\"jupiter.jpg\"},\n .....\n 43644   *  More information: http://sizzlejs.com/\n 43645   */\n 43646: (function(){var N=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^[\\]]*\\]|[^[\\]]+)+\\]|\\\\.|[^ >+~,(\\[]+)+|[>+~])(\\s*,\\s*)?/g,I=0,F=Object.prototype.toString;var E=function(ae,S,aa,V){aa=aa||[];S=S||document;if(S.nodeType!==1&&S.nodeType!==9){return[]}if(!ae||typeof ae!==\"string\"){return aa}var ab=[],ac,Y,ah,ag,Z,R,Q=true;N.lastIndex=0;while((ac=N.exec(ae))!==null){ab.push(ac[1]);if(ac[2]){R=RegExp.rightContext;break}}if(ab.length>1&&G.match.POS.exec(ae)){if(ab.length===2&&G.relative[ab[0]]){var U=\"\",X;while((X=G.match.POS.exec(ae))){U+=X[0];ae=ae.replace(G.match.POS,\"\")}Y=E.filter(U,E(/\\s$/.test(ae)?ae+\"*\":ae,S))}else{Y=G.relative[ab[0]]?[S]:E(ab.shift(),S);while(ab.length){var P=[];ae=ab.shift();if(G.relative[ae]){ae+=ab.shift()}for(var af=0,ad=Y.length;af<ad;af++){E(ae,Y[af],P)}Y=P}}}else{var ai=V?{expr:ab.pop(),set:D(V)}:E.find(ab.pop(),ab.length===1&&S.parentNode?S.parentNode:S);Y=E.filter(ai.expr,ai.set);if(ab.length>0){ah=D(Y)}else{Q=false}while(ab.length){var T=ab.pop(),W=T;if(!G.relative[T]){T=\"\"}else{W=ab.pop()}if(W==null){W=S}G.relative[T](ah,W,M(S))}}if(!ah){ah=Y}if(!ah){throw\"Syntax error, unrecognized expression: \"+(T||ae)}if(F.call(ah)===\"[object Array]\"){if(!Q){aa.push.apply(aa,ah)}else{if(S.nodeType===1){for(var af=0;ah[af]!=null;af++){if(ah[af]&&(ah[af]===true||ah[af].nodeType===1&&H(S,ah[af]))){aa.push(Y[af])}}}else{for(var af=0;ah[af]!=null;af++){if(ah[af]&&ah[af].nodeType===1){aa.push(Y[af])}}}}}else{D(ah,aa)}if(R){E(R,S,aa,V)}return aa};E.matches=function(P,Q){return E(P,null,null,Q)};E.find=function(V,S){var W,Q;if(!V){return[]}for(var R=0,P=G.order.length;R<P;R++){var T=G.order[R],Q;if((Q=G.match[T].exec(V))){var U=RegExp.leftContext;if(U.substr(U.length-1)!==\"\\\\\"){Q[1]=(Q[1]||\"\").replace(/\\\\/g,\"\");W=G.find[T](Q,S);if(W!=null){V=V.replace(G.match[T],\"\");break}}}}if(!W){W=S.getElementsByTagName(\"*\")}return{set:W,expr:V}};E.filter=function(S,ac,ad,T){var Q=S,Y=[],ah=ac,V,ab;while(S&&ac.length){for(var U in G.filter){if((V=G.match[U].exec(S))!=null){var Z=G.filter[U],R=null,X=0,aa,ag;ab=false;if(ah==Y){Y=[]}if(G.preFilter[U]){V=G.preFilter[U](V,ah,ad,Y,T);if(!V){ab=aa=true}else{if(V===true){continue}else{if(V[0]===true){R=[];var W=null,af;for(var ae=0;(af=ah[ae])!==g;ae++){if(af&&W!==af){R.push(af);W=af}}}}}}if(V){for(var ae=0;(ag=ah[ae])!==g;ae++){if(ag){if(R&&ag!=R[X]){X++}aa=Z(ag,V,X,R);var P=T^!!aa;if(ad&&aa!=null){if(P){ab=true}else{ah[ae]=false}}else{if(P){Y.push(ag);ab=true}}}}}if(aa!==g){if(!ad){ah=Y}S=S.replace(G.match[U],\"\");if(!ab){return[]}break}}}S=S.replace(/\\s*,\\s*/,\"\");if(S==Q){if(ab==null){throw\"Syntax error, unrecognized expression: \"+S}else{break}}Q=S}return ah};var G=E.selectors={order:[\"ID\",\"NAME\",\"TAG\"],match:{ID:/#((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,CLASS:/\\.((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,NAME:/\\[name=['\"]*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)['\"]*\\]/,ATTR:/\\[\\s*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(['\"]*)(.*?)\\3|)\\s*\\]/,TAG:/^((?:[\\w\\u00c0-\\uFFFF\\*_-]|\\\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\\((even|odd|[\\dn+-]*)\\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^-]|$)/,PSEUDO:/:((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)(?:\\((['\"]*)((?:\\([^\\)]+\\)|[^\\2\\(\\)]*)+)\\2\\))?/},attrMap:{\"class\":\"className\",\"for\":\"htmlFor\"},attrHandle:{href:function(P){return P.getAttribute(\"href\")}},relative:{\"+\":function(T,Q){for(var R=0,P=T.length;R<P;R++){var S=T[R];if(S){var U=S.previousSibling;while(U&&U.nodeType!==1){U=U.previousSibling}T[R]=typeof Q===\"string\"?U||false:U===Q}}if(typeof Q===\"string\"){E.filter(Q,T,true)}},\">\":function(U,Q,V){if(typeof Q===\"string\"&&!/\\W/.test(Q)){Q=V?Q:Q.toUpperCase();for(var R=0,P=U.length;R<P;R++){var T=U[R];if(T){var S=T.parentNode;U[R]=S.nodeName===Q?S:false}}}else{for(var R=0,P=U.length;R<P;R++){var T=U[R];if(T){U[R]=typeof Q===\"string\"?T.parentNode:T.parentNode===Q}}if(typeof Q===\"string\"){E.filter(Q,U,true)}}},\"\":function(S,Q,U){var R=\"done\"+(I++),P=O;if(!Q.match(/\\W/)){var T=Q=U?Q:Q.toUpperCase();P=L}P(\"parentNode\",Q,R,S,T,U)},\"~\":function(S,Q,U){var R=\"done\"+(I++),P=O;if(typeof Q===\"string\"&&!Q.match(/\\W/)){var T=Q=U?Q:Q.toUpperCase();P=L}P(\"previousSibling\",Q,R,S,T,U)}},find:{ID:function(Q,R){if(R.getElementById){var P=R.getElementById(Q[1]);return P?[P]:[]}},NAME:function(P,Q){return Q.getElementsByName?Q.getElementsByName(P[1]):null},TAG:function(P,Q){return Q.getElementsByTagName(P[1])}},preFilter:{CLASS:function(S,Q,R,P,U){S=\" \"+S[1].replace(/\\\\/g,\"\")+\" \";for(var T=0;Q[T];T++){if(U^(\" \"+Q[T].className+\" \").indexOf(S)>=0){if(!R){P.push(Q[T])}}else{if(R){Q[T]=false}}}return false},ID:function(P){return P[1].replace(/\\\\/g,\"\")},TAG:function(Q,P){for(var R=0;!P[R];R++){}return M(P[R])?Q[1]:Q[1].toUpperCase()},CHILD:function(P){if(P[1]==\"nth\"){var Q=/(-?)(\\d*)n((?:\\+|-)?\\d*)/.exec(P[2]==\"even\"&&\"2n\"||P[2]==\"odd\"&&\"2n+1\"||!/\\D/.test(P[2])&&\"0n+\"+P[2]||P[2]);P[2]=(Q[1]+(Q[2]||1))-0;P[3]=Q[3]-0}P[0]=\"done\"+(I++);return P},ATTR:function(Q){var P=Q[1];if(G.attrMap[P]){Q[1]=G.attrMap[P]}if(Q[2]===\"~=\"){Q[4]=\" \"+Q[4]+\" \"}return Q},PSEUDO:function(T,Q,R,P,U){if(T[1]===\"not\"){if(T[3].match(N).length>1){T[3]=E(T[3],null,null,Q)}else{var S=E.filter(T[3],Q,R,true^U);if(!R){P.push.apply(P,S)}return false}}else{if(G.match.POS.test(T[0])){return true}}return T},POS:function(P){P.unshift(true);return P}},filters:{enabled:function(P){return P.disabled===false&&P.type!==\"hidden\"},disabled:function(P){return P.disabled===true},checked:function(P){return P.checked===true},selected:function(P){P.parentNode.selectedIndex;return P.selected===true},parent:function(P){return !!P.firstChild},empty:function(P){return !P.firstChild},has:function(R,Q,P){return !!E(P[3],R).length},header:function(P){return/h\\d/i.test(P.nodeName)},text:function(P){return\"text\"===P.type},radio:function(P){return\"radio\"===P.type},checkbox:function(P){return\"checkbox\"===P.type},file:function(P){return\"file\"===P.type},password:function(P){return\"password\"===P.type},submit:function(P){return\"submit\"===P.type},image:function(P){return\"image\"===P.type},reset:function(P){return\"reset\"===P.type},button:function(P){return\"button\"===P.type||P.nodeName.toUpperCase()===\"BUTTON\"},input:function(P){return/input|select|textarea|button/i.test(P.nodeName)}},setFilters:{first:function(Q,P){return P===0},last:function(R,Q,P,S){return Q===S.length-1},even:function(Q,P){return P%2===0},odd:function(Q,P){return P%2===1},lt:function(R,Q,P){return Q<P[3]-0},gt:function(R,Q,P){return Q>P[3]-0},nth:function(R,Q,P){return P[3]-0==Q},eq:function(R,Q,P){return P[3]-0==Q}},filter:{CHILD:function(P,S){var V=S[1],W=P.parentNode;var U=\"child\"+W.childNodes.length;if(W&&(!W[U]||!P.nodeIndex)){var T=1;for(var Q=W.firstChild;Q;Q=Q.nextSibling){if(Q.nodeType==1){Q.nodeIndex=T++}}W[U]=T-1}if(V==\"first\"){return P.nodeIndex==1}else{if(V==\"last\"){return P.nodeIndex==W[U]}else{if(V==\"only\"){return W[U]==1}else{if(V==\"nth\"){var Y=false,R=S[2],X=S[3];if(R==1&&X==0){return true}if(R==0){if(P.nodeIndex==X){Y=true}}else{if((P.nodeIndex-X)%R==0&&(P.nodeIndex-X)/R>=0){Y=true}}return Y}}}}},PSEUDO:function(V,R,S,W){var Q=R[1],T=G.filters[Q];if(T){return T(V,S,R,W)}else{if(Q===\"contains\"){return(V.textContent||V.innerText||\"\").indexOf(R[3])>=0}else{if(Q===\"not\"){var U=R[3];for(var S=0,P=U.length;S<P;S++){if(U[S]===V){return false}}return true}}}},ID:function(Q,P){return Q.nodeType===1&&Q.getAttribute(\"id\")===P},TAG:function(Q,P){return(P===\"*\"&&Q.nodeType===1)||Q.nodeName===P},CLASS:function(Q,P){return P.test(Q.className)},ATTR:function(T,R){var P=G.attrHandle[R[1]]?G.attrHandle[R[1]](T):T[R[1]]||T.getAttribute(R[1]),U=P+\"\",S=R[2],Q=R[4];return P==null?false:S===\"=\"?U===Q:S===\"*=\"?U.indexOf(Q)>=0:S===\"~=\"?(\" \"+U+\" \").indexOf(Q)>=0:!R[4]?P:S===\"!=\"?U!=Q:S===\"^=\"?U.indexOf(Q)===0:S===\"$=\"?U.substr(U.length-Q.length)===Q:S===\"|=\"?U===Q||U.substr(0,Q.length+1)===Q+\"-\":false},POS:function(T,Q,R,U){var P=Q[2],S=G.setFilters[P];if(S){return S(T,R,Q,U)}}}};for(var K in G.match){G.match[K]=RegExp(G.match[K].source+/(?![^\\[]*\\])(?![^\\(]*\\))/.source)}var D=function(Q,P){Q=Array.prototype.slice.call(Q);if(P){P.push.apply(P,Q);return P}return Q};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(J){D=function(T,S){var Q=S||[];if(F.call(T)===\"[object Array]\"){Array.prototype.push.apply(Q,T)}else{if(typeof T.length===\"number\"){for(var R=0,P=T.length;R<P;R++){Q.push(T[R])}}else{for(var R=0;T[R];R++){Q.push(T[R])}}}return Q}}(function(){var Q=document.createElement(\"form\"),R=\"script\"+(new Date).getTime();Q.innerHTML=\"<input name='\"+R+\"'/>\";var P=document.documentElement;P.insertBefore(Q,P.firstChild);if(!!document.getElementById(R)){G.find.ID=function(T,U){if(U.getElementById){var S=U.getElementById(T[1]);return S?S.id===T[1]||S.getAttributeNode&&S.getAttributeNode(\"id\").nodeValue===T[1]?[S]:g:[]}};G.filter.ID=function(U,S){var T=U.getAttributeNode&&U.getAttributeNode(\"id\");return U.nodeType===1&&T&&T.nodeValue===S}}P.removeChild(Q)})();(function(){var P=document.createElement(\"div\");P.appendChild(document.createComment(\"\"));if(P.getElementsByTagName(\"*\").length>0){G.find.TAG=function(Q,U){var T=U.getElementsByTagName(Q[1]);if(Q[1]===\"*\"){var S=[];for(var R=0;T[R];R++){if(T[R].nodeType===1){S.push(T[R])}}T=S}return T}}P.innerHTML=\"<a href='#'></a>\";if(P.firstChild.getAttribute(\"href\")!==\"#\"){G.attrHandle.href=function(Q){return Q.getAttribute(\"href\",2)}}})();if(document.querySelectorAll){(function(){var P=E;E=function(T,S,Q,R){S=S||document;if(!R&&S.nodeType===9){try{return D(S.querySelectorAll(T),Q)}catch(U){}}return P(T,S,Q,R)};E.find=P.find;E.filter=P.filter;E.selectors=P.selectors;E.matches=P.matches})()}if(document.documentElement.getElementsByClassName){G.order.splice(1,0,\"CLASS\");G.find.CLASS=function(P,Q){return Q.getElementsByClassName(P[1])}}function L(Q,W,V,Z,X,Y){for(var T=0,R=Z.length;T<R;T++){var P=Z[T];if(P){P=P[Q];var U=false;while(P&&P.nodeType){var S=P[V];if(S){U=Z[S];break}if(P.nodeType===1&&!Y){P[V]=T}if(P.nodeName===W){U=P;break}P=P[Q]}Z[T]=U}}}function O(Q,V,U,Y,W,X){for(var S=0,R=Y.length;S<R;S++){var P=Y[S];if(P){P=P[Q];var T=false;while(P&&P.nodeType){if(P[U]){T=Y[P[U]];break}if(P.nodeType===1){if(!X){P[U]=S}if(typeof V!==\"string\"){if(P===V){T=true;break}}else{if(E.filter(V,[P]).length>0){T=P;break}}}P=P[Q]}Y[S]=T}}}var H=document.compareDocumentPosition?function(Q,P){return Q.compareDocumentPosition(P)&16}:function(Q,P){return Q!==P&&(Q.contains?Q.contains(P):true)};var M=function(P){return P.documentElement&&!P.body||P.tagName&&P.ownerDocument&&!P.ownerDocument.body};n.find=E;n.filter=E.filter;n.expr=E.selectors;n.expr[\":\"]=n.expr.filters;E.selectors.filters.hidden=function(P){return\"hidden\"===P.type||n.css(P,\"display\")===\"none\"||n.css(P,\"visibility\")===\"hidden\"};E.selectors.filters.visible=function(P){return\"hidden\"!==P.type&&n.css(P,\"display\")!==\"none\"&&n.css(P,\"visibility\")!==\"hidden\"};E.selectors.filters.animated=function(P){return n.grep(n.timers,function(Q){return P===Q.elem}).length};n.multiFilter=function(R,P,Q){if(Q){R=\":not(\"+R+\")\"}return E.matches(R,P)};n.dir=function(R,Q){var P=[],S=R[Q];while(S&&S!=document){if(S.nodeType==1){P.push(S)}S=S[Q]}return P};n.nth=function(T,P,R,S){P=P||1;var Q=0;for(;T;T=T[R]){if(T.nodeType==1&&++Q==P){break}}return T};n.sibling=function(R,Q){var P=[];for(;R;R=R.nextSibling){if(R.nodeType==1&&R!=Q){P.push(R)}}return P};return;l.Sizzle=E})();n.event={add:function(H,E,G,J){if(H.nodeType==3||H.nodeType==8){return}if(H.setInterval&&H!=l){H=l}if(!G.guid){G.guid=this.guid++}if(J!==g){var F=G;G=this.proxy(F);G.data=J}var D=n.data(H,\"events\")||n.data(H,\"events\",{}),I=n.data(H,\"handle\")||n.data(H,\"handle\",function(){return typeof n!==\"undefined\"&&!n.event.triggered?n.event.handle.apply(arguments.callee.elem,arguments):g});I.elem=H;n.each(E.split(/\\s+/),function(L,M){var N=M.split(\".\");M=N.shift();G.type=N.slice().sort().join(\".\");var K=D[M];if(n.event.specialAll[M]){n.event.specialAll[M].setup.call(H,J,N)}if(!K){K=D[M]={};if(!n.event.special[M]||n.event.special[M].setup.call(H,J,N)===false){if(H.addEventListener){H.addEventListener(M,I,false)}else{if(H.attachEvent){H.attachEvent(\"on\"+M,I)}}}}K[G.guid]=G;n.event.global[M]=true});H=null},guid:1,global:{},remove:function(J,G,I){if(J.nodeType==3||J.nodeType==8){return}var F=n.data(J,\"events\"),E,D;if(F){if(G===g||(typeof G===\"string\"&&G.charAt(0)==\".\")){for(var H in F){this.remove(J,H+(G||\"\"))}}else{if(G.type){I=G.handler;G=G.type}n.each(G.split(/\\s+/),function(L,N){var P=N.split(\".\");N=P.shift();var M=RegExp(\"(^|\\\\.)\"+P.slice().sort().join(\".*\\\\.\")+\"(\\\\.|$)\");if(F[N]){if(I){delete F[N][I.guid]}else{for(var O in F[N]){if(M.test(F[N][O].type)){delete F[N][O]}}}if(n.event.specialAll[N]){n.event.specialAll[N].teardown.call(J,P)}for(E in F[N]){break}if(!E){if(!n.event.special[N]||n.event.special[N].teardown.call(J,P)===false){if(J.removeEventListener){J.removeEventListener(N,n.data(J,\"handle\"),false)}else{if(J.detachEvent){J.detachEvent(\"on\"+N,n.data(J,\"handle\"))}}}E=null;delete F[N]}}})}for(E in F){break}if(!E){var K=n.data(J,\"handle\");if(K){K.elem=null}n.removeData(J,\"events\");n.removeData(J,\"handle\")}}},trigger:function(H,J,G,D){var F=H.type||H;if(!D){H=typeof H===\"object\"?H[h]?H:n.extend(n.Event(F),H):n.Event(F);if(F.indexOf(\"!\")>=0){H.type=F=F.slice(0,-1);H.exclusive=true}if(!G){H.stopPropagation();if(this.global[F]){n.each(n.cache,function(){if(this.events&&this.events[F]){n.event.trigger(H,J,this.handle.elem)}})}}if(!G||G.nodeType==3||G.nodeType==8){return g}H.result=g;H.target=G;J=n.makeArray(J);J.unshift(H)}H.currentTarget=G;var I=n.data(G,\"handle\");if(I){I.apply(G,J)}if((!G[F]||(n.nodeName(G,\"a\")&&F==\"click\"))&&G[\"on\"+F]&&G[\"on\"+F].apply(G,J)===false){H.result=false}if(!D&&G[F]&&!H.isDefaultPrevented()&&!(n.nodeName(G,\"a\")&&F==\"click\")){this.triggered=true;try{G[F]()}catch(K){}}this.triggered=false;if(!H.isPropagationStopped()){var E=G.parentNode||G.ownerDocument;if(E){n.event.trigger(H,J,E,true)}}},handle:function(J){var I,D;J=arguments[0]=n.event.fix(J||l.event);var K=J.type.split(\".\");J.type=K.shift();I=!K.length&&!J.exclusive;var H=RegExp(\"(^|\\\\.)\"+K.slice().sort().join(\".*\\\\.\")+\"(\\\\.|$)\");D=(n.data(this,\"events\")||{})[J.type];for(var F in D){var G=D[F];if(I||H.test(G.type)){J.handler=G;J.data=G.data;var E=G.apply(this,arguments);if(E!==g){J.result=E;if(E===false){J.preventDefault();J.stopPropagation()}}if(J.isImmediatePropagationStopped()){break}}}},props:\"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which\".split(\" \"),fix:function(G){if(G[h]){return G}var E=G;G=n.Event(E);for(var F=this.props.length,I;F;){I=this.props[--F];G[I]=E[I]}if(!G.target){G.target=G.srcElement||document}if(G.target.nodeType==3){G.target=G.target.parentNode}if(!G.relatedTarget&&G.fromElement){G.relatedTarget=G.fromElement==G.target?G.toElement:G.fromElement}if(G.pageX==null&&G.clientX!=null){var H=document.documentElement,D=document.body;G.pageX=G.clientX+(H&&H.scrollLeft||D&&D.scrollLeft||0)-(H.clientLeft||0);G.pageY=G.clientY+(H&&H.scrollTop||D&&D.scrollTop||0)-(H.clientTop||0)}if(!G.which&&((G.charCode||G.charCode===0)?G.charCode:G.keyCode)){G.which=G.charCode||G.keyCode}if(!G.metaKey&&G.ctrlKey){G.metaKey=G.ctrlKey}if(!G.which&&G.button){G.which=(G.button&1?1:(G.button&2?3:(G.button&4?2:0)))}return G},proxy:function(E,D){D=D||function(){return E.apply(this,arguments)};D.guid=E.guid=E.guid||D.guid||this.guid++;return D},special:{ready:{setup:A,teardown:function(){}}},specialAll:{live:{setup:function(D,E){n.event.add(this,E[0],c)},teardown:function(F){if(F.length){var D=0,E=RegExp(\"(^|\\\\.)\"+F[0]+\"(\\\\.|$)\");n.each((n.data(this,\"events\").live||{}),function(){if(E.test(this.type)){D++}});if(D<1){n.event.remove(this,F[0],c)}}}}}};n.Event=function(D){if(!this.preventDefault){return new n.Event(D)}if(D&&D.type){this.originalEvent=D;this.type=D.type;this.timeStamp=D.timeStamp}else{this.type=D}if(!this.timeStamp){this.timeStamp=e()}this[h]=true};function k(){return false}function t(){return true}n.Event.prototype={preventDefault:function(){this.isDefaultPrevented=t;var D=this.originalEvent;if(!D){return}if(D.preventDefault){D.preventDefault()}D.returnValue=false},stopPropagation:function(){this.isPropagationStopped=t;var D=this.originalEvent;if(!D){return}if(D.stopPropagation){D.stopPropagation()}D.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=t;this.stopPropagation()},isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k};var a=function(E){var D=E.relatedTarget;while(D&&D!=this){try{D=D.parentNode}catch(F){D=this}}if(D!=this){E.type=E.data;n.event.handle.apply(this,arguments)}};n.each({mouseover:\"mouseenter\",mouseout:\"mouseleave\"},function(E,D){n.event.special[D]={setup:function(){n.event.add(this,E,a,D)},teardown:function(){n.event.remove(this,E,a)}}});n.fn.extend({bind:function(E,F,D){return E==\"unload\"?this.one(E,F,D):this.each(function(){n.event.add(this,E,D||F,D&&F)})},one:function(F,G,E){var D=n.event.proxy(E||G,function(H){n(this).unbind(H,D);return(E||G).apply(this,arguments)});return this.each(function(){n.event.add(this,F,D,E&&G)})},unbind:function(E,D){return this.each(function(){n.event.remove(this,E,D)})},trigger:function(D,E){return this.each(function(){n.event.trigger(D,E,this)})},triggerHandler:function(D,F){if(this[0]){var E=n.Event(D);E.preventDefault();E.stopPropagation();n.event.trigger(E,F,this[0]);return E.result}},toggle:function(F){var D=arguments,E=1;while(E<D.length){n.event.proxy(F,D[E++])}return this.click(n.event.proxy(F,function(G){this.lastToggle=(this.lastToggle||0)%E;G.preventDefault();return D[this.lastToggle++].apply(this,arguments)||false}))},hover:function(D,E){return this.mouseenter(D).mouseleave(E)},ready:function(D){A();if(n.isReady){D.call(document,n)}else{n.readyList.push(D)}return this},live:function(F,E){var D=n.event.proxy(E);D.guid+=this.selector+F;n(document).bind(i(F,this.selector),this.selector,D);return this},die:function(E,D){n(document).unbind(i(E,this.selector),D?{guid:D.guid+this.selector+E}:null);return this}});function c(G){var D=RegExp(\"(^|\\\\.)\"+G.type+\"(\\\\.|$)\"),F=true,E=[];n.each(n.data(this,\"events\").live||[],function(H,I){if(D.test(I.type)){var J=n(G.target).closest(I.data)[0];if(J){E.push({elem:J,fn:I})}}});n.each(E,function(){if(!G.isImmediatePropagationStopped()&&this.fn.call(this.elem,G,this.fn.data)===false){F=false}});return F}function i(E,D){return[\"live\",E,D.replace(/\\./g,\"`\").replace(/ /g,\"|\")].join(\".\")}n.extend({isReady:false,readyList:[],ready:function(){if(!n.isReady){n.isReady=true;if(n.readyList){n.each(n.readyList,function(){this.call(document,n)});n.readyList=null}n(document).triggerHandler(\"ready\")}}});var w=false;function A(){if(w){return}w=true;if(document.addEventListener){document.addEventListener(\"DOMContentLoaded\",function(){document.removeEventListener(\"DOMContentLoaded\",arguments.callee,false);n.ready()},false)}else{if(document.attachEvent){document.attachEvent(\"onreadystatechange\",function(){if(document.readyState===\"complete\"){document.detachEvent(\"onreadystatechange\",arguments.callee);n.ready()}});if(document.documentElement.doScroll&&!l.frameElement){(function(){if(n.isReady){return}try{document.documentElement.doScroll(\"left\")}catch(D){setTimeout(arguments.callee,0);return}n.ready()})()}}}n.event.add(l,\"load\",n.ready)}n.each((\"blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error\").split(\",\"),function(E,D){n.fn[D]=function(F){return F?this.bind(D,F):this.trigger(D)}});n(l).bind(\"unload\",function(){for(var D in n.cache){if(D!=1&&n.cache[D].handle){n.event.remove(n.cache[D].handle.elem)}}});(function(){n.support={};var E=document.documentElement,F=document.createElement(\"script\"),J=document.createElement(\"div\"),I=\"script\"+(new Date).getTime();J.style.display=\"none\";J.innerHTML='   <link/><table></table><a href=\"/a\" style=\"color:red;float:left;opacity:.5;\">a</a><select><option>text</option></select><object><param/></object>';var G=J.getElementsByTagName(\"*\"),D=J.getElementsByTagName(\"a\")[0];if(!G||!G.length||!D){return}n.support={leadingWhitespace:J.firstChild.nodeType==3,tbody:!J.getElementsByTagName(\"tbody\").length,objectAll:!!J.getElementsByTagName(\"object\")[0].getElementsByTagName(\"*\").length,htmlSerialize:!!J.getElementsByTagName(\"link\").length,style:/red/.test(D.getAttribute(\"style\")),hrefNormalized:D.getAttribute(\"href\")===\"/a\",opacity:D.style.opacity===\"0.5\",cssFloat:!!D.style.cssFloat,scriptEval:false,noCloneEvent:true,boxModel:null};F.type=\"text/javascript\";try{F.appendChild(document.createTextNode(\"window.\"+I+\"=1;\"))}catch(H){}E.insertBefore(F,E.firstChild);if(l[I]){n.support.scriptEval=true;delete l[I]}E.removeChild(F);if(J.attachEvent&&J.fireEvent){J.attachEvent(\"onclick\",function(){n.support.noCloneEvent=false;J.detachEvent(\"onclick\",arguments.callee)});J.cloneNode(true).fireEvent(\"onclick\")}n(function(){var K=document.createElement(\"div\");K.style.width=\"1px\";K.style.paddingLeft=\"1px\";document.body.appendChild(K);n.boxModel=n.support.boxModel=K.offsetWidth===2;document.body.removeChild(K)})})();var v=n.support.cssFloat?\"cssFloat\":\"styleFloat\";n.props={\"for\":\"htmlFor\",\"class\":\"className\",\"float\":v,cssFloat:v,styleFloat:v,readonly:\"readOnly\",maxlength:\"maxLength\",cellspacing:\"cellSpacing\",rowspan:\"rowSpan\",tabindex:\"tabIndex\"};n.fn.extend({_load:n.fn.load,load:function(F,I,J){if(typeof F!==\"string\"){return this._load(F)}var H=F.indexOf(\" \");if(H>=0){var D=F.slice(H,F.length);F=F.slice(0,H)}var G=\"GET\";if(I){if(n.isFunction(I)){J=I;I=null}else{if(typeof I===\"object\"){I=n.param(I);G=\"POST\"}}}var E=this;n.ajax({url:F,type:G,dataType:\"html\",data:I,complete:function(L,K){if(K==\"success\"||K==\"notmodified\"){E.html(D?n(\"<div/>\").append(L.responseText.replace(/<script(.|\\s)*?\\/script>/g,\"\")).find(D):L.responseText)}if(J){E.each(J,[L.responseText,K,L])}}});return this},serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?n.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))}).map(function(D,E){var F=n(this).val();return F==null?null:n.isArray(F)?n.map(F,function(H,G){return{name:E.name,value:H}}):{name:E.name,value:F}}).get()}});n.each(\"ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend\".split(\",\"),function(D,E){n.fn[E]=function(F){return this.bind(E,F)}});var q=e();n.extend({get:function(D,F,G,E){if(n.isFunction(F)){G=F;F=null}return n.ajax({type:\"GET\",url:D,data:F,success:G,dataType:E})},getScript:function(D,E){return n.get(D,null,E,\"script\")},getJSON:function(D,E,F){return n.get(D,E,F,\"json\")},post:function(D,F,G,E){if(n.isFunction(F)){G=F;F={}}return n.ajax({type:\"POST\",url:D,data:F,success:G,dataType:E})},ajaxSetup:function(D){n.extend(n.ajaxSettings,D)},ajaxSettings:{url:location.href,global:true,type:\"GET\",contentType:\"application/x-www-form-urlencoded\",processData:true,async:true,xhr:function(){return l.ActiveXObject?new ActiveXObject(\"Microsoft.XMLHTTP\"):new XMLHttpRequest()},accepts:{xml:\"application/xml, text/xml\",html:\"text/html\",script:\"text/javascript, application/javascript\",json:\"application/json, text/javascript\",text:\"text/plain\",_default:\"*/*\"}},lastModified:{},ajax:function(L){L=n.extend(true,L,n.extend(true,{},n.ajaxSettings,L));var V,E=/=\\?(&|$)/g,Q,U,F=L.type.toUpperCase();if(L.data&&L.processData&&typeof L.data!==\"string\"){L.data=n.param(L.data)}if(L.dataType==\"jsonp\"){if(F==\"GET\"){if(!L.url.match(E)){L.url+=(L.url.match(/\\?/)?\"&\":\"?\")+(L.jsonp||\"callback\")+\"=?\"}}else{if(!L.data||!L.data.match(E)){L.data=(L.data?L.data+\"&\":\"\")+(L.jsonp||\"callback\")+\"=?\"}}L.dataType=\"json\"}if(L.dataType==\"json\"&&(L.data&&L.data.match(E)||L.url.match(E))){V=\"jsonp\"+q++;if(L.data){L.data=(L.data+\"\").replace(E,\"=\"+V+\"$1\")}L.url=L.url.replace(E,\"=\"+V+\"$1\");L.dataType=\"script\";l[V]=function(W){U=W;H();K();l[V]=g;try{delete l[V]}catch(X){}if(G){G.removeChild(S)}}}if(L.dataType==\"script\"&&L.cache==null){L.cache=false}if(L.cache===false&&F==\"GET\"){var D=e();var T=L.url.replace(/(\\?|&)_=.*?(&|$)/,\"$1_=\"+D+\"$2\");L.url=T+((T==L.url)?(L.url.match(/\\?/)?\"&\":\"?\")+\"_=\"+D:\"\")}if(L.data&&F==\"GET\"){L.url+=(L.url.match(/\\?/)?\"&\":\"?\")+L.data;L.data=null}if(L.global&&!n.active++){n.event.trigger(\"ajaxStart\")}var P=/^(\\w+:)?\\/\\/([^\\/?#]+)/.exec(L.url);if(L.dataType==\"script\"&&F==\"GET\"&&P&&(P[1]&&P[1]!=location.protocol||P[2]!=location.host)){var G=document.getElementsByTagName(\"head\")[0];var S=document.createElement(\"script\");S.src=L.url;if(L.scriptCharset){S.charset=L.scriptCharset}if(!V){var N=false;S.onload=S.onreadystatechange=function(){if(!N&&(!this.readyState||this.readyState==\"loaded\"||this.readyState==\"complete\")){N=true;H();K();G.removeChild(S)}}}G.appendChild(S);return g}var J=false;var I=L.xhr();if(L.username){I.open(F,L.url,L.async,L.username,L.password)}else{I.open(F,L.url,L.async)}try{if(L.data){I.setRequestHeader(\"Content-Type\",L.contentType)}if(L.ifModified){I.setRequestHeader(\"If-Modified-Since\",n.lastModified[L.url]||\"Thu, 01 Jan 1970 00:00:00 GMT\")}I.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\");I.setRequestHeader(\"Accept\",L.dataType&&L.accepts[L.dataType]?L.accepts[L.dataType]+\", */*\":L.accepts._default)}catch(R){}if(L.beforeSend&&L.beforeSend(I,L)===false){if(L.global&&!--n.active){n.event.trigger(\"ajaxStop\")}I.abort();return false}if(L.global){n.event.trigger(\"ajaxSend\",[I,L])}var M=function(W){if(I.readyState==0){if(O){clearInterval(O);O=null;if(L.global&&!--n.active){n.event.trigger(\"ajaxStop\")}}}else{if(!J&&I&&(I.readyState==4||W==\"timeout\")){J=true;if(O){clearInterval(O);O=null}Q=W==\"timeout\"?\"timeout\":!n.httpSuccess(I)?\"error\":L.ifModified&&n.httpNotModified(I,L.url)?\"notmodified\":\"success\";if(Q==\"success\"){try{U=n.httpData(I,L.dataType,L)}catch(Y){Q=\"parsererror\"}}if(Q==\"success\"){var X;try{X=I.getResponseHeader(\"Last-Modified\")}catch(Y){}if(L.ifModified&&X){n.lastModified[L.url]=X}if(!V){H()}}else{n.handleError(L,I,Q)}K();if(L.async){I=null}}}};if(L.async){var O=setInterval(M,13);if(L.timeout>0){setTimeout(function(){if(I){if(!J){M(\"timeout\")}if(I){I.abort()}}},L.timeout)}}try{I.send(L.data)}catch(R){n.handleError(L,I,null,R)}if(!L.async){M()}function H(){if(L.success){L.success(U,Q)}if(L.global){n.event.trigger(\"ajaxSuccess\",[I,L])}}function K(){if(L.complete){L.complete(I,Q)}if(L.global){n.event.trigger(\"ajaxComplete\",[I,L])}if(L.global&&!--n.active){n.event.trigger(\"ajaxStop\")}}return I},handleError:function(E,G,D,F){if(E.error){E.error(G,D,F)}if(E.global){n.event.trigger(\"ajaxError\",[G,E,F])}},active:0,httpSuccess:function(E){try{return !E.status&&location.protocol==\"file:\"||(E.status>=200&&E.status<300)||E.status==304||E.status==1223}catch(D){}return false},httpNotModified:function(F,D){try{var G=F.getResponseHeader(\"Last-Modified\");return F.status==304||G==n.lastModified[D]}catch(E){}return false},httpData:function(I,G,F){var E=I.getResponseHeader(\"content-type\"),D=G==\"xml\"||!G&&E&&E.indexOf(\"xml\")>=0,H=D?I.responseXML:I.responseText;if(D&&H.documentElement.tagName==\"parsererror\"){throw\"parsererror\"}if(F&&F.dataFilter){H=F.dataFilter(H,G)}if(typeof H===\"string\"){if(G==\"script\"){n.globalEval(H)}if(G==\"json\"){H=l[\"eval\"](\"(\"+H+\")\")}}return H},param:function(D){var F=[];function G(H,I){F[F.length]=encodeURIComponent(H)+\"=\"+encodeURIComponent(I)}if(n.isArray(D)||D.jquery){n.each(D,function(){G(this.name,this.value)})}else{for(var E in D){if(n.isArray(D[E])){n.each(D[E],function(){G(E,this)})}else{G(E,n.isFunction(D[E])?D[E]():D[E])}}}return F.join(\"&\").replace(/%20/g,\"+\")}});var m={},d=[[\"height\",\"marginTop\",\"marginBottom\",\"paddingTop\",\"paddingBottom\"],[\"width\",\"marginLeft\",\"marginRight\",\"paddingLeft\",\"paddingRight\"],[\"opacity\"]];function s(E,D){var F={};n.each(d.concat.apply([],d.slice(0,D)),function(){F[this]=E});return F}n.fn.extend({show:function(I,K){if(I){return this.animate(s(\"show\",3),I,K)}else{for(var G=0,E=this.length;G<E;G++){var D=n.data(this[G],\"olddisplay\");this[G].style.display=D||\"\";if(n.css(this[G],\"display\")===\"none\"){var F=this[G].tagName,J;if(m[F]){J=m[F]}else{var H=n(\"<\"+F+\" />\").appendTo(\"body\");J=H.css(\"display\");if(J===\"none\"){J=\"block\"}H.remove();m[F]=J}this[G].style.display=n.data(this[G],\"olddisplay\",J)}}return this}},hide:function(G,H){if(G){return this.animate(s(\"hide\",3),G,H)}else{for(var F=0,E=this.length;F<E;F++){var D=n.data(this[F],\"olddisplay\");if(!D&&D!==\"none\"){n.data(this[F],\"olddisplay\",n.css(this[F],\"display\"))}this[F].style.display=\"none\"}return this}},_toggle:n.fn.toggle,toggle:function(F,E){var D=typeof F===\"boolean\";return n.isFunction(F)&&n.isFunction(E)?this._toggle.apply(this,arguments):F==null||D?this.each(function(){var G=D?F:n(this).is(\":hidden\");n(this)[G?\"show\":\"hide\"]()}):this.animate(s(\"toggle\",3),F,E)},fadeTo:function(D,F,E){return this.animate({opacity:F},D,E)},animate:function(H,E,G,F){var D=n.speed(E,G,F);return this[D.queue===false?\"each\":\"queue\"](function(){var J=n.extend({},D),L,K=this.nodeType==1&&n(this).is(\":hidden\"),I=this;for(L in H){if(H[L]==\"hide\"&&K||H[L]==\"show\"&&!K){return J.complete.call(this)}if((L==\"height\"||L==\"width\")&&this.style){J.display=n.css(this,\"display\");J.overflow=this.style.overflow}}if(J.overflow!=null){this.style.overflow=\"hidden\"}J.curAnim=n.extend({},H);n.each(H,function(N,R){var Q=new n.fx(I,J,N);if(/toggle|show|hide/.test(R)){Q[R==\"toggle\"?K?\"show\":\"hide\":R](H)}else{var P=R.toString().match(/^([+-]=)?([\\d+-.]+)(.*)$/),S=Q.cur(true)||0;if(P){var M=parseFloat(P[2]),O=P[3]||\"px\";if(O!=\"px\"){I.style[N]=(M||1)+O;S=((M||1)/Q.cur(true))*S;I.style[N]=S+O}if(P[1]){M=((P[1]==\"-=\"?-1:1)*M)+S}Q.custom(S,M,O)}else{Q.custom(S,R,\"\")}}});return true})},stop:function(E,D){var F=n.timers;if(E){this.queue([])}this.each(function(){for(var G=F.length-1;G>=0;G--){if(F[G].elem==this){if(D){F[G](true)}F.splice(G,1)}}});if(!D){this.dequeue()}return this}});n.each({slideDown:s(\"show\",1),slideUp:s(\"hide\",1),slideToggle:s(\"toggle\",1),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"}},function(D,E){n.fn[D]=function(F,G){return this.animate(E,F,G)}});n.extend({speed:function(F,G,E){var D=typeof F===\"object\"?F:{complete:E||!E&&G||n.isFunction(F)&&F,duration:F,easing:E&&G||G&&!n.isFunction(G)&&G};D.duration=n.fx.off?0:typeof D.duration===\"number\"?D.duration:n.fx.speeds[D.duration]||n.fx.speeds._default;D.old=D.complete;D.complete=function(){if(D.queue!==false){n(this).dequeue()}if(n.isFunction(D.old)){D.old.call(this)}};return D},easing:{linear:function(F,G,D,E){return D+E*F},swing:function(F,G,D,E){return((-Math.cos(F*Math.PI)/2)+0.5)*E+D}},timers:[],timerId:null,fx:function(E,D,F){this.options=D;this.elem=E;this.prop=F;if(!D.orig){D.orig={}}}});n.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(n.fx.step[this.prop]||n.fx.step._default)(this);if((this.prop==\"height\"||this.prop==\"width\")&&this.elem.style){this.elem.style.display=\"block\"}},cur:function(E){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var D=parseFloat(n.css(this.elem,this.prop,E));return D&&D>-10000?D:parseFloat(n.curCSS(this.elem,this.prop))||0},custom:function(H,G,F){this.startTime=e();this.start=H;this.end=G;this.unit=F||this.unit||\"px\";this.now=this.start;this.pos=this.state=0;var D=this;function E(I){return D.step(I)}E.elem=this.elem;n.timers.push(E);if(E()&&n.timerId==null){n.timerId=setInterval(function(){var J=n.timers;for(var I=0;I<J.length;I++){if(!J[I]()){J.splice(I--,1)}}if(!J.length){clearInterval(n.timerId);n.timerId=null}},13)}},show:function(){this.options.orig[this.prop]=n.attr(this.elem.style,this.prop);this.options.show=true;this.custom(this.prop==\"width\"||this.prop==\"height\"?1:0,this.cur());n(this.elem).show()},hide:function(){this.options.orig[this.prop]=n.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(G){var F=e();if(G||F>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var D=true;for(var E in this.options.curAnim){if(this.options.curAnim[E]!==true){D=false}}if(D){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(n.css(this.elem,\"display\")==\"none\"){this.elem.style.display=\"block\"}}if(this.options.hide){n(this.elem).hide()}if(this.options.hide||this.options.show){for(var H in this.options.curAnim){n.attr(this.elem.style,H,this.options.orig[H])}}}if(D){this.options.complete.call(this.elem)}return false}else{var I=F-this.startTime;this.state=I/this.options.duration;this.pos=n.easing[this.options.easing||(n.easing.swing?\"swing\":\"linear\")](this.state,I,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};n.extend(n.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(D){n.attr(D.elem.style,\"opacity\",D.now)},_default:function(D){if(D.elem.style&&D.elem.style[D.prop]!=null){D.elem.style[D.prop]=D.now+D.unit}else{D.elem[D.prop]=D.now}}}});if(document.documentElement.getBoundingClientRect){n.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return n.offset.bodyOffset(this[0])}var F=this[0].getBoundingClientRect(),I=this[0].ownerDocument,E=I.body,D=I.documentElement,K=D.clientTop||E.clientTop||0,J=D.clientLeft||E.clientLeft||0,H=F.top+(self.pageYOffset||n.boxModel&&D.scrollTop||E.scrollTop)-K,G=F.left+(self.pageXOffset||n.boxModel&&D.scrollLeft||E.scrollLeft)-J;return{top:H,left:G}}}else{n.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return n.offset.bodyOffset(this[0])}n.offset.initialized||n.offset.initialize();var I=this[0],F=I.offsetParent,E=I,N=I.ownerDocument,L,G=N.documentElement,J=N.body,K=N.defaultView,D=K.getComputedStyle(I,null),M=I.offsetTop,H=I.offsetLeft;while((I=I.parentNode)&&I!==J&&I!==G){L=K.getComputedStyle(I,null);M-=I.scrollTop,H-=I.scrollLeft;if(I===F){M+=I.offsetTop,H+=I.offsetLeft;if(n.offset.doesNotAddBorder&&!(n.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(I.tagName))){M+=parseInt(L.borderTopWidth,10)||0,H+=parseInt(L.borderLeftWidth,10)||0}E=F,F=I.offsetParent}if(n.offset.subtractsBorderForOverflowNotVisible&&L.overflow!==\"visible\"){M+=parseInt(L.borderTopWidth,10)||0,H+=parseInt(L.borderLeftWidth,10)||0}D=L}if(D.position===\"relative\"||D.position===\"static\"){M+=J.offsetTop,H+=J.offsetLeft}if(D.position===\"fixed\"){M+=Math.max(G.scrollTop,J.scrollTop),H+=Math.max(G.scrollLeft,J.scrollLeft)}return{top:M,left:H}}}n.offset={initialize:function(){if(this.initialized){return}var K=document.body,E=document.createElement(\"div\"),G,F,M,H,L,D,I=K.style.marginTop,J='<div style=\"position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;\"><div></div></div><table style=\"position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;\"cellpadding=\"0\"cellspacing=\"0\"><tr><td></td></tr></table>';L={position:\"absolute\",top:0,left:0,margin:0,border:0,width:\"1px\",height:\"1px\",visibility:\"hidden\"};for(D in L){E.style[D]=L[D]}E.innerHTML=J;K.insertBefore(E,K.firstChild);G=E.firstChild,F=G.firstChild,H=G.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(F.offsetTop!==5);this.doesAddBorderForTableAndCells=(H.offsetTop===5);G.style.overflow=\"hidden\",G.style.position=\"relative\";this.subtractsBorderForOverflowNotVisible=(F.offsetTop===-5);K.style.marginTop=\"1px\";this.doesNotIncludeMarginInBodyOffset=(K.offsetTop===0);K.style.marginTop=I;K.removeChild(E);this.initialized=true},bodyOffset:function(D){n.offset.initialized||n.offset.initialize();var F=D.offsetTop,E=D.offsetLeft;if(n.offset.doesNotIncludeMarginInBodyOffset){F+=parseInt(n.curCSS(D,\"marginTop\",true),10)||0,E+=parseInt(n.curCSS(D,\"marginLeft\",true),10)||0}return{top:F,left:E}}};n.fn.extend({position:function(){var H=0,G=0,E;if(this[0]){var F=this.offsetParent(),I=this.offset(),D=/^body|html$/i.test(F[0].tagName)?{top:0,left:0}:F.offset();I.top-=j(this,\"marginTop\");I.left-=j(this,\"marginLeft\");D.top+=j(F,\"borderTopWidth\");D.left+=j(F,\"borderLeftWidth\");E={top:I.top-D.top,left:I.left-D.left}}return E},offsetParent:function(){var D=this[0].offsetParent||document.body;while(D&&(!/^body|html$/i.test(D.tagName)&&n.css(D,\"position\")==\"static\")){D=D.offsetParent}return n(D)}});n.each([\"Left\",\"Top\"],function(E,D){var F=\"scroll\"+D;n.fn[F]=function(G){if(!this[0]){return null}return G!==g?this.each(function(){this==l||this==document?l.scrollTo(!E?G:n(l).scrollLeft(),E?G:n(l).scrollTop()):this[F]=G}):this[0]==l||this[0]==document?self[E?\"pageYOffset\":\"pageXOffset\"]||n.boxModel&&document.documentElement[F]||document.body[F]:this[0][F]}});n.each([\"Height\",\"Width\"],function(G,E){var D=G?\"Left\":\"Top\",F=G?\"Right\":\"Bottom\";n.fn[\"inner\"+E]=function(){return this[E.toLowerCase()]()+j(this,\"padding\"+D)+j(this,\"padding\"+F)};n.fn[\"outer\"+E]=function(I){return this[\"inner\"+E]()+j(this,\"border\"+D+\"Width\")+j(this,\"border\"+F+\"Width\")+(I?j(this,\"margin\"+D)+j(this,\"margin\"+F):0)};var H=E.toLowerCase();n.fn[H]=function(I){return this[0]==l?document.compatMode==\"CSS1Compat\"&&document.documentElement[\"client\"+E]||document.body[\"client\"+E]:this[0]==document?Math.max(document.documentElement[\"client\"+E],document.body[\"scroll\"+E],document.documentElement[\"scroll\"+E],document.body[\"offset\"+E],document.documentElement[\"offset\"+E]):I===g?(this.length?n.css(this[0],H):null):this.css(H,typeof I===\"string\"?I:I+\"px\")}})})();\n 43647  \n 43648: if(!Array.forEach){Array.prototype.forEach=function(D,E){var C=E||window;for(var B=0,A=this.length;B<A;++B){D.call(C,this[B],B,this)}};Array.prototype.map=function(E,F){var D=F||window;var A=[];for(var C=0,B=this.length;C<B;++C){A.push(E.call(D,this[C],C,this))}return A};Array.prototype.filter=function(E,F){var D=F||window;var A=[];for(var C=0,B=this.length;C<B;++C){if(!E.call(D,this[C],C,this)){continue}A.push(this[C])}return A};Array.prototype.every=function(D,E){var C=E||window;for(var B=0,A=this.length;B<A;++B){if(!D.call(C,this[B],B,this)){return false}}return true};Array.prototype.indexOf=function(B,C){var C=C||0;for(var A=0;A<this.length;++A){if(this[A]===B){return A}}return -1}}Array.prototype.contains=function(A){if(Array.contains){return this.contains(A)}return this.indexOf(A)>-1};Array.prototype.insert=function(A){if(!this.contains(A)){this.push(A)}};if(!Array.remove){Array.remove=function(D,C,B){var A=D.slice((B||C)+1||D.length);D.length=C<0?D.length+C:C;return D.push.apply(D,A)}}Function.prototype.method=function(A,B){this.prototype[A]=B;return this};Function.prototype.augmentProto=function(A){for(key in A){this.prototype[key]=A[key]}return this};Function.prototype.pBind=function(B){var A=this;return function(){return A.apply(B,arguments)}};Function.prototype.widget=function(){this.prototype.bind=function(B,A){this.$root.bind(B,A);return this};this.prototype.trigger=function(A,B){this.$root.trigger(A,B)};this.prototype.find=function(A){return this.$root.find(A)};return this};String.prototype.toCamel=function(){return this.replace(/[-_\\s]\\D/gi,function(A){return A.charAt(A.length-1).toUpperCase()})};String.prototype.escapeHTML=function(){return this.replace(/&/g,\"&amp;\").replace(/>/g,\"&gt;\").replace(/</g,\"&lt;\").replace(/\"/g,\"&quot;\")};window.twttr=window.twttr||{};twttr.augmentObject=function(B,C){for(var A in C){B[A]=C[A]}return B};twttr.augmentObject(twttr,{namespaceOf:function(A){return twttr.is.object(A)?A:window},merge:function(){var C=arguments;var F=arguments[arguments.length-1];var B=false;if(twttr.is.nil(C[0])||!twttr.is.def(C[0])){if(C.length<2){return{}}[].shift.call(C);return this.merge.apply(this,C)}if(twttr.is.bool(F)){B=F;[].pop.call(C)}for(var E=0,A=C.length-1;E<A;E++){for(var D in C[E+1]){if(B&&C[0][D]&&twttr.is.object(C[0][D])&&!twttr.is.fn(C[0][D])&&twttr.is.object(C[E+1][D])&&!twttr.is.fn(C[E+1][D])){this.merge(C[0][D],C[E+1][D])}else{C[0][D]=C[E+1][D]}}}return C[0]},extend:function(B,C){var A=function(){};A.prototype=C.prototype;B.prototype=new A();B.prototype.constructor=B;B.uber=C.prototype;if(C.prototype.constructor==Object.prototype.constructor){C.prototype.constructor=C}},klass:function(A,B){return twttr.magic(A,B)},augmentAndExtend:function(B,C,D){var A=twttr.namespaceOf(B);A[C]=function(){A[C].uber.constructor.apply(this,arguments)};twttr.extend(A[C],D);return A[C]},auxo:function(C,D,B){var A=twttr.is.object(B)?B:twttr;return twttr.augmentAndExtend(A,C,D)},augmentString:function(C,A){var B=window;C.split(\".\").forEach(function(F,E,D){B=B[F]=B[F]||(twttr.is.def(D[E+1])?{}:A)});return B},magic:function(B,A){if(twttr.is.string(B)){return twttr.augmentString(B,A)}else{return twttr.augmentObject(B,A)}},inspect:function(B){console.clear();var C=$(B);var H=C.data(\"events\");var A=0;var G=0;var E=[];var D=[];for(key in H){E.push(key);A++;D.push(\"\\n*******************\\n\");D.push(\"Events for \"+key+\"\\n\\n\");for(fn in H[key]){var F=H[key][fn];G++;D.push(F.toString()+\"\\n\")}}console.log(\"************* Summary *************\");console.log(\"for target\",C);console.log(A+\" types of events\",E);console.log(G,\"Total Event Listeners\");console.log(\"Event listeners assigned to target\");console.log(D.join(\" \"))},is:{bool:function(A){return typeof A===\"boolean\"},nil:function(A){return A===null},def:function(A){return !(typeof A===\"undefined\")},number:function(A){return typeof A===\"number\"&&isFinite(A)},fn:function(A){return typeof A===\"function\"},array:function(A){return A?this.number(A.length)&&this.fn(A.splice):false},string:function(A){return typeof A===\"string\"},blank:function(A){return A===\"\"},falsy:function(A){return A===false||A===null||A===undefined},object:function(A){return(A&&(typeof A===\"object\"||this.fn(A)))||false}},widget:function(A){A.prototype.bind=function(C,B){this.$element.bind(C,B)}}});if(!window.console){var names=[\"log\",\"debug\",\"info\",\"warn\",\"error\",\"assert\",\"dir\",\"dirxml\",\"group\",\"groupEnd\",\"time\",\"timeEnd\",\"count\",\"trace\",\"profile\",\"profileEnd\"];window.console={};for(var i=0;i<names.length;++i){window.console[names[i]]=function(){}}}function _(C,A){if(twttr.i18n){var B=twttr.i18n[C];if(B){C=B}}return replaceParams(C,A)}function replaceParams(B,A){if(A){for(var C in A){B=B.replace(new RegExp(\"\\\\%\\\\{\"+C+\"\\\\}\",\"gi\"),A[C])}}return B}var h=function(){var A=$(\"<div/>\");return function(B){return B?A.text(B).html().replace(/\\\"/gi,\"&quot;\"):B}}();function unh(A){return A?A.replace(/&(amp;)+/g,\"&\").replace(/&[a-z]+;/gi,function(B){if(unh.HTML_ESCAPE_TOKENS[B]){return unh.HTML_ESCAPE_TOKENS[B]}return B}):A}window.unh.HTML_ESCAPE_TOKENS={\"&lt;\":\"<\",\"&gt;\":\">\",\"&quot;\":'\"'};function addSlashes(A){return A.replace(/\\'/g,\"\\\\'\").replace(/\\\"/g,'\\\\\"')}var reverseString=function(A){return A?A.split(\"\").reverse().join(\"\"):A};var numberWithDelimiter=function(B,A,C){A=A?A:\",\";C=C?C:\".\";parts=(\"\"+B).split(\".\");parts[0]=reverseString(reverseString(parts[0]).replace(/(\\d\\d\\d)/g,\"$1\"+A));if(parts[0][0]==A){parts[0]=parts[0].substring(1)}return parts.join(C)};var timeAgo=function(C){if(!C){return false}var H=new Date();var G=new Date(C);if(document.all){G=Date.parse(C.replace(/( \\+)/,\" UTC$1\"))}var D=H-G;var B=1000,F=B*60,A=F*60;if(isNaN(D)||D<0){return false}var E=-1;$.each([5,10,20],function(){if(D<this*B){E=this;return false}});if(E!=-1){return _(\"less than %{time} seconds ago\",{time:E})}if(D<B*40){return _(\"half a minute ago\")}if(D<F){return _(\"less than a minute ago\")}if(D<B*90){return _(\"1 minute ago\")}if(D<F*45){return _(\"%{time} minutes ago\",{time:Math.round(D/F)})}if(D<F*90){return _(\"about 1 hour ago\")}if(D<A*24){return _(\"about %{time} hours ago\",{time:Math.round(D/A)})}return false};var updateTimeAgo=function(){$(\".timestamp\").each(function(){var B=$(this);var A=timeAgo(B.meta().time);if(A&&B.find(\"*\").length==0){B.html(A)}});$(\".timestamp-title\").each(function(){var B=$(this);var A=timeAgo(B.meta().time);if(A){B.attr(\"title\",A)}})};var DEBUG=false;$.extend({log:function(A){if(window.console){console.log(A)}},debug:function(A){if(DEBUG){console.log(A)}},inspect:function(B){var A=\"{\\n\";for(var C in B){A+=\"\\t\"+C+\": \"+B[C]+\"\\n\"}A+=\"}\";console.log(A);return A}});(function(){if(document.all){if(/MSIE (\\d+\\.\\d+);/.test(navigator.userAgent)){var A=new Number(RegExp.$1);if(A>=8){$.browser.msie8=true}else{if(A>=7){$.browser.msie7=true}else{$.browser.msie6=true}}}}})();var _tmp={};twttr.augmentObject(twttr,{templates:{},timeouts:{},wait:function(){var A={};twttr.clearWait=function(B){if(twttr.is.def(A[B])){clearTimeout(B);delete A[B]}};return function(E,C){var B=\"TIMER_\"+(new Date()).getTime();var D=setTimeout(function(){if(!twttr.is.def(A[B])){return }E()},C);A[B]=D;return B}}(),processJson:function(json){if(typeof (json)==\"object\"){var evals=[];$.each(json,function(selector,content){var c=selector.charAt(0);if(c==\"$\"){evals.push(content)}else{if(c==\"!\"){var notification=window[selector.substring(1)+\"Notification\"];if(notification){(new notification()).setMessage(content).show()}}else{var $contentPadded=$(\"<div></div>\").html(content);var $content=$(selector,$contentPadded);if($content.length==1){$(selector).replaceWith($content)}else{$(selector).html(content)}$(selector).show()}}});$.each(evals,function(index,js){if(js){eval(js)}})}},googleAnalytics:function(A){if(window.pageTracker){window.pageTracker._trackEvent(\"Ajax\",\"refresh\",A,null)}},trackPageView:function(C,B,D){if(window.pageTracker){var A;if(C){A=C.toString();if(B){A=\"/search/tweets/\"+encodeURIComponent(h(page.query))}if(D){A=A+D}window.pageTracker._trackPageview(A)}else{window.pageTracker._trackPageview()}}},fadeAndReplace:function(A,B){$(A).fadeOut(\"medium\",function(){$(A).html(B)});$(A).fadeIn(\"medium\")},error:function(A){alert(A?A:_(\"Whoops! Something went wrong. Please refresh the page and try again!\"))},loading:function(){$(\"#loader\").fadeIn(200)},loaded:function(){$(\"#loader\").fadeOut(200)},updateLocation:function(A,E){if(!E){E=document}if(A){var D=A.replace(/^https?:\\/\\/.+?\\//,\"\").replace(/#/gi,\"%23\").replace(/\\s/gi,\"+\");var C=D.replace(/[^\\w\\d_-].*$/,\"\");var B=(C.length>0)?$(E).find(\"#\"+C):[];if(B.length>0){B.get(0).id=C+\"_tmp_for_update_location\"}E.location.hash=D;if(B.length>0){B.get(0).id=C}}},NON_CHAR_KEY_CODES:[8,9,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93],isNonCharKeyCode:function(A){return $.inArray(A.keyCode,twttr.NON_CHAR_KEY_CODES)!=-1||((A.ctrlKey||A.metaKey)&&$.inArray(A.keyCode,[67,88])!=-1)}});$.extend($.expr[\":\"],{onthepage:\"($(elem).is(':visible') && $(elem).parents(':hidden').length == 0)\"});jQuery.fn.move=function(A){var B=$(this).html();$(this).remove();$(A).html(B)};jQuery.fn.meta=function(){var B={type:\"attr\",name:\"data\"};var C=$(this);if(C.length==1){return C.metadata(B)}else{var A=[];C.each(function(){A.push($(this).metadata(B))});return A}};jQuery.fn.visible=function(A){$(this).each(function(){$(this).css(\"visibility\",A?\"visible\":\"hidden\")})};jQuery.fn.isLoading=function(){$(this).addClass(\"loading\")};$.fn.isLoaded=function(){$(this).removeClass(\"loading\")};$.fn.replace_text=function(C,B){var A=$(this).html();if(A){$(this).html(A.replace(C,B))}};var pluralize=function(C,B,A){return C==1?B:A};var setDocumentTitle=function(A){document.title=unh(A)||\"\"};var addCountToDocumentTitle=function(A){document.title=(A?\"(\"+numberWithDelimiter(A)+\") \":\"\")+document.title.replace(/\\([^)]*[0-9]\\)\\s+/gi,\"\")};var getCurrentUserScreenName=function(){return page.user_screenname||$('meta[name=\"session-user-screen_name\"]:first').get(0).content};var sessionUserIsPageUser=function(){try{return $('meta[name=\"session-user-screen_name\"]:first').get(0).content==$('meta[name=\"page-user-screen_name\"]:first').get(0).content}catch(A){return false}};$.fn.focusEnd=function(){return this.each(function(){var A=this;if(A.style.display!=\"none\"){if($.browser.msie){A.focus();var B=A.createTextRange();B.collapse(false);B.select()}else{A.setSelectionRange(A.value.length,A.value.length);A.focus()}}})};$.fn.focusFirstTextField=function(){return this.find(\"input[type=text]:visible:enabled:first\").focus().length>0},$.fn.focusFirstTextArea=function(){return this.find(\"textarea:visible:enabled:first\").focus().length>0};$.fn.focusFirstTexttarget=function(){return this.focusFirstTextField()||this.focusFirstTextArea()};$.fn.maxLength=function(A){return this.each(function(){$(this).keydown(function(B){return this.value.length<=A||twttr.isNonCharKeyCode(B)})})};$.fn.replaceClass=function(B,A){return this.each(function(){var C=$(this);if(C.hasClass(B)){C.removeClass(B).addClass(A)}else{if(C.hasClass(A)){C.removeClass(A).addClass(B)}}})};$.fn.isSelectAll=function(A){return this.each(function(){var B=$(this);if(typeof (A)==\"string\"){var D=$(A).find(\"input[type=checkbox]\")}else{var D=A}function C(){var E=true;D.each(function(){if(!this.checked){E=false;return false}});B.get(0).checked=E}B.click(function(){var E=B.get(0).checked;D.each(function(){this.checked=E});$(this).trigger(\"select-all-changed\",E)});D.click(function(){C();$(this).trigger(\"checkbox-changed\",this.checked)})})};function bodytarget(){return $(\"body\")}twttr.klass(\"twttr.Observer\",function(){this.fns=[]}).method(\"listen\",function(A){this.fns.push(A)}).method(\"unlisten\",function(A){this.fns=this.fns.filter(function(B){if(B!==A){return B}})}).method(\"trigger\",function(C,B){var A=B||window;this.fns.forEach(function(D){D.call(A,C)})});twttr.klass(\"twttr.User\",function(A){this.screen_name=A}).method(\"update\",function(B,A){twttr.tweeters[this.screen_name][B]=A;return this}).method(\"updateAll\",function(B){for(var A in B){twttr.tweeters[this.screen_name][A]=B[A]}return this}).method(\"data\",function(B){var A=twttr.tweeters[this.screen_name];return B?A[B]:A});twttr.augmentString(\"twttr.Tweeter\",{UserFetchTimeout:5000,UserFetchUrl:\"/users/show\",_bail:false,_requesting:false,bail:function(){this._bail=true},isRequesting:function(){return this._requesting},getCurrentUser:function(A){return this.findById(page.sessionUserId,A)},find:function(F,C,G){var B,A;var D=this;if(twttr.is.fn(C)){B=window;A=C}else{B=C;A=G}var E=twttr.is.def(F.screen_name)?F.screen_name.toLowerCase():null;if(E&&twttr.tweeters[E]){A.call(B,new twttr.User(E),true);return true}else{$.ajax({url:this.UserFetchUrl,type:\"GET\",data:F,dataType:\"json\",timeout:this.UserFetchTimeout,beforeSend:function(){D._requesting=true},success:function(K){D._requesting=false;var H=K.user;if(H){var I={};var J=H.screen_name.toLowerCase();I[J]=H;twttr.Tweeter.merge(I,true);if(D._bail){D._bail=false;return false}A.call(B,new twttr.User(J),false)}else{if(D._bail){D._bail=false;return false}A.call(B,null,false)}},error:function(H){D._requesting=false;if(D._bail){D._bail=false;return false}A.call(B,null,false)}});return false}},findByScreenName:function(B,A,C){return this.find({screen_name:B,hovercard:true},A,C)},findById:function(D,A,C){var B=twttr._birdtags[D];if(twttr.is.def(B)){this.findByScreenName(B,A,C)}else{this.find({user_id:D,hovercard:true},A,C)}},merge:function(){twttr.tweeters={};twttr._birdtags={};return function(D,A){var D=D||{};if(A){twttr.merge(twttr.tweeters,D,true)}else{var C=twttr.merge(D,twttr.tweeters,true);twttr.merge(twttr.tweeters,C,true)}for(var B in twttr.tweeters){twttr._birdtags[twttr.tweeters[B].user_id]=B}}}()});twttr.loadTemplate=function(A,B){if(twttr.templates[A]){return twttr.templates[A]}B=B||function(){};$.get(\"/mustaches/\"+A+\".html\",null,function(D){var C={templates:{}};C.templates[A]=D;twttr.merge(twttr,C,true);B(twttr.templates)},\"html\")};twttr.loadTemplates=function(A,B){B=B||function(){};A.forEach(function(D,C){twttr.loadTemplate(D,function(E){var F=A.every(function(G){return twttr.is.def(E[G])});if(F){B(twttr.templates)}})})};twttr.SimplePositioner={setPosition:function(C,G,E){var D={inline:false,direction:null,offsets:{inline:{top:0,left:0},below:{top:0,left:0},above:{top:0,left:0}}};var F=twttr.merge({},D,E,true);var B=C instanceof jQuery?C:$(C);var A=G instanceof jQuery?G:$(G);var H=A.offset();this._opts=F;if(!F.inline){switch(F.direction){case\"above\":this._positionAbove(B,A,H,F.offsets.above);break;case\"below\":this._positionBelow(B,A,H,F.offsets.below);break;default:if((H.top-$(document).scrollTop())>(F.itemHeight||B.height())){this._positionAbove(B,A,H,F.offsets.above)}else{this._positionBelow(B,A,H,F.offsets.below)}break}}else{this._positionInline(B,A,H,F.offsets.inline);B.css(\"left\",H.left+F.offsets.inline.left)}},_positionAbove:function(C,B,H,A){$(\"body\").addClass(\"loading-hoverer-above\");C.addClass(\"position_above\").removeClass(\"position_below\").removeClass(\"position_inline\");var G=Math.round(H.top+A.top);var F=$(\"body\");var E=parseInt(F.css(\"padding-top\"));G+=E>0?12:0;var D=F.outerHeight()-G-B.height();C.css({bottom:D,left:this._getLeftPosition(C,B,H)+A.left})},_positionBelow:function(A,C,D,E){var B=Math.round(D.top+C.height()+E.top);A.addClass(\"position_below\").removeClass(\"position_above\").removeClass(\"position_inline\");A.css({top:B,left:this._getLeftPosition(A,C,D)+E.left})},_positionInline:function(A,B,D,C){A.css(\"top\",D.top+C.top).addClass(\"position_inline\").removeClass(\"position_below\").removeClass(\"position_above\")},_getLeftPosition:function(A,B,C){return Math.round(C.left+(B.width()/2))}};var updateCount=function(A,F,D){try{var E=$(A);var C=parseInt(E.html().replace(/[^0-9]/g,\"\"))+F;return setCount(A,C,D)}catch(B){return false}};var setCount=function(A,C,D){try{var E=$(A);if(D){E.fadeOut(D,function(){E.html(numberWithDelimiter(C)).fadeIn(D)})}else{E.html(numberWithDelimiter(C))}return C}catch(B){return false}};var updateFollowingCount=function(A){return updateCount(\"#following_count\",A)};var updateFollowersCount=function(A){return updateCount(\"#follower_count\",A)};twttr.forbiddenAccess={decider:function(A){twttr.forbiddenAccess.unauthed(A)},unauthed:function(req){var message;try{message=eval(\"(\"+req.responseText+\")\").error}catch(err){}if(!message){if(req.status==403){message=_(\"You are not authorized to perform this operation.\")}}if(message){new ShortNotification().setMessage(message).show()}},revoked:function(){window.location.reload()}};twttr.isReplyOnlyTweet=function(A){var B=/^\\@([a-zA-Z0-9_]{1,20})\\s*$/;if(A.match(B)){return true}return false};$.fn.isAlertBox=function(){return this.each(function(){var A=$(this);A.find(\"a\").click(function(){var B=$(this).attr(\"href\");$.ajax({type:\"POST\",dataType:\"text\",data:{authenticity_token:twttr.form_authenticity_token},url:\"/account/clear_user_alert\",success:function(){A.slideUp(\"fast\");window.location=B}});return false})})};$.fn.isUpdateForm=function(){return this.each(function(){var O=$(this);var H=O.find(\"textarea\").isCharCounter();var A=O.find(\"#tweeting_button, #update-submit\");var B=O.find(\"label.doing\");var J=O.find(\".char-counter\");var F=/^\\s*@(\\w+)\\W+/;var D=/^\\s*[dD][mM]?\\s+(?:(\\w+)\\W+)?/;var I=O.find(\".places-nearby\");var E;var N=false;function M(){var P=H.val();if(twttr.isReplyOnlyTweet(P)){location.href=RegExp.$1;return false}if(P.length>140){alert(_(\"That tweet is over 140 characters!\"));return false}else{if(P.replace(/s\\*/g,\"\")==\"\"){return false}else{A.addClass(\"btn-disabled\").attr(\"disabled\",true);return true}}}A.bind(\"click\",function(Q){var P=$(this);Q.preventDefault();if(!P.hasClass(\"btn-disabled\")){P.closest(\"form\").submit()}});function K(P){if(twttr.is.def(P.users)){twttr.Tweeter.merge(P.users,true)}A.removeClass(\"btn-disabled\").removeAttr(\"disabled\");var Q=P.text;if(P.messageForFlash){(new ShortNotification()).setMessage(P.messageForFlash).show()}else{if(P.errorForFlash){(new InfoNotification()).setMessage(P.errorForFlash).show()}else{if($(\"body\").attr(\"id\")!=\"home\"){(new ShortNotification()).setMessage(_(\"Your status has been updated!\")).show()}else{if(P.status_li){$(\"#timeline tr.hentry:first\").removeClass(\"latest-status\");$.Timeline.prepend(P.status_li)}}setCount(\"#update_count\",P.status_count,250);if(P.latest_status){updateTimeAgo();$(\"#latest_status\").html(P.latest_status).isCurrentStatus(true)}}}H.val(\"\").focusEnd();$(\"#in_reply_to_status_id\").val(\"\");$(\"#in_reply_to\").val(\"\");C(\"\");H.trigger(\"change\");J.removeClass(\"loading\");if(document.all){J.text(\"140\")}else{J.css(\"color\",\"#ccc\")}}function C(Q){var P;if(P=Q.match(D)){B.html(P[1]?_(\"Direct message %{person}:\",{person:P[1]}):_(\"Direct message:\"));A.val(_(\"send\"))}else{if(P=Q.match(F)){B.html(_(\"Reply to %{screen_name}:\",{screen_name:P[1]}));A.val(_(\"reply\"))}else{B.html(_(\"Whatâs happening?\"));A.val(_(\"update\"))}}}H.bind(\"keyup blur focus\",function(){C($(this).val())});O.submit(function(){if(M()){twttr.googleAnalytics(\"/status/update/refresh\");var T=H.val();E={authenticity_token:twttr.form_authenticity_token,status:T,twttr:true};var Q=window.location.href;if($(\"body\").attr(\"id\")==\"home\"&&((Q.indexOf(\"page=\")==-1)||Q.match(/page=1(?!\\d)/))){E.return_rendered_status=true}var P=$(\"#in_reply_to_status_id\").val();var S;if(P&&(S=T.match(F))){if(S[1]==$(\"#in_reply_to\").val()){E.in_reply_to_status_id=P}}var R=$(\"#source\").val();if(R){E.source=R}E.lat=$(\"#lat\").val();E[\"long\"]=$(\"#long\").val();E.place_id=$(\"#place_id\").val();G(E)}return false});function G(P){$.ajax({type:\"POST\",dataType:\"json\",url:\"/status/update\",data:P,beforeSend:function(){J.addClass(\"loading\");if(document.all){J.html(\"&nbsp;&nbsp;&nbsp;&nbsp;\")}else{J.css(\"color\",\"transparent\")}},success:K,error:twttr.forbiddenAccess.decider})}try{H.focusEnd()}catch(L){}})};$.fn.isLocationTrends=function(){var A=$(\"div#trends\").meta()[\"global_id\"];return this.each(function(){var I=$(this);var G=$(\"#location_menu\");var B=$(\"#change_location\");var L=$(\"#trends .trends-links\");var E=new twttr.AttachedDialog($(\"#tt_menu span\"),{content:$(\"#local_trends\"),width:\"545px\",gravity:\"east\",weight:\"top\",modal:false});$(document).click(function(N){var M=$(N.target);if(E.opened&&!M.parents(\".modal, .trends-links li\").length){E.close()}});E.find(\"#location_done\").click(function(){E.close();B.removeClass(\"active\");if(!F()){D(A)}});var K=false;if($(\"#local_trends_notice\").length){setTimeout(function(){(K=new twttr.AttachedDialog($(\"#tt_menu span\"),{content:$(\"#local_trends_notice\").parent(),width:\"186px\",gravity:\"east\",weight:\"top\",openonload:true,closeButton:true,modal:false})).bind(\"close\",function(){D(A);return false}).open();K.find(\"#location_notice_set\").click(function(){D(A);K.close();E.open();return false})},500)}function H(P){E.find(\"a.active-parent\").removeClass(\"active-parent\");var M=$(P).attr(\"parents\");if(M){var N=M.split(\" \");for(var O=0;O<N.length;O++){$(\".\"+N[O]).addClass(\"active-parent\")}}}function F(){return G.find(\"em\")}function D(M){if(!M){M=0}$.ajax({type:\"POST\",url:\"/users/update_trend_location_id\",data:{authenticity_token:twttr.form_authenticity_token,trend_location_id:M},success:function(){L.append($(\"<em></em>\").append(M))}});return false}B.click(function(){E.toggle();if(K){K.close()}B.toggleClass(\"active\");return false});E.find(\"a\").click(function(){var M=$(this);var N=M.attr(\"id\").replace(\"trend_loc_\",\"\");E.find(\".active\").removeClass(\"active\");E.find(\"#trend_loc_\"+N).parent().addClass(\"active\");H(M);if(N){$.ajax({type:\"GET\",dataType:\"json\",url:\"/users/location_trends\",data:{twttr:true,trend_location_id:N},beforeSend:function(){$(\"#trends_loading\").show()},success:function(O){L.hide();L.fadeIn();$(\"#trends_loading\").hide();if(O){var P=[];L.html(\"\");$.each(O.trends,function(){var Q=this;var T=Q.name;var S=$('<a class=\"search_link\" href=\"/search?q='+encodeURIComponent(Q.query)+'\"name=\"'+T+'\" title=\"'+T+'\">'+T+\"</a>\");S.isSearchLink();var R=Q.description;if(R){L.append($(\"<li></li>\").append(S).append($(\"<em></em>\").append(R)))}else{L.append($(\"<li></li>\").append(S))}});G.html(O.location[\"name\"]);loadTrendDescriptions();D(O.location[\"id\"])}else{}},error:function(O){$.debug(\"error: \"+O.responseText)},complete:function(){$(\"#trends_loading\").hide()}})}return false});var C=F();if(C){var J=$(\"#trend_loc_\"+C);J.parent().addClass(\"active\");H(J)}})};$.fn.isDirectMessageForm=function(){return this.each(function(){var L=$(this);var D=L.find(\"textarea\").isCharCounter();var B=/^\\s*[dD][mM]?\\s+([A-Za-z0-9]{1,20})[^A-Za-z0-9]/;var F=L.find(\"select\");var A=L.find(\"#dm-submit\");var E=L.find(\".char-counter\");var G=\"\";L.find(\"input[type=submit]\").attr(\"disabled\",\"disabled\").addClass(\"btn-disabled\");try{D.focusEnd()}catch(I){}function C(N){if(F.val()){return }if((matches=N.match(B))&&matches[1]&&(G!=matches[1])){var M=true;F.find(\"option\").each(function(){if(this.innerHTML.toLowerCase()==matches[1].toLowerCase()){F.val(this.value);M=false;return false}});if(M){F.append(_('<option value=\"%{screen_name}\">%{screen_name}</option>',{screen_name:matches[1]}));F.val(matches[1])}G=matches[1]}}A.click(function(M){var P=D.val();var N=P.match(B);var O=F.find(\"option[value=\"+F.val()+\"]\");if(N&&N[1]&&N[1].toLowerCase()==O.text().toLowerCase()){D.val(P.replace(B,\"\"))}return true});F.change(function(M){D.trigger(\"update\",M)});D.bind(\"keyup blur focus\",function(M){C($(this).val());D.trigger(\"update\",M)});function H(M){(new ShortNotification()).setMessage(M.messageForFlash).show();if($(\"body\").attr(\"id\")==\"sent\"){$.Timeline.prepend(M.direct_message_li)}D.val(\"\");F.val(\"\");G=\"\";D.trigger(\"change\");E.removeClass(\"loading\");if(document.all){E.text(\"140\")}else{E.css(\"color\",\"#ccc\")}}if(F.length>0){function J(){if(F.length&&(F.find(\"option\").length==0)){$.ajax({type:\"GET\",dataType:\"json\",url:\"/direct_messages/recipients_list\",data:{twttr:true},success:function(N){if(N){var M=[];$.each(N,function(){var O=this;if((O.length>1)&&O[0]&&O[1]){M.push('<option value=\"'+O[0]+'\">'+O[1]+\"</option>\")}});F.html('<option value=\"\" selected=\"selected\"></option>'+M.join(\"\"))}},error:function(M){$.debug(\"error: \"+M.responseText)}})}}var K=$(\"body\").attr(\"id\");if(K==\"direct_messages\"||K==\"inbox\"||K==\"sent\"){J()}L.bind(\"loadrecipients\",null,function(M){J()});L.submit(function(){twttr.googleAnalytics(\"/direct_messages/create/refresh\");var N=D.val();var M={authenticity_token:twttr.form_authenticity_token,text:N,\"user[id]\":F.val(),twttr:true};$.ajax({type:\"POST\",dataType:\"json\",url:\"/direct_messages/create\",data:M,beforeSend:function(){E.addClass(\"loading\");if(document.all){E.text(\"\")}else{E.css(\"color\",\"transparent\")}},success:H,error:twttr.forbiddenAccess.decider});return false})}})};$.fn.isTimelineTabLink=function(){return this.each(function(){var A=$(this);A.click(function(B){document.body.id=A.meta().dispatch_action}).bind(\"loading\",null,function(B){A.parent(\"li\").addClass(\"loading\")}).bind(\"loaded\",null,function(B){A.parent(\"li\").removeClass(\"loading\")}).bind(\"aborted\",null,function(B){A.parent(\"li\").removeClass(\"loading\")})})};$.fn.isEmbeddedMediaExpander=function(){return this.livequery(function(){var A=$(this);var B=A.parent().find(\".embedded_media\");A.click(function(){B.slideToggle(\"normal\",function(){if(A.hasClass(\"embedded_media_icon_active\")){A.removeClass(\"embedded_media_icon_active\")}else{A.addClass(\"embedded_media_icon_active\")}})})})};$.fn.isCharCounter=function(){return this.each(function(){var A=true;var F=$(this);var J=F.closest(\"form\");var E=J.find(\".char-counter\");var H=J.find(\"#tweeting_button, #update-submit, #dm-submit\");var D=J.find(\"select\");function C(){H.addClass(\"btn-disabled\").attr(\"disabled\",\"disabled\");A=true}function G(){if(A){H.removeClass(\"btn-disabled\").removeAttr(\"disabled\");A=false}}function B(){var L=F.val();var K=L.length;E.html(\"\"+(140-K));if(K<=0){E.css(\"color\",\"#cccccc\");C()}else{if(K<=140&&(D.length==0||D.val())){G()}else{C()}if(K>130){E.css(\"color\",\"#d40d12\")}else{if(K>120){E.css(\"color\",\"#5c0002\")}else{E.css(\"color\",\"#cccccc\")}}}}var I=\"blur focus change \"+($.browser.mozilla?\"paste input\":\"keyup\");F.bind(I,function(K){B()});D.change(function(K){B()});F.focus()})};$.fn.isCurrentStatus=function(A){return this.each(function(){var F=$(this);var I=$(\"#latest_status\");var C=F.find(\"#latest_text\");var E=C.find(\".status-text\");var D=$(this).parent(\"#update_notifications\");var H=I.find(\"strong\");$(\"#latest_text_full, #latest_text\").click(function(){$(\"#latest_text_full, #latest_text\").toggle()});C.css(\"color\",\"transparent\");var B=$(\"#latest_text_full .status-text\").text();$(\"#latest_text .status-text\").html(\"<strong>\"+_(\"Latest: \")+\"</strong>\").append(B.escapeHTML());C.css(\"color\",\"\");if(A){var G=I.find(\"span, strong\");G.each(function(){$(this).data(\"old_color\",$(this).css(\"color\")).animate({color:\"#333\"},500)});clearTimeout(twttr.timeouts.latest_status_timeout);twttr.timeouts.latest_status_timeout=setTimeout(function(){G.each(function(){$(this).animate({color:$(this).data(\"old_color\")},1500,function(){$(this).css(\"color\",\"\")})})},1500)}})};function initializeTimeline(){$.Statuses.initialize($(\"#timeline\"))}function getListItemFromChild(A){return A.parents(\".hentry:first\")}function getStatusIdFromListItem(B){var A=/status_(.*)/i.exec(B.attr(\"id\"));return(A)?A[1]:null}function getScreenNameFromListItem(B){var A=/u-([A-Za-z0-9_]+)/i.exec(B.attr(\"class\"));return(A)?A[1]:null}function getShareIdFromListItem(B){var A=/(.)* s-([\\d]+)(.)*/i.exec(B.attr(\"class\"));return(A)?A[2]:getStatusIdFromListItem(B)}function timelineRefresh(D,A){var C=$(\"#results_update\");if(C.length==0){return }if(!D||((\"home,replies,inbox\".indexOf(D)==-1)&&!D.match(/^\\/?list/))){return }if(!A){A=($(\"#results_update\").attr(\"href\").replace(/^\\//,\"\")||window.location.hash.replace(/^#/,\"\")||D).replace(/^([^\\/])/,\"/$1\")}A=A.replace(/\\/?list\\//,\"/\");var B=$(\"#new_results_notification\").meta().timeline;$(\"#new_results_notification\").data(\"count\",0);if(page.timelineRefresher){if(page.timelineRefresher.dispatchAction==D){return }else{page.timelineRefresher.stop()}}page.newResults=null;page.timelineRefresher=new Occasionally(B.delay*1000,B.max_delay*1000,function(){var E=false;if($(\"ol#timeline\").length){$.ajax({method:\"GET\",dataType:\"json\",url:A,data:{since_id:getMaxStatusIdFromTimeline(),refresh:true},success:function(F){processTimelineRefresh(F,D)},error:function(){if(page.timelineRefresher){page.timelineRefresher.stop();page.timelineRefresher=null}}})}},function(){return page.newResults},B.decay);page.timelineRefresher.dispatchAction=D;page.timelineRefresher.start()}function getMaxStatusIdFromTimeline(){var A=0;$(\"ol#timeline > li\").each(function(){var B=parseInt(this.id.replace(/^[A-Z_]+/gi,\"\"));if(A<B){A=B}});return A}function processTimelineRefresh(J,D){if(twttr.is.def(J.users)){twttr.Tweeter.merge(J.users)}var G=$(\"#new_results_notification\").meta().timeline;var K=$(\"<div>\"+J[\"#timeline\"]+\"</div>\");var A=$(\"#content ol#timeline\");K.find(\"#timeline > li\").each(function(){if(A.find(\"li#\"+this.id).length){$(this).remove()}});var F=K.find(\"ol > li\");var C=F.length;var E=($(\"#new_results_notification\").data(\"count\")||0)+C;if(C){A.prepend(F.addClass(\"buffered\"));K.remove();A.find(\"li.buffered:gt(\"+(G.max_refresh_size-1)+\")\").remove();var B={results_count:numberWithDelimiter(E),username:getCurrentUserScreenName()};var H=$(\"#results_update\").is(\":visible\")?\"\":' style=\"display:none;\"';var I='<a id=\"results_update\" class=\"minor-notification\" href=\"/'+D+'\" accesskey=\"n\"'+H+\">\";if(D==\"inbox\"){I+=((E==1)?_(\"1 new message.\"):_(\"%{results_count} new messages.\",B))}else{if(D==\"replies\"){I+=((E==1)?_(\"1 new mention of @%{username}.\",B):_(\"%{results_count} new mentions of @%{username}.\",B))}else{I+=((E==1)?_(\"1 new tweet.\"):_(\"%{results_count} new tweets.\",B))}}I+=\"</a>\";$(\"#results_update\").replaceWith(I);$(\"#results_update\").click(function(){$(\"#content ol#timeline > li.buffered\").addClass(\"unbuffered\").removeClass(\"buffered\");if($(\"#new_results_notification\").data(\"count\")>G.max_refresh_size){$(\"#content ol#timeline > li:not(.unbuffered)\").remove();var M=$(\"#content ol#timeline > li\").attr(\"id\").replace(/^[^0-9]+/,\"\");var L=($(\"#results_update\").attr(\"href\")||window.location.hash||D).replace(/^([^\\/])/,\"/$1\")+\"?max_id=\"+M+\"&page=3&twttr=true\";$(\"#pagination\").html('<div id=\"#pagination\"><a id=\"more\" class=\"round more\" rel=\"next\" href=\"'+L+'\">'+_(\"more\")+\"</a></div>\")}else{$(\"#content ol#timeline > li.last-on-refresh\").removeClass(\"last-on-refresh\");$(\"#content ol#timeline > li.unbuffered:last\").addClass(\"last-on-refresh\")}updateTimeAgo();$(\"#content ol#timeline > li.unbuffered\").removeClass(\"unbuffered\");$(\"#results_update\").hide();addCountToDocumentTitle();$.Timeline.triggerPageHeightChangedEvent();$(\"#new_results_notification\").data(\"count\",0);return false});$(\"#new_results_notification\").data(\"count\",E);$(\"#results_update:hidden\").slideDown(\"normal\",function(){$.Timeline.triggerPageHeightChangedEvent();var L=$(this);if(twttr.is.def(twttr.HOVERCARD)){twttr.HOVERCARD.reposition(L.get(0).offsetHeight+parseInt(L.css(\"margin-top\")))}});addCountToDocumentTitle(E)}else{K.remove()}page.newResults=(C>0)}$(document).ready(function(){$().Page();twttr.setDefaultBucket();initializeTimeline();$(\"#pagination #more\").isMoreButton();$(\"body\").bind(\"ajaxSuccess\",twttr.setupRetweetTips);twttr.setupRetweetTips();$(\"span.byline a\").tipsy({gravity:\"n\"})});twttr.augmentObject(twttr,{RETWEETING_BACKGROUND_COLOR:\"#ffffe5\",_bucket:null,setDefaultBucket:function(){this._bucket=parseInt(page.sessionUserId)%2},getBucket:function(){return this._bucket},setBucket:function(A){this._bucket=A},applyTipsy:function(A,C,B){if(!A.data(\"tipsy_applied\")){A.data(\"tipsy_applied\",true);A.attr(\"title\",A.attr(\"title\")+C);A.tipsy(B)}},isRetweetTimeline:function(){return !!(location.hash&&location.hash.match(/retweet/))},setupRetweetTips:function(){$(\"span.status-body span.shared-content a.screen-name, div.shared-by-avatar-tiles a.profile-pic img.photo\").each(function(){var A=$(this);if(A.data(\"tipsy_applied\")||!twttr.isRetweetTimeline()){return }var B=\"left-align\";var C=\"\";if($(\"body#home\").length>0&&!A.hasClass(\"you\")){var C=_('<div class=\"retweet_tip_tip\">Tip: To hide/show retweets from this user, click on their username and look for the retweet setting <div class=\"retweet-icon\"></div></div>');B+=\" retweet-tooltip\"}twttr.applyTipsy(A,C,{gravity:\"l\",hideTimeout:10000,additionalCSSClass:B})});$(\"span.big-retweet-icon\").each(function(){if($(\"body#profile\").length==0){twttr.applyTipsy($(this),\"\",{gravity:\"s\",hideTimeout:10000})}else{$(this).attr(\"title\",\"\")}})},getStatusBodyParent:function(A){return A.parents(\".status-body\").parent()},setRetweetingStyles:function(B,E,D){var A=getListItemFromChild(B);var C=twttr.getStatusBodyParent(B);C.append(\"<span class='retweeting loading'>\"+E+\"</span>\");A.addClass(\"no-hover\");if($(\"body.status\").length==0){A.css(\"background-color\",twttr.RETWEETING_BACKGROUND_COLOR)}},unsetRetweetingStyles:function(B){var A=getListItemFromChild(B);var C=twttr.getStatusBodyParent(B);A.removeClass(\"no-hover\");C.find(\".retweeting.loading\").remove()},animateStatusReplacement:function(B,D){var C=getListItemFromChild(B);var F=$(D.status_li);F.hide();C.after(F);if(C.hasClass(\"latest-status\")){F.addClass(\"latest-status\")}var A=F.height();var E=C.height();F.remove().show().height(E);if($(\"body.status\").length==0){F.css(\"background-color\",twttr.RETWEETING_BACKGROUND_COLOR)}C.replaceWith(F);if(A!=E){F.animate({height:A},500,function(){F.css(\"height\",null);twttr.animateStatusColorChange(F)})}else{twttr.animateStatusColorChange(F)}if(D.latest_status){$(\"#latest_status\").html(D.latest_status).isCurrentStatus(true)}},animateStatusColorChange:function(A){A.animate({backgroundColor:\"#FFF\"},1500,function(){A.css(\"background-color\",null)})}});$.fn.Page=function(){var A=$('meta[name=\"session-user-screen_name\"]:first').get(0);var D=$('meta[name=\"page-user-screen_name\"]:first').get(0);var B=$('meta[name=\"session-userid\"]:first').get(0);var C=A&&D&&A.content==D.content;if(typeof (page)==\"undefined\"){page={}}page=$.extend(page,{timeline:null,sessionUserScreenName:(A?A.content:null),sessionUserId:(B?B.content:null),pageUserScreenName:(D?D.content:null),loggedIn:$('meta[name=\"session-loggedin\"][content=\"y\"]').length>0,hideUnfavorited:C,isTimelineChange:false,currentTimelineChange:{},$oldTimelineLink:\"\"})};$.Statuses={initialize:function(A){if(page.loggedIn){var B=$(A).find(\".hentry\");$.each($.Statuses.actions,function(){var C=this;C.apply(B)})}},actions:{isTweet:function(){this.livequery(function(){var A=$(\"body#show.status\").length>0;var B=$(\"body#profile\").length>0;if(!A&&!B){var C=$(this).find(\"a.hashtag\");C.isSearchLink(SEARCH_CALLBACKS.hashtagLink)}})},isHoverable:function(){if($(\"body.ie,body.ie6\").get(0)){this.livequery(function(){var A=$(this);A.hover(function(){A.addClass(\"hover\")},function(){A.removeClass(\"hover\")})})}},isFavoriteable:function(){this.find(\".fav-action\").live(\"click\",function(){var D=$(this);if(D.hasClass(\"blocked\")){return false}var B=D.parents(\".hentry:first\");var E=B.attr(\"id\").replace(/status_/,\"\");var C=D.hasClass(\"fav\")?\"destroy\":\"create\";twttr.googleAnalytics(\"/favorites/\"+C+\"/refresh/\"+E);function A(){var F=D.hasClass(\"fav\");D.removeClass(F?\"fav\":\"non-fav\").addClass(F?\"non-fav\":\"fav\").attr(\"title\",(F?_(\"favorite this tweet\"):_(\"un-favorite this tweet\")))}$.ajax({type:\"POST\",dataType:\"json\",url:\"/favorites/\"+C+\"/\"+E,data:{authenticity_token:twttr.form_authenticity_token},beforeSend:function(){A();D.addClass(\"blocked\")},complete:function(){D.removeClass(\"blocked\")}});return false})},isReplyable:function(){this.find(\".reply\").live(\"click\",function(){var E=$(this);var C=E.parents(\".hentry:first\");var G=C.attr(\"id\").replace(/status_/,\"\");var A=C.attr(\"class\").match(/u-([A-Za-z0-9_]+)/);var B=A[1];if(!B){alert(_(\"Whoops! Something went wrong. Please refresh the page and try again!\"));return }if(C.hasClass(\"direct_message\")){var F=$(\"#text\");twttr.googleAnalytics(\"/direct_messages/reply/\"+B+\"/\"+G);var D=$(\"#direct_message_user_id\");if(!D.find(\"option[text='\"+B+\"']\").attr(\"selected\",true).length){D.append('<option value=\"'+B+'\" selected=\"selected\">'+B+\"</option>\")}F.trigger(\"update\");$(\"#text\").focusEnd()}else{if(C.hasClass(\"status\")||C.hasClass(\"share\")){var F=$(\"#status\");twttr.googleAnalytics(\"/reply/\"+B+\"/\"+G);if(F.size()){F.val(\"@\"+B+\" \"+F.val().replace(RegExp(\"@\"+B+\" ?\",\"i\"),\"\")).trigger(\"update\");$(\"#status\").focusEnd();$(\"#in_reply_to_status_id\").val(G);$(\"#in_reply_to\").val(B);window.scroll(0,0)}else{window.location=E.find(\"a\").attr(\"href\");return false}}}window.scroll(0,0);return false})},isRetweetable:function(){this.find(\".retweet-link\").live(\"click\",function(A){new RetweetInlineForm().show({targetNode:$(this)});A.preventDefault()})},isDeleteable:function(){this.find(\".del\").live(\"click\",function(D){var C=$(this);var A=C.parents(\".hentry:first\");var F=A.attr(\"id\").replace(/[^\\d]*/,\"\");var E=A.hasClass(\"latest-status\");var B;if(A.hasClass(\"direct_message\")){B=\"/direct_messages/destroy\"}else{B=\"/status/destroy\"}if(confirm(_(\"Sure you want to delete this tweet? There is NO undo!\"))){twttr.googleAnalytics(B+\"/refresh/\"+F);$.ajax({type:\"POST\",url:B+\"/\"+F,data:{authenticity_token:twttr.form_authenticity_token,latest_status:E},dataType:(B==\"/status/destroy\"?\"json\":null),beforeSend:function(){A.fadeOut(500);updateCount(\"#update_count\",-1,250)},success:function(G){A.remove();if(B==\"/status/destroy\"){if(E){twttr.processJson(G);updateLatest()}}setCount(\"#update_count\",G.status_count)},error:function(){A.fadeIn(0);(new InfoNotification()).setMessage(_(\"Whoops! Something went wrong. Please try again!\")).show()}})}D.preventDefault()})},isUndoable:function(){this.find(\".undo\").live(\"click\",function(){var C=$(this);var B=C.parents(\".hentry:first\");var A=B.attr(\"id\").replace(/status_/,\"\");$.ajax({type:\"POST\",url:\"/statuses/\"+A+\"/retweet\",data:{_method:\"delete\",authenticity_token:twttr.form_authenticity_token,controller_name:page.controller_name,action_name:page.action_name,user_screenname:page.pageUserScreenName},dataType:\"json\",beforeSend:function(){C.attr(\"title\",\"\").removeClass(\"undo\");twttr.setRetweetingStyles(C,_(\"Undoing...\"))},success:function(D){if(D.status_li){twttr.animateStatusReplacement(C,D)}else{B.fadeOut(500,function(){var E=$(\"ol#timeline .hentry:visible:first\");if(!E.hasClass(\"share\")){E.addClass(\"latest-status\")}})}(new InfoNotification()).setMessage(_(\"Your followers will no longer see the tweet as retweeted by you.\")).show()},complete:function(){twttr.unsetRetweetingStyles(B)}});return false})},isMappable:function(){this.find(\".geo_pin\").live(\"click\",function(){var B=jQuery(this);var A=B.next();var C=B.position();A.css({left:C.left-25,bottom:C.top+20});A.show();A.find(\".map_close\").click(function(){A.hide();return false})})}}};$.Timeline={prepend:function(A){$(\"#timeline\").prepend(A);$.Timeline.triggerTimelineChanged()},append:function(A){$(\"#timeline\").append(A);$.Timeline.triggerTimelineChanged()},registerTimelineEvent:function(A){$(\"body\").bind(\"timeline-changed\",A)},unregisterTimelineEvent:function(A){$(\"body\").unbind(\"timeline-changed\",A)},triggerTimelineChanged:function(){$(\"body\").trigger(\"timeline-changed\")},registerPageHeightChangedEvent:function(A){$(\"body\").bind(\"page-height-changed\",A)},unregisterPageHeightChangedEvent:function(A){$(\"body\").unbind(\"page-height-changed\",A)},triggerPageHeightChangedEvent:function(){$(\"body\").trigger(\"page-height-changed\")}};function basicMoreButtonHandler(A){return function(){var C=$(this);C.blur();if(C.hasClass(\"loading\")){return false}var B=C.attr(\"href\");var D=$(\"#more\").text();$.ajax(jQuery.extend({type:\"GET\",url:B,dataType:\"json\"},A));return false}}$.fn.isMoreButton=function(){return this.live(\"click\",basicMoreButtonHandler({beforeSend:function(){$(\"#timeline li:last-child\").addClass(\"last-on-page\");$(\"#more\").addClass(\"loading\").html(\"\")},success:function(A){updateTimeAgo();if(twttr.is.def(A.users)){twttr.Tweeter.merge(A.users)}$(\"#timeline\").append($(A[\"#timeline\"]).find(\".hentry\"));$(\"#pagination\").html(A[\"#pagination\"]);if(window.onPageChange){onPageChange()}$.Timeline.triggerTimelineChanged()},error:function(){$(\"#timeline li:last-child\").removeClass(\"last-on-page\");$(\"#more\").removeClass(\"loading\").text(_(\"more\"));(new ShortNotification()).setMessage(_(\"Whoops! Something went wrong. Please try again!\")).show()}}))};$(function(){var request=function(data,success){return function(){var self=this;var $this=$(this);var notification=(new ProgressNotification()).setProgressMessage($this.attr(\"progress\")).setCompletedMessage($this.attr(\"completed\"));$.ajax({type:$this.attr(\"method\"),dataType:\"json\",url:$this.attr(\"href\")||$this.attr(\"action\"),data:data.apply(self),success:function(){notification.done();if(success){success.apply(self)}},beforeSend:function(){twttr.loading();notification.show()},complete:twttr.loaded});return false}};$(\"form.restful\").livequery(\"submit\",request(function(){return $(this).serializeArray()},function(){$(this).trigger(\"submitted\")}));$(\"a.restful\").livequery(\"click\",request(function(){return eval(\"(\"+$(this).attr(\"data\")+\")\")}))});function updateLatest(){var A=$(\"#latest_status\");if(A.length){A.isCurrentStatus(true)}$(\"#timeline li:first\").addClass(\"latest-status\")}function setTitleAndHeading(C){var K=$(\"#timeline_heading h1\");var I=$(\"#timeline_heading h2\");var C=C||$(\"body\").attr(\"id\");var A=h(page.query);var D=getCurrentUserScreenName();if(!twttr.titles_and_headings){var H={user:D,name:page.user_fullname};twttr.titles_and_headings={home:{title:_(\"Home\"),heading:_(\"Home\")},replies:{title:(\"@\"+D),heading:_(\"Tweets mentioning @%{user}\",H)},favorites:{title:_(\"Your Favorites\"),heading:_(\"Your Favorites\")},inbox:{title:_(\"Direct Messages\"),heading:_(\"Direct messages sent only to you\")},direct_messages:{title:_(\"Direct Messages\"),heading:_(\"Direct messages sent only to you\")},sent:{title:_(\"Sent Direct Messages\"),heading:_(\"Direct messages you've sent\")},retweets_by_others:{title:_(\"Retweets\",H),heading:\"&nbsp;\"},profile_favorites:{title:_(\"%{user}'s Favorites\",H),heading:_(\"%{user}'s Favorites\",H)},profile:{title:_(\"%{name} (%{user}) on Twitter\",H),heading:null}}}var E;if(C==\"search\"){E={title:_(\"Search - %{query}\",{query:page.query})};var B=$(\"#side #saved_searches ul.sidebar-menu li.active\");var J;if(B.length){var F=B.attr(\"id\").replace(\"ss_\",\"\");J='<a href=\"/saved_searches/destroy/'+F+'\" title=\"'+A+'\" class=\"delete-search-link\">'+_(\"Remove this saved search\")+\"</a></label>\"}else{J='<a href=\"/saved_searches/create\" class=\"save-search-link\" title=\"'+A+'\">'+_(\"Save this search\")}J=\"<label>\"+J+\"</a></label>\";if(page.searchResults){E.heading=J+_(\"Real-time results for <b>%{query}</b>\",{query:A})}else{E.heading=J+_(\"No results for <b>%{query}</b>\",{query:A})}}else{E=twttr.titles_and_headings[C]}if(E){var G=(C==\"profile\")?\"\":\"Twitter / \";setDocumentTitle(G+E.title);I.remove();if(E.heading){K.html(E.heading);K.parent(\"div\").show()}else{K.parent(\"div\").hide()}if(C==\"search\"){K.find(\".save-search-link\").isSaveSearchLink().end().find(\".delete-search-link\").isRemoveSearchLink()}}}$.fn.isSaveSearchLink=function(){return this.each(function(){var A=$(this);var B=$(\"#saved_searches\");var C=B.find(\"ul.sidebar-menu\");A.click(function(){if(C.find(\"li\").length>=10){(new InfoNotification()).setMessage(_(\"You can only save ten searches. To remove a saved search, select the search and click <strong>remove this saved search</strong>.\")).show();return false}var E=A.attr(\"title\");var D=$('<li><a href=\"/search?q='+encodeURIComponent(E)+'\" class=\"search-link\" title=\"'+h(E)+'\"><span>'+h(E)+\"</span></a></li>\");D.find(\"a\").isSearchLink(SEARCH_CALLBACKS.savedSearchLink);D.fadeOut(1,function(){C.append(D);D.fadeIn(100)});if(B.hasClass(\"collapsed\")){B.trigger(\"expand\")}B.fadeIn();$(\"#side ul.sidebar-menu li\").removeClass(\"active\");$(\"#side #custom_search\").removeClass(\"active\");D.addClass(\"active\");$.ajax({type:\"POST\",dataType:\"json\",url:\"/saved_searches/create\",data:{q:E,authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:function(){A.replaceWith('<span class=\"loading\">'+_(\"Save this search\")+\"</span>\")},success:function(F){D.attr(\"id\",\"ss_\"+F.id);setTitleAndHeading(\"search\")},error:function(F){(new InfoNotification()).setMessage(F.responseText).show();D.remove()}});return false})})};$.fn.isRemoveSearchLink=function(){return this.each(function(){var A=$(this);var C=A.attr(\"title\");var B=A.attr(\"href\");A.click(function(){var D=$(\"#side #saved_searches li a[title='\"+C+\"']\").parent(\"li\");D.fadeOut(100,function(){D.remove();var E=$(\"#saved_searches ul.sidebar-menu a\");if(E.length==0){$(\"#saved_searches\").hide()}setTitleAndHeading(\"search\");$(\"#side #custom_search\").addClass(\"active\")});$.ajax({type:\"POST\",url:B,data:{authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:function(){A.replaceWith('<span class=\"loading\">'+_(\"Remove this saved search\")+\"</span>\")},error:function(){(new InfoNotification()).setMessage(_(\"Whoops! Something went wrong. Please refresh the page and try again!\")).show()}});return false})})};function initializePage(A){if((\"home,search\".indexOf(A)==-1)&&($(\"body#list_show\").length==0)){twttr.updateLocation(A)}initializeSidebar();$(\"#side form#sidebar_search\").isSearchForm();$(\"#side .collapsible\").isCollapsibleMenu();onPageChange(true);timelineRefresh(A);$(\".saved-search-links li a\").isSearchLink(SEARCH_CALLBACKS.savedSearchLink);$(\".trends-links li a\").isSearchLink(SEARCH_CALLBACKS.trendLink);$(\"#dm_tabs a, #retweet_tabs a\").isTimelineTabLink();$(\"div.bulletin\").isBulletin();$(\"ul.sidebar-menu a\").isSidebarTab()}function initializeSidebar(){if($(\"#side ul.sidebar-menu li.active\").length==0){var B=$(\"body\").attr(\"id\");var A=null;if(B==\"search\"){B=page.query;if(B){var C=$.grep($(\"#side ul.sidebar-menu li a\"),function(D){return $(D).attr(\"title\")==page.query})[0];if(C){A=$(C).parent(\"li\")}else{$(\"#side #custom_search\").addClass(\"active\")}}}else{if(B){if(B==\"sent\"||B==\"inbox\"){B=\"direct_messages\"}A=$(\"#side ul.sidebar-menu li#\"+B+\"_tab\")}}if(A&&A.length){$(A.get(0)).addClass(\"active\")}}}$.fn.isCollapsibleMenu=function(){function A(){var B=[];$(\"#side .collapsible\").each(function(){var C=$(this);var E=C.find(\"h2.sidebar-title\").attr(\"id\");if(E){E=E.replace(\"_menu\",\"\")}else{return true}var D=C.hasClass(\"collapsed\")?\"C\":\"O\";B.push(E+D)});$.cookie(\"menus\",B.join(\"_\"))}return this.each(function(){var D=$(this);var B=D.find(\"h2.sidebar-title\");function F(G){$.ajax({type:\"GET\",url:G,dataType:\"html\",beforeSend:function(){D.addClass(\"loading\")},success:function(H){D.find(\".sidebar-menu\").remove();B.after(H);C()},complete:function(){D.removeClass(\"loading\")}})}function C(){var G=D.find(\".sidebar-menu\");D.find(\"#friends_view_all\").fadeIn();G.slideDown(100,function(){D.removeClass(\"collapsed\");A()})}function E(){var G=D.find(\".sidebar-menu\");D.find(\"a.xref\").fadeOut(100);D.find(\"div#friends_view_all\").fadeOut(100);G.slideUp(100,function(){D.addClass(\"collapsed\");A()})}D.bind(\"expand\",function(){C()});D.bind(\"collapse\",function(){E()});B.click(function(H){if(H.target.nodeName.toLowerCase()==\"a\"){return true}var G=D.find(\"a.fetch-contents\");if(D.hasClass(\"collapsed\")){D.find(\"a.xref\").fadeIn(100);if(G.length){F(G.attr(\"href\"));G.remove()}else{C()}}else{E()}})})};$.fn.isSidebarTab=function(){return this.each(function(){var A=$(this);A.bind(\"click\",function(){A.trigger(\"active\")}).bind(\"active\",null,function(B){if(A.parents(\"#side\").length>0){$(window).scrollTop(0);$(\"#side ul.sidebar-menu li, #trends_list li\").removeClass(\"active\");$(\"#side #custom_search\").removeClass(\"active\");A.parent(\"li\").addClass(\"active\")}}).bind(\"loading\",null,function(B){A.parent(\"li\").addClass(\"loading\")}).bind(\"loaded\",null,function(B){A.parent(\"li\").removeClass(\"loading\")}).bind(\"aborted\",null,function(B){A.parent(\"li\").removeClass(\"loading\")})})};$.fn.isInPageLink=function(A){return this.each(function(){var B=$(this);var C=B.meta();var D=C.dispatch_action;B.click(function(G){var E=G.srcElement||G.originalTarget||G.target;if(E.tagName.toLowerCase()==\"em\"){G.stopImmediatePropagation();return true}if($.browser.msie){this.hideFocus=true}var F=B.attr(\"href\");page.query=\"\";if(page.isTimelineChange){page.currentTimelineChange.abort();page.$oldTimelineLink.trigger(\"aborted\")}page.currentTimelineChange=$.ajax({type:\"GET\",url:F,dataType:\"json\",beforeSend:function(){page.isTimelineChange=true;B.trigger(\"loading\");page.$oldTimelineLink=B},success:function(H){if(twttr.is.def(H.users)){twttr.Tweeter.merge(H.users)}twttr.processJson(H);twttr.updateLocation(D==\"list\"?\"/list\"+F:F);if(D){page.action_name=D;$(\"body\").attr(\"id\",D);if(D==\"direct_messages\"||D==\"inbox\"||D==\"sent\"){$(\"#direct_message_form\").trigger(\"loadrecipients\")}}if(page.timelineRefresher){page.timelineRefresher.stop();page.timelineRefresher=null}addCountToDocumentTitle();timelineRefresh(D,F);$.Timeline.triggerPageHeightChangedEvent()},complete:function(H){$(\"#sidebar_search_q\").val(\"\").blur();onPageChange();$(\"body\").addClass(\"replyable\");B.trigger(\"loaded\");page.isTimelineChange=false;if(A){A(B)}}});return false})})};function reloadTimeline(B){var A=(window.location.hash||B).toString().replace(/^#?([^\\/])/,\"/$1\").replace(/^\\/?list/,\"\");page.currentTimelineChange=$.ajax({type:\"GET\",url:A,dataType:\"json\",beforeSend:function(){page.isTimelineChange=true},success:function(C){if(twttr.is.def(C.users)){twttr.Tweeter.merge(C.users)}twttr.processJson(C);if(page.timelineRefresher){page.timelineRefresher.stop();page.timelineRefresher=null}addCountToDocumentTitle();timelineRefresh(B,A)},error:function(){(new InfoNotification()).setMessage(_(\"Whoops! Something went wrong. Please refresh the page and try again!\")).show()},complete:function(){$(\"#sidebar_search_q\").val(\"\").blur();onPageChange();$(\"body\").addClass(\"replyable\");initializeTimeline();$(\"#timeline\").removeClass(\"loading\");page.isTimelineChange=false;if(B.match(/\\/?list\\//)){var C=$(\".lists-links a[href=\"+h(A)+\"]\");$(\"#side ul.sidebar-menu li, #trends_list li\").removeClass(\"active\");$(\"#side #custom_search\").removeClass(\"active\");if(C.length){C.parent(\"li\").addClass(\"active\");setTimelineForListInPageLink(C)}}}})}$.fn.isBulletin=function(){return this.each(function(){var A=$(this);var B=A.find(\"a.close, a.hide\");B.click(function(){A.fadeOut();return false})})};$.fn.isBrowserUpgradeBulletin=function(A){return this.each(function(){var B=$(this);B.find(\"a.close, a.hide\").click(function(){$.cookie(A+\"_upgrade\",\"y\")})})};$.fn.isDeviceFailBulletin=function(){return this.each(function(){var A=$(this);var B=A.find(\"a.hide-fail-notice, a.close, a.hide\");var C=B.attr(\"id\").replace(\"hide_device_\",\"\");B.click(function(){$.ajax({type:\"POST\",dataType:\"text\",url:\"/devices/update/\"+C,data:{authenticity_token:twttr.form_authenticity_token,\"device[fail_alert]\":\"0\",twttr:true},success:function(D){if(D.match(/success/)){A.fadeOut(200)}else{twttr.error()}},beforeSend:null,complete:null});return false})})};$.fn.isBouncingEmailBulletin=function(){return this.each(function(){var A=$(this);A.find(\"a.close, a.hide\").click(function(){$.ajax({type:\"POST\",dataType:\"text\",url:\"/bouncers/reset\",data:{authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:null,complete:function(){(new InfoNotification()).setMessage(_(\"Your email notifications should resume shortly.\")).show()}});return false})})};$.fn.isNotificationSetting=function(){return this.each(function(){var B=$(this);var A=B.attr(\"id\").replace(\"notify_on_\",\"\").replace(\"notify_off_\",\"\");B.click(function(){var C=B.attr(\"value\");$.ajax({type:\"POST\",dataType:\"text\",url:\"/friendships/device_\"+C+\"/\"+A,data:{authenticity_token:twttr.form_authenticity_token,twttr:true},success:function(D){if(D.match(/success/)){$(\".follow-control\").trigger(\"refresh\",[\"notify_\"+(C==\"follow\"?\"on\":\"off\")])}else{twttr.error()}}})})})};$.fn.isNudgable=function(){return this.each(function(){var A=$(this);A.click(function(){var B=A.parents(\"form\");B.find(\"input[name=authenticity_token]\").val(twttr.form_authenticity_token);B.submit();return false})})};$.fn.isSlugField=function(B,A){return this.bind(\"keyup\",function(){var C=slug($(this).val());if(B){B.val(C)}if(A){A.text(C)}})};var slug=function(A){return A.toLowerCase().replace(/[^a-z0-9]/g,\"-\").replace(/-+/g,\"-\").replace(/^[_-]+|[_-]+$/g,\"\")};$.fn.isDeleteButton=function(A){if(!confirm(A)){return false}};$.fn.disable=function(){$(this).attr(\"disabled\",\"disabled\").addClass(\"disabled\")};$.fn.enable=function(){$(this).removeAttr(\"disabled\").removeClass(\"disabled\")};$.fn.textAreaSizeLimiter=function(C){var D=$(this);var A=C.maxLength;var B=C.infoMessageSelector;var E=D.parents(\"form\").find(\"input[type=submit]\");D.keyup(function(){var F=D.val().length;if(F>A){E.attr(\"disabled\",\"DISABLED\").removeClass(\"btn\").addClass(\"dbtn\");$(B).show()}else{E.removeAttr(\"disabled\").removeClass(\"dbtn\").addClass(\"btn\");$(B).hide()}})};$.fn.isPasswordStrengthField=function(A,B){return this.each(function(){if(!A){return }if(!B){B={}}var H=$(this);var J=$(A);J.append('<span class=\"pstrength-text\"></span>');var F=J.find(\".pstrength-text\");function E(K){J.children().each(function(){var L=$(this);if(L.hasClass(\"pstrength-text\")){if(K){L.show()}else{L.hide()}}else{if(K){L.hide()}else{L.show()}}})}function I(K){var M=0;var L=B.minlength?B.minlength:6;if(K.length<L){return{score:K.length,message:_(\"Too short\"),className:\"password-invalid\"}}if(B.username){var N=(typeof (B.username)==\"function\")?B.username():B.username;if(N&&(K.toLowerCase()==N.toLowerCase())){return{score:0,message:_(\"Too obvious\"),className:\"password-invalid\"}}}if($.inArray(K.toLowerCase(),twttr.BANNED_PASSWORDS)!=-1){return{score:0,message:_(\"Too obvious\"),className:\"password-invalid\"}}M+=K.length*4;M+=(D(1,K).length-K.length)*1;M+=(D(2,K).length-K.length)*1;M+=(D(3,K).length-K.length)*1;M+=(D(4,K).length-K.length)*1;if(K.match(/(.*[0-9].*[0-9].*[0-9])/)){M+=5}if(K.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)){M+=5}if(K.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)){M+=10}if(K.match(/([a-zA-Z])/)&&K.match(/([0-9])/)){M+=15}if(K.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&K.match(/([0-9])/)){M+=15}if(K.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&K.match(/([a-zA-Z])/)){M+=15}if(K.match(/^\\w+$/)||K.match(/^\\d+$/)){M-=10}if(M<0){M=0}if(M>100){M=100}if(M<34){return{score:M,message:_(\"Weak\"),className:\"password-weak\"}}if(M<50){return{score:M,message:_(\"Good\"),className:\"password-good\"}}if(M<75){return{score:M,message:_(\"Strong\"),className:\"password-strong\"}}return{score:M,message:_(\"Very Strong\"),className:\"password-verystrong\"}}function D(L,O){var K=\"\";for(var N=0;N<O.length;N++){var P=true;for(var M=0;M<L&&(M+N+L)<O.length;M++){P=P&&(O.charAt(M+N)==O.charAt(M+N+L))}if(M<L){P=false}if(P){N+=L-1;P=false}else{K+=O.charAt(N)}}return K}function C(K){if(K&&J.hasClass(K)){return false}J.removeClass(\"password-weak\").removeClass(\"password-good\").removeClass(\"password-strong\").removeClass(\"password-verystrong\").removeClass(\"password-invalid\");return true}function G(){var L=H.val();if(L.length==0){C();E(false)}else{if(L.length){E(true)}}if(L.length>0){var K=I(L);F.html(K.message);if(C(K.className)){J.addClass(K.className)}}}H.bind(\"show-password-meter\",function(){J.show()});H.bind(\"hide-password-meter\",function(){J.hide()});H.keyup(function(){G()});H.blur(function(){if(this.value.length==0){C();H.trigger(\"hide-password-meter\")}});if(H.val()){G();J.show()}})};$.fn.isOAuthApplication=function(){return this.each(function(){var C=$(this);var B=C.attr(\"id\").replace(\"oauth_application_\",\"\");var A=C.find(\".revoke-access\");A.click(function(){$.ajax({type:\"POST\",dataType:\"json\",url:\"/oauth/revoke\",data:{authenticity_token:twttr.form_authenticity_token,token:B,twttr:true},success:function(D){if(D.revoked){C.addClass(\"revoked\")}else{C.removeClass(\"revoked\")}A.text(D.label)}});return false})})};$.fn.screenName=function(){return $(this).find(\".screen-name\").text()||page.sessionUserScreenName};$.fn.userId=function(){var A;if(A=$(this).attr(\"id\")){return A.replace(\"user_\",\"\")}else{return page.sessionUserId}};twttr.klass(\"twttr.MinimumDelayCallback\",function(A){this.waitUntil=twttr.getTimeMillis()+A}).method(\"delay\",function(C){var A=twttr.getTimeMillis();var B=this.waitUntil-A;if(B>0){setTimeout(function(){this.delay(C)}.pBind(this),B)}else{C.apply()}});twttr.augmentObject(twttr,{getTimeMillis:function(){return new Date().getTime()}});jQuery.fn.pulsate=function(F,C){var D=$(this);var E=1;var A=function(){E=E+0.5;var G=E>F?function(){}:B;D.fadeIn(C,G)};var B=function(){E=E+0.5;D.fadeOut(C,A)};B()};$(\"html\").keypress(function(C){var B=C.charCode?C.charCode:C.keyCode?C.keyCode:0;var A=$(C.target);if(A&&A.hasClass(\"a-btn\")&&B==32){A.click();C.preventDefault()}});$(\"#status_update_form\").isUpdateForm();twttr.ajaxSetup=function(){$.ajaxSetup({data:{twttr:true,authenticity_token:twttr.form_authenticity_token}})};var searchSummize=function(E,B,F,A){page.query=E;var D=$(\"body#search #timeline li.search_result\").attr(\"id\");if(D&&page.retainTimeline){page.maxId=D.substring(7)}else{page.maxId=null}var C={q:page.query,rpp:20,maxId:page.maxId,callback:F||window.SEARCH_CALLBACKS.summize,layout:\"none\"};if(A){C.page=A}$(\"#side #q\").val(E);B.trigger(\"loading\");return $.ajax({url:page.summizeSearchUrl,data:C,dataType:\"script\",cache:false,complete:function(){$(\"#side #primary_nav li\").removeClass(\"active\");$(\"body\").attr(\"id\",\"search\");var H=\"\";if($(\"body.front\").length){H=$(\"#trends_list li.active\").length?\"front/trends\":\"front/custom_search\"}else{var G=$(\"#side li.active a.search-link\").parents(\"div#trends, div#saved_searches\");H=G.length==0?$(\"#side div#custom_search.active\").attr(\"id\"):G.attr(\"id\")}twttr.trackPageView($(\"body\").attr(\"id\"),(page.query&&page.query.length>0?page.query:null),\"/\"+H+(!page.retainTimeline?\"/ajax\":\"/ajax/more\"));B.trigger(\"loaded\");page.retainTimeline=null;page.isTimelineChange=false}})};var sponsoredSearch=function(A){if(page.showSS){$.ajax({url:\"/timeline/garuda_search\",data:{query:page.query,authenticity_token:twttr.form_authenticity_token},type:\"post\",dataType:\"html\",success:function(B){clearTimelineIfNewSearch();$(\"#timeline\").prepend(B);processSummizeInternal(A)},error:function(){clearTimelineIfNewSearch();processSummizeInternal(A)}})}else{clearTimelineIfNewSearch();processSummizeInternal(A)}};var processSummize=function(A){var B=getPageNumAndUrl(A)[0];if(B==2){sponsoredSearch(A)}else{clearTimelineIfNewSearch();processSummizeInternal(A)}};var clearTimelineIfNewSearch=function(){var A=(page.query!=\"\");if(A){if(!page.retainTimeline){$(\"#timeline\").empty();$(\"#pagination\").empty();$(\"#content .no-results\").remove();$(\"#results_update\").hide()}}};var getPageNumAndUrl=function(A){var E=$(A);var B=1;var D;var C=E.find(\".paginator a.next\");if(C.length){D=C.attr(\"href\");D.match(/\\?.*page=([0-9]+)/gi);B=RegExp.$1;B=B?parseInt(B):1}return[B,D]};var processSummizeInternal=function(B){var J=page.trendDescriptions[page.query];if(J){$(\"#trend_info\").hide();$(\"#trend_description span\").text(_(\"%{trend} is a popular topic on Twitter right now.\",{trend:J[0]}));$(\"#trend_description p\").html(J[1]);$(\"#trend_description\").show()}else{$(\"#trend_description\").hide();$(\"#trend_info\").show()}var H=$(B);var M=$(\".homepage #timeline\").length;var C=M&&!$(\".homepage #timeline li\").length;var F=$(\"#timeline\");var L=(page.query!=\"\");$(\"body\").attr(\"id\",\"search\");var E=getPageNumAndUrl(B)[1];var D=[];if(L){D=renderResultsFromSummize(H,F,M)}$(\"#container, #side_base\").show();F.find(\".msgtxt a\").each(twttr.appendClassesToSearchResults);F.find(\".msgtxt\").prev().addClass(\"tweet-url screen-name\");F.find(\"span.vcard a\").addClass(\"tweet-url profile-pic\");F.find(\".search_result\").find(\".status-body a,.vcard a\").each(function(){var P=$(this);var N=P.attr(\"href\");if(N.match(/^\\/search\\?q=([^&]+)/)){P.removeAttr(\"target\");var O=decodeURIComponent(RegExp.$1);P.attr(\"title\",O);P.isSearchLink(O.match(/^#/)?SEARCH_CALLBACKS.hashtagLink:SEARCH_CALLBACKS.inResultsLink)}else{if(N.match(/^https?:\\/\\/twitter\\.com/)){P.removeAttr(\"target\")}}});if(page.searchResults=(D.length>0&&L)){if(!M){enfavoriteSummize(D)}page.maxId=D[0];if(E){$(\"#pagination\").empty().html('<a id=\"search_more\" class=\"round more\" rel=\"next\" href=\"'+E+'\">'+_(\"more\")+\"</a>\").find(\"a\").isSearchMoreButton(M)}else{$(\"#pagination\").empty().html('<p class=\"no-more-tweets\">'+_(\"Older tweets are temporarily unavailable.\")+\"</p>\")}}else{var I=[_(\"Try a more general search.\"),_(\"Try using different words.\")];var K='<div class=\"no-results\">'+_(\"Suggestions:\")+\"<ol>\";for(var G=0;G<I.length;G++){K+=\"<li>\"+_(I[G])+\"</li>\"}K+=\"</ol></div>\";setTimeout(function(){$(\"#timeline_heading\").after(K)},1)}twttr.updateLocation(\"search?q=\"+encodeURIComponent(page.query));initializeSidebar();var A=$(\"#sidebar_search_q, #home_search_q\");if(A.val()!=page.query){A.val(page.query);A.css(\"color\",\"#000\")}onPageChange(C);$(\"#side #rssfeed a.search-rss\").attr(\"href\",\"http://search.twitter.com/search.atom?q=\"+h(encodeURIComponent(page.query)));summizeRefresh()};if(!window.SEARCH_CALLBACKS){window.SEARCH_CALLBACKS={summize:\"processSummize\",load:\"pageLoadSearch\",searchLink:\"processSearchLink\",trendLink:\"processTrendLink\",savedSearchLink:\"processSavedSearchLink\",searchForm:\"processSearchForm\",hashtagLink:\"processHashtagLink\",inResultsLink:\"processInResultsLink\",more:\"processSearchMore\",refresh:\"processSearchRefresh\"};$.each(window.SEARCH_CALLBACKS,function(){window[this]=window.processSummize})}function renderResultsFromSummize(C,B,A){var D=[];C.find(\".result\").each(function(){var J=$(this);J.find(\".location,.thread,.to_av,p.clearleft,.expand,#share\").remove();var F=$(J.find(\".avatar\").get(0));F.replaceWith('<span class=\"thumb vcard author\">'+F.html()+\"</span>\");var L=$(J.find(\".info\").get(0));var M,G,E;L.find(\"a.lit\").each(function(){E=$(this).attr(\"href\");var P=E.match(/\\/(\\w+)\\/statuses\\/(\\d+)/);M=P[2];D.push(M);G=P[1]});var H=L.find(\".source\").remove();L.find(\"a\").remove();L.html('<a href=\"'+E+'\">'+L.html()+\"</a>\");L.append(H);var O='<span class=\"meta entry-meta\">'+L.html().replace(/\\u00B7/g,\"\")+\"</span>\";L.remove();var N=$(J.find(\".msg\").get(0));N.replaceWith(($.browser.msie6?'<img src=\"http://s.twimg.com/a/1267135446/images/white.png\" width=\"1\" height=\"50\" align=\"left\">':\"\")+N.html().replace(/a>\\s*:\\s*<span/,\"a> <span\")+O);var K=J.html();if(!A){K='<span class=\"actions\"><div><a href=\"#\" class=\"fav-action non-fav\" id=\"status_star_'+M+'\"> &nbsp; </a></div></span>'+K;K+='<ul class=\"actions-hover\"><li><span class=\"reply\"><span class=\"reply-icon icon\"></span><a href=\"/home?status=@'+G+\"%20&in_reply_to_status_id=\"+M+\"&in_reply_to=\"+G+'\">Reply</a></span></li><li><span class=\"retweet-link\"><span class=\"retweet-icon icon\"></span><a href=\"#\" title=\"Retweet\">Retweet</a></span></li></ul>'}var I=$('<li class=\"hentry status search_result u-'+G+'\" id=\"status_'+M+'\"><span class=\"status-body\">'+K+\"</span></li>\");B.append(I)});return D}function enfavoriteSummize(A){if(page.loggedIn&&A.length>0){$timeline=$(\"#timeline\");$.ajax({type:\"POST\",dataType:\"json\",url:\"/favourings/intersect_for_search\",data:{authenticity_token:twttr.form_authenticity_token,\"status_id[]\":A,twttr:true},beforeSend:null,success:function(B){$.map(B,function(C){$timeline.find(\"#status_\"+C+\" .non-fav\").addClass(\"fav\").removeClass(\"non-fav\")})},complete:null})}}function summizeRefresh(){if(page.timelineRefresher){page.timelineRefresher.stop();page.timelineRefresher=null;addCountToDocumentTitle()}var B=$(\"#results_update\");B.data(\"count\",0);var A=$(\"#new_results_notification\").meta().search;if(page.summizeRefresher||$(\"#results_update\").length==0){return }page.newResults=null;page.summizeRefresher=new Occasionally(A.delay*1000,A.max_delay*1000,function(){var C=false;$.ajax({dataType:\"script\",url:page.summizeSearchUrl,data:{q:page.query,since_id:page.maxId,refresh:true,callback:\"processSummizeRefresh\"},cache:false,callback:null})},function(){return page.newResults},A.decay);page.summizeRefresher.start()}function processSummizeRefresh(B){if(decodeURIComponent(B.query).replace(/\\+/g,\" \")==page.query&&B.total){page.maxId=B.max_id;var C=page.summizeRefreshResults=(page.summizeRefreshResults||0)+B.total;var A=$(\"#results_update\").is(\":visible\")?\"\":' style=\"display:none;\"';var D='<a id=\"results_update\" class=\"minor-notification\"'+A+\">\";D+=(C==1)?_(\"1 more tweet since you started searching.\"):_(\"%{results_count} more tweets since you started searching.\",{results_count:numberWithDelimiter(C)});D+=\"</a>\";$(\"#results_update\").replaceWith(D);$(\"#results_update:hidden\").slideDown();$(\"#results_update\").attr(\"title\",page.query).attr(\"href\",\"/search?q=\"+encodeURIComponent(h(page.query))).isSearchLink(SEARCH_CALLBACKS.refresh).click(function(){addCountToDocumentTitle();return false});if(C){addCountToDocumentTitle(C)}page.newResults=true}else{page.newResults=false}}$.fn.isSearchMoreButton=function(A){return this.each(function(){var B=$(this);B.click(function(){B.blur();var D=B.attr(\"href\");D.match(/\\?.*page=([0-9]+)/gi);var C=RegExp.$1;page.retainTimeline=true;$(\"#timeline li:last-child\").addClass(\"last-on-page\");searchSummize(page.query,B,SEARCH_CALLBACKS.more,C);B.addClass(\"loading\").html(\"\");return false})})};function onPageChange(A){var C=$(\"body\").attr(\"id\");setTitleAndHeading(C);if(!A){if(page.summizeRefresher){page.summizeRefresher.stop();page.summizeRefresher=null;page.summizeRefreshResults=null}if(!page.retainTimeline){$(\"#results_update\").hide()}$(\".no-results\").remove();$(\"#new_results_count\").html(\"0\")}$(\".in-page-link\").isInPageLink();$(\".in-page-list-link\").isListInPageLink();try{$(\".in-page-list-label\").isListInPageLabel();$(\".in-page-label\").isInPageLabel()}catch(B){}if(C==\"list\"||C==\"list_show\"){C=(window.location.hash||window.location.pathname).replace(/^#/,\"\").replace(/^([^\\/])/,\"/$1\");if(C.indexOf(\"/list\")!=0){C=\"/list\"+C}}twttr.trackPageView(C,(page.query&&page.query.length>0?page.query:null),A?null:\"/ajax\")}$.fn.isSearchLink=function(A){return this.each(function(){var B=$(this);B.click(function(C){C.preventDefault();if($.browser.msie){this.hideFocus=true}if(page.isTimelineChange&&page.currentTimelineChange){page.currentTimelineChange.abort();page.$oldTimelineLink.trigger(\"aborted\");page.isTimelineChange=false}page.isTimelineChange=true;page.currentTimelineChange=searchSummize(B.attr(\"name\")?B.attr(\"name\"):B.attr(\"title\"),B,A);if(B.parents(\"#side\").length>0){$(\"#side ul.sidebar-menu li\").removeClass(\"active\");B.parent(\"li\").addClass(\"active\")}$(\"#trends_list li.active a\").removeClass(\"active\")})})};$.fn.isSearchForm=function(){return this.each(function(){var B=$(this);var A=$(B.find('input[type=\"text\"]')[0]);var C=B.find(\"#sidebar_search_submit\");A.Watermark(_(\"Search\")).focus(function(){A.select();return true});C.click(function(){B.submit()});B.submit(function(){var D=A.val();if(D!=\"\"){C.addClass(\"loading\");searchSummize(D,B,SEARCH_CALLBACKS.searchForm)}$(\"#side ul.sidebar-menu li\").removeClass(\"active\");$(\"#side #custom_search\").addClass(\"active\");return false});B.bind(\"loaded\",null,function(D){C.removeClass(\"loading\")})})};function loadTrendDescriptions(){$(\"#trends a\").each(function(){var A=$(this);var C=A.parent().find(\"em\");if(C.length){var B=A.text();var D=C.text().replace(new RegExp(B.replace(/([^\\w])/gi,\"\\\\$1\"),\"gi\"),\"<strong>\"+B+\"</strong>\");page.trendDescriptions[A.attr(\"title\")]=[B,D]}})}$(document).ready(function(){$(\"#tweet_search_submit\").click(function(){$(\"#tweet_search\").submit()});$(\"#content #trend_description img\").tipsy({gravity:\"s\"});page.trendDescriptions={};loadTrendDescriptions();if($(\"body\").attr(\"id\")==\"search\"){onCondition(function(){return page.summizeResults},function(){window[SEARCH_CALLBACKS.summize](page.summizeResults)})}});twttr.appendClassesToSearchResults=function(){var A=$(this);A.addClass(\"tweet-url\");if(A.text().match(/^@/)){A.addClass(\"username\")}else{if(A.text().match(/^#/)){A.addClass(\"hashtag\")}else{A.addClass(\"web\")}}};var LIST_PUBLIC_MODE=\"public\";var LIST_PRIVATE_MODE=\"private\";var LIST_MAX_NAME_LENGTH=25;var LIST_MAX_DESCRIPTION_LENGTH=100;var numeric_mode=function(A){switch(A){case\"public\":return 0;case\"private\":return 1;default:return 0}};var updateListFollowersCount=function(A){return updateCount(\"#subscribers_tab .stat-count\",A)};var updateListFollowingCount=function(A){return updateCount(\"#members_tab .stat-count\",A)};var fadeUserOnListUnfollow=function(A){A.fadeOut(\"medium\",function(){A.remove()})};var onListMembersPage=function(A){return $(\"body\").hasClass(\"lists_members\")&&$('.list-header h2 a[href=\"'+A.uri+'\"]').length==1};var linkToList=function(A,B){A.dispatch_action=\"list\";return'<li><a class=\"list_'+A.id+'\" href=\"'+A.uri+'\" data=\"'+h(JSON.stringify(A))+'\">'+(B?\"<em />\":\"\")+\"<span>\"+listDisplayName(A)+\"</span></a></li>\"};var listDisplayName=function(A){return(page.sessionUserScreenName&&page.sessionUserScreenName==A.user?h(A.slug):\"<b>@</b>\"+h(A.user)+\"/<wbr/>\"+h(A.slug))+lockIconForList(A)};var lockIconForList=function(A){return(A.mode==LIST_PRIVATE_MODE)?'<span class=\"lock-icon\" title=\"Private List\"></span>':\"\"};var findListIndexBySlug=function(A,B){return jQuery.map(A,function(D,C){if(D.slug==B){return C}else{return null}})};$.fn.isUserListMenu=function(){var A=$(\"#list_menu\");return this.one(\"click\",function(){var D=$(this);var E=D.parents(\".user\");var C={};$.map(E.meta().lists,function(F){C[F.slug]=true});$(\"body\").click();D.addClass(\"clicked\").after(A.html());var B=D.siblings(\"ul\");if(B.find(\"li:not(.new-list)\").size()>=twttr.ListPerUserLimit){B.find(\".new-list\").remove()}B.find(\"li\").each(function(){var F=$(this);if(F.hasClass(\"new-list\")){F.isNewListLink()}else{F.isUserListItem(C[F.find('input[type=\"checkbox\"]').meta().slug])}});$(\"html\").one(\"click\",function(){D.removeClass(\"clicked\").blur().siblings(\"ul\").remove().end().isUserListMenu();return false});return false})};$.fn.isUserListItem=function(D){var A=function(I,H,F,G){I.show();H.hide();var E=(G==\"POST\");H.attr(\"checked\",E);F.unbind(\"click.checkbox\");F.bind(\"click.while-processing\",function(){return false})};var C=function(H,G,F,E){H.hide();G.show();F.unbind(\"click.while-processing\");F.bind(\"click.checkbox\",function(I){B.call(this,F,G,H,E);return false})};var B=function(M,F,I,L){var H=L?\"DELETE\":\"POST\";var G=M.parents(\".user\");var K=G.attr(\"id\").replace(\"user_\",\"\");var J={authenticity_token:twttr.form_authenticity_token,twttr:true};var E=M.find('input[type=\"checkbox\"]').meta().uri+\"/members\";if(H==\"POST\"){J[\"member[id]\"]=K}else{E+=\"/\"+K}$.ajax({type:H,dataType:\"json\",url:E,data:J,beforeSend:function(){A(I,F,M,H)},complete:function(){C(I,F,M,L)},success:function(N){L=(H==\"POST\");F.attr(\"checked\",L);if(H==\"POST\"){addListToUser(G,N);if(onListMembersPage(N)){updateListFollowingCount(1)}}else{removeListFromUser(G,N);if(onListMembersPage(N)){fadeUserOnListUnfollow(G);updateListFollowingCount(-1)}}},error:function(){F.attr(\"checked\",L)}})};return this.each(function(){var E=$(this);var F=E.find('input[type=\"checkbox\"]');var H=E.find(\".loading-spinner\");var G=false;if(D){G=F.attr(\"checked\",true)}E.bind(\"click.checkbox\",function(I){B.call(this,E,F,H,G);return false})})};$.fn.isNewListLink=function(){return this.click(function(){var A=$(this).parents(\".user\");if(A.length==0){A=null}$(this).parent(\".ul\").remove();openListDialog(true,{userObject:A});return false})};$.fn.isEditListLink=function(){return this.click(function(){openListDialog(false,$(this).meta());return false})};var openListDialog=function(D,F){if(!F){F={}}var G=$(\"#list_dialog\");var B=$(G.html());var A=new twttr.dialog(false,{closeButton:true,content:B,heading:$($(\"#list_dialog_header\").html()),modal:true,width:\"405px\"});A.bind(\"close\",function(){A.$root.remove()});var E=\"\";A.$root.addClass(\"list-dialog\");if(D){A.$root.addClass(\"create-list-dialog\")}else{E=F.description;A.$root.addClass(\"update-list-dialog\").find('input[type=\"submit\"]').val(_(\"Update list\")).end().find(\".list-name\").val(F.name).end().find(\".list-slug-title-and-slug\").show().end().find(\".list-description\").val(E).end().find(\".list-link span\").text(F.slug).end().find('input[name=\"list[mode]\"][value=\"'+numeric_mode(F.mode)+'\"]').attr(\"checked\",true);var C=A.find(\".private-warning\");A.find('input[name=\"list[mode]\"]').change(function(){if(this.value==numeric_mode(LIST_PRIVATE_MODE)&&this.checked){C.show()}else{C.hide()}})}$(\".list-description\",A.$root).maxLength(LIST_MAX_DESCRIPTION_LENGTH-2);A.find(\".list-name\").focus();A.$root.isListDialog(D,F,A);A.open()};$.fn.isListDialog=function(C,A,B){return this.each(function(){var G=$(this);var F=A.userObject;var D=G.find(\"form\");D.find(\".list-name\").one(\"keyup\",function(){console.log(\"keyup\");$(this).siblings(\".list-slug-title-and-slug\").show()}).isSlugField(D.find(\".list-slug-field\"),D.find(\".list-link span\"));if(F){D.find(\".list-member-id\").val(F.userId())}var E=$(this).find('input[type=\"submit\"]');D.submit(function(I){var H=D.serialize();if(!C){H+=\"&\"+$('<input type=\"hidden\" name=\"_method\" value=\"PUT\" />').serialize()}$.ajax({type:\"POST\",dataType:\"json\",url:C?D.attr(\"action\"):A.uri,data:H,beforeSend:function(){E.attr(\"disabled\",\"disabled\")},success:function(J){B.close();B.$root.remove();if(C){addListToMenu(J);if(F){addListToUser(F,J)}addListToLists(J);(new ShortNotification()).setMessage(_(\"Yay! Your list was created.\")).show()}else{window.location=J.uri}},error:function(J){(new InfoNotification()).setMessage(J.responseText).show()},complete:function(){E.removeAttr(\"disabled\",\"disabled\")}});I.preventDefault()})})};$.fn.isDestroyListLink=function(){return this.click(function(D){var C=$(this);var A=C.next(\"form\");var B=A.attr(\"action\");if(confirm(_(\"Are sure you want to delete this list? There is NO undo!\"))){$.ajax({url:B,type:\"POST\",dataType:\"json\",data:{_method:\"delete\",authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:function(){C.disable()},success:function(){document.location=\"/\"},error:function(){C.enable()}})}return false})};$.fn.isSubscribeListLink=function(){return this.click(function(B){var A=$(this);$.ajax({url:A.attr(\"href\"),type:\"POST\",dataType:\"json\",data:{authenticity_token:twttr.form_authenticity_token,twttr:true},beforeSend:function(){A.disable()},complete:function(){A.enable()},success:function(){A.parents(\".list\").addClass(\"subscriber\");updateListFollowersCount(1)},error:function(){A.parents(\".list\").removeClass(\"subscriber\")}});return false})};$.fn.isUnsubscribeListLink=function(){return this.click(function(B){var A=$(this);$.ajax({url:A.attr(\"href\"),type:\"POST\",dataType:\"json\",data:{_method:\"delete\",authenticity_token:twttr.form_authenticity_token,twttr:true},success:function(){A.parents(\".list\").removeClass(\"subscriber\");var C=$(\"#lists_subscribers #follow_grid #user_\"+page.sessionUserId);fadeUserOnListUnfollow(C);updateListFollowersCount(-1)},error:function(){A.parents(\".list\").addClass(\"subscriber\")}});B.preventDefault()})};$.fn.isListInPageLink=function(){return this.each(function(){var A=$(this);A.isInPageLink(setTimelineForListInPageLink)})};var setTimelineForListInPageLink=function(A){$(\"#timeline_heading\").show();var E=$(\"#timeline_heading h1\");var D=$(\"#timeline_heading h2\");var C=A.meta();var B=h(C.uri);var F=listDisplayName(C);D.remove();E.html(F);E.after('<h2 class=\"list-subheading\"><p class=\"list-numbers\"><a href=\"'+B+'/members\">'+_(\"Following:\")+\" <span>\"+h(C.member_count)+\"</span></a>\"+(C.mode==LIST_PRIVATE_MODE?\"\":'<a href=\"'+B+'/subscribers\">'+_(\"Followers:\")+\" <span>\"+h(C.subscriber_count)+\"</span></a>\")+'</p><p class=\"list-link\"><a href=\"'+B+'\">'+_(\"View list page\")+\"<span> âº</span></a></p></h2>\");if(C.member_count==0){$(\"#timeline_heading h2\").append($(C.user==page.sessionUserScreenName?\"#list_no_members_owner\":\"#list_no_members\").html())}setDocumentTitle(\"Twitter / \"+C.full_name)};var addListToUser=function(B,A){return B.each(function(){if(findListIndexBySlug(B.meta().lists,A.slug).length==0){B.meta().lists.push(A);if(B.find(\".list-tags\").length>0){B.find(\".list-tags-outer:hidden\").show();B.find(\".list-tags\").append(linkToList(A))}}})};var removeListFromUser=function(B,A){$.each(findListIndexBySlug(B.meta().lists,A.slug),function(){Array.remove(B.meta().lists,this);B.find(\".list-tags .list_\"+A.id).each(function(){$(this).parent(\"li\").remove()});if(B.meta().lists.length==0){B.find(\".list-tags-outer:visible\").hide()}})};var addListToMenu=function(B){var A=$(\"#list_menu\");A.find(\".new-list\").before('<li><img class=\"loading-spinner\" src=\"http://s.twimg.com/a/1267135446/images/spinner.gif\" style=\"display: none;\" alt=\"waiting\" title=\"waiting\" height=\"14\" width=\"14\"/><input type=\"checkbox\" id=\"list_'+B.id+'\" data=\"'+h(JSON.stringify(B))+'\" /> <label for=\"list_'+B.id+'\">'+h(B.name)+lockIconForList(B)+\"</label></li>\")};var isInPageLists=function(){return $(\"#side_lists.in-page-lists\").length==1};var addListToLists=function(C){var B=isInPageLists();var A=$(\"ul.lists-links\").siblings(\".no-lists\").remove().end().append(linkToList(C,B)).find(\".list_\"+C.id);if(B){A.addClass(\"in-page-list-link\").isListInPageLink().isSidebarTab().click()}};var bindAdminListActions=function(){$(\"#admin_list a.destroy-list\").isDestroyListLink();$(\"#admin_list a.edit-list\").isEditListLink()};var isMoreButton=function(){$(\"#lists_pagination #more\").live(\"click\",basicMoreButtonHandler({beforeSend:function(){$(\"#more\").addClass(\"loading\").html(\"\")},success:function(A){$(\"#lists_table tbody\").append($(A[\"#lists\"]));$(\"#lists_pagination\").html(A[\"#pagination\"])},error:function(){$(\"#more\").removeClass(\"loading\").text(_(\"more\"));(new ShortNotification()).setMessage(_(\"Whoops! Something went wrong. Please try again!\")).show()}}))};$.fn.equals=function(A){return this.length==1&&A.length==1&&this.get(0)==A.get(0)};$.fn.hasParent=function(A){return jQuery.inArray(A[0],this.parents())>-1};function InlineForm(A){this.initialize(A)}jQuery.extend(InlineForm.prototype,{defaultOptions:{title:\"\",submitBtnValue:\"\",showCancel:true,closeOnOutsideClick:true,formClass:\"\",timelineChangedEvents:false,pageHeightChangedEvents:false},overrideDefaultOptions:{},initialize:function(A){this.options=jQuery.extend({},this.defaultOptions);jQuery.extend(this.options,this.overrideDefaultOptions);jQuery.extend(this.options,A);this.$form=$('<div class=\"inline-form '+this.options.formClass+'\"></div>');this.$buttonParent=$('<div class=\"inline-form-buttons\"></div>');this.$button=$('<button type=\"button\" class=\"btn\">'+this.options.submitBtnValue+\"</button>\");if(this.options.showCancel){this.$cancel=$('<span class=\"cancel\">&nbsp;</span>')}this.$form_inner=$('<div class=\"inline-form-inner\"></div>');this.$input=$('<textarea class=\"inline-form-input\"></textarea>');this.$inputsPrompt=$('<div class=\"inline-inputs-prompt\"></div>');this.$title=$('<div class=\"title\">'+this.options.title+\"</div>\");this.$body=$('<div class=\"body\">'+(this.options.body||\"\")+\"</div>\");this.initEvents()},initEvents:function(){this.buttonEvent=this.submitForm.pBind(this);this.closeEvent=this.close.pBind(this);this.outsideClickEvent=this.destroyFromEvent.pBind(this);this.timelineEvent=this.timelineEvent.pBind(this);if(this.options.timelineChangedEvents){$.Timeline.registerTimelineEvent(this.timelineEvent)}if(this.options.pageHeightChangedEvents){this.pageHeightChangedEvent=this.pageHeightChangedEvent.pBind(this);$.Timeline.registerPageHeightChangedEvent(this.pageHeightChangedEvent)}},addEvents:function(){this.$button.click(this.buttonEvent);if(this.options.showCancel){this.$cancel.click(this.closeEvent)}if(this.options.closeOnOutsideClick){$(window).click(this.outsideClickEvent)}},removeEvents:function(){this.$button.unbind(\"click\",this.buttonEvent);if(this.options.showCancel){this.$cancel.unbind(\"click\",this.closeEvent)}if(this.options.closeOnOutsideClick){$(window).unbind(\"click\",this.outsideClickEvent)}if(this.options.timelineChangedEvents){$.Timeline.unregisterTimelineEvent(this.timelineEvent)}$.Timeline.unregisterPageHeightChangedEvent(this.pageHeightChangedEvent)},onSendError:function(A){if(this.sendNotification){this.sendNotification.cancel()}(new InfoNotification()).setMessage(_(\"Whoops! Something went wrong. Please refresh the page and try again!\")).show();this.close()},onSendSuccess:function(A){},formAction:function(){},timelineEvent:function(){},pageHeightChangedEvent:function(){this.positionForm()},postData:function(){},beforePost:function(){},onComplete:function(){},submitForm:function(){this.$button.disable();var A={authenticity_token:twttr.form_authenticity_token};jQuery.extend(A,this.postData());if(this.progressNotificationText){this.sendNotification=(new ProgressNotification()).setProgressMessage(this.progressNotificationText).setCompletedMessage(_(\"Ok, done.\")).show()}this.beforePost();$.ajax({type:\"POST\",dataType:\"json\",dataFilter:function(B){if(!jQuery.trim(B)){return null}return B},url:this.formAction(),data:A,error:function(B){this.onSendError(B)}.pBind(this),success:function(B){this.onSendSuccess(B);this.close();if(this.sendNotification){this.sendNotification.done()}}.pBind(this),beforeSend:twttr.loading,complete:function(){twttr.loaded();this.onComplete()}.pBind(this)})},arrange:function(){var A=$('<div class=\"inline-form-inputs\"></div>');if(this.options.showCancel){this.$buttonParent.append(this.$cancel)}this.$buttonParent.append(this.$button);this.$form_inner.append(A.append(this.$title).append(this.$body).append(this.$inputsPrompt).append(this.$input)).append(this.$buttonParent);this.$form.append(this.$form_inner);this.$form.hide();this.baseElement().append(this.$form)},baseElement:function(){return this.$parentNode||$(document.body)},show:function(A){this.addEvents();this.$targetNode=A.targetNode;this.$parentNode=A.parentNode;this.positionForm();this.arrange();this.$form.fadeIn(100);this.currentlyShown=true;this.afterShow()},afterShow:function(){},positionForm:function(){if(this.$targetNode&&this.$targetNode.width()>0){var C=this.position();var B=C[0];var A=C[1];this.$form.css(\"top\",B).css(\"left\",A)}else{this.close()}},close:function(){this.removeEvents();this.$form.remove();this.currentlyShown=false;this.afterClose()},afterClose:function(){},destroyFromEvent:function(B){var A=$(B.target);if(A.equals(this.$targetNode)||jQuery.inArray(this.$targetNode.get(0),A.parents())!=-1||A.equals(this.$form)||A.hasParent(this.$form)){return }this.close()},position:function(){var A=this.$targetNode.offset();return[A.top,A.left]}});RetweetInlineForm=function(){var A=_(\"Yes\");var B=_(\"Retweet to your followers?\");this.initialize({title:B,submitBtnValue:A})};RetweetInlineForm.prototype=new InlineForm();jQuery.extend(RetweetInlineForm.prototype,{overrideDefaultOptions:{formClass:\"retweet-dlg\",pageHeightChangedEvents:true},formAction:function(){var B=getListItemFromChild(this.$targetNode);var A=getStatusIdFromListItem(B);return\"/statuses/\"+A+\"/retweet\"},postData:function(){return{controller_name:page.controller_name,action_name:page.action_name}},beforePost:function(){this.close();twttr.setRetweetingStyles(this.$targetNode,_(\"Updating...\"))},onSendSuccess:function(A){twttr.animateStatusReplacement(this.$targetNode,A)},onComplete:function(){twttr.unsetRetweetingStyles(this.$targetNode)},afterShow:function(){getListItemFromChild(this.$targetNode).addClass(\"perma-hover\");this.$targetNode.find(\"a\").blur()},afterClose:function(){getListItemFromChild(this.$targetNode).removeClass(\"perma-hover\")},position:function(){var A=this.$targetNode.offset();return[parseInt(A.top)+20,parseInt(A.left)-220]}});RetweetContextDlgForm=function(){var B=_(\"Close\");var C=_(\"Wondering who this is?\");var A=_('Someone you follow thought this was worth retweeting, which is why you are seeing it in your Home timeline. <a target=\"_blank\" href=\"http://help.twitter.com/forums/10711/entries/77606\">Learn more</a>.');this.initialize({title:C,body:A,submitBtnValue:B})};RetweetContextDlgForm.prototype=new InlineForm();jQuery.extend(RetweetContextDlgForm.prototype,{overrideDefaultOptions:{showCancel:false,closeOnOutsideClick:false,formClass:\"retweet-ctx-dlg\",timelineChangedEvents:true},formAction:function(){return\"/users/\"+page.sessionUserId},postData:function(){return{_method:\"put\",\"user[has_dismissed_retweet_contextual_dialog]\":\"1\"}},position:function(){return[this.$parentNode.height(),-9]},timelineEvent:function(){if(!this.currentlyShown){this.showIfElementExists()}},afterShow:function(){this.$targetNode.css(\"z-index\",\"300\");var A=parseInt($.cookie(\"retweet_contextual_count\"))||0;if(A<5){$.cookie(\"retweet_contextual_count\",A+1)}else{this.close();this.submitForm();$.cookie(\"retweet_contextual_count\",null)}},afterClose:function(){this.$targetNode.css(\"z-index\",null)},showIfElementExists:function(){var A=$(\".rt-dlg\");if(A.length){this.show({targetNode:A,parentNode:A})}}});$(document).ready(function(){new RetweetContextDlgForm().showIfElementExists()});$(document).ready(function(){try{var A=\"share-text-active\";$(\".status\").each(function(){var E=$(this);var C=E.find(\".retweet-link\");var D=E.find(\".share-text\");C.hover(function(){D.addClass(A)},function(){D.removeClass(A)})})}catch(B){}});(function(){jQuery.inherits=function(A,C){function B(){}B.prototype=C.prototype;A.prototype=new B();A.prototype.constructor=A}})();(function(){jQuery.fn.equals=function(A){return this.get(0)==A.get(0)}})();(function(){jQuery.fn.hasParent=function(A){var B=false;this.parents().map(function(){if($(this).equals(A)){B=true}});return B}})();function Notification(B){this.$bar=jQuery('<div class=\"notification-bar\"></div>');this.$barContainer=jQuery('<div class=\"notification-bar-container\"></div>');this.$barContents=jQuery('<div class=\"notification-bar-contents\"></div>');this.$barBackground=jQuery('<div class=\"notification-bar-bkg\"></div>');this.$message=jQuery('<div class=\"message\"></div>');this.$bar.hide();this.$barBackground.hide();var A=this;this.$bar.click(function(C){A.removeAfterEvent(C)});this.className=B}Notification.SLIDE_SPEED_IN_MS=300;Notification.prototype.remove=function(){var A=this;this.slideUp(function(){A.$bar.remove();A.$barBackground.remove();window.clearTimeout(A.timeout)})};Notification.prototype.removeAfterEvent=function(B){var A=$(B.target);if(A.get(0).nodeName.toLowerCase()==\"a\"&&A.hasParent(this.$message)){return }this.remove()};Notification.prototype.setMessage=function(A){this.msg=A;return this};Notification.prototype.show=function(){this.$message.addClass(this.className).html(this.msg);this.$barContainer.append(this.$barBackground).append(this.$bar.append(this.$barContents.append(this.$message)));jQuery(\"#notifications\").append(this.$barContainer);this.$barBackground.height(this.$bar.height());this.showBar();if(this.onShow){this.onShow()}return this};Notification.prototype.removeInMilliseconds=function(){var A=this;this.timeout=window.setTimeout(function(){A.remove()},A.timeoutInMilliseconds)};Notification.prototype.showBar=function(){this.$bar.show();this.$barBackground.show()};Notification.prototype.onShow=function(){this.removeInMilliseconds()};Notification.prototype.slideUp=function(A){this.$bar.slideUp(Notification.SLIDE_SPEED_IN_MS);this.$barBackground.slideUp(Notification.SLIDE_SPEED_IN_MS,A)};function ShortNotification(){Notification.call(this,\"message-info\");this.timeoutInMilliseconds=3000}jQuery.inherits(ShortNotification,Notification);ShortNotification.prototype.showBar=function(){this.$bar.slideDown(Notification.SLIDE_SPEED_IN_MS);this.$barBackground.slideDown(Notification.SLIDE_SPEED_IN_MS)};function InfoNotification(){Notification.call(this,\"message-info\");this.timeoutInMilliseconds=6000}jQuery.inherits(InfoNotification,Notification);InfoNotification.prototype.showBar=function(){this.$bar.slideDown(Notification.SLIDE_SPEED_IN_MS);this.$barBackground.slideDown(Notification.SLIDE_SPEED_IN_MS)};function ProgressNotification(){Notification.call(this,\"message-progress\");this.timeoutInMilliseconds=1000}jQuery.inherits(ProgressNotification,Notification);ProgressNotification.prototype.setProgressMessage=function(A){return this.setMessage(A)};ProgressNotification.prototype.setCompletedMessage=function(A){this.completedMsg=A;return this};ProgressNotification.prototype.onShow=function(){};ProgressNotification.prototype.cancel=function(){this.timeoutInMilliseconds=0;this.removeInMilliseconds()};ProgressNotification.prototype.done=function(){this.$message.addClass(\"message-progress-done\").removeClass(this.className).html(this.completedMsg);this.removeInMilliseconds()};function ErrorNotification(){Notification.call(this,\"message-error\");this.timeoutInMilliseconds=8000}jQuery.inherits(ErrorNotification,Notification);function Occasionally(A,D,C,B,E){this.interval=A;this.maxDecayTime=D;this.job=C;this.decayCallback=B;this.timesRun=0;this.decayRate=1;this.decayMultiplier=E||1.25;this.maxRequests=360}Occasionally.prototype.start=function(){this.stop();this.run()};Occasionally.prototype.stop=function(){if(this.worker){window.clearTimeout(this.worker)}};Occasionally.prototype.run=function(){var A=this;this.decayRate=this.decayCallback()?Math.max(1,this.decayRate/this.decayMultiplier):this.decayRate*this.decayMultiplier;var B=this.interval*this.decayRate;B=(B>=this.maxDecayTime)?this.maxDecayTime:B;this.worker=window.setTimeout(function(){A.execute()},Math.floor(B))};Occasionally.prototype.execute=function(){this.job();if(++this.timesRun<this.maxRequests){this.run()}};twttr.countClick=function(){var A=twttr.createTrackingParameters(this);twttr.asyncClickCount(A)};twttr.asyncClickCount=function(A){(new Image()).src=\"/abacus?\"+$.param(A)};twttr.createTrackingParameters=function(F){var B=$(F);var A=function(){var K=B.attr(\"class\");var I=[\"hashtag\",\"profile-pic\",\"screen-name\",\"username\",\"web\"];for(var J in I){if(K.indexOf(I[J])!==-1){return I[J]}}}();var E=B.closest(\".status\").find(\".meta\").children(\"a\").get(0).href.split(\"/\");var G=E[E.length-1];var H=$('meta[name=\"session-userid\"]');var D=H.attr(\"content\")||-1;var C=twttr.form_authenticity_token||$('input[name=\"authenticity_token\"]').attr(\"value\");return{url:F.href,linkType:A,tweetId:G,userId:D,authenticity_token:C,time:(new Date).getTime()}};$(document).ready(function(){var A=$(\"#content a.tweet-url\");A.live(\"mousedown\",twttr.countClick)});/*\n 43649      http://www.JSON.org/json2.js\n 43650      2009-09-21\n .....\n 62908  AjxKeys[\"button.SubMenu.sort\"]=\"10020;\";\n 62909  AjxKeys[\"button.description\"]=\"Buttons\";\n 62910: AjxKeys[\"button.sort\"]=\"10000\";\n 62911  AjxKeys[\"dialog.Cancel.description\"]=\"Cancel changes\";\n 62912  AjxKeys[\"dialog.Cancel.display\"]=\"Esc\";\n .....\n 63508  ZmKeys[\"global.VisitTag.sort\"]=\"10234\";\n 63509  ZmKeys[\"global.description\"]=\"All Applications\";\n 63510: ZmKeys[\"global.sort\"]=\"10000\";\n 63511  ZmKeys[\"mail.DoubleClick.description\"]=\"Open message\";\n 63512  ZmKeys[\"mail.DoubleClick.display\"]=\"Enter\";\n .....\n 71554  Dwt.DEFAULT=-123456789;\n 71555  Dwt.CLEAR=-20000;\n 71556: Dwt.LOC_NOWHERE=-10000;\n 71557  Dwt.DND_DROP_NONE=0;\n 71558  Dwt.DND_DROP_COPY=1;\n .....\n 99680  ZmRoster.prototype.constructor=ZmRoster;\n 99681  ZmRoster.F_PRESENCE=\"ZmRoster.presence\";\n 99682: ZmRoster.NOTIFICATION_FOO_TIMEOUT=10000;\n 99683  ZmRoster.GATEWAY_EVENT=\"gateway list\";\n 99684  ZmRoster.prototype.toString=function(){\n .....\n 105817  ZmApp.LOAD_SORT[ZmApp.CALENDAR]=40;\n 105818  ZmApp.QS_ARG[ZmApp.CALENDAR]=\"calendar\";\n 105819: ZmCalendarApp.REMINDER_START_DELAY=10000;\n 105820  ZmCalendarApp.MINICAL_DELAY=5000;\n 105821  ZmCalendarApp.VIEW_FOR_SETTING={};\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/node_modules/ws/build/config.gypi:\n   69      \"prefix\": \"/usr\",\n   70      \"browser\": \"\",\n   71:     \"cache_lock_wait\": \"10000\",\n   72      \"registry\": \"https://registry.npmjs.org/\",\n   73      \"save_optional\": \"\",\n   ..\n   82      \"viewer\": \"man\",\n   83      \"color\": \"true\",\n   84:     \"fetch_retry_mintimeout\": \"10000\",\n   85      \"umask\": \"0002\",\n   86      \"fetch_retry_maxtimeout\": \"60000\",\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/useragent/node_modules/lru-cache/test/memory-leak.js:\n   32  \n   33    // do it again, but more\n   34:   for (var i = 0; i < 10000; i++) {\n   35      l.set(i, new X);\n   36      // throw some gets in there, too.\n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/static/karma.js:\n  385  \n  386  exports.generateId = function(prefix) {\n  387:   return prefix + Math.floor(Math.random() * 10000);\n  388  };\n  389  \n\n/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/load-grunt-tasks/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js:\n   32  \n   33    // do it again, but more\n   34:   for (var i = 0; i < 10000; i++) {\n   35      l.set(i, new X);\n   36      // throw some gets in there, too.\n\n/home/antonio/Devel/gitprojetct/api.lobupla/test/spec/controllers/home.js:\n   21      beforeEach(function() {\n   22        originalTimeout = jasmine.DEFAULT_TIMEOUT_INTERVAL;\n   23:       jasmine.DEFAULT_TIMEOUT_INTERVAL = 10000;\n   24      });\n   25  \n\n/home/antonio/Devel/gitprojetct/api.lobupla/test/spec/controllers/home2.js:\n    3  describe(\"when retrieved by name\", function() { \n    4    var venues;\n    5:   jasmine.DEFAULT_TIMEOUT_INTERVAL = 10000;\n    6     \n    7    beforeEach(function(done) {\n\n242 matches across 115 files\n",
			"settings":
			{
				"buffer_size": 2199218,
				"line_ending": "Unix",
				"name": "Find Results",
				"scratch": true
			}
		},
		{
			"file": "node_modules/jasmine-core/lib/jasmine-core/jasmine.js",
			"settings":
			{
				"buffer_size": 80681,
				"line_ending": "Unix"
			}
		},
		{
			"file": "app/bower_components/es5-shim/tests/lib/jasmine.js",
			"settings":
			{
				"buffer_size": 66781,
				"line_ending": "Unix"
			}
		},
		{
			"file": "app/scripts/controllers/home.js",
			"settings":
			{
				"buffer_size": 3300,
				"line_ending": "Unix"
			}
		},
		{
			"contents": "[\n  {\n    \"id\": \"4d683074d4c288bf50da7065\",\n    \"name\": \"Madrid\",\n    \"contact\": {},\n    \"location\": {\n      \"lat\": 40.416632788688474,\n      \"lng\": -3.703551292419434,\n      \"distance\": 25,\n      \"postalCode\": \"28000\",\n      \"cc\": \"ES\",\n      \"state\": \"España\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"28000  España\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"50aa9e094b90af0d42d5de0d\",\n        \"name\": \"Ciudad\",\n        \"pluralName\": \"Ciudades\",\n        \"shortName\": \"Localidad\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/parks_outdoors/neighborhood_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 41430,\n      \"usersCount\": 18945,\n      \"tipCount\": 184\n    },\n    \"url\": \"http://www.madrid.es\",\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 9,\n      \"summary\": \"9 personas han hecho check-in aquí\",\n      \"groups\": [\n        {\n          \"type\": \"others\",\n          \"name\": \"Otras personas aquí\",\n          \"count\": 9,\n          \"items\": []\n        }\n      ]\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4adcda37f964a5201f3c21e3\",\n    \"name\": \"Puerta del Sol\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Pza de la Puerta del Sol\",\n      \"lat\": 40.41687784026351,\n      \"lng\": -3.703540563583374,\n      \"distance\": 24,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Pza de la Puerta del Sol\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d164941735\",\n        \"name\": \"Plaza\",\n        \"pluralName\": \"Plazas\",\n        \"shortName\": \"Plaza\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/parks_outdoors/plaza_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 72566,\n      \"usersCount\": 32642,\n      \"tipCount\": 468\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4e32bade18a846d7ed0a895e\",\n    \"name\": \"Kilómetro 0\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Pl. de la Puerta del Sol\",\n      \"lat\": 40.41662359923705,\n      \"lng\": -3.7038396298885345,\n      \"distance\": 17,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Pl. de la Puerta del Sol\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4deefb944765f83613cdba6e\",\n        \"name\": \"Lugar histórico\",\n        \"pluralName\": \"Lugares históricos\",\n        \"shortName\": \"Lugar histórico\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/arts_entertainment/historicsite_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 6406,\n      \"usersCount\": 4565,\n      \"tipCount\": 36\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4b96b717f964a520dadf34e3\",\n    \"name\": \"Real Casa de Correos\",\n    \"contact\": {\n      \"phone\": \"+34915804260\",\n      \"formattedPhone\": \"+34 915 80 42 60\",\n      \"twitter\": \"comunidadmadrid\"\n    },\n    \"location\": {\n      \"address\": \"Puerta del Sol, 7\",\n      \"lat\": 40.41653885201475,\n      \"lng\": -3.7038248777389526,\n      \"distance\": 26,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Puerta del Sol, 7\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d126941735\",\n        \"name\": \"Edificio gubernamental\",\n        \"pluralName\": \"Edificios gubernamentales\",\n        \"shortName\": \"Gobierno\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/building/government_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": true,\n    \"stats\": {\n      \"checkinsCount\": 375,\n      \"usersCount\": 209,\n      \"tipCount\": 6\n    },\n    \"url\": \"http://www.madrid.org\",\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"venuePage\": {\n      \"id\": \"67522009\"\n    },\n    \"storeId\": \"2849294\",\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4dd66de8d22d38ef42ce98f3\",\n    \"name\": \"Óptica FEDEROPTICOS\",\n    \"contact\": {\n      \"phone\": \"+34915399571\",\n      \"formattedPhone\": \"+34 915 39 95 71\",\n      \"facebook\": \"101780709902908\",\n      \"facebookUsername\": \"federopticos\",\n      \"facebookName\": \"Federópticos\"\n    },\n    \"location\": {\n      \"address\": \"Majuelo, 1\",\n      \"lat\": 40.41677254794728,\n      \"lng\": -3.703789628677871,\n      \"distance\": 0,\n      \"postalCode\": \"28005\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Majuelo, 1\",\n        \"28005 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4d954afda243a5684865b473\",\n        \"name\": \"Óptica\",\n        \"pluralName\": \"Ópticas\",\n        \"shortName\": \"Óptica\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/building/medical_opticalshop_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": true,\n    \"stats\": {\n      \"checkinsCount\": 3,\n      \"usersCount\": 3,\n      \"tipCount\": 0\n    },\n    \"url\": \"http://www.federopticos.com\",\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"storeId\": \"M006_01\",\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"523c817711d215e494b1a538\",\n    \"name\": \"Juan José\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Galeria de Alimentación\",\n      \"lat\": 40.4167754,\n      \"lng\": -3.7037902,\n      \"distance\": 0,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Galeria de Alimentación\",\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d11d951735\",\n        \"name\": \"Carnicería\",\n        \"pluralName\": \"Carnicería\",\n        \"shortName\": \"Carnicería\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/shops/food_butcher_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 4,\n      \"usersCount\": 4,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"520608cf11d28afd2cbf759a\",\n    \"name\": \"Trem Bala\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Madri\",\n      \"lat\": 40.41677474975586,\n      \"lng\": -3.7037901878356934,\n      \"distance\": 0,\n      \"cc\": \"ES\",\n      \"city\": \"Madri\",\n      \"state\": \"Espanha\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Madri\",\n        \"Madri Espanha\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d1fc931735\",\n        \"name\": \"Tren ligero\",\n        \"pluralName\": \"Tranvías\",\n        \"shortName\": \"Tren ligero\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/travel/lightrail_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 1,\n      \"usersCount\": 1,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"5086c3f55262acd00bdb1e2d\",\n    \"name\": \"Cercanías Sol\",\n    \"contact\": {\n      \"twitter\": \"renfe\"\n    },\n    \"location\": {\n      \"address\": \"Pl. de la Puerta del Sol\",\n      \"lat\": 40.416828830019924,\n      \"lng\": -3.7035298347473145,\n      \"distance\": 22,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Pl. de la Puerta del Sol\",\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d129951735\",\n        \"name\": \"Estación de tren\",\n        \"pluralName\": \"Estaciones de tren\",\n        \"shortName\": \"Estación de tren\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/travel/trainstation_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 3863,\n      \"usersCount\": 1093,\n      \"tipCount\": 5\n    },\n    \"url\": \"http://www.renfe.com/viajeros/cercanias/madrid/\",\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"533235a411d2fa8dbdf33bcb\",\n    \"name\": \"Estadio Municipal De Butarque\",\n    \"contact\": {},\n    \"location\": {\n      \"lat\": 40.4167754,\n      \"lng\": -3.7037902,\n      \"distance\": 0,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 2,\n      \"usersCount\": 2,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"5351d97c11d296177f275049\",\n    \"name\": \"Replay\",\n    \"contact\": {},\n    \"location\": {\n      \"lat\": 40.4167754,\n      \"lng\": -3.7037902,\n      \"distance\": 0,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 1,\n      \"usersCount\": 1,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"53a396a8498e1475242aa351\",\n    \"name\": \"Circuito De Jarama\",\n    \"contact\": {},\n    \"location\": {\n      \"lat\": 40.4167754,\n      \"lng\": -3.7037902,\n      \"distance\": 0,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 1,\n      \"usersCount\": 1,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"538fd01711d23f0c4f56db0c\",\n    \"name\": \"Museo Nacional Centro de Arte Reina Sofía, Auditorio 400\",\n    \"contact\": {},\n    \"location\": {\n      \"lat\": 40.4167754,\n      \"lng\": -3.7037902,\n      \"distance\": 0,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 3,\n      \"usersCount\": 3,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"537d5b1c498e233bb834b611\",\n    \"name\": \"Tomavistas Festival (Hipódromo de la Zarzuela)\",\n    \"contact\": {},\n    \"location\": {\n      \"lat\": 40.4167754,\n      \"lng\": -3.7037902,\n      \"distance\": 0,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 5,\n      \"usersCount\": 5,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4c92861e1221b1f7fd4712e2\",\n    \"name\": \"KFC\",\n    \"contact\": {\n      \"phone\": \"+34915227749\",\n      \"formattedPhone\": \"+34 915 22 77 49\"\n    },\n    \"location\": {\n      \"address\": \"Calle Mayor 1\",\n      \"crossStreet\": \"Plaza de la Puerta del Sol\",\n      \"lat\": 40.416493925733114,\n      \"lng\": -3.7045276165008545,\n      \"distance\": 69,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Calle Mayor 1 (Plaza de la Puerta del Sol)\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d16e941735\",\n        \"name\": \"Restaurante de comida rápida\",\n        \"pluralName\": \"Restaurantes de comida rápida\",\n        \"shortName\": \"Comida rápida\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/food/fastfood_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": true,\n    \"stats\": {\n      \"checkinsCount\": 880,\n      \"usersCount\": 754,\n      \"tipCount\": 8\n    },\n    \"url\": \"http://www.kfc.es\",\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"storeId\": \"\",\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"5314da75498e21517c50e881\",\n    \"name\": \"Kilometre Zero\",\n    \"contact\": {},\n    \"location\": {\n      \"lat\": 40.416703,\n      \"lng\": -3.70379,\n      \"distance\": 8,\n      \"cc\": \"ES\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d162941735\",\n        \"name\": \"Otros lugares al aire libre\",\n        \"pluralName\": \"Otros lugares al aire libre\",\n        \"shortName\": \"Otros lugares al aire libre\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/parks_outdoors/outdoors_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 15,\n      \"usersCount\": 15,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4ed0ee476da162f1bf1478cc\",\n    \"name\": \"Plaza Del Sol\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Plaza del Sol\",\n      \"lat\": 40.4164245183918,\n      \"lng\": -3.7046171592561343,\n      \"distance\": 80,\n      \"postalCode\": \"28922\",\n      \"cc\": \"ES\",\n      \"city\": \"Alcorcón\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Plaza del Sol\",\n        \"28922 Alcorcón Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d164941735\",\n        \"name\": \"Plaza\",\n        \"pluralName\": \"Plazas\",\n        \"shortName\": \"Plaza\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/parks_outdoors/plaza_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 1195,\n      \"usersCount\": 367,\n      \"tipCount\": 7\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4e54cfd1cc3f1174d44cad0d\",\n    \"name\": \"Barrio de Sol\",\n    \"contact\": {},\n    \"location\": {\n      \"lat\": 40.41687784026351,\n      \"lng\": -3.7036585807800293,\n      \"distance\": 15,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4f2a25ac4b909258e854f55f\",\n        \"name\": \"Barrio\",\n        \"pluralName\": \"Barrios\",\n        \"shortName\": \"Barrio\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/parks_outdoors/neighborhood_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 313,\n      \"usersCount\": 186,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4b799cc0f964a52084052fe3\",\n    \"name\": \"El Corte Inglés\",\n    \"contact\": {\n      \"phone\": \"+34913798000\",\n      \"formattedPhone\": \"+34 913 79 80 00\",\n      \"twitter\": \"elcorteingles\"\n    },\n    \"location\": {\n      \"address\": \"C. Preciados, 3\",\n      \"lat\": 40.41735160411116,\n      \"lng\": -3.7043774127960205,\n      \"distance\": 81,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"C. Preciados, 3\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d1f6941735\",\n        \"name\": \"Gran tienda\",\n        \"pluralName\": \"Tiendas por departamentos\",\n        \"shortName\": \"Gran tienda\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/shops/departmentstore_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 12542,\n      \"usersCount\": 6166,\n      \"tipCount\": 92\n    },\n    \"url\": \"http://www.elcorteingles.es\",\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4fa82896e4b098f42d27e235\",\n    \"name\": \"Sede De La Presidencia De La Comunidad De Madrid\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Plaza Puerta del Sol\",\n      \"lat\": 40.41679862690141,\n      \"lng\": -3.703517091628372,\n      \"distance\": 23,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Plaza Puerta del Sol\",\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d126941735\",\n        \"name\": \"Edificio gubernamental\",\n        \"pluralName\": \"Edificios gubernamentales\",\n        \"shortName\": \"Gobierno\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/building/government_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 214,\n      \"usersCount\": 107,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"515c32c1e4b042391e8925d2\",\n    \"name\": \"Puerta del Sol\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Pz. de la puerta del sol\",\n      \"lat\": 40.41668197168386,\n      \"lng\": -3.705068094786231,\n      \"distance\": 108,\n      \"cc\": \"ES\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Pz. de la puerta del sol\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d164941735\",\n        \"name\": \"Plaza\",\n        \"pluralName\": \"Plazas\",\n        \"shortName\": \"Plaza\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/parks_outdoors/plaza_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 983,\n      \"usersCount\": 897,\n      \"tipCount\": 3\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4b8818d5f964a5208cdf31e3\",\n    \"name\": \"La Mallorquina\",\n    \"contact\": {\n      \"phone\": \"+34915211201\",\n      \"formattedPhone\": \"+34 915 21 12 01\"\n    },\n    \"location\": {\n      \"address\": \"C. Mayor, 2\",\n      \"crossStreet\": \"Pl. de la Puerta del Sol\",\n      \"lat\": 40.41665684419925,\n      \"lng\": -3.7045527402225846,\n      \"distance\": 65,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"C. Mayor, 2 (Pl. de la Puerta del Sol)\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d1d0941735\",\n        \"name\": \"Confitería\",\n        \"pluralName\": \"Confiterías\",\n        \"shortName\": \"Postres\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/food/dessert_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 3246,\n      \"usersCount\": 2170,\n      \"tipCount\": 115\n    },\n    \"url\": \"http://es.wikipedia.org/wiki/la_mallorquina\",\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4d6eb881d583a09327b38685\",\n    \"name\": \"Estatua de Carlos III\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Pl. de la Puerta del Sol\",\n      \"lat\": 40.41690163681519,\n      \"lng\": -3.7032841974942428,\n      \"distance\": 45,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Pl. de la Puerta del Sol\",\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d166941735\",\n        \"name\": \"Jardín de esculturas\",\n        \"pluralName\": \"Jardines de esculturas\",\n        \"shortName\": \"Escultura\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/parks_outdoors/sculpture_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 344,\n      \"usersCount\": 143,\n      \"tipCount\": 3\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4cbd6d0ec7228cfab99c29ce\",\n    \"name\": \"Hostal Americano\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Puerta del sol\",\n      \"lat\": 40.416943355743385,\n      \"lng\": -3.703839181026336,\n      \"distance\": 19,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Puerta del sol\",\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d1ee931735\",\n        \"name\": \"Albergue juvenil\",\n        \"pluralName\": \"Albergues\",\n        \"shortName\": \"Albergue juvenil\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/travel/hostel_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 16,\n      \"usersCount\": 10,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4c558268b426ef3ba83da88a\",\n    \"name\": \"Palazzo Cea\",\n    \"contact\": {\n      \"phone\": \"+34915225402\",\n      \"formattedPhone\": \"+34 915 22 54 02\"\n    },\n    \"location\": {\n      \"address\": \"Pl. de la Puerta del Sol, 11\",\n      \"lat\": 40.416872,\n      \"lng\": -3.703723,\n      \"distance\": 12,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Pl. de la Puerta del Sol, 11\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d1c9941735\",\n        \"name\": \"Heladería\",\n        \"pluralName\": \"Heladerías\",\n        \"shortName\": \"Helado\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/food/icecream_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 100,\n      \"usersCount\": 90,\n      \"tipCount\": 2\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4f1570cae4b0958ec529d1bb\",\n    \"name\": \"Agatha Paris\",\n    \"contact\": {\n      \"twitter\": \"agathaparisesp\"\n    },\n    \"location\": {\n      \"address\": \"Preciados\",\n      \"lat\": 40.416819139038374,\n      \"lng\": -3.7040423461621765,\n      \"distance\": 21,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Preciados\",\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d111951735\",\n        \"name\": \"Joyería\",\n        \"pluralName\": \"Joyerías\",\n        \"shortName\": \"Joyería\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/shops/jewelry_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 4,\n      \"usersCount\": 2,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4adcda34f964a520f73a21e3\",\n    \"name\": \"Casa Labra\",\n    \"contact\": {\n      \"phone\": \"+34915310081\",\n      \"formattedPhone\": \"+34 915 31 00 81\"\n    },\n    \"location\": {\n      \"address\": \"C. Tetuán, 12\",\n      \"lat\": 40.41719844805982,\n      \"lng\": -3.704444468021393,\n      \"distance\": 72,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"C. Tetuán, 12\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d1db931735\",\n        \"name\": \"Restaurante de tapas\",\n        \"pluralName\": \"Restaurantes de tapas\",\n        \"shortName\": \"Tapas\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/food/tapas_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 3038,\n      \"usersCount\": 2333,\n      \"tipCount\": 139\n    },\n    \"url\": \"http://www.casalabra.es\",\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4db674fe93a017099e00ab23\",\n    \"name\": \"BBVA Oficina\",\n    \"contact\": {\n      \"phone\": \"+34913605000\",\n      \"formattedPhone\": \"+34 913 60 50 00\",\n      \"facebook\": \"6258728420\",\n      \"facebookUsername\": \"GrupoBBVA\",\n      \"facebookName\": \"Grupo BBVA\"\n    },\n    \"location\": {\n      \"address\": \"Mayor, 1\",\n      \"lat\": 40.41687159862272,\n      \"lng\": -3.704091898758023,\n      \"distance\": 27,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Mayor, 1\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d10a951735\",\n        \"name\": \"Banco\",\n        \"pluralName\": \"Bancos\",\n        \"shortName\": \"Banco\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/shops/financial_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": true,\n    \"stats\": {\n      \"checkinsCount\": 24,\n      \"usersCount\": 17,\n      \"tipCount\": 0\n    },\n    \"url\": \"http://www.bbva.es\",\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"storeId\": \"7421_branch_es_bbva_branch\",\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4bd18114462cb713eb44da07\",\n    \"name\": \"Topshop\",\n    \"contact\": {\n      \"phone\": \"+34915361117\",\n      \"formattedPhone\": \"+34 915 36 11 17\"\n    },\n    \"location\": {\n      \"address\": \"Pl. de la Puerta del Sol, 6\",\n      \"crossStreet\": \"C. Mayor\",\n      \"lat\": 40.416561315144314,\n      \"lng\": -3.7031999230384827,\n      \"distance\": 55,\n      \"postalCode\": \"28013\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Pl. de la Puerta del Sol, 6 (C. Mayor)\",\n        \"28013 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d108951735\",\n        \"name\": \"Tienda de mujeres\",\n        \"pluralName\": \"Tiendas de mujeres\",\n        \"shortName\": \"Tienda de mujeres\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/shops/apparel_women_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 682,\n      \"usersCount\": 518,\n      \"tipCount\": 5\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4e6dd054a8093d29fefb38bf\",\n    \"name\": \"Consultoría Garben\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Puerta Del Sol, 11\",\n      \"lat\": 40.41710519952577,\n      \"lng\": -3.7036806136819918,\n      \"distance\": 37,\n      \"postalCode\": \"28001\",\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Puerta Del Sol, 11\",\n        \"28001 Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4bf58dd8d48988d124941735\",\n        \"name\": \"Oficina\",\n        \"pluralName\": \"Oficinas\",\n        \"shortName\": \"Oficina\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/building/default_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 171,\n      \"usersCount\": 16,\n      \"tipCount\": 0\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  },\n  {\n    \"id\": \"4f15cd10e4b09e58a559565e\",\n    \"name\": \"Tienda Orange\",\n    \"contact\": {},\n    \"location\": {\n      \"address\": \"Pl. de la Puerta del Sol\",\n      \"lat\": 40.416973393550315,\n      \"lng\": -3.703487360402649,\n      \"distance\": 33,\n      \"cc\": \"ES\",\n      \"city\": \"Madrid\",\n      \"state\": \"Madrid\",\n      \"country\": \"España\",\n      \"formattedAddress\": [\n        \"Pl. de la Puerta del Sol\",\n        \"Madrid Madrid\",\n        \"España\"\n      ]\n    },\n    \"categories\": [\n      {\n        \"id\": \"4f04afc02fb6e1c99f3db0bc\",\n        \"name\": \"Tienda de teléfonos celulares\",\n        \"pluralName\": \"Tiendas de teléfonos celulares\",\n        \"shortName\": \"Teléfono celular\",\n        \"icon\": {\n          \"prefix\": \"https://ss3.4sqi.net/img/categories_v2/shops/mobilephoneshop_\",\n          \"suffix\": \".png\"\n        },\n        \"primary\": true\n      }\n    ],\n    \"verified\": false,\n    \"stats\": {\n      \"checkinsCount\": 128,\n      \"usersCount\": 104,\n      \"tipCount\": 1\n    },\n    \"specials\": {\n      \"count\": 0,\n      \"items\": []\n    },\n    \"hereNow\": {\n      \"count\": 0,\n      \"summary\": \"Nadie aquí\",\n      \"groups\": []\n    },\n    \"referralId\": \"v-1424864585\"\n  }\n]",
			"settings":
			{
				"buffer_size": 33319,
				"line_ending": "Unix",
				"name": "["
			}
		},
		{
			"contents": "'{\"results\" : [{\"address_components\" : [{\"long_name\" : \"Madrid\", \"short_name\" : \"Madrid\", \"types\" : [ \"locality\", \"political\" ] }, {\"long_name\" : \"Madrid\", \"short_name\" : \"Madrid\", \"types\" : [ \"administrative_area_level_4\", \"political\" ] }, {\"long_name\" : \"Área Metropolitalitana y Corredor del Henares\", \"short_name\" : \"Área Metropolitalitana y Corredor del Henares\", \"types\" : [ \"administrative_area_level_3\", \"political\" ] }, {\"long_name\" : \"Madrid\", \"short_name\" : \"M\", \"types\" : [ \"administrative_area_level_2\", \"political\" ] }, {\"long_name\" : \"Comunidad de Madrid\", \"short_name\" : \"Comunidad de Madrid\", \"types\" : [ \"administrative_area_level_1\", \"political\" ] }, {\"long_name\" : \"España\", \"short_name\" : \"ES\", \"types\" : [ \"country\", \"political\" ] } ], \"formatted_address\" : \"Madrid, Madrid, España\", \"geometry\" : {\"bounds\" : {\"northeast\" : {\"lat\" : 40.5635903, \"lng\" : -3.5249115 }, \"southwest\" : {\"lat\" : 40.3120639, \"lng\" : -3.8341618 } }, \"location\" : {\"lat\" : 40.4167754, \"lng\" : -3.7037902 }, \"location_type\" : \"APPROXIMATE\", \"viewport\" : {\"northeast\" : {\"lat\" : 40.5635903, \"lng\" : -3.5249115 }, \"southwest\" : {\"lat\" : 40.3120639, \"lng\" : -3.8341618 } } }, \"place_id\" : \"ChIJgTwKgJcpQg0RaSKMYcHeNsQ\", \"types\" : [ \"locality\", \"political\" ] } ], \"status\" : \"OK\"}'",
			"settings":
			{
				"buffer_size": 1273,
				"line_ending": "Unix",
				"name": "'{\"results\" : [{\"address_components\" : [{\"long_nam"
			}
		}
	],
	"build_system": "",
	"command_palette":
	{
		"height": 180.0,
		"selected_items":
		[
			[
				"jason",
				"Pretty JSON: Format (Pretty Print) JSON"
			],
			[
				"json",
				"Pretty JSON: Format (Pretty Print) JSON"
			],
			[
				"install",
				"Package Control: Install Package"
			]
		],
		"width": 530.0
	},
	"console":
	{
		"height": 139.0,
		"history":
		[
			"import urllib.request,os,hashlib; h = 'eb2297e1a458f27d836c04bb0cbaf282' + 'd0e7a3098092775ccb37ca9d6b2e4b7d'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by) "
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/home/antonio/Devel/gitprojetct/api.lobupla",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/jasmine-core",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/jasmine-core/lib",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/jasmine-core/lib/jasmine-core",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma-jasmine"
	],
	"file_history":
	[
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-svgmin/node_modules/svgo/lib/svgo/jsAPI.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/app/bower_components/angular-scenario/jstd-scenario-adapter.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-imagemin/node_modules/.bin/jpegtran",
		"/home/antonio/Devel/jasmine-standalone/lib/jasmine-2.2.0/jasmine.css",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/node_modules/uglify-js/test/unit/compress/expected/forstatement.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-copy/test/expected/copy_test_mix/folder_one/one.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-contrib-cssmin/node_modules/clean-css/lib/text/free.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-svgmin/node_modules/svgo/node_modules/whet.extend/test/extend_test.coffee",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/karma/node_modules/connect/node_modules/body-parser/lib/types/text.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-google-cdn/node_modules/bower/node_modules/request/tests/test-errors.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/node_modules/grunt-karma/TODO.md",
		"/home/antonio/Devel/gitprojetct/api.lobupla/app/scripts/controllers/home.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/test/spec/controllers/main.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/app/bower_components/angular-mocks/angular-mocks.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/bower.json",
		"/home/antonio/Devel/gitprojetct/api.lobupla/test/spec/controllers/home.js",
		"/home/antonio/Devel/gitprojetct/api.lobupla/test/runner.html",
		"/home/antonio/git/ssii-isban-colab-tool/target/classes/com/ciber/ssii/isban/gae/server/i18n/textfront_en.properties",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/java/com/ciber/ssii/isban/gae/server/i18n/textfront_en.properties",
		"/home/antonio/git/ssii-isban-colab-tool/bin/src/main/java/com/ciber/ssii/isban/gae/server/i18n/textfront_en.properties",
		"/home/antonio/git/ssii-isban-colab-tool/target/classes/com/ciber/ssii/isban/gae/server/i18n/textfront_es.properties",
		"/home/antonio/git/ssii-isban-colab-tool/target/classes/com/ciber/ssii/isban/gae/server/i18n/textfront.properties",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/java/com/ciber/ssii/isban/gae/server/i18n/textfront_es.properties",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/java/com/ciber/ssii/isban/gae/server/i18n/textfront.properties",
		"/home/antonio/git/ssii-isban-colab-tool/bin/src/main/java/com/ciber/ssii/isban/gae/server/i18n/textfront_es.properties",
		"/home/antonio/git/ssii-isban-colab-tool/bin/src/main/java/com/ciber/ssii/isban/gae/server/i18n/textfront.properties",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/pages/header.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/java/com/ciber/ssii/isban/gae/server/constants/URLS.java",
		"/home/antonio/git/ssii-isban-colab-tool/bin/src/main/webapp/pages/header.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/pages/repository/repository.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/js/angular/repository/controllers.js",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/css/general.css",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/pages/initiative/crud.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/pages/organization/search.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/pages/initiative/search.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/pages/initiative/reports.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/java/com/ciber/ssii/isban/gae/server/model/Initiative.java",
		"/home/antonio/git/ssii-isban-colab-tool/scripts/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/lib/vendor/web-socket-js/flash-src/com/hurlant/util/der/IAsn1Type.as",
		"/home/antonio/git/ssii-isban-colab-tool/scripts/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/lib/vendor/web-socket-js/flash-src/com/hurlant/crypto/symmetric/ICipher.as",
		"/home/antonio/git/ssii-isban-colab-tool/scripts/node_modules/karma/lib/init.js",
		"/home/antonio/git/ssii-isban-colab-tool/scripts/node_modules/karma-chrome-launcher/index.js",
		"/home/antonio/C:\\nppdf32Log\\debuglog.txt",
		"/home/antonio/Escritorio/pss.txt",
		"/home/antonio/Devel/myproject3/app/index.html",
		"/home/antonio/Devel/gitprojetct/nodeserver1/test1.js",
		"/home/antonio/Buenos dias,",
		"/home/antonio/Devel/gitprojetct/nodeserver1/test2.js",
		"/home/antonio/Devel/gitprojetct/nodeserver1/test3.js",
		"/home/antonio/Devel/gitprojetct/nodeserver1/jsonresult.js",
		"/home/antonio/Devel/gitprojetct/nodeserver1/app3.js",
		"/home/antonio/Devel/gitprojetct/nodeserver1/app_account_info.js",
		"/home/antonio/Devel/gitprojetct/nodeserver1/app2.js",
		"/home/antonio/Devel/gitprojetct/nodeserver1/app_list_accounts.js",
		"/home/antonio/Devel/gitprojetct/nodeserver1/connect_to_ripple.js",
		"/home/antonio/Devel/myproject3/app/views/resources.html",
		"/home/antonio/Devel/myproject3/app/scripts/controllers/resources.js",
		"/home/antonio/git/ssii-isban-colab-tool/bin/src/main/webapp/pages/repository/repository.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/css/repository.css",
		"/home/antonio/git/ssii-isban-colab-tool/scripts/node_modules/karma/lib/reporter.js",
		"/home/antonio/git/ssii-isban-colab-tool/README.md",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/pages/organization/detailuser.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/bin/src/main/webapp/pages/organization/detailuser.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/bin/src/main/webapp/pages/organization/organizationchart.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/bin/src/main/webapp/pages/organization/search.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/pages/initiative/detailinitiative.jsp",
		"/home/antonio/git/ssii-isban-colab-tool/scripts/node_modules/karma/node_modules/log4js/test/debug-test.js",
		"/home/antonio/git/ssii-isban-colab-tool/eclipse-launch-profiles/DevServer.launch",
		"/home/antonio/Devel/rippled/src/websocketpp_02/examples/wsperf/wsperf.cfg",
		"/home/antonio/Devel/rippled/bin/ripple/util/ConfigFile.py",
		"/home/antonio/Devel/rippled/src/rocksdb2/db/column_family.cc",
		"/home/antonio/Devel/rippled/doc/CHANGELOG",
		"/home/antonio/Devel/myproject3/app/scripts/app.js",
		"/home/antonio/Devel/myproject3/app/views/hello.html",
		"/home/antonio/Devel/myproject3/app/scripts/controllers/hello.js",
		"/home/antonio/Devel/myproject3/app/scripts/controllers/hello_world.js",
		"/home/antonio/Devel/myproject3/app/scripts/controllers/hello_world_general.js",
		"/home/antonio/Devel/myproject3/app/views/hello_world.html",
		"/home/antonio/Devel/myproject3/app/views/hello_world_general.html",
		"/home/antonio/Devel/myproject3/app/views/main.html",
		"/home/antonio/Devel/myproject3/app/scripts/controllers/text-area-with-limit.js",
		"/home/antonio/Devel/myproject3/app/views/text-area-with-limit.html",
		"/home/antonio/Devel/myproject3/app/scripts/controllers/world.js",
		"/home/antonio/Devel/myproject3/app/views/world.html",
		"/home/antonio/Devel/myproject3/app/views/index.html",
		"/home/antonio/Devel/my-new-project/bower.json",
		"/home/antonio/Devel/my-new-project/app/scripts/app.js",
		"/home/antonio/Devel/my-new-project/.gitattributes",
		"/home/antonio/Devel/my-new-project/.gitignore",
		"/home/antonio/Devel/my-new-project/.jshintrc",
		"/home/antonio/Devel/my-new-project/.travis.yml"
	],
	"find":
	{
		"height": 35.0
	},
	"find_in_files":
	{
		"height": 93.0,
		"where_history":
		[
			"/home/antonio/Devel/gitprojetct/api.lobupla",
			"/home/antonio/git/ssii-isban-colab-tool/",
			"/home/antonio/git/ssii-isban-colab-tool/, *.jsp",
			"/home/antonio/git/ssii-isban-colab-tool/",
			"/home/antonio/git/ssii-isban-colab-tool/, *.css",
			"/home/antonio/git/ssii-isban-colab-tool/",
			"/home/antonio/git/ssii-isban-colab-tool/, *.js",
			"/home/antonio/git/ssii-isban-colab-tool/",
			"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/js/angular/repository",
			"/home/antonio/git/ssii-isban-colab-tool, *.js",
			"/home/antonio/git/ssii-isban-colab-tool",
			"/home/antonio/Devel/myproject3",
			"/home/antonio/git/ssii-isban-colab-tool/src/",
			"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/js/angular/repository",
			"/home/antonio/git/ssii-isban-colab-tool/src/",
			"/home/antonio/git/ssii-isban-colab-tool/src/main/webapp/js/angular",
			""
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"time",
			"jasmine",
			"10000",
			"return timeout",
			"DEFAULT_TIMEOUT_INTERVAL",
			"'",
			"someService",
			"controllerScope",
			"result",
			"setVenues",
			"mock",
			"loadEnableUser",
			"loadtableusers",
			"reloadusers",
			"initiative.search.form.button.search",
			"initiative.search.form.select.selectsociety",
			"initiative.search.form.label.findinitiative",
			"div",
			"<!--modulo contenido-->",
			"DesHabilitado",
			"Deshanilitado",
			"Hanilitado",
			"listusers.label.state",
			"disabled",
			"enableusers.label.descenableusers",
			" de Registro",
			"Gestión de Registro",
			"listusers.label.desclistusers",
			"menu.link.admin.enableusers",
			"/pages/adm/processuploadfileusr.jsp",
			"accept\" />",
			"accept",
			"enableusers",
			"reject",
			"enableusers.label.accept",
			".col .result",
			".col .etiqueta",
			"detail-box-devices",
			"424",
			"/{{tree.current_bucket}}/{{",
			"{{tree.current_bucket}}",
			"margin-bottom: 65px",
			"toastmessage",
			"repository.folderlist.table.button.action.title",
			"toastErrorMessageSettings",
			"repository.folderlist.table.button.deletefile.title",
			"deleteFile",
			"repository.folderlist.table.button.download.title",
			"deleteFile(file.name)",
			"societydesc",
			"orderColumns('societyDesc')",
			"societyDesc",
			"orderColumns('societyDesc')",
			"session",
			"deleteFolder",
			"sessionController",
			"saveInitiativeHistoricNoAjs()",
			"findInitiative()",
			".select-bottom",
			"id=\"idSelectDestinyClient\" ng-model=\"selectDestinyClient\"",
			"sendRequest",
			"updateLastestSearchs",
			"lastestSearchs",
			"toggleLatest",
			"removeAddress",
			"research",
			"ul",
			"items",
			"lastestSearchs",
			"getCoordetades",
			"ul",
			"$cookies",
			"Parse",
			"arse",
			"parse",
			"geometry",
			"'",
			"]",
			"'",
			"dataset",
			"transaction",
			"data_obj",
			"data",
			"info",
			"description",
			"ul",
			"key",
			"selectedItem",
			"dataObject",
			"scope.form.",
			"form.",
			" ng-model=\"",
			"name=\"",
			"gcs/{{tree.current_bucket}}/",
			"file.size",
			"deleteFolder",
			"folder list",
			"65",
			"repository.",
			"repository.uploadfileform",
			"showToast",
			"toastmessage:",
			"deleteFile",
			"file in tree.files",
			"repository.folderlist.table.button.deletefile.title",
			"file in tree.files",
			"loadMore",
			"orderColumns",
			"orderColumns(",
			"areaDesc",
			"orderAreaDesc",
			"signusOrder",
			"orderAreaDesc = \"\";",
			"scope.orderAreaDesc = ",
			"scope.orderAreaDesc =",
			"scope.orderAreaDesc",
			"\n              ",
			"$scope.orderAreaDesc = \"\";\n",
			"$scope.orderAreaDesc = \"\";",
			"orderAreaDesc",
			"orderColumns",
			"organization.search.form.table.areadesc",
			"organization.detailuser.form.label",
			"subcolum-izq",
			"modal-center",
			"detail-box-devices",
			"subcolum-izq",
			"etail-box-devices-center"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
			"Deshabilitado",
			"Habilitado"
		],
		"reverse": false,
		"show_context": true,
		"use_buffer2": true,
		"whole_word": true,
		"wrap": true
	},
	"groups":
	[
		{
			"selected": 1,
			"sheets":
			[
				{
					"buffer": 0,
					"file": "karma.conf.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1825,
						"regions":
						{
						},
						"selection":
						[
							[
								838,
								838
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 90.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "SpecRunner.html",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1215,
						"regions":
						{
						},
						"selection":
						[
							[
								411,
								411
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 45.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "node_modules/jasmine-core/lib/jasmine-core/jasmine.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 19608,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "package.json",
					"semi_transient": true,
					"settings":
					{
						"buffer_size": 1231,
						"regions":
						{
						},
						"selection":
						[
							[
								882,
								882
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JSON.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": -0.0,
						"translation.y": 90.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "test/spec/controllers/home.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2804,
						"regions":
						{
						},
						"selection":
						[
							[
								915,
								915
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "test/spec/controllers/home2.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 663,
						"regions":
						{
						},
						"selection":
						[
							[
								112,
								112
							]
						],
						"settings":
						{
							"open_with_edit": true,
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "test/spec/controllers/home3.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 699,
						"regions":
						{
						},
						"selection":
						[
							[
								570,
								570
							]
						],
						"settings":
						{
							"open_with_edit": true,
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"type": "text"
				},
				{
					"buffer": 7,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2199218,
						"regions":
						{
							"match":
							{
								"flags": 112,
								"regions":
								[
									[
										322,
										327
									],
									[
										663,
										668
									],
									[
										988,
										993
									],
									[
										1108,
										1113
									],
									[
										1462,
										1467
									],
									[
										1582,
										1587
									],
									[
										1991,
										1996
									],
									[
										2437,
										2442
									],
									[
										2924,
										2929
									],
									[
										3306,
										3311
									],
									[
										3490,
										3495
									],
									[
										3676,
										3681
									],
									[
										3865,
										3870
									],
									[
										4316,
										4321
									],
									[
										4583,
										4588
									],
									[
										4850,
										4855
									],
									[
										5135,
										5140
									],
									[
										5507,
										5512
									],
									[
										5863,
										5868
									],
									[
										6041,
										6046
									],
									[
										6219,
										6224
									],
									[
										6400,
										6405
									],
									[
										6804,
										6809
									],
									[
										7131,
										7136
									],
									[
										7251,
										7256
									],
									[
										7607,
										7612
									],
									[
										7727,
										7732
									],
									[
										8100,
										8105
									],
									[
										8504,
										8509
									],
									[
										8682,
										8687
									],
									[
										8860,
										8865
									],
									[
										9041,
										9046
									],
									[
										9477,
										9482
									],
									[
										9925,
										9930
									],
									[
										10414,
										10419
									],
									[
										10798,
										10803
									],
									[
										10982,
										10987
									],
									[
										11168,
										11173
									],
									[
										11357,
										11362
									],
									[
										11810,
										11815
									],
									[
										12077,
										12082
									],
									[
										12344,
										12349
									],
									[
										12629,
										12634
									],
									[
										13057,
										13062
									],
									[
										13386,
										13391
									],
									[
										13506,
										13511
									],
									[
										13864,
										13869
									],
									[
										13984,
										13989
									],
									[
										14397,
										14402
									],
									[
										14847,
										14852
									],
									[
										15338,
										15343
									],
									[
										15724,
										15729
									],
									[
										15908,
										15913
									],
									[
										16094,
										16099
									],
									[
										16283,
										16288
									],
									[
										16738,
										16743
									],
									[
										17005,
										17010
									],
									[
										17272,
										17277
									],
									[
										17557,
										17562
									],
									[
										17933,
										17938
									],
									[
										18293,
										18298
									],
									[
										18471,
										18476
									],
									[
										18649,
										18654
									],
									[
										18830,
										18835
									],
									[
										19238,
										19243
									],
									[
										19569,
										19574
									],
									[
										19689,
										19694
									],
									[
										20049,
										20054
									],
									[
										20169,
										20174
									],
									[
										20546,
										20551
									],
									[
										20954,
										20959
									],
									[
										21132,
										21137
									],
									[
										21310,
										21315
									],
									[
										21491,
										21496
									],
									[
										21931,
										21936
									],
									[
										22383,
										22388
									],
									[
										22876,
										22881
									],
									[
										23264,
										23269
									],
									[
										23448,
										23453
									],
									[
										23634,
										23639
									],
									[
										23823,
										23828
									],
									[
										24280,
										24285
									],
									[
										24547,
										24552
									],
									[
										24814,
										24819
									],
									[
										25099,
										25104
									],
									[
										25526,
										25531
									],
									[
										25854,
										25859
									],
									[
										25974,
										25979
									],
									[
										26331,
										26336
									],
									[
										26451,
										26456
									],
									[
										26863,
										26868
									],
									[
										27312,
										27317
									],
									[
										27802,
										27807
									],
									[
										28187,
										28192
									],
									[
										28371,
										28376
									],
									[
										28557,
										28562
									],
									[
										28746,
										28751
									],
									[
										29200,
										29205
									],
									[
										29467,
										29472
									],
									[
										29734,
										29739
									],
									[
										30019,
										30024
									],
									[
										30394,
										30399
									],
									[
										30753,
										30758
									],
									[
										30931,
										30936
									],
									[
										31109,
										31114
									],
									[
										31290,
										31295
									],
									[
										31697,
										31702
									],
									[
										32027,
										32032
									],
									[
										32147,
										32152
									],
									[
										32506,
										32511
									],
									[
										32626,
										32631
									],
									[
										33002,
										33007
									],
									[
										33409,
										33414
									],
									[
										33587,
										33592
									],
									[
										33765,
										33770
									],
									[
										33946,
										33951
									],
									[
										34385,
										34390
									],
									[
										34836,
										34841
									],
									[
										35328,
										35333
									],
									[
										35715,
										35720
									],
									[
										35899,
										35904
									],
									[
										36085,
										36090
									],
									[
										36274,
										36279
									],
									[
										36730,
										36735
									],
									[
										36997,
										37002
									],
									[
										37264,
										37269
									],
									[
										37549,
										37554
									],
									[
										37979,
										37984
									],
									[
										38310,
										38315
									],
									[
										38430,
										38435
									],
									[
										38790,
										38795
									],
									[
										38910,
										38915
									],
									[
										39325,
										39330
									],
									[
										39777,
										39782
									],
									[
										40270,
										40275
									],
									[
										40658,
										40663
									],
									[
										40842,
										40847
									],
									[
										41028,
										41033
									],
									[
										41217,
										41222
									],
									[
										41674,
										41679
									],
									[
										41941,
										41946
									],
									[
										42208,
										42213
									],
									[
										42493,
										42498
									],
									[
										42871,
										42876
									],
									[
										43233,
										43238
									],
									[
										43411,
										43416
									],
									[
										43589,
										43594
									],
									[
										43770,
										43775
									],
									[
										44093,
										44098
									],
									[
										44435,
										44440
									],
									[
										44761,
										44766
									],
									[
										45004,
										45009
									],
									[
										45302,
										45307
									],
									[
										45679,
										45684
									],
									[
										45968,
										45973
									],
									[
										46358,
										46363
									],
									[
										46658,
										46663
									],
									[
										46778,
										46783
									],
									[
										47054,
										47059
									],
									[
										47174,
										47179
									],
									[
										47486,
										47491
									],
									[
										47648,
										47653
									],
									[
										47862,
										47867
									],
									[
										48223,
										48228
									],
									[
										48579,
										48584
									],
									[
										48757,
										48762
									],
									[
										48935,
										48940
									],
									[
										49116,
										49121
									],
									[
										49525,
										49530
									],
									[
										49946,
										49951
									],
									[
										50408,
										50413
									],
									[
										50765,
										50770
									],
									[
										50949,
										50954
									],
									[
										51135,
										51140
									],
									[
										51324,
										51329
									],
									[
										51750,
										51755
									],
									[
										52017,
										52022
									],
									[
										52284,
										52289
									],
									[
										52569,
										52574
									],
									[
										52996,
										53001
									],
									[
										53411,
										53416
									],
									[
										53714,
										53719
									],
									[
										53918,
										53923
									],
									[
										54201,
										54206
									],
									[
										54449,
										54454
									],
									[
										54722,
										54727
									],
									[
										88274,
										88279
									],
									[
										94815,
										94820
									],
									[
										95055,
										95060
									],
									[
										95362,
										95367
									],
									[
										95661,
										95666
									],
									[
										95938,
										95943
									],
									[
										96269,
										96274
									],
									[
										96574,
										96579
									],
									[
										96888,
										96893
									],
									[
										97133,
										97138
									],
									[
										97472,
										97477
									],
									[
										97802,
										97807
									],
									[
										245134,
										245139
									],
									[
										245141,
										245146
									],
									[
										287062,
										287067
									],
									[
										287209,
										287214
									],
									[
										355672,
										355677
									],
									[
										460150,
										460155
									],
									[
										460165,
										460170
									],
									[
										710094,
										710099
									],
									[
										961706,
										961711
									],
									[
										961713,
										961718
									],
									[
										1003634,
										1003639
									],
									[
										1003781,
										1003786
									],
									[
										1072259,
										1072264
									],
									[
										1177077,
										1177082
									],
									[
										1177092,
										1177097
									],
									[
										1427383,
										1427388
									],
									[
										1562473,
										1562478
									],
									[
										1569049,
										1569054
									],
									[
										1570016,
										1570021
									],
									[
										1570984,
										1570989
									],
									[
										1571449,
										1571454
									],
									[
										1596125,
										1596130
									],
									[
										2016927,
										2016932
									],
									[
										2040562,
										2040567
									],
									[
										2040767,
										2040772
									],
									[
										2040934,
										2040939
									],
									[
										2041145,
										2041150
									],
									[
										2067689,
										2067694
									],
									[
										2068249,
										2068254
									],
									[
										2099765,
										2099770
									],
									[
										2138474,
										2138479
									],
									[
										2138633,
										2138638
									],
									[
										2196335,
										2196340
									],
									[
										2196597,
										2196602
									],
									[
										2196810,
										2196815
									],
									[
										2197022,
										2197027
									],
									[
										2197270,
										2197275
									],
									[
										2197602,
										2197607
									],
									[
										2197796,
										2197801
									],
									[
										2198080,
										2198085
									],
									[
										2198355,
										2198360
									],
									[
										2198594,
										2198599
									],
									[
										2198905,
										2198910
									],
									[
										2199133,
										2199138
									]
								],
								"scope": ""
							}
						},
						"selection":
						[
							[
								1047,
								1047
							]
						],
						"settings":
						{
							"detect_indentation": false,
							"line_numbers": false,
							"output_tag": 1,
							"result_base_dir": "",
							"result_file_regex": "^([A-Za-z\\\\/<].*):$",
							"result_line_regex": "^ +([0-9]+):",
							"scroll_past_end": true,
							"syntax": "Packages/Default/Find Results.hidden-tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 360.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "node_modules/jasmine-core/lib/jasmine-core/jasmine.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 80681,
						"regions":
						{
						},
						"selection":
						[
							[
								22939,
								22939
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 12316.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "app/bower_components/es5-shim/tests/lib/jasmine.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 66781,
						"regions":
						{
						},
						"selection":
						[
							[
								1085,
								1085
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 274.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "app/scripts/controllers/home.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3300,
						"regions":
						{
						},
						"selection":
						[
							[
								2961,
								2961
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"type": "text"
				},
				{
					"buffer": 11,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 33319,
						"regions":
						{
						},
						"selection":
						[
							[
								1,
								1
							]
						],
						"settings":
						{
							"auto_name": "[",
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"type": "text"
				},
				{
					"buffer": 12,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1273,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_name": "'{\"results\" : [{\"address_components\" : [{\"long_nam",
							"syntax": "Packages/Text/Plain text.tmLanguage",
							"tab_size": 3,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 23.0
	},
	"input":
	{
		"height": 33.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.find_results":
	{
		"height": 0.0
	},
	"project": "api.lobupla.sublime-project",
	"replace":
	{
		"height": 42.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"selected_items":
		[
			[
				"jasmine.css",
				"node_modules/jasmine-core/lib/jasmine-core/jasmine.css"
			],
			[
				"jasmine",
				"node_modules/jasmine-core/lib/jasmine-core/jasmine.js"
			],
			[
				"/initiative/search.jsp",
				"src/main/webapp/pages/initiative/search.jsp"
			],
			[
				"js/angular/admin/services.js",
				"src/main/webapp/js/angular/admin/services.js"
			],
			[
				"js/angular/admin/controllers.js",
				"src/main/webapp/js/angular/admin/controllers.js"
			],
			[
				"js/angular/admin/app.js",
				"src/main/webapp/js/angular/admin/app.js"
			],
			[
				"src/main/webapp/js/angular/repository/controllers.js",
				"src/main/webapp/js/angular/repository/controllers.js"
			],
			[
				"src/main/webapp/pages/repository/repository.jsp",
				"src/main/webapp/pages/repository/repository.jsp"
			],
			[
				"webapp/pages/repository/repository.jsp",
				"src/main/webapp/pages/repository/repository.jsp"
			],
			[
				"src/main/java/com/ciber/ssii/isban/gae/server/i18n/textfront.properties",
				"src/main/java/com/ciber/ssii/isban/gae/server/i18n/textfront.properties"
			],
			[
				"repository.jsp",
				"src/main/webapp/pages/repository/repository.jsp"
			],
			[
				".cfg",
				"rippled/doc/rippled-example.cfg"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"selected_items":
		[
		],
		"width": 0.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 279.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
